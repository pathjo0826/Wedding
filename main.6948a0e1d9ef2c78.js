"use strict";(self.webpackChunkwedding_app=self.webpackChunkwedding_app||[]).push([[792],{401:(ns,ir,et)=>{et.d(ir,{Am:()=>Js,Bd:()=>le,FA:()=>pe,Fy:()=>fr,I9:()=>Ui,Im:()=>Dr,Ku:()=>rs,Ll:()=>Ot,T9:()=>Kt,Uj:()=>at,XA:()=>Tt,ZQ:()=>Be,bD:()=>Ys,c1:()=>Ht,cY:()=>Nt,eX:()=>X,g:()=>ee,gR:()=>Vn,hp:()=>Zs,jZ:()=>vn,lT:()=>_s,lV:()=>ai,mS:()=>yt,nr:()=>ys,p7:()=>Qt,sr:()=>Cr,tD:()=>bn,u:()=>oe,zW:()=>q,zw:()=>Ne});const ne=function(S){const P=[];let k=0;for(let B=0;B<S.length;B++){let W=S.charCodeAt(B);W<128?P[k++]=W:W<2048?(P[k++]=W>>6|192,P[k++]=63&W|128):55296==(64512&W)&&B+1<S.length&&56320==(64512&S.charCodeAt(B+1))?(W=65536+((1023&W)<<10)+(1023&S.charCodeAt(++B)),P[k++]=W>>18|240,P[k++]=W>>12&63|128,P[k++]=W>>6&63|128,P[k++]=63&W|128):(P[k++]=W>>12|224,P[k++]=W>>6&63|128,P[k++]=63&W|128)}return P},rn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(S,P){if(!Array.isArray(S))throw Error("encodeByteArray takes an array as a parameter");this.init_();const k=P?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let W=0;W<S.length;W+=3){const Se=S[W],Ce=W+1<S.length,jt=Ce?S[W+1]:0,Sn=W+2<S.length,Le=Sn?S[W+2]:0;let Xn=(15&jt)<<2|Le>>6,is=63&Le;Sn||(is=64,Ce||(Xn=64)),B.push(k[Se>>2],k[(3&Se)<<4|jt>>4],k[Xn],k[is])}return B.join("")},encodeString(S,P){return this.HAS_NATIVE_SUPPORT&&!P?btoa(S):this.encodeByteArray(ne(S),P)},decodeString(S,P){return this.HAS_NATIVE_SUPPORT&&!P?atob(S):function(S){const P=[];let k=0,B=0;for(;k<S.length;){const W=S[k++];if(W<128)P[B++]=String.fromCharCode(W);else if(W>191&&W<224){const Se=S[k++];P[B++]=String.fromCharCode((31&W)<<6|63&Se)}else if(W>239&&W<365){const Sn=((7&W)<<18|(63&S[k++])<<12|(63&S[k++])<<6|63&S[k++])-65536;P[B++]=String.fromCharCode(55296+(Sn>>10)),P[B++]=String.fromCharCode(56320+(1023&Sn))}else{const Se=S[k++],Ce=S[k++];P[B++]=String.fromCharCode((15&W)<<12|(63&Se)<<6|63&Ce)}}return P.join("")}(this.decodeStringToByteArray(S,P))},decodeStringToByteArray(S,P){this.init_();const k=P?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let W=0;W<S.length;){const Se=k[S.charAt(W++)],jt=W<S.length?k[S.charAt(W)]:0;++W;const Le=W<S.length?k[S.charAt(W)]:64;++W;const Ue=W<S.length?k[S.charAt(W)]:64;if(++W,null==Se||null==jt||null==Le||null==Ue)throw new sn;B.push(Se<<2|jt>>4),64!==Le&&(B.push(jt<<4&240|Le>>2),64!==Ue&&B.push(Le<<6&192|Ue))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let S=0;S<this.ENCODED_VALS.length;S++)this.byteToCharMap_[S]=this.ENCODED_VALS.charAt(S),this.charToByteMap_[this.byteToCharMap_[S]]=S,this.byteToCharMapWebSafe_[S]=this.ENCODED_VALS_WEBSAFE.charAt(S),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[S]]=S,S>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(S)]=S,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(S)]=S)}}};class sn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const at=function(S){return function(S){const P=ne(S);return rn.encodeByteArray(P,!0)}(S).replace(/\./g,"")},oe=function(S){try{return rn.decodeString(S,!0)}catch(P){console.error("base64Decode failed: ",P)}return null};function Ne(S,P){if(!(P instanceof Object))return P;switch(P.constructor){case Date:return new Date(P.getTime());case Object:void 0===S&&(S={});break;case Array:S=[];break;default:return P}for(const k in P)!P.hasOwnProperty(k)||!ut(k)||(S[k]=Ne(S[k],P[k]));return S}function ut(S){return"__proto__"!==S}function yt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const nt=()=>{try{return yt().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const S=process.env.__FIREBASE_DEFAULTS__;return S?JSON.parse(S):void 0})()||(()=>{if(typeof document>"u")return;let S;try{S=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const P=S&&oe(S[1]);return P&&JSON.parse(P)})()}catch(S){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${S}`)}},Kt=()=>{var S;return null===(S=nt())||void 0===S?void 0:S.config},Tt=S=>{var P;return null===(P=nt())||void 0===P?void 0:P[`_${S}`]};class Nt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((P,k)=>{this.resolve=P,this.reject=k})}wrapCallback(P){return(k,B)=>{k?this.reject(k):this.resolve(B),"function"==typeof P&&(this.promise.catch(()=>{}),1===P.length?P(k):P(k,B))}}}function fr(S,P){if(S.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=P||"demo-project",W=S.iat||0,Se=S.sub||S.user_id;if(!Se)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ce=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:W,exp:W+3600,auth_time:W,sub:Se,user_id:Se,firebase:{sign_in_provider:"custom",identities:{}}},S);return[at(JSON.stringify({alg:"none",type:"JWT"})),at(JSON.stringify(Ce)),""].join(".")}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function vn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function Ot(){var S;const P=null===(S=nt())||void 0===S?void 0:S.forceEnvironment;if("node"===P)return!0;if("browser"===P)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function le(){return typeof window<"u"||Qt()}function Qt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ht(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Cr(){const S="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof S&&void 0!==S.id}function ai(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _s(){const S=Be();return S.indexOf("MSIE ")>=0||S.indexOf("Trident/")>=0}function ys(){return!Ot()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){try{return"object"==typeof indexedDB}catch{return!1}}function X(){return new Promise((S,P)=>{try{let k=!0;const B="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(B);W.onsuccess=()=>{W.result.close(),k||self.indexedDB.deleteDatabase(B),S(!0)},W.onupgradeneeded=()=>{k=!1},W.onerror=()=>{var Se;P((null===(Se=W.error)||void 0===Se?void 0:Se.message)||"")}}catch(k){P(k)}})}class ee extends Error{constructor(P,k,B){super(k),this.code=P,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pe.prototype.create)}}class pe{constructor(P,k,B){this.service=P,this.serviceName=k,this.errors=B}create(P,...k){const B=k[0]||{},W=`${this.service}/${P}`,Se=this.errors[P],Ce=Se?function fe(S,P){return S.replace(rt,(k,B)=>{const W=P[B];return null!=W?String(W):`<${B}?>`})}(Se,B):"Error";return new ee(W,`${this.serviceName}: ${Ce} (${W}).`,B)}}const rt=/\{\$([^}]+)}/g;function Vn(S,P){return Object.prototype.hasOwnProperty.call(S,P)}function Dr(S){for(const P in S)if(Object.prototype.hasOwnProperty.call(S,P))return!1;return!0}function Ys(S,P){if(S===P)return!0;const k=Object.keys(S),B=Object.keys(P);for(const W of k){if(!B.includes(W))return!1;const Se=S[W],Ce=P[W];if(vs(Se)&&vs(Ce)){if(!Ys(Se,Ce))return!1}else if(Se!==Ce)return!1}for(const W of B)if(!k.includes(W))return!1;return!0}function vs(S){return null!==S&&"object"==typeof S}function Js(S){const P=[];for(const[k,B]of Object.entries(S))Array.isArray(B)?B.forEach(W=>{P.push(encodeURIComponent(k)+"="+encodeURIComponent(W))}):P.push(encodeURIComponent(k)+"="+encodeURIComponent(B));return P.length?"&"+P.join("&"):""}function Ui(S){const P={};return S.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[W,Se]=B.split("=");P[decodeURIComponent(W)]=decodeURIComponent(Se)}}),P}function Zs(S){const P=S.indexOf("?");if(!P)return"";const k=S.indexOf("#",P);return S.substring(P,k>0?k:void 0)}function bn(S,P){const k=new br(S,P);return k.subscribe.bind(k)}class br{constructor(P,k){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=k,this.task.then(()=>{P(this)}).catch(B=>{this.error(B)})}next(P){this.forEachObserver(k=>{k.next(P)})}error(P){this.forEachObserver(k=>{k.error(P)}),this.close(P)}complete(){this.forEachObserver(P=>{P.complete()}),this.close()}subscribe(P,k,B){let W;if(void 0===P&&void 0===k&&void 0===B)throw new Error("Missing Observer.");W=function Bi(S,P){if("object"!=typeof S||null===S)return!1;for(const k of P)if(k in S&&"function"==typeof S[k])return!0;return!1}(P,["next","error","complete"])?P:{next:P,error:k,complete:B},void 0===W.next&&(W.next=En),void 0===W.error&&(W.error=En),void 0===W.complete&&(W.complete=En);const Se=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch{}}),this.observers.push(W),Se}unsubscribeOne(P){void 0===this.observers||void 0===this.observers[P]||(delete this.observers[P],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(P){if(!this.finalized)for(let k=0;k<this.observers.length;k++)this.sendOne(k,P)}sendOne(P,k){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[P])try{k(this.observers[P])}catch(B){typeof console<"u"&&console.error&&console.error(B)}})}close(P){this.finalized||(this.finalized=!0,void 0!==P&&(this.finalError=P),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function En(){}function rs(S){return S&&S._delegate?S._delegate:S}},503:(ns,ir,et)=>{function C(n){return"function"==typeof n}function ze(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Pe=ze(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ne(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class It{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(C(r))try{r()}catch(s){e=s instanceof Pe?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Hn(s)}catch(o){e=e??[],o instanceof Pe?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Pe(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Hn(e);else{if(e instanceof It){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ne(t,e)}remove(e){const{_finalizers:t}=this;t&&ne(t,e),e instanceof It&&e._removeParent(this)}}It.EMPTY=(()=>{const n=new It;return n.closed=!0,n})();const rn=It.EMPTY;function sn(n){return n instanceof It||n&&"closed"in n&&C(n.remove)&&C(n.add)&&C(n.unsubscribe)}function Hn(n){C(n)?n():n.unsubscribe()}const at={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},oe={setTimeout(n,e,...t){const{delegate:r}=oe;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=oe;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function me(n){oe.setTimeout(()=>{const{onUnhandledError:e}=at;if(!e)throw n;e(n)})}function Ne(){}const ut=Et("C",void 0,void 0);function Et(n,e,t){return{kind:n,value:e,error:t}}let qe=null;function nt(n){if(at.useDeprecatedSynchronousErrorHandling){const e=!qe;if(e&&(qe={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=qe;if(qe=null,t)throw r}}else n()}class Zn extends It{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sn(e)&&e.add(this)):this.destination=le}static create(e,t,r){return new fr(e,t,r)}next(e){this.isStopped?Ot(function Yn(n){return Et("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ot(function yt(n){return Et("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ot(ut,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Kt=Function.prototype.bind;function Tt(n,e){return Kt.call(n,e)}class Nt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Be(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Be(r)}else Be(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Be(t)}}}class fr extends Zn{constructor(e,t,r){let i;if(super(),C(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&at.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Tt(e.next,s),error:e.error&&Tt(e.error,s),complete:e.complete&&Tt(e.complete,s)}):i=e}this.destination=new Nt(i)}}function Be(n){at.useDeprecatedSynchronousErrorHandling?function Jn(n){at.useDeprecatedSynchronousErrorHandling&&qe&&(qe.errorThrown=!0,qe.error=n)}(n):me(n)}function Ot(n,e){const{onStoppedNotification:t}=at;t&&oe.setTimeout(()=>t(n,e))}const le={closed:!0,next:Ne,error:function vn(n){throw n},complete:Ne},Qt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ht(n){return n}function ai(n){return 0===n.length?Ht:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let ct=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Li(n){return n&&n instanceof Zn||function Go(n){return n&&C(n.next)&&C(n.error)&&C(n.complete)}(n)&&sn(n)}(t)?t:new fr(t,r,i);return nt(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=_s(r))((i,s)=>{const o=new fr({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Qt](){return this}pipe(...t){return ai(t)(this)}toPromise(t){return new(t=_s(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function _s(n){var e;return null!==(e=n??at.Promise)&&void 0!==e?e:Promise}const ys=ze(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let q=(()=>{class n extends ct{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new X(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ys}next(t){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){nt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?rn:(this.currentObservers=null,s.push(t),new It(()=>{this.currentObservers=null,ne(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new ct;return t.source=this,t}}return n.create=(e,t)=>new X(e,t),n})();class X extends q{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:rn}}function re(n){return C(n?.lift)}function j(n){return e=>{if(re(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ee(n,e,t,r,i){return new pe(n,e,t,r,i)}class pe extends Zn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function fe(n,e){return j((t,r)=>{let i=0;t.subscribe(ee(r,s=>{r.next(n.call(e,s,i++))}))})}var rt=et(635);const Ct=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function je(n){return C(n?.then)}function wt(n){return C(n[Qt])}function fn(n){return Symbol.asyncIterator&&C(n?.[Symbol.asyncIterator])}function vi(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Dn=function vt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Vn(n){return C(n?.[Dn])}function sr(n){return(0,rt.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,rt.N3)(t.read());if(i)return yield(0,rt.N3)(void 0);yield yield(0,rt.N3)(r)}}finally{t.releaseLock()}})}function Dr(n){return C(n?.getReader)}function zn(n){if(n instanceof ct)return n;if(null!=n){if(wt(n))return function Ys(n){return new ct(e=>{const t=n[Qt]();if(C(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Ct(n))return function vs(n){return new ct(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(je(n))return function Ac(n){return new ct(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,me)})}(n);if(fn(n))return Ui(n);if(Vn(n))return function Js(n){return new ct(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Dr(n))return function Zs(n){return Ui(sr(n))}(n)}throw vi(n)}function Ui(n){return new ct(e=>{(function ui(n,e){var t,r,i,s;return(0,rt.sH)(this,void 0,void 0,function*(){try{for(t=(0,rt.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function bn(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function In(n,e,t=1/0){return C(e)?In((r,i)=>fe((s,o)=>e(r,s,i,o))(zn(n(r,i))),t):("number"==typeof e&&(t=e),j((r,i)=>function br(n,e,t,r,i,s,o,a){const u=[];let d=0,g=0,m=!1;const v=()=>{m&&!u.length&&!d&&e.complete()},w=D=>d<r?T(D):u.push(D),T=D=>{s&&e.next(D),d++;let M=!1;zn(t(D,g++)).subscribe(ee(e,G=>{i?.(G),s?w(G):e.next(G)},()=>{M=!0},void 0,()=>{if(M)try{for(d--;u.length&&d<r;){const G=u.shift();o?bn(e,o,()=>T(G)):T(G)}v()}catch(G){e.error(G)}}))};return n.subscribe(ee(e,w,()=>{m=!0,v()})),()=>{a?.()}}(r,i,n,t)))}function Bi(n=1/0){return In(Ht,n)}const En=new ct(n=>n.complete());function Sr(n){return n[n.length-1]}function Xs(n){return C(Sr(n))?n.pop():void 0}function Is(n){return function Ko(n){return n&&C(n.schedule)}(Sr(n))?n.pop():void 0}function qr(n,e=0){return j((t,r)=>{t.subscribe(ee(r,i=>bn(r,n,()=>r.next(i),e),()=>bn(r,n,()=>r.complete(),e),i=>bn(r,n,()=>r.error(i),e)))})}function Rr(n,e=0){return j((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Yo(n,e){if(!n)throw new Error("Iterable cannot be null");return new ct(t=>{bn(t,e,()=>{const r=n[Symbol.asyncIterator]();bn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function S(n,e){return e?function rs(n,e){if(null!=n){if(wt(n))return function eo(n,e){return zn(n).pipe(Rr(e),qr(e))}(n,e);if(Ct(n))return function to(n,e){return new ct(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(je(n))return function Qo(n,e){return zn(n).pipe(Rr(e),qr(e))}(n,e);if(fn(n))return Yo(n,e);if(Vn(n))return function Tc(n,e){return new ct(t=>{let r;return bn(t,e,()=>{r=n[Dn](),bn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>C(r?.return)&&r.return()})}(n,e);if(Dr(n))return function Jo(n,e){return Yo(sr(n),e)}(n,e)}throw vi(n)}(n,e):zn(n)}function P(...n){const e=Is(n),t=function pr(n,e){return"number"==typeof Sr(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?zn(r[0]):Bi(t)(S(r,e)):En}class k extends q{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function B(...n){return S(n,Is(n))}function W(n={}){const{connector:e=(()=>new q),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,d=0,g=!1,m=!1;const v=()=>{a?.unsubscribe(),a=void 0},w=()=>{v(),o=u=void 0,g=m=!1},T=()=>{const D=o;w(),D?.unsubscribe()};return j((D,M)=>{d++,!m&&!g&&v();const G=u=u??e();M.add(()=>{d--,0===d&&!m&&!g&&(a=Se(T,i))}),G.subscribe(M),!o&&d>0&&(o=new fr({next:F=>G.next(F),error:F=>{m=!0,v(),a=Se(w,t,F),G.error(F)},complete:()=>{g=!0,v(),a=Se(w,r),G.complete()}}),zn(D).subscribe(o))})(s)}}function Se(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new fr({next:()=>{r.unsubscribe(),n()}});return zn(e(...t)).subscribe(r)}function Ce(n,e){return j((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(ee(r,u=>{i?.unsubscribe();let d=0;const g=s++;zn(n(u,g)).subscribe(i=ee(r,m=>r.next(e?e(u,m,g,d++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function jt(n,e=Ht){return n=n??Sn,j((t,r)=>{let i,s=!0;t.subscribe(ee(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Sn(n,e){return n===e}function Le(n){for(let e in n)if(n[e]===Le)return e;throw Error("Could not find renamed property on target object.")}function wn(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ue(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ue).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Xn(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const is=Le({__forward_ref__:Le});function Dt(n){return n.__forward_ref__=Dt,n.toString=function(){return Ue(this())},n}function $e(n){return $i(n)?n():n}function $i(n){return"function"==typeof n&&n.hasOwnProperty(is)&&n.__forward_ref__===Dt}function Zo(n){return n&&!!n.\u0275providers}const ss="https://g.co/ng/security#xss";class de extends Error{constructor(e,t){super(function J(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function x(n){return"string"==typeof n?n:null==n?"":String(n)}function Xe(n,e){throw new de(-201,!1)}function ci(n,e){null==n&&function Ge(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function ke(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function or(n){return{providers:n.providers||[],imports:n.imports||[]}}function bc(n){return ch(n,nu)||ch(n,no)}function ch(n,e){return n.hasOwnProperty(e)?n[e]:null}function Sc(n){return n&&(n.hasOwnProperty(lh)||n.hasOwnProperty(Ug))?n[lh]:null}const nu=Le({\u0275prov:Le}),lh=Le({\u0275inj:Le}),no=Le({ngInjectableDef:Le}),Ug=Le({ngInjectorDef:Le});var ot=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ot||{});let dh;function Pr(n){const e=dh;return dh=n,e}function Pc(n,e,t){const r=bc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ot.Optional?null:void 0!==e?e:void Xe(Ue(n))}const kt=globalThis;class ye{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ke({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const iu={},su="__NG_DI_FLAG__",Es="ngTempTokenPath",mh=/\n/gm,Ii="__source";let Xo;function ws(n){const e=Xo;return Xo=n,e}function yh(n,e=ot.Default){if(void 0===Xo)throw new de(-203,!1);return null===Xo?Pc(n,void 0,e):Xo.get(n,e&ot.Optional?null:void 0,e)}function _e(n,e=ot.Default){return(function Rc(){return dh}()||yh)($e(n),e)}function be(n,e=ot.Default){return _e(n,Nc(e))}function Nc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ou(n){const e=[];for(let t=0;t<n.length;t++){const r=$e(n[t]);if(Array.isArray(r)){if(0===r.length)throw new de(900,!1);let i,s=ot.Default;for(let o=0;o<r.length;o++){const a=r[o],u=vI(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(_e(i,s))}else e.push(_e(r))}return e}function Ei(n,e){return n[su]=e,n.prototype[su]=e,n}function vI(n){return n[su]}function As(n){return{toString:n}.toString()}var ea=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ea||{}),Fn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Fn||{});const gr={},lt=[],uu=Le({\u0275cmp:Le}),Oc=Le({\u0275dir:Le}),kc=Le({\u0275pipe:Le}),zg=Le({\u0275mod:Le}),Mr=Le({\u0275fac:Le}),cu=Le({__NG_ELEMENT_ID__:Le}),lu=Le({__NG_ENV_ID__:Le});function vh(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Vc(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Wr(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Fc(n){return 3===n||4===n||6===n}function Wr(n){return 64===n.charCodeAt(0)}function ta(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||qg(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function qg(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Lc="ng-template";function Uc(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==vh(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Ih(n){return 4===n.type&&n.value!==Lc}function Gg(n,e,t){return e===(4!==n.type||t?n.value:Lc)}function EI(n,e,t){let r=4;const i=n.attrs||[],s=function wh(n){for(let e=0;e<n.length;e++)if(Fc(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Gg(n,u,t)||""===u&&1===e.length){if(Kr(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!Uc(n.attrs,d,t)){if(Kr(r))return!1;o=!0}continue}const m=Eh(8&r?"class":u,i,Ih(n),t);if(-1===m){if(Kr(r))return!1;o=!0;continue}if(""!==d){let v;v=m>s?"":i[m+1].toLowerCase();const w=8&r?v:null;if(w&&-1!==vh(w,d,0)||2&r&&d!==v){if(Kr(r))return!1;o=!0}}}}else{if(!o&&!Kr(r)&&!Kr(u))return!1;if(o&&Kr(u))continue;o=!1,r=u|1&r}}return Kr(r)||o}function Kr(n){return 0==(1&n)}function Eh(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Wg(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Bc(n,e,t=!1){for(let r=0;r<e.length;r++)if(EI(n,e[r],t))return!0;return!1}function Th(n,e){return n?":not("+e.trim()+")":e}function Ch(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Kr(o)&&(e+=Th(s,i),i=""),r=o,s=s||!Kr(r);t++}return""!==i&&(e+=Th(s,i)),e}function wi(n){return As(()=>{const e=Yg(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ea.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Fn.Emulated,styles:n.styles||lt,_:null,schemas:n.schemas||null,tView:null,id:""};Hc(t);const r=n.dependencies;return t.directiveDefs=zc(r,!1),t.pipeDefs=zc(r,!0),t.id=function wI(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Kg(n){return ft(n)||Ln(n)}function Sh(n){return null!==n}function Qr(n){return As(()=>({type:n.type,bootstrap:n.bootstrap||lt,declarations:n.declarations||lt,imports:n.imports||lt,exports:n.exports||lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Qg(n,e){if(null==n)return gr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function We(n){return As(()=>{const e=Yg(n);return Hc(e),e})}function ft(n){return n[uu]||null}function Ln(n){return n[Oc]||null}function Gn(n){return n[kc]||null}function mr(n,e){const t=n[zg]||null;if(!t&&!0===e)throw new Error(`Type ${Ue(n)} does not have '\u0275mod' property.`);return t}function Yg(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||gr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||lt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Qg(n.inputs,e),outputs:Qg(n.outputs)}}function Hc(n){n.features?.forEach(e=>e(n))}function zc(n,e){if(!n)return null;const t=e?Gn:Kg;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Sh)}const Yt=0,De=1,Qe=2,Jt=3,Yr=4,du=5,Wn=6,na=7,An=8,zi=9,ra=10,Ye=11,ro=12,Jg=13,Cs=14,Tn=15,io=16,ia=17,li=18,hu=19,qc=20,Ds=21,Ai=22,fu=23,so=24,dt=25,Gc=1,Wc=2,qi=7,oo=9,er=11;function xr(n){return Array.isArray(n)&&"object"==typeof n[Gc]}function _r(n){return Array.isArray(n)&&!0===n[Gc]}function Zg(n){return 0!=(4&n.flags)}function sa(n){return n.componentOffset>-1}function Mh(n){return 1==(1&n.flags)}function Jr(n){return!!n.template}function xh(n){return 0!=(512&n[Qe])}function ao(n,e){return n.hasOwnProperty(Mr)?n[Mr]:null}let Zt=null,Qc=!1;function di(n){const e=Zt;return Zt=n,e}const aa={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Cn(n){if(!ua(n)||n.dirty){if(!n.producerMustRecompute(n)&&!om(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function sm(n){n.dirty=!0,function im(n){if(void 0===n.liveConsumerNode)return;const e=Qc;Qc=!0;try{for(const t of n.liveConsumerNode)t.dirty||sm(t)}finally{Qc=e}}(n),n.consumerMarkedDirty?.(n)}function mu(n){return n&&(n.nextProducerIndex=0),di(n)}function kh(n,e){if(di(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(ua(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)co(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function om(n){Gi(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Cn(t),r!==t.version))return!0}return!1}function Vh(n){if(Gi(n),ua(n))for(let e=0;e<n.producerNode.length;e++)co(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function co(n,e){if(function _u(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Gi(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)co(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Gi(i),i.producerIndexOfThis[r]=e}}function ua(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Gi(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Lh=null;const Jc=()=>{},xI=(()=>({...aa,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:Jc}))();class NI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function hi(){return Bh}function Bh(n){return n.type.prototype.ngOnChanges&&(n.setInput=kI),OI}function OI(){const n=Zc(this),e=n?.current;if(e){const t=n.previous;if(t===gr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function kI(n,e,t,r){const i=this.declaredInputs[t],s=Zc(n)||function VI(n,e){return n[pm]=e}(n,{previous:gr,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new NI(u&&u.currentValue,e,a===gr),n[r]=e}hi.ngInherit=!0;const pm="__ngSimpleChanges__";function Zc(n){return n[pm]||null}const fi=function(n,e,t){};function Rt(n){for(;Array.isArray(n);)n=n[Yt];return n}function el(n,e){return Rt(e[n])}function ar(n,e){return Rt(e[n.index])}function bs(n,e){return n.data[e]}function Zr(n,e){const t=e[n];return xr(t)?t:t[Yt]}function us(n,e){return null==e?null:n[e]}function mm(n){n[ia]=0}function BI(n){1024&n[Qe]||(n[Qe]|=1024,_m(n,1))}function tl(n){1024&n[Qe]&&(n[Qe]&=-1025,_m(n,-1))}function _m(n,e){let t=n[Jt];if(null===t)return;t[du]+=e;let r=t;for(t=t[Jt];null!==t&&(1===e&&1===r[du]||-1===e&&0===r[du]);)t[du]+=e,r=t,t=t[Jt]}const He={lFrame:Du(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function il(){return He.bindingsEnabled}function ue(){return He.lFrame.lView}function gt(){return He.lFrame.tView}function tr(){let n=ol();for(;null!==n&&64===n.type;)n=n.parent;return n}function ol(){return He.lFrame.currentTNode}function Wi(n,e){const t=He.lFrame;t.currentTNode=n,t.isParent=e}function Tu(){return He.lFrame.isParent}function lo(){return He.lFrame.bindingIndex++}function Ki(n){const e=He.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Tm(n,e){const t=He.lFrame;t.bindingIndex=t.bindingRootIndex=n,Kh(e)}function Kh(n){He.lFrame.currentDirectiveIndex=n}function Cu(n){He.lFrame.currentQueryIndex=n}function qI(n){const e=n[De];return 2===e.type?e.declTNode:1===e.type?n[Wn]:null}function Dm(n,e,t){if(t&ot.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&ot.Host||(i=qI(s),null===i||(s=s[Cs],10&i.type))););if(null===i)return!1;e=i,n=s}const r=He.lFrame=bm();return r.currentTNode=e,r.lView=n,!0}function ul(n){const e=bm(),t=n[De];He.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function bm(){const n=He.lFrame,e=null===n?null:n.child;return null===e?Du(n):e}function Du(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Sm(){const n=He.lFrame;return He.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Rm=Sm;function Yh(){const n=Sm();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function yr(){return He.lFrame.selectedIndex}function ho(n){He.lFrame.selectedIndex=n}function an(){const n=He.lFrame;return bs(n.tView,n.selectedIndex)}let Mm=!0;function bu(){return Mm}function Ps(n){Mm=n}function cl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:g}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),null!=g&&(n.destroyHooks??=[]).push(t,g)}}function ll(n,e,t){hl(n,e,3,t)}function dl(n,e,t,r){(3&n[Qe])===t&&hl(n,e,t,r)}function Su(n,e){let t=n[Qe];(3&t)===e&&(t&=8191,t+=1,n[Qe]=t)}function hl(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[ia]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[ia]+=65536),(a<s||-1==s)&&(Zh(n,t,e,u),n[ia]=(4294901760&n[ia])+u+2),u++}function xm(n,e){fi(4,n,e);const t=di(null);try{e.call(n)}finally{di(t),fi(5,n,e)}}function Zh(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[Qe]>>13<n[ia]>>16&&(3&n[Qe])===e&&(n[Qe]+=8192,xm(a,s)):xm(a,s)}const ca=-1;class la{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function fl(n){return n!==ca}function Ru(n){return 32767&n}function Pu(n,e){let t=function XI(n){return n>>16}(n),r=e;for(;t>0;)r=r[Cs],t--;return r}let nf=!0;function pl(n){const e=nf;return nf=n,e}const Vm=255,tE=5;let nE=0;const cr={};function gl(n,e){const t=Fm(n,e);if(-1!==t)return t;const r=e[De];r.firstCreatePass&&(n.injectorIndex=e.length,Mu(r.data,n),Mu(e,null),Mu(r.blueprint,null));const i=da(n,e),s=n.injectorIndex;if(fl(i)){const o=Ru(i),a=Pu(i,e),u=a[De].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function Mu(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Fm(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function da(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=xu(i),null===r)return ca;if(t++,i=i[Cs],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return ca}function rf(n,e,t){!function rE(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(cu)&&(r=t[cu]),null==r&&(r=t[cu]=nE++);const i=r&Vm;e.data[n+(i>>tE)]|=1<<i}(n,e,t)}function ml(n,e,t){if(t&ot.Optional||void 0!==n)return n;Xe()}function Lm(n,e,t,r){if(t&ot.Optional&&void 0===r&&(r=null),!(t&(ot.Self|ot.Host))){const i=n[zi],s=Pr(void 0);try{return i?i.get(e,r,t&ot.Optional):Pc(e,r,t&ot.Optional)}finally{Pr(s)}}return ml(r,0,t)}function Um(n,e,t,r=ot.Default,i){if(null!==n){if(2048&e[Qe]&&!(r&ot.Self)){const o=function uE(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Qe]&&!(512&o[Qe]);){const a=_l(s,o,t,r|ot.Self,cr);if(a!==cr)return a;let u=s.parent;if(!u){const d=o[qc];if(d){const g=d.get(t,cr,r);if(g!==cr)return g}u=xu(o),o=o[Cs]}s=u}return i}(n,e,t,r,cr);if(o!==cr)return o}const s=_l(n,e,t,r,cr);if(s!==cr)return s}return Lm(e,t,r,i)}function _l(n,e,t,r,i){const s=function oE(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(cu)?n[cu]:void 0;return"number"==typeof e?e>=0?e&Vm:af:e}(t);if("function"==typeof s){if(!Dm(e,n,r))return r&ot.Host?ml(i,0,r):Lm(e,t,r,i);try{let o;if(o=s(r),null!=o||r&ot.Optional)return o;Xe()}finally{Rm()}}else if("number"==typeof s){let o=null,a=Fm(n,e),u=ca,d=r&ot.Host?e[Tn][Wn]:null;for((-1===a||r&ot.SkipSelf)&&(u=-1===a?da(n,e):e[a+8],u!==ca&&sf(r,!1)?(o=e[De],a=Ru(u),e=Pu(u,e)):a=-1);-1!==a;){const g=e[De];if(Bm(s,a,g.data)){const m=sE(a,e,t,o,r,d);if(m!==cr)return m}u=e[a+8],u!==ca&&sf(r,e[De].data[a+8]===d)&&Bm(s,a,e)?(o=g,a=Ru(u),e=Pu(u,e)):a=-1}}return i}function sE(n,e,t,r,i,s){const o=e[De],a=o.data[n+8],g=function yl(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,g=s>>20,v=i?a+g:n.directiveEnd;for(let w=r?a:a+g;w<v;w++){const T=o[w];if(w<u&&t===T||w>=u&&T.type===t)return w}if(i){const w=o[u];if(w&&Jr(w)&&w.type===t)return u}return null}(a,o,t,null==r?sa(a)&&nf:r!=o&&0!=(3&a.type),i&ot.Host&&s===a);return null!==g?fo(e,o,g,a):cr}function fo(n,e,t,r){let i=n[t];const s=e.data;if(function Nm(n){return n instanceof la}(i)){const o=i;o.resolving&&function Ae(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new de(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Y(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():x(n)}(s[t]));const a=pl(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Pr(o.injectImpl):null;Dm(n,r,ot.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function JI(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Bh(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==d&&Pr(d),pl(a),o.resolving=!1,Rm()}}return i}function Bm(n,e,t){return!!(t[e+(n>>tE)]&1<<n)}function sf(n,e){return!(n&ot.Self||n&ot.Host&&e)}class vr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Um(this._tNode,this._lView,e,Nc(r),t)}}function af(){return new vr(tr(),ue())}function Un(n){return As(()=>{const e=n.prototype.constructor,t=e[Mr]||uf(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Mr]||uf(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function uf(n){return $i(n)?()=>{const e=uf($e(n));return e&&e()}:ao(n)}function xu(n){const e=n[De],t=e.type;return 2===t?e.declTNode:1===t?n[Wn]:null}const fa="__parameters__";function pa(n,e,t){return As(()=>{const r=function cf(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,g){const m=u.hasOwnProperty(fa)?u[fa]:Object.defineProperty(u,fa,{value:[]})[fa];for(;m.length<=g;)m.push(null);return(m[g]=m[g]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Qi(n,e){n.forEach(t=>Array.isArray(t)?Qi(t,e):e(t))}function hf(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Il(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Pn(n,e,t){let r=ga(n,e);return r>=0?n[1|r]=t:(r=~r,function $m(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function El(n,e){const t=ga(n,e);if(t>=0)return n[1|t]}function ga(n,e){return function Hm(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const ku=Ei(pa("Optional"),8),wl=Ei(pa("SkipSelf"),4);function Jm(n){return 128==(128&n.flags)}var ma=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ma||{});const mE=new Map;let HU=0;const yE="__ngContext__";function Or(n,e){xr(e)?(n[yE]=e[hu],function qU(n){mE.set(n[hu],n)}(e)):n[yE]=e}let vE;function IE(n,e){return vE(n,e)}function Tf(n){const e=n[Jt];return _r(e)?e[Jt]:e}function Vb(n){return Lb(n[ro])}function Fb(n){return Lb(n[Yr])}function Lb(n){for(;null!==n&&!_r(n);)n=n[Yr];return n}function Dl(n,e,t,r,i){if(null!=r){let s,o=!1;_r(r)?s=r:xr(r)&&(o=!0,r=r[Yt]);const a=Rt(r);0===n&&null!==t?null==i?$b(e,t,a):Vu(e,t,a,i||null,!0):1===n&&null!==t?Vu(e,t,a,i||null,!0):2===n?function i_(n,e,t){const r=n_(n,e);r&&function lB(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function fB(n,e,t,r,i){const s=t[qi];s!==Rt(t)&&Dl(e,n,r,s,i);for(let a=er;a<t.length;a++){const u=t[a];Df(u[De],u,n,e,r,s)}}(e,n,s,t,i)}}function e_(n,e,t){return n.createElement(e,t)}function Bb(n,e){const t=n[oo],r=t.indexOf(e);tl(e),t.splice(r,1)}function t_(n,e){if(n.length<=er)return;const t=er+e,r=n[t];if(r){const i=r[io];null!==i&&i!==n&&Bb(i,r),e>0&&(n[t-1][Yr]=r[Yr]);const s=Il(n,er+e);!function nB(n,e){Df(n,e,e[Ye],2,null,null),e[Yt]=null,e[Wn]=null}(r[De],r);const o=s[li];null!==o&&o.detachView(s[De]),r[Jt]=null,r[Yr]=null,r[Qe]&=-129}return r}function wE(n,e){if(!(256&e[Qe])){const t=e[Ye];e[fu]&&Vh(e[fu]),e[so]&&Vh(e[so]),t.destroyNode&&Df(n,e,t,3,null,null),function sB(n){let e=n[ro];if(!e)return AE(n[De],n);for(;e;){let t=null;if(xr(e))t=e[ro];else{const r=e[er];r&&(t=r)}if(!t){for(;e&&!e[Yr]&&e!==n;)xr(e)&&AE(e[De],e),e=e[Jt];null===e&&(e=n),xr(e)&&AE(e[De],e),t=e&&e[Yr]}e=t}}(e)}}function AE(n,e){if(!(256&e[Qe])){e[Qe]&=-129,e[Qe]|=256,function cB(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof la)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];fi(4,a,u);try{u.call(a)}finally{fi(5,a,u)}}else{fi(4,i,s);try{s.call(i)}finally{fi(5,i,s)}}}}}(n,e),function uB(n,e){const t=n.cleanup,r=e[na];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[na]=null);const i=e[Ds];if(null!==i){e[Ds]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[De].type&&e[Ye].destroy();const t=e[io];if(null!==t&&_r(e[Jt])){t!==e[Jt]&&Bb(t,e);const r=e[li];null!==r&&r.detachView(n)}!function GU(n){mE.delete(n[hu])}(e)}}function TE(n,e,t){return function jb(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Yt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Fn.None||s===Fn.Emulated)return null}return ar(r,t)}}(n,e.parent,t)}function Vu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function $b(n,e,t){n.appendChild(e,t)}function Hb(n,e,t,r,i){null!==r?Vu(n,e,t,r,i):$b(n,e,t)}function n_(n,e){return n.parentNode(e)}let CE,RE,o_,Gb=function qb(n,e,t){return 40&n.type?ar(n,t):null};function r_(n,e,t,r){const i=TE(n,r,e),s=e[Ye],a=function zb(n,e,t){return Gb(n,e,t)}(r.parent||e[Wn],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)Hb(s,i,t[u],a,!1);else Hb(s,i,t,a,!1);void 0!==CE&&CE(s,r,e,t,i)}function Cf(n,e){if(null!==e){const t=e.type;if(3&t)return ar(e,n);if(4&t)return DE(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Cf(n,r);{const i=n[e.index];return _r(i)?DE(-1,i):Rt(i)}}if(32&t)return IE(e,n)()||Rt(n[e.index]);{const r=Kb(n,e);return null!==r?Array.isArray(r)?r[0]:Cf(Tf(n[Tn]),r):Cf(n,e.next)}}return null}function Kb(n,e){return null!==e?n[Tn][Wn].projection[e.projection]:null}function DE(n,e){const t=er+n+1;if(t<e.length){const r=e[t],i=r[De].firstChild;if(null!==i)return Cf(r,i)}return e[qi]}function bE(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&Or(Rt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)bE(n,e,t.child,r,i,s,!1),Dl(e,n,i,a,s);else if(32&u){const d=IE(t,r);let g;for(;g=d();)Dl(e,n,i,g,s);Dl(e,n,i,a,s)}else 16&u?Yb(n,e,r,t,i,s):Dl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Df(n,e,t,r,i,s){bE(t,r,n.firstChild,e,i,s,!1)}function Yb(n,e,t,r,i,s){const o=t[Tn],u=o[Wn].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Dl(e,n,i,u[d],s);else{let d=u;const g=o[Jt];Jm(r)&&(d.flags|=128),bE(n,e,d,g,i,s,!0)}}function Jb(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Zb(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Vc(n,e,r),null!==i&&Jb(n,e,i),null!==s&&function gB(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function tS(n){return function PE(){if(void 0===o_&&(o_=null,kt.trustedTypes))try{o_=kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return o_}()?.createScriptURL(n)||n}class nS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ss})`}}function _a(n){return n instanceof nS?n.changingThisBreaksApplicationSecurity:n}function bf(n,e){const t=function CB(n){return n instanceof nS&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ss})`)}return t===e}const RB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Rl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Rl||{});function cS(n){const e=Rf();return e?e.sanitize(Rl.URL,n)||"":bf(n,"URL")?_a(n):function ME(n){return(n=String(n)).match(RB)?n:"unsafe:"+n}(x(n))}function lS(n){const e=Rf();if(e)return tS(e.sanitize(Rl.RESOURCE_URL,n)||"");if(bf(n,"ResourceURL"))return tS(_a(n));throw new de(904,!1)}function Rf(){const n=ue();return n&&n[ra].sanitizer}const Pf=new ye("ENVIRONMENT_INITIALIZER"),hS=new ye("INJECTOR",-1),fS=new ye("INJECTOR_DEF_TYPES");class kE{get(e,t=iu){if(t===iu){const r=new Error(`NullInjectorError: No provider for ${Ue(e)}!`);throw r.name="NullInjectorError",r}return t}}function $B(...n){return{\u0275providers:pS(0,n),\u0275fromNgModule:!0}}function pS(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Qi(e,o=>{const a=o;u_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&gS(i,s),t}function gS(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];FE(i,s=>{e(s,r)})}}function u_(n,e,t,r){if(!(n=$e(n)))return!1;let i=null,s=Sc(n);const o=!s&&ft(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=Sc(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)u_(d,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{Qi(s.imports,g=>{u_(g,e,t,r)&&(d||=[],d.push(g))})}finally{}void 0!==d&&gS(d,e)}if(!a){const d=ao(i)||(()=>new i);e({provide:i,useFactory:d,deps:lt},i),e({provide:fS,useValue:i,multi:!0},i),e({provide:Pf,useValue:()=>_e(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=n;FE(u,g=>{e(g,d)})}}}return i!==n&&void 0!==n.providers}function FE(n,e){for(let t of n)Zo(t)&&(t=t.\u0275providers),Array.isArray(t)?FE(t,e):e(t)}const HB=Le({provide:String,useValue:Le});function LE(n){return null!==n&&"object"==typeof n&&HB in n}function Fu(n){return"function"==typeof n}const UE=new ye("Set Injector scope."),c_={},qB={};let BE;function l_(){return void 0===BE&&(BE=new kE),BE}class Di{}class Pl extends Di{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$E(e,o=>this.processProvider(o)),this.records.set(hS,Ml(void 0,this)),i.has("environment")&&this.records.set(Di,Ml(void 0,this));const s=this.records.get(UE);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(fS.multi,lt,ot.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=ws(this),r=Pr(void 0);try{return e()}finally{ws(t),Pr(r)}}get(e,t=iu,r=ot.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(lu))return e[lu](this);r=Nc(r);const s=ws(this),o=Pr(void 0);try{if(!(r&ot.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function YB(n){return"function"==typeof n||"object"==typeof n&&n instanceof ye}(e)&&bc(e);u=d&&this.injectableDefInScope(d)?Ml(jE(e),c_):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&ot.Self?l_():this.parent).get(e,t=r&ot.Optional&&t===iu?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Es]=a[Es]||[]).unshift(Ue(e)),s)throw a;return function II(n,e,t,r){const i=n[Es];throw e[Ii]&&i.unshift(e[Ii]),n.message=function au(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Ue(e);if(Array.isArray(e))i=e.map(Ue).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ue(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(mh,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Es]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Pr(o),ws(s)}}resolveInjectorInitializers(){const e=ws(this),t=Pr(void 0);try{const i=this.get(Pf.multi,lt,ot.Self);for(const s of i)s()}finally{ws(e),Pr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Ue(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(e){let t=Fu(e=$e(e))?e:$e(e&&e.provide);const r=function WB(n){return LE(n)?Ml(void 0,n.useValue):Ml(yS(n),c_)}(e);if(Fu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Ml(void 0,c_,!0),i.factory=()=>ou(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===c_&&(t.value=qB,t.value=t.factory()),"object"==typeof t.value&&t.value&&function QB(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=$e(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function jE(n){const e=bc(n),t=null!==e?e.factory:ao(n);if(null!==t)return t;if(n instanceof ye)throw new de(204,!1);if(n instanceof Function)return function GB(n){const e=n.length;if(e>0)throw function yo(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new de(204,!1);const t=function Lg(n){return n&&(n[nu]||n[no])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new de(204,!1)}function yS(n,e,t){let r;if(Fu(n)){const i=$e(n);return ao(i)||jE(i)}if(LE(n))r=()=>$e(n.useValue);else if(function _S(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...ou(n.deps||[]));else if(function mS(n){return!(!n||!n.useExisting)}(n))r=()=>_e($e(n.useExisting));else{const i=$e(n&&(n.useClass||n.provide));if(!function KB(n){return!!n.deps}(n))return ao(i)||jE(i);r=()=>new i(...ou(n.deps))}return r}function Ml(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function $E(n,e){for(const t of n)Array.isArray(t)?$E(t,e):t&&Zo(t)?$E(t.\u0275providers,e):e(t)}const d_=new ye("AppId",{providedIn:"root",factory:()=>JB}),JB="ng",vS=new ye("Platform Initializer"),Ms=new ye("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),IS=new ye("CSP nonce",{providedIn:"root",factory:()=>function Sl(){if(void 0!==RE)return RE;if(typeof document<"u")return document;throw new de(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ES=(n,e,t)=>null;function YE(n,e,t=!1){return ES(n,e,t)}class aj{}class TS{}class cj{resolveComponentFactory(e){throw function uj(n){const e=Error(`No component factory found for ${Ue(n)}.`);return e.ngComponent=n,e}(e)}}let __=(()=>{class n{static{this.NULL=new cj}}return n})();function lj(){return Ol(tr(),ue())}function Ol(n,e){return new bi(ar(n,e))}let bi=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=lj}}return n})();class DS{}let wo=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function hj(){const n=ue(),t=Zr(tr().index,n);return(xr(t)?t:n)[Ye]}()}}return n})(),fj=(()=>{class n{static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>null})}}return n})();class kl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const bS=new kl("16.2.12"),XE={};function MS(n,e=null,t=null,r){const i=xS(n,e,t,r);return i.resolveInjectorInitializers(),i}function xS(n,e=null,t=null,r,i=new Set){const s=[t||lt,$B(n)];return r=r||("object"==typeof n?void 0:Ue(n)),new Pl(s,e||l_(),r||null,i)}let Si=(()=>{class n{static{this.THROW_IF_NOT_FOUND=iu}static{this.NULL=new kE}static create(t,r){if(Array.isArray(t))return MS({name:""},r,t,"");{const i=t.name??"";return MS({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=ke({token:n,providedIn:"any",factory:()=>_e(hS)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function tw(n){return n.ngOriginalError}class Ao{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&tw(e);for(;t&&tw(t);)t=tw(t);return t||null}}function nw(n){return e=>{setTimeout(n,void 0,e)}}const Mn=class Ej extends q{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=nw(s),i&&(i=nw(i)),o&&(o=nw(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof It&&e.add(a),a}};function OS(...n){}class Vt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mn(!1),this.onMicrotaskEmpty=new Mn(!1),this.onStable=new Mn(!1),this.onError=new Mn(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function wj(){const n="function"==typeof kt.requestAnimationFrame;let e=kt[n?"requestAnimationFrame":"setTimeout"],t=kt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Cj(n){const e=()=>{!function Tj(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(kt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,iw(n),n.isCheckStableRunning=!0,rw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),iw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function bj(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return kS(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),VS(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return kS(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),VS(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,iw(n),rw(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vt.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(Vt.isInAngularZone())throw new de(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Aj,OS,OS);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Aj={};function rw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function iw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function kS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function VS(n){n._nesting--,rw(n)}class Dj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mn,this.onMicrotaskEmpty=new Mn,this.onStable=new Mn,this.onError=new Mn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const FS=new ye("",{providedIn:"root",factory:LS});function LS(){const n=be(Vt);let e=!0;return P(new ct(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new ct(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Vt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Vt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(W()))}function To(n){return n instanceof Function?n():n}let sw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Nf(n){for(;n;){n[Qe]|=64;const e=Tf(n);if(xh(n)&&!e)return n;n=e}return null}const HS=new ye("",{providedIn:"root",factory:()=>!1});let I_=null;function WS(n,e){return n[e]??YS()}function KS(n,e){const t=YS();t.producerNode?.length&&(n[e]=I_,t.lView=n,I_=QS())}const Fj={...aa,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Nf(n.lView)},lView:null};function QS(){return Object.create(Fj)}function YS(){return I_??=QS(),I_}const tt={};function ya(n){JS(gt(),ue(),yr()+n,!1)}function JS(n,e,t,r){if(!r)if(3==(3&e[Qe])){const s=n.preOrderCheckHooks;null!==s&&ll(e,s,t)}else{const s=n.preOrderHooks;null!==s&&dl(e,s,0,t)}ho(t)}function ge(n,e=ot.Default){const t=ue();return null===t?_e(n,e):Um(tr(),t,$e(n),e)}function E_(n,e,t,r,i,s,o,a,u,d,g){const m=e.blueprint.slice();return m[Yt]=i,m[Qe]=140|r,(null!==d||n&&2048&n[Qe])&&(m[Qe]|=2048),mm(m),m[Jt]=m[Cs]=n,m[An]=t,m[ra]=o||n&&n[ra],m[Ye]=a||n&&n[Ye],m[zi]=u||n&&n[zi]||null,m[Wn]=s,m[hu]=function zU(){return HU++}(),m[Ai]=g,m[qc]=d,m[Tn]=2==e.type?n[Tn]:m,m}function Ll(n,e,t,r,i){let s=n.data[e];if(null===s)s=function ow(n,e,t,r,i){const s=ol(),o=Tu(),u=n.data[e]=function qj(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Rs(){return null!==He.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function wm(){return He.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Au(){const n=He.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Wi(s,!0),s}function Of(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function XS(n,e,t,r,i){const s=WS(e,fu),o=yr(),a=2&r;try{ho(-1),a&&e.length>dt&&JS(n,e,dt,!1),fi(a?2:0,i);const d=a?s:null,g=mu(d);try{null!==d&&(d.dirty=!1),t(r,i)}finally{kh(d,g)}}finally{a&&null===e[fu]&&KS(e,fu),ho(o),fi(a?3:1,i)}}function aw(n,e,t){if(Zg(e)){const r=di(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{di(r)}}}function uw(n,e,t){il()&&(function Zj(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;sa(t)&&function s$(n,e,t){const r=ar(e,n),i=eR(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=w_(n,E_(n,i,null,o,r,e,null,n[ra].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||gl(t,e),Or(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],d=fo(e,n,a,t);Or(d,e),null!==o&&o$(0,a-i,d,u,0,o),Jr(u)&&(Zr(t.index,e)[An]=fo(e,n,a,t))}}(n,e,t,ar(t,e)),64==(64&t.flags)&&sR(n,e,t))}function cw(n,e,t=ar){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function eR(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=lw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function lw(n,e,t,r,i,s,o,a,u,d,g){const m=dt+r,v=m+i,w=function Uj(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:tt);return t}(m,v),T="function"==typeof d?d():d;return w[De]={type:n,blueprint:w,template:t,queries:null,viewQuery:a,declTNode:e,data:w.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:g}}let tR=n=>null;function nR(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?rR(t,e,i,s):r.hasOwnProperty(i)&&rR(t,e,r[i],s)}return t}function rR(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function dw(n,e,t,r){if(il()){const i=null===r?null:{"":-1},s=function e$(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Bc(e,o.selectors,!1))if(r||(r=[]),Jr(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),hw(n,e,a.length)}else r.unshift(o),hw(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&iR(n,e,t,o,i,a),i&&function t$(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new de(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=ta(t.mergedAttrs,t.attrs)}function iR(n,e,t,r,i,s){for(let d=0;d<r.length;d++)rf(gl(t,e),n,r[d].type);!function r$(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let d=0;d<r.length;d++){const g=r[d];g.providersResolver&&g.providersResolver(g)}let o=!1,a=!1,u=Of(n,e,r.length,null);for(let d=0;d<r.length;d++){const g=r[d];t.mergedAttrs=ta(t.mergedAttrs,g.hostAttrs),i$(n,t,e,u,g),n$(u,g,i),null!==g.contentQueries&&(t.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(t.flags|=64);const m=g.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function Gj(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,d=null;for(let g=e.directiveStart;g<i;g++){const m=s[g],v=t?t.get(m):null,T=v?v.outputs:null;u=nR(m.inputs,g,u,v?v.inputs:null),d=nR(m.outputs,g,d,T);const D=null===u||null===o||Ih(e)?null:a$(u,g,o);a.push(D)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(n,t,s)}function sR(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function Wh(){return He.lFrame.currentDirectiveIndex}();try{ho(s);for(let a=r;a<i;a++){const u=n.data[a],d=e[a];Kh(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Xj(u,d)}}finally{ho(-1),Kh(o)}}function Xj(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function hw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function n$(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Jr(e)&&(t[""]=n)}}function i$(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=ao(i.type)),o=new la(s,Jr(i),ge);n.blueprint[r]=o,t[r]=o,function Yj(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function Jj(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Of(n,t,i.hostVars,tt),i)}function xs(n,e,t,r,i,s){const o=ar(n,e);!function fw(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?x(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[Ye],o,s,n.value,t,r,i)}function o$(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)oR(r,t,o[a++],o[a++],o[a++])}function oR(n,e,t,r,i){const s=di(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{di(s)}}function a$(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function aR(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function uR(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Cu(t[r]),o.contentQueries(2,e[s],s)}}}function w_(n,e){return n[ro]?n[Jg][Yr]=e:n[ro]=e,n[Jg]=e,e}function pw(n,e,t){Cu(0);const r=di(null);try{e(n,t)}finally{di(r)}}function hR(n,e){const t=n[zi],r=t?t.get(Ao,null):null;r&&r.handleError(e)}function gw(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];oR(n.data[o],e[o],r,a,i)}}function u$(n,e){const t=Zr(e,n),r=t[De];!function c$(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Yt];null!==i&&null===t[Ai]&&(t[Ai]=YE(i,t[zi])),mw(r,t,t[An])}function mw(n,e,t){ul(e);try{const r=n.viewQuery;null!==r&&pw(1,r,t);const i=n.template;null!==i&&XS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&uR(n,e),n.staticViewQueries&&pw(2,n.viewQuery,t);const s=n.components;null!==s&&function l$(n,e){for(let t=0;t<e.length;t++)u$(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Qe]&=-5,Yh()}}let fR=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function MI(n,e,t){const r=Object.create(xI);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>sm(r),run:()=>{if(r.dirty=!1,r.hasRun&&!om(r))return;r.hasRun=!0;const o=mu(r);try{r.cleanupFn(),r.cleanupFn=Jc,r.fn(i)}finally{kh(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new n})}}return n})();function A_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Xn(i,a):2==s&&(r=Xn(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function kf(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Rt(s)),_r(s)&&pR(s,r);const o=t.type;if(8&o)kf(n,e,t.child,r);else if(32&o){const a=IE(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=Kb(e,t);if(Array.isArray(a))r.push(...a);else{const u=Tf(e[Tn]);kf(u[De],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function pR(n,e){for(let t=er;t<n.length;t++){const r=n[t],i=r[De].firstChild;null!==i&&kf(r[De],r,i,e)}n[qi]!==n[Yt]&&e.push(n[qi])}function T_(n,e,t,r=!0){const i=e[ra],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{gR(n,e,n.template,t)}catch(u){throw r&&hR(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function gR(n,e,t,r){const i=e[Qe];if(256!=(256&i)){e[ra].effectManager?.flush(),ul(e);try{mm(e),function Em(n){return He.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&XS(n,e,t,2,r);const o=3==(3&i);if(o){const d=n.preOrderCheckHooks;null!==d&&ll(e,d,null)}else{const d=n.preOrderHooks;null!==d&&dl(e,d,0,null),Su(e,0)}if(function f$(n){for(let e=Vb(n);null!==e;e=Fb(e)){if(!e[Wc])continue;const t=e[oo];for(let r=0;r<t.length;r++){BI(t[r])}}}(e),mR(e,2),null!==n.contentQueries&&uR(n,e),o){const d=n.contentCheckHooks;null!==d&&ll(e,d)}else{const d=n.contentHooks;null!==d&&dl(e,d,1),Su(e,1)}!function Lj(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=WS(e,so);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)ho(~s);else{const o=s,a=t[++i],u=t[++i];Tm(a,o),r.dirty=!1;const d=mu(r);try{u(2,e[o])}finally{kh(r,d)}}}}finally{null===e[so]&&KS(e,so),ho(-1)}}(n,e);const a=n.components;null!==a&&yR(e,a,0);const u=n.viewQuery;if(null!==u&&pw(2,u,r),o){const d=n.viewCheckHooks;null!==d&&ll(e,d)}else{const d=n.viewHooks;null!==d&&dl(e,d,2),Su(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Qe]&=-73,tl(e)}finally{Yh()}}}function mR(n,e){for(let t=Vb(n);null!==t;t=Fb(t))for(let r=er;r<t.length;r++)_R(t[r],e)}function p$(n,e,t){_R(Zr(e,n),t)}function _R(n,e){if(!function UI(n){return 128==(128&n[Qe])}(n))return;const t=n[De],r=n[Qe];if(80&r&&0===e||1024&r||2===e)gR(t,n,t.template,n[An]);else if(n[du]>0){mR(n,1);const i=t.components;null!==i&&yR(n,i,1)}}function yR(n,e,t){for(let r=0;r<e.length;r++)p$(n,e[r],t)}class Vf{get rootNodes(){const e=this._lView,t=e[De];return kf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[An]}set context(e){this._lView[An]=e}get destroyed(){return 256==(256&this._lView[Qe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Jt];if(_r(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(t_(e,r),Il(t,r))}this._attachedToViewContainer=!1}wE(this._lView[De],this._lView)}onDestroy(e){!function nl(n,e){if(256==(256&n[Qe]))throw new de(911,!1);null===n[Ds]&&(n[Ds]=[]),n[Ds].push(e)}(this._lView,e)}markForCheck(){Nf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Qe]&=-129}reattach(){this._lView[Qe]|=128}detectChanges(){T_(this._lView[De],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function iB(n,e){Df(n,e,e[Ye],2,null,null)}(this._lView[De],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=e}}class g$ extends Vf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;T_(e[De],e,e[An],!1)}checkNoChanges(){}get context(){return null}}class vR extends __{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ft(e);return new Ff(t,this.ngModule)}}function IR(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class _${constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Nc(r);const i=this.injector.get(e,XE,r);return i!==XE||t===XE?i:this.parentInjector.get(e,t,r)}}class Ff extends TS{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=IR(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return IR(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function $c(n){return n.map(Ch).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Di?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new _$(e,s):e,a=o.get(DS,null);if(null===a)throw new de(407,!1);const m={rendererFactory:a,sanitizer:o.get(fj,null),effectManager:o.get(fR,null),afterRenderEventManager:o.get(sw,null)},v=a.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",T=r?function Bj(n,e,t,r){const s=r.get(HS,!1)||t===Fn.ShadowDom,o=n.selectRootElement(e,s);return function jj(n){tR(n)}(o),o}(v,r,this.componentDef.encapsulation,o):e_(v,w,function m$(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(w)),G=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let F=null;null!==T&&(F=YE(T,o,!0));const K=lw(0,null,null,1,0,null,null,null,null,null,null),ae=E_(null,K,null,G,null,null,m,v,o,null,F);let ve,Ve;ul(ae);try{const V=this.componentDef;let b,O=null;V.findHostDirectiveDefs?(b=[],O=new Map,V.findHostDirectiveDefs(V,b,O),b.push(V)):b=[V];const L=function v$(n,e){const t=n[De],r=dt;return n[r]=e,Ll(t,r,2,"#host",null)}(ae,T),$=function I$(n,e,t,r,i,s,o){const a=i[De];!function E$(n,e,t,r){for(const i of n)e.mergedAttrs=ta(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(A_(e,e.mergedAttrs,!0),null!==t&&Zb(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=YE(e,i[zi]));const d=s.rendererFactory.createRenderer(e,t);let g=16;t.signals?g=4096:t.onPush&&(g=64);const m=E_(i,eR(t),null,g,i[n.index],n,s,d,null,null,u);return a.firstCreatePass&&hw(a,n,r.length-1),w_(i,m),i[n.index]=m}(L,T,V,b,ae,m,v);Ve=bs(K,dt),T&&function A$(n,e,t,r){if(r)Vc(n,t,["ng-version",bS.full]);else{const{attrs:i,classes:s}=function Dh(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Kr(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Vc(n,t,i),s&&s.length>0&&Jb(n,t,s.join(" "))}}(v,V,T,r),void 0!==t&&function T$(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Ve,this.ngContentSelectors,t),ve=function w$(n,e,t,r,i,s){const o=tr(),a=i[De],u=ar(o,i);iR(a,i,o,t,null,r);for(let g=0;g<t.length;g++)Or(fo(i,a,o.directiveStart+g,o),i);sR(a,i,o),u&&Or(u,i);const d=fo(i,a,o.directiveStart+o.componentOffset,o);if(n[An]=i[An]=d,null!==s)for(const g of s)g(d,e);return aw(a,o,n),d}($,V,b,O,ae,[C$]),mw(K,ae,null)}finally{Yh()}return new y$(this.componentType,ve,Ol(Ve,ae),ae,Ve)}}class y$ extends aj{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new g$(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;gw(s[De],s,i,e,t),this.previousInputValues.set(e,t),Nf(Zr(this._tNode.index,s))}}get injector(){return new vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function C$(){const n=tr();cl(ue()[De],n)}function Ft(n){let e=function ER(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Jr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new de(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=C_(n.inputs),o.inputTransforms=C_(n.inputTransforms),o.declaredInputs=C_(n.declaredInputs),o.outputs=C_(n.outputs);const a=i.hostBindings;a&&R$(n,a);const u=i.viewQuery,d=i.contentQueries;if(u&&b$(n,u),d&&S$(n,d),wn(n.inputs,i.inputs),wn(n.declaredInputs,i.declaredInputs),wn(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),wn(o.inputTransforms,i.inputTransforms)),Jr(i)&&i.data.animation){const g=n.data;g.animation=(g.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Ft&&(t=!1)}}e=Object.getPrototypeOf(e)}!function D$(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ta(i.hostAttrs,t=ta(t,i.hostAttrs))}}(r)}function C_(n){return n===gr?{}:n===lt?[]:n}function b$(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function S$(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function R$(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function CR(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function kr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Lu(n,e,t,r){const i=kr(n,e,t);return kr(n,e+1,r)||i}function Os(n,e,t,r){const i=ue();return kr(i,lo(),e)&&(gt(),xs(an(),i,n,e,t,r)),Os}function Hl(n,e,t,r,i,s,o,a,u,d){const m=function Yi(n,e,t,r,i,s){const o=Lu(n,e,t,r);return Lu(n,e+2,i,s)||o}(n,function Ti(){return He.lFrame.bindingIndex}(),t,i,o,u);return Ki(4),m?e+x(t)+r+x(i)+s+x(o)+a+x(u)+d:tt}let UR=function BR(n,e,t,r){return Ps(!0),e[Ye].createComment("")};function va(n,e,t){const r=ue();return kr(r,lo(),e)&&function Ri(n,e,t,r,i,s,o,a){const u=ar(e,t);let g,d=e.inputs;!a&&null!=d&&(g=d[r])?(gw(n,t,g,r,i),sa(e)&&function Kj(n,e){const t=Zr(e,n);16&t[Qe]||(t[Qe]|=64)}(t,e.index)):3&e.type&&(r=function Wj(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(gt(),an(),r,n,e,r[Ye],t,!1),va}function Aw(n,e,t,r,i){const o=i?"class":"style";gw(n,t,e.inputs[o],o,r)}function zt(n,e,t,r){const i=ue(),s=gt(),o=dt+n,a=i[Ye],u=s.firstCreatePass?function iH(n,e,t,r,i,s){const o=e.consts,u=Ll(e,n,2,r,us(o,i));return dw(e,t,u,us(o,s)),null!==u.attrs&&A_(u,u.attrs,!1),null!==u.mergedAttrs&&A_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],d=$R(s,i,u,a,e,n);i[o]=d;const g=Mh(u);return Wi(u,!0),Zb(a,d,u),32!=(32&u.flags)&&bu()&&r_(s,i,d,u),0===function wu(){return He.lFrame.elementDepthCount}()&&Or(d,i),function $I(){He.lFrame.elementDepthCount++}(),g&&(uw(s,i,u),aw(s,u,i)),null!==r&&cw(i,u),zt}function Lt(){let n=tr();Tu()?function zh(){He.lFrame.isParent=!1}():(n=n.parent,Wi(n,!1));const e=n;(function $h(n){return He.skipHydrationRootTNode===n})(e)&&function vm(){He.skipHydrationRootTNode=null}(),function HI(){He.lFrame.elementDepthCount--}();const t=gt();return t.firstCreatePass&&(cl(t,n),Zg(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function ef(n){return 0!=(8&n.flags)}(e)&&Aw(t,e,ue(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function km(n){return 0!=(16&n.flags)}(e)&&Aw(t,e,ue(),e.stylesWithoutHost,!1),Lt}function ks(n,e,t,r){return zt(n,e,t,r),Lt(),ks}let $R=(n,e,t,r,i,s)=>(Ps(!0),e_(r,i,function Pm(){return He.lFrame.currentNamespace}()));function $f(n){return!!n&&"function"==typeof n.then}function GR(n){return!!n&&"function"==typeof n.subscribe}function Pi(n,e,t,r){const i=ue(),s=gt(),o=tr();return function KR(n,e,t,r,i,s,o){const a=Mh(r),d=n.firstCreatePass&&function lR(n){return n.cleanup||(n.cleanup=[])}(n),g=e[An],m=function cR(n){return n[na]||(n[na]=[])}(e);let v=!0;if(3&r.type||o){const D=ar(r,e),M=o?o(D):D,G=m.length,F=o?ae=>o(Rt(ae[r.index])):r.index;let K=null;if(!o&&a&&(K=function lH(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[na],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==K)(K.__ngLastListenerFn__||K).__ngNextListenerFn__=s,K.__ngLastListenerFn__=s,v=!1;else{s=YR(r,e,g,s,!1);const ae=t.listen(M,i,s);m.push(s,ae),d&&d.push(i,F,G,G+1)}}else s=YR(r,e,g,s,!1);const w=r.outputs;let T;if(v&&null!==w&&(T=w[i])){const D=T.length;if(D)for(let M=0;M<D;M+=2){const ve=e[T[M]][T[M+1]].subscribe(s),Ve=m.length;m.push(s,ve),d&&d.push(i,r.index,Ve,-(Ve+1))}}}(s,i,i[Ye],o,n,e,r),Pi}function QR(n,e,t,r){try{return fi(6,e,t),!1!==t(r)}catch(i){return hR(n,i),!1}finally{fi(7,e,t)}}function YR(n,e,t,r,i){return function s(o){if(o===Function)return r;Nf(n.componentOffset>-1?Zr(n.index,e):e);let u=QR(e,t,r,o),d=s.__ngNextListenerFn__;for(;d;)u=QR(e,t,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function M_(n,e){return n<<17|e<<2}function Ia(n){return n>>17&32767}function bw(n){return 2|n}function Uu(n){return(131068&n)>>2}function Sw(n,e){return-131069&n|e<<2}function Rw(n){return 1|n}function oP(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Ia(s):Uu(s),u=!1;for(;0!==a&&(!1===u||o);){const g=n[a+1];IH(n[a],e)&&(u=!0,n[a+1]=r?Rw(g):bw(g)),a=r?Ia(g):Uu(g)}u&&(n[t+1]=r?bw(s):Rw(s))}function IH(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ga(n,e)>=0}function x_(n,e){return function ls(n,e,t,r){const i=ue(),s=gt(),o=Ki(2);s.firstUpdatePass&&function gP(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[yr()],o=function pP(n,e){return e>=n.expandoStartIndex}(n,t);(function vP(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function RH(n,e,t,r){const i=function Qh(n){const e=He.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Hf(t=Pw(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Pw(i,n,e,t,r),null===s){let u=function PH(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Uu(r))return n[Ia(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=Pw(null,n,e,u[1],r),u=Hf(u,e.attrs,r),function MH(n,e,t,r){n[Ia(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function xH(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Hf(r,n[s].hostAttrs,t);return Hf(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function yH(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ia(o),u=Uu(o);n[r]=t;let g,d=!1;if(Array.isArray(t)?(g=t[1],(null===g||ga(t,g)>0)&&(d=!0)):g=t,i)if(0!==u){const v=Ia(n[a+1]);n[r+1]=M_(v,a),0!==v&&(n[v+1]=Sw(n[v+1],r)),n[a+1]=function mH(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=M_(a,0),0!==a&&(n[a+1]=Sw(n[a+1],r)),a=r;else n[r+1]=M_(u,0),0===a?a=r:n[u+1]=Sw(n[u+1],r),u=r;d&&(n[r+1]=bw(n[r+1])),oP(n,g,r,!0),oP(n,g,r,!1),function vH(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ga(s,e)>=0&&(t[r+1]=Rw(t[r+1]))}(e,g,n,r,s),o=M_(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==tt&&kr(i,o,e)&&function _P(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,d=u[a+1],g=function _H(n){return 1==(1&n)}(d)?yP(u,e,t,i,Uu(d),o):void 0;N_(g)||(N_(s)||function gH(n){return 2==(2&n)}(d)&&(s=yP(u,null,t,i,a,o)),function pB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:ma.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ma.Important),n.setStyle(t,r,i,s))}}(r,o,el(yr(),t),i,s))}(s,s.data[yr()],i,i[Ye],n,i[o+1]=function VH(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ue(_a(n)))),n}(e,t),r,o)}(n,e,null,!0),x_}function Pw(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Hf(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Hf(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Pn(n,o,!!t||e[++s]))}return void 0===n?null:n}function yP(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],d=Array.isArray(u),g=d?u[1]:u,m=null===g;let v=t[i+1];v===tt&&(v=m?lt:void 0);let w=m?El(v,r):g===r?v:void 0;if(d&&!N_(w)&&(w=El(u,r)),N_(w)&&(a=w,o))return a;const T=n[i+1];i=o?Ia(T):Uu(T)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=El(u,r))}return a}function N_(n){return void 0!==n}function xn(n,e=""){const t=ue(),r=gt(),i=n+dt,s=r.firstCreatePass?Ll(r,i,1,e,null):r.data[i],o=IP(r,t,s,e,n);t[i]=o,bu()&&r_(r,t,o,s),Wi(s,!1)}let IP=(n,e,t,r,i)=>(Ps(!0),function Xm(n,e){return n.createText(e)}(e[Ye],r));function xw(n,e,t,r,i,s,o,a,u){const d=ue(),g=Hl(d,n,e,t,r,i,s,o,a,u);return g!==tt&&function Co(n,e,t){const r=el(e,n);!function Ub(n,e,t){n.setValue(e,t)}(n[Ye],r,t)}(d,yr(),g),xw}const Yl="en-US";let $P=Yl;function kw(n,e,t,r,i){if(n=$e(n),Array.isArray(n))for(let s=0;s<n.length;s++)kw(n[s],e,t,r,i);else{const s=gt(),o=ue(),a=tr();let u=Fu(n)?n:$e(n.provide);const d=yS(n),g=1048575&a.providerIndexes,m=a.directiveStart,v=a.providerIndexes>>20;if(Fu(n)||!n.multi){const w=new la(d,i,ge),T=Fw(u,e,i?g:g+v,m);-1===T?(rf(gl(a,o),s,u),Vw(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(w),o.push(w)):(t[T]=w,o[T]=w)}else{const w=Fw(u,e,g+v,m),T=Fw(u,e,g,g+v),M=T>=0&&t[T];if(i&&!M||!i&&!(w>=0&&t[w])){rf(gl(a,o),s,u);const G=function rz(n,e,t,r,i){const s=new la(n,t,ge);return s.multi=[],s.index=e,s.componentProviders=0,fM(s,i,r&&!t),s}(i?nz:tz,t.length,i,r,d);!i&&M&&(t[T].providerFactory=G),Vw(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(G),o.push(G)}else Vw(s,n,w>-1?w:T,fM(t[i?T:w],d,!i&&r));!i&&r&&M&&t[T].componentProviders++}}}function Vw(n,e,t,r){const i=Fu(e),s=function zB(n){return!!n.useClass}(e);if(i||s){const u=(s?$e(e.useClass):e).prototype.ngOnDestroy;if(u){const d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const g=d.indexOf(t);-1===g?d.push(t,[r,u]):d[g+1].push(r,u)}else d.push(t,u)}}}function fM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Fw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function tz(n,e,t,r){return Lw(this.multi,[])}function nz(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=fo(t,t[De],this.providerFactory.index,r);s=a.slice(0,o),Lw(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Lw(i,s);return s}function Lw(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function pn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function ez(n,e,t){const r=gt();if(r.firstCreatePass){const i=Jr(n);kw(t,r.data,r.blueprint,i,!0),kw(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class ju{}class pM{}class Uw extends ju{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vR(this);const i=mr(e);this._bootstrapComponents=To(i.bootstrap),this._r3Injector=xS(e,t,[{provide:ju,useValue:this},{provide:__,useValue:this.componentFactoryResolver},...r],Ue(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Bw extends pM{constructor(e){super(),this.moduleType=e}create(e){return new Uw(this.moduleType,e,[])}}class gM extends ju{constructor(e){super(),this.componentFactoryResolver=new vR(this),this.instance=null;const t=new Pl([...e.providers,{provide:ju,useValue:this},{provide:__,useValue:this.componentFactoryResolver}],e.parent||l_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function jw(n,e,t=null){return new gM({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let oz=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=pS(0,t.type),i=r.length>0?jw([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ke({token:n,providedIn:"environment",factory:()=>new n(_e(Di))})}}return n})();function mM(n){n.getStandaloneInjector=e=>e.get(oz).getOrCreateStandaloneInjector(n)}function Oz(n,e,t,r=!0){const i=e[De];if(function oB(n,e,t,r){const i=er+r,s=t.length;r>0&&(t[i-1][Yr]=e),r<s-er?(e[Yr]=t[i],hf(t,er+r,e)):(t.push(e),e[Yr]=null),e[Jt]=t;const o=e[io];null!==o&&t!==o&&function aB(n,e){const t=n[oo];e[Tn]!==e[Jt][Jt][Tn]&&(n[Wc]=!0),null===t?n[oo]=[e]:t.push(e)}(o,e);const a=e[li];null!==a&&a.insertView(n),e[Qe]|=128}(i,e,n,t),r){const s=DE(t,n),o=e[Ye],a=n_(o,n[qi]);null!==a&&function rB(n,e,t,r,i,s){r[Yt]=i,r[Wn]=e,Df(n,r,t,1,i,s)}(i,n[Wn],o,e,a,s)}}let Do=(()=>{class n{static{this.__NG_ELEMENT_ID__=Fz}}return n})();const kz=Do,Vz=class extends kz{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function Nz(n,e,t,r){const i=e.tView,a=E_(n,i,t,4096&n[Qe]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[io]=n[e.index];const d=n[li];return null!==d&&(a[li]=d.createEmbeddedView(i)),mw(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Vf(i)}};function Fz(){return function L_(n,e){return 4&n.type?new Vz(e,n,Ol(n,e)):null}(tr(),ue())}let hs=(()=>{class n{static{this.__NG_ELEMENT_ID__=Hz}}return n})();function Hz(){return function OM(n,e){let t;const r=e[n.index];return _r(r)?t=r:(t=aR(r,e,null,n),e[n.index]=t,w_(e,t)),kM(t,e,n,r),new xM(t,n,e)}(tr(),ue())}const zz=hs,xM=class extends zz{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ol(this._hostTNode,this._hostLView)}get injector(){return new vr(this._hostTNode,this._hostLView)}get parentInjector(){const e=da(this._hostTNode,this._hostLView);if(fl(e)){const t=Pu(e,this._hostLView),r=Ru(e);return new vr(t[De].data[r+8],t)}return new vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=NM(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-er}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function _o(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,s=D.environmentInjector||D.ngModuleRef}const u=o?e:new Ff(ft(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const M=(o?d:this.parentInjector).get(Di,null);M&&(s=M)}ft(u.componentType??{});const w=u.create(d,i,null,s);return this.insertImpl(w.hostView,a,false),w}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function jh(n){return _r(n[Jt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[Jt],g=new xM(d,d[Wn],d[Jt]);g.detach(g.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return Oz(a,i,o,!r),e.attachToViewContainerRef(),hf(zw(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=NM(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=t_(this._lContainer,t);r&&(Il(zw(this._lContainer),t),wE(r[De],r))}detach(e){const t=this._adjustIndex(e,-1),r=t_(this._lContainer,t);return r&&null!=Il(zw(this._lContainer),t)?new Vf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function NM(n){return n[8]}function zw(n){return n[8]||(n[8]=[])}let kM=function VM(n,e,t,r){if(n[qi])return;let i;i=8&t.type?Rt(r):function qz(n,e){const t=n[Ye],r=t.createComment(""),i=ar(e,n);return Vu(t,n_(t,i),r,function dB(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[qi]=i};const tA=new ye("Application Initializer");let nA=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=be(tA,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if($f(s))t.push(s);else if(GR(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ax=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const bo=new ye("LocaleId",{providedIn:"root",factory:()=>be(bo,ot.Optional|ot.SkipSelf)||function wq(){return typeof $localize<"u"&&$localize.locale||Yl}()});let j_=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new k(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class Cq{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let ux=(()=>{class n{compileModuleSync(t){return new Bw(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=To(mr(t).declarations).reduce((o,a)=>{const u=ft(a);return u&&o.push(new Ff(u)),o},[]);return new Cq(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const hx=new ye(""),H_=new ye("");let aA,sA=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,aA||(function Wq(n){aA=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(_e(Vt),_e(oA),_e(H_))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})(),oA=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return aA?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Ea=null;const fx=new ye("AllowMultipleToken"),uA=new ye("PlatformDestroyListeners"),cA=new ye("appBootstrapListener");class gx{constructor(e,t){this.name=e,this.token=t}}function _x(n,e,t=[]){const r=`Platform: ${e}`,i=new ye(r);return(s=[])=>{let o=lA();if(!o||o.injector.get(fx,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function Yq(n){if(Ea&&!Ea.get(fx,!1))throw new de(400,!1);(function px(){!function bI(n){Lh=n}(()=>{throw new de(600,!1)})})(),Ea=n;const e=n.get(vx);(function mx(n){n.get(vS,null)?.forEach(t=>t())})(n)}(function yx(n=[],e){return Si.create({name:e,providers:[{provide:UE,useValue:"platform"},{provide:uA,useValue:new Set([()=>Ea=null])},...n]})}(a,r))}return function Zq(n){const e=lA();if(!e)throw new de(401,!1);return e}()}}function lA(){return Ea?.get(vx)??null}let vx=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function Xq(n="zone.js",e){return"noop"===n?new Dj:"zone.js"===n?new Vt(e):n}(r?.ngZone,function Ix(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function sz(n,e,t){return new Uw(n,e,t)}(t.moduleType,this.injector,function Cx(n){return[{provide:Vt,useFactory:n},{provide:Pf,multi:!0,useFactory:()=>{const e=be(tG,{optional:!0});return()=>e.initialize()}},{provide:Tx,useFactory:eG},{provide:FS,useFactory:LS}]}(()=>i)),o=s.injector.get(Ao,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{z_(this._modules,s),a.unsubscribe()})}),function Ex(n,e,t){try{const r=t();return $f(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(nA);return a.runInitializers(),a.donePromise.then(()=>(function HP(n){ci(n,"Expected localeId to be defined"),"string"==typeof n&&($P=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(bo,Yl)||Yl),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=wx({},r);return function Kq(n,e,t){const r=new Bw(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Xl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new de(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(uA,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(_e(Si))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function wx(n,e){return Array.isArray(e)?e.reduce(wx,n):{...n,...e}}let Xl=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=be(Tx),this.zoneIsStable=be(FS),this.componentTypes=[],this.components=[],this.isStable=be(j_).hasPendingTasks.pipe(Ce(t=>t?B(!1):this.zoneIsStable),jt(),W()),this._injector=be(Di)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof TS;if(!this._injector.get(nA).done)throw!i&&function Ts(n){const e=ft(n)||Ln(n)||Gn(n);return null!==e&&e.standalone}(t),new de(405,!1);let o;o=i?t:this._injector.get(__).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Qq(n){return n.isBoundToModule}(o)?void 0:this._injector.get(ju),d=o.create(Si.NULL,[],r||o.selector,a),g=d.location.nativeElement,m=d.injector.get(hx,null);return m?.registerApplication(g),d.onDestroy(()=>{this.detachView(d.hostView),z_(this.components,d),m?.unregisterApplication(g)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;z_(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(cA,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>z_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new de(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function z_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Tx=new ye("",{providedIn:"root",factory:()=>be(Ao).handleError.bind(void 0)});function eG(){const n=be(Vt),e=be(Ao);return t=>n.runOutsideAngular(()=>e.handleError(t))}let tG=(()=>{class n{constructor(){this.zone=be(Vt),this.applicationRef=be(Xl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let q_=(()=>{class n{static{this.__NG_ELEMENT_ID__=rG}}return n})();function rG(n){return function iG(n,e,t){if(sa(n)&&!t){const r=Zr(n.index,e);return new Vf(r,r)}return 47&n.type?new Vf(e[Tn],e):null}(tr(),ue(),16==(16&n))}const mG=_x(null,"core",[]);let _G=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(_e(Xl))}}static{this.\u0275mod=Qr({type:n})}static{this.\u0275inj=or({})}}return n})();function ed(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let mA=null;function wa(){return mA}class MG{}const Mi=new ye("DocumentToken");let _A=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:function(){return be(NG)},providedIn:"platform"})}}return n})();const xG=new ye("Location Initialized");let NG=(()=>{class n extends _A{constructor(){super(),this._doc=be(Mi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wa().getBaseHref(this._doc)}onPopState(t){const r=wa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=wa().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function yA(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function qx(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function So(n){return n&&"?"!==n[0]?"?"+n:n}let Hu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:function(){return be(Wx)},providedIn:"root"})}}return n})();const Gx=new ye("appBaseHref");let Wx=(()=>{class n extends Hu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??be(Mi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return yA(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+So(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+So(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+So(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(_e(_A),_e(Gx,8))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),OG=(()=>{class n extends Hu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=yA(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+So(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+So(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(_e(_A),_e(Gx,8))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})(),vA=(()=>{class n{constructor(t){this._subject=new Mn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function FG(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(qx(Kx(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+So(r))}normalize(t){return n.stripTrailingSlash(function VG(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Kx(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+So(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+So(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=So}static{this.joinWithSlash=yA}static{this.stripTrailingSlash=qx}static{this.\u0275fac=function(r){return new(r||n)(_e(Hu))}}static{this.\u0275prov=ke({token:n,factory:function(){return function kG(){return new vA(_e(Hu))}()},providedIn:"root"})}}return n})();function Kx(n){return n.replace(/\/index.html$/,"")}function rN(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}let aN=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new C3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){uN("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){uN("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ge(hs),ge(Do))}}static{this.\u0275dir=We({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class C3{constructor(){this.$implicit=null,this.ngIf=null}}function uN(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ue(e)}'.`)}let Y3=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qr({type:n})}static{this.\u0275inj=or({})}}return n})();function oy(n){return"server"===n}let e9=(()=>{class n{static{this.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new t9(_e(Mi),window)})}}return n})();class t9{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function n9(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class hN{}class C9 extends MG{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class VA extends C9{static makeCurrent(){!function PG(n){mA||(mA=n)}(new VA)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function D9(){return rp=rp||document.querySelector("base"),rp?rp.getAttribute("href"):null}();return null==t?null:function b9(n){cy=cy||document.createElement("a"),cy.setAttribute("href",n);const e=cy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rN(document.cookie,e)}}let cy,rp=null,R9=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const FA=new ye("EventManagerPlugins");let _N=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new de(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(_e(FA),_e(Vt))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();class yN{constructor(e){this._doc=e}}const LA="ng-app-id";let vN=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=oy(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${LA}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(LA),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(LA,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(_e(Mi),_e(d_),_e(IS,8),_e(Ms))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const UA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},BA=/%COMP%/g,N9=new ye("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function EN(n,e){return e.map(t=>t.replace(BA,n))}let wN=(()=>{class n{constructor(t,r,i,s,o,a,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=oy(a),this.defaultRenderer=new jA(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Fn.ShadowDom&&(r={...r,encapsulation:Fn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof TN?i.applyToHost(t):i instanceof $A&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Fn.Emulated:s=new TN(u,d,r,this.appId,g,o,a,m);break;case Fn.ShadowDom:return new F9(u,d,t,r,o,a,this.nonce,m);default:s=new $A(u,d,r,g,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(_e(_N),_e(vN),_e(d_),_e(N9),_e(Mi),_e(Ms),_e(Vt),_e(IS))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();class jA{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(UA[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(AN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(AN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new de(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=UA[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=UA[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ma.DashCase|ma.Important)?e.style.setProperty(t,r,i&ma.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ma.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=wa().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function AN(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class F9 extends jA{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=EN(i.id,i.styles);for(const g of d){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=g,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class $A extends jA{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?EN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class TN extends $A{constructor(e,t,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,t,r,s,o,a,u,d),this.contentAttr=function O9(n){return"_ngcontent-%COMP%".replace(BA,n)}(d),this.hostAttr=function k9(n){return"_nghost-%COMP%".replace(BA,n)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let L9=(()=>{class n extends yN{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(_e(Mi))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const CN=["alt","control","meta","shift"],U9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},B9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let j9=(()=>{class n extends yN{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wa().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),CN.forEach(d=>{const g=r.indexOf(d);g>-1&&(r.splice(g,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=U9[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),CN.forEach(o=>{o!==i&&(0,B9[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(_e(Mi))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const q9=_x(mG,"browser",[{provide:Ms,useValue:"browser"},{provide:vS,useValue:function $9(){VA.makeCurrent()},multi:!0},{provide:Mi,useFactory:function z9(){return function vB(n){RE=n}(document),document},deps:[]}]),G9=new ye(""),SN=[{provide:H_,useClass:class S9{addToWindow(e){kt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new de(5103,!1);return s},kt.getAllAngularTestabilities=()=>e.getAllTestabilities(),kt.getAllAngularRootElements=()=>e.getAllRootElements(),kt.frameworkStabilizers||(kt.frameworkStabilizers=[]),kt.frameworkStabilizers.push(r=>{const i=kt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?wa().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:hx,useClass:sA,deps:[Vt,oA,H_]},{provide:sA,useClass:sA,deps:[Vt,oA,H_]}],RN=[{provide:UE,useValue:"root"},{provide:Ao,useFactory:function H9(){return new Ao},deps:[]},{provide:FA,useClass:L9,multi:!0,deps:[Mi,Vt,Ms]},{provide:FA,useClass:j9,multi:!0,deps:[Mi]},wN,vN,_N,{provide:DS,useExisting:wN},{provide:hN,useClass:R9,deps:[]},[]];let W9=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d_,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(_e(G9,12))}}static{this.\u0275mod=Qr({type:n})}static{this.\u0275inj=or({providers:[...RN,...SN],imports:[Y3,_G]})}}return n})(),PN=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(_e(Mi))}}static{this.\u0275prov=ke({token:n,factory:function(r){let i=null;return i=r?new r:function Q9(){return new PN(_e(Mi))}(),i},providedIn:"root"})}}return n})();typeof window<"u"&&window;const{isArray:t6}=Array,{getPrototypeOf:n6,prototype:r6,keys:i6}=Object;function ON(n){if(1===n.length){const e=n[0];if(t6(e))return{args:e,keys:null};if(function s6(n){return n&&"object"==typeof n&&n6(n)===r6}(e)){const t=i6(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:o6}=Array;function kN(n){return fe(e=>function a6(n,e){return o6(e)?n(...e):n(e)}(n,e))}function VN(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function zA(...n){const e=Is(n),t=Xs(n),{args:r,keys:i}=ON(n);if(0===r.length)return S([],e);const s=new ct(function u6(n,e,t=Ht){return r=>{FN(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)FN(e,()=>{const d=S(n[u],e);let g=!1;d.subscribe(ee(r,m=>{s[u]=m,g||(g=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>VN(i,o):Ht));return t?s.pipe(kN(t)):s}function FN(n,e,t){n?bn(t,n,e):e()}const ly=ze(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function qA(...n){return function c6(){return Bi(1)}()(S(n,Is(n)))}function LN(n){return new ct(e=>{zn(n()).subscribe(e)})}function ip(n,e){const t=C(n)?n:()=>n,r=i=>i.error(t());return new ct(e?i=>e.schedule(r,0,i):r)}function GA(){return j((n,e)=>{let t=null;n._refCount++;const r=ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class UN extends ct{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,re(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new It;const t=this.getSubject();e.add(this.source.subscribe(ee(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=It.EMPTY)}return e}refCount(){return GA()(this)}}function nd(n){return n<=0?()=>En:j((e,t)=>{let r=0;e.subscribe(ee(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function dy(...n){const e=Is(n);return j((t,r)=>{(e?qA(n,t,e):qA(n,t)).subscribe(r)})}function Xi(n,e){return j((t,r)=>{let i=0;t.subscribe(ee(r,s=>n.call(e,s,i++)&&r.next(s)))})}function hy(n){return j((e,t)=>{let r=!1;e.subscribe(ee(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function BN(n=l6){return j((e,t)=>{let r=!1;e.subscribe(ee(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function l6(){return new ly}function Ta(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xi((i,s)=>n(i,s,r)):Ht,nd(1),t?hy(e):BN(()=>new ly))}function rd(n,e){return C(e)?In(n,e,1):In(n,1)}function Ir(n,e,t){const r=C(n)||e||t?{next:n,error:e,complete:t}:n;return r?j((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(ee(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):Ht}function zu(n){return j((e,t)=>{let s,r=null,i=!1;r=e.subscribe(ee(t,void 0,void 0,o=>{s=zn(n(o,zu(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function fy(n,e){return j(function d6(n,e,t,r,i){return(s,o)=>{let a=t,u=e,d=0;s.subscribe(ee(o,g=>{const m=d++;u=a?n(u,g,m):(a=!0,g),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function WA(n){return n<=0?()=>En:j((e,t)=>{let r=[];e.subscribe(ee(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function sp(n){return j((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const it="primary",op=Symbol("RouteTitle");class g6{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function id(n){return new g6(n)}function m6(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ls(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!jN(n[i],e[i]))return!1;return!0}function jN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function $N(n){return n.length>0?n[n.length-1]:null}function Ca(n){return function e6(n){return!!n&&(n instanceof ct||C(n.lift)&&C(n.subscribe))}(n)?n:$f(n)?S(Promise.resolve(n)):B(n)}const y6={exact:function qN(n,e,t){if(!qu(n.segments,e.segments)||!py(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!qN(n.children[r],e.children[r],t))return!1;return!0},subset:GN},HN={exact:function v6(n,e){return Ls(n,e)},subset:function I6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>jN(n[t],e[t]))},ignored:()=>!0};function zN(n,e,t){return y6[t.paths](n.root,e.root,t.matrixParams)&&HN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function GN(n,e,t){return WN(n,e,e.segments,t)}function WN(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!qu(i,t)||e.hasChildren()||!py(i,t,r))}if(n.segments.length===t.length){if(!qu(n.segments,t)||!py(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!GN(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(qu(n.segments,i)&&py(n.segments,i,r)&&n.children[it])&&WN(n.children[it],e,s,r)}}function py(n,e,t){return e.every((r,i)=>HN[t](n[i].parameters,r.parameters))}class sd{constructor(e=new Ut([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=id(this.queryParams)),this._queryParamMap}toString(){return A6.serialize(this)}}class Ut{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gy(this)}}class ap{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=id(this.parameters)),this._parameterMap}toString(){return YN(this)}}function qu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let up=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:function(){return new KA},providedIn:"root"})}}return n})();class KA{parse(e){const t=new O6(e);return new sd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${cp(e.root,!0)}`,r=function D6(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${my(t)}=${my(i)}`).join("&"):`${my(t)}=${my(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function T6(n){return encodeURI(n)}(e.fragment)}`:""}`}}const A6=new KA;function gy(n){return n.segments.map(e=>YN(e)).join("/")}function cp(n,e){if(!n.hasChildren())return gy(n);if(e){const t=n.children[it]?cp(n.children[it],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==it&&r.push(`${i}:${cp(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function w6(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===it&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==it&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===it?[cp(n.children[it],!1)]:[`${i}:${cp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[it]?`${gy(n)}/${t[0]}`:`${gy(n)}/(${t.join("//")})`}}function KN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function my(n){return KN(n).replace(/%3B/gi,";")}function QA(n){return KN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _y(n){return decodeURIComponent(n)}function QN(n){return _y(n.replace(/\+/g,"%20"))}function YN(n){return`${QA(n.path)}${function C6(n){return Object.keys(n).map(e=>`;${QA(e)}=${QA(n[e])}`).join("")}(n.parameters)}`}const b6=/^[^\/()?;#]+/;function YA(n){const e=n.match(b6);return e?e[0]:""}const S6=/^[^\/()?;=#]+/,P6=/^[^=?&#]+/,x6=/^[^&#]+/;class O6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[it]=new Ut(e,t)),r}parseSegment(){const e=YA(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(e),new ap(_y(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function R6(n){const e=n.match(S6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=YA(this.remaining);i&&(r=i,this.capture(r))}e[_y(t)]=_y(r)}parseQueryParam(e){const t=function M6(n){const e=n.match(P6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function N6(n){const e=n.match(x6);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=QN(t),s=QN(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=YA(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new de(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=it);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[it]:new Ut([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new de(4011,!1)}}function JN(n){return n.segments.length>0?new Ut([],{[it]:n}):n}function ZN(n){const e={};for(const r of Object.keys(n.children)){const s=ZN(n.children[r]);if(r===it&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function k6(n){if(1===n.numberOfChildren&&n.children[it]){const e=n.children[it];return new Ut(n.segments.concat(e.segments),e.children)}return n}(new Ut(n.segments,e))}function Gu(n){return n instanceof sd}function XN(n){let e;const i=JN(function t(s){const o={};for(const u of s.children){const d=t(u);o[u.outlet]=d}const a=new Ut(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function eO(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return JA(i,i,i,t,r);const s=function F6(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new nO(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new nO(t,e,r)}(e);if(s.toRoot())return JA(i,i,new Ut([],{}),t,r);const o=function L6(n,e,t){if(n.isAbsolute)return new vy(e,!0,0);if(!t)return new vy(e,!1,NaN);if(null===t.parent)return new vy(t,!0,0);const r=yy(n.commands[0])?0:1;return function U6(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new de(4005,!1);i=r.segments.length}return new vy(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?dp(o.segmentGroup,o.index,s.commands):rO(o.segmentGroup,o.index,s.commands);return JA(i,o.segmentGroup,a,t,r)}function yy(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function lp(n){return"object"==typeof n&&null!=n&&n.outlets}function JA(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(g=>`${g}`):`${d}`}),o=n===e?t:tO(n,e,t);const a=JN(ZN(o));return new sd(a,s,i)}function tO(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:tO(s,e,t)}),new Ut(n.segments,r)}class nO{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yy(r[0]))throw new de(4003,!1);const i=r.find(lp);if(i&&i!==$N(r))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function rO(n,e,t){if(n||(n=new Ut([],{})),0===n.segments.length&&n.hasChildren())return dp(n,e,t);const r=function j6(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(lp(a))break;const u=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!sO(u,d,o))return s;r+=2}else{if(!sO(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Ut(n.segments.slice(0,r.pathIndex),{});return s.children[it]=new Ut(n.segments.slice(r.pathIndex),n.children),dp(s,0,i)}return r.match&&0===i.length?new Ut(n.segments,{}):r.match&&!n.hasChildren()?ZA(n,e,t):r.match?dp(n,0,i):ZA(n,e,t)}function dp(n,e,t){if(0===t.length)return new Ut(n.segments,{});{const r=function B6(n){return lp(n[0])?n[0].outlets:{[it]:n}}(t),i={};if(Object.keys(r).some(s=>s!==it)&&n.children[it]&&1===n.numberOfChildren&&0===n.children[it].segments.length){const s=dp(n.children[it],e,t);return new Ut(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=rO(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Ut(n.segments,i)}}function ZA(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(lp(s)){const u=$6(s.outlets);return new Ut(r,u)}if(0===i&&yy(t[0])){r.push(new ap(n.segments[e].path,iO(t[0]))),i++;continue}const o=lp(s)?s.outlets[it]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&yy(a)?(r.push(new ap(o,iO(a))),i+=2):(r.push(new ap(o,{})),i++)}return new Ut(r,{})}function $6(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=ZA(new Ut([],{}),0,r))}),e}function iO(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function sO(n,e,t){return n==t.path&&Ls(e,t.parameters)}const hp="imperative";class Us{constructor(e,t){this.id=e,this.url=t}}class Iy extends Us{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Da extends Us{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fp extends Us{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class od extends Us{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Ey extends Us{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class oO extends Us{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H6 extends Us{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class z6 extends Us{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class q6 extends Us{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G6 extends Us{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W6{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class K6{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Q6{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Y6{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class J6{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z6{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aO{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class XA{}class eT{constructor(e){this.url=e}}class X6{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new pp,this.attachRef=null}}let pp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new X6,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class uO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=tT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=tT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=nT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return nT(e,this._root).map(t=>t.value)}}function tT(n,e){if(n===e.value)return e;for(const t of e.children){const r=tT(n,t);if(r)return r}return null}function nT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=nT(n,t);if(r.length)return r.unshift(e),r}return[]}class Mo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ad(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class cO extends uO{constructor(e,t){super(e),this.snapshot=t,rT(this,e)}toString(){return this.snapshot.toString()}}function lO(n,e){const t=function e5(n,e){const o=new wy([],{},{},"",{},it,e,null,{});return new hO("",new Mo(o,[]))}(0,e),r=new k([new ap("",{})]),i=new k({}),s=new k({}),o=new k({}),a=new k(""),u=new ud(r,i,o,a,s,it,e,t.root);return u.snapshot=t.root,new cO(new Mo(u,[]),t)}class ud{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(fe(d=>d[op]))??B(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(fe(e=>id(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(fe(e=>id(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function dO(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function t5(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class wy{get title(){return this.data?.[op]}constructor(e,t,r,i,s,o,a,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=id(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=id(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hO extends uO{constructor(e,t){super(t),this.url=e,rT(this,t)}toString(){return fO(this._root)}}function rT(n,e){e.value._routerState=n,e.children.forEach(t=>rT(n,t))}function fO(n){const e=n.children.length>0?` { ${n.children.map(fO).join(", ")} } `:"";return`${n.value}${e}`}function iT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ls(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ls(e.params,t.params)||n.paramsSubject.next(t.params),function _6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ls(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ls(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function sT(n,e){const t=Ls(n.params,e.params)&&function E6(n,e){return qu(n,e)&&n.every((t,r)=>Ls(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||sT(n.parent,e.parent))}let oT=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=it,this.activateEvents=new Mn,this.deactivateEvents=new Mn,this.attachEvents=new Mn,this.detachEvents=new Mn,this.parentContexts=be(pp),this.location=be(hs),this.changeDetector=be(q_),this.environmentInjector=be(Di),this.inputBinder=be(Ay,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new n5(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=We({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[hi]})}}return n})();class n5{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ud?this.route:e===pp?this.childContexts:this.parent.get(e,t)}}const Ay=new ye("");let pO=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=zA([r.queryParams,r.params,r.data]).pipe(Ce(([s,o,a],u)=>(a={...s,...o,...a},0===u?B(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function RG(n){const e=ft(n);if(!e)return null;const t=new Ff(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();function gp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function i5(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return gp(n,r,i);return gp(n,r)})}(n,e,t);return new Mo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>gp(n,a)),o}}const r=function s5(n){return new ud(new k(n.url),new k(n.params),new k(n.queryParams),new k(n.fragment),new k(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>gp(n,s));return new Mo(r,i)}}const aT="ngNavigationCancelingError";function gO(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Gu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mO(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function mO(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[aT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function _O(n){return n&&n[aT]}let yO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wi({type:n,selectors:[["ng-component"]],standalone:!0,features:[mM],decls:1,vars:0,template:function(r,i){1&r&&ks(0,"router-outlet")},dependencies:[oT],encapsulation:2})}}return n})();function uT(n){const e=n.children&&n.children.map(uT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==it&&(t.component=yO),t}function gs(n){return n.outlet||it}function mp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class f5{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),iT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ad(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ad(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ad(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=ad(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Z6(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Y6(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(iT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),iT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=mp(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class vO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ty{constructor(e,t){this.component=e,this.route=t}}function p5(n,e,t){const r=n._root;return _p(r,e?e._root:null,t,[r.value])}function cd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function _I(n){return null!==bc(n)}(n)?e.get(n):n:r}function _p(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=ad(e);return n.children.forEach(o=>{(function m5(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function _5(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!qu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qu(n.url,e.url)||!Ls(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sT(n,e)||!Ls(n.queryParams,e.queryParams);default:return!sT(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new vO(r)):(s.data=o.data,s._resolvedData=o._resolvedData),_p(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ty(a.outlet.component,o))}else o&&yp(e,a,i),i.canActivateChecks.push(new vO(r)),_p(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>yp(a,t.getContext(o),i)),i}function yp(n,e,t){const r=ad(n),i=n.value;Object.entries(r).forEach(([s,o])=>{yp(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Ty(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function vp(n){return"function"==typeof n}function IO(n){return n instanceof ly||"EmptyError"===n?.name}const Cy=Symbol("INITIAL_VALUE");function ld(){return Ce(n=>zA(n.map(e=>e.pipe(nd(1),dy(Cy)))).pipe(fe(e=>{for(const t of e)if(!0!==t){if(t===Cy)return Cy;if(!1===t||t instanceof sd)return t}return!0}),Xi(e=>e!==Cy),nd(1)))}function EO(n){return function Cr(...n){return ai(n)}(Ir(e=>{if(Gu(e))throw gO(0,e)}),fe(e=>!0===e))}class Dy{constructor(e){this.segmentGroup=e||null}}class wO{constructor(e){this.urlTree=e}}function dd(n){return ip(new Dy(n))}function AO(n){return ip(new wO(n))}class F5{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new de(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return B(r);if(i.numberOfChildren>1||!i.children[it])return ip(new de(4e3,!1));i=i.children[it]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new sd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Ut(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new de(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const cT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function L5(n,e,t,r,i){const s=lT(n,e,t);return s.matched?(r=function a5(n,e){return n.providers&&!n._injector&&(n._injector=jw(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function O5(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?B(i.map(o=>{const a=cd(o,n);return Ca(function A5(n){return n&&vp(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(ld(),EO()):B(!0)}(r,e,t).pipe(fe(o=>!0===o?s:{...cT}))):B(s)}function lT(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...cT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||m6)(t,n,e);if(!i)return{...cT};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function TO(n,e,t,r){return t.length>0&&function j5(n,e,t){return t.some(r=>by(n,e,r)&&gs(r)!==it)}(n,t,r)?{segmentGroup:new Ut(e,B5(r,new Ut(t,n.children))),slicedSegments:[]}:0===t.length&&function $5(n,e,t){return t.some(r=>by(n,e,r))}(n,t,r)?{segmentGroup:new Ut(n.segments,U5(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ut(n.segments,n.children),slicedSegments:t}}function U5(n,e,t,r,i){const s={};for(const o of r)if(by(n,t,o)&&!i[gs(o)]){const a=new Ut([],{});s[gs(o)]=a}return{...i,...s}}function B5(n,e){const t={};t[it]=e;for(const r of n)if(""===r.path&&gs(r)!==it){const i=new Ut([],{});t[gs(r)]=i}return t}function by(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class G5{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new F5(this.urlSerializer,this.urlTree)}noMatchError(e){return new de(4002,!1)}recognize(){const e=TO(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,it).pipe(zu(t=>{if(t instanceof wO)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Dy?this.noMatchError(t):t}),fe(t=>{const r=new wy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},it,this.rootComponentType,null,{}),i=new Mo(r,t),s=new hO("",i),o=function V6(n,e,t=null,r=null){return eO(XN(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,it).pipe(zu(r=>{throw r instanceof Dy?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=dO(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return S(i).pipe(rd(s=>{const o=r.children[s],a=function d5(n,e){const t=n.filter(r=>gs(r)===e);return t.push(...n.filter(r=>gs(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),fy((s,o)=>(s.push(...o),s)),hy(null),function h6(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xi((i,s)=>n(i,s,r)):Ht,WA(1),t?hy(e):BN(()=>new ly))}(),In(s=>{if(null===s)return dd(r);const o=CO(s);return function W5(n){n.sort((e,t)=>e.value.outlet===it?-1:t.value.outlet===it?1:e.value.outlet.localeCompare(t.value.outlet))}(o),B(o)}))}processSegment(e,t,r,i,s,o){return S(t).pipe(rd(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(zu(u=>{if(u instanceof Dy)return B(null);throw u}))),Ta(a=>!!a),zu(a=>{if(IO(a))return function z5(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?B([]):dd(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function H5(n,e,t,r){return!!(gs(n)===r||r!==it&&by(e,t,n))&&("**"===n.path||lT(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):dd(i):dd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?AO(s):this.applyRedirects.lineralizeSegments(r,s).pipe(In(o=>{const a=new Ut(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:g}=lT(t,i,s);if(!a)return dd(t);const m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,g);return i.redirectTo.startsWith("/")?AO(m):this.applyRedirects.lineralizeSegments(i,m).pipe(In(v=>this.processSegment(e,r,t,v.concat(d),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?$N(i).parameters:{};a=B({snapshot:new wy(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,DO(r),gs(r),r.component??r._loadedComponent??null,r,bO(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=L5(t,r,i,e).pipe(fe(({matched:u,consumedSegments:d,remainingSegments:g,parameters:m})=>u?{snapshot:new wy(d,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,DO(r),gs(r),r.component??r._loadedComponent??null,r,bO(r)),consumedSegments:d,remainingSegments:g}:null));return a.pipe(Ce(u=>null===u?dd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Ce(({routes:d})=>{const g=r._loadedInjector??e,{snapshot:m,consumedSegments:v,remainingSegments:w}=u,{segmentGroup:T,slicedSegments:D}=TO(t,v,w,d);if(0===D.length&&T.hasChildren())return this.processChildren(g,d,T).pipe(fe(G=>null===G?null:[new Mo(m,G)]));if(0===d.length&&0===D.length)return B([new Mo(m,[])]);const M=gs(r)===s;return this.processSegment(g,d,T,D,M?it:s,!0).pipe(fe(G=>[new Mo(m,G)]))}))))}getChildConfig(e,t,r){return t.children?B({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?B({routes:t._loadedRoutes,injector:t._loadedInjector}):function N5(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?B(!0):B(i.map(o=>{const a=cd(o,n);return Ca(function v5(n){return n&&vp(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(ld(),EO())}(e,t,r).pipe(In(i=>i?this.configLoader.loadChildren(e,t).pipe(Ir(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function V5(n){return ip(mO(!1,3))}())):B({routes:[],injector:e})}}function K5(n){const e=n.value.routeConfig;return e&&""===e.path}function CO(n){const e=[],t=new Set;for(const r of n){if(!K5(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=CO(r.children);e.push(new Mo(r.value,i))}return e.filter(r=>!t.has(r))}function DO(n){return n.data||{}}function bO(n){return n.resolve||{}}function SO(n){return"string"==typeof n.title||null===n.title}function dT(n){return Ce(e=>{const t=n(e);return t?S(t).pipe(fe(()=>e)):B(e)})}const hd=new ye("ROUTES");let hT=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=be(ux)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return B(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ca(t.loadComponent()).pipe(fe(RO),Ir(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),sp(()=>{this.componentLoaders.delete(t)})),i=new UN(r,()=>new q).pipe(GA());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return B({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function tW(n,e,t,r){return Ca(n.loadChildren()).pipe(fe(RO),In(i=>i instanceof pM||Array.isArray(i)?B(i):S(e.compileModuleAsync(i))),fe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(hd,[],{optional:!0,self:!0}).flat()),{routes:o.map(uT),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(sp(()=>{this.childrenLoaders.delete(r)})),o=new UN(s,()=>new q).pipe(GA());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RO(n){return function nW(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Sy=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new q,this.transitionAbortSubject=new q,this.configLoader=be(hT),this.environmentInjector=be(Di),this.urlSerializer=be(up),this.rootContexts=be(pp),this.inputBindingEnabled=null!==be(Ay,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>B(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new K6(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new W6(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new k({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:hp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xi(s=>0!==s.id),fe(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Ce(s=>{this.currentTransition=s;let o=!1,a=!1;return B(s).pipe(Ir(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ce(u=>{const d=u.currentBrowserUrl.toString(),g=!t.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!g&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const v="";return this.events.next(new od(u.id,this.urlSerializer.serialize(u.rawUrl),v,0)),u.resolve(null),En}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return B(u).pipe(Ce(v=>{const w=this.transitions?.getValue();return this.events.next(new Iy(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),w!==this.transitions?.getValue()?En:Promise.resolve(v)}),function Q5(n,e,t,r,i,s){return In(o=>function q5(n,e,t,r,i,s,o="emptyOnly"){return new G5(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(fe(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Ir(v=>{s.targetSnapshot=v.targetSnapshot,s.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:v.urlAfterRedirects};const w=new oO(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(w)}));if(g&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:v,extractedUrl:w,source:T,restoredState:D,extras:M}=u,G=new Iy(v,this.urlSerializer.serialize(w),T,D);this.events.next(G);const F=lO(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:F,urlAfterRedirects:w,extras:{...M,skipLocationChange:!1,replaceUrl:!1}},B(s)}{const v="";return this.events.next(new od(u.id,this.urlSerializer.serialize(u.extractedUrl),v,1)),u.resolve(null),En}}),Ir(u=>{const d=new H6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),fe(u=>(this.currentTransition=s={...u,guards:p5(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function C5(n,e){return In(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?B({...t,guardsResult:!0}):function D5(n,e,t,r){return S(n).pipe(In(i=>function x5(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?B(s.map(a=>{const u=mp(e)??i,d=cd(a,u);return Ca(function w5(n){return n&&vp(n.canDeactivate)}(d)?d.canDeactivate(n,e,t,r):u.runInContext(()=>d(n,e,t,r))).pipe(Ta())})).pipe(ld()):B(!0)}(i.component,i.route,t,e,r)),Ta(i=>!0!==i,!0))}(o,r,i,n).pipe(In(a=>a&&function y5(n){return"boolean"==typeof n}(a)?function b5(n,e,t,r){return S(e).pipe(rd(i=>qA(function R5(n,e){return null!==n&&e&&e(new Q6(n)),B(!0)}(i.route.parent,r),function S5(n,e){return null!==n&&e&&e(new J6(n)),B(!0)}(i.route,r),function M5(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function g5(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>LN(()=>B(o.guards.map(u=>{const d=mp(o.node)??t,g=cd(u,d);return Ca(function E5(n){return n&&vp(n.canActivateChild)}(g)?g.canActivateChild(r,n):d.runInContext(()=>g(r,n))).pipe(Ta())})).pipe(ld())));return B(s).pipe(ld())}(n,i.path,t),function P5(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return B(!0);const i=r.map(s=>LN(()=>{const o=mp(e)??t,a=cd(s,o);return Ca(function I5(n){return n&&vp(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Ta())}));return B(i).pipe(ld())}(n,i.route,t))),Ta(i=>!0!==i,!0))}(r,s,n,e):B(a)),fe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Ir(u=>{if(s.guardsResult=u.guardsResult,Gu(u.guardsResult))throw gO(0,u.guardsResult);const d=new z6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),Xi(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),dT(u=>{if(u.guards.canActivateChecks.length)return B(u).pipe(Ir(d=>{const g=new q6(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}),Ce(d=>{let g=!1;return B(d).pipe(function Y5(n,e){return In(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return B(t);let s=0;return S(i).pipe(rd(o=>function J5(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!SO(i)&&(s[op]=i.title),function Z5(n,e,t,r){const i=function X5(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return B({});const s={};return S(i).pipe(In(o=>function eW(n,e,t,r){const i=mp(e)??r,s=cd(n,i);return Ca(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Ta(),Ir(a=>{s[o]=a}))),WA(1),function f6(n){return fe(()=>n)}(s),zu(o=>IO(o)?En:ip(o)))}(s,n,e,r).pipe(fe(o=>(n._resolvedData=o,n.data=dO(n,t).resolve,i&&SO(i)&&(n.data[op]=i.title),null)))}(o.route,r,n,e)),Ir(()=>s++),WA(1),In(o=>s===i.length?B(t):En))})}(t.paramsInheritanceStrategy,this.environmentInjector),Ir({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(d,"",2)}}))}),Ir(d=>{const g=new G6(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}))}),dT(u=>{const d=g=>{const m=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(g.routeConfig).pipe(Ir(v=>{g.component=v}),fe(()=>{})));for(const v of g.children)m.push(...d(v));return m};return zA(d(u.targetSnapshot.root)).pipe(hy(),nd(1))}),dT(()=>this.afterPreactivation()),fe(u=>{const d=function r5(n,e,t){const r=gp(n,e._root,t?t._root:void 0);return new cO(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:d},s}),Ir(()=>{this.events.next(new XA)}),((n,e,t,r)=>fe(i=>(new f5(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),nd(1),Ir({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Da(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function p6(n){return j((e,t)=>{zn(n).subscribe(ee(t,()=>t.complete(),Ne)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Ir(u=>{throw u}))),sp(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),zu(u=>{if(a=!0,_O(u))this.events.next(new fp(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function o5(n){return _O(n)&&Gu(n.url)}(u)?this.events.next(new eT(u.url)):s.resolve(!1);else{this.events.next(new Ey(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(d){s.reject(d)}}return En}))}))}cancelNavigationTransition(t,r,i){const s=new fp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function PO(n){return n!==hp}let MO=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===it);return r}getResolvedTitleForRoute(t){return t.data[op]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:function(){return be(rW)},providedIn:"root"})}}return n})(),rW=(()=>{class n extends MO{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(_e(PN))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:function(){return be(oW)},providedIn:"root"})}}return n})();class sW{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let oW=(()=>{class n extends sW{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Un(n)))(i||n)}}()}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Ry=new ye("",{providedIn:"root",factory:()=>({})});let aW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:function(){return be(uW)},providedIn:"root"})}}return n})(),uW=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ip=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ip||{});function xO(n,e){n.events.pipe(Xi(t=>t instanceof Da||t instanceof fp||t instanceof Ey||t instanceof od),fe(t=>t instanceof Da||t instanceof od?Ip.COMPLETE:t instanceof fp&&(0===t.code||1===t.code)?Ip.REDIRECTING:Ip.FAILED),Xi(t=>t!==Ip.REDIRECTING),nd(1)).subscribe(()=>{e()})}function cW(n){throw n}function lW(n,e,t){return e.parse("/")}const dW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let es=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=be(ax),this.isNgZoneEnabled=!1,this._events=new q,this.options=be(Ry,{optional:!0})||{},this.pendingTasks=be(j_),this.errorHandler=this.options.errorHandler||cW,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||lW,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=be(aW),this.routeReuseStrategy=be(iW),this.titleStrategy=be(MO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=be(hd,{optional:!0})?.flat()??[],this.navigationTransitions=be(Sy),this.urlSerializer=be(up),this.location=be(vA),this.componentInputBindingEnabled=!!be(Ay,{optional:!0}),this.eventsSubscription=new It,this.isNgZoneEnabled=be(Vt)instanceof Vt&&Vt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new sd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=lO(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(NO(r)&&this._events.next(r));if(r instanceof Iy)PO(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof od)this.rawUrlTree=i.rawUrl;else if(r instanceof oO){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof XA)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof fp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof eT){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||PO(i.source)};this.scheduleNavigation(s,hp,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Ey&&this.restoreHistory(i,!0),r instanceof Da&&(this.navigated=!0),NO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),hp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(uT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let m,g=null;switch(a){case"merge":g={...this.currentUrlTree.queryParams,...s};break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=s||null}null!==g&&(g=this.removeEmptyProps(g));try{m=XN(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return eO(m,t,g,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Gu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,hp,null,r)}navigate(t,r={skipLocationChange:!1}){return function fW(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new de(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...dW}:!1===r?{...hW}:r,Gu(t))return zN(this.currentUrlTree,t,i);const s=this.parseUrl(t);return zN(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((m,v)=>{a=m,u=v});const g=this.pendingTasks.add();return xO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function NO(n){return!(n instanceof XA||n instanceof eT)}let Py=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new q,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof Da&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function dS(n,e,t){return function jB(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?lS:cS}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(ge(es),ge(ud),function vl(n){return function iE(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Fc(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(tr(),n)}("tabindex"),ge(wo),ge(bi),ge(Hu))}}static{this.\u0275dir=We({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Pi("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Os("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",ed],skipLocationChange:["skipLocationChange","skipLocationChange",ed],replaceUrl:["replaceUrl","replaceUrl",ed],routerLink:"routerLink"},standalone:!0,features:[CR,hi]})}}return n})();class OO{}let mW=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Xi(t=>t instanceof Da),rd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=jw(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return S(i).pipe(Bi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):B(null);const s=i.pipe(In(o=>null===o?B(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?S([s,this.loader.loadComponent(r)]).pipe(Bi()):s})}static{this.\u0275fac=function(r){return new(r||n)(_e(es),_e(ux),_e(Di),_e(OO),_e(hT))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const fT=new ye("");let kO=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Iy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Da?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof od&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof aO&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new aO(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function ZS(){throw new Error("invalid")}()}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();function xo(n,e){return{\u0275kind:n,\u0275providers:e}}function FO(){const n=be(Si);return e=>{const t=n.get(Xl);if(e!==t.components[0])return;const r=n.get(es),i=n.get(LO);1===n.get(pT)&&r.initialNavigation(),n.get(UO,null,ot.Optional)?.setUpPreloading(),n.get(fT,null,ot.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const LO=new ye("",{factory:()=>new q}),pT=new ye("",{providedIn:"root",factory:()=>1}),UO=new ye("");function IW(n){return xo(0,[{provide:UO,useExisting:mW},{provide:OO,useExisting:n}])}const BO=new ye("ROUTER_FORROOT_GUARD"),wW=[vA,{provide:up,useClass:KA},es,pp,{provide:ud,useFactory:function VO(n){return n.routerState.root},deps:[es]},hT,[]];function AW(){return new gx("Router",es)}let gT=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[wW,[],{provide:hd,multi:!0,useValue:t},{provide:BO,useFactory:bW,deps:[[es,new ku,new wl]]},{provide:Ry,useValue:r||{}},r?.useHash?{provide:Hu,useClass:OG}:{provide:Hu,useClass:Wx},{provide:fT,useFactory:()=>{const n=be(e9),e=be(Vt),t=be(Ry),r=be(Sy),i=be(up);return t.scrollOffset&&n.setOffset(t.scrollOffset),new kO(i,r,n,e,t)}},r?.preloadingStrategy?IW(r.preloadingStrategy).\u0275providers:[],{provide:gx,multi:!0,useFactory:AW},r?.initialNavigation?SW(r):[],r?.bindToComponentInputs?xo(8,[pO,{provide:Ay,useExisting:pO}]).\u0275providers:[],[{provide:jO,useFactory:FO},{provide:cA,multi:!0,useExisting:jO}]]}}static forChild(t){return{ngModule:n,providers:[{provide:hd,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(_e(BO,8))}}static{this.\u0275mod=Qr({type:n})}static{this.\u0275inj=or({})}}return n})();function bW(n){return"guarded"}function SW(n){return["disabled"===n.initialNavigation?xo(3,[{provide:tA,multi:!0,useFactory:()=>{const e=be(es);return()=>{e.setUpLocationChangeListener()}}},{provide:pT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?xo(2,[{provide:pT,useValue:0},{provide:tA,multi:!0,deps:[Si],useFactory:e=>{const t=e.get(xG,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(es),s=e.get(LO);xO(i,()=>{r(!0)}),e.get(Sy).afterPreactivation=()=>(r(!0),s.closed?B(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const jO=new ye(""),PW=[];let MW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qr({type:n})}static{this.\u0275inj=or({imports:[gT.forRoot(PW),gT]})}}return n})(),xW=(()=>{class n{constructor(){this.title="wedding-app"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wi({type:n,selectors:[["app-root"]],decls:23,vars:5,consts:[[1,"grid-container"],[1,"grid-item1"],[1,"avatar-container"],[1,"circular-frame"],["src","assets/images/picture3.jpg"],[3,"routerLink"],[1,"grid-item2"]],template:function(r,i){1&r&&(zt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),ks(4,"img",4),Lt()(),zt(5,"ul")(6,"li")(7,"a",5),xn(8,"HOME"),Lt()(),zt(9,"li")(10,"a",5),xn(11,"ABOUT"),Lt()(),zt(12,"li")(13,"a",5),xn(14,"SCHEDULE"),Lt()(),zt(15,"li")(16,"a",5),xn(17,"CONTACT"),Lt()(),zt(18,"li")(19,"a",5),xn(20,"RSVP"),Lt()()()(),zt(21,"div",6),ks(22,"router-outlet"),Lt()()),2&r&&(ya(7),va("routerLink","Home"),ya(3),va("routerLink","About"),ya(3),va("routerLink","Schedule"),ya(3),va("routerLink","Contact"),ya(3),va("routerLink","Rsvp"))},dependencies:[oT,Py],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:20% auto}.grid-item1[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;font-family:Lora,cursive;background-color:#96a498;color:#fff}.grid-item2[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;background-color:#fff;font-family:Lora,cursive}.avatar-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.circular-frame[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:20px;width:180px;height:180px;border-radius:50%;overflow:hidden}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:26px;list-style-type:none;margin-top:1em}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:inherit;text-decoration:none}@media (max-width: 1200px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:22px}.circular-frame[_ngcontent-%COMP%]{width:140px;height:140px}}@media (max-width: 1000px){ul[_ngcontent-%COMP%]{padding-left:1.5em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:18px}.circular-frame[_ngcontent-%COMP%]{width:120px;height:120px}}@media (max-width: 800px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:25% auto}.circular-frame[_ngcontent-%COMP%]{width:110px;height:110px}}@media (max-width: 600px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:33% auto}.circular-frame[_ngcontent-%COMP%]{width:110px;height:110px}}@media (max-width: 450px){ul[_ngcontent-%COMP%]{padding-left:1em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px}.circular-frame[_ngcontent-%COMP%]{width:90px;height:90px}}.circular-frame[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}"]})}}return n})();var fd=et(979);(0,fd.registerVersion)("firebase","10.14.1","app");class kW extends It{constructor(e,t){super()}schedule(e,t=0){return this}}const My={setInterval(n,e,...t){const{delegate:r}=My;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=My;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class $O extends kW{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return My.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&My.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ne(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const mT={now:()=>(mT.delegate||Date).now(),delegate:void 0};class Ep{constructor(e,t=Ep.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Ep.now=mT.now;class HO extends Ep{constructor(e,t=Ep.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const LW=new class FW extends HO{}(class VW extends $O{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),zO=new HO($O),_T=new kl("ANGULARFIRE2_VERSION");class qO{constructor(){return((n,e)=>{const t=(0,fd.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(BW)}}const BW="app-check";function pd(){}class GO{zone;delegate;constructor(e,t=LW){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class jW{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pd,{},pd,pd)),t.pipe(Ir({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let WO=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new GO(Zone.current)),this.insideAngular=t.run(()=>new GO(Zone.current,zO)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(_e(Vt))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ni(n){return function HW(n){return function(t){return(t=t.lift(new jW(n.ngZone))).pipe(Rr(n.outsideAngular),qr(n.insideAngular))}}(function gd(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var ba=et(574);ba.A.registerVersion("firebase","10.14.1","app-compat");const WW=["ngOnDestroy"];class KO{constructor(e){return e}}const xy=new ye("angularfire2.app.options"),Ny=new ye("angularfire2.app.name");function yT(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=ba.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>ba.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;YW("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new KO(o)}const YW=(n,...e)=>{},JW={provide:KO,useFactory:yT,deps:[xy,Vt,[new ku,Ny]]};let ZW=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:xy,useValue:t},{provide:Ny,useValue:r}]}}constructor(t){ba.A.registerVersion("angularfire",_T.full,"core"),ba.A.registerVersion("angularfire",_T.full,"app-compat"),ba.A.registerVersion("angular",bS.full,t.toString())}static \u0275fac=function(r){return new(r||n)(_e(Ms))};static \u0275mod=Qr({type:n});static \u0275inj=or({providers:[JW]})}return n})();function QO(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function XW(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(YO("error",`${e} was already initialized on the ${t} Firebase App with different settings.${e8?" You may need to reload as Firebase is not HMR aware.":""}`),YO("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const e8=typeof module<"u"&&!!module.hot,YO=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],et(324);class t8 extends q{constructor(e=1/0,t=1/0,r=mT){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function JO(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,W({connector:()=>new t8(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ZO(n,e){return C(e)?Ce(()=>n,e):Ce(()=>n)}const XO=new ye("angularfire2.auth.use-emulator"),ek=new ye("angularfire2.auth.settings"),tk=new ye("angularfire2.auth.tenant-id"),nk=new ye("angularfire2.auth.langugage-code"),rk=new ye("angularfire2.auth.use-device-language"),ik=new ye("angularfire.auth.persistence"),sk=(n,e,t,r,i,s,o,a)=>QO(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,g]of Object.entries(o))u.settings[d]=g;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let ok=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,d,g,m,v,w){const T=new q,D=B(void 0).pipe(qr(o.outsideAngular),Ce(()=>s.runOutsideAngular(()=>Promise.resolve().then(et.bind(et,324)))),fe(()=>yT(t,s,r)),fe(M=>sk(M,s,a,d,g,m,u,v)),JO({bufferSize:1,refCount:!1}));if(oy(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=B(null);else{D.pipe(Ta()).subscribe();const M=D.pipe(Ce(K=>K.getRedirectResult().then(ae=>ae,()=>null)),Ni,JO({bufferSize:1,refCount:!1})),G=D.pipe(Ce(K=>new ct(ae=>({unsubscribe:s.runOutsideAngular(()=>K.onAuthStateChanged(ve=>ae.next(ve),ve=>ae.error(ve),()=>ae.complete()))})))),F=D.pipe(Ce(K=>new ct(ae=>({unsubscribe:s.runOutsideAngular(()=>K.onIdTokenChanged(ve=>ae.next(ve),ve=>ae.error(ve),()=>ae.complete()))}))));this.authState=M.pipe(ZO(G),Rr(o.outsideAngular),qr(o.insideAngular)),this.user=M.pipe(ZO(F),Rr(o.outsideAngular),qr(o.insideAngular)),this.idToken=this.user.pipe(Ce(K=>K?S(K.getIdToken()):B(null))),this.idTokenResult=this.user.pipe(Ce(K=>K?S(K.getIdTokenResult()):B(null))),this.credential=P(M,T,this.authState.pipe(Xi(K=>!K))).pipe(fe(K=>K?.user?K:null),Rr(o.outsideAngular),qr(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(WW.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>t.run(()=>d)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(g=>{const m=g?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,m),m})})})}))(this,D,s,{spy:{apply:(M,G,F)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&F.then(K=>T.next(K))}}})}static \u0275fac=function(r){return new(r||n)(_e(xy),_e(Ny,8),_e(Ms),_e(Vt),_e(WO),_e(XO,8),_e(ek,8),_e(tk,8),_e(nk,8),_e(rk,8),_e(ik,8),_e(qO,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function vT(){return j((n,e)=>{let t,r=!1;n.subscribe(ee(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Ku,lk,se=et(467),ak=et(779),Bs=et(398),xt=et(401),uk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ck={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(V,b,O){O||(O=0);var L=Array(16);if("string"==typeof b)for(var $=0;16>$;++$)L[$]=b.charCodeAt(O++)|b.charCodeAt(O++)<<8|b.charCodeAt(O++)<<16|b.charCodeAt(O++)<<24;else for($=0;16>$;++$)L[$]=b[O++]|b[O++]<<8|b[O++]<<16|b[O++]<<24;var Q=V.g[3],N=(b=V.g[0])+(Q^(O=V.g[1])&(($=V.g[2])^Q))+L[0]+3614090360&4294967295;N=(O=($=(Q=(b=(O=($=(Q=(b=(O=($=(Q=(b=(O=($=(Q=(b=(O=($=(Q=(b=(O=($=(Q=(b=(O=($=(Q=(b=(O=($=(Q=(b=(O=($=(Q=(b=(O=($=(Q=(b=(O=($=(Q=(b=(O=($=(Q=(b=(O=($=(Q=(b=(O=($=(Q=(b=(O=($=(Q=(b=O+(N<<7&4294967295|N>>>25))+((N=Q+($^b&(O^$))+L[1]+3905402710&4294967295)<<12&4294967295|N>>>20))+((N=$+(O^Q&(b^O))+L[2]+606105819&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^$&(Q^b))+L[3]+3250441966&4294967295)<<22&4294967295|N>>>10))+((N=b+(Q^O&($^Q))+L[4]+4118548399&4294967295)<<7&4294967295|N>>>25))+((N=Q+($^b&(O^$))+L[5]+1200080426&4294967295)<<12&4294967295|N>>>20))+((N=$+(O^Q&(b^O))+L[6]+2821735955&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^$&(Q^b))+L[7]+4249261313&4294967295)<<22&4294967295|N>>>10))+((N=b+(Q^O&($^Q))+L[8]+1770035416&4294967295)<<7&4294967295|N>>>25))+((N=Q+($^b&(O^$))+L[9]+2336552879&4294967295)<<12&4294967295|N>>>20))+((N=$+(O^Q&(b^O))+L[10]+4294925233&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^$&(Q^b))+L[11]+2304563134&4294967295)<<22&4294967295|N>>>10))+((N=b+(Q^O&($^Q))+L[12]+1804603682&4294967295)<<7&4294967295|N>>>25))+((N=Q+($^b&(O^$))+L[13]+4254626195&4294967295)<<12&4294967295|N>>>20))+((N=$+(O^Q&(b^O))+L[14]+2792965006&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^$&(Q^b))+L[15]+1236535329&4294967295)<<22&4294967295|N>>>10))+((N=b+($^Q&(O^$))+L[1]+4129170786&4294967295)<<5&4294967295|N>>>27))+((N=Q+(O^$&(b^O))+L[6]+3225465664&4294967295)<<9&4294967295|N>>>23))+((N=$+(b^O&(Q^b))+L[11]+643717713&4294967295)<<14&4294967295|N>>>18))+((N=O+(Q^b&($^Q))+L[0]+3921069994&4294967295)<<20&4294967295|N>>>12))+((N=b+($^Q&(O^$))+L[5]+3593408605&4294967295)<<5&4294967295|N>>>27))+((N=Q+(O^$&(b^O))+L[10]+38016083&4294967295)<<9&4294967295|N>>>23))+((N=$+(b^O&(Q^b))+L[15]+3634488961&4294967295)<<14&4294967295|N>>>18))+((N=O+(Q^b&($^Q))+L[4]+3889429448&4294967295)<<20&4294967295|N>>>12))+((N=b+($^Q&(O^$))+L[9]+568446438&4294967295)<<5&4294967295|N>>>27))+((N=Q+(O^$&(b^O))+L[14]+3275163606&4294967295)<<9&4294967295|N>>>23))+((N=$+(b^O&(Q^b))+L[3]+4107603335&4294967295)<<14&4294967295|N>>>18))+((N=O+(Q^b&($^Q))+L[8]+1163531501&4294967295)<<20&4294967295|N>>>12))+((N=b+($^Q&(O^$))+L[13]+2850285829&4294967295)<<5&4294967295|N>>>27))+((N=Q+(O^$&(b^O))+L[2]+4243563512&4294967295)<<9&4294967295|N>>>23))+((N=$+(b^O&(Q^b))+L[7]+1735328473&4294967295)<<14&4294967295|N>>>18))+((N=O+(Q^b&($^Q))+L[12]+2368359562&4294967295)<<20&4294967295|N>>>12))+((N=b+(O^$^Q)+L[5]+4294588738&4294967295)<<4&4294967295|N>>>28))+((N=Q+(b^O^$)+L[8]+2272392833&4294967295)<<11&4294967295|N>>>21))+((N=$+(Q^b^O)+L[11]+1839030562&4294967295)<<16&4294967295|N>>>16))+((N=O+($^Q^b)+L[14]+4259657740&4294967295)<<23&4294967295|N>>>9))+((N=b+(O^$^Q)+L[1]+2763975236&4294967295)<<4&4294967295|N>>>28))+((N=Q+(b^O^$)+L[4]+1272893353&4294967295)<<11&4294967295|N>>>21))+((N=$+(Q^b^O)+L[7]+4139469664&4294967295)<<16&4294967295|N>>>16))+((N=O+($^Q^b)+L[10]+3200236656&4294967295)<<23&4294967295|N>>>9))+((N=b+(O^$^Q)+L[13]+681279174&4294967295)<<4&4294967295|N>>>28))+((N=Q+(b^O^$)+L[0]+3936430074&4294967295)<<11&4294967295|N>>>21))+((N=$+(Q^b^O)+L[3]+3572445317&4294967295)<<16&4294967295|N>>>16))+((N=O+($^Q^b)+L[6]+76029189&4294967295)<<23&4294967295|N>>>9))+((N=b+(O^$^Q)+L[9]+3654602809&4294967295)<<4&4294967295|N>>>28))+((N=Q+(b^O^$)+L[12]+3873151461&4294967295)<<11&4294967295|N>>>21))+((N=$+(Q^b^O)+L[15]+530742520&4294967295)<<16&4294967295|N>>>16))+((N=O+($^Q^b)+L[2]+3299628645&4294967295)<<23&4294967295|N>>>9))+((N=b+($^(O|~Q))+L[0]+4096336452&4294967295)<<6&4294967295|N>>>26))+((N=Q+(O^(b|~$))+L[7]+1126891415&4294967295)<<10&4294967295|N>>>22))+((N=$+(b^(Q|~O))+L[14]+2878612391&4294967295)<<15&4294967295|N>>>17))+((N=O+(Q^($|~b))+L[5]+4237533241&4294967295)<<21&4294967295|N>>>11))+((N=b+($^(O|~Q))+L[12]+1700485571&4294967295)<<6&4294967295|N>>>26))+((N=Q+(O^(b|~$))+L[3]+2399980690&4294967295)<<10&4294967295|N>>>22))+((N=$+(b^(Q|~O))+L[10]+4293915773&4294967295)<<15&4294967295|N>>>17))+((N=O+(Q^($|~b))+L[1]+2240044497&4294967295)<<21&4294967295|N>>>11))+((N=b+($^(O|~Q))+L[8]+1873313359&4294967295)<<6&4294967295|N>>>26))+((N=Q+(O^(b|~$))+L[15]+4264355552&4294967295)<<10&4294967295|N>>>22))+((N=$+(b^(Q|~O))+L[6]+2734768916&4294967295)<<15&4294967295|N>>>17))+((N=O+(Q^($|~b))+L[13]+1309151649&4294967295)<<21&4294967295|N>>>11))+((Q=(b=O+((N=b+($^(O|~Q))+L[4]+4149444226&4294967295)<<6&4294967295|N>>>26))+((N=Q+(O^(b|~$))+L[11]+3174756917&4294967295)<<10&4294967295|N>>>22))^(($=Q+((N=$+(b^(Q|~O))+L[2]+718787259&4294967295)<<15&4294967295|N>>>17))|~b))+L[9]+3951481745&4294967295,V.g[0]=V.g[0]+b&4294967295,V.g[1]=V.g[1]+($+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+$&4294967295,V.g[3]=V.g[3]+Q&4294967295}function o(V,b){this.h=b;for(var O=[],L=!0,$=V.length-1;0<=$;$--){var Q=0|V[$];L&&Q==b||(O[$]=Q,L=!1)}this.g=O}(function e(V,b){function O(){}O.prototype=b.prototype,V.D=b.prototype,V.prototype=new O,V.prototype.constructor=V,V.C=function(L,$,Q){for(var N=Array(arguments.length-2),Ho=2;Ho<arguments.length;Ho++)N[Ho-2]=arguments[Ho];return b.prototype[$].apply(L,N)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(V,b){void 0===b&&(b=V.length);for(var O=b-this.blockSize,L=this.B,$=this.h,Q=0;Q<b;){if(0==$)for(;Q<=O;)i(this,V,Q),Q+=this.blockSize;if("string"==typeof V){for(;Q<b;)if(L[$++]=V.charCodeAt(Q++),$==this.blockSize){i(this,L),$=0;break}}else for(;Q<b;)if(L[$++]=V[Q++],$==this.blockSize){i(this,L),$=0;break}}this.h=$,this.o+=b},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var b=1;b<V.length-8;++b)V[b]=0;var O=8*this.o;for(b=V.length-8;b<V.length;++b)V[b]=255&O,O/=256;for(this.u(V),V=Array(16),b=O=0;4>b;++b)for(var L=0;32>L;L+=8)V[O++]=this.g[b]>>>L&255;return V};var a={};function u(V){return-128<=V&&128>V?function s(V,b){var O=a;return Object.prototype.hasOwnProperty.call(O,V)?O[V]:O[V]=b(V)}(V,function(b){return new o([0|b],0>b?-1:0)}):new o([0|V],0>V?-1:0)}function d(V){if(isNaN(V)||!isFinite(V))return m;if(0>V)return M(d(-V));for(var b=[],O=1,L=0;V>=O;L++)b[L]=V/O|0,O*=4294967296;return new o(b,0)}var m=u(0),v=u(1),w=u(16777216);function T(V){if(0!=V.h)return!1;for(var b=0;b<V.g.length;b++)if(0!=V.g[b])return!1;return!0}function D(V){return-1==V.h}function M(V){for(var b=V.g.length,O=[],L=0;L<b;L++)O[L]=~V.g[L];return new o(O,~V.h).add(v)}function G(V,b){return V.add(M(b))}function F(V,b){for(;(65535&V[b])!=V[b];)V[b+1]+=V[b]>>>16,V[b]&=65535,b++}function K(V,b){this.g=V,this.h=b}function ae(V,b){if(T(b))throw Error("division by zero");if(T(V))return new K(m,m);if(D(V))return b=ae(M(V),b),new K(M(b.g),M(b.h));if(D(b))return b=ae(V,M(b)),new K(M(b.g),b.h);if(30<V.g.length){if(D(V)||D(b))throw Error("slowDivide_ only works with positive integers.");for(var O=v,L=b;0>=L.l(V);)O=ve(O),L=ve(L);var $=Ve(O,1),Q=Ve(L,1);for(L=Ve(L,2),O=Ve(O,2);!T(L);){var N=Q.add(L);0>=N.l(V)&&($=$.add(O),Q=N),L=Ve(L,1),O=Ve(O,1)}return b=G(V,$.j(b)),new K($,b)}for($=m;0<=V.l(b);){for(O=Math.max(1,Math.floor(V.m()/b.m())),L=48>=(L=Math.ceil(Math.log(O)/Math.LN2))?1:Math.pow(2,L-48),N=(Q=d(O)).j(b);D(N)||0<N.l(V);)N=(Q=d(O-=L)).j(b);T(Q)&&(Q=v),$=$.add(Q),V=G(V,N)}return new K($,V)}function ve(V){for(var b=V.g.length+1,O=[],L=0;L<b;L++)O[L]=V.i(L)<<1|V.i(L-1)>>>31;return new o(O,V.h)}function Ve(V,b){var O=b>>5;b%=32;for(var L=V.g.length-O,$=[],Q=0;Q<L;Q++)$[Q]=0<b?V.i(Q+O)>>>b|V.i(Q+O+1)<<32-b:V.i(Q+O);return new o($,V.h)}(n=o.prototype).m=function(){if(D(this))return-M(this).m();for(var V=0,b=1,O=0;O<this.g.length;O++){var L=this.i(O);V+=(0<=L?L:4294967296+L)*b,b*=4294967296}return V},n.toString=function(V){if(2>(V=V||10)||36<V)throw Error("radix out of range: "+V);if(T(this))return"0";if(D(this))return"-"+M(this).toString(V);for(var b=d(Math.pow(V,6)),O=this,L="";;){var $=ae(O,b).g,Q=((0<(O=G(O,$.j(b))).g.length?O.g[0]:O.h)>>>0).toString(V);if(T(O=$))return Q+L;for(;6>Q.length;)Q="0"+Q;L=Q+L}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h},n.l=function(V){return D(V=G(this,V))?-1:T(V)?0:1},n.abs=function(){return D(this)?M(this):this},n.add=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0,$=0;$<=b;$++){var Q=L+(65535&this.i($))+(65535&V.i($)),N=(Q>>>16)+(this.i($)>>>16)+(V.i($)>>>16);L=N>>>16,O[$]=(N&=65535)<<16|(Q&=65535)}return new o(O,-2147483648&O[O.length-1]?-1:0)},n.j=function(V){if(T(this)||T(V))return m;if(D(this))return D(V)?M(this).j(M(V)):M(M(this).j(V));if(D(V))return M(this.j(M(V)));if(0>this.l(w)&&0>V.l(w))return d(this.m()*V.m());for(var b=this.g.length+V.g.length,O=[],L=0;L<2*b;L++)O[L]=0;for(L=0;L<this.g.length;L++)for(var $=0;$<V.g.length;$++){var Q=this.i(L)>>>16,N=65535&this.i(L),Ho=V.i($)>>>16,mg=65535&V.i($);O[2*L+2*$]+=N*mg,F(O,2*L+2*$),O[2*L+2*$+1]+=Q*mg,F(O,2*L+2*$+1),O[2*L+2*$+1]+=N*Ho,F(O,2*L+2*$+1),O[2*L+2*$+2]+=Q*Ho,F(O,2*L+2*$+2)}for(L=0;L<b;L++)O[L]=O[2*L+1]<<16|O[2*L];for(L=b;L<2*b;L++)O[L]=0;return new o(O,0)},n.A=function(V){return ae(this,V).h},n.and=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0;L<b;L++)O[L]=this.i(L)&V.i(L);return new o(O,this.h&V.h)},n.or=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0;L<b;L++)O[L]=this.i(L)|V.i(L);return new o(O,this.h|V.h)},n.xor=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0;L<b;L++)O[L]=this.i(L)^V.i(L);return new o(O,this.h^V.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lk=ck.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=function g(V,b){if(0==V.length)throw Error("number format error: empty string");if(2>(b=b||10)||36<b)throw Error("radix out of range: "+b);if("-"==V.charAt(0))return M(g(V.substring(1),b));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=d(Math.pow(b,8)),L=m,$=0;$<V.length;$+=8){var Q=Math.min(8,V.length-$),N=parseInt(V.substring($,$+Q),b);8>Q?(Q=d(Math.pow(b,Q)),L=L.j(Q).add(d(N))):L=(L=L.j(O)).add(d(N))}return L},Ku=ck.Integer=o}).apply(typeof uk<"u"?uk:typeof self<"u"?self:typeof window<"u"?window:{});var dk,wp,hk,ky,IT,fk,pk,gk,Oy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},No={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,I){return h==Array.prototype||h==Object.prototype||(h[_]=I.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Oy&&Oy];for(var _=0;_<h.length;++_){var I=h[_];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var I=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var H=h[A];if(!(H in I))break e;I=I[H]}(_=_(A=I[h=h[h.length-1]]))!=A&&null!=_&&e(I,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var I=0,A=!1,H={next:function(){if(!A&&I<h.length){var te=I++;return{value:_(te,h[te]),done:!1}}return A=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}(this,function(_,I){return I})}});var o=o||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function d(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function g(h,_,I){return h.call.apply(h.bind,arguments)}function m(h,_,I){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,A),h.apply(_,H)}}return function(){return h.apply(_,arguments)}}function v(h,_,I){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function w(h,_){var I=Array.prototype.slice.call(arguments,1);return function(){var A=I.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function T(h,_){function I(){}I.prototype=_.prototype,h.aa=_.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(A,H,te){for(var we=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)we[Wt-2]=arguments[Wt];return _.prototype[H].apply(A,we)}}function D(h){const _=h.length;if(0<_){const I=Array(_);for(let A=0;A<_;A++)I[A]=h[A];return I}return[]}function M(h,_){for(let I=1;I<arguments.length;I++){const A=arguments[I];if(u(A)){const H=h.length||0,te=A.length||0;h.length=H+te;for(let we=0;we<te;we++)h[H+we]=A[we]}else h.push(A)}}function F(h){return/^[\s\xa0]*$/.test(h)}function K(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function ae(h){return ae[" "](h),h}ae[" "]=function(){};var ve=!(-1==K().indexOf("Gecko")||-1!=K().toLowerCase().indexOf("webkit")&&-1==K().indexOf("Edge")||-1!=K().indexOf("Trident")||-1!=K().indexOf("MSIE")||-1!=K().indexOf("Edge"));function Ve(h,_,I){for(const A in h)_.call(I,h[A],A,h)}function b(h){const _={};for(const I in h)_[I]=h[I];return _}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,_){let I,A;for(let H=1;H<arguments.length;H++){for(I in A=arguments[H],A)h[I]=A[I];for(let te=0;te<O.length;te++)I=O[te],Object.prototype.hasOwnProperty.call(A,I)&&(h[I]=A[I])}}function $(h){var _=1;h=h.split(":");const I=[];for(;0<_&&h.length;)I.push(h.shift()),_--;return h.length&&I.push(h.join(":")),I}function Q(h){a.setTimeout(()=>{throw h},0)}function N(){var h=y0;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var mg=new class G{constructor(_,I){this.i=_,this.j=I,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new pZ,h=>h.reset());class pZ{constructor(){this.next=this.g=this.h=null}set(_,I){this.h=_,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let _g,yg=!1,y0=new class Ho{constructor(){this.h=this.g=null}add(_,I){const A=mg.get();A.set(_,I),this.h?this.h.next=A:this.g=A,this.h=A}},x2=()=>{const h=a.Promise.resolve(void 0);_g=()=>{h.then(gZ)}};var gZ=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(I){Q(I)}var _=mg;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}yg=!1};function Za(){this.s=this.s,this.C=this.C}function jr(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Za.prototype.s=!1,Za.prototype.ma=function(){this.s||(this.s=!0,this.N())},Za.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},jr.prototype.h=function(){this.defaultPrevented=!0};var mZ=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};a.addEventListener("test",I,_),a.removeEventListener("test",I,_)}catch{}return h}();function vg(h,_){if(jr.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ve){e:{try{ae(_.nodeName);var H=!0;break e}catch{}H=!1}H||(_=null)}}else"mouseover"==I?_=h.fromElement:"mouseout"==I&&(_=h.toElement);this.relatedTarget=_,A?(this.clientX=void 0!==A.clientX?A.clientX:A.pageX,this.clientY=void 0!==A.clientY?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:_Z[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&vg.aa.h.call(this)}}T(vg,jr);var _Z={2:"touch",3:"pen",4:"mouse"};vg.prototype.h=function(){vg.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ig="closure_listenable_"+(1e6*Math.random()|0),yZ=0;function vZ(h,_,I,A,H){this.listener=h,this.proxy=null,this.src=_,this.type=I,this.capture=!!A,this.ha=H,this.key=++yZ,this.da=this.fa=!1}function Zv(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Xv(h){this.src=h,this.g={},this.h=0}function v0(h,_){var I=_.type;if(I in h.g){var te,A=h.g[I],H=Array.prototype.indexOf.call(A,_,void 0);(te=0<=H)&&Array.prototype.splice.call(A,H,1),te&&(Zv(_),0==h.g[I].length&&(delete h.g[I],h.h--))}}function I0(h,_,I,A){for(var H=0;H<h.length;++H){var te=h[H];if(!te.da&&te.listener==_&&te.capture==!!I&&te.ha==A)return H}return-1}Xv.prototype.add=function(h,_,I,A,H){var te=h.toString();(h=this.g[te])||(h=this.g[te]=[],this.h++);var we=I0(h,_,A,H);return-1<we?(_=h[we],I||(_.fa=!1)):((_=new vZ(_,this.src,te,!!A,H)).fa=I,h.push(_)),_};var E0="closure_lm_"+(1e6*Math.random()|0),w0={};function N2(h,_,I,A,H){if(A&&A.once)return k2(h,_,I,A,H);if(Array.isArray(_)){for(var te=0;te<_.length;te++)N2(h,_[te],I,A,H);return null}return I=D0(I),h&&h[Ig]?h.K(_,I,d(A)?!!A.capture:!!A,H):O2(h,_,I,!1,A,H)}function O2(h,_,I,A,H,te){if(!_)throw Error("Invalid event type");var we=d(H)?!!H.capture:!!H,Wt=T0(h);if(Wt||(h[E0]=Wt=new Xv(h)),(I=Wt.add(_,I,A,we,te)).proxy)return I;if(A=function IZ(){const _=EZ;return function h(I){return _.call(h.src,h.listener,I)}}(),I.proxy=A,A.src=h,A.listener=I,h.addEventListener)mZ||(H=we),void 0===H&&(H=!1),h.addEventListener(_.toString(),A,H);else if(h.attachEvent)h.attachEvent(F2(_.toString()),A);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(A)}return I}function k2(h,_,I,A,H){if(Array.isArray(_)){for(var te=0;te<_.length;te++)k2(h,_[te],I,A,H);return null}return I=D0(I),h&&h[Ig]?h.L(_,I,d(A)?!!A.capture:!!A,H):O2(h,_,I,!0,A,H)}function V2(h,_,I,A,H){if(Array.isArray(_))for(var te=0;te<_.length;te++)V2(h,_[te],I,A,H);else A=d(A)?!!A.capture:!!A,I=D0(I),h&&h[Ig]?(h=h.i,(_=String(_).toString())in h.g&&-1<(I=I0(te=h.g[_],I,A,H))&&(Zv(te[I]),Array.prototype.splice.call(te,I,1),0==te.length&&(delete h.g[_],h.h--))):h&&(h=T0(h))&&(_=h.g[_.toString()],h=-1,_&&(h=I0(_,I,A,H)),(I=-1<h?_[h]:null)&&A0(I))}function A0(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[Ig])v0(_.i,h);else{var I=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(I,A,h.capture):_.detachEvent?_.detachEvent(F2(I),A):_.addListener&&_.removeListener&&_.removeListener(A),(I=T0(_))?(v0(I,h),0==I.h&&(I.src=null,_[E0]=null)):Zv(h)}}}function F2(h){return h in w0?w0[h]:w0[h]="on"+h}function EZ(h,_){if(h.da)h=!0;else{_=new vg(_,this);var I=h.listener,A=h.ha||h.src;h.fa&&A0(h),h=I.call(A,_)}return h}function T0(h){return(h=h[E0])instanceof Xv?h:null}var C0="__closure_events_fn_"+(1e9*Math.random()>>>0);function D0(h){return"function"==typeof h?h:(h[C0]||(h[C0]=function(_){return h.handleEvent(_)}),h[C0])}function $r(){Za.call(this),this.i=new Xv(this),this.M=this,this.F=null}function si(h,_){var I,A=h.F;if(A)for(I=[];A;A=A.F)I.push(A);if(h=h.M,A=_.type||_,"string"==typeof _)_=new jr(_,h);else if(_ instanceof jr)_.target=_.target||h;else{var H=_;L(_=new jr(A,h),H)}if(H=!0,I)for(var te=I.length-1;0<=te;te--){var we=_.g=I[te];H=eI(we,A,!0,_)&&H}if(H=eI(we=_.g=h,A,!0,_)&&H,H=eI(we,A,!1,_)&&H,I)for(te=0;te<I.length;te++)H=eI(we=_.g=I[te],A,!1,_)&&H}function eI(h,_,I,A){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var H=!0,te=0;te<_.length;++te){var we=_[te];if(we&&!we.da&&we.capture==I){var Wt=we.listener,Tr=we.ha||we.src;we.fa&&v0(h.i,we),H=!1!==Wt.call(Tr,A)&&H}}return H&&!A.defaultPrevented}function L2(h,_,I){if("function"==typeof h)I&&(h=v(h,I));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=v(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function U2(h){h.g=L2(()=>{h.g=null,h.i&&(h.i=!1,U2(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}T($r,Za),$r.prototype[Ig]=!0,$r.prototype.removeEventListener=function(h,_,I,A){V2(this,h,_,I,A)},$r.prototype.N=function(){if($r.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var I=h.g[_],A=0;A<I.length;A++)Zv(I[A]);delete h.g[_],h.h--}}this.F=null},$r.prototype.K=function(h,_,I,A){return this.i.add(String(h),_,!1,I,A)},$r.prototype.L=function(h,_,I,A){return this.i.add(String(h),_,!0,I,A)};class wZ extends Za{constructor(_,I){super(),this.m=_,this.l=I,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:U2(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Eg(h){Za.call(this),this.h=h,this.g={}}T(Eg,Za);var B2=[];function j2(h){Ve(h.g,function(_,I){this.g.hasOwnProperty(I)&&A0(_)},h),h.g={}}Eg.prototype.N=function(){Eg.aa.N.call(this),j2(this)},Eg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var b0=a.JSON.stringify,AZ=a.JSON.parse,TZ=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function S0(){}function H2(){}S0.prototype.h=null;var wg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function R0(){jr.call(this,"d")}function P0(){jr.call(this,"c")}T(R0,jr),T(P0,jr);var vc={},z2=null;function tI(){return z2=z2||new $r}function q2(h){jr.call(this,vc.La,h)}function Ag(h){const _=tI();si(_,new q2(_))}function G2(h,_){jr.call(this,vc.STAT_EVENT,h),this.stat=_}function oi(h){const _=tI();si(_,new G2(_,h))}function W2(h,_){jr.call(this,vc.Ma,h),this.size=_}function Tg(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Cg(){this.g=!0}function ih(h,_,I,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function SZ(h,_){if(!h.g)return _;if(!_)return null;try{var I=JSON.parse(_);if(I)for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var A=I[h];if(!(2>A.length)){var H=A[1];if(Array.isArray(H)&&!(1>H.length)){var te=H[0];if("noop"!=te&&"stop"!=te&&"close"!=te)for(var we=1;we<H.length;we++)H[we]=""}}}return b0(I)}catch{return _}}(h,I)+(A?" "+A:"")})}vc.La="serverreachability",T(q2,jr),vc.STAT_EVENT="statevent",T(G2,jr),vc.Ma="timingevent",T(W2,jr),Cg.prototype.xa=function(){this.g=!1},Cg.prototype.info=function(){};var M0,nI={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},K2={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function rI(){}function Xa(h,_,I,A){this.j=h,this.i=_,this.l=I,this.R=A||1,this.U=new Eg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Q2}function Q2(){this.i=null,this.g="",this.h=!1}T(rI,S0),rI.prototype.g=function(){return new XMLHttpRequest},rI.prototype.i=function(){return{}},M0=new rI;var Y2={},x0={};function N0(h,_,I){h.L=1,h.v=aI(zo(_)),h.m=I,h.P=!0,J2(h,null)}function J2(h,_){h.F=Date.now(),iI(h),h.A=zo(h.v);var I=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),dU(I.i,"t",A),h.C=0,I=h.j.J,h.h=new Q2,h.g=RU(h.j,I?_:null,!h.m),0<h.O&&(h.M=new wZ(v(h.Y,h,h.g),h.O)),_=h.U,I=h.g,A=h.ca;var H="readystatechange";Array.isArray(H)||(H&&(B2[0]=H.toString()),H=B2);for(var te=0;te<H.length;te++){var we=N2(I,H[te],A||_.handleEvent,!1,_.h||_);if(!we)break;_.g[we.key]=we}_=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Ag(),function CZ(h,_,I,A,H,te){h.info(function(){if(h.g)if(te)for(var we="",Wt=te.split("&"),Tr=0;Tr<Wt.length;Tr++){var St=Wt[Tr].split("=");if(1<St.length){var Hr=St[0];St=St[1];var zr=Hr.split("_");we=2<=zr.length&&"type"==zr[1]?we+(Hr+"=")+St+"&":we+(Hr+"=redacted&")}}else we=null;else we=te;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+_+"\n"+I+"\n"+we})}(h.i,h.u,h.A,h.l,h.R,h.m)}function Z2(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function RZ(h,_){var I=h.C,A=_.indexOf("\n",I);return-1==A?x0:(I=Number(_.substring(I,A)),isNaN(I)?Y2:(A+=1)+I>_.length?x0:(_=_.slice(A,A+I),h.C=A+I,_))}function iI(h){h.S=Date.now()+h.I,X2(h,h.I)}function X2(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Tg(v(h.ba,h),_)}function O0(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function Dg(h){0==h.j.G||h.J||CU(h.j,h)}function Ic(h){O0(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,j2(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function k0(h,_){try{var I=h.j;if(0!=I.G&&(I.g==h||V0(I.h,h)))if(!h.K&&V0(I.h,h)&&3==I.G){try{var A=I.Da.g.parse(_)}catch{A=null}if(Array.isArray(A)&&3==A.length){var H=A;if(0==H[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<h.F))break e;hI(I),lI(I)}B0(I),oi(18)}}else I.za=H[1],0<I.za-I.T&&37500>H[2]&&I.F&&0==I.v&&!I.C&&(I.C=Tg(v(I.Za,I),6e3));if(1>=nU(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else wc(I,11)}else if((h.K||I.g==h)&&hI(I),!F(_))for(H=I.Da.g.parse(_),_=0;_<H.length;_++){let St=H[_];if(I.T=St[0],St=St[1],2==I.G)if("c"==St[0]){I.K=St[1],I.ia=St[2];const Hr=St[3];null!=Hr&&(I.la=Hr,I.j.info("VER="+I.la));const zr=St[4];null!=zr&&(I.Aa=zr,I.j.info("SVER="+I.Aa));const ah=St[5];null!=ah&&"number"==typeof ah&&0<ah&&(I.L=A=1.5*ah,I.j.info("backChannelRequestTimeoutMs_="+A)),A=I;const ms=h.g;if(ms){const pI=ms.g?ms.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pI){var te=A.h;te.g||-1==pI.indexOf("spdy")&&-1==pI.indexOf("quic")&&-1==pI.indexOf("h2")||(te.j=te.l,te.g=new Set,te.h&&(F0(te,te.h),te.h=null))}if(A.D){const $0=ms.g?ms.g.getResponseHeader("X-HTTP-Session-Id"):null;$0&&(A.ya=$0,hn(A.I,A.D,$0))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms"));var we=h;if((A=I).qa=SU(A,A.J?A.ia:null,A.W),we.K){rU(A.h,we);var Wt=we,Tr=A.L;Tr&&(Wt.I=Tr),Wt.B&&(O0(Wt),iI(Wt)),A.g=we}else AU(A);0<I.i.length&&dI(I)}else"stop"!=St[0]&&"close"!=St[0]||wc(I,7);else 3==I.G&&("stop"==St[0]||"close"==St[0]?"stop"==St[0]?wc(I,7):U0(I):"noop"!=St[0]&&I.l&&I.l.ta(St),I.v=0)}Ag()}catch{}}function eU(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tU(h){return!!h.h||!!h.g&&h.g.size>=h.j}function nU(h){return h.h?1:h.g?h.g.size:0}function V0(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function F0(h,_){h.g?h.g.add(_):h.h=_}function rU(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function iU(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const I of h.g.values())_=_.concat(I.D);return _}return D(h.i)}function sU(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var I=function xZ(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var I=0;I<h;I++)_.push(I);return _}_=[],I=0;for(const A in h)_[I++]=A;return _}}}(h),A=function MZ(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],I=h.length,A=0;A<I;A++)_.push(h[A]);return _}for(A in _=[],I=0,h)_[I++]=h[A];return _}(h),H=A.length,te=0;te<H;te++)_.call(void 0,A[te],I&&I[te],h)}Xa.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==qo(h)?_.j():this.Y(h)},Xa.prototype.Y=function(h){try{if(h==this.g)e:{const zr=qo(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>zr)&&(3!=zr||this.g&&(this.h.h||this.g.oa()||yU(this.g)))){this.J||4!=zr||7==_||Ag(),O0(this);var I=this.g.Z();this.X=I;t:if(Z2(this)){var A=yU(this.g);h="";var H=A.length,te=4==qo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ic(this),Dg(this);var we="";break t}this.h.i=new a.TextDecoder}for(_=0;_<H;_++)this.h.h=!0,h+=this.h.i.decode(A[_],{stream:!(te&&_==H-1)});A.length=0,this.h.g+=h,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=200==I,function DZ(h,_,I,A,H,te,we){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+_+"\n"+I+"\n"+te+" "+we})}(this.i,this.u,this.A,this.l,this.R,zr,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Wt,Tr=this.g;if((Wt=Tr.g?Tr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Wt)){var St=Wt;break t}}St=null}if(!(I=St)){this.o=!1,this.s=3,oi(12),Ic(this),Dg(this);break e}ih(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,k0(this,I)}if(this.P){let ms;for(I=!0;!this.J&&this.C<we.length;){if(ms=RZ(this,we),ms==x0){4==zr&&(this.s=4,oi(14),I=!1),ih(this.i,this.l,null,"[Incomplete Response]");break}if(ms==Y2){this.s=4,oi(15),ih(this.i,this.l,we,"[Invalid Chunk]"),I=!1;break}ih(this.i,this.l,ms,null),k0(this,ms)}if(Z2(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=zr||0!=we.length||this.h.h||(this.s=1,oi(16),I=!1),this.o=this.o&&I,I){if(0<we.length&&!this.W){this.W=!0;var Hr=this.j;Hr.g==this&&Hr.ba&&!Hr.M&&(Hr.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),j0(Hr),Hr.M=!0,oi(11))}}else ih(this.i,this.l,we,"[Invalid Chunked Response]"),Ic(this),Dg(this)}else ih(this.i,this.l,we,null),k0(this,we);4==zr&&Ic(this),this.o&&!this.J&&(4==zr?CU(this.j,this):(this.o=!1,iI(this)))}else(function GZ(h){const _={};h=(h.g&&2<=qo(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let A=0;A<h.length;A++){if(F(h[A]))continue;var I=$(h[A]);const H=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const te=_[H]||[];_[H]=te,te.push(I)}!function V(h,_){for(const I in h)_.call(void 0,h[I],I,h)}(_,function(A){return A.join(", ")})})(this.g),400==I&&0<we.indexOf("Unknown SID")?(this.s=3,oi(12)):(this.s=0,oi(13)),Ic(this),Dg(this)}}}catch{}},Xa.prototype.cancel=function(){this.J=!0,Ic(this)},Xa.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function bZ(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(Ag(),oi(17)),Ic(this),this.s=2,Dg(this)):X2(this,this.S-h)},eU.prototype.cancel=function(){if(this.i=iU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var oU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ec(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ec){this.h=h.h,sI(this,h.j),this.o=h.o,this.g=h.g,oI(this,h.s),this.l=h.l;var _=h.i,I=new Rg;I.i=_.i,_.g&&(I.g=new Map(_.g),I.h=_.h),aU(this,I),this.m=h.m}else h&&(_=String(h).match(oU))?(this.h=!1,sI(this,_[1]||"",!0),this.o=bg(_[2]||""),this.g=bg(_[3]||"",!0),oI(this,_[4]),this.l=bg(_[5]||"",!0),aU(this,_[6]||"",!0),this.m=bg(_[7]||"")):(this.h=!1,this.i=new Rg(null,this.h))}function zo(h){return new Ec(h)}function sI(h,_,I){h.j=I?bg(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function oI(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function aU(h,_,I){_ instanceof Rg?(h.i=_,function UZ(h,_){_&&!h.j&&(eu(h),h.i=null,h.g.forEach(function(I,A){var H=A.toLowerCase();A!=H&&(cU(this,A),dU(this,H,I))},h)),h.j=_}(h.i,h.h)):(I||(_=Sg(_,FZ)),h.i=new Rg(_,h.h))}function hn(h,_,I){h.i.set(_,I)}function aI(h){return hn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function bg(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Sg(h,_,I){return"string"==typeof h?(h=encodeURI(h).replace(_,OZ),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function OZ(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}Ec.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Sg(_,uU,!0),":");var I=this.g;return(I||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(Sg(_,uU,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&h.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&h.push("/"),h.push(Sg(I,"/"==I.charAt(0)?VZ:kZ,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",Sg(I,LZ)),h.join("")};var h,uU=/[#\/\?@]/g,kZ=/[#\?:]/g,VZ=/[#\?]/g,FZ=/[#\?@]/g,LZ=/#/g;function Rg(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function eu(h){h.g||(h.g=new Map,h.h=0,h.i&&function NZ(h,_){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var A=h[I].indexOf("="),H=null;if(0<=A){var te=h[I].substring(0,A);H=h[I].substring(A+1)}else te=h[I];_(te,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}(h.i,function(_,I){h.add(decodeURIComponent(_.replace(/\+/g," ")),I)}))}function cU(h,_){eu(h),_=sh(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function lU(h,_){return eu(h),_=sh(h,_),h.g.has(_)}function dU(h,_,I){cU(h,_),0<I.length&&(h.i=null,h.g.set(sh(h,_),D(I)),h.h+=I.length)}function sh(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function tu(h,_,I,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(I)}catch{}}function $Z(){this.g=new TZ}function HZ(h,_,I){const A=I||"";try{sU(h,function(H,te){let we=H;d(H)&&(we=b0(H)),_.push(A+te+"="+encodeURIComponent(we))})}catch(H){throw _.push(A+"type="+encodeURIComponent("_badmap")),H}}function Pg(h){this.l=h.Ub||null,this.j=h.eb||!1}function uI(h,_){$r.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function hU(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Mg(h){h.readyState=4,h.l=null,h.j=null,h.v=null,xg(h)}function xg(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function fU(h){let _="";return Ve(h,function(I,A){_+=A,_+=":",_+=I,_+="\r\n"}),_}function L0(h,_,I){e:{for(A in I){var A=!1;break e}A=!0}A||(I=fU(I),"string"==typeof h?null!=I&&encodeURIComponent(String(I)):hn(h,_,I))}function kn(h){$r.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Rg.prototype).add=function(h,_){eu(this),this.i=null,h=sh(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(_),this.h+=1,this},n.forEach=function(h,_){eu(this),this.g.forEach(function(I,A){I.forEach(function(H){h.call(_,H,A,this)},this)},this)},n.na=function(){eu(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),I=[];for(let A=0;A<_.length;A++){const H=h[A];for(let te=0;te<H.length;te++)I.push(_[A])}return I},n.V=function(h){eu(this);let _=[];if("string"==typeof h)lU(this,h)&&(_=_.concat(this.g.get(sh(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)_=_.concat(h[I])}return _},n.set=function(h,_){return eu(this),this.i=null,lU(this,h=sh(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var I=0;I<_.length;I++){var A=_[I];const te=encodeURIComponent(String(A)),we=this.V(A);for(A=0;A<we.length;A++){var H=te;""!==we[A]&&(H+="="+encodeURIComponent(String(we[A]))),h.push(H)}}return this.i=h.join("&")},T(Pg,S0),Pg.prototype.g=function(){return new uI(this.l,this.j)},Pg.prototype.i=(h={},function(){return h}),T(uI,$r),(n=uI.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,xg(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mg(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,xg(this)),this.g&&(this.readyState=3,xg(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hU(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Mg(this):xg(this),3==this.readyState&&hU(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Mg(this))},n.Qa=function(h){this.g&&(this.response=h,Mg(this))},n.ga=function(){this.g&&Mg(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var I=_.next();!I.done;)h.push((I=I.value)[0]+": "+I[1]),I=_.next();return h.join("\r\n")},Object.defineProperty(uI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),T(kn,$r);var zZ=/^https?$/i,qZ=["POST","PUT"];function pU(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,gU(h),cI(h)}function gU(h){h.A||(h.A=!0,si(h,"complete"),si(h,"error"))}function mU(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=qo(h)||2!=h.Z()))if(h.u&&4==qo(h))L2(h.Ea,0,h);else if(si(h,"readystatechange"),4==qo(h)){h.h=!1;try{const we=h.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var I;if(!(I=_)){var A;if(A=0===we){var H=String(h.D).match(oU)[1]||null;!H&&a.self&&a.self.location&&(H=a.self.location.protocol.slice(0,-1)),A=!zZ.test(H?H.toLowerCase():"")}I=A}if(I)si(h,"complete"),si(h,"success");else{h.m=6;try{var te=2<qo(h)?h.g.statusText:""}catch{te=""}h.l=te+" ["+h.Z()+"]",gU(h)}}finally{cI(h)}}}function cI(h,_){if(h.g){_U(h);const I=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||si(h,"ready");try{I.onreadystatechange=A}catch{}}}function _U(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function qo(h){return h.g?h.g.readyState:0}function yU(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ng(h,_,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||_}function vU(h){this.Aa=0,this.i=[],this.j=new Cg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ng("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ng("baseRetryDelayMs",5e3,h),this.cb=Ng("retryDelaySeedMs",1e4,h),this.Wa=Ng("forwardChannelMaxRetries",2,h),this.wa=Ng("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new eU(h&&h.concurrentRequestLimit),this.Da=new $Z,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function U0(h){if(IU(h),3==h.G){var _=h.U++,I=zo(h.I);if(hn(I,"SID",h.K),hn(I,"RID",_),hn(I,"TYPE","terminate"),Og(h,I),(_=new Xa(h,h.j,_)).L=2,_.v=aI(zo(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=_.v,I=!0),I||(_.g=RU(_.j,null),_.g.ea(_.v)),_.F=Date.now(),iI(_)}bU(h)}function lI(h){h.g&&(j0(h),h.g.cancel(),h.g=null)}function IU(h){lI(h),h.u&&(a.clearTimeout(h.u),h.u=null),hI(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function dI(h){if(!tU(h.h)&&!h.s){h.s=!0;var _=h.Ga;_g||x2(),yg||(_g(),yg=!0),y0.add(_,h),h.B=0}}function EU(h,_){var I;I=_?_.l:h.U++;const A=zo(h.I);hn(A,"SID",h.K),hn(A,"RID",I),hn(A,"AID",h.T),Og(h,A),h.m&&h.o&&L0(A,h.m,h.o),I=new Xa(h,h.j,I,h.B+1),null===h.m&&(I.H=h.o),_&&(h.i=_.D.concat(h.i)),_=wU(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),F0(h.h,I),N0(I,A,_)}function Og(h,_){h.H&&Ve(h.H,function(I,A){hn(_,A,I)}),h.l&&sU({},function(I,A){hn(_,A,I)})}function wU(h,_,I){I=Math.min(h.i.length,I);var A=h.l?v(h.l.Na,h.l,h):null;e:{var H=h.i;let te=-1;for(;;){const we=["count="+I];-1==te?0<I?(te=H[0].g,we.push("ofs="+te)):te=0:we.push("ofs="+te);let Wt=!0;for(let Tr=0;Tr<I;Tr++){let St=H[Tr].g;const Hr=H[Tr].map;if(St-=te,0>St)te=Math.max(0,H[Tr].g-100),Wt=!1;else try{HZ(Hr,we,"req"+St+"_")}catch{A&&A(Hr)}}if(Wt){A=we.join("&");break e}}}return h=h.i.splice(0,I),_.D=h,A}function AU(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;_g||x2(),yg||(_g(),yg=!0),y0.add(_,h),h.v=0}}function B0(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Tg(v(h.Fa,h),DU(h,h.v)),h.v++,0))}function j0(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function TU(h){h.g=new Xa(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=zo(h.qa);hn(_,"RID","rpc"),hn(_,"SID",h.K),hn(_,"AID",h.T),hn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&hn(_,"TO",h.ja),hn(_,"TYPE","xmlhttp"),Og(h,_),h.m&&h.o&&L0(_,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=aI(zo(_)),I.m=null,I.P=!0,J2(I,h)}function hI(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function CU(h,_){var I=null;if(h.g==_){hI(h),j0(h),h.g=null;var A=2}else{if(!V0(h.h,_))return;I=_.D,rU(h.h,_),A=1}if(0!=h.G)if(_.o)if(1==A){I=_.m?_.m.length:0,_=Date.now()-_.F;var H=h.B;si(A=tI(),new W2(A,I)),dI(h)}else AU(h);else if(3==(H=_.s)||0==H&&0<_.X||!(1==A&&function WZ(h,_){return!(nU(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Tg(v(h.Ga,h,_),DU(h,h.B)),h.B++,0)))}(h,_)||2==A&&B0(h)))switch(I&&0<I.length&&(_=h.h,_.i=_.i.concat(I)),H){case 1:wc(h,5);break;case 4:wc(h,10);break;case 3:wc(h,6);break;default:wc(h,2)}}function DU(h,_){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*_}function wc(h,_){if(h.j.info("Error code "+_),2==_){var I=v(h.fb,h),A=h.Xa;const H=!A;A=new Ec(A||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||sI(A,"https"),aI(A),H?function BZ(h,_){const I=new Cg;if(a.Image){const A=new Image;A.onload=w(tu,I,"TestLoadImage: loaded",!0,_,A),A.onerror=w(tu,I,"TestLoadImage: error",!1,_,A),A.onabort=w(tu,I,"TestLoadImage: abort",!1,_,A),A.ontimeout=w(tu,I,"TestLoadImage: timeout",!1,_,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}(A.toString(),I):function jZ(h,_){new Cg;const A=new AbortController,H=setTimeout(()=>{A.abort(),tu(0,0,!1,_)},1e4);fetch(h,{signal:A.signal}).then(te=>{clearTimeout(H),tu(0,0,!!te.ok,_)}).catch(()=>{clearTimeout(H),tu(0,0,!1,_)})}(A.toString(),I)}else oi(2);h.G=0,h.l&&h.l.sa(_),bU(h),IU(h)}function bU(h){if(h.G=0,h.ka=[],h.l){const _=iU(h.h);(0!=_.length||0!=h.i.length)&&(M(h.ka,_),M(h.ka,h.i),h.h.i.length=0,D(h.i),h.i.length=0),h.l.ra()}}function SU(h,_,I){var A=I instanceof Ec?zo(I):new Ec(I);if(""!=A.g)_&&(A.g=_+"."+A.g),oI(A,A.s);else{var H=a.location;A=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;var te=new Ec(null);A&&sI(te,A),_&&(te.g=_),H&&oI(te,H),I&&(te.l=I),A=te}return _=h.ya,(I=h.D)&&_&&hn(A,I,_),hn(A,"VER",h.la),Og(h,A),A}function RU(h,_,I){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new kn(h.Ca&&!h.pa?new Pg({eb:I}):h.pa)).Ha(h.J),_}function PU(){}function fI(){}function Fi(h,_){$r.call(this),this.g=new vU(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!F(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!F(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new oh(this)}function MU(h){R0.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const I in _){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function xU(){P0.call(this),this.status=1}function oh(h){this.g=h}(n=kn.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,I,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():M0.g(),this.v=function $2(h){return h.h||(h.h=h.i())}(this.o?this.o:M0),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(te){return void pU(this,te)}if(h=I||"",I=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)I.set(H,A[H]);else{if("function"!=typeof A.keys||"function"!=typeof A.get)throw Error("Unknown input type for opt_headers: "+String(A));for(const te of A.keys())I.set(te,A.get(te))}A=Array.from(I.keys()).find(te=>"content-type"==te.toLowerCase()),H=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(qZ,_,void 0))||A||H||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,we]of I)this.g.setRequestHeader(te,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_U(this),this.u=!0,this.g.send(h),this.u=!1}catch(te){pU(this,te)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,si(this,"complete"),si(this,"abort"),cI(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cI(this,!0)),kn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?mU(this):this.bb())},n.bb=function(){mU(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<qo(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),AZ(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=vU.prototype).la=8,n.G=1,n.connect=function(h,_,I,A){oi(0),this.W=h,this.H=_||{},I&&void 0!==A&&(this.H.OSID=I,this.H.OAID=A),this.F=this.X,this.I=SU(this,null,this.W),dI(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const H=new Xa(this,this.j,h);let te=this.o;if(this.S&&(te?(te=b(te),L(te,this.S)):te=this.S),null!==this.m||this.O||(H.H=te,te=null),this.P)e:{for(var _=0,I=0;I<this.i.length;I++){var A=this.i[I];if(void 0===(A="__data__"in A.map&&"string"==typeof(A=A.map.__data__)?A.length:void 0))break;if(4096<(_+=A)){_=I;break e}if(4096===_||I===this.i.length-1){_=I+1;break e}}_=1e3}else _=1e3;_=wU(this,H,_),hn(I=zo(this.I),"RID",h),hn(I,"CVER",22),this.D&&hn(I,"X-HTTP-Session-Id",this.D),Og(this,I),te&&(this.O?_="headers="+encodeURIComponent(String(fU(te)))+"&"+_:this.m&&L0(I,this.m,te)),F0(this.h,H),this.Ua&&hn(I,"TYPE","init"),this.P?(hn(I,"$req",_),hn(I,"SID","null"),H.T=!0,N0(H,I,null)):N0(H,I,_),this.G=2}}else 3==this.G&&(h?EU(this,h):0==this.i.length||tU(this.h)||EU(this))},n.Fa=function(){if(this.u=null,TU(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Tg(v(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,oi(10),lI(this),TU(this))},n.Za=function(){null!=this.C&&(this.C=null,lI(this),B0(this),oi(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),oi(2)):(this.j.info("Failed to ping google.com"),oi(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=PU.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},fI.prototype.g=function(h,_){return new Fi(h,_)},T(Fi,$r),Fi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fi.prototype.close=function(){U0(this.g)},Fi.prototype.o=function(h){var _=this.g;if("string"==typeof h){var I={};I.__data__=h,h=I}else this.u&&((I={}).__data__=b0(h),h=I);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&dI(_)},Fi.prototype.N=function(){this.g.l=null,delete this.j,U0(this.g),delete this.g,Fi.aa.N.call(this)},T(MU,R0),T(xU,P0),T(oh,PU),oh.prototype.ua=function(){si(this.g,"a")},oh.prototype.ta=function(h){si(this.g,new MU(h))},oh.prototype.sa=function(h){si(this.g,new xU)},oh.prototype.ra=function(){si(this.g,"b")},fI.prototype.createWebChannel=fI.prototype.g,Fi.prototype.send=Fi.prototype.o,Fi.prototype.open=Fi.prototype.m,Fi.prototype.close=Fi.prototype.close,gk=No.createWebChannelTransport=function(){return new fI},pk=No.getStatEventTarget=function(){return tI()},fk=No.Event=vc,IT=No.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nI.NO_ERROR=0,nI.TIMEOUT=8,nI.HTTP_ERROR=6,ky=No.ErrorCode=nI,K2.COMPLETE="complete",hk=No.EventType=K2,H2.EventType=wg,wg.OPEN="a",wg.CLOSE="b",wg.ERROR="c",wg.MESSAGE="d",$r.prototype.listen=$r.prototype.K,wp=No.WebChannel=H2,No.FetchXmlHttpFactory=Pg,kn.prototype.listenOnce=kn.prototype.L,kn.prototype.getLastError=kn.prototype.Ka,kn.prototype.getLastErrorCode=kn.prototype.Ba,kn.prototype.getStatus=kn.prototype.Z,kn.prototype.getResponseJson=kn.prototype.Oa,kn.prototype.getResponseText=kn.prototype.oa,kn.prototype.send=kn.prototype.ea,kn.prototype.setWithCredentials=kn.prototype.Ha,dk=No.XhrIo=kn}).apply(typeof Oy<"u"?Oy:typeof self<"u"?self:typeof window<"u"?window:{});const mk="@firebase/firestore";class lr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lr.UNAUTHENTICATED=new lr(null),lr.GOOGLE_CREDENTIALS=new lr("google-credentials-uid"),lr.FIRST_PARTY=new lr("first-party-uid"),lr.MOCK_USER=new lr("mock-user");let md="10.14.0";const Sa=new Bs.Vy("@firebase/firestore");function _d(){return Sa.logLevel}function he(n,...e){if(Sa.logLevel<=Bs.$b.DEBUG){const t=e.map(ET);Sa.debug(`Firestore (${md}): ${n}`,...t)}}function jn(n,...e){if(Sa.logLevel<=Bs.$b.ERROR){const t=e.map(ET);Sa.error(`Firestore (${md}): ${n}`,...t)}}function Oi(n,...e){if(Sa.logLevel<=Bs.$b.WARN){const t=e.map(ET);Sa.warn(`Firestore (${md}): ${n}`,...t)}}function ET(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function xe(n="Unexpected state"){const e=`FIRESTORE (${md}) INTERNAL ASSERTION FAILED: `+n;throw jn(e),new Error(e)}function Oe(n,e){n||xe()}function Ee(n,e){return n}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends xt.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _k{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(lr.UNAUTHENTICATED))}shutdown(){}}class a8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class u8{constructor(e){this.t=e,this.currentUser=lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;Oe(void 0===this.o);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new dr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,se.A)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new dr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe("string"==typeof r.accessToken),new _k(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(null===e||"string"==typeof e),new lr(e)}}class c8{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=lr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class l8{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new c8(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d8{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Oe(void 0===this.o);const r=s=>{null!=s.error&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe("string"==typeof t.token),this.R=t.token,new yk(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function h8(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class vk{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=h8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Je(n,e){return n<e?-1:n>e?1:0}function yd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Ik(n){return n+"\0"}class gn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gn.fromMillis(Date.now())}static fromDate(e){return gn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new gn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Fe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new gn(0,0))}static max(){return new Fe(new gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ap{constructor(e,t,r){void 0===t?t=0:t>e.length&&xe(),void 0===r?r=e.length-t:r>e.length-t&&xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ap.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ap?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class mt extends Ap{construct(e,t,r){return new mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new mt(t)}static emptyPath(){return new mt([])}}const f8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Ap{construct(e,t,r){return new cn(e,t,r)}static isValidIdentifier(e){return f8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new cn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ce(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ce(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ce(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ce(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(t)}static emptyPath(){return new cn([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(mt.fromString(e))}static fromName(e){return new Te(mt.fromString(e).popFirst(5))}static empty(){return new Te(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===mt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new mt(e.slice()))}}class vd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function wT(n){return n.fields.find(e=>2===e.kind)}function Qu(n){return n.fields.filter(e=>2!==e.kind)}vd.UNKNOWN_ID=-1;class Yu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Id{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Id(0,ki.min())}}function Ek(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(1e9===r?new gn(t+1,0):new gn(t,r));return new ki(i,Te.empty(),e)}function wk(n){return new ki(n.readTime,n.key,-1)}class ki{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ki(Fe.min(),Te.empty(),-1)}static max(){return new ki(Fe.max(),Te.empty(),-1)}}function AT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Te.comparator(n.documentKey,e.documentKey),0!==t?t:Je(n.largestBatchId,e.largestBatchId))}const Ak="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ra(n){return TT.apply(this,arguments)}function TT(){return(TT=(0,se.A)(function*(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==Ak)throw n;he("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):z.reject(t)}static resolve(e){return new z((t,r)=>{t(e)})}static reject(e){return new z((t,r)=>{r(e)})}static waitFor(e){return new z((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=z.resolve(!1);for(const r of e)t=t.next(i=>i?z.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new z((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;t(e[d]).next(g=>{o[d]=g,++a,a===s&&r(o)},g=>i(g))}})}static doWhile(e,t){return new z((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class Vy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new dr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Tp(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=CT(r.target.error);this.V.reject(new Tp(e,i))}}static open(e,t,r,i){try{return new Vy(t,e.transaction(i,r))}catch(s){throw new Tp(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(he("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _8(t)}}class js{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===js.S((0,xt.ZQ)())&&jn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return he("SimpleDb","Removing database:",e),Ju(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,xt.zW)())return!1;if(js.v())return!0;const e=(0,xt.ZQ)(),t=js.S(e),r=0<t&&t<10,i=Ck(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,se.A)(function*(){return t.db||(he("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Tp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new ce(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ce(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Tp(e,a))},s.onupgradeneeded=o=>{he("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{he("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,se.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=Vy.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(g=>(u.g(),g)).catch(g=>(u.abort(g),z.reject(g))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,g="FirebaseError"!==d.name&&a<3;if(he("SimpleDb","Transaction failed with error:",d.message,"Retrying:",g),s.close(),!g)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function Ck(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class m8{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ju(this.B.delete())}}class Tp extends ce{constructor(e,t){super(Z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pa(n){return"IndexedDbTransactionError"===n.name}class _8{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(he("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(he("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ju(r)}add(e){return he("SimpleDb","ADD",this.store.name,e,e),Ju(this.store.add(e))}get(e){return Ju(this.store.get(e)).next(t=>(void 0===t&&(t=null),he("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return he("SimpleDb","DELETE",this.store.name,e),Ju(this.store.delete(e))}count(){return he("SimpleDb","COUNT",this.store.name),Ju(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new z((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new z((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){he("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new z((r,i)=>{t.onerror=s=>{const o=CT(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new z((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new m8(a),d=t(a.primaryKey,a.value,u);if(d instanceof z){const g=d.catch(m=>(u.done(),z.reject(m)));r.push(g)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>z.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ju(n){return new z((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=CT(r.target.error);t(i)}})}let Dk=!1;function CT(n){const e=js.S((0,xt.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Dk||(Dk=!0,setTimeout(()=>{throw r},0)),r}}return n}class y8{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;he("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,se.A)(function*(){t.task=null;try{he("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Pa(r)?he("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Ra(r)}yield t.X(6e4)}))}}class v8{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,se.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return z.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return he("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(he("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=wk(s);AT(o,r)>0&&(r=o)}),new ki(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Vi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Cp(n){return null==n}function Dp(n){return 0===n&&1/n==-1/0}function bk(n){return"number"==typeof n&&Number.isInteger(n)&&!Dp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Vr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Sk(e)),e=I8(n.get(t),e);return Sk(e)}function I8(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function Sk(n){return n+"\x01\x01"}function $s(n){const e=n.length;if(Oe(e>=2),2===e)return Oe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),mt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&xe(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:xe()}s=o+2}return new mt(r)}const Rk=["userId","batchId"];function Fy(n,e){return[n,Vr(e)]}function Pk(n,e,t){return[n,Vr(e),t]}const E8={},w8=["prefixPath","collectionGroup","readTime","documentId"],A8=["prefixPath","collectionGroup","documentId"],T8=["collectionGroup","readTime","prefixPath","documentId"],C8=["canonicalId","targetId"],D8=["targetId","path"],b8=["path","targetId"],S8=["collectionId","parent"],R8=["indexId","uid"],P8=["uid","sequenceNumber"],M8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],x8=["indexId","uid","orderedDocumentKey"],N8=["userId","collectionPath","documentId"],O8=["userId","collectionPath","largestBatchId"],k8=["userId","collectionGroup","largestBatchId"],Mk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],V8=[...Mk,"documentOverlays"],xk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nk=xk,DT=[...Nk,"indexConfiguration","indexState","indexEntries"],F8=DT,L8=[...DT,"globals"];class bT extends Tk{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function rr(n,e){const t=Ee(n);return js.F(t._e,e)}function Ok(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ma(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Vk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class nn{constructor(e,t){this.comparator=e,this.root=t||Er.EMPTY}insert(e,t){return new nn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Er.BLACK,null,null))}remove(e){return new nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Er.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ly(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ly(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ly(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ly(this.root,e,this.comparator,!0)}}class Ly{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Er{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Er.RED,this.left=i??Er.EMPTY,this.right=s??Er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Er(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Er.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}Er.EMPTY=null,Er.RED=!0,Er.BLACK=!1,Er.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Er(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $t{constructor(e){this.comparator=e,this.data=new nn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fk(this.data.getIterator())}getIteratorFrom(e){return new Fk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $t(this.comparator);return t.data=e,t}}class Fk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ed(n){return n.hasNext()?n.getNext():void 0}class _i{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new _i([])}unionWith(e){let t=new $t(cn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new _i(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Lk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class On{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Lk("Invalid base64 string: "+s):s}}(e);return new On(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new On(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}On.EMPTY_BYTE_STRING=new On("");const B8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oo(n){if(Oe(!!n),"string"==typeof n){let e=0;const t=B8.exec(n);if(Oe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mn(n.seconds),nanos:mn(n.nanos)}}function mn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ko(n){return"string"==typeof n?On.fromBase64String(n):On.fromUint8Array(n)}function Uy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function By(n){const e=n.mapValue.fields.__previous_value__;return Uy(e)?By(e):e}function bp(n){const e=Oo(n.mapValue.fields.__local_write_time__.timestampValue);return new gn(e.seconds,e.nanos)}class j8{constructor(e,t,r,i,s,o,a,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class xa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xa&&e.projectId===this.projectId&&e.database===this.database}}const Na={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jy={nullValue:"NULL_VALUE"};function Oa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Uy(n)?4:Hk(n)?9007199254740991:zy(n)?10:11:xe()}function Hs(n,e){if(n===e)return!0;const t=Oa(n);if(t!==Oa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bp(n).isEqual(bp(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Oo(i.timestampValue),a=Oo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ko(n.bytesValue).isEqual(ko(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return mn(i.geoPointValue.latitude)===mn(s.geoPointValue.latitude)&&mn(i.geoPointValue.longitude)===mn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return mn(i.integerValue)===mn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=mn(i.doubleValue),a=mn(s.doubleValue);return o===a?Dp(o)===Dp(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return yd(n.arrayValue.values||[],e.arrayValue.values||[],Hs);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Ok(o)!==Ok(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Hs(o[u],a[u])))return!1;return!0}(n,e);default:return xe()}var s}function Sp(n,e){return void 0!==(n.values||[]).find(t=>Hs(t,e))}function ka(n,e){if(n===e)return 0;const t=Oa(n),r=Oa(e);if(t!==r)return Je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=mn(s.integerValue||s.doubleValue),u=mn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return Uk(n.timestampValue,e.timestampValue);case 4:return Uk(bp(n),bp(e));case 5:return Je(n.stringValue,e.stringValue);case 6:return function(s,o){const a=ko(s),u=ko(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const g=Je(a[d],u[d]);if(0!==g)return g}return Je(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Je(mn(s.latitude),mn(o.latitude));return 0!==a?a:Je(mn(s.longitude),mn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Bk(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,d,g;const w=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,T=null===(u=(o.fields||{}).value)||void 0===u?void 0:u.arrayValue,D=Je((null===(d=w?.values)||void 0===d?void 0:d.length)||0,(null===(g=T?.values)||void 0===g?void 0:g.length)||0);return 0!==D?D:Bk(w,T)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Na.mapValue&&o===Na.mapValue)return 0;if(s===Na.mapValue)return 1;if(o===Na.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},g=Object.keys(d);u.sort(),g.sort();for(let m=0;m<u.length&&m<g.length;++m){const v=Je(u[m],g[m]);if(0!==v)return v;const w=ka(a[u[m]],d[g[m]]);if(0!==w)return w}return Je(u.length,g.length)}(n.mapValue,e.mapValue);default:throw xe()}}function Uk(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Je(n,e);const t=Oo(n),r=Oo(e),i=Je(t.seconds,r.seconds);return 0!==i?i:Je(t.nanos,r.nanos)}function Bk(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ka(t[i],r[i]);if(s)return s}return Je(t.length,r.length)}function wd(n){return ST(n)}function ST(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Oo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ko(n.bytesValue).toBase64():"referenceValue"in n?Te.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=ST(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ST(t.fields[o])}`;return i+"}"}(n.mapValue):xe()}function Zu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function RT(n){return!!n&&"integerValue"in n}function Rp(n){return!!n&&"arrayValue"in n}function jk(n){return!!n&&"nullValue"in n}function $k(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hy(n){return!!n&&"mapValue"in n}function zy(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Pp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ma(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Hk(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const zk={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function $8(n){return"nullValue"in n?jy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Zu(xa.empty(),Te.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?zy(n)?zk:{mapValue:{}}:xe()}function H8(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Zu(xa.empty(),Te.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?zk:"mapValue"in n?zy(n)?{mapValue:{}}:Na:xe()}function qk(n,e){const t=ka(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Gk(n,e){const t=ka(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pp(t)}setAll(e){let t=cn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Pp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Hy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Hy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ma(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new wr(Pp(this.value))}}function Wk(n){const e=[];return Ma(n.fields,(t,r)=>{const i=new cn([t]);if(Hy(r)){const s=Wk(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new _i(e)}class ln{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ln(e,0,Fe.min(),Fe.min(),Fe.min(),wr.empty(),0)}static newFoundDocument(e,t,r,i){return new ln(e,1,t,Fe.min(),r,i,0)}static newNoDocument(e,t){return new ln(e,2,t,Fe.min(),Fe.min(),wr.empty(),0)}static newUnknownDocument(e,t){return new ln(e,3,t,Fe.min(),Fe.min(),wr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Va{constructor(e,t){this.position=e,this.inclusive=t}}function Kk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Te.comparator(Te.fromName(o.referenceValue),t.key):ka(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Qk(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hs(n.position[t],e.position[t]))return!1;return!0}class Mp{constructor(e,t="asc"){this.field=e,this.dir=t}}function z8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Yk{}class _t extends Yk{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new q8(e,t,r):"array-contains"===t?new K8(e,r):"in"===t?new n1(e,r):"not-in"===t?new Q8(e,r):"array-contains-any"===t?new Y8(e,r):new _t(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new G8(e,r):new W8(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ka(t,this.value)):null!==t&&Oa(this.value)===Oa(t)&&this.matchesComparison(ka(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bt extends Yk{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Bt(e,t)}matches(e){return Ad(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ad(n){return"and"===n.op}function PT(n){return"or"===n.op}function MT(n){return Jk(n)&&Ad(n)}function Jk(n){for(const e of n.filters)if(e instanceof Bt)return!1;return!0}function xT(n){if(n instanceof _t)return n.field.canonicalString()+n.op.toString()+wd(n.value);if(MT(n))return n.filters.map(e=>xT(e)).join(",");{const e=n.filters.map(t=>xT(t)).join(",");return`${n.op}(${e})`}}function Zk(n,e){return n instanceof _t?(r=n,(i=e)instanceof _t&&r.op===i.op&&r.field.isEqual(i.field)&&Hs(r.value,i.value)):n instanceof Bt?function(r,i){return i instanceof Bt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&Zk(o,i.filters[a]),!0)}(n,e):void xe();var r,i}function Xk(n,e){const t=n.filters.concat(e);return Bt.create(t,n.op)}function e1(n){return n instanceof _t?`${(t=n).field.canonicalString()} ${t.op} ${wd(t.value)}`:n instanceof Bt?function(t){return t.op.toString()+" {"+t.getFilters().map(e1).join(" ,")+"}"}(n):"Filter";var t}class q8 extends _t{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class G8 extends _t{constructor(e,t){super(e,"in",t),this.keys=t1(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class W8 extends _t{constructor(e,t){super(e,"not-in",t),this.keys=t1(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function t1(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Te.fromName(r.referenceValue))}class K8 extends _t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rp(t)&&Sp(t.arrayValue,this.value)}}class n1 extends _t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Sp(this.value.arrayValue,t)}}class Q8 extends _t{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Sp(this.value.arrayValue,t)}}class Y8 extends _t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Sp(this.value.arrayValue,r))}}class J8{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function NT(n,e=null,t=[],r=[],i=null,s=null,o=null){return new J8(n,e,t,r,i,s,o)}function Xu(n){const e=Ee(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>xT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Cp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wd(r)).join(",")),e.ue=t}return e.ue}function xp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!z8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Zk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Qk(n.startAt,e.startAt)&&Qk(n.endAt,e.endAt)}function qy(n){return Te.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Gy(n,e){return n.filters.filter(t=>t instanceof _t&&t.field.isEqual(e))}function r1(n,e,t){let r=jy,i=!0;for(const s of Gy(n,e)){let o=jy,a=!0;switch(s.op){case"<":case"<=":o=$8(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=jy}qk({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];qk({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function i1(n,e,t){let r=Na,i=!0;for(const s of Gy(n,e)){let o=Na,a=!0;switch(s.op){case">=":case">":o=H8(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Na}Gk({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Gk({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Vo{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function s1(n,e,t,r,i,s,o,a){return new Vo(n,e,t,r,i,s,o,a)}function Td(n){return new Vo(n)}function o1(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function OT(n){return null!==n.collectionGroup}function Cd(n){const e=Ee(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new $t(cn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Mp(s,r))}),t.has(cn.keyField().canonicalString())||e.ce.push(new Mp(cn.keyField(),r))}return e.ce}function Fr(n){const e=Ee(n);return e.le||(e.le=function u1(n,e){if("F"===n.limitType)return NT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Mp(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Va(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Va(n.startAt.position,n.startAt.inclusive):null;return NT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Cd(n))),e.le}function kT(n,e){const t=n.filters.concat([e]);return new Vo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Wy(n,e,t){return new Vo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Np(n,e){return xp(Fr(n),Fr(e))&&n.limitType===e.limitType}function c1(n){return`${Xu(Fr(n))}|lt:${n.limitType}`}function Dd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>e1(i)).join(", ")}]`),Cp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>wd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>wd(i)).join(",")),`Target(${r})`}(Fr(n))}; limitType=${n.limitType})`}function Op(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Cd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const d=Kk(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,Cd(r),i)||r.endAt&&!function(o,a,u){const d=Kk(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,Cd(r),i)));var r,i}function l1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function d1(n){return(e,t)=>{let r=!1;for(const i of Cd(n)){const s=Z8(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Z8(n,e,t){const r=n.field.isKeyField()?Te.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?ka(u,d):xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return xe()}}class Fo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ma(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Vk(this.inner)}size(){return this.innerSize}}const X8=new nn(Te.comparator);function yi(){return X8}const h1=new nn(Te.comparator);function kp(...n){let e=h1;for(const t of n)e=e.insert(t.key,t);return e}function f1(n){let e=h1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function zs(){return Vp()}function p1(){return Vp()}function Vp(){return new Fo(n=>n.toString(),(n,e)=>n.isEqual(e))}const eK=new nn(Te.comparator),tK=new $t(Te.comparator);function st(...n){let e=tK;for(const t of n)e=e.add(t);return e}const nK=new $t(Je);function VT(){return nK}function FT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dp(e)?"-0":e}}function g1(n){return{integerValue:""+n}}function m1(n,e){return bk(e)?g1(e):FT(n,e)}class Ky{constructor(){this._=void 0}}function rK(n,e,t){return n instanceof bd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Uy(s)&&(s=By(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof ec?y1(n,e):n instanceof tc?v1(n,e):function(i,s){const o=_1(i,s),a=I1(o)+I1(i.Pe);return RT(o)&&RT(i.Pe)?g1(a):FT(i.serializer,a)}(n,e)}function iK(n,e,t){return n instanceof ec?y1(n,e):n instanceof tc?v1(n,e):t}function _1(n,e){return n instanceof Sd?RT(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class bd extends Ky{}class ec extends Ky{constructor(e){super(),this.elements=e}}function y1(n,e){const t=E1(e);for(const r of n.elements)t.some(i=>Hs(i,r))||t.push(r);return{arrayValue:{values:t}}}class tc extends Ky{constructor(e){super(),this.elements=e}}function v1(n,e){let t=E1(e);for(const r of n.elements)t=t.filter(i=>!Hs(i,r));return{arrayValue:{values:t}}}class Sd extends Ky{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function I1(n){return mn(n.integerValue||n.doubleValue)}function E1(n){return Rp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Fp{constructor(e,t){this.field=e,this.transform=t}}class oK{constructor(e,t){this.version=e,this.transformResults=t}}class _n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Yy{}function w1(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Pd(n.key,_n.none()):new Rd(n.key,n.data,_n.none());{const t=n.data,r=wr.empty();let i=new $t(cn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Lo(n.key,r,new _i(i.toArray()),_n.none())}}function aK(n,e,t){n instanceof Rd?function(i,s,o){const a=i.value.clone(),u=C1(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Lo?function(i,s,o){if(!Qy(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=C1(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(T1(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Lp(n,e,t,r){return n instanceof Rd?function(s,o,a,u){if(!Qy(s.precondition,o))return a;const d=s.value.clone(),g=D1(s.fieldTransforms,u,o);return d.setAll(g),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Lo?function(s,o,a,u){if(!Qy(s.precondition,o))return a;const d=D1(s.fieldTransforms,u,o),g=o.data;return g.setAll(T1(s)),g.setAll(d),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,Qy(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function uK(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=_1(r.transform,i||null);null!=s&&(null===t&&(t=wr.empty()),t.set(r.field,s))}return t||null}function A1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&yd(r,i,(s,o)=>function sK(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof ec&&i instanceof ec||r instanceof tc&&i instanceof tc?yd(r.elements,i.elements,Hs):r instanceof Sd&&i instanceof Sd?Hs(r.Pe,i.Pe):r instanceof bd&&i instanceof bd);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Rd extends Yy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Lo extends Yy{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function T1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function C1(n,e,t){const r=new Map;Oe(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,iK(o,a,t[i]))}return r}function D1(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,rK(s,o,e))}return r}class Pd extends Yy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LT extends Yy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class UT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&aK(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Lp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Lp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=p1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=w1(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Fe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),st())}isEqual(e){return this.batchId===e.batchId&&yd(this.mutations,e.mutations,(t,r)=>A1(t,r))&&yd(this.baseMutations,e.baseMutations,(t,r)=>A1(t,r))}}class BT{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Oe(e.mutations.length===r.length);let i=eK;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new BT(e,t,r,i)}}class jT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cK{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qn,At;function S1(n){switch(n){default:return xe();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function R1(n){if(void 0===n)return jn("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Qn.OK:return Z.OK;case Qn.CANCELLED:return Z.CANCELLED;case Qn.UNKNOWN:return Z.UNKNOWN;case Qn.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Qn.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Qn.INTERNAL:return Z.INTERNAL;case Qn.UNAVAILABLE:return Z.UNAVAILABLE;case Qn.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Qn.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Qn.NOT_FOUND:return Z.NOT_FOUND;case Qn.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Qn.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Qn.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Qn.ABORTED:return Z.ABORTED;case Qn.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Qn.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Qn.DATA_LOSS:return Z.DATA_LOSS;default:return xe()}}(At=Qn||(Qn={}))[At.OK=0]="OK",At[At.CANCELLED=1]="CANCELLED",At[At.UNKNOWN=2]="UNKNOWN",At[At.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",At[At.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",At[At.NOT_FOUND=5]="NOT_FOUND",At[At.ALREADY_EXISTS=6]="ALREADY_EXISTS",At[At.PERMISSION_DENIED=7]="PERMISSION_DENIED",At[At.UNAUTHENTICATED=16]="UNAUTHENTICATED",At[At.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",At[At.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",At[At.ABORTED=10]="ABORTED",At[At.OUT_OF_RANGE=11]="OUT_OF_RANGE",At[At.UNIMPLEMENTED=12]="UNIMPLEMENTED",At[At.INTERNAL=13]="INTERNAL",At[At.UNAVAILABLE=14]="UNAVAILABLE",At[At.DATA_LOSS=15]="DATA_LOSS";function P1(){return new TextEncoder}const lK=new Ku([4294967295,4294967295],0);function M1(n){const e=P1().encode(n),t=new lk;return t.update(e),new Uint8Array(t.digest())}function x1(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ku([t,r],0),new Ku([i,s],0)]}class $T{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Up(`Invalid padding: ${t}`);if(r<0)throw new Up(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Up(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Up(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ku.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ku.fromNumber(r)));return 1===i.compare(lK)&&(i=new Ku([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=M1(e),[r,i]=x1(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new $T(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=M1(e),[r,i]=x1(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Up extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,jp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Bp(Fe.min(),i,new nn(Je),yi(),st())}}class jp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new jp(r,t,st(),st(),st())}}class Zy{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class N1{constructor(e,t){this.targetId=e,this.me=t}}class O1{constructor(e,t,r=On.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class k1{constructor(){this.fe=0,this.ge=F1(),this.pe=On.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=st(),t=st(),r=st();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:xe()}}),new jp(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=F1()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dK{constructor(e){this.Le=e,this.Be=new Map,this.ke=yi(),this.qe=V1(),this.Qe=new nn(Je)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(qy(s))if(0===r){const o=new Te(s.path);this.Ue(t,o,ln.newNoDocument(o,Fe.min()))}else Oe(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=ko(r).toUint8Array()}catch(u){if(u instanceof Lk)return Oi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new $T(o,i,s)}catch(u){return Oi(u instanceof Up?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&qy(a.target)){const u=new Te(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,ln.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=st();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Bp(e,t,this.Qe,this.ke,r);return this.ke=yi(),this.qe=V1(),this.Qe=new nn(Je),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new k1,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new $t(Je),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||he("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new k1),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function V1(){return new nn(Te.comparator)}function F1(){return new nn(Te.comparator)}const hK={asc:"ASCENDING",desc:"DESCENDING"},fK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pK={and:"AND",or:"OR"};class gK{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function HT(n,e){return n.useProto3Json||Cp(e)?e:{value:e}}function Md(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mK(n,e){return Md(n,e.toTimestamp())}function $n(n){return Oe(!!n),Fe.fromTimestamp(function(t){const r=Oo(t);return new gn(r.seconds,r.nanos)}(n))}function zT(n,e){return qT(n,e).canonicalString()}function qT(n,e){const t=(i=n,new mt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function U1(n){const e=mt.fromString(n);return Oe(Y1(e)),e}function $p(n,e){return zT(n.databaseId,e.path)}function qs(n,e){const t=U1(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te($1(t))}function B1(n,e){return zT(n.databaseId,e)}function j1(n){const e=U1(n);return 4===e.length?mt.emptyPath():$1(e)}function GT(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $1(n){return Oe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function H1(n,e,t){return{name:$p(n,e),fields:t.value.mapValue.fields}}function z1(n,e,t){const r=qs(n,e.name),i=$n(e.updateTime),s=e.createTime?$n(e.createTime):Fe.min(),o=new wr({mapValue:{fields:e.fields}}),a=ln.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Hp(n,e){let t;if(e instanceof Rd)t={update:H1(n,e.key,e.value)};else if(e instanceof Pd)t={delete:$p(n,e.key)};else if(e instanceof Lo)t={update:H1(n,e.key,e.data),updateMask:TK(e.fieldMask)};else{if(!(e instanceof LT))return xe();t={verify:$p(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof bd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ec)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof tc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:mK(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:xe()),t;var s}function WT(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?_n.updateTime($n(s.updateTime)):void 0!==s.exists?_n.exists(s.exists):_n.none():_n.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Oe("REQUEST_TIME"===a.setToServerValue),u=new bd):"appendMissingElements"in a?u=new ec(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new tc(a.removeAllFromArray.values||[]):"increment"in a?u=new Sd(o,a.increment):xe();const d=cn.fromServerFormat(a.fieldPath);return new Fp(d,u)}(n,i)):[];var s;if(e.update){const i=qs(n,e.update.name),s=new wr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new _i((e.updateMask.fieldPaths||[]).map(g=>cn.fromServerFormat(g)));return new Lo(i,s,o,t,r)}return new Rd(i,s,t,r)}if(e.delete){const i=qs(n,e.delete);return new Pd(i,t)}if(e.verify){const i=qs(n,e.verify);return new LT(i,t)}return xe()}function q1(n,e){return{documents:[B1(n,e.path)]}}function Xy(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=B1(n,i);const s=function(d){if(0!==d.length)return Q1(Bt.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(d){if(0!==d.length)return d.map(g=>{return{field:Fa((v=g).field),direction:EK(v.dir)};var v})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=HT(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i};var d}function W1(n){let e=j1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Oe(1===r);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=function(m){const v=K1(m);return v instanceof Bt&&MT(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(v=>{return new Mp(xd((T=v).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let a=null;t.limit&&(a=function(m){let v;return v="object"==typeof m?m.value:m,Cp(v)?null:v}(t.limit));let u=null;var m;t.startAt&&(u=new Va((m=t.startAt).values||[],!!m.before));let d=null;return t.endAt&&(d=function(m){return new Va(m.values||[],!m.before)}(t.endAt)),s1(e,i,o,s,a,"F",u,d)}function K1(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=xd(t.unaryFilter.field);return _t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xd(t.unaryFilter.field);return _t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xd(t.unaryFilter.field);return _t.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xd(t.unaryFilter.field);return _t.create(o,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(n):void 0!==n.fieldFilter?_t.create(xd((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Bt.create(t.compositeFilter.filters.map(r=>K1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xe()}}(t.compositeFilter.op))}(n):xe();var t}function EK(n){return hK[n]}function wK(n){return fK[n]}function AK(n){return pK[n]}function Fa(n){return{fieldPath:n.canonicalString()}}function xd(n){return cn.fromServerFormat(n.fieldPath)}function Q1(n){return n instanceof _t?function(t){if("=="===t.op){if($k(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NAN"}};if(jk(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if($k(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NAN"}};if(jk(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(t.field),op:wK(t.op),value:t.value}}}(n):n instanceof Bt?function(t){const r=t.getFilters().map(i=>Q1(i));return 1===r.length?r[0]:{compositeFilter:{op:AK(t.op),filters:r}}}(n):xe()}function TK(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Y1(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Uo{constructor(e,t,r,i,s=Fe.min(),o=Fe.min(),a=On.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Uo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Uo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Uo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class J1{constructor(e){this.ct=e}}function Z1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ev(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:$p(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Md(s,o.version.toTimestamp()),createTime:Md(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:nc(e.version)};else{if(!e.isUnknownDocument())return xe();r.unknownDocument={path:t.path.toArray(),version:nc(e.version)}}var s,o;return r}function ev(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function nc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rc(n){const e=new gn(n.seconds,n.nanoseconds);return Fe.fromTimestamp(e)}function ic(n,e){const t=(e.baseMutations||[]).map(s=>WT(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>WT(n.ct,s)),i=gn.fromMillis(e.localWriteTimeMs);return new UT(e.batchId,i,t,r)}function zp(n){const e=rc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?rc(n.lastLimboFreeSnapshotVersion):Fe.min();let r;return r=void 0!==n.query.documents?(Oe(1===(s=n.query).documents.length),Fr(Td(j1(s.documents[0])))):function(s){return Fr(W1(s))}(n.query),new Uo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,On.fromBase64String(n.resumeToken));var s}function X1(n,e){const t=nc(e.snapshotVersion),r=nc(e.lastLimboFreeSnapshotVersion);let i;i=qy(e.target)?q1(n.ct,e.target):Xy(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function KT(n){const e=W1({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Wy(e,e.limit,"L"):e}function QT(n,e){return new jT(e.largestBatchId,WT(n.ct,e.overlayMutation))}function eV(n,e){const t=e.path.lastSegment();return[n,Vr(e.path.popLast()),t]}function tV(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:nc(r.readTime),documentKey:Vr(r.documentKey.path),largestBatchId:r.largestBatchId}}class DK{getBundleMetadata(e,t){return nV(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:rc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return nV(e).put({bundleId:(i=t).id,createTime:nc($n(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return rV(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:KT(s.bundledQuery),readTime:rc(s.readTime)};var s})}saveNamedQuery(e,t){return rV(e).put({name:(i=t).name,readTime:nc($n(i.readTime)),bundledQuery:i.bundledQuery});var i}}function nV(n){return rr(n,"bundles")}function rV(n){return rr(n,"namedQueries")}class tv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new tv(e,t.uid||"")}getOverlay(e,t){return qp(e).get(eV(this.userId,t)).next(r=>r?QT(this.serializer,r):null)}getOverlays(e,t){const r=zs();return z.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new jT(t,o);i.push(this.ht(e,a))}),z.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Vr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(qp(e).j("collectionPathOverlayIndex",a))}),z.waitFor(s)}getOverlaysForCollection(e,t,r){const i=zs(),s=Vr(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return qp(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=QT(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=zs();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qp(e).J({index:"collectionGroupOverlayIndex",range:a},(u,d,g)=>{const m=QT(this.serializer,d);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):g.done()}).next(()=>s)}ht(e,t){return qp(e).put(function(i,s,o){const[a,u,d]=eV(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Hp(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function qp(n){return rr(n,"documentOverlays")}class bK{Pt(e){return rr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?On.fromUint8Array(r):On.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class sc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(mn(e.integerValue));else if("doubleValue"in e){const r=mn(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Dp(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Oo(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ko(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Hk(e)?this.dt(t,Number.MAX_SAFE_INTEGER):zy(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):xe()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(mn(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Te.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function SK(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function iV(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=SK(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}sc.vt=new sc;class RK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=iV(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=iV(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class PK{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class MK{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Gp{constructor(){this.jt=new RK,this.Ht=new PK(this.jt),this.Jt=new MK(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class oc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new oc(this.indexId,this.documentKey,this.arrayValue,r)}}function La(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=sV(n.arrayValue,e.arrayValue),0!==t?t:(t=sV(n.directionalValue,e.directionalValue),0!==t?t:Te.comparator(n.documentKey,e.documentKey)))}function sV(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class oV{constructor(e){this.Xt=new $t((t,r)=>cn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Oe(e.collectionGroup===this.collectionId),this.nn)return!1;const t=wT(e);if(void 0!==t&&!this.sn(t))return!1;const r=Qu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new $t(cn.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Yu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Yu(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Yu(r.field,"asc"===r.dir?0:1)));return new vd(vd.UNKNOWN_ID,this.collectionId,t,Id.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function aV(n){var e,t;if(Oe(n instanceof _t||n instanceof Bt),n instanceof _t){if(n instanceof n1){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>_t.create(n.field,"==",s)))||[];return Bt.create(i,"or")}return n}const r=n.filters.map(i=>aV(i));return Bt.create(r,n.op)}function xK(n){if(0===n.getFilters().length)return[];const e=ZT(aV(n));return Oe(uV(e)),YT(e)||JT(e)?[e]:e.getFilters()}function YT(n){return n instanceof _t}function JT(n){return n instanceof Bt&&MT(n)}function uV(n){return YT(n)||JT(n)||function(t){if(t instanceof Bt&&PT(t)){for(const r of t.getFilters())if(!YT(r)&&!JT(r))return!1;return!0}return!1}(n)}function ZT(n){if(Oe(n instanceof _t||n instanceof Bt),n instanceof _t)return n;if(1===n.filters.length)return ZT(n.filters[0]);const e=n.filters.map(r=>ZT(r));let t=Bt.create(e,n.op);return t=nv(t),uV(t)?t:(Oe(t instanceof Bt),Oe(Ad(t)),Oe(t.filters.length>1),t.filters.reduce((r,i)=>XT(r,i)))}function XT(n,e){let t;return Oe(n instanceof _t||n instanceof Bt),Oe(e instanceof _t||e instanceof Bt),t=n instanceof _t?e instanceof _t?Bt.create([n,e],"and"):cV(n,e):e instanceof _t?cV(e,n):function(i,s){if(Oe(i.filters.length>0&&s.filters.length>0),Ad(i)&&Ad(s))return Xk(i,s.getFilters());const o=PT(i)?i:s,a=PT(i)?s:i,u=o.filters.map(d=>XT(d,a));return Bt.create(u,"or")}(n,e),nv(t)}function cV(n,e){if(Ad(e))return Xk(e,n.getFilters());{const t=e.filters.map(r=>XT(n,r));return Bt.create(t,"or")}}function nv(n){if(Oe(n instanceof _t||n instanceof Bt),n instanceof _t)return n;const e=n.getFilters();if(1===e.length)return nv(e[0]);if(Jk(n))return n;const t=e.map(i=>nv(i)),r=[];return t.forEach(i=>{i instanceof _t?r.push(i):i instanceof Bt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Bt.create(r,n.op)}class NK{constructor(){this.un=new eC}addToCollectionParentIndex(e,t){return this.un.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(ki.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(ki.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class eC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new $t(mt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $t(mt.comparator)).toArray()}}const rv=new Uint8Array(0);class OK{constructor(e,t){this.databaseId=t,this.cn=new eC,this.ln=new Fo(r=>Xu(r),(r,i)=>xp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Vr(i)};return lV(e).put(s)}return z.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Ik(t),""],!1,!0);return lV(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push($s(o.parent))}return r})}addFieldIndex(e,t){const r=Wp(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Od(e);return s.next(a=>{o.put(tV(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Wp(e),i=Od(e),s=Nd(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Wp(e),r=Nd(e),i=Od(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return z.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new oV(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Nd(e);let i=!0;const s=new Map;return z.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=st();const a=[];return z.forEach(s,(u,d)=>{var K;he("IndexedDbIndexManager",`Using index ${K=u,`id=${K.indexId}|cg=${K.collectionGroup}|f=${K.fields.map(ae=>`${ae.fieldPath}:${ae.kind}`).join(",")}`} to execute ${Xu(t)}`);const g=function(K,ae){const ve=wT(ae);if(void 0===ve)return null;for(const Ve of Gy(K,ve.fieldPath))switch(Ve.op){case"array-contains-any":return Ve.value.arrayValue.values||[];case"array-contains":return[Ve.value]}return null}(d,u),m=function(K,ae){const ve=new Map;for(const Ve of Qu(ae))for(const V of Gy(K,Ve.fieldPath))switch(V.op){case"==":case"in":ve.set(Ve.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return ve.set(Ve.fieldPath.canonicalString(),V.value),Array.from(ve.values())}return null}(d,u),v=function(K,ae){const ve=[];let Ve=!0;for(const V of Qu(ae)){const b=0===V.kind?r1(K,V.fieldPath,K.startAt):i1(K,V.fieldPath,K.startAt);ve.push(b.value),Ve&&(Ve=b.inclusive)}return new Va(ve,Ve)}(d,u),w=function(K,ae){const ve=[];let Ve=!0;for(const V of Qu(ae)){const b=0===V.kind?i1(K,V.fieldPath,K.endAt):r1(K,V.fieldPath,K.endAt);ve.push(b.value),Ve&&(Ve=b.inclusive)}return new Va(ve,Ve)}(d,u),T=this.In(u,d,v),D=this.In(u,d,w),M=this.Tn(u,d,m),G=this.En(u.indexId,g,T,v.inclusive,D,w.inclusive,M);return z.forEach(G,F=>r.G(F,t.limit).next(K=>{K.forEach(ae=>{const ve=Te.fromSegments(ae.documentKey);o.has(ve)||(o=o.add(ve),a.push(ve))})}))}).next(()=>a)}return z.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:xK(Bt.create(e.filters,"and")).map(r=>NT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),d=u/(null!=t?t.length:1),g=[];for(let m=0;m<u;++m){const v=t?this.dn(t[m/d]):rv,w=this.An(e,v,r[m%d],i),T=this.Rn(e,v,s[m%d],o),D=a.map(M=>this.An(e,v,M,!0));g.push(...this.createRange(w,T,D))}return g}An(e,t,r,i){const s=new oc(e,Te.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new oc(e,Te.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new oV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return z.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new $t(cn.comparator),g=!1;for(const m of u.filters)for(const v of m.getFlattenedFilters())v.field.isKeyField()||("array-contains"===v.op||"array-contains-any"===v.op?g=!0:d=d.add(v.field));for(const m of u.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(g?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new Gp;for(const i of Qu(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);sc.vt.It(s,o)}return r.zt()}dn(e){const t=new Gp;return sc.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Gp;return sc.vt.It(Zu(this.databaseId,t),r.Yt(function(s){const o=Qu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new Gp);let s=0;for(const o of Qu(e)){const a=r[s++];for(const u of i)if(this.fn(t,o.fieldPath)&&Rp(a))i=this.gn(i,o,a);else{const d=u.Yt(o.kind);sc.vt.It(a,d)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Gp;u.seed(a.zt()),sc.vt.It(o,u.Yt(t.kind)),s.push(u)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof _t&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Wp(e),i=Od(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return z.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(g,m){const v=m?new Id(m.sequenceNumber,new ki(rc(m.readTime),new Te($s(m.documentKey)),m.largestBatchId)):Id.empty(),w=g.fields.map(([T,D])=>new Yu(cn.fromServerFormat(T),D));return new vd(g.indexId,g.collectionGroup,w,v)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Je(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Wp(e),s=Od(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>z.forEach(a,u=>s.put(tV(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return z.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?z.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),z.forEach(a,u=>this.wn(e,i,u).next(d=>{const g=this.Sn(s,u);return d.isEqual(g)?z.resolve():this.bn(e,s,u,d,g)}))))})}Dn(e,t,r,i){return Nd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Nd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Nd(e);let s=new $t(La);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new oc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new $t(La);const i=this.Vn(t,e);if(null==i)return r;const s=wT(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Rp(o))for(const a of o.arrayValue.values||[])r=r.add(new oc(t.indexId,e.key,this.dn(a),i))}else r=r.add(new oc(t.indexId,e.key,rv,i));return r}bn(e,t,r,i,s){he("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,d,g,m,v){const w=u.getIterator(),T=d.getIterator();let D=Ed(w),M=Ed(T);for(;D||M;){let G=!1,F=!1;if(D&&M){const K=g(D,M);K<0?F=!0:K>0&&(G=!0)}else null!=D?F=!0:G=!0;G?(m(M),M=Ed(T)):F?(v(D),D=Ed(w)):(D=Ed(w),M=Ed(T))}}(i,s,La,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),z.waitFor(o)}yn(e){let t=1;return Od(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>La(o,a)).filter((o,a,u)=>!a||0!==La(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=La(o,e),u=La(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,rv,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,rv,[]]))}return s}Cn(e,t){return La(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dV)}getMinOffset(e,t){return z.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||xe())).next(dV)}}function lV(n){return rr(n,"collectionParents")}function Nd(n){return rr(n,"indexEntries")}function Wp(n){return rr(n,"indexConfiguration")}function Od(n){return rr(n,"indexState")}function dV(n){Oe(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;AT(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ki(e.readTime,e.documentKey,t)}const hV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Lr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Lr(e,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fV(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:o},(g,m,v)=>(a++,v.delete()));s.push(u.next(()=>{Oe(1===a)}));const d=[];for(const g of t.mutations){const m=Pk(e,g.key.path,t.batchId);s.push(i.delete(m)),d.push(g.key)}return z.waitFor(s).next(()=>d)}function iv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw xe();e=n.noDocument}return JSON.stringify(e).length}Lr.DEFAULT_COLLECTION_PERCENTILE=10,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lr.DEFAULT=new Lr(41943040,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lr.DISABLED=new Lr(-1,0,0);class sv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Oe(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new sv(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ua(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=kd(e),o=Ua(e);return o.add({}).next(a=>{Oe("number"==typeof a);const u=new UT(a,t,r,i),d=function(w,T,D){const M=D.baseMutations.map(F=>Hp(w.ct,F)),G=D.mutations.map(F=>Hp(w.ct,F));return{userId:T,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:M,mutations:G}}(this.serializer,this.userId,u),g=[];let m=new $t((v,w)=>Je(v.canonicalString(),w.canonicalString()));for(const v of i){const w=Pk(this.userId,v.key.path,a);m=m.add(v.key.path.popLast()),g.push(o.put(d)),g.push(s.put(w,E8))}return m.forEach(v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),z.waitFor(g).next(()=>u)})}lookupMutationBatch(e,t){return Ua(e).get(t).next(r=>r?(Oe(r.userId===this.userId),ic(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?z.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ua(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Oe(a.batchId>=r),s=ic(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ua(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ua(e).U("userMutationsIndex",t).next(r=>r.map(i=>ic(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Fy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return kd(e).J({range:i},(o,a,u)=>{const[d,g,m]=o,v=$s(g);if(d===this.userId&&t.path.isEqual(v))return Ua(e).get(m).next(w=>{if(!w)throw xe();Oe(w.userId===this.userId),s.push(ic(this.serializer,w))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $t(Je);const i=[];return t.forEach(s=>{const o=Fy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=kd(e).J({range:a},(d,g,m)=>{const[v,w,T]=d,D=$s(w);v===this.userId&&s.path.isEqual(D)?r=r.add(T):m.done()});i.push(u)}),z.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Fy(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new $t(Je);return kd(e).J({range:o},(u,d,g)=>{const[m,v,w]=u,T=$s(v);m===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(w)):g.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Ua(e).get(s).next(o=>{if(null===o)throw xe();Oe(o.userId===this.userId),r.push(ic(this.serializer,o))}))}),z.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return fV(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),z.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return z.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return kd(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=$s(s[1]);i.push(u)}else a.done()}).next(()=>{Oe(0===i.length)})})}containsKey(e,t){return pV(e,this.userId,t)}Nn(e){return gV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pV(n,e,t){const r=Fy(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return kd(n).J({range:s,H:!0},(a,u,d)=>{const[g,m,v]=a;g===e&&m===i&&(o=!0),d.done()}).next(()=>o)}function Ua(n){return rr(n,"mutations")}function kd(n){return rr(n,"documentMutations")}function gV(n){return rr(n,"mutationQueues")}class ac{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ac(0)}static kn(){return new ac(-1)}}class kK{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new ac(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Fe.fromTimestamp(new gn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Vd(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Oe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Vd(e).J((o,a)=>{const u=zp(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>z.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Vd(e).J((r,i)=>{const s=zp(i);t(s)})}qn(e){return mV(e).get("targetGlobalKey").next(t=>(Oe(null!==t),t))}Qn(e,t){return mV(e).put("targetGlobalKey",t)}Kn(e,t){return Vd(e).put(X1(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Xu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Vd(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=zp(a);xp(t,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Ba(e);return t.forEach(o=>{const a=Vr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),z.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ba(e);return z.forEach(t,s=>{const o=Vr(s.path);return z.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Ba(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ba(e);let s=st();return i.J({range:r,H:!0},(o,a,u)=>{const d=$s(o[1]),g=new Te(d);s=s.add(g)}).next(()=>s)}containsKey(e,t){const r=Vr(t.path),i=IDBKeyRange.bound([r],[Ik(r)],!1,!0);let s=0;return Ba(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}ot(e,t){return Vd(e).get(t).next(r=>r?zp(r):null)}}function Vd(n){return rr(n,"targets")}function mV(n){return rr(n,"targetGlobal")}function Ba(n){return rr(n,"targetDocuments")}function _V([n,e],[t,r]){const i=Je(n,t);return 0===i?Je(e,r):i}class VK{constructor(e){this.Un=e,this.buffer=new $t(_V),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();_V(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;he("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,se.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Pa(r)?he("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ra(r)}yield t.Hn(3e5)}))}}class FK{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return z.resolve(Vi.oe);const r=new VK(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(hV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hV):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,u,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),_d()<=Bs.$b.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-g}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(d-u)+`ms\nTotal Duration: ${d-g}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class LK{constructor(e,t){this.db=e,this.garbageCollector=function vV(n,e){return new FK(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return ov(e,r)}removeReference(e,t,r){return ov(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ov(e,t)}nr(e,t){return function(i,s){let o=!1;return gV(i).Y(a=>pV(i,a,s).next(u=>(u&&(o=!0),z.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const u=this.nr(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Fe.min()),Ba(e).delete([0,Vr(o.path)])))});i.push(u)}}).next(()=>z.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ov(e,t)}tr(e,t){const r=Ba(e);let i,s=Vi.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==Vi.oe&&t(new Te($s(i)),s),s=d,i=u):s=Vi.oe}).next(()=>{s!==Vi.oe&&t(new Te($s(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ov(n,e){return Ba(n).put((i=n.currentSequenceNumber,{targetId:0,path:Vr(e.path),sequenceNumber:i}));var i}class IV{constructor(){this.changes=new Fo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class UK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return uc(e).put(r)}removeEntry(e,t,r){return uc(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ev(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=ln.newInvalidDocument(t);return uc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Kp(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:ln.newInvalidDocument(t)};return uc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Kp(t))},(i,s)=>{r={document:this.ir(t,s),size:iv(s)}}).next(()=>r)}getEntries(e,t){let r=yi();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=yi(),i=new nn(Te.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,iv(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return z.resolve();let i=new $t(TV);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Kp(i.first()),Kp(i.last())),o=i.getIterator();let a=o.getNext();return uc(e).J({index:"documentKeyIndex",range:s},(u,d,g)=>{const m=Te.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&TV(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?g.$(Kp(a)):g.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),ev(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return uc(e).U(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let g=yi();for(const m of d){const v=this.ir(Te.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);v.isFoundDocument()&&(Op(t,v)||i.has(v.key))&&(g=g.insert(v.key,v))}return g})}getAllFromCollectionGroup(e,t,r,i){let s=yi();const o=AV(t,r),a=AV(t,ki.max());return uc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,g)=>{const m=this.ir(Te.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(m.key,m),s.size===i&&g.done()}).next(()=>s)}newChangeBuffer(e){return new BK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wV(e).get("remoteDocumentGlobalKey").next(t=>(Oe(!!t),t))}rr(e,t){return wV(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function CK(n,e){let t;if(e.document)t=z1(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Te.fromSegments(e.noDocument.path),i=rc(e.noDocument.readTime);t=ln.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xe();{const r=Te.fromSegments(e.unknownDocument.path),i=rc(e.unknownDocument.version);t=ln.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new gn(i[0],i[1]);return Fe.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Fe.min()))return r}return ln.newInvalidDocument(e)}}function EV(n){return new UK(n)}class BK extends IV{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Fo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new $t((s,o)=>Je(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=Z1(this.cr.serializer,o);i=i.add(s.path.popLast());const d=iv(u);r+=d-a.size,t.push(this.cr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=Z1(this.cr.serializer,o.convertToNoDocument(Fe.min()));t.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),z.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function wV(n){return rr(n,"remoteDocumentGlobal")}function uc(n){return rr(n,"remoteDocumentsV14")}function Kp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function AV(n,e){const t=e.documentKey.path.toArray();return[n,ev(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function TV(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Je(t[s],r[s]),i)return i;return i=Je(t.length,r.length),i||(i=Je(t[t.length-2],r[r.length-2]),i||Je(t[t.length-1],r[r.length-1]))}class jK{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class CV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Lp(r.mutation,i,_i.empty(),gn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,st()).next(()=>r))}getLocalViewOfDocuments(e,t,r=st()){const i=zs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=kp();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=zs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,st()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=yi();const o=Vp(),a=Vp();return t.forEach((u,d)=>{const g=r.get(d.key);i.has(d.key)&&(void 0===g||g.mutation instanceof Lo)?s=s.insert(d.key,d):void 0!==g?(o.set(d.key,g.mutation.getFieldMask()),Lp(g.mutation,d,g.mutation.getFieldMask(),gn.now())):o.set(d.key,_i.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,g)=>o.set(d,g)),t.forEach((d,g)=>{var m;return a.set(d,new jK(g,null!==(m=o.get(d))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Vp();let i=new nn((o,a)=>o-a),s=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=t.get(u);if(null===d)return;let g=r.get(u)||_i.empty();g=a.applyToLocalView(d,g),r.set(u,g);const m=(i.get(a.batchId)||st()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,g=u.value,m=p1();g.forEach(v=>{if(!s.has(v)){const w=w1(t.get(v),r.get(v));null!==w&&m.set(v,w),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Te.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):OT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):z.resolve(zs());let a=-1,u=s;return o.next(d=>z.forEach(d,(g,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(g)?z.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{u=u.insert(g,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,st())).next(g=>({batchId:a,changes:f1(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(r=>{let i=kp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=kp();return this.indexManager.getCollectionParents(e,s).next(a=>z.forEach(a,u=>{const d=(m=t,v=u.child(s),new Vo(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,v;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(g=>{g.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,d)=>{const g=d.getKey();null===o.get(g)&&(o=o.insert(g,ln.newInvalidDocument(g)))});let a=kp();return o.forEach((u,d)=>{const g=s.get(u);void 0!==g&&Lp(g.mutation,d,_i.empty(),gn.now()),Op(t,d)&&(a=a.insert(u,d))}),a})}}class $K{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return z.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:$n(i.createTime)}),z.resolve();var i}getNamedQuery(e,t){return z.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:KT(i.bundledQuery),readTime:$n(i.readTime)}),z.resolve();var i}}class HK{constructor(){this.overlays=new nn(Te.comparator),this.Ir=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=zs();return z.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),z.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){const i=zs(),s=t.length+1,o=new Te(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new nn((d,g)=>d-g);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let g=s.get(d.largestBatchId);null===g&&(g=zs(),s=s.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const a=zs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,g)=>a.set(d,g)),!(a.size()>=i)););return z.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new jT(t,r));let s=this.Ir.get(t);void 0===s&&(s=st(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class zK{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}class tC{constructor(){this.Tr=new $t(hr.Er),this.dr=new $t(hr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new hr(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new hr(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Te(new mt([])),r=new hr(t,e),i=new hr(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Te(new mt([])),r=new hr(t,e),i=new hr(t,e+1);let s=st();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new hr(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class hr{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Te.comparator(e.key,t.key)||Je(e.wr,t.wr)}static Ar(e,t){return Je(e.wr,t.wr)||Te.comparator(e.key,t.key)}}class qK{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new $t(hr.Er)}checkEmpty(e){return z.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new UT(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new hr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,t){return z.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hr(t,0),i=new hr(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $t(Je);return t.forEach(i=>{const s=new hr(i,0),o=new hr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Te.isDocumentKey(s)||(s=s.child(""));const o=new hr(new Te(s),0);let a=new $t(Je);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.wr)),!0)},o),z.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Oe(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return z.forEach(t.mutations,i=>{const s=new hr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new hr(t,0),i=this.br.firstAfterOrEqual(r);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return z.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class GK{constructor(e){this.Mr=e,this.docs=new nn(Te.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let r=yi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ln.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=yi();const o=t.path,a=new Te(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:g}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||AT(wk(g),r)<=0||(i.has(g.key)||Op(t,g))&&(s=s.insert(g.key,g.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,t,r,i){xe()}Or(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new WK(this)}getSize(e){return z.resolve(this.size)}}class WK extends IV{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class KK{constructor(e){this.persistence=e,this.Nr=new Fo(t=>Xu(t),xp),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new tC,this.targetCount=0,this.kr=ac.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),z.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new ac(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.Kn(t),z.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.Br.containsKey(t))}}class nC{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Vi(0),this.Kr=!1,this.Kr=!0,this.$r=new zK,this.referenceDelegate=e(this),this.Ur=new KK(this),this.indexManager=new NK,this.remoteDocumentCache=new GK(r=>this.referenceDelegate.Wr(r)),this.serializer=new J1(t),this.Gr=new $K(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HK,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new qK(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const i=new QK(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class QK extends Tk{constructor(e){super(),this.currentSequenceNumber=e}}class av{constructor(e){this.persistence=e,this.Jr=new tC,this.Yr=null}static Zr(e){return new av(e)}get Xr(){if(this.Yr)return this.Yr;throw xe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),z.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const i=Te.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Fe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return z.or([()=>z.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class YK{constructor(e){this.serializer=e}O(e,t,r,i){const s=new Vy("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rk,{unique:!0}),u.createObjectStore("documentMutations"),DV(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=z.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),DV(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Fe.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",g)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").U().next(g=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rk,{unique:!0});const m=d.store("mutations"),v=g.map(w=>m.put(w));return z.waitFor(v)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:N8});d.createIndex("collectionPathOverlayIndex",O8,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",k8,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:w8});d.createIndex("documentKeyIndex",A8),d.createIndex("collectionGroupIndex",T8)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:R8}).createIndex("sequenceNumberIndex",P8,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:M8}).createIndex("documentKeyIndex",x8,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(u){u.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=iv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>z.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>z.forEach(a,u=>{Oe(u.userId===s.userId);const d=ic(this.serializer,u);return fV(e,s.userId,d).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new mt(o),d=[0,Vr(u)];s.push(t.get(d).next(g=>g?z.resolve():t.put({targetId:0,path:Vr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>z.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:S8});const r=t.store("collectionParents"),i=new eC,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Vr(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new mt(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],d)=>{const g=$s(a);return s(g.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=zp(i),o=X1(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(m=o,m.document?new Te(mt.fromString(m.document.name).popFirst(5)):m.noDocument?Te.fromSegments(m.noDocument.path):m.unknownDocument?Te.fromSegments(m.unknownDocument.path):xe()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(d))}).next(()=>z.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=EV(this.serializer),s=new nC(av.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var d;let g=null!==(d=a.get(u.userId))&&void 0!==d?d:st();ic(this.serializer,u).keys().forEach(m=>g=g.add(m)),a.set(u.userId,g)}),z.forEach(a,(u,d)=>{const g=new lr(d),m=tv.lt(this.serializer,g),v=s.getIndexManager(g),w=sv.lt(g,this.serializer,v,s.referenceDelegate);return new CV(i,w,m,v).recalculateAndSaveOverlaysForDocumentKeys(new bT(t,Vi.oe),u).next()})})}}function DV(n){n.createObjectStore("targetDocuments",{keyPath:D8}).createIndex("documentTargetsIndex",b8,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",C8,{unique:!0}),n.createObjectStore("targetGlobal")}const rC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iC{constructor(e,t,r,i,s,o,a,u,d,g,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=d,this.li=g,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!iC.D())throw new ce(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LK(this,i),this.Ai=t+"main",this.serializer=new J1(u),this.Ri=new js(this.Ai,this.hi,new YK(this.serializer)),this.$r=new bK,this.Ur=new kK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=EV(this.serializer),this.Gr=new DK,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===g&&jn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(Z.FAILED_PRECONDITION,rC);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Vi(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,se.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,se.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,se.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Pa(e))return he("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return he("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Qp(e).get("owner").next(t=>z.resolve(this.vi(t)))}Ci(e){return cv(e).delete(this.clientId)}Fi(){var e=this;return(0,se.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=rr(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return z.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?z.resolve(!0):Qp(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ce(Z.FAILED_PRECONDITION,rC);return!1}}return!(!this.networkEnabled||!this.inForeground)||cv(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&he("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,se.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new bT(t,Vi.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>cv(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return sv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new OK(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return tv.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){he("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(u=this.hi)?L8:16===u?F8:15===u?DT:14===u?Nk:13===u?xk:12===u?V8:11===u?Mk:void xe();var u;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new bT(a,this.Qr?this.Qr.next():Vi.oe),"readwrite-primary"===t?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw jn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ce(Z.FAILED_PRECONDITION,Ak);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Qp(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ce(Z.FAILED_PRECONDITION,rC)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qp(e).put("owner",t)}static D(){return js.D()}bi(e){const t=Qp(e);return t.get("owner").next(r=>this.vi(r)?(he("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):z.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(jn(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,xt.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return he("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return jn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){jn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qp(n){return rr(n,"owner")}function cv(n){return rr(n,"clientMetadata")}function sC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class oC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=st(),i=st();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new oC(e,t.fromCache,r,i)}}class JK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class bV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,xt.nr)()?8:Ck((0,xt.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new JK;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(_d()<=Bs.$b.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Dd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(_d()<=Bs.$b.DEBUG&&he("QueryEngine","Query:",Dd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(_d()<=Bs.$b.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Dd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(t))):z.resolve())}Yi(e,t){if(o1(t))return z.resolve(null);let r=Fr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Wy(t,null,"F"),r=Fr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=st(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(t,a);return this.ns(t,d,o,u.readTime)?this.Yi(e,Wy(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return o1(t)||i.isEqual(Fe.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?z.resolve(null):(_d()<=Bs.$b.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Dd(t)),this.rs(e,o,t,Ek(i,-1)).next(a=>a))})}ts(e,t){let r=new $t(d1(e));return t.forEach((i,s)=>{Op(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return _d()<=Bs.$b.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Dd(t)),this.Ji.getDocumentsMatchingQuery(e,t,ki.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class ZK{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new nn(Je),this._s=new Fo(s=>Xu(s),xp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function SV(n,e,t,r){return new ZK(n,e,t,r)}function RV(n,e){return aC.apply(this,arguments)}function aC(){return(aC=(0,se.A)(function*(n,e){const t=Ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=st();for(const d of i){o.push(d.batchId);for(const g of d.mutations)u=u.add(g.key)}for(const d of s){a.push(d.batchId);for(const g of d.mutations)u=u.add(g.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function PV(n){const e=Ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function MV(n,e,t){let r=st(),i=st();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=yi();return t.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Fe.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):he("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function t7(n,e){const t=Ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fd(n,e){const t=Ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Uo(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Ld(n,e,t){return uC.apply(this,arguments)}function uC(){return(uC=(0,se.A)(function*(n,e,t){const r=Ee(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Pa(o))throw o;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function lv(n,e,t){const r=Ee(n);let i=Fe.min(),s=st();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,g){const m=Ee(u),v=m._s.get(g);return void 0!==v?z.resolve(m.os.get(v)):m.Ur.getTargetData(d,g)}(r,o,Fr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Fe.min(),t?s:st())).next(a=>(OV(r,l1(e),a),{documents:a,Ts:s})))}function xV(n,e){const t=Ee(n),r=Ee(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function NV(n,e){const t=Ee(n),r=t.us.get(e)||Fe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,Ek(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(OV(t,e,i),i))}function OV(n,e,t){let r=n.us.get(e)||Fe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function cC(){return(cC=(0,se.A)(function*(n,e,t,r){const i=Ee(n);let s=st(),o=yi();for(const d of t){const g=e.Es(d.metadata.name);d.document&&(s=s.add(g));const m=e.ds(d);m.setReadTime(e.As(d.metadata.readTime)),o=o.insert(g,m)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Fd(i,(g=r,Fr(Td(mt.fromString(`__bundle__/docs/${g}`)))));var g;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>MV(d,a,o).next(g=>(a.apply(d),g)).next(g=>i.Ur.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.Ur.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,g.Ps,g.Is)).next(()=>g.Ps)))})).apply(this,arguments)}function r7(n,e){return lC.apply(this,arguments)}function lC(){return(lC=(0,se.A)(function*(n,e,t=st()){const r=yield Fd(n,Fr(KT(e.bundledQuery))),i=Ee(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=$n(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(On.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function kV(n,e){return`firestore_clients_${n}_${e}`}function VV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function dC(n,e){return`firestore_targets_${n}_${e}`}class dv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new ce(i.error.code,i.error.message))),o?new dv(e,t,i.state,s):(jn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ce(r.error.code,r.error.message))),s?new Yp(e,r.state,i):(jn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=VT();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=bk(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new hv(e,s):(jn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class hC{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new hC(t.clientId,t.onlineState):(jn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class fC{constructor(){this.activeTargetIds=VT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pC{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new nn(Je),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=kV(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new fC),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,se.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(kV(e.persistenceKey,i));if(s){const o=hv.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(dC(this.persistenceKey,e));if(i){const s=Yp.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(dC(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return he("SharedClientState","READ",e,t),t}setItem(e,t){he("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){he("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(he("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void jn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,se.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=Vi.oe;if(null!=o)try{const u=JSON.parse(o);Oe("number"==typeof u),a=u}catch(u){jn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Vi.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new dv(this.currentUser,e,t,r),s=VV(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=VV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=dC(this.persistenceKey,e),s=new Yp(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return hv.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return dv.Rs(new lr(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return Yp.Rs(i,t)}Ls(e){return hC.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,se.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);he("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=VT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class FV{constructor(){this.so=new fC,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new fC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class i7{_o(e){}shutdown(){}}class LV{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let fv=null;function gC(){return null===fv?fv=268435456+Math.round(2147483648*Math.random()):fv++,"0x"+fv.toString(16)}const s7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class o7{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Ur="WebChannelConnection";class a7 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=gC(),u=this.xo(t,r.toUriEncodedString());he("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,u,d,i).then(g=>(he("RestConnection",`Received RPC '${t}' ${a}: `,g),g),g=>{throw Oi("RestConnection",`RPC '${t}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+md,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${s7[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=gC();return new Promise((o,a)=>{const u=new dk;u.setWithCredentials(!0),u.listenOnce(hk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ky.NO_ERROR:const g=u.getResponseJson();he(Ur,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),o(g);break;case ky.TIMEOUT:he(Ur,`RPC '${e}' ${s} timed out`),a(new ce(Z.DEADLINE_EXCEEDED,"Request time out"));break;case ky.HTTP_ERROR:const m=u.getStatus();if(he(Ur,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const w=v?.error;if(w&&w.status&&w.message){const T=function(M){const G=M.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(G)>=0?G:Z.UNKNOWN}(w.status);a(new ce(T,w.message))}else a(new ce(Z.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ce(Z.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{he(Ur,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);he(Ur,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){const i=gC(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gk(),a=pk(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const g=s.join("");he(Ur,`Creating RPC '${e}' stream ${i}: ${g}`,u);const m=o.createWebChannel(g,u);let v=!1,w=!1;const T=new o7({Io:M=>{w?he(Ur,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(v||(he(Ur,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),he(Ur,`RPC '${e}' stream ${i} sending:`,M),m.send(M))},To:()=>m.close()}),D=(M,G,F)=>{M.listen(G,K=>{try{F(K)}catch(ae){setTimeout(()=>{throw ae},0)}})};return D(m,wp.EventType.OPEN,()=>{w||(he(Ur,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),D(m,wp.EventType.CLOSE,()=>{w||(w=!0,he(Ur,`RPC '${e}' stream ${i} transport closed`),T.So())}),D(m,wp.EventType.ERROR,M=>{w||(w=!0,Oi(Ur,`RPC '${e}' stream ${i} transport errored:`,M),T.So(new ce(Z.UNAVAILABLE,"The operation could not be completed")))}),D(m,wp.EventType.MESSAGE,M=>{var G;if(!w){const F=M.data[0];Oe(!!F);const ae=F.error||(null===(G=F[0])||void 0===G?void 0:G.error);if(ae){he(Ur,`RPC '${e}' stream ${i} received error:`,ae);const ve=ae.status;let Ve=function(O){const L=Qn[O];if(void 0!==L)return R1(L)}(ve),V=ae.message;void 0===Ve&&(Ve=Z.INTERNAL,V="Unknown error status: "+ve+" with message "+ae.message),w=!0,T.So(new ce(Ve,V)),m.close()}else he(Ur,`RPC '${e}' stream ${i} received:`,F),T.bo(F)}}),D(a,fk.STAT_EVENT,M=>{M.stat===IT.PROXY?he(Ur,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===IT.NOPROXY&&he(Ur,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function UV(){return typeof window<"u"?window:null}function pv(){return typeof document<"u"?document:null}function Jp(n){return new gK(n,!0)}class mC{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class BV{constructor(e,t,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new mC(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,se.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,se.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,se.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(jn(t.toString()),jn("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===Z.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ce(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,se.A)(function*(){e.state=0,e.start()}))}I_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class u7 extends BV{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function yK(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:xe(),i=e.targetChange.targetIds||[],s=function(d,g){return d.useProto3Json?(Oe(void 0===g||"string"==typeof g),On.fromBase64String(g||"")):(Oe(void 0===g||g instanceof Buffer||g instanceof Uint8Array),On.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const g=void 0===d.code?Z.UNKNOWN:R1(d.code);return new ce(g,d.message||"")}(o);t=new O1(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=qs(n,r.document.name),s=$n(r.document.updateTime),o=r.document.createTime?$n(r.document.createTime):Fe.min(),a=new wr({mapValue:{fields:r.document.fields}}),u=ln.newFoundDocument(i,s,o,a);t=new Zy(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=qs(n,r.document),s=r.readTime?$n(r.readTime):Fe.min(),o=ln.newNoDocument(i,s);t=new Zy([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=qs(n,r.document);t=new Zy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return xe();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new cK(i,s);t=new N1(r.targetId,o)}}var d;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Fe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Fe.min():o.readTime?$n(o.readTime):Fe.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=GT(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=qy(u)?{documents:q1(s,u)}:{query:Xy(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=L1(s,o.resumeToken);const d=HT(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Fe.min())>0){a.readTime=Md(s,o.snapshotVersion.toTimestamp());const d=HT(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function IK(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=GT(this.serializer),t.removeTarget=e,this.a_(t)}}class c7 extends BV{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function vK(n,e){return n&&n.length>0?(Oe(void 0!==e),n.map(t=>function(i,s){let o=$n(i.updateTime?i.updateTime:s);return o.isEqual(Fe.min())&&(o=$n(s)),new oK(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=$n(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=GT(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Hp(this.serializer,r))};this.a_(t)}}class l7 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ce(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,qT(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ce(Z.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,qT(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(Z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class d7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(jn(t),this.D_=!1):he("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class h7{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,se.A)(function*(){var u;ja(o)&&(he("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,se.A)(function*(g){const m=Ee(g);m.L_.add(4),yield Ud(m),m.q_.set("Unknown"),m.L_.delete(4),yield Zp(m)}),function d(g){return u.apply(this,arguments)})(o))}))}),this.q_=new d7(r,i)}}function Zp(n){return _C.apply(this,arguments)}function _C(){return(_C=(0,se.A)(function*(n){if(ja(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function Ud(n){return yC.apply(this,arguments)}function yC(){return(yC=(0,se.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function gv(n,e){const t=Ee(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),EC(t)?IC(t):$d(t).r_()&&vC(t,e))}function Bd(n,e){const t=Ee(n),r=$d(t);t.N_.delete(e),r.r_()&&jV(t,e),0===t.N_.size&&(r.r_()?r.o_():ja(t)&&t.q_.set("Unknown"))}function vC(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$d(n).A_(e)}function jV(n,e){n.Q_.xe(e),$d(n).R_(e)}function IC(n){n.Q_=new dK({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),$d(n).start(),n.q_.v_()}function EC(n){return ja(n)&&!$d(n).n_()&&n.N_.size>0}function ja(n){return 0===Ee(n).L_.size}function $V(n){n.Q_=void 0}function f7(n){return wC.apply(this,arguments)}function wC(){return(wC=(0,se.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function p7(n){return AC.apply(this,arguments)}function AC(){return(AC=(0,se.A)(function*(n){n.N_.forEach((e,t)=>{vC(n,e)})})).apply(this,arguments)}function g7(n,e){return TC.apply(this,arguments)}function TC(){return(TC=(0,se.A)(function*(n,e){$V(n),EC(n)?(n.q_.M_(e),IC(n)):n.q_.set("Unknown")})).apply(this,arguments)}function m7(n,e,t){return CC.apply(this,arguments)}function CC(){return CC=(0,se.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof O1&&2===e.state&&e.cause)try{yield(r=(0,se.A)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.N_.delete(u),s.Q_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield mv(n,r)}else if(e instanceof Zy?n.Q_.Ke(e):e instanceof N1?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Fe.min()))try{const r=yield PV(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const g=s.N_.get(d);g&&s.N_.set(d,g.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const g=s.N_.get(u);if(!g)return;s.N_.set(u,g.withResumeToken(On.EMPTY_BYTE_STRING,g.snapshotVersion)),jV(s,u);const m=new Uo(g.target,u,d,g.sequenceNumber);vC(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){he("RemoteStore","Failed to raise snapshot:",r),yield mv(n,r)}var r}),CC.apply(this,arguments)}function mv(n,e,t){return DC.apply(this,arguments)}function DC(){return(DC=(0,se.A)(function*(n,e,t){if(!Pa(e))throw e;n.L_.add(1),yield Ud(n),n.q_.set("Offline"),t||(t=()=>PV(n.localStore)),n.asyncQueue.enqueueRetryable((0,se.A)(function*(){he("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Zp(n)}))})).apply(this,arguments)}function HV(n,e){return e().catch(t=>mv(n,t,e))}function jd(n){return bC.apply(this,arguments)}function bC(){return(bC=(0,se.A)(function*(n){const e=Ee(n),t=$a(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_7(e);)try{const i=yield t7(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,y7(e,i)}catch(i){yield mv(e,i)}zV(e)&&qV(e)})).apply(this,arguments)}function _7(n){return ja(n)&&n.O_.length<10}function y7(n,e){n.O_.push(e);const t=$a(n);t.r_()&&t.V_&&t.m_(e.mutations)}function zV(n){return ja(n)&&!$a(n).n_()&&n.O_.length>0}function qV(n){$a(n).start()}function v7(n){return SC.apply(this,arguments)}function SC(){return(SC=(0,se.A)(function*(n){$a(n).p_()})).apply(this,arguments)}function I7(n){return RC.apply(this,arguments)}function RC(){return(RC=(0,se.A)(function*(n){const e=$a(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function E7(n,e,t){return PC.apply(this,arguments)}function PC(){return(PC=(0,se.A)(function*(n,e,t){const r=n.O_.shift(),i=BT.from(r,e,t);yield HV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield jd(n)})).apply(this,arguments)}function w7(n,e){return MC.apply(this,arguments)}function MC(){return MC=(0,se.A)(function*(n,e){var t;e&&$a(n).V_&&(yield(t=(0,se.A)(function*(i,s){if(S1(a=s.code)&&a!==Z.ABORTED){const o=i.O_.shift();$a(i).s_(),yield HV(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield jd(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),zV(n)&&qV(n)}),MC.apply(this,arguments)}function GV(n,e){return xC.apply(this,arguments)}function xC(){return(xC=(0,se.A)(function*(n,e){const t=Ee(n);t.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const r=ja(t);t.L_.add(3),yield Ud(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Zp(t)})).apply(this,arguments)}function NC(n,e){return OC.apply(this,arguments)}function OC(){return(OC=(0,se.A)(function*(n,e){const t=Ee(n);e?(t.L_.delete(2),yield Zp(t)):e||(t.L_.add(2),yield Ud(t),t.q_.set("Unknown"))})).apply(this,arguments)}function $d(n){return n.K_||(n.K_=function(t,r,i){const s=Ee(t);return s.w_(),new u7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:f7.bind(null,n),Ro:p7.bind(null,n),mo:g7.bind(null,n),d_:m7.bind(null,n)}),n.B_.push(function(){var e=(0,se.A)(function*(t){t?(n.K_.s_(),EC(n)?IC(n):n.q_.set("Unknown")):(yield n.K_.stop(),$V(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function $a(n){return n.U_||(n.U_=function(t,r,i){const s=Ee(t);return s.w_(),new c7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:v7.bind(null,n),mo:w7.bind(null,n),f_:I7.bind(null,n),g_:E7.bind(null,n)}),n.B_.push(function(){var e=(0,se.A)(function*(t){t?(n.U_.s_(),yield jd(n)):(yield n.U_.stop(),n.O_.length>0&&(he("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class kC{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new kC(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ce(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hd(n,e){if(jn("AsyncQueue",`${e}: ${n}`),Pa(n))return new ce(Z.UNAVAILABLE,`${e}: ${n}`);throw n}class zd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=kp(),this.sortedSet=new nn(this.comparator)}static emptySet(e){return new zd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new zd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class WV{constructor(){this.W_=new nn(Te.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):xe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class qd{constructor(e,t,r,i,s,o,a,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new qd(e,t,zd.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class A7{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class T7{constructor(){this.queries=KV(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Ee(t),s=i.queries;i.queries=KV(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})}(this,new ce(Z.ABORTED,"Firestore shutting down"))}}function KV(){return new Fo(n=>c1(n),Np)}function VC(n,e){return FC.apply(this,arguments)}function FC(){return(FC=(0,se.A)(function*(n,e){const t=Ee(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new A7,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Hd(o,`Initialization of query '${Dd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&BC(t)})).apply(this,arguments)}function LC(n,e){return UC.apply(this,arguments)}function UC(){return(UC=(0,se.A)(function*(n,e){const t=Ee(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function C7(n,e){const t=Ee(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&BC(t)}function D7(n,e,t){const r=Ee(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function BC(n){n.Y_.forEach(e=>{e.next()})}var jC,QV;(QV=jC||(jC={})).ea="default",QV.Cache="cache";class $C{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new qd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=qd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==jC.Cache}}class b7{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class YV{constructor(e){this.serializer=e}Es(e){return qs(this.serializer,e)}ds(e){return e.metadata.exists?z1(this.serializer,e.document,!1):ln.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return $n(e)}}class S7{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=JV(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=mt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new YV(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||st()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,se.A)(function*(){const t=yield function n7(n,e,t,r){return cC.apply(this,arguments)}(e.localStore,new YV(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield r7(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function JV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ZV{constructor(e){this.key=e}}class XV{constructor(e){this.key=e}}class eF{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=st(),this.mutatedKeys=st(),this.Aa=d1(e),this.Ra=new zd(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new WV,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,m)=>{const v=i.get(g),w=Op(this.query,m)?m:null,T=!!v&&this.mutatedKeys.has(v.key),D=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;v&&w?v.data.isEqual(w.data)?T!==D&&(r.track({type:3,doc:w}),M=!0):this.ga(v,w)||(r.track({type:2,doc:w}),M=!0,(u&&this.Aa(w,u)>0||d&&this.Aa(w,d)<0)&&(a=!0)):!v&&w?(r.track({type:0,doc:w}),M=!0):v&&!w&&(r.track({type:1,doc:v}),M=!0,(u||d)&&(a=!0)),M&&(w?(o=o.add(w),s=D?s.add(g):s.delete(g)):(o=o.delete(g),s=s.delete(g)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const g="F"===this.query.limitType?o.last():o.first();o=o.delete(g.key),s=s.delete(g.key),r.track({type:1,doc:g})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((g,m)=>function(w,T){const D=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return D(w)-D(T)}(g.type,m.type)||this.Aa(g.doc,m.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],u=0===this.da.size&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,0!==o.length||d?{snapshot:new qd(this.query,e.Ra,s,o,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new WV,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=st(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new XV(r))}),this.da.forEach(r=>{e.has(r)||t.push(new ZV(r))}),t}ba(e){this.Ta=e.Ts,this.da=st();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return qd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class R7{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class P7{constructor(e){this.key=e,this.va=!1}}class M7{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Fo(a=>c1(a),Np),this.Ma=new Map,this.xa=new Set,this.Oa=new nn(Te.comparator),this.Na=new Map,this.La=new tC,this.Ba={},this.ka=new Map,this.qa=ac.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function x7(n,e){return HC.apply(this,arguments)}function HC(){return(HC=(0,se.A)(function*(n,e,t=!0){const r=_v(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield tF(r,e,t,!0),i})).apply(this,arguments)}function N7(n,e){return zC.apply(this,arguments)}function zC(){return(zC=(0,se.A)(function*(n,e){const t=_v(n);yield tF(t,e,!0,!1)})).apply(this,arguments)}function tF(n,e,t,r){return qC.apply(this,arguments)}function qC(){return(qC=(0,se.A)(function*(n,e,t,r){const i=yield Fd(n.localStore,Fr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield GC(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&gv(n.remoteStore,i),a})).apply(this,arguments)}function GC(n,e,t,r,i){return WC.apply(this,arguments)}function WC(){return WC=(0,se.A)(function*(n,e,t,r,i){n.Ka=(m,v,w)=>{return(T=(0,se.A)(function*(M,G,F,K){let ae=G.view.ma(F);ae.ns&&(ae=yield lv(M.localStore,G.query,!1).then(({documents:b})=>G.view.ma(b,ae)));const ve=K&&K.targetChanges.get(G.targetId),Ve=K&&null!=K.targetMismatches.get(G.targetId),V=G.view.applyChanges(ae,M.isPrimaryClient,ve,Ve);return iD(M,G.targetId,V.wa),V.snapshot}),function D(M,G,F,K){return T.apply(this,arguments)})(n,m,v,w);var T};const s=yield lv(n.localStore,e,!0),o=new eF(e,s.Ts),a=o.ma(s.documents),u=jp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),d=o.applyChanges(a,n.isPrimaryClient,u);iD(n,t,d.wa);const g=new R7(e,t,o);return n.Fa.set(e,g),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot}),WC.apply(this,arguments)}function O7(n,e,t){return KC.apply(this,arguments)}function KC(){return(KC=(0,se.A)(function*(n,e,t){const r=Ee(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Np(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ld(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Bd(r.remoteStore,i.targetId),Gd(r,i.targetId)}).catch(Ra))):(Gd(r,i.targetId),yield Ld(r.localStore,i.targetId,!0))})).apply(this,arguments)}function k7(n,e){return QC.apply(this,arguments)}function QC(){return(QC=(0,se.A)(function*(n,e){const t=Ee(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Bd(t.remoteStore,r.targetId))})).apply(this,arguments)}function YC(){return(YC=(0,se.A)(function*(n,e,t){const r=gD(n);try{const i=yield function(o,a){const u=Ee(o),d=gn.now(),g=a.reduce((w,T)=>w.add(T.key),st());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let T=yi(),D=st();return u.cs.getEntries(w,g).next(M=>{T=M,T.forEach((G,F)=>{F.isValidDocument()||(D=D.add(G))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,T)).next(M=>{m=M;const G=[];for(const F of a){const K=uK(F,m.get(F.key).overlayedDocument);null!=K&&G.push(new Lo(F.key,K,Wk(K.value.mapValue),_n.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,G,a)}).next(M=>{v=M;const G=M.applyToLocalDocumentSet(m,D);return u.documentOverlayCache.saveOverlays(w,M.batchId,G)})}).then(()=>({batchId:v.batchId,changes:f1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new nn(Je)),d=d.insert(a,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,t),yield Bo(r,i.changes),yield jd(r.remoteStore)}catch(i){const s=Hd(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function nF(n,e){return JC.apply(this,arguments)}function JC(){return(JC=(0,se.A)(function*(n,e){const t=Ee(n);try{const r=yield function e7(n,e){const t=Ee(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((g,m)=>{const v=i.get(m);if(!v)return;a.push(t.Ur.removeMatchingKeys(s,g.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(s,g.addedDocuments,m)));let w=v.withSequenceNumber(s.currentSequenceNumber);var D,M,G;null!==e.targetMismatches.get(m)?w=w.withResumeToken(On.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,r)),i=i.insert(m,w),M=w,G=g,(0===(D=v).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8||G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,w))});let u=yi(),d=st();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))}),a.push(MV(s,o,e.documentUpdates).next(g=>{u=g.Ps,d=g.Is})),!r.isEqual(Fe.min())){const g=t.Ur.getLastRemoteSnapshotVersion(s).next(m=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(g)}return z.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Oe(o.va):i.removedDocuments.size>0&&(Oe(o.va),o.va=!1))}),yield Bo(t,r,e)}catch(r){yield Ra(r)}})).apply(this,arguments)}function rF(n,e,t){const r=Ee(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Ee(o);u.onlineState=a;let d=!1;u.queries.forEach((g,m)=>{for(const v of m.j_)v.Z_(a)&&(d=!0)}),d&&BC(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function F7(n,e,t){return ZC.apply(this,arguments)}function ZC(){return(ZC=(0,se.A)(function*(n,e,t){const r=Ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new nn(Te.comparator);o=o.insert(s,ln.newNoDocument(s,Fe.min()));const a=st().add(s),u=new Bp(Fe.min(),new Map,new nn(Je),o,a);yield nF(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),sD(r)}else yield Ld(r.localStore,e,!1).then(()=>Gd(r,e,t)).catch(Ra)})).apply(this,arguments)}function L7(n,e){return XC.apply(this,arguments)}function XC(){return(XC=(0,se.A)(function*(n,e){const t=Ee(n),r=e.batch.batchId;try{const i=yield function XK(n,e){const t=Ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,d,g){const m=d.batch,v=m.keys();let w=z.resolve();return v.forEach(T=>{w=w.next(()=>g.getEntry(u,T)).next(D=>{const M=d.docVersions.get(T);Oe(null!==M),D.version.compareTo(M)<0&&(m.applyToRemoteDocument(D,d),D.isValidDocument()&&(D.setReadTime(d.commitVersion),g.addEntry(D)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=st();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);rD(t,r,null),nD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Bo(t,i)}catch(i){yield Ra(i)}})).apply(this,arguments)}function U7(n,e,t){return eD.apply(this,arguments)}function eD(){return(eD=(0,se.A)(function*(n,e,t){const r=Ee(n);try{const i=yield function(o,a){const u=Ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return u.mutationQueue.lookupMutationBatch(d,a).next(m=>(Oe(null!==m),g=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,g,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>u.localDocuments.getDocuments(d,g))})}(r.localStore,e);rD(r,e,t),nD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Bo(r,i)}catch(i){yield Ra(i)}})).apply(this,arguments)}function tD(){return(tD=(0,se.A)(function*(n,e){const t=Ee(n);ja(t.remoteStore)||he("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ee(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=Hd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function nD(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function rD(n,e,t){const r=Ee(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Gd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||iF(n,r)})}function iF(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(Bd(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),sD(n))}function iD(n,e,t){for(const r of t)r instanceof ZV?(n.La.addReference(r.key,e),j7(n,r)):r instanceof XV?(he("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||iF(n,r.key)):xe()}function j7(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(he("SyncEngine","New document in limbo: "+t),n.xa.add(r),sD(n))}function sD(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Te(mt.fromString(e)),r=n.qa.next();n.Na.set(r,new P7(t)),n.Oa=n.Oa.insert(t,r),gv(n.remoteStore,new Uo(Fr(Td(t.path)),r,"TargetPurposeLimboResolution",Vi.oe))}}function Bo(n,e,t){return oD.apply(this,arguments)}function oD(){return oD=(0,se.A)(function*(n,e,t){const r=Ee(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,t).then(d=>{var g;if((d||t)&&r.isPrimaryClient){const m=d?!d.fromCache:null===(g=t?.targetChanges.get(u.targetId))||void 0===g?void 0:g.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=oC.Wi(u.targetId,d);s.push(m)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,se.A)(function*(d,g){const m=Ee(d);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>z.forEach(g,w=>z.forEach(w.$i,T=>m.persistence.referenceDelegate.addReference(v,w.targetId,T)).next(()=>z.forEach(w.Ui,T=>m.persistence.referenceDelegate.removeReference(v,w.targetId,T)))))}catch(v){if(!Pa(v))throw v;he("LocalStore","Failed to update sequence numbers: "+v)}for(const v of g){const w=v.targetId;if(!v.fromCache){const T=m.os.get(w),M=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);m.os=m.os.insert(w,M)}}}),function u(d,g){return a.apply(this,arguments)})(r.localStore,s))}),oD.apply(this,arguments)}function $7(n,e){return aD.apply(this,arguments)}function aD(){return(aD=(0,se.A)(function*(n,e){const t=Ee(n);if(!t.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const r=yield RV(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(u=>{u.reject(new ce(Z.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bo(t,r.hs)}var s})).apply(this,arguments)}function H7(n,e){const t=Ee(n),r=t.Na.get(e);if(r&&r.va)return st().add(r.key);{let i=st();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function z7(n,e){return uD.apply(this,arguments)}function uD(){return(uD=(0,se.A)(function*(n,e){const t=Ee(n),r=yield lv(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&iD(t,e.targetId,i.wa),i})).apply(this,arguments)}function q7(n,e){return cD.apply(this,arguments)}function cD(){return(cD=(0,se.A)(function*(n,e){const t=Ee(n);return NV(t.localStore,e).then(r=>Bo(t,r))})).apply(this,arguments)}function G7(n,e,t,r){return lD.apply(this,arguments)}function lD(){return(lD=(0,se.A)(function*(n,e,t,r){const i=Ee(n),s=yield function(a,u){const d=Ee(a),g=Ee(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",m=>g.Mn(m,u).next(v=>v?d.localDocuments.getDocuments(m,v):z.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield jd(i.remoteStore):"acknowledged"===t||"rejected"===t?(rD(i,e,r||null),nD(i,e),u=e,Ee(Ee(i.localStore).mutationQueue).On(u)):xe(),yield Bo(i,s)):he("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function dD(){return(dD=(0,se.A)(function*(n,e){const t=Ee(n);if(_v(t),gD(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield sF(t,r.toArray());t.Qa=!0,yield NC(t.remoteStore,!0);for(const s of i)gv(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Gd(t,o),Ld(t.localStore,o,!0))),Bd(t.remoteStore,o)}),yield i,yield sF(t,r),function(o){const a=Ee(o);a.Na.forEach((u,d)=>{Bd(a.remoteStore,d)}),a.La.pr(),a.Na=new Map,a.Oa=new nn(Te.comparator)}(t),t.Qa=!1,yield NC(t.remoteStore,!1)}})).apply(this,arguments)}function sF(n,e,t){return hD.apply(this,arguments)}function hD(){return(hD=(0,se.A)(function*(n,e,t){const r=Ee(n),i=[],s=[];for(const o of e){let a;const u=r.Ma.get(o);if(u&&0!==u.length){a=yield Fd(r.localStore,Fr(u[0]));for(const d of u){const g=r.Fa.get(d),m=yield z7(r,g);m.snapshot&&s.push(m.snapshot)}}else{const d=yield xV(r.localStore,o);a=yield Fd(r.localStore,d),yield GC(r,oF(d),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function oF(n){return s1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function K7(n){return t=Ee(n).localStore,Ee(Ee(t).persistence).Qi();var t}function Q7(n,e,t,r){return fD.apply(this,arguments)}function fD(){return(fD=(0,se.A)(function*(n,e,t,r){const i=Ee(n);if(i.Qa)return void he("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield NV(i.localStore,l1(s[0])),a=Bp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,On.EMPTY_BYTE_STRING);yield Bo(i,o,a);break}case"rejected":yield Ld(i.localStore,e,!0),Gd(i,e,r);break;default:xe()}})).apply(this,arguments)}function Y7(n,e,t){return pD.apply(this,arguments)}function pD(){return(pD=(0,se.A)(function*(n,e,t){const r=_v(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){he("SyncEngine","Adding an already active target "+i);continue}const s=yield xV(r.localStore,i),o=yield Fd(r.localStore,s);yield GC(r,oF(s),o.targetId,!1,o.resumeToken),gv(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield Ld(r.localStore,i,!1).then(()=>{Bd(r.remoteStore,i),Gd(r,i)}).catch(Ra))}})).apply(this,arguments)}function _v(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=H7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F7.bind(null,e),e.Ca.d_=C7.bind(null,e.eventManager),e.Ca.$a=D7.bind(null,e.eventManager),e}function gD(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=U7.bind(null,e),e}let Wd=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,se.A)(function*(){r.serializer=Jp(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return SV(this.persistence,new bV,t.initialUser,this.serializer)}Ga(t){return new nC(av.Zr,this.serializer)}Wa(t){return new FV}terminate(){var t=this;return(0,se.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class mD extends Wd{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,se.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield gD(r.Ja.syncEngine),yield jd(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return SV(this.persistence,new bV,e.initialUser,this.serializer)}ja(e,t){return new yV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new v8(t,this.persistence);return new y8(e.asyncQueue,r)}Ga(e){const t=sC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Lr.withCacheSize(this.cacheSizeBytes):Lr.DEFAULT;return new iC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,UV(),pv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new FV}}class aF extends mD{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,se.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof pC&&(r.sharedClientState.syncEngine={no:G7.bind(null,i),ro:Q7.bind(null,i),io:Y7.bind(null,i),Qi:K7.bind(null,i),eo:q7.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,se.A)(function*(o){yield function W7(n,e){return dD.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=UV();if(!pC.D(t))throw new ce(Z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=sC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let Kd=(()=>{class n{initialize(t,r){var i=this;return(0,se.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>rF(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=$7.bind(null,i.syncEngine),yield NC(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new T7}createDatastore(t){const r=Jp(t.databaseInfo.databaseId),i=new a7(t.databaseInfo);return new l7(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>rF(this.syncEngine,r,0),u=LV.D()?new LV:new i7,new h7(i,s,o,a,u);var i,s,o,a,u}createSyncEngine(t,r){return function(s,o,a,u,d,g,m){const v=new M7(s,o,a,u,d,g);return m&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,se.A)(function*(){var r,i,s;yield(s=(0,se.A)(function*(a){const u=Ee(a);he("RemoteStore","RemoteStore shutting down."),u.L_.add(5),yield Ud(u),u.k_.shutdown(),u.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function uF(n,e=10240){let t=0;return{read:()=>(0,se.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,se.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class yv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):jn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class X7{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new dr,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,se.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,se.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,se.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new b7(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,se.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,se.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,se.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class eQ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,se.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ce(Z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,se.A)(function*(o,a){const u=Ee(o),d={documents:a.map(w=>$p(u.serializer,w))},g=yield u.Lo("BatchGetDocuments",u.serializer.databaseId,mt.emptyPath(),d,a.length),m=new Map;g.forEach(w=>{const T=function _K(n,e){return"found"in e?function(r,i){Oe(!!i.found);const s=qs(r,i.found.name),o=$n(i.found.updateTime),a=i.found.createTime?$n(i.found.createTime):Fe.min(),u=new wr({mapValue:{fields:i.found.fields}});return ln.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){Oe(!!i.missing),Oe(!!i.readTime);const s=qs(r,i.missing),o=$n(i.readTime);return ln.newNoDocument(s,o)}(n,e):xe()}(u.serializer,w);m.set(T.key.toString(),T)});const v=[];return a.forEach(w=>{const T=m.get(w.toString());Oe(!!T),v.push(T)}),v}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,se.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Te.fromPath(i);e.mutations.push(new LT(s,e.precondition(s)))}),yield(r=(0,se.A)(function*(s,o){const a=Ee(s),u={writes:o.map(d=>Hp(a.serializer,d))};yield a.Mo("Commit",a.serializer.databaseId,mt.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xe();t=Fe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ce(Z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Fe.min())?_n.exists(!1):_n.updateTime(t):_n.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fe.min()))throw new ce(Z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _n.updateTime(t)}return _n.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class tQ{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new mC(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,se.A)(function*(){const t=new eQ(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!Cp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!S1(t)}return!1}}class nQ{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=lr.UNAUTHENTICATED,this.clientId=vk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,se.A)(function*(u){he("FirestoreClient","Received user=",u.uid),yield o.authCredentialListener(u),o.user=u});return function(u){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(he("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,se.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Hd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function _D(n,e){return yD.apply(this,arguments)}function yD(){return yD=(0,se.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,se.A)(function*(s){r.isEqual(s)||(yield RV(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),yD.apply(this,arguments)}function cF(n,e){return vD.apply(this,arguments)}function vD(){return(vD=(0,se.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ID(n);he("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>GV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>GV(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function ID(n){return ED.apply(this,arguments)}function ED(){return(ED=(0,se.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{yield _D(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Oi("Error using user provided cache. Falling back to memory cache: "+e),yield _D(n,new Wd)}}else he("FirestoreClient","Using default OfflineComponentProvider"),yield _D(n,new Wd);var i;return n._offlineComponents})).apply(this,arguments)}function vv(n){return wD.apply(this,arguments)}function wD(){return(wD=(0,se.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),yield cF(n,n._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),yield cF(n,new Kd))),n._onlineComponents})).apply(this,arguments)}function lF(n){return ID(n).then(e=>e.persistence)}function Qd(n){return ID(n).then(e=>e.localStore)}function dF(n){return vv(n).then(e=>e.remoteStore)}function AD(n){return vv(n).then(e=>e.syncEngine)}function Yd(n){return TD.apply(this,arguments)}function TD(){return(TD=(0,se.A)(function*(n){const e=yield vv(n),t=e.eventManager;return t.onListen=x7.bind(null,e.syncEngine),t.onUnlisten=O7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=N7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=k7.bind(null,e.syncEngine),t})).apply(this,arguments)}function fF(n,e,t={}){const r=new dr;return n.asyncQueue.enqueueAndForget((0,se.A)(function*(){return function(s,o,a,u,d){const g=new yv({next:v=>{g.Za(),o.enqueueAndForget(()=>LC(s,m));const w=v.docs.has(a);!w&&v.fromCache?d.reject(new ce(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&u&&"server"===u.source?d.reject(new ce(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new $C(Td(a.path),g,{includeMetadataChanges:!0,_a:!0});return VC(s,m)}(yield Yd(n),n.asyncQueue,e,t,r)})),r.promise}function pF(n,e,t={}){const r=new dr;return n.asyncQueue.enqueueAndForget((0,se.A)(function*(){return function(s,o,a,u,d){const g=new yv({next:v=>{g.Za(),o.enqueueAndForget(()=>LC(s,m)),v.fromCache&&"server"===u.source?d.reject(new ce(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new $C(a,g,{includeMetadataChanges:!0,_a:!0});return VC(s,m)}(yield Yd(n),n.asyncQueue,e,t,r)})),r.promise}function gF(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const mF=new Map;function CD(n,e,t){if(!t)throw new ce(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _F(n,e,t,r){if(!0===e&&!0===r)throw new ce(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yF(n){if(!Te.isDocumentKey(n))throw new ce(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vF(n){if(Te.isDocumentKey(n))throw new ce(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Iv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":xe()}function pt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Iv(n);throw new ce(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function IF(n,e){if(e<=0)throw new ce(Z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class EF{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ce(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ce(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_F("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=gF(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EF({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ce(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EF(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new o8;switch(r.type){case"firstParty":return new l8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,se.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=mF.get(t);r&&(he("ComponentProvider","Removing Datastore"),mF.delete(t),r.terminate())}(this),Promise.resolve()}}class Ar{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ar(this.firestore,e,this._query)}}class dn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dn(this.firestore,e,this._key)}}class Gs extends Ar{constructor(e,t,r){super(e,t,Td(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new Te(e))}withConverter(e){return new Gs(this.firestore,e,this._path)}}function AF(n,e,...t){if(n=(0,xt.Ku)(n),CD("collection","path",e),n instanceof Xp){const r=mt.fromString(e,...t);return vF(r),new Gs(n,null,r)}{if(!(n instanceof dn||n instanceof Gs))throw new ce(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mt.fromString(e,...t));return vF(r),new Gs(n.firestore,null,r)}}function Ev(n,e,...t){if(n=(0,xt.Ku)(n),1===arguments.length&&(e=vk.newId()),CD("doc","path",e),n instanceof Xp){const r=mt.fromString(e,...t);return yF(r),new dn(n,null,new Te(r))}{if(!(n instanceof dn||n instanceof Gs))throw new ce(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mt.fromString(e,...t));return yF(r),new dn(n.firestore,n instanceof Gs?n.converter:null,new Te(r))}}function TF(n,e){return n=(0,xt.Ku)(n),e=(0,xt.Ku)(e),(n instanceof dn||n instanceof Gs)&&(e instanceof dn||e instanceof Gs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function DD(n,e){return n=(0,xt.Ku)(n),e=(0,xt.Ku)(e),n instanceof Ar&&e instanceof Ar&&n.firestore===e.firestore&&Np(n._query,e._query)&&n.converter===e.converter}class CF{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new mC(this,"async_queue_retry"),this.Vu=()=>{const r=pv();r&&he("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=pv();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=pv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new dr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,se.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!Pa(t))throw t;he("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,jn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=kC.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&xe()}verifyOperationInProgress(){}wu(){var e=this;return(0,se.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function bD(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class gQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Gt extends Xp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new CF,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,se.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new CF(t),e._firestoreClient=void 0,yield t}})()}}function yn(n){if(n._terminated)throw new ce(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||DF(n),n._firestoreClient}function DF(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new j8(n._databaseId,u,n._persistenceKey,(g=i).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,gF(g.experimentalLongPollingOptions),g.useFetchStreams));var u,g;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new nQ(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function SD(){return(SD=(0,se.A)(function*(n){Oi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();bF(n,Kd.provider,{build:t=>new aF(t,e.cacheSizeBytes)})})).apply(this,arguments)}function bF(n,e,t){if((n=pt(n,Gt))._firestoreClient||n._terminated)throw new ce(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ce(Z.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},DF(n)}class Ws{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ws(On.fromBase64String(e))}catch(t){throw new ce(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ws(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class jo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ce(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cc{constructor(e){this._methodName=e}}class wv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}}class Av{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const DQ=/^__.*__$/;class bQ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Lo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rd(e,this.data,t,this.fieldTransforms)}}class SF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Lo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function RF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class Tv{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Tv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(RF(this.Cu)&&DQ.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class SQ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Jp(e)}Qu(e,t,r,i=!1){return new Tv({Cu:e,methodName:t,qu:r,path:cn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lc(n){const e=n._freezeSettings(),t=Jp(n._databaseId);return new SQ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Cv(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);kD("Data must be an object, but it was:",o,r);const a=xF(r,o);let u,d;if(s.merge)u=new _i(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const g=[];for(const m of s.mergeFields){const v=ng(e,m,t);if(!o.contains(v))throw new ce(Z.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);OF(g,v)||g.push(v)}u=new _i(g),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new bQ(new wr(a),u,d)}class tg extends cc{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tg}}function PF(n,e,t){return new Tv({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class RD extends cc{_toFieldTransform(e){return new Fp(e.path,new bd)}isEqual(e){return e instanceof RD}}class PD extends cc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=PF(this,e,!0),r=this.Ku.map(s=>dc(s,t)),i=new ec(r);return new Fp(e.path,i)}isEqual(e){return e instanceof PD&&(0,xt.bD)(this.Ku,e.Ku)}}class MD extends cc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=PF(this,e,!0),r=this.Ku.map(s=>dc(s,t)),i=new tc(r);return new Fp(e.path,i)}isEqual(e){return e instanceof MD&&(0,xt.bD)(this.Ku,e.Ku)}}class xD extends cc{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Sd(e.serializer,m1(e.serializer,this.$u));return new Fp(e.path,t)}isEqual(e){return e instanceof xD&&this.$u===e.$u}}function ND(n,e,t,r){const i=n.Qu(1,e,t);kD("Data must be an object, but it was:",i,r);const s=[],o=wr.empty();Ma(r,(u,d)=>{const g=Dv(e,u,t);d=(0,xt.Ku)(d);const m=i.Nu(g);if(d instanceof tg)s.push(g);else{const v=dc(d,m);null!=v&&(s.push(g),o.set(g,v))}});const a=new _i(s);return new SF(o,a,i.fieldTransforms)}function OD(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[ng(e,r,t)],u=[i];if(s.length%2!=0)throw new ce(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(ng(e,s[v])),u.push(s[v+1]);const d=[],g=wr.empty();for(let v=a.length-1;v>=0;--v)if(!OF(d,a[v])){const w=a[v];let T=u[v];T=(0,xt.Ku)(T);const D=o.Nu(w);if(T instanceof tg)d.push(w);else{const M=dc(T,D);null!=M&&(d.push(w),g.set(w,M))}}const m=new _i(d);return new SF(g,m,o.fieldTransforms)}function MF(n,e,t,r=!1){return dc(t,n.Qu(r?4:3,e))}function dc(n,e){if(NF(n=(0,xt.Ku)(n)))return kD("Unsupported field value:",e,n),xF(n,e);if(n instanceof cc)return function(r,i){if(!RF(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=dc(a,i.Lu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,xt.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return m1(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=gn.fromDate(r);return{timestampValue:Md(i.serializer,s)}}if(r instanceof gn){const s=new gn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Md(i.serializer,s)}}if(r instanceof wv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ws)return{bytesValue:L1(i.serializer,r._byteString)};if(r instanceof dn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:zT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Av)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.Bu("VectorValues must only contain numeric values.");return FT(a.serializer,u)})}}}}};var a;throw i.Bu(`Unsupported field value: ${Iv(r)}`)}(n,e)}function xF(n,e){const t={};return Vk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ma(n,(r,i)=>{const s=dc(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function NF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof gn||n instanceof wv||n instanceof Ws||n instanceof dn||n instanceof cc||n instanceof Av)}function kD(n,e,t){if(!NF(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Iv(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function ng(n,e,t){if((e=(0,xt.Ku)(e))instanceof jo)return e._internalPath;if("string"==typeof e)return Dv(n,e);throw bv("Field path arguments must be of type string or ",n,!1,void 0,t)}const RQ=new RegExp("[~\\*/\\[\\]]");function Dv(n,e,t){if(e.search(RQ)>=0)throw bv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jo(...e.split("."))._internalPath}catch{throw bv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bv(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ce(Z.INVALID_ARGUMENT,a+n+u)}function OF(n,e){return n.some(t=>t.isEqual(e))}class rg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new PQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class PQ extends rg{data(){return super.data()}}function Sv(n,e){return"string"==typeof e?Dv(n,e):e instanceof jo?e._internalPath:e._delegate._internalPath}function kF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ce(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VD{}class ig extends VD{}function Ha(n,e,...t){let r=[];e instanceof VD&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof Jd).length,a=s.filter(u=>u instanceof sg).length;if(o>1||o>0&&a>0)throw new ce(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class sg extends ig{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new sg(e,t,r)}_apply(e){const t=this._parse(e);return UF(e._query,t),new Ar(e.firestore,e.converter,kT(e._query,t))}_parse(e){const t=lc(e.firestore);return function(s,o,a,u,d,g,m){let v;if(d.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new ce(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){LF(m,g);const w=[];for(const T of m)w.push(FF(u,s,T));v={arrayValue:{values:w}}}else v=FF(u,s,m)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||LF(m,g),v=MF(a,"where",m,"in"===g||"not-in"===g);return _t.create(d,g,v)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Jd extends VD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jd(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Bt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)UF(o,u),o=kT(o,u)}(e._query,t),new Ar(e.firestore,e.converter,kT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class FD extends ig{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new FD(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new ce(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ce(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mp(s,o)}(e._query,this._field,this._direction);return new Ar(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Vo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Rv extends ig{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Rv(e,t,r)}_apply(e){return new Ar(e.firestore,e.converter,Wy(e._query,this._limit,this._limitType))}}class Pv extends ig{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Pv(e,t,r)}_apply(e){const t=VF(e,this.type,this._docOrFields,this._inclusive);return new Ar(e.firestore,e.converter,(s=t,new Vo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Mv extends ig{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Mv(e,t,r)}_apply(e){const t=VF(e,this.type,this._docOrFields,this._inclusive);return new Ar(e.firestore,e.converter,(s=t,new Vo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function VF(n,e,t,r){if(t[0]=(0,xt.Ku)(t[0]),t[0]instanceof rg)return function(s,o,a,u,d){if(!u)throw new ce(Z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const g=[];for(const m of Cd(s))if(m.field.isKeyField())g.push(Zu(o,u.key));else{const v=u.data.field(m.field);if(Uy(v))throw new ce(Z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===v){const w=m.field.canonicalString();throw new ce(Z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}g.push(v)}return new Va(g,d)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=lc(n.firestore);return function(o,a,u,d,g,m){const v=o.explicitOrderBy;if(g.length>v.length)throw new ce(Z.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let T=0;T<g.length;T++){const D=g[T];if(v[T].field.isKeyField()){if("string"!=typeof D)throw new ce(Z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof D}`);if(!OT(o)&&-1!==D.indexOf("/"))throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${D}' contains a slash.`);const M=o.path.child(mt.fromString(D));if(!Te.isDocumentKey(M))throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const G=new Te(M);w.push(Zu(a,G))}else{const M=MF(u,d,D);w.push(M)}}return new Va(w,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function FF(n,e,t){if("string"==typeof(t=(0,xt.Ku)(t))){if(""===t)throw new ce(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OT(e)&&-1!==t.indexOf("/"))throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mt.fromString(t));if(!Te.isDocumentKey(r))throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zu(n,new Te(r))}if(t instanceof dn)return Zu(n,t._key);throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iv(t)}.`)}function LF(n,e){if(!Array.isArray(n)||0===n.length)throw new ce(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UF(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ce(Z.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class LD{convertValue(e,t="none"){switch(Oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ko(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ma(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>mn(o.doubleValue));return new Av(s)}convertGeoPoint(e){return new wv(mn(e.latitude),mn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=By(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(bp(e));default:return null}}convertTimestamp(e){const t=Oo(e);return new gn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mt.fromString(e);Oe(Y1(r));const i=new xa(r.get(1),r.get(3)),s=new Te(r.popFirst(5));return i.isEqual(t)||jn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function xv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class UQ extends LD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ws(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,t)}}class hc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $o extends rg{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new og(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Sv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class og extends $o{data(e={}){return super.data(e)}}class za{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new hc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new og(this._firestore,this._userDataWriter,r.key,r,new hc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new og(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new og(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,g=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),g=o.indexOf(a.doc.key)),{type:jQ(a.type),doc:u,oldIndex:d,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function jQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}function jF(n,e){return n instanceof $o&&e instanceof $o?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof za&&e instanceof za&&n._firestore===e._firestore&&DD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class qa extends LD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ws(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,t)}}function $F(n,e,t){n=pt(n,dn);const r=pt(n.firestore,Gt),i=xv(n.converter,e,t);return Zd(r,[Cv(lc(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,_n.none())])}function HF(n,e,t,...r){n=pt(n,dn);const i=pt(n.firestore,Gt),s=lc(i);let o;return o="string"==typeof(e=(0,xt.Ku)(e))||e instanceof jo?OD(s,"updateDoc",n._key,e,t,r):ND(s,"updateDoc",n._key,e),Zd(i,[o.toMutation(n._key,_n.exists(!0))])}function zF(n,...e){var t,r,i;n=(0,xt.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||bD(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(bD(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,d,g;if(n instanceof dn)d=pt(n.firestore,Gt),g=Td(n._key.path),u={next:m=>{e[o]&&e[o](UD(d,n,m))},error:e[o+1],complete:e[o+2]};else{const m=pt(n,Ar);d=pt(m.firestore,Gt),g=m._query;const v=new qa(d);u={next:w=>{e[o]&&e[o](new za(d,v,m,w))},error:e[o+1],complete:e[o+2]},kF(n._query)}return function(v,w,T,D){const M=new yv(D),G=new $C(w,M,T);return v.asyncQueue.enqueueAndForget((0,se.A)(function*(){return VC(yield Yd(v),G)})),()=>{M.Za(),v.asyncQueue.enqueueAndForget((0,se.A)(function*(){return LC(yield Yd(v),G)}))}}(yn(d),g,a,u)}function Zd(n,e){return function(r,i){const s=new dr;return r.asyncQueue.enqueueAndForget((0,se.A)(function*(){return function V7(n,e,t){return YC.apply(this,arguments)}(yield AD(r),i,s)})),s.promise}(yn(n),e)}function UD(n,e,t){const r=t.docs.get(e._key),i=new qa(n);return new $o(n,i,e._key,r,new hc(t.hasPendingWrites,t.fromCache),e.converter)}const sY={maxAttempts:5};class qF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lc(e)}set(e,t,r){this._verifyNotCommitted();const i=Ga(e,this._firestore),s=xv(i.converter,t,r),o=Cv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,_n.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Ga(e,this._firestore);let o;return o="string"==typeof(t=(0,xt.Ku)(t))||t instanceof jo?OD(this._dataReader,"WriteBatch.update",s._key,t,r,i):ND(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,_n.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ga(e,this._firestore);return this._mutations=this._mutations.concat(new Pd(t._key,_n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ga(n,e){if((n=(0,xt.Ku)(n)).firestore!==e)throw new ce(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class oY extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=lc(t)}get(t){const r=Ga(t,this._firestore),i=new UQ(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return xe();const o=s[0];if(o.isFoundDocument())return new rg(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new rg(this._firestore,i,r._key,null,r.converter);throw xe()})}set(t,r,i){const s=Ga(t,this._firestore),o=xv(s.converter,r,i),a=Cv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Ga(t,this._firestore);let a;return a="string"==typeof(r=(0,xt.Ku)(r))||r instanceof jo?OD(this._dataReader,"Transaction.update",o._key,r,i,s):ND(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Ga(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ga(e,this._firestore),r=new qa(this._firestore);return super.get(e).then(i=>new $o(this._firestore,r,t._key,i._document,new hc(!1,!1),t.converter))}}function jD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function QF(){if(typeof Uint8Array>"u")throw new ce("unimplemented","Uint8Arrays are not available in this environment.")}function YF(){if(!function U8(){return typeof atob<"u"}())throw new ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){md=fd.SDK_VERSION,(0,fd._registerComponent)(new ak.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Gt(new u8(r.getProvider("auth-internal")),new d8(r.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ce(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xa(d.options.projectId,g)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,fd.registerVersion)(mk,"4.7.3",e),(0,fd.registerVersion)(mk,"4.7.3","esm2017")}();class ag{constructor(e){this._delegate=e}static fromBase64String(e){return YF(),new ag(Ws.fromBase64String(e))}static fromUint8Array(e){return QF(),new ag(Ws.fromUint8Array(e))}toBase64(){return YF(),this._delegate.toBase64()}toUint8Array(){return QF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function $D(n){return function mY(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class _Y{enableIndexedDbPersistence(e,t){return function _Q(n,e){Oi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return bF(n,Kd.provider,{build:r=>new mD(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function yQ(n){return SD.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function vQ(n){if(n._initialized&&!n._terminated)throw new ce(Z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new dr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,se.A)(function*(){try{yield(t=(0,se.A)(function*(i){if(!js.D())return Promise.resolve();const s=i+"main";yield js.delete(s)}),function r(i){return t.apply(this,arguments)})(sC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class JF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof xa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Oi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function wF(n,e,t,r={}){var i;const s=(n=pt(n,Xp))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=lr.MOCK_USER;else{a=(0,xt.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ce(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new lr(d)}n._authCredentials=new a8(new _k(a,u))}}(this._delegate,e,t,r)}enableNetwork(){return function EQ(n){return function rQ(n){return n.asyncQueue.enqueue((0,se.A)(function*(){const e=yield lF(n),t=yield dF(n);return e.setNetworkEnabled(!0),function(i){const s=Ee(i);return s.L_.delete(0),Zp(s)}(t)}))}(yn(n=pt(n,Gt)))}(this._delegate)}disableNetwork(){return function wQ(n){return function iQ(n){return n.asyncQueue.enqueue((0,se.A)(function*(){const e=yield lF(n),t=yield dF(n);return e.setNetworkEnabled(!1),(r=(0,se.A)(function*(s){const o=Ee(s);o.L_.add(0),yield Ud(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(yn(n=pt(n,Gt)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_F("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function IQ(n){return function(t){const r=new dr;return t.asyncQueue.enqueueAndForget((0,se.A)(function*(){return function B7(n,e){return tD.apply(this,arguments)}(yield AD(t),r)})),r.promise}(yn(n=pt(n,Gt)))}(this._delegate)}onSnapshotsInSync(e){return function YQ(n,e){return function uQ(n,e){const t=new yv(e);return n.asyncQueue.enqueueAndForget((0,se.A)(function*(){return i=yield Yd(n),s=t,Ee(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,se.A)(function*(){return i=yield Yd(n),s=t,void Ee(i).Y_.delete(s);var i,s}))}}(yn(n=pt(n,Gt)),bD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xd(this,AF(this._delegate,e))}catch(t){throw ni(t,"collection()","Firestore.collection()")}}doc(e){try{return new ts(this,Ev(this._delegate,e))}catch(t){throw ni(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ri(this,function pQ(n,e){if(n=pt(n,Xp),CD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ce(Z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ar(n,null,(r=e,new Vo(mt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw ni(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function aY(n,e,t){n=pt(n,Gt);const r=Object.assign(Object.assign({},sY),t);return function(s){if(s.maxAttempts<1)throw new ce(Z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new dr;return s.asyncQueue.enqueueAndForget((0,se.A)(function*(){const d=yield function hF(n){return vv(n).then(e=>e.datastore)}(s);new tQ(s.asyncQueue,d,a,o,u).au()})),u.promise}(yn(n),i=>e(new oY(n,i)),r)}(this._delegate,t=>e(new ZF(this,t)))}batch(){return yn(this._delegate),new XF(new qF(this._delegate,e=>Zd(this._delegate,e)))}loadBundle(e){return function AQ(n,e){const t=yn(n=pt(n,Gt)),r=new gQ;return function cQ(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?P1().encode(o):o,g=function(g,m){if(g instanceof Uint8Array)return uF(g,m);if(g instanceof ArrayBuffer)return uF(new Uint8Array(g),m);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new X7(g,a);var g}(t,Jp(e));n.asyncQueue.enqueueAndForget((0,se.A)(function*(){!function J7(n,e,t){const r=Ee(n);var i;(i=(0,se.A)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(T,D){const M=Ee(T),G=$n(D.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",F=>M.Gr.getBundleMetadata(F,D.id)).then(F=>!!F&&F.createTime.compareTo(G)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(T=d).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);u._updateProgress(JV(d));const g=new S7(d,o.localStore,a.serializer);let m=yield a.Ua();for(;m;){const w=yield g.la(m);w&&u._updateProgress(w),m=yield a.Ua()}const v=yield g.complete();return yield Bo(o,v.Ia,void 0),yield function(T,D){const M=Ee(T);return M.persistence.runTransaction("Save bundle","readwrite",G=>M.Gr.saveBundleMetadata(G,D))}(o.localStore,d),u._completeWith(v.progress),Promise.resolve(v.Pa)}catch(d){return Oi("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var T}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield AD(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function TQ(n,e){return function lQ(n,e){return n.asyncQueue.enqueue((0,se.A)(function*(){return function(r,i){const s=Ee(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield Qd(n),e)}))}(yn(n=pt(n,Gt)),e).then(t=>t?new Ar(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ri(this,t):null)}}class Ov extends LD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ag(new Ws(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ts.forKey(t,this.firestore,null)}}class ZF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ov(e)}get(e){const t=pc(e);return this._delegate.get(t).then(r=>new ug(this._firestore,new $o(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=pc(e);return r?(jD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=pc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=pc(e);return this._delegate.delete(t),this}}class XF{constructor(e){this._delegate=e}set(e,t,r){const i=pc(e);return r?(jD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=pc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=pc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class fc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new og(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cg(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=fc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new fc(e,new Ov(e),t),i.set(t,s)),s}}fc.INSTANCES=new WeakMap;class ts{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ov(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ts(t,new dn(t._delegate,r,new Te(e)))}static forKey(e,t,r){return new ts(t,new dn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Xd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xd(this.firestore,AF(this._delegate,e))}catch(t){throw ni(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xt.Ku)(e))instanceof dn&&TF(this._delegate,e)}set(e,t){t=jD("DocumentReference.set",t);try{return t?$F(this._delegate,e,t):$F(this._delegate,e)}catch(r){throw ni(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?HF(this._delegate,e):HF(this._delegate,e,t,...r)}catch(i){throw ni(i,"updateDoc()","DocumentReference.update()")}}delete(){return function KQ(n){return Zd(pt(n.firestore,Gt),[new Pd(n._key,_n.none())])}(this._delegate)}onSnapshot(...e){const t=eL(e),r=tL(e,i=>new ug(this.firestore,new $o(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return zF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function HQ(n){n=pt(n,dn);const e=pt(n.firestore,Gt),t=yn(e),r=new qa(e);return function sQ(n,e){const t=new dr;return n.asyncQueue.enqueueAndForget((0,se.A)(function*(){return(r=(0,se.A)(function*(s,o,a){try{const u=yield function(g,m){const v=Ee(g);return v.persistence.runTransaction("read document","readonly",w=>v.localDocuments.getDocument(w,m))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ce(Z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=Hd(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Qd(n),e,t);var r})),t.promise}(t,n._key).then(i=>new $o(e,r,n._key,i,new hc(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function zQ(n){n=pt(n,dn);const e=pt(n.firestore,Gt);return fF(yn(e),n._key,{source:"server"}).then(t=>UD(e,n,t))}(this._delegate):function $Q(n){n=pt(n,dn);const e=pt(n.firestore,Gt);return fF(yn(e),n._key).then(t=>UD(e,n,t))}(this._delegate),t.then(r=>new ug(this.firestore,new $o(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ts(this.firestore,this._delegate.withConverter(e?fc.getInstance(this.firestore,e):null))}}function ni(n,e,t){return n.message=n.message.replace(e,t),n}function eL(n){for(const e of n)if("object"==typeof e&&!$D(e))return e;return{}}function tL(n,e){var t,r;let i;return i=$D(n[0])?n[0]:$D(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ug{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ts(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return jF(this._delegate,e._delegate)}}class cg extends ug{data(e){const t=this._delegate.data(e);return this._delegate._converter||function s8(n,e){n||xe()}(void 0!==t),t}}class ri{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ov(e)}where(e,t,r){try{return new ri(this.firestore,Ha(this._delegate,function MQ(n,e,t){const r=e,i=Sv("where",n);return sg._create(i,r,t)}(e,t,r)))}catch(i){throw ni(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ri(this.firestore,Ha(this._delegate,function xQ(n,e="asc"){const t=e,r=Sv("orderBy",n);return FD._create(r,t)}(e,t)))}catch(r){throw ni(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ri(this.firestore,Ha(this._delegate,function NQ(n){return IF("limit",n),Rv._create("limit",n,"F")}(e)))}catch(t){throw ni(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ri(this.firestore,Ha(this._delegate,function OQ(n){return IF("limitToLast",n),Rv._create("limitToLast",n,"L")}(e)))}catch(t){throw ni(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ri(this.firestore,Ha(this._delegate,function kQ(...n){return Pv._create("startAt",n,!0)}(...e)))}catch(t){throw ni(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ri(this.firestore,Ha(this._delegate,function VQ(...n){return Pv._create("startAfter",n,!1)}(...e)))}catch(t){throw ni(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ri(this.firestore,Ha(this._delegate,function FQ(...n){return Mv._create("endBefore",n,!1)}(...e)))}catch(t){throw ni(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ri(this.firestore,Ha(this._delegate,function LQ(...n){return Mv._create("endAt",n,!0)}(...e)))}catch(t){throw ni(t,"endAt()","Query.endAt()")}}isEqual(e){return DD(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function GQ(n){n=pt(n,Ar);const e=pt(n.firestore,Gt),t=yn(e),r=new qa(e);return function oQ(n,e){const t=new dr;return n.asyncQueue.enqueueAndForget((0,se.A)(function*(){return(r=(0,se.A)(function*(s,o,a){try{const u=yield lv(s,o,!0),d=new eF(o,u.Ts),g=d.ma(u.documents),m=d.applyChanges(g,!1);a.resolve(m.snapshot)}catch(u){const d=Hd(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Qd(n),e,t);var r})),t.promise}(t,n._query).then(i=>new za(e,r,n,i))}(this._delegate):"server"===e?.source?function WQ(n){n=pt(n,Ar);const e=pt(n.firestore,Gt),t=yn(e),r=new qa(e);return pF(t,n._query,{source:"server"}).then(i=>new za(e,r,n,i))}(this._delegate):function qQ(n){n=pt(n,Ar);const e=pt(n.firestore,Gt),t=yn(e),r=new qa(e);return kF(n._query),pF(t,n._query).then(i=>new za(e,r,n,i))}(this._delegate),t.then(r=>new HD(this.firestore,new za(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=eL(e),r=tL(e,i=>new HD(this.firestore,new za(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return zF(this._delegate,t,r)}withConverter(e){return new ri(this.firestore,this._delegate.withConverter(e?fc.getInstance(this.firestore,e):null))}}class vY{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new cg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class HD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ri(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new cg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new vY(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new cg(this._firestore,r))})}isEqual(e){return jF(this._delegate,e._delegate)}}class Xd extends ri{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ts(this.firestore,e):null}doc(e){try{return new ts(this.firestore,void 0===e?Ev(this._delegate):Ev(this._delegate,e))}catch(t){throw ni(t,"doc()","CollectionReference.doc()")}}add(e){return function QQ(n,e){const t=pt(n.firestore,Gt),r=Ev(n),i=xv(n.converter,e);return Zd(t,[Cv(lc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,_n.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ts(this.firestore,t))}isEqual(e){return TF(this._delegate,e._delegate)}withConverter(e){return new Xd(this.firestore,this._delegate.withConverter(e?fc.getInstance(this.firestore,e):null))}}function pc(n){return pt(n,dn)}class zD{constructor(...e){this._delegate=new jo(...e)}static documentId(){return new zD(cn.keyField().canonicalString())}isEqual(e){return(e=(0,xt.Ku)(e))instanceof jo&&this._delegate._internalPath.isEqual(e._internalPath)}}class gc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function cY(){return new RD("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gc(e)}static delete(){const e=function uY(){return new tg("deleteField")}();return e._methodName="FieldValue.delete",new gc(e)}static arrayUnion(...e){const t=function lY(...n){return new PD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new gc(t)}static arrayRemove(...e){const t=function dY(...n){return new MD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new gc(t)}static increment(e){const t=function hY(n){return new xD("increment",n)}(e);return t._methodName="FieldValue.increment",new gc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const IY={Firestore:JF,GeoPoint:wv,Timestamp:gn,Blob:ag,Transaction:ZF,WriteBatch:XF,DocumentReference:ts,DocumentSnapshot:ug,Query:ri,QueryDocumentSnapshot:cg,QuerySnapshot:HD,CollectionReference:Xd,FieldPath:zD,FieldValue:gc,setLogLevel:function yY(n){!function i8(n){Sa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function nL(n,e){return function AY(n,e=zO){return new ct(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function qD(n,e){return nL(n,e).pipe(fe(t=>({payload:t,type:"query"})))}!function wY(n){(function EY(n,e){n.INTERNAL.registerComponent(new ak.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},IY)))})(n,(e,t)=>new JF(e,t,new _Y)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(ba.A);class rL{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=cL(r,t);return new oL(i,s,this.afs)}snapshotChanges(){return function TY(n,e){return nL(n,e).pipe(dy(void 0),vT(),fe(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ni)}valueChanges(e={}){return this.snapshotChanges().pipe(fe(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return S(this.ref.get(e)).pipe(Ni)}}function kv(n,e){return qD(n,e).pipe(dy(void 0),vT(),fe(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(m=>m.doc.ref.isEqual(a.ref)),g=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&g&&JSON.stringify(g.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function iL(n,e,t){return kv(n,t).pipe(fy((r,i)=>function CY(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function DY(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return GD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return GD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return GD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),jt(),fe(r=>r.map(i=>({type:i.type,payload:i}))))}function GD(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function sL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class oL{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=kv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(fe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(dy(void 0),vT(),Xi(([r,i])=>i.length>0||!r),fe(([,r])=>r),Ni)}auditTrail(e){return this.stateChanges(e).pipe(fy((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sL(e);return iL(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ni)}valueChanges(e={}){return qD(this.query,this.afs.schedulers.outsideAngular).pipe(fe(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ni)}get(e){return S(this.query.get(e)).pipe(Ni)}add(e){return this.ref.add(e)}doc(e){return new rL(this.ref.doc(e),this.afs)}}class bY{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?kv(this.query,this.afs.schedulers.outsideAngular).pipe(fe(t=>t.filter(r=>e.indexOf(r.type)>-1)),Xi(t=>t.length>0),Ni):kv(this.query,this.afs.schedulers.outsideAngular).pipe(Ni)}auditTrail(e){return this.stateChanges(e).pipe(fy((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sL(e);return iL(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ni)}valueChanges(e={}){return qD(this.query,this.afs.schedulers.outsideAngular).pipe(fe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ni)}get(e){return S(this.query.get(e)).pipe(Ni)}}const aL=new ye("angularfire2.enableFirestorePersistence"),uL=new ye("angularfire2.firestore.persistenceSettings"),SY=new ye("angularfire2.firestore.settings"),RY=new ye("angularfire2.firestore.use-emulator");function cL(n,e=(t=>t)){return{query:e(n),ref:n}}let PY=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,d,g,m,v,w,T,D,M,G,F){this.schedulers=u;const K=yT(t,a,r),ae=g;m&&sk(K,a,v,T,D,M,w,G),[this.firestore,this.persistenceEnabled$]=QO(`${K.name}.firestore`,"AngularFirestore",K.name,()=>{const ve=a.runOutsideAngular(()=>K.firestore());if(s&&ve.settings(s),ae&&ve.useEmulator(...ae),i&&!oy(o)){const Ve=()=>{try{return S(ve.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(V){return typeof console<"u"&&console.warn(V),B(!1)}};return[ve,a.runOutsideAngular(Ve)]}return[ve,B(!1)]},[s,ae,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=cL(i,r),a=this.schedulers.ngZone.run(()=>s);return new oL(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new bY(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new rL(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(_e(xy),_e(Ny,8),_e(aL,8),_e(SY,8),_e(Ms),_e(Vt),_e(WO),_e(uL,8),_e(RY,8),_e(ok,8),_e(XO,8),_e(ek,8),_e(tk,8),_e(nk,8),_e(rk,8),_e(ik,8),_e(qO,8))};static \u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),MY=(()=>{class n{constructor(){ba.A.registerVersion("angularfire",_T.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:aL,useValue:!0},{provide:uL,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qr({type:n});static \u0275inj=or({providers:[PY]})}return n})();const xY_firebase={apiKey:"AIzaSyDWOb8hpZ7JQcpPzpcNw6SW53_pG0V5UE0",authDomain:"wedding-29b48.firebaseapp.com",projectId:"wedding-29b48",storageBucket:"wedding-29b48.firebasestorage.app",messagingSenderId:"807343676966",appId:"1:807343676966:web:1c21870a5ee2dfbae790e7",measurementId:"YOUR_MEASUREMENT_ID"};let lL=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(ge(wo),ge(bi))}}static{this.\u0275dir=We({type:n})}}return n})(),mc=(()=>{class n extends lL{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Un(n)))(i||n)}}()}static{this.\u0275dir=We({type:n,features:[Ft]})}}return n})();const Ks=new ye("NgValueAccessor"),kY={provide:Ks,useExisting:Dt(()=>Vv),multi:!0},FY=new ye("CompositionEventMode");let Vv=(()=>{class n extends lL{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function VY(){const n=wa()?wa().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(ge(wo),ge(bi),ge(FY,8))}}static{this.\u0275dir=We({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Pi("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[pn([kY]),Ft]})}}return n})();const Br=new ye("NgValidators"),Ka=new ye("NgAsyncValidators");function EL(n){return null!=n}function wL(n){return $f(n)?S(n):n}function AL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function TL(n,e){return e.map(t=>t(n))}function CL(n){return n.map(e=>function UY(n){return!n.validate}(e)?e:t=>e.validate(t))}function WD(n){return null!=n?function DL(n){if(!n)return null;const e=n.filter(EL);return 0==e.length?null:function(t){return AL(TL(t,e))}}(CL(n)):null}function KD(n){return null!=n?function bL(n){if(!n)return null;const e=n.filter(EL);return 0==e.length?null:function(t){return function NY(...n){const e=Xs(n),{args:t,keys:r}=ON(n),i=new ct(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,d=o;for(let g=0;g<o;g++){let m=!1;zn(t[g]).subscribe(ee(s,v=>{m||(m=!0,d--),a[g]=v},()=>u--,void 0,()=>{(!u||!m)&&(d||s.next(r?VN(r,a):a),s.complete())}))}});return e?i.pipe(kN(e)):i}(TL(t,e).map(wL)).pipe(fe(AL))}}(CL(n)):null}function SL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function QD(n){return n?Array.isArray(n)?n:[n]:[]}function Lv(n,e){return Array.isArray(n)?n.includes(e):n===e}function ML(n,e){const t=QD(e);return QD(n).forEach(i=>{Lv(t,i)||t.push(i)}),t}function xL(n,e){return QD(e).filter(t=>!Lv(n,t))}class NL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=WD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=KD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ii extends NL{get formDirective(){return null}get path(){return null}}class Qa extends NL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class OL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let kL=(()=>{class n extends OL{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ge(Qa,2))}}static{this.\u0275dir=We({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&x_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ft]})}}return n})(),VL=(()=>{class n extends OL{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ge(ii,10))}}static{this.\u0275dir=We({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&x_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ft]})}}return n})();const lg="VALID",Bv="INVALID",eh="PENDING",dg="DISABLED";function ZD(n){return(jv(n)?n.validators:n)||null}function XD(n,e){return(jv(e)?e.asyncValidators:n)||null}function jv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class e0{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===lg}get invalid(){return this.status===Bv}get pending(){return this.status==eh}get disabled(){return this.status===dg}get enabled(){return this.status!==dg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ML(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ML(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xL(e,this._rawAsyncValidators))}hasValidator(e){return Lv(this._rawValidators,e)}hasAsyncValidator(e){return Lv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=eh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lg||this.status===eh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dg:lg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=eh,this._hasOwnPendingAsyncValidator=!0;const t=wL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Mn,this.statusChanges=new Mn}_calculateStatus(){return this._allControlsDisabled()?dg:this.errors?Bv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(eh)?eh:this._anyControlsHaveStatus(Bv)?Bv:lg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function HY(n){return Array.isArray(n)?WD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function zY(n){return Array.isArray(n)?KD(n):n||null}(this._rawAsyncValidators)}}class t0 extends e0{constructor(e,t,r){super(ZD(t),XD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function UL(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new de(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function LL(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new de(1e3,"");if(!r[t])throw new de(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const th=new ye("CallSetDisabledState",{providedIn:"root",factory:()=>$v}),$v="always";function hg(n,e,t=$v){n0(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function WY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&BL(n,e)})}(n,e),function QY(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function KY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&BL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function GY(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function qv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function n0(n,e){const t=function RL(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(SL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function PL(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(SL(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();qv(e._rawValidators,i),qv(e._rawAsyncValidators,i)}function BL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const eJ={provide:ii,useExisting:Dt(()=>Wv)},fg=(()=>Promise.resolve())();let Wv=(()=>{class n extends ii{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Mn,this.form=new t0({},WD(t),KD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){fg.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),hg(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){fg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){fg.then(()=>{const r=this._findContainer(t.path),i=new t0({});(function jL(n,e){n0(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){fg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){fg.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function $L(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(ge(Br,10),ge(Ka,10),ge(th,8))}}static{this.\u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Pi("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pn([eJ]),Ft]})}}return n})();function HL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function zL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const qL=class extends e0{constructor(e=null,t,r){super(ZD(t),XD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=zL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){HL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){HL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){zL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},rJ={provide:Qa,useExisting:Dt(()=>a0)},KL=(()=>Promise.resolve())();let a0=(()=>{class n extends Qa{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new qL,this._registered=!1,this.name="",this.update=new Mn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function o0(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Vv?t=s:function ZY(n){return Object.getPrototypeOf(n.constructor)===mc}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function s0(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){hg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){KL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&ed(r);KL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Hv(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(ge(ii,9),ge(Br,10),ge(Ka,10),ge(Ks,10),ge(q_,8),ge(th,8))}}static{this.\u0275dir=We({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[pn([rJ]),Ft,hi]})}}return n})(),QL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=We({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),JL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qr({type:n})}static{this.\u0275inj=or({})}}return n})(),bJ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qr({type:n})}static{this.\u0275inj=or({imports:[JL]})}}return n})(),RJ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:th,useValue:t.callSetDisabledState??$v}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qr({type:n})}static{this.\u0275inj=or({imports:[bJ]})}}return n})();class Kv{}class Qv{}class Qs{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Qs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Qs;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Qs?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class PJ{encodeKey(e){return g2(e)}encodeValue(e){return g2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const xJ=/%(\d[a-f0-9])/gi,NJ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function g2(n){return encodeURIComponent(n).replace(xJ,(e,t)=>NJ[t]??e)}function Yv(n){return`${n}`}class Ya{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new PJ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function MJ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Yv):[Yv(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ya({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Yv(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Yv(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class OJ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function m2(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function _2(n){return typeof Blob<"u"&&n instanceof Blob}function y2(n){return typeof FormData<"u"&&n instanceof FormData}class pg{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function kJ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Qs),this.context||(this.context=new OJ),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Ya,this.urlWithParams=t}serializeBody(){return null===this.body?null:m2(this.body)||_2(this.body)||y2(this.body)||function VJ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ya?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||y2(this.body)?null:_2(this.body)?this.body.type||null:m2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ya?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,d=e.params||this.params;const g=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),d)),new pg(t,r,s,{params:d,headers:u,context:g,reportProgress:a,responseType:i,withCredentials:o})}}var nh=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(nh||{});class p0{constructor(e,t=200,r="OK"){this.headers=e.headers||new Qs,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class g0 extends p0{constructor(e={}){super(e),this.type=nh.ResponseHeader}clone(e={}){return new g0({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class rh extends p0{constructor(e={}){super(e),this.type=nh.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new rh({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class v2 extends p0{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function m0(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let I2=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof pg)s=t;else{let u,d;u=i.headers instanceof Qs?i.headers:new Qs(i.headers),i.params&&(d=i.params instanceof Ya?i.params:new Ya({fromObject:i.params})),s=new pg(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=B(s).pipe(rd(u=>this.handler.handle(u)));if(t instanceof pg||"events"===i.observe)return o;const a=o.pipe(Xi(u=>u instanceof rh));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(fe(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(fe(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(fe(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(fe(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ya).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,m0(i,r))}post(t,r,i={}){return this.request("POST",t,m0(i,r))}put(t,r,i={}){return this.request("PUT",t,m0(i,r))}static{this.\u0275fac=function(r){return new(r||n)(_e(Kv))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();function A2(n,e){return e(n)}function LJ(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const BJ=new ye(""),gg=new ye(""),T2=new ye("");function jJ(){let n=null;return(e,t)=>{null===n&&(n=(be(BJ,{optional:!0})??[]).reduceRight(LJ,A2));const r=be(j_),i=r.add();return n(e,t).pipe(sp(()=>r.remove(i)))}}let C2=(()=>{class n extends Kv{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=be(j_)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(gg),...this.injector.get(T2,[])]));this.chain=i.reduceRight((s,o)=>function UJ(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),A2)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(sp(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(_e(Qv),_e(Di))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const qJ=/^\)\]\}',?\n/;let b2=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new de(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?S(r.\u0275loadImpl()):B(null)).pipe(Ce(()=>new ct(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((D,M)=>o.setRequestHeader(D,M.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const D=t.detectContentTypeHeader();null!==D&&o.setRequestHeader("Content-Type",D)}if(t.responseType){const D=t.responseType.toLowerCase();o.responseType="json"!==D?D:"text"}const a=t.serializeBody();let u=null;const d=()=>{if(null!==u)return u;const D=o.statusText||"OK",M=new Qs(o.getAllResponseHeaders()),G=function GJ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return u=new g0({headers:M,status:o.status,statusText:D,url:G}),u},g=()=>{let{headers:D,status:M,statusText:G,url:F}=d(),K=null;204!==M&&(K=typeof o.response>"u"?o.responseText:o.response),0===M&&(M=K?200:0);let ae=M>=200&&M<300;if("json"===t.responseType&&"string"==typeof K){const ve=K;K=K.replace(qJ,"");try{K=""!==K?JSON.parse(K):null}catch(Ve){K=ve,ae&&(ae=!1,K={error:Ve,text:K})}}ae?(s.next(new rh({body:K,headers:D,status:M,statusText:G,url:F||void 0})),s.complete()):s.error(new v2({error:K,headers:D,status:M,statusText:G,url:F||void 0}))},m=D=>{const{url:M}=d(),G=new v2({error:D,status:o.status||0,statusText:o.statusText||"Unknown Error",url:M||void 0});s.error(G)};let v=!1;const w=D=>{v||(s.next(d()),v=!0);let M={type:nh.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(M.total=D.total),"text"===t.responseType&&o.responseText&&(M.partialText=o.responseText),s.next(M)},T=D=>{let M={type:nh.UploadProgress,loaded:D.loaded};D.lengthComputable&&(M.total=D.total),s.next(M)};return o.addEventListener("load",g),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),t.reportProgress&&(o.addEventListener("progress",w),null!==a&&o.upload&&o.upload.addEventListener("progress",T)),o.send(a),s.next({type:nh.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",g),o.removeEventListener("timeout",m),t.reportProgress&&(o.removeEventListener("progress",w),null!==a&&o.upload&&o.upload.removeEventListener("progress",T)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(_e(hN))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();const _0=new ye("XSRF_ENABLED"),S2=new ye("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),R2=new ye("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class P2{}let QJ=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=rN(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(_e(Mi),_e(Ms),_e(S2))}}static{this.\u0275prov=ke({token:n,factory:n.\u0275fac})}}return n})();function YJ(n,e){const t=n.url.toLowerCase();if(!be(_0)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=be(P2).getToken(),i=be(R2);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Ja=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Ja||{});function yc(n,e){return{\u0275kind:n,\u0275providers:e}}function JJ(...n){const e=[I2,b2,C2,{provide:Kv,useExisting:C2},{provide:Qv,useExisting:b2},{provide:gg,useValue:YJ,multi:!0},{provide:_0,useValue:!0},{provide:P2,useClass:QJ}];for(const t of n)e.push(...t.\u0275providers);return function VE(n){return{\u0275providers:n}}(e)}const M2=new ye("LEGACY_INTERCEPTOR_FN");let XJ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qr({type:n})}static{this.\u0275inj=or({providers:[JJ(yc(Ja.LegacyInterceptors,[{provide:M2,useFactory:jJ},{provide:gg,useExisting:M2,multi:!0}]))]})}}return n})(),sZ=(()=>{class n{constructor(){this.target=new Date(2025,6,19,12,30),this.updateTimeDifference(),this.intervalId=setInterval(()=>{this.updateTimeDifference()},1e3)}updateTimeDifference(){const t=new Date(Date.now()),r=this.target.getTime()-t.getTime();r<=0?(clearInterval(this.intervalId),this.remDays=this.remHours=this.remMinutes=this.remSeconds=0):this.calculateDifference(r)}calculateDifference(t){try{this.remDays=Math.floor(t/864e5),t%=864e5,this.remHours=Math.floor(t/36e5),t%=36e5,this.remMinutes=Math.floor(t/6e4),t%=6e4,this.remSeconds=Math.floor(t/1e3)}catch(r){console.log("Error in calculateDifference",r)}}ngOnDestroy(){clearInterval(this.intervalId)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wi({type:n,selectors:[["app-timer"]],decls:3,vars:4,consts:[[1,"container"],[1,"clock"]],template:function(r,i){1&r&&(zt(0,"div",0)(1,"div",1),xn(2),Lt()()),2&r&&(ya(2),xw("",i.remDays," days, ",i.remHours," hrs ",i.remMinutes," min ",i.remSeconds," sec."))},styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;height:70px;width:50vw;background-color:#96a498;color:#fff;font-size:30px;padding-left:2em}@media (max-width: 1000px){.container[_ngcontent-%COMP%]{height:60px;font-size:22px;padding-left:2em}}@media (max-width: 800px){.container[_ngcontent-%COMP%]{height:50px;font-size:18px;padding-left:2em}}@media (max-width: 600px){.container[_ngcontent-%COMP%]{height:40px;font-size:14px;padding-left:2em}}@media (max-width: 450px){.container[_ngcontent-%COMP%]{height:30px;font-size:10px;padding-left:1em}}"]})}}return n})(),oZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wi({type:n,selectors:[["app-home"]],decls:13,vars:0,consts:[[1,"flex-container"],[1,"welcome-text"],[1,"timer"],["src","../../assets/images/wedding-flowers.jpg",1,"test"]],template:function(r,i){1&r&&(zt(0,"div",0)(1,"div",1)(2,"div"),xn(3,"We are delighted to welcome you to "),Lt(),zt(4,"div"),xn(5,"Patrik & Claudia's"),Lt(),zt(6,"div"),xn(7,"wedding, in:"),Lt()(),ks(8,"app-timer",2),Lt(),zt(9,"div")(10,"p"),xn(11,"This is a test:"),Lt(),ks(12,"img",3),Lt())},dependencies:[sZ],styles:['.flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;width:100%;height:100vh;position:relative}.flex-container[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background-image:url(/assets/images/wedding-flowers.jpg);background-size:cover;background-position:center;opacity:.25;z-index:1}.welcome-text[_ngcontent-%COMP%]{margin-top:20px;font-family:Waterfall,cursive;font-size:80px;z-index:2}.timer[_ngcontent-%COMP%]{position:relative;left:12.5vw;z-index:2;margin-top:50px}.test[_ngcontent-%COMP%]{width:300px;height:auto}@media (max-width: 1000px){.welcome-text[_ngcontent-%COMP%]{font-size:60px}.timer[_ngcontent-%COMP%]{left:12.5vw}}@media (max-width: 1200px){.background-image[_ngcontent-%COMP%]{margin-top:-200px}.timer[_ngcontent-%COMP%]{left:12vw}}@media (max-width: 600px){.welcome-text[_ngcontent-%COMP%]{font-size:40px}.timer[_ngcontent-%COMP%]{left:10vw}}@media (max-width: 450px){.welcome-text[_ngcontent-%COMP%]{font-size:35px}.timer[_ngcontent-%COMP%]{left:8vw}}']})}}return n})(),aZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wi({type:n,selectors:[["app-about"]],decls:2,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(zt(0,"div",0),xn(1,"This is the About view"),Lt())},styles:[".container[_ngcontent-%COMP%]{margin:2em;height:100vh}"]})}}return n})(),uZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wi({type:n,selectors:[["app-schedule"]],decls:2,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(zt(0,"div",0),xn(1,"This is the Schedule view"),Lt())},styles:[".container[_ngcontent-%COMP%]{margin:2em;height:100vh}"]})}}return n})(),cZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wi({type:n,selectors:[["app-contact"]],decls:2,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(zt(0,"div",0),xn(1," This is the Contact view\n"),Lt())},styles:[".container[_ngcontent-%COMP%]{height:100vh;margin:2em}"]})}}return n})(),lZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=wi({type:n,selectors:[["app-error"]],decls:5,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(zt(0,"div",0)(1,"h1"),xn(2,"404: Page Not Found"),Lt(),zt(3,"p"),xn(4,"The page you are looking for cannot be found or you do not have access to this page."),Lt()())},styles:[".container[_ngcontent-%COMP%]{text-align:center;margin:30px 0}"]})}}return n})();function dZ(n,e){1&n&&(zt(0,"div",10),xn(1,"Name missing"),Lt())}const hZ=[{path:"",redirectTo:"Home",pathMatch:"full"},{path:"Home",component:oZ},{path:"About",component:aZ},{path:"Schedule",component:uZ},{path:"Contact",component:cZ},{path:"Rsvp",component:(()=>{class n{constructor(t){this.http=t,this.validName=!0}addGuest(t,r){console.log(t);try{this.validateName(t.name),this.http.post("https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app/guests.json",t).subscribe(s=>{console.log(s)}),this.validName=!0,r.reset()}catch{this.validName=!1,console.log("Invalid name")}}validateName(t){if(t.length<1)throw Error}static{this.\u0275fac=function(r){return new(r||n)(ge(I2))}}static{this.\u0275cmp=wi({type:n,selectors:[["app-rsvp"]],decls:20,vars:1,consts:[[1,"container"],[1,"text-container"],[1,"form-container"],[1,"form",3,"ngSubmit"],["guestForm","ngForm"],["type","text","name","name","ngModel","",1,"input-field"],["class","error-message",4,"ngIf"],["type","text","name","plusOne","ngModel","",1,"input-field"],["name","additional","rows","5","ngModel","",1,"input-field"],["type","submit","value","Send",1,"submit-button"],[1,"error-message"]],template:function(r,i){if(1&r){const s=function qR(){return ue()}();zt(0,"div",0)(1,"div",1)(2,"h2"),xn(3,"Respondez, s'il vous plait"),Lt(),zt(4,"p"),xn(5,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ipsam natus deleniti ex delectus at libero consequatur est sequi numquam eveniet! "),Lt()(),zt(6,"div",2)(7,"form",3,4),Pi("ngSubmit",function(){!function sl(n){return He.lFrame.contextLView=n,n[An]}(s);const a=function jR(n){return function Ss(n,e){return n[e]}(function qh(){return He.lFrame.contextLView}(),dt+n)}(8);return function Im(n){return He.lFrame.contextLView=null,n}(i.addGuest(a.value,a))}),zt(9,"label"),xn(10,"Name"),Lt(),ks(11,"input",5),function LR(n,e,t,r,i,s,o,a){const u=ue(),d=gt(),g=n+dt,m=d.firstCreatePass?function eH(n,e,t,r,i,s,o,a,u){const d=e.consts,g=Ll(e,n,4,o||null,us(d,a));dw(e,t,g,us(d,u)),cl(e,g);const m=g.tView=lw(2,g,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,g),m.queries=e.queries.embeddedTView(g)),g}(g,d,u,e,t,r,i,s,o):d.data[g];Wi(m,!1);const v=UR(d,u,m,n);bu()&&r_(d,u,v,m),Or(v,u),w_(u,u[g]=aR(v,u,v,m)),Mh(m)&&uw(d,u,m),null!=o&&cw(u,m,a)}(12,dZ,2,0,"div",6),zt(13,"label"),xn(14,"Plus one (if any)"),Lt(),ks(15,"input",7),zt(16,"label"),xn(17,"Additional info"),Lt(),ks(18,"textarea",8)(19,"input",9),Lt()()()}2&r&&(ya(12),va("ngIf",!i.validName))},dependencies:[aN,QL,Vv,kL,VL,a0,Wv],styles:[".container[_ngcontent-%COMP%]{height:100vh;margin:2em}.text-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.form-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:400px;height:auto;background-color:#96a498;color:#fff;border-radius:10px;padding:1em}label[_ngcontent-%COMP%]{font-size:18px;margin-top:1em}.input-field[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:.5em;width:300px}.submit-button[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:2em;width:50px}.error-message[_ngcontent-%COMP%]{color:#fff}@media (max-width: 1000px){.form[_ngcontent-%COMP%]{width:300px;height:auto}.input-field[_ngcontent-%COMP%]{width:200px}}@media (max-width: 600px){.form[_ngcontent-%COMP%]{width:200px;height:auto}.input-field[_ngcontent-%COMP%]{width:150px}label[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 450px){.form[_ngcontent-%COMP%]{width:150px;height:auto}.input-field[_ngcontent-%COMP%]{width:120px}label[_ngcontent-%COMP%]{font-size:12px}}"]})}}return n})()},{path:"**",component:lZ}];let fZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Qr({type:n,bootstrap:[xW]})}static{this.\u0275inj=or({imports:[W9,RJ,MW,gT.forRoot(hZ),ZW.initializeApp(xY_firebase),MY,XJ]})}}return n})();q9().bootstrapModule(fZ).catch(n=>console.error(n))},574:(ns,ir,et)=>{et.d(ir,{A:()=>Yn});var C=et(401),ze=et(779),Pe=et(979),ne=et(398);class It{constructor(qe,nt){this._delegate=qe,this.firebase=nt,(0,Pe._addComponent)(qe,new ze.uA("app-compat",()=>this,"PUBLIC")),this.container=qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this._delegate.automaticDataCollectionEnabled=qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(qe=>{this._delegate.checkDestroyed(),qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Pe.deleteApp)(this._delegate)))}_getService(qe,nt=Pe._DEFAULT_ENTRY_NAME){var Jn;this._delegate.checkDestroyed();const Zn=this._delegate.container.getProvider(qe);return!Zn.isInitialized()&&"EXPLICIT"===(null===(Jn=Zn.getComponent())||void 0===Jn?void 0:Jn.instantiationMode)&&Zn.initialize(),Zn.getImmediate({identifier:nt})}_removeServiceInstance(qe,nt=Pe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(qe).clearInstance(nt)}_addComponent(qe){(0,Pe._addComponent)(this._delegate,qe)}_addOrOverwriteComponent(qe){(0,Pe._addOrOverwriteComponent)(this._delegate,qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const sn=new C.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function at(){const Et=function Hn(Et){const qe={},nt={__esModule:!0,initializeApp:function Kt(Be,vn={}){const Ot=Pe.initializeApp(Be,vn);if((0,C.gR)(qe,Ot.name))return qe[Ot.name];const le=new Et(Ot,nt);return qe[Ot.name]=le,le},app:Zn,registerVersion:Pe.registerVersion,setLogLevel:Pe.setLogLevel,onLog:Pe.onLog,apps:null,SDK_VERSION:Pe.SDK_VERSION,INTERNAL:{registerComponent:function Nt(Be){const vn=Be.name,Ot=vn.replace("-compat","");if(Pe._registerComponent(Be)&&"PUBLIC"===Be.type){const le=(Qt=Zn())=>{if("function"!=typeof Qt[Ot])throw sn.create("invalid-app-argument",{appName:vn});return Qt[Ot]()};void 0!==Be.serviceProps&&(0,C.zw)(le,Be.serviceProps),nt[Ot]=le,Et.prototype[Ot]=function(...Qt){return this._getService.bind(this,vn).apply(this,Be.multipleInstances?Qt:[])}}return"PUBLIC"===Be.type?nt[Ot]:null},removeApp:function Jn(Be){delete qe[Be]},useAsService:function fr(Be,vn){return"serverAuth"===vn?null:vn},modularAPIs:Pe}};function Zn(Be){if(!(0,C.gR)(qe,Be=Be||Pe._DEFAULT_ENTRY_NAME))throw sn.create("no-app",{appName:Be});return qe[Be]}return nt.default=nt,Object.defineProperty(nt,"apps",{get:function Tt(){return Object.keys(qe).map(Be=>qe[Be])}}),Zn.App=Et,nt}(It);return Et.INTERNAL=Object.assign(Object.assign({},Et.INTERNAL),{createFirebaseNamespace:at,extendNamespace:function qe(nt){(0,C.zw)(Et,nt)},createSubscribe:C.tD,ErrorFactory:C.FA,deepExtend:C.zw}),Et}(),me=new ne.Vy("@firebase/app-compat");try{const Et=(0,C.mS)();if(void 0!==Et.firebase){me.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const qe=Et.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&me.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Yn=oe;!function yt(Et){(0,Pe.registerVersion)("@firebase/app-compat","0.2.43",Et)}()},979:(ns,ir,et)=>{et.r(ir),et.d(ir,{FirebaseError:()=>ne.g,SDK_VERSION:()=>eo,_DEFAULT_ENTRY_NAME:()=>Ui,_addComponent:()=>In,_addOrOverwriteComponent:()=>Bi,_apps:()=>ui,_clearComponents:()=>Xs,_components:()=>br,_getProvider:()=>Wo,_isFirebaseApp:()=>Ko,_isFirebaseServerApp:()=>Sr,_registerComponent:()=>En,_removeServiceInstance:()=>ji,_serverApps:()=>bn,deleteApp:()=>Jo,getApp:()=>Tc,getApps:()=>Yo,initializeApp:()=>Qo,initializeServerApp:()=>to,onLog:()=>P,registerVersion:()=>S,setLogLevel:()=>k});var C=et(467),ze=et(779),Pe=et(398),ne=et(401);const It=(J,x)=>x.some(Y=>J instanceof Y);let rn,sn;const oe=new WeakMap,me=new WeakMap,Ne=new WeakMap,ut=new WeakMap,yt=new WeakMap;let qe={get(J,x,Y){if(J instanceof IDBTransaction){if("done"===x)return me.get(J);if("objectStoreNames"===x)return J.objectStoreNames||Ne.get(J);if("store"===x)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return Kt(J[x])},set:(J,x,Y)=>(J[x]=Y,!0),has:(J,x)=>J instanceof IDBTransaction&&("done"===x||"store"===x)||x in J};function Zn(J){return"function"==typeof J?function Jn(J){return J!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function at(){return sn||(sn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(J)?function(...x){return J.apply(Tt(this),x),Kt(oe.get(this))}:function(...x){return Kt(J.apply(Tt(this),x))}:function(x,...Y){const Ae=J.call(Tt(this),x,...Y);return Ne.set(Ae,x.sort?x.sort():[x]),Kt(Ae)}}(J):(J instanceof IDBTransaction&&function Et(J){if(me.has(J))return;const x=new Promise((Y,Ae)=>{const Ke=()=>{J.removeEventListener("complete",Ze),J.removeEventListener("error",Xe),J.removeEventListener("abort",Xe)},Ze=()=>{Y(),Ke()},Xe=()=>{Ae(J.error||new DOMException("AbortError","AbortError")),Ke()};J.addEventListener("complete",Ze),J.addEventListener("error",Xe),J.addEventListener("abort",Xe)});me.set(J,x)}(J),It(J,function Hn(){return rn||(rn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(J,qe):J)}function Kt(J){if(J instanceof IDBRequest)return function Yn(J){const x=new Promise((Y,Ae)=>{const Ke=()=>{J.removeEventListener("success",Ze),J.removeEventListener("error",Xe)},Ze=()=>{Y(Kt(J.result)),Ke()},Xe=()=>{Ae(J.error),Ke()};J.addEventListener("success",Ze),J.addEventListener("error",Xe)});return x.then(Y=>{Y instanceof IDBCursor&&oe.set(Y,J)}).catch(()=>{}),yt.set(x,J),x}(J);if(ut.has(J))return ut.get(J);const x=Zn(J);return x!==J&&(ut.set(J,x),yt.set(x,J)),x}const Tt=J=>yt.get(J),Be=["get","getKey","getAll","getAllKeys","count"],vn=["put","add","delete","clear"],Ot=new Map;function le(J,x){if(!(J instanceof IDBDatabase)||x in J||"string"!=typeof x)return;if(Ot.get(x))return Ot.get(x);const Y=x.replace(/FromIndex$/,""),Ae=x!==Y,Ke=vn.includes(Y);if(!(Y in(Ae?IDBIndex:IDBObjectStore).prototype)||!Ke&&!Be.includes(Y))return;const Ze=function(){var Xe=(0,C.A)(function*(ht,...on){const Gr=this.transaction(ht,Ke?"readwrite":"readonly");let bt=Gr.store;return Ae&&(bt=bt.index(on.shift())),(yield Promise.all([bt[Y](...on),Ke&&Gr.done]))[0]});return function(on){return Xe.apply(this,arguments)}}();return Ot.set(x,Ze),Ze}!function nt(J){qe=J(qe)}(J=>({...J,get:(x,Y,Ae)=>le(x,Y)||J.get(x,Y,Ae),has:(x,Y)=>!!le(x,Y)||J.has(x,Y)}));class Qt{constructor(x){this.container=x}getPlatformInfoString(){return this.container.getProviders().map(Y=>{if(function Ht(J){const x=J.getComponent();return"VERSION"===x?.type}(Y)){const Ae=Y.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(Y=>Y).join(" ")}}const Cr="@firebase/app",ai="0.10.13",ct=new Pe.Vy("@firebase/app"),Ui="[DEFAULT]",Zs={[Cr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},ui=new Map,bn=new Map,br=new Map;function In(J,x){try{J.container.addComponent(x)}catch(Y){ct.debug(`Component ${x.name} failed to register with FirebaseApp ${J.name}`,Y)}}function Bi(J,x){J.container.addOrOverwriteComponent(x)}function En(J){const x=J.name;if(br.has(x))return ct.debug(`There were multiple attempts to register component ${x}.`),!1;br.set(x,J);for(const Y of ui.values())In(Y,J);for(const Y of bn.values())In(Y,J);return!0}function Wo(J,x){const Y=J.container.getProvider("heartbeat").getImmediate({optional:!0});return Y&&Y.triggerHeartbeat(),J.container.getProvider(x)}function ji(J,x,Y=Ui){Wo(J,x).clearInstance(Y)}function Ko(J){return void 0!==J.options}function Sr(J){return void 0!==J.settings}function Xs(){br.clear()}const pr=new ne.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class qr{constructor(x,Y,Ae){this._isDeleted=!1,this._options=Object.assign({},x),this._config=Object.assign({},Y),this._name=Y.name,this._automaticDataCollectionEnabled=Y.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new ze.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(x){this.checkDestroyed(),this._automaticDataCollectionEnabled=x}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(x){this._isDeleted=x}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}class Rr extends qr{constructor(x,Y,Ae,Ke){const Ze=void 0!==Y.automaticDataCollectionEnabled&&Y.automaticDataCollectionEnabled,Xe={name:Ae,automaticDataCollectionEnabled:Ze};super(void 0!==x.apiKey?x:x.options,Xe,Ke),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Ze},Y),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Y.releaseOnDeref=void 0,S(Cr,ai,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(x){this.isDeleted||(this._refCount++,void 0!==x&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(x,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Jo(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw pr.create("server-app-deleted")}}const eo="10.14.1";function Qo(J,x={}){let Y=J;"object"!=typeof x&&(x={name:x});const Ae=Object.assign({name:Ui,automaticDataCollectionEnabled:!1},x),Ke=Ae.name;if("string"!=typeof Ke||!Ke)throw pr.create("bad-app-name",{appName:String(Ke)});if(Y||(Y=(0,ne.T9)()),!Y)throw pr.create("no-options");const Ze=ui.get(Ke);if(Ze){if((0,ne.bD)(Y,Ze.options)&&(0,ne.bD)(Ae,Ze.config))return Ze;throw pr.create("duplicate-app",{appName:Ke})}const Xe=new ze.h1(Ke);for(const on of br.values())Xe.addComponent(on);const ht=new qr(Y,Ae,Xe);return ui.set(Ke,ht),ht}function to(J,x){if((0,ne.Bd)()&&!(0,ne.p7)())throw pr.create("invalid-server-app-environment");let Y;void 0===x.automaticDataCollectionEnabled&&(x.automaticDataCollectionEnabled=!1),Y=Ko(J)?J.options:J;const Ae=Object.assign(Object.assign({},x),Y);if(void 0!==Ae.releaseOnDeref&&delete Ae.releaseOnDeref,void 0!==x.releaseOnDeref&&typeof FinalizationRegistry>"u")throw pr.create("finalization-registry-not-supported",{});const Ze=""+(Gr=JSON.stringify(Ae),[...Gr].reduce((bt,Hi)=>Math.imul(31,bt)+Hi.charCodeAt(0)|0,0)),Xe=bn.get(Ze);var Gr;if(Xe)return Xe.incRefCount(x.releaseOnDeref),Xe;const ht=new ze.h1(Ze);for(const Gr of br.values())ht.addComponent(Gr);const on=new Rr(Y,x,Ze,ht);return bn.set(Ze,on),on}function Tc(J=Ui){const x=ui.get(J);if(!x&&J===Ui&&(0,ne.T9)())return Qo();if(!x)throw pr.create("no-app",{appName:J});return x}function Yo(){return Array.from(ui.values())}function Jo(J){return rs.apply(this,arguments)}function rs(){return(rs=(0,C.A)(function*(J){let x=!1;const Y=J.name;ui.has(Y)?(x=!0,ui.delete(Y)):bn.has(Y)&&J.decRefCount()<=0&&(bn.delete(Y),x=!0),x&&(yield Promise.all(J.container.getProviders().map(Ae=>Ae.delete())),J.isDeleted=!0)})).apply(this,arguments)}function S(J,x,Y){var Ae;let Ke=null!==(Ae=Zs[J])&&void 0!==Ae?Ae:J;Y&&(Ke+=`-${Y}`);const Ze=Ke.match(/\s|\//),Xe=x.match(/\s|\//);if(Ze||Xe){const ht=[`Unable to register library "${Ke}" with version "${x}":`];return Ze&&ht.push(`library name "${Ke}" contains illegal characters (whitespace or "/")`),Ze&&Xe&&ht.push("and"),Xe&&ht.push(`version name "${x}" contains illegal characters (whitespace or "/")`),void ct.warn(ht.join(" "))}En(new ze.uA(`${Ke}-version`,()=>({library:Ke,version:x}),"VERSION"))}function P(J,x){if(null!==J&&"function"!=typeof J)throw pr.create("invalid-log-argument");(0,Pe.Ey)(J,x)}function k(J){(0,Pe.He)(J)}const B="firebase-heartbeat-database",W=1,Se="firebase-heartbeat-store";let Ce=null;function jt(){return Ce||(Ce=function Nt(J,x,{blocked:Y,upgrade:Ae,blocking:Ke,terminated:Ze}={}){const Xe=indexedDB.open(J,x),ht=Kt(Xe);return Ae&&Xe.addEventListener("upgradeneeded",on=>{Ae(Kt(Xe.result),on.oldVersion,on.newVersion,Kt(Xe.transaction),on)}),Y&&Xe.addEventListener("blocked",on=>Y(on.oldVersion,on.newVersion,on)),ht.then(on=>{Ze&&on.addEventListener("close",()=>Ze()),Ke&&on.addEventListener("versionchange",Gr=>Ke(Gr.oldVersion,Gr.newVersion,Gr))}).catch(()=>{}),ht}(B,W,{upgrade:(J,x)=>{if(0===x)try{J.createObjectStore(Se)}catch(Y){console.warn(Y)}}}).catch(J=>{throw pr.create("idb-open",{originalErrorMessage:J.message})})),Ce}function Le(){return(Le=(0,C.A)(function*(J){try{const Y=(yield jt()).transaction(Se),Ae=yield Y.objectStore(Se).get(Xn(J));return yield Y.done,Ae}catch(x){if(x instanceof ne.g)ct.warn(x.message);else{const Y=pr.create("idb-get",{originalErrorMessage:x?.message});ct.warn(Y.message)}}})).apply(this,arguments)}function wn(J,x){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,C.A)(function*(J,x){try{const Ae=(yield jt()).transaction(Se,"readwrite");yield Ae.objectStore(Se).put(x,Xn(J)),yield Ae.done}catch(Y){if(Y instanceof ne.g)ct.warn(Y.message);else{const Ae=pr.create("idb-set",{originalErrorMessage:Y?.message});ct.warn(Ae.message)}}})).apply(this,arguments)}function Xn(J){return`${J.name}!${J.options.appId}`}class $e{constructor(x){this.container=x,this._heartbeatsCache=null;const Y=this.container.getProvider("app").getImmediate();this._storage=new uh(Y),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var x=this;return(0,C.A)(function*(){var Y,Ae;try{const Ze=x.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Xe=$i();return null==(null===(Y=x._heartbeatsCache)||void 0===Y?void 0:Y.heartbeats)&&(x._heartbeatsCache=yield x._heartbeatsCachePromise,null==(null===(Ae=x._heartbeatsCache)||void 0===Ae?void 0:Ae.heartbeats))||x._heartbeatsCache.lastSentHeartbeatDate===Xe||x._heartbeatsCache.heartbeats.some(ht=>ht.date===Xe)?void 0:(x._heartbeatsCache.heartbeats.push({date:Xe,agent:Ze}),x._heartbeatsCache.heartbeats=x._heartbeatsCache.heartbeats.filter(ht=>{const on=new Date(ht.date).valueOf();return Date.now()-on<=2592e6}),x._storage.overwrite(x._heartbeatsCache))}catch(Ke){ct.warn(Ke)}})()}getHeartbeatsHeader(){var x=this;return(0,C.A)(function*(){var Y;try{if(null===x._heartbeatsCache&&(yield x._heartbeatsCachePromise),null==(null===(Y=x._heartbeatsCache)||void 0===Y?void 0:Y.heartbeats)||0===x._heartbeatsCache.heartbeats.length)return"";const Ae=$i(),{heartbeatsToSend:Ke,unsentEntries:Ze}=function Zo(J,x=1024){const Y=[];let Ae=J.slice();for(const Ke of J){const Ze=Y.find(Xe=>Xe.agent===Ke.agent);if(Ze){if(Ze.dates.push(Ke.date),ss(Y)>x){Ze.dates.pop();break}}else if(Y.push({agent:Ke.agent,dates:[Ke.date]}),ss(Y)>x){Y.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:Y,unsentEntries:Ae}}(x._heartbeatsCache.heartbeats),Xe=(0,ne.Uj)(JSON.stringify({version:2,heartbeats:Ke}));return x._heartbeatsCache.lastSentHeartbeatDate=Ae,Ze.length>0?(x._heartbeatsCache.heartbeats=Ze,yield x._storage.overwrite(x._heartbeatsCache)):(x._heartbeatsCache.heartbeats=[],x._storage.overwrite(x._heartbeatsCache)),Xe}catch(Ae){return ct.warn(Ae),""}})()}}function $i(){return(new Date).toISOString().substring(0,10)}class uh{constructor(x){this.app=x,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.A)(function*(){return!!(0,ne.zW)()&&(0,ne.eX)().then(()=>!0).catch(()=>!1)})()}read(){var x=this;return(0,C.A)(function*(){if(yield x._canUseIndexedDBPromise){const Ae=yield function Sn(J){return Le.apply(this,arguments)}(x.app);return Ae?.heartbeats?Ae:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(x){var Y=this;return(0,C.A)(function*(){var Ae;if(yield Y._canUseIndexedDBPromise){const Ze=yield Y.read();return wn(Y.app,{lastSentHeartbeatDate:null!==(Ae=x.lastSentHeartbeatDate)&&void 0!==Ae?Ae:Ze.lastSentHeartbeatDate,heartbeats:x.heartbeats})}})()}add(x){var Y=this;return(0,C.A)(function*(){var Ae;if(yield Y._canUseIndexedDBPromise){const Ze=yield Y.read();return wn(Y.app,{lastSentHeartbeatDate:null!==(Ae=x.lastSentHeartbeatDate)&&void 0!==Ae?Ae:Ze.lastSentHeartbeatDate,heartbeats:[...Ze.heartbeats,...x.heartbeats]})}})()}}function ss(J){return(0,ne.Uj)(JSON.stringify({version:2,heartbeats:J})).length}!function de(J){En(new ze.uA("platform-logger",x=>new Qt(x),"PRIVATE")),En(new ze.uA("heartbeat",x=>new $e(x),"PRIVATE")),S(Cr,ai,J),S(Cr,ai,"esm2017"),S("fire-js","")}("")},779:(ns,ir,et)=>{et.d(ir,{h1:()=>Hn,uA:()=>Pe});var C=et(467),ze=et(401);class Pe{constructor(oe,me,Ne){this.name=oe,this.instanceFactory=me,this.type=Ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const ne="[DEFAULT]";class It{constructor(oe,me){this.name=oe,this.container=me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const me=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(me)){const Ne=new ze.cY;if(this.instancesDeferred.set(me,Ne),this.isInitialized(me)||this.shouldAutoInitialize())try{const ut=this.getOrInitializeService({instanceIdentifier:me});ut&&Ne.resolve(ut)}catch{}}return this.instancesDeferred.get(me).promise}getImmediate(oe){var me;const Ne=this.normalizeInstanceIdentifier(oe?.identifier),ut=null!==(me=oe?.optional)&&void 0!==me&&me;if(!this.isInitialized(Ne)&&!this.shouldAutoInitialize()){if(ut)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ne})}catch(yt){if(ut)return null;throw yt}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function sn(at){return"EAGER"===at.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[me,Ne]of this.instancesDeferred.entries()){const ut=this.normalizeInstanceIdentifier(me);try{const yt=this.getOrInitializeService({instanceIdentifier:ut});Ne.resolve(yt)}catch{}}}}clearInstance(oe=ne){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,C.A)(function*(){const me=Array.from(oe.instances.values());yield Promise.all([...me.filter(Ne=>"INTERNAL"in Ne).map(Ne=>Ne.INTERNAL.delete()),...me.filter(Ne=>"_delete"in Ne).map(Ne=>Ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=ne){return this.instances.has(oe)}getOptions(oe=ne){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:me={}}=oe,Ne=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(Ne))throw Error(`${this.name}(${Ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ut=this.getOrInitializeService({instanceIdentifier:Ne,options:me});for(const[yt,Yn]of this.instancesDeferred.entries())Ne===this.normalizeInstanceIdentifier(yt)&&Yn.resolve(ut);return ut}onInit(oe,me){var Ne;const ut=this.normalizeInstanceIdentifier(me),yt=null!==(Ne=this.onInitCallbacks.get(ut))&&void 0!==Ne?Ne:new Set;yt.add(oe),this.onInitCallbacks.set(ut,yt);const Yn=this.instances.get(ut);return Yn&&oe(Yn,ut),()=>{yt.delete(oe)}}invokeOnInitCallbacks(oe,me){const Ne=this.onInitCallbacks.get(me);if(Ne)for(const ut of Ne)try{ut(oe,me)}catch{}}getOrInitializeService({instanceIdentifier:oe,options:me={}}){let Ne=this.instances.get(oe);if(!Ne&&this.component&&(Ne=this.component.instanceFactory(this.container,{instanceIdentifier:(at=oe,at===ne?void 0:at),options:me}),this.instances.set(oe,Ne),this.instancesOptions.set(oe,me),this.invokeOnInitCallbacks(Ne,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,Ne)}catch{}var at;return Ne||null}normalizeInstanceIdentifier(oe=ne){return this.component?this.component.multipleInstances?oe:ne:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Hn{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const me=this.getProvider(oe.name);if(me.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);me.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const me=new It(oe,this);return this.providers.set(oe,me),me}getProviders(){return Array.from(this.providers.values())}}},398:(ns,ir,et)=>{et.d(ir,{$b:()=>ze,Ey:()=>at,He:()=>Hn,Vy:()=>sn});const C=[];var ze=function(oe){return oe[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",oe}(ze||{});const Pe={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},ne=ze.INFO,It={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},rn=(oe,me,...Ne)=>{if(me<oe.logLevel)return;const ut=(new Date).toISOString(),yt=It[me];if(!yt)throw new Error(`Attempted to log a message with an invalid logType (value: ${me})`);console[yt](`[${ut}]  ${oe.name}:`,...Ne)};class sn{constructor(me){this.name=me,this._logLevel=ne,this._logHandler=rn,this._userLogHandler=null,C.push(this)}get logLevel(){return this._logLevel}set logLevel(me){if(!(me in ze))throw new TypeError(`Invalid value "${me}" assigned to \`logLevel\``);this._logLevel=me}setLogLevel(me){this._logLevel="string"==typeof me?Pe[me]:me}get logHandler(){return this._logHandler}set logHandler(me){if("function"!=typeof me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=me}get userLogHandler(){return this._userLogHandler}set userLogHandler(me){this._userLogHandler=me}debug(...me){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...me),this._logHandler(this,ze.DEBUG,...me)}log(...me){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...me),this._logHandler(this,ze.VERBOSE,...me)}info(...me){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...me),this._logHandler(this,ze.INFO,...me)}warn(...me){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...me),this._logHandler(this,ze.WARN,...me)}error(...me){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...me),this._logHandler(this,ze.ERROR,...me)}}function Hn(oe){C.forEach(me=>{me.setLogLevel(oe)})}function at(oe,me){for(const Ne of C){let ut=null;me&&me.level&&(ut=Pe[me.level]),Ne.userLogHandler=null===oe?null:(yt,Yn,...Et)=>{const qe=Et.map(nt=>{if(null==nt)return null;if("string"==typeof nt)return nt;if("number"==typeof nt||"boolean"==typeof nt)return nt.toString();if(nt instanceof Error)return nt.message;try{return JSON.stringify(nt)}catch{return null}}).filter(nt=>nt).join(" ");Yn>=(ut??yt.logLevel)&&oe({level:ze[Yn].toLowerCase(),message:qe,args:Et,type:yt.name})}}}},324:(ns,ir,et)=>{var C=et(467),ze=et(574),Pe=et(979),ne=et(401),It=et(398),rn=et(635),sn=et(779);const at={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Yn=function ut(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Et=function yt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new ne.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Jn=new It.Vy("@firebase/auth");function Kt(f,...c){Jn.logLevel<=It.$b.ERROR&&Jn.error(`Auth (${Pe.SDK_VERSION}): ${f}`,...c)}function Tt(f,...c){throw Ot(f,...c)}function Nt(f,...c){return Ot(f,...c)}function fr(f,c,l){const p=Object.assign(Object.assign({},Et()),{[c]:l});return new ne.FA("auth","Firebase",p).create(c,{appName:f.name})}function Be(f){return fr(f,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vn(f,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&Tt(f,"argument-error"),fr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ot(f,...c){if("string"!=typeof f){const l=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(l,...p)}return qe.create(f,...c)}function le(f,c,...l){if(!f)throw Ot(c,...l)}function Qt(f){const c="INTERNAL ASSERTION FAILED: "+f;throw Kt(c),new Error(c)}function Ht(f,c){f||Qt(c)}function Cr(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function ai(){return"http:"===ct()||"https:"===ct()}function ct(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Li{constructor(c,l){this.shortDelay=c,this.longDelay=l,Ht(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,ne.jZ)()||(0,ne.lV)()}get(){return function _s(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ai()||(0,ne.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ys(f,c){Ht(f.emulator,"Emulator should always be set here");const{url:l}=f.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class q{static initialize(c,l,p){this.fetchImpl=c,l&&(this.headersImpl=l),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Qt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Qt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Qt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const X={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},re=new Li(3e4,6e4);function j(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function ee(f,c,l,p){return pe.apply(this,arguments)}function pe(){return(pe=(0,C.A)(function*(f,c,l,p,y={}){return fe(f,y,(0,C.A)(function*(){let E={},R={};p&&("GET"===c?R=p:E={body:JSON.stringify(p)});const U=(0,ne.Am)(Object.assign({key:f.config.apiKey},R)).slice(1),ie=yield f._getAdditionalHeaders();ie["Content-Type"]="application/json",f.languageCode&&(ie["X-Firebase-Locale"]=f.languageCode);const Ie=Object.assign({method:c,headers:ie},E);return(0,ne.c1)()||(Ie.referrerPolicy="no-referrer"),q.fetch()(wt(f,f.config.apiHost,l,U),Ie)}))})).apply(this,arguments)}function fe(f,c,l){return rt.apply(this,arguments)}function rt(){return(rt=(0,C.A)(function*(f,c,l){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},X),c);try{const y=new vi(f),E=yield Promise.race([l(),y.promise]);y.clearNetworkTimeout();const R=yield E.json();if("needConfirmation"in R)throw vt(f,"account-exists-with-different-credential",R);if(E.ok&&!("errorMessage"in R))return R;{const U=E.ok?R.errorMessage:R.error.message,[ie,Ie]=U.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ie)throw vt(f,"credential-already-in-use",R);if("EMAIL_EXISTS"===ie)throw vt(f,"email-already-in-use",R);if("USER_DISABLED"===ie)throw vt(f,"user-disabled",R);const Me=p[ie]||ie.toLowerCase().replace(/[_\s]+/g,"-");if(Ie)throw fr(f,Me,Ie);Tt(f,Me)}}catch(y){if(y instanceof ne.g)throw y;Tt(f,"network-request-failed",{message:String(y)})}})).apply(this,arguments)}function Ct(f,c,l,p){return je.apply(this,arguments)}function je(){return(je=(0,C.A)(function*(f,c,l,p,y={}){const E=yield ee(f,c,l,p,y);return"mfaPendingCredential"in E&&Tt(f,"multi-factor-auth-required",{_serverResponse:E}),E})).apply(this,arguments)}function wt(f,c,l,p){const y=`${c}${l}?${p}`;return f.config.emulator?ys(f.config,y):`${f.config.apiScheme}://${y}`}function fn(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vi{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,p)=>{this.timer=setTimeout(()=>p(Nt(this.auth,"network-request-failed")),re.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vt(f,c,l){const p={appName:f.name};l.email&&(p.email=l.email),l.phoneNumber&&(p.phoneNumber=l.phoneNumber);const y=Nt(f,c,p);return y.customData._tokenResponse=l,y}function Dn(f){return void 0!==f&&void 0!==f.getResponse}function Vn(f){return void 0!==f&&void 0!==f.enterprise}class sr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return fn(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function zn(){return(zn=(0,C.A)(function*(f){return(yield ee(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ys(f,c){return vs.apply(this,arguments)}function vs(){return(vs=(0,C.A)(function*(f,c){return ee(f,"GET","/v2/recaptchaConfig",j(f,c))})).apply(this,arguments)}function Js(){return(Js=(0,C.A)(function*(f,c){return ee(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Zs(){return(Zs=(0,C.A)(function*(f,c){return ee(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ui(f,c){return bn.apply(this,arguments)}function bn(){return(bn=(0,C.A)(function*(f,c){return ee(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function br(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function En(){return(En=(0,C.A)(function*(f,c=!1){const l=(0,ne.Ku)(f),p=yield l.getIdToken(c),y=ji(p);le(y&&y.exp&&y.auth_time&&y.iat,l.auth,"internal-error");const E="object"==typeof y.firebase?y.firebase:void 0,R=E?.sign_in_provider;return{claims:y,token:p,authTime:br(Wo(y.auth_time)),issuedAtTime:br(Wo(y.iat)),expirationTime:br(Wo(y.exp)),signInProvider:R||null,signInSecondFactor:E?.sign_in_second_factor||null}})).apply(this,arguments)}function Wo(f){return 1e3*Number(f)}function ji(f){const[c,l,p]=f.split(".");if(void 0===c||void 0===l||void 0===p)return Kt("JWT malformed, contained fewer than 3 sections"),null;try{const y=(0,ne.u)(l);return y?JSON.parse(y):(Kt("Failed to decode base64 JWT payload"),null)}catch(y){return Kt("Caught error parsing JWT payload as JSON",y?.toString()),null}}function Ko(f){const c=ji(f);return le(c,"internal-error"),le(typeof c.exp<"u","internal-error"),le(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function Sr(f,c){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,C.A)(function*(f,c,l=!1){if(l)return c;try{return yield c}catch(p){throw p instanceof ne.g&&function Is({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class pr{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const y=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,y)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,C.A)(function*(){yield l.iteration()}),p)}iteration(){var c=this;return(0,C.A)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class qr{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=br(this.lastLoginAt),this.creationTime=br(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Rr(f){return eo.apply(this,arguments)}function eo(){return(eo=(0,C.A)(function*(f){var c;const l=f.auth,p=yield f.getIdToken(),y=yield Sr(f,ui(l,{idToken:p}));le(y?.users.length,l,"internal-error");const E=y.users[0];f._notifyReloadListener(E);const R=null!==(c=E.providerUserInfo)&&void 0!==c&&c.length?Yo(E.providerUserInfo):[],U=function Tc(f,c){return[...f.filter(p=>!c.some(y=>y.providerId===p.providerId)),...c]}(f.providerData,R),Me=!!f.isAnonymous&&!(f.email&&E.passwordHash||U?.length),Re={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:U,metadata:new qr(E.createdAt,E.lastLoginAt),isAnonymous:Me};Object.assign(f,Re)})).apply(this,arguments)}function to(){return(to=(0,C.A)(function*(f){const c=(0,ne.Ku)(f);yield Rr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Yo(f){return f.map(c=>{var{providerId:l}=c,p=(0,rn.Tt)(c,["providerId"]);return{providerId:l,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}function rs(){return(rs=(0,C.A)(function*(f,c){const l=yield fe(f,{},(0,C.A)(function*(){const p=(0,ne.Am)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:y,apiKey:E}=f.config,R=wt(f,y,"/v1/token",`key=${E}`),U=yield f._getAdditionalHeaders();return U["Content-Type"]="application/x-www-form-urlencoded",q.fetch()(R,{method:"POST",headers:U,body:p})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function P(){return(P=(0,C.A)(function*(f,c){return ee(f,"POST","/v2/accounts:revokeToken",j(f,c))})).apply(this,arguments)}class k{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){le(c.idToken,"internal-error"),le(typeof c.idToken<"u","internal-error"),le(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):Ko(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}updateFromIdToken(c){le(0!==c.length,"internal-error");const l=Ko(c);this.updateTokensAndExpiration(c,null,l)}getToken(c,l=!1){var p=this;return(0,C.A)(function*(){return l||!p.accessToken||p.isExpired?(le(p.refreshToken,c,"user-token-expired"),p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null):p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var p=this;return(0,C.A)(function*(){const{accessToken:y,refreshToken:E,expiresIn:R}=yield function Jo(f,c){return rs.apply(this,arguments)}(c,l);p.updateTokensAndExpiration(y,E,Number(R))})()}updateTokensAndExpiration(c,l,p){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,l){const{refreshToken:p,accessToken:y,expirationTime:E}=l,R=new k;return p&&(le("string"==typeof p,"internal-error",{appName:c}),R.refreshToken=p),y&&(le("string"==typeof y,"internal-error",{appName:c}),R.accessToken=y),E&&(le("number"==typeof E,"internal-error",{appName:c}),R.expirationTime=E),R}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new k,this.toJSON())}_performRefresh(){return Qt("not implemented")}}function B(f,c){le("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class W{constructor(c){var{uid:l,auth:p,stsTokenManager:y}=c,E=(0,rn.Tt)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=p,this.stsTokenManager=y,this.accessToken=y.accessToken,this.displayName=E.displayName||null,this.email=E.email||null,this.emailVerified=E.emailVerified||!1,this.phoneNumber=E.phoneNumber||null,this.photoURL=E.photoURL||null,this.isAnonymous=E.isAnonymous||!1,this.tenantId=E.tenantId||null,this.providerData=E.providerData?[...E.providerData]:[],this.metadata=new qr(E.createdAt||void 0,E.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,C.A)(function*(){const p=yield Sr(l,l.stsTokenManager.getToken(l.auth,c));return le(p,l.auth,"internal-error"),l.accessToken!==p&&(l.accessToken=p,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),p})()}getIdTokenResult(c){return function Bi(f){return En.apply(this,arguments)}(this,c)}reload(){return function Qo(f){return to.apply(this,arguments)}(this)}_assign(c){this!==c&&(le(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new W(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var p=this;return(0,C.A)(function*(){let y=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),y=!0),l&&(yield Rr(p)),yield p.auth._persistUserIfCurrent(p),y&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,C.A)(function*(){if((0,Pe._isFirebaseServerApp)(c.auth.app))return Promise.reject(Be(c.auth));const l=yield c.getIdToken();return yield Sr(c,function Ac(f,c){return Js.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var p,y,E,R,U,ie,Ie,Me;const Re=null!==(p=l.displayName)&&void 0!==p?p:void 0,un=null!==(y=l.email)&&void 0!==y?y:void 0,Ci=null!==(E=l.phoneNumber)&&void 0!==E?E:void 0,Io=null!==(R=l.photoURL)&&void 0!==R?R:void 0,yf=null!==(U=l.tenantId)&&void 0!==U?U:void 0,vf=null!==(ie=l._redirectEventId)&&void 0!==ie?ie:void 0,If=null!==(Ie=l.createdAt)&&void 0!==Ie?Ie:void 0,pE=null!==(Me=l.lastLoginAt)&&void 0!==Me?Me:void 0,{uid:Al,emailVerified:gE,isAnonymous:Wm,providerData:Ef,stsTokenManager:Tl}=l;le(Al&&Tl,c,"internal-error");const wb=k.fromJSON(this.name,Tl);le("string"==typeof Al,c,"internal-error"),B(Re,c.name),B(un,c.name),le("boolean"==typeof gE,c,"internal-error"),le("boolean"==typeof Wm,c,"internal-error"),B(Ci,c.name),B(Io,c.name),B(yf,c.name),B(vf,c.name),B(If,c.name),B(pE,c.name);const Km=new W({uid:Al,auth:c,email:un,emailVerified:gE,displayName:Re,isAnonymous:Wm,photoURL:Io,phoneNumber:Ci,tenantId:yf,stsTokenManager:wb,createdAt:If,lastLoginAt:pE});return Ef&&Array.isArray(Ef)&&(Km.providerData=Ef.map(wf=>Object.assign({},wf))),vf&&(Km._redirectEventId=vf),Km}static _fromIdTokenResponse(c,l,p=!1){return(0,C.A)(function*(){const y=new k;y.updateFromServerResponse(l);const E=new W({uid:l.localId,auth:c,stsTokenManager:y,isAnonymous:p});return yield Rr(E),E})()}static _fromGetAccountInfoResponse(c,l,p){return(0,C.A)(function*(){const y=l.users[0];le(void 0!==y.localId,"internal-error");const E=void 0!==y.providerUserInfo?Yo(y.providerUserInfo):[],R=!(y.email&&y.passwordHash||E?.length),U=new k;U.updateFromIdToken(p);const ie=new W({uid:y.localId,auth:c,stsTokenManager:U,isAnonymous:R}),Ie={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:E,metadata:new qr(y.createdAt,y.lastLoginAt),isAnonymous:!(y.email&&y.passwordHash||E?.length)};return Object.assign(ie,Ie),ie})()}}const Se=new Map;function Ce(f){Ht(f instanceof Function,"Expected a class definition");let c=Se.get(f);return c?(Ht(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,Se.set(f,c),c)}const Sn=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.A)(function*(){return!0})()}_set(l,p){var y=this;return(0,C.A)(function*(){y.storage[l]=p})()}_get(l){var p=this;return(0,C.A)(function*(){const y=p.storage[l];return void 0===y?null:y})()}_remove(l){var p=this;return(0,C.A)(function*(){delete p.storage[l]})()}_addListener(l,p){}_removeListener(l,p){}}return f.type="NONE",f})();function Le(f,c,l){return`firebase:${f}:${c}:${l}`}class wn{constructor(c,l,p){this.persistence=c,this.auth=l,this.userKey=p;const{config:y,name:E}=this.auth;this.fullUserKey=Le(this.userKey,y.apiKey,E),this.fullPersistenceKey=Le("persistence",y.apiKey,E),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,C.A)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?W._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,C.A)(function*(){if(l.persistence===c)return;const p=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,p?l.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,p="authUser"){return(0,C.A)(function*(){if(!l.length)return new wn(Ce(Sn),c,p);const y=(yield Promise.all(l.map(function(){var Ie=(0,C.A)(function*(Me){if(yield Me._isAvailable())return Me});return function(Me){return Ie.apply(this,arguments)}}()))).filter(Ie=>Ie);let E=y[0]||Ce(Sn);const R=Le(p,c.config.apiKey,c.name);let U=null;for(const Ie of l)try{const Me=yield Ie._get(R);if(Me){const Re=W._fromJSON(c,Me);Ie!==E&&(U=Re),E=Ie;break}}catch{}const ie=y.filter(Ie=>Ie._shouldAllowMigration);return E._shouldAllowMigration&&ie.length?(E=ie[0],U&&(yield E._set(R,U.toJSON())),yield Promise.all(l.map(function(){var Ie=(0,C.A)(function*(Me){if(Me!==E)try{yield Me._remove(R)}catch{}});return function(Me){return Ie.apply(this,arguments)}}())),new wn(E,c,p)):new wn(E,c,p)})()}}function Ue(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if($e(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Xn(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(Zo(c))return"Blackberry";if(uh(c))return"Webos";if(is(c))return"Safari";if((c.includes("chrome/")||Dt(c))&&!c.includes("edge/"))return"Chrome";if($i(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Xn(f=(0,ne.ZQ)()){return/firefox\//i.test(f)}function is(f=(0,ne.ZQ)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Dt(f=(0,ne.ZQ)()){return/crios\//i.test(f)}function $e(f=(0,ne.ZQ)()){return/iemobile/i.test(f)}function $i(f=(0,ne.ZQ)()){return/android/i.test(f)}function Zo(f=(0,ne.ZQ)()){return/blackberry/i.test(f)}function uh(f=(0,ne.ZQ)()){return/webos/i.test(f)}function ss(f=(0,ne.ZQ)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Y(f=(0,ne.ZQ)()){return ss(f)||$i(f)||uh(f)||Zo(f)||/windows phone/i.test(f)||$e(f)}function Ae(f,c=[]){let l;switch(f){case"Browser":l=Ue((0,ne.ZQ)());break;case"Worker":l=`${Ue((0,ne.ZQ)())}-${f}`;break;default:l=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Pe.SDK_VERSION}/${p}`}class Ke{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const p=E=>new Promise((R,U)=>{try{R(c(E))}catch(ie){U(ie)}});p.onAbort=l,this.queue.push(p);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,C.A)(function*(){if(l.auth.currentUser===c)return;const p=[];try{for(const y of l.queue)yield y(c),y.onAbort&&p.push(y.onAbort)}catch(y){p.reverse();for(const E of p)try{E()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:y?.message})}})()}}function Xe(){return(Xe=(0,C.A)(function*(f,c={}){return ee(f,"GET","/v2/passwordPolicy",j(f,c))})).apply(this,arguments)}class on{constructor(c){var l,p,y,E;const R=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=R.minPasswordLength)&&void 0!==l?l:6,R.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=R.maxPasswordLength),void 0!==R.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=R.containsLowercaseCharacter),void 0!==R.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=R.containsUppercaseCharacter),void 0!==R.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=R.containsNumericCharacter),void 0!==R.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=R.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(y=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==y?y:"",this.forceUpgradeOnSignin=null!==(E=c.forceUpgradeOnSignin)&&void 0!==E&&E,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,p,y,E,R,U;const ie={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,ie),this.validatePasswordCharacterOptions(c,ie),ie.isValid&&(ie.isValid=null===(l=ie.meetsMinPasswordLength)||void 0===l||l),ie.isValid&&(ie.isValid=null===(p=ie.meetsMaxPasswordLength)||void 0===p||p),ie.isValid&&(ie.isValid=null===(y=ie.containsLowercaseLetter)||void 0===y||y),ie.isValid&&(ie.isValid=null===(E=ie.containsUppercaseLetter)||void 0===E||E),ie.isValid&&(ie.isValid=null===(R=ie.containsNumericCharacter)||void 0===R||R),ie.isValid&&(ie.isValid=null===(U=ie.containsNonAlphanumericCharacter)||void 0===U||U),ie}validatePasswordLengthOptions(c,l){const p=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;p&&(l.meetsMinPasswordLength=c.length>=p),y&&(l.meetsMaxPasswordLength=c.length<=y)}validatePasswordCharacterOptions(c,l){let p;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let y=0;y<c.length;y++)p=c.charAt(y),this.updatePasswordCharacterOptionsStatuses(l,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,l,p,y,E){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=E))}}class Gr{constructor(c,l,p,y){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=p,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hi(this),this.idTokenSubscription=new Hi(this),this.beforeStateQueue=new Ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(c,l){var p=this;return l&&(this._popupRedirectResolver=Ce(l)),this._initializationPromise=this.queue((0,C.A)(function*(){var y,E;if(!p._deleted&&(p.persistenceManager=yield wn.create(p,c),!p._deleted)){if(null!==(y=p._popupRedirectResolver)&&void 0!==y&&y._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(l),p.lastNotifiedUid=(null===(E=p.currentUser)||void 0===E?void 0:E.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,C.A)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUserFromIdToken(c){var l=this;return(0,C.A)(function*(){try{const p=yield ui(l,{idToken:c}),y=yield W._fromGetAccountInfoResponse(l,p,c);yield l.directlySetCurrentUser(y)}catch(p){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",p),yield l.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var l=this;return(0,C.A)(function*(){var p;if((0,Pe._isFirebaseServerApp)(l.app)){const U=l.app.settings.authIdToken;return U?new Promise(ie=>{setTimeout(()=>l.initializeCurrentUserFromIdToken(U).then(ie,ie))}):l.directlySetCurrentUser(null)}const y=yield l.assertedPersistence.getCurrentUser();let E=y,R=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const U=null===(p=l.redirectUser)||void 0===p?void 0:p._redirectEventId,ie=E?._redirectEventId,Ie=yield l.tryRedirectSignIn(c);(!U||U===ie)&&Ie?.user&&(E=Ie.user,R=!0)}if(!E)return l.directlySetCurrentUser(null);if(!E._redirectEventId){if(R)try{yield l.beforeStateQueue.runMiddleware(E)}catch(U){E=y,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(U))}return E?l.reloadAndSetCurrentUserOrClear(E):l.directlySetCurrentUser(null)}return le(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===E._redirectEventId?l.directlySetCurrentUser(E):l.reloadAndSetCurrentUserOrClear(E)})()}tryRedirectSignIn(c){var l=this;return(0,C.A)(function*(){let p=null;try{p=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,C.A)(function*(){try{yield Rr(c)}catch(p){if("auth/network-request-failed"!==p?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Go(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,C.A)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,C.A)(function*(){if((0,Pe._isFirebaseServerApp)(l.app))return Promise.reject(Be(l));const p=c?(0,ne.Ku)(c):null;return p&&le(p.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(p&&p._clone(l))})()}_updateCurrentUser(c,l=!1){var p=this;return(0,C.A)(function*(){if(!p._deleted)return c&&le(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),l||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,C.A)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,C.A)(function*(){return(0,Pe._isFirebaseServerApp)(c.app)?Promise.reject(Be(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var l=this;return(0,Pe._isFirebaseServerApp)(this.app)?Promise.reject(Be(this)):this.queue((0,C.A)(function*(){yield l.assertedPersistence.setPersistence(Ce(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,C.A)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const p=l._getPasswordPolicyInternal();return p.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,C.A)(function*(){const l=yield function Ze(f){return Xe.apply(this,arguments)}(c),p=new on(l);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new ne.FA("auth","Firebase",c())}onAuthStateChanged(c,l,p){return this.registerStateListener(this.authStateSubscription,c,l,p)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,p){return this.registerStateListener(this.idTokenSubscription,c,l,p)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,C.A)(function*(){if(l.currentUser){const p=yield l.currentUser.getIdToken(),y={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=l.tenantId&&(y.tenantId=l.tenantId),yield function S(f,c){return P.apply(this,arguments)}(l,y)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var p=this;return(0,C.A)(function*(){const y=yield p.getOrInitRedirectPersistenceManager(l);return null===c?y.removeCurrentUser():y.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,C.A)(function*(){if(!l.redirectPersistenceManager){const p=c&&Ce(c)||l._popupRedirectResolver;le(p,l,"argument-error"),l.redirectPersistenceManager=yield wn.create(l,[Ce(p._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,C.A)(function*(){var p,y;return l._isInitialized&&(yield l.queue((0,C.A)(function*(){}))),(null===(p=l._currentUser)||void 0===p?void 0:p._redirectEventId)===c?l._currentUser:(null===(y=l.redirectUser)||void 0===y?void 0:y._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,C.A)(function*(){if(c===l.currentUser)return l.queue((0,C.A)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,p,y){if(this._deleted)return()=>{};const E="function"==typeof l?l:l.next.bind(l);let R=!1;const U=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(U,this,"internal-error"),U.then(()=>{R||E(this.currentUser)}),"function"==typeof l){const ie=c.addObserver(l,p,y);return()=>{R=!0,ie()}}{const ie=c.addObserver(l);return()=>{R=!0,ie()}}}directlySetCurrentUser(c){var l=this;return(0,C.A)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Ae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,C.A)(function*(){var l;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const y=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();y&&(p["X-Firebase-Client"]=y);const E=yield c._getAppCheckToken();return E&&(p["X-Firebase-AppCheck"]=E),p})()}_getAppCheckToken(){var c=this;return(0,C.A)(function*(){var l;const p=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return p?.error&&function Zn(f,...c){Jn.logLevel<=It.$b.WARN&&Jn.warn(`Auth (${Pe.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function bt(f){return(0,ne.Ku)(f)}class Hi{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,ne.tD)(l=>this.observer=l)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Cc={loadJS:()=>(0,C.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kg(f){return Cc.loadJS(f)}function Vg(f){return`__${f}${Math.floor(1e6*Math.random())}`}class Ge{constructor(c){this.type="recaptcha-enterprise",this.auth=bt(c)}verify(c="verify",l=!1){var p=this;return(0,C.A)(function*(){function E(){return E=(0,C.A)(function*(U){if(!l){if(null==U.tenantId&&null!=U._agentRecaptchaConfig)return U._agentRecaptchaConfig.siteKey;if(null!=U.tenantId&&void 0!==U._tenantRecaptchaConfigs[U.tenantId])return U._tenantRecaptchaConfigs[U.tenantId].siteKey}return new Promise(function(){var ie=(0,C.A)(function*(Ie,Me){Ys(U,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Re=>{if(void 0!==Re.recaptchaKey){const un=new sr(Re);return null==U.tenantId?U._agentRecaptchaConfig=un:U._tenantRecaptchaConfigs[U.tenantId]=un,Ie(un.siteKey)}Me(new Error("recaptcha Enterprise site key undefined"))}).catch(Re=>{Me(Re)})});return function(Ie,Me){return ie.apply(this,arguments)}}())}),E.apply(this,arguments)}function R(U,ie,Ie){const Me=window.grecaptcha;Vn(Me)?Me.enterprise.ready(()=>{Me.enterprise.execute(U,{action:c}).then(Re=>{ie(Re)}).catch(()=>{ie("NO_RECAPTCHA")})}):Ie(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((U,ie)=>{(function y(U){return E.apply(this,arguments)})(p.auth).then(Ie=>{if(!l&&Vn(window.grecaptcha))R(Ie,U,ie);else{if(typeof window>"u")return void ie(new Error("RecaptchaVerifier is only supported in browser"));let Me=function gI(){return Cc.recaptchaEnterpriseScript}();0!==Me.length&&(Me+=Ie),kg(Me).then(()=>{R(Ie,U,ie)}).catch(Re=>{ie(Re)})}}).catch(Ie=>{ie(Ie)})})})()}}function mI(f,c,l){return Fg.apply(this,arguments)}function Fg(){return(Fg=(0,C.A)(function*(f,c,l,p=!1){const y=new Ge(f);let E;try{E=yield y.verify(l)}catch{E=yield y.verify(l,!0)}const R=Object.assign({},c);return Object.assign(R,p?{captchaResp:E}:{captchaResponse:E}),Object.assign(R,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(R,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),R})).apply(this,arguments)}function Dc(f,c,l,p){return ke.apply(this,arguments)}function ke(){return ke=(0,C.A)(function*(f,c,l,p){var y;if(null!==(y=f._getRecaptchaConfig())&&void 0!==y&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const E=yield mI(f,c,l,"getOobCode"===l);return p(f,E)}return p(f,c).catch(function(){var E=(0,C.A)(function*(R){if("auth/missing-recaptcha-token"===R.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const U=yield mI(f,c,l,"getOobCode"===l);return p(f,U)}return Promise.reject(R)});return function(R){return E.apply(this,arguments)}}())}),ke.apply(this,arguments)}function Lg(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function nu(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class no{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return Qt("not implemented")}_getIdTokenResponse(c){return Qt("not implemented")}_linkToIdToken(c,l){return Qt("not implemented")}_getReauthenticationResolver(c){return Qt("not implemented")}}function Ug(f,c){return ot.apply(this,arguments)}function ot(){return(ot=(0,C.A)(function*(f,c){return ee(f,"POST","/v1/accounts:resetPassword",j(f,c))})).apply(this,arguments)}function Rc(){return(Rc=(0,C.A)(function*(f,c){return ee(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Pr(f,c){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,C.A)(function*(f,c){return ee(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function kt(){return(kt=(0,C.A)(function*(f,c){return ee(f,"POST","/v1/accounts:update",j(f,c))})).apply(this,arguments)}function Q0(f,c){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,C.A)(function*(f,c){return Ct(f,"POST","/v1/accounts:signInWithPassword",j(f,c))})).apply(this,arguments)}function ye(f,c){return ru.apply(this,arguments)}function ru(){return(ru=(0,C.A)(function*(f,c){return ee(f,"POST","/v1/accounts:sendOobCode",j(f,c))})).apply(this,arguments)}function Mc(){return(Mc=(0,C.A)(function*(f,c){return ye(f,c)})).apply(this,arguments)}function fh(f,c){return ph.apply(this,arguments)}function ph(){return(ph=(0,C.A)(function*(f,c){return ye(f,c)})).apply(this,arguments)}function gh(f,c){return jg.apply(this,arguments)}function jg(){return(jg=(0,C.A)(function*(f,c){return ye(f,c)})).apply(this,arguments)}function $g(){return($g=(0,C.A)(function*(f,c){return ye(f,c)})).apply(this,arguments)}function Hg(){return(Hg=(0,C.A)(function*(f,c){return Ct(f,"POST","/v1/accounts:signInWithEmailLink",j(f,c))})).apply(this,arguments)}function su(){return(su=(0,C.A)(function*(f,c){return Ct(f,"POST","/v1/accounts:signInWithEmailLink",j(f,c))})).apply(this,arguments)}class Es extends no{constructor(c,l,p,y=null){super("password",p),this._email=c,this._password=l,this._tenantId=y}static _fromEmailAndPassword(c,l){return new Es(c,l,"password")}static _fromEmailAndCode(c,l,p=null){return new Es(c,l,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,C.A)(function*(){switch(l.signInMethod){case"password":return Dc(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Q0);case"emailLink":return function J0(f,c){return Hg.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:Tt(c,"internal-error")}})()}_linkToIdToken(c,l){var p=this;return(0,C.A)(function*(){switch(p.signInMethod){case"password":return Dc(c,{idToken:l,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pr);case"emailLink":return function iu(f,c){return su.apply(this,arguments)}(c,{idToken:l,email:p._email,oobCode:p._password});default:Tt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function os(f,c){return mh.apply(this,arguments)}function mh(){return(mh=(0,C.A)(function*(f,c){return Ct(f,"POST","/v1/accounts:signInWithIdp",j(f,c))})).apply(this,arguments)}class Ii extends no{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Ii(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):Tt("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:y}=l,E=(0,rn.Tt)(l,["providerId","signInMethod"]);if(!p||!y)return null;const R=new Ii(p,y);return R.idToken=E.idToken||void 0,R.accessToken=E.accessToken||void 0,R.secret=E.secret,R.nonce=E.nonce,R.pendingToken=E.pendingToken||null,R}_getIdTokenResponse(c){return os(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,os(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,os(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,ne.Am)(l)}return c}}function _h(){return(_h=(0,C.A)(function*(f,c){return ee(f,"POST","/v1/accounts:sendVerificationCode",j(f,c))})).apply(this,arguments)}function yh(){return(yh=(0,C.A)(function*(f,c){return Ct(f,"POST","/v1/accounts:signInWithPhoneNumber",j(f,c))})).apply(this,arguments)}function xc(){return(xc=(0,C.A)(function*(f,c){const l=yield Ct(f,"POST","/v1/accounts:signInWithPhoneNumber",j(f,c));if(l.temporaryProof)throw vt(f,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const be={USER_NOT_FOUND:"user-not-found"};function ou(){return(ou=(0,C.A)(function*(f,c){return Ct(f,"POST","/v1/accounts:signInWithPhoneNumber",j(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),be)})).apply(this,arguments)}class Ei extends no{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new Ei({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new Ei({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function ws(f,c){return yh.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function _e(f,c){return xc.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Nc(f,c){return ou.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:p,verificationCode:y}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:p,code:y}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:p,phoneNumber:y,temporaryProof:E}=c;return p||l||y||E?new Ei({verificationId:l,verificationCode:p,phoneNumber:y,temporaryProof:E}):null}}class au{constructor(c){var l,p,y,E,R,U;const ie=(0,ne.I9)((0,ne.hp)(c)),Ie=null!==(l=ie.apiKey)&&void 0!==l?l:null,Me=null!==(p=ie.oobCode)&&void 0!==p?p:null,Re=function vI(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(y=ie.mode)&&void 0!==y?y:null);le(Ie&&Me&&Re,"argument-error"),this.apiKey=Ie,this.operation=Re,this.code=Me,this.continueUrl=null!==(E=ie.continueUrl)&&void 0!==E?E:null,this.languageCode=null!==(R=ie.languageCode)&&void 0!==R?R:null,this.tenantId=null!==(U=ie.tenantId)&&void 0!==U?U:null}static parseLink(c){const l=function II(f){const c=(0,ne.I9)((0,ne.hp)(f)).link,l=c?(0,ne.I9)((0,ne.hp)(c)).deep_link_id:null,p=(0,ne.I9)((0,ne.hp)(f)).deep_link_id;return(p?(0,ne.I9)((0,ne.hp)(p)).link:null)||p||l||c||f}(c);try{return new au(l)}catch{return null}}}let ea=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(l,p){return Es._fromEmailAndPassword(l,p)}static credentialWithLink(l,p){const y=au.parseLink(p);return le(y,"argument-error"),Es._fromEmailAndCode(l,y.code,y.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Fn{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class gr extends Fn{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class lt extends gr{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return le("providerId"in l&&"signInMethod"in l,"argument-error"),Ii._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return le(c.idToken||c.accessToken,"argument-error"),Ii._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return lt.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return lt.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:p,oauthTokenSecret:y,pendingToken:E,nonce:R,providerId:U}=c;if(!p&&!y&&!l&&!E||!U)return null;try{return new lt(U)._credential({idToken:l,accessToken:p,nonce:R,pendingToken:E})}catch{return null}}}let uu=(()=>{class f extends gr{constructor(){super("facebook.com")}static credential(l){return Ii._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),Oc=(()=>{class f extends gr{constructor(){super("google.com"),this.addScope("profile")}static credential(l,p){return Ii._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:p})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:p,oauthAccessToken:y}=l;if(!p&&!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),kc=(()=>{class f extends gr{constructor(){super("github.com")}static credential(l){return Ii._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class Mr extends no{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return os(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,os(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,os(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:y,pendingToken:E}=l;return p&&y&&E&&p===y?new Mr(p,E):null}static _create(c,l){return new Mr(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class lu extends Fn{constructor(c){le(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return lu.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return lu.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=Mr.fromJSON(c);return le(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:p}=c;if(!l||!p)return null;try{return Mr._create(p,l)}catch{return null}}}let vh=(()=>{class f extends gr{constructor(){super("twitter.com")}static credential(l,p){return Ii._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:p})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:p,oauthTokenSecret:y}=l;if(!p||!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Vc(f,c){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,C.A)(function*(f,c){return Ct(f,"POST","/v1/accounts:signUp",j(f,c))})).apply(this,arguments)}class Wr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,p,y=!1){return(0,C.A)(function*(){const E=yield W._fromIdTokenResponse(c,p,y),R=ta(p);return new Wr({user:E,providerId:R,_tokenResponse:p,operationType:l})})()}static _forOperation(c,l,p){return(0,C.A)(function*(){yield c._updateTokensIfNecessary(p,!0);const y=ta(p);return new Wr({user:c,providerId:y,_tokenResponse:p,operationType:l})})()}}function ta(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function Lc(){return(Lc=(0,C.A)(function*(f){var c;if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(Be(f));const l=bt(f);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new Wr({user:l.currentUser,providerId:null,operationType:"signIn"});const p=yield Vc(l,{returnSecureToken:!0}),y=yield Wr._fromIdTokenResponse(l,"signIn",p,!0);return yield l._updateCurrentUser(y.user),y})).apply(this,arguments)}class Uc extends ne.g{constructor(c,l,p,y){var E;super(l.code,l.message),this.operationType=p,this.user=y,Object.setPrototypeOf(this,Uc.prototype),this.customData={appName:c.name,tenantId:null!==(E=c.tenantId)&&void 0!==E?E:void 0,_serverResponse:l.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,l,p,y){return new Uc(c,l,p,y)}}function Ih(f,c,l,p){return("reauthenticate"===c?l._getReauthenticationResolver(f):l._getIdTokenResponse(f)).catch(E=>{throw"auth/multi-factor-auth-required"===E.code?Uc._fromErrorAndOperation(f,E,c,p):E})}function Gg(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function Kr(){return Kr=(0,C.A)(function*(f,c){const l=(0,ne.Ku)(f);yield jc(!0,l,c);const{providerUserInfo:p}=yield function Ui(f,c){return Zs.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),y=Gg(p||[]);return l.providerData=l.providerData.filter(E=>y.has(E.providerId)),y.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),Kr.apply(this,arguments)}function Eh(f,c){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,C.A)(function*(f,c,l=!1){const p=yield Sr(f,c._linkToIdToken(f.auth,yield f.getIdToken()),l);return Wr._forOperation(f,"link",p)})).apply(this,arguments)}function jc(f,c,l){return wh.apply(this,arguments)}function wh(){return(wh=(0,C.A)(function*(f,c,l){yield Rr(c);const y=!1===f?"provider-already-linked":"no-such-provider";le(Gg(c.providerData).has(l)===f,c.auth,y)})).apply(this,arguments)}function Wg(f,c){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,C.A)(function*(f,c,l=!1){const{auth:p}=f;if((0,Pe._isFirebaseServerApp)(p.app))return Promise.reject(Be(p));const y="reauthenticate";try{const E=yield Sr(f,Ih(p,y,c,f),l);le(E.idToken,p,"internal-error");const R=ji(E.idToken);le(R,p,"internal-error");const{sub:U}=R;return le(f.uid===U,p,"user-mismatch"),Wr._forOperation(f,y,E)}catch(E){throw"auth/user-not-found"===E?.code&&Tt(p,"user-mismatch"),E}})).apply(this,arguments)}function Th(f,c){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,C.A)(function*(f,c,l=!1){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(Be(f));const p="signIn",y=yield Ih(f,p,c),E=yield Wr._fromIdTokenResponse(f,p,y);return l||(yield f._updateCurrentUser(E.user)),E})).apply(this,arguments)}function $c(f,c){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,C.A)(function*(f,c){return Th(bt(f),c)})).apply(this,arguments)}function wi(f,c){return bh.apply(this,arguments)}function bh(){return(bh=(0,C.A)(function*(f,c){const l=(0,ne.Ku)(f);return yield jc(!1,l,c.providerId),Eh(l,c)})).apply(this,arguments)}function Kg(f,c){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,C.A)(function*(f,c){return Wg((0,ne.Ku)(f),c)})).apply(this,arguments)}function Rh(){return(Rh=(0,C.A)(function*(f,c){return Ct(f,"POST","/v1/accounts:signInWithCustomToken",j(f,c))})).apply(this,arguments)}function We(){return We=(0,C.A)(function*(f,c){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(Be(f));const l=bt(f),p=yield function Qr(f,c){return Rh.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),y=yield Wr._fromIdTokenResponse(l,"signIn",p);return yield l._updateCurrentUser(y.user),y}),We.apply(this,arguments)}class qn{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?ft._fromServerResponse(c,l):"totpInfo"in l?Ln._fromServerResponse(c,l):Tt(c,"internal-error")}}class ft extends qn{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new ft(l)}}class Ln extends qn{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new Ln(l)}}function Gn(f,c,l){var p;le((null===(p=l.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),le(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(le(l.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(le(l.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function Ts(f){return mr.apply(this,arguments)}function mr(){return(mr=(0,C.A)(function*(f){const c=bt(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Hc(){return(Hc=(0,C.A)(function*(f,c,l){const p=bt(f),y={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&Gn(p,y,l),yield Dc(p,y,"getOobCode",fh)})).apply(this,arguments)}function Ph(){return Ph=(0,C.A)(function*(f,c,l){yield Ug((0,ne.Ku)(f),{oobCode:c,newPassword:l}).catch(function(){var p=(0,C.A)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&Ts(f),y});return function(y){return p.apply(this,arguments)}}())}),Ph.apply(this,arguments)}function Yt(){return Yt=(0,C.A)(function*(f,c){yield function K0(f,c){return kt.apply(this,arguments)}((0,ne.Ku)(f),{oobCode:c})}),Yt.apply(this,arguments)}function De(f,c){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,C.A)(function*(f,c){const l=(0,ne.Ku)(f),p=yield Ug(l,{oobCode:c}),y=p.requestType;switch(le(y,l,"internal-error"),y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(p.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(p.mfaInfo,l,"internal-error");default:le(p.email,l,"internal-error")}let E=null;return p.mfaInfo&&(E=qn._fromServerResponse(bt(l),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:E},operation:y}})).apply(this,arguments)}function Yr(){return(Yr=(0,C.A)(function*(f,c){const{data:l}=yield De((0,ne.Ku)(f),c);return l.email})).apply(this,arguments)}function Wn(){return(Wn=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(Be(f));const p=bt(f),R=yield Dc(p,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vc).catch(ie=>{throw"auth/password-does-not-meet-requirements"===ie.code&&Ts(f),ie}),U=yield Wr._fromIdTokenResponse(p,"signIn",R);return yield p._updateCurrentUser(U.user),U})).apply(this,arguments)}function zi(){return(zi=(0,C.A)(function*(f,c,l){const p=bt(f),y={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function E(R,U){le(U.handleCodeInApp,p,"argument-error"),U&&Gn(p,R,U)})(y,l),yield Dc(p,y,"getOobCode",gh)})).apply(this,arguments)}function ro(){return(ro=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(Be(f));const p=(0,ne.Ku)(f),y=ea.credentialWithLink(c,l||Cr());return le(y._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),$c(p,y)})).apply(this,arguments)}function Cs(){return(Cs=(0,C.A)(function*(f,c){return ee(f,"POST","/v1/accounts:createAuthUri",j(f,c))})).apply(this,arguments)}function io(){return io=(0,C.A)(function*(f,c){const p={identifier:c,continueUri:ai()?Cr():"http://localhost"},{signinMethods:y}=yield function Jg(f,c){return Cs.apply(this,arguments)}((0,ne.Ku)(f),p);return y||[]}),io.apply(this,arguments)}function li(){return li=(0,C.A)(function*(f,c){const l=(0,ne.Ku)(f),y={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&Gn(l.auth,y,c);const{email:E}=yield function hh(f,c){return Mc.apply(this,arguments)}(l.auth,y);E!==f.email&&(yield f.reload())}),li.apply(this,arguments)}function qc(){return qc=(0,C.A)(function*(f,c,l){const p=(0,ne.Ku)(f),E={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};l&&Gn(p.auth,E,l);const{email:R}=yield function Y0(f,c){return $g.apply(this,arguments)}(p.auth,E);R!==f.email&&(yield f.reload())}),qc.apply(this,arguments)}function Ai(){return(Ai=(0,C.A)(function*(f,c){return ee(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function so(){return so=(0,C.A)(function*(f,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const p=(0,ne.Ku)(f),E={idToken:yield p.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},R=yield Sr(p,function Ds(f,c){return Ai.apply(this,arguments)}(p.auth,E));p.displayName=R.displayName||null,p.photoURL=R.photoUrl||null;const U=p.providerData.find(({providerId:ie})=>"password"===ie);U&&(U.displayName=p.displayName,U.photoURL=p.photoURL),yield p._updateTokensIfNecessary(R)}),so.apply(this,arguments)}function Gc(f,c,l){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,C.A)(function*(f,c,l){const{auth:p}=f,E={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(E.email=c),l&&(E.password=l);const R=yield Sr(f,function dh(f,c){return Rc.apply(this,arguments)}(p,E));yield f._updateTokensIfNecessary(R,!0)}),Wc.apply(this,arguments)}class as{constructor(c,l,p={}){this.isNewUser=c,this.providerId=l,this.profile=p}}class oo extends as{constructor(c,l,p,y){super(c,l,p),this.username=y}}class pu extends as{constructor(c,l){super(c,"facebook.com",l)}}class er extends oo{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class X0 extends as{constructor(c,l){super(c,"google.com",l)}}class xr extends oo{constructor(c,l,p){super(c,"twitter.com",l,p)}}function _r(f){const{user:c,_tokenResponse:l}=f;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function qi(f){var c,l;if(!f)return null;const{providerId:p}=f,y=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},E=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const R=null===(l=null===(c=ji(f.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(R)return new as(E,"anonymous"!==R&&"custom"!==R?R:null)}if(!p)return null;switch(p){case"facebook.com":return new pu(E,y);case"github.com":return new er(E,y);case"google.com":return new X0(E,y);case"twitter.com":return new xr(E,y,f.screenName||null);case"custom":case"anonymous":return new as(E,null);default:return new as(E,p,y)}}(l)}class oa{constructor(c,l,p){this.type=c,this.credential=l,this.user=p}static _fromIdtoken(c,l){return new oa("enroll",c,l)}static _fromMfaPendingCredential(c){return new oa("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,p;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return oa._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return oa._fromIdtoken(c.multiFactorSession.idToken)}return null}}class em{constructor(c,l,p){this.session=c,this.hints=l,this.signInResolver=p}static _fromError(c,l){const p=bt(c),y=l.customData._serverResponse,E=(y.mfaInfo||[]).map(U=>qn._fromServerResponse(p,U));le(y.mfaPendingCredential,p,"internal-error");const R=oa._fromMfaPendingCredential(y.mfaPendingCredential);return new em(R,E,function(){var U=(0,C.A)(function*(ie){const Ie=yield ie._process(p,R);delete y.mfaInfo,delete y.mfaPendingCredential;const Me=Object.assign(Object.assign({},y),{idToken:Ie.idToken,refreshToken:Ie.refreshToken});switch(l.operationType){case"signIn":const Re=yield Wr._fromIdTokenResponse(p,l.operationType,Me);return yield p._updateCurrentUser(Re.user),Re;case"reauthenticate":return le(l.user,p,"internal-error"),Wr._forOperation(l.user,l.operationType,Me);default:Tt(p,"internal-error")}});return function(ie){return U.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,C.A)(function*(){return l.signInResolver(c)})()}}class tm{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(p=>qn._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new tm(c)}getSession(){var c=this;return(0,C.A)(function*(){return oa._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var p=this;return(0,C.A)(function*(){const y=c,E=yield p.getSession(),R=yield Sr(p.user,y._process(p.user.auth,E,l));return yield p.user._updateTokensIfNecessary(R),p.user.reload()})()}unenroll(c){var l=this;return(0,C.A)(function*(){const p="string"==typeof c?c:c.uid,y=yield l.user.getIdToken();try{const E=yield Sr(l.user,function ab(f,c){return ee(f,"POST","/v2/accounts/mfaEnrollment:withdraw",j(f,c))}(l.user.auth,{idToken:y,mfaEnrollmentId:p}));l.enrolledFactors=l.enrolledFactors.filter(({uid:R})=>R!==p),yield l.user._updateTokensIfNecessary(E),yield l.user.reload()}catch(E){throw E}})()}}const Kc=new WeakMap,Nh="__sak";class TI{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Oh=(()=>{class f extends TI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,p)=>this.onStorageEvent(l,p),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Y(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const p of Object.keys(this.listeners)){const y=this.storage.getItem(p),E=this.localCache[p];y!==E&&l(p,E,y)}}onStorageEvent(l,p=!1){if(!l.key)return void this.forAllChangedKeys((U,ie,Ie)=>{this.notifyListeners(U,Ie)});const y=l.key;p?this.detachListener():this.stopPolling();const E=()=>{const U=this.storage.getItem(y);!p&&this.localCache[y]===U||this.notifyListeners(y,U)},R=this.storage.getItem(y);!function x(){return(0,ne.lT)()&&10===document.documentMode}()||R===l.newValue||l.newValue===l.oldValue?E():setTimeout(E,10)}notifyListeners(l,p){this.localCache[l]=p;const y=this.listeners[l];if(y)for(const E of Array.from(y))E(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,p,y)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:p,newValue:y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,p){var y=()=>super._set,E=this;return(0,C.A)(function*(){yield y().call(E,l,p),E.localCache[l]=JSON.stringify(p)})()}_get(l){var p=()=>super._get,y=this;return(0,C.A)(function*(){const E=yield p().call(y,l);return y.localCache[l]=JSON.stringify(E),E})()}_remove(l){var p=()=>super._remove,y=this;return(0,C.A)(function*(){yield p().call(y,l),delete y.localCache[l]})()}}return f.type="LOCAL",f})(),Zt=(()=>{class f extends TI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,p){}_removeListener(l,p){}}return f.type="SESSION",f})();let di=(()=>{class f{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const p=this.receivers.find(E=>E.isListeningto(l));if(p)return p;const y=new f(l);return this.receivers.push(y),y}isListeningto(l){return this.eventTarget===l}handleEvent(l){var p=this;return(0,C.A)(function*(){const y=l,{eventId:E,eventType:R,data:U}=y.data,ie=p.handlersMap[R];if(!ie?.size)return;y.ports[0].postMessage({status:"ack",eventId:E,eventType:R});const Ie=Array.from(ie).map(function(){var Re=(0,C.A)(function*(un){return un(y.origin,U)});return function(un){return Re.apply(this,arguments)}}()),Me=yield function Qc(f){return Promise.all(f.map(function(){var c=(0,C.A)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(p){return{fulfilled:!1,reason:p}}});return function(l){return c.apply(this,arguments)}}()))}(Ie);y.ports[0].postMessage({status:"done",eventId:E,eventType:R,response:Me})})()}_subscribe(l,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(p)}_unsubscribe(l,p){this.handlersMap[l]&&p&&this.handlersMap[l].delete(p),(!p||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function aa(f="",c=10){let l="";for(let p=0;p<c;p++)l+=Math.floor(10*Math.random());return f+l}class rm{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,p=50){var y=this;return(0,C.A)(function*(){const E=typeof MessageChannel<"u"?new MessageChannel:null;if(!E)throw new Error("connection_unavailable");let R,U;return new Promise((ie,Ie)=>{const Me=aa("",20);E.port1.start();const Re=setTimeout(()=>{Ie(new Error("unsupported_event"))},p);U={messageChannel:E,onMessage(un){const Ci=un;if(Ci.data.eventId===Me)switch(Ci.data.status){case"ack":clearTimeout(Re),R=setTimeout(()=>{Ie(new Error("timeout"))},3e3);break;case"done":clearTimeout(R),ie(Ci.data.response);break;default:clearTimeout(Re),clearTimeout(R),Ie(new Error("invalid_response"))}}},y.handlers.add(U),E.port1.addEventListener("message",U.onMessage),y.target.postMessage({eventType:c,eventId:Me,data:l},[E.port2])}).finally(()=>{U&&y.removeMessageHandler(U)})})()}}function Cn(){return window}function gu(){return typeof Cn().WorkerGlobalScope<"u"&&"function"==typeof Cn().importScripts}function mu(){return(mu=(0,C.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Vh="firebaseLocalStorageDb",co="firebaseLocalStorage",ua="fbase_key";class Gi{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function _u(f,c){return f.transaction([co],c?"readwrite":"readonly").objectStore(co)}function um(){const f=indexedDB.open(Vh,1);return new Promise((c,l)=>{f.addEventListener("error",()=>{l(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(co,{keyPath:ua})}catch(y){l(y)}}),f.addEventListener("success",(0,C.A)(function*(){const p=f.result;p.objectStoreNames.contains(co)?c(p):(p.close(),yield function cb(){const f=indexedDB.deleteDatabase(Vh);return new Gi(f).toPromise()}(),c(yield um()))}))})}function CI(f,c,l){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,C.A)(function*(f,c,l){const p=_u(f,!0).put({[ua]:c,value:l});return new Gi(p).toPromise()})).apply(this,arguments)}function cm(){return(cm=(0,C.A)(function*(f,c){const l=_u(f,!1).get(c),p=yield new Gi(l).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Lh(f,c){const l=_u(f,!0).delete(c);return new Gi(l).toPromise()}const yu=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,C.A)(function*(){return l.db||(l.db=yield um()),l.db})()}_withRetries(l){var p=this;return(0,C.A)(function*(){let y=0;for(;;)try{const E=yield p._openDb();return yield l(E)}catch(E){if(y++>3)throw E;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,C.A)(function*(){return gu()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,C.A)(function*(){l.receiver=di._getInstance(function om(){return gu()?self:null}()),l.receiver._subscribe("keyChanged",function(){var p=(0,C.A)(function*(y,E){return{keyProcessed:(yield l._poll()).includes(E.key)}});return function(y,E){return p.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var p=(0,C.A)(function*(y,E){return["keyChanged"]});return function(y,E){return p.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,C.A)(function*(){var p,y;if(l.activeServiceWorker=yield function sm(){return mu.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new rm(l.activeServiceWorker);const E=yield l.sender._send("ping",{},800);E&&null!==(p=E[0])&&void 0!==p&&p.fulfilled&&null!==(y=E[0])&&void 0!==y&&y.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var p=this;return(0,C.A)(function*(){if(p.sender&&p.activeServiceWorker&&function kh(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:l},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.A)(function*(){try{if(!indexedDB)return!1;const l=yield um();return yield CI(l,Nh,"1"),yield Lh(l,Nh),!0}catch{}return!1})()}_withPendingWrite(l){var p=this;return(0,C.A)(function*(){p.pendingWrites++;try{yield l()}finally{p.pendingWrites--}})()}_set(l,p){var y=this;return(0,C.A)(function*(){return y._withPendingWrite((0,C.A)(function*(){return yield y._withRetries(E=>CI(E,l,p)),y.localCache[l]=p,y.notifyServiceWorker(l)}))})()}_get(l){var p=this;return(0,C.A)(function*(){const y=yield p._withRetries(E=>function DI(f,c){return cm.apply(this,arguments)}(E,l));return p.localCache[l]=y,y})()}_remove(l){var p=this;return(0,C.A)(function*(){return p._withPendingWrite((0,C.A)(function*(){return yield p._withRetries(y=>Lh(y,l)),delete p.localCache[l],p.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,C.A)(function*(){const p=yield l._withRetries(R=>{const U=_u(R,!1).getAll();return new Gi(U).toPromise()});if(!p)return[];if(0!==l.pendingWrites)return[];const y=[],E=new Set;if(0!==p.length)for(const{fbase_key:R,value:U}of p)E.add(R),JSON.stringify(l.localCache[R])!==JSON.stringify(U)&&(l.notifyListeners(R,U),y.push(R));for(const R of Object.keys(l.localCache))l.localCache[R]&&!E.has(R)&&(l.notifyListeners(R,null),y.push(R));return y})()}notifyListeners(l,p){this.localCache[l]=p;const y=this.listeners[l];if(y)for(const E of Array.from(y))E(p)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,C.A)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Yc=1e12;class PI{constructor(c){this.auth=c,this.counter=Yc,this._widgets=new Map}render(c,l){const p=this.counter;return this._widgets.set(p,new fm(c,this.auth.name,l||{})),this.counter++,p}reset(c){var l;const p=c||Yc;null===(l=this._widgets.get(p))||void 0===l||l.delete(),this._widgets.delete(p)}getResponse(c){var l;return(null===(l=this._widgets.get(c||Yc))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,C.A)(function*(){var p;return null===(p=l._widgets.get(c||Yc))||void 0===p||p.execute(),""})()}}class fm{constructor(c,l,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const y="string"==typeof c?document.getElementById(c):c;le(y,"argument-error",{appName:l}),this.container=y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function MI(f){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jc=Vg("rcb"),xI=new Li(3e4,6e4);class db{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Cn().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return le(function NI(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&Dn(Cn().grecaptcha)?Promise.resolve(Cn().grecaptcha):new Promise((p,y)=>{const E=Cn().setTimeout(()=>{y(Nt(c,"network-request-failed"))},xI.get());Cn()[Jc]=()=>{Cn().clearTimeout(E),delete Cn()[Jc];const U=Cn().grecaptcha;if(!U||!Dn(U))return void y(Nt(c,"internal-error"));const ie=U.render;U.render=(Ie,Me)=>{const Re=ie(Ie,Me);return this.counter++,Re},this.hostLanguage=l,p(U)},kg(`${function z0(){return Cc.recaptchaV2Script}()}?${(0,ne.Am)({onload:Jc,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(E),y(Nt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=Cn().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class hi{load(c){return(0,C.A)(function*(){return new PI(c)})()}clearedOneInstance(){}}const Bh="recaptcha",OI={theme:"light",type:"image"};class kI{constructor(c,l,p=Object.assign({},OI)){this.parameters=p,this.type=Bh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bt(c),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const y="string"==typeof l?document.getElementById(l):l;le(y,this.auth,"argument-error"),this.container=y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hi:new db,this.validateStartingState()}verify(){var c=this;return(0,C.A)(function*(){c.assertNotDestroyed();const l=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(l)||new Promise(E=>{const R=U=>{U&&(c.tokenChangeListeners.delete(R),E(U))};c.tokenChangeListeners.add(R),c.isInvisible&&p.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(p=>p(l)),"function"==typeof c)c(l);else if("string"==typeof c){const p=Cn()[c];"function"==typeof p&&p(l)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,C.A)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const p=document.createElement("div");l.appendChild(p),l=p}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,C.A)(function*(){le(ai()&&!gu(),c.auth,"internal-error"),yield function pm(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function Dr(f){return zn.apply(this,arguments)}(c.auth);le(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zc{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=Ei._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function vu(){return(vu=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(Be(f));const p=bt(f),y=yield Rt(p,c,(0,ne.Ku)(l));return new Zc(y,E=>$c(p,E))})).apply(this,arguments)}function fi(){return(fi=(0,C.A)(function*(f,c,l){const p=(0,ne.Ku)(f);yield jc(!1,p,"phone");const y=yield Rt(p.auth,c,(0,ne.Ku)(l));return new Zc(y,E=>wi(p,E))})).apply(this,arguments)}function Xc(){return(Xc=(0,C.A)(function*(f,c,l){const p=(0,ne.Ku)(f);if((0,Pe._isFirebaseServerApp)(p.auth.app))return Promise.reject(Be(p.auth));const y=yield Rt(p.auth,c,(0,ne.Ku)(l));return new Zc(y,E=>Kg(p,E))})).apply(this,arguments)}function Rt(f,c,l){return Iu.apply(this,arguments)}function Iu(){return Iu=(0,C.A)(function*(f,c,l){var p;const y=yield l.verify();try{let E;if(le("string"==typeof y,f,"argument-error"),le(l.type===Bh,f,"argument-error"),E="string"==typeof c?{phoneNumber:c}:c,"session"in E){const R=E.session;if("phoneNumber"in E)return le("enroll"===R.type,f,"internal-error"),(yield function ib(f,c){return ee(f,"POST","/v2/accounts/mfaEnrollment:start",j(f,c))}(f,{idToken:R.credential,phoneEnrollmentInfo:{phoneNumber:E.phoneNumber,recaptchaToken:y}})).phoneSessionInfo.sessionInfo;{le("signin"===R.type,f,"internal-error");const U=(null===(p=E.multiFactorHint)||void 0===p?void 0:p.uid)||E.multiFactorUid;return le(U,f,"missing-multi-factor-info"),(yield function lb(f,c){return ee(f,"POST","/v2/accounts/mfaSignIn:start",j(f,c))}(f,{mfaPendingCredential:R.credential,mfaEnrollmentId:U,phoneSignInInfo:{recaptchaToken:y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:R}=yield function Xo(f,c){return _h.apply(this,arguments)}(f,{phoneNumber:E.phoneNumber,recaptchaToken:y});return R}}finally{l._reset()}}),Iu.apply(this,arguments)}function ar(){return(ar=(0,C.A)(function*(f,c){const l=(0,ne.Ku)(f);if((0,Pe._isFirebaseServerApp)(l.auth.app))return Promise.reject(Be(l.auth));yield Eh(l,c)})).apply(this,arguments)}let Eu=(()=>{class f{constructor(l){this.providerId=f.PROVIDER_ID,this.auth=bt(l)}verifyPhoneNumber(l,p){return Rt(this.auth,l,(0,ne.Ku)(p))}static credential(l,p){return Ei._fromVerification(l,p)}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:p,temporaryProof:y}=l;return p&&y?Ei._fromTokenResponse(p,y):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function bs(f,c){return c?Ce(c):(le(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class Ss extends no{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return os(c,this._buildIdpRequest())}_linkToIdToken(c,l){return os(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return os(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function Zr(f){return Th(f.auth,new Ss(f),f.bypassAuthState)}function LI(f){const{auth:c,user:l}=f;return le(l,c,"internal-error"),Wg(l,new Ss(f),f.bypassAuthState)}function UI(f){return jh.apply(this,arguments)}function jh(){return(jh=(0,C.A)(function*(f){const{auth:c,user:l}=f;return le(l,c,"internal-error"),Eh(l,new Ss(f),f.bypassAuthState)})).apply(this,arguments)}class us{constructor(c,l,p,y,E=!1){this.auth=c,this.resolver=p,this.user=y,this.bypassAuthState=E,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,C.A)(function*(p,y){c.pendingPromise={resolve:p,reject:y};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(E){c.reject(E)}});return function(p,y){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,C.A)(function*(){const{urlResponse:p,sessionId:y,postBody:E,tenantId:R,error:U,type:ie}=c;if(U)return void l.reject(U);const Ie={auth:l.auth,requestUri:p,sessionId:y,tenantId:R||void 0,postBody:E||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(ie)(Ie))}catch(Me){l.reject(Me)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return Zr;case"linkViaPopup":case"linkViaRedirect":return UI;case"reauthViaPopup":case"reauthViaRedirect":return LI;default:Tt(this.auth,"internal-error")}}resolve(c){Ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const mm=new Li(2e3,1e4);function tl(){return(tl=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(Nt(f,"operation-not-supported-in-this-environment"));const p=bt(f);vn(f,c,Fn);const y=bs(p,l);return new rl(p,"signInViaPopup",c,y).executeNotNull()})).apply(this,arguments)}function nl(){return(nl=(0,C.A)(function*(f,c,l){const p=(0,ne.Ku)(f);if((0,Pe._isFirebaseServerApp)(p.auth.app))return Promise.reject(Nt(p.auth,"operation-not-supported-in-this-environment"));vn(p.auth,c,Fn);const y=bs(p.auth,l);return new rl(p.auth,"reauthViaPopup",c,y,p).executeNotNull()})).apply(this,arguments)}function He(){return(He=(0,C.A)(function*(f,c,l){const p=(0,ne.Ku)(f);vn(p.auth,c,Fn);const y=bs(p.auth,l);return new rl(p.auth,"linkViaPopup",c,y,p).executeNotNull()})).apply(this,arguments)}let rl=(()=>{class f extends us{constructor(l,p,y,E,R){super(l,p,E,R),this.provider=y,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var l=this;return(0,C.A)(function*(){const p=yield l.execute();return le(p,l.auth,"internal-error"),p})()}onExecution(){var l=this;return(0,C.A)(function*(){Ht(1===l.filter.length,"Popup operations only handle one event");const p=aa();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],p),l.authWindow.associatedEvent=p,l.resolver._originValidation(l.auth).catch(y=>{l.reject(y)}),l.resolver._isIframeWebStorageSupported(l.auth,y=>{y||l.reject(Nt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(Nt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const l=()=>{var p,y;this.pollId=null!==(y=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==y&&y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Nt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,mm.get())};l()}}return f.currentPopupAction=null,f})();const hb="pendingRedirect",wu=new Map;class $I extends us{constructor(c,l,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,C.A)(function*(){let p=wu.get(l.auth._key());if(!p){try{const E=(yield function HI(f,c){return il.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;p=()=>Promise.resolve(E)}catch(y){p=()=>Promise.reject(y)}wu.set(l.auth._key(),p)}return l.bypassAuthState||wu.set(l.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,p=this;return(0,C.A)(function*(){if("signInViaRedirect"===c.type)return l().call(p,c);if("unknown"!==c.type){if(c.eventId){const y=yield p.auth._redirectUserForId(c.eventId);if(y)return p.user=y,l().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,C.A)(function*(){})()}cleanUp(){}}function il(){return(il=(0,C.A)(function*(f,c){const l=vm(c),p=ym(f);if(!(yield p._isAvailable()))return!1;const y="true"===(yield p._get(l));return yield p._remove(l),y})).apply(this,arguments)}function Rs(f,c){return $h.apply(this,arguments)}function $h(){return($h=(0,C.A)(function*(f,c){return ym(f)._set(vm(c),"true")})).apply(this,arguments)}function Hh(f,c){wu.set(f._key(),c)}function ym(f){return Ce(f._redirectPersistence)}function vm(f){return Le(hb,f.config.apiKey,f.name)}function ue(f,c,l){return function gt(f,c,l){return sl.apply(this,arguments)}(f,c,l)}function sl(){return(sl=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(Be(f));const p=bt(f);vn(f,c,Fn),yield p._initializationPromise;const y=bs(p,l);return yield Rs(y,p),y._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function Im(f,c,l){return function tr(f,c,l){return ol.apply(this,arguments)}(f,c,l)}function ol(){return(ol=(0,C.A)(function*(f,c,l){const p=(0,ne.Ku)(f);if(vn(p.auth,c,Fn),(0,Pe._isFirebaseServerApp)(p.auth.app))return Promise.reject(Be(p.auth));yield p.auth._initializationPromise;const y=bs(p.auth,l);yield Rs(y,p.auth);const E=yield ur(p);return y._openRedirect(p.auth,c,"reauthViaRedirect",E)})).apply(this,arguments)}function Au(f,c,l){return function Wi(f,c,l){return Tu.apply(this,arguments)}(f,c,l)}function Tu(){return(Tu=(0,C.A)(function*(f,c,l){const p=(0,ne.Ku)(f);vn(p.auth,c,Fn),yield p.auth._initializationPromise;const y=bs(p.auth,l);yield jc(!1,p,c.providerId),yield Rs(y,p.auth);const E=yield ur(p);return y._openRedirect(p.auth,c,"linkViaRedirect",E)})).apply(this,arguments)}function qh(){return(qh=(0,C.A)(function*(f,c){return yield bt(f)._initializationPromise,Gh(f,c,!1)})).apply(this,arguments)}function Gh(f,c){return al.apply(this,arguments)}function al(){return(al=(0,C.A)(function*(f,c,l=!1){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(Be(f));const p=bt(f),y=bs(p,c),R=yield new $I(p,y,l).execute();return R&&!l&&(delete R.user._redirectEventId,yield p._persistUserIfCurrent(R.user),yield p._setRedirectUser(null,c)),R})).apply(this,arguments)}function ur(f){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,C.A)(function*(f){const c=aa(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class lo{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(l=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Am(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wm(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var p;if(c.error&&!wm(c)){const y=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";l.onError(Nt(this.auth,y))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const p=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ki(c))}saveEventToCache(c){this.cachedEventUids.add(Ki(c)),this.lastProcessedEventTime=Date.now()}}function Ki(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function wm({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function Tm(f){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,C.A)(function*(f,c={}){return ee(f,"GET","/v1/projects",c)})).apply(this,arguments)}const Kh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qh=/^https?/;function Cu(){return(Cu=(0,C.A)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield Tm(f);for(const l of c)try{if(qI(l))return}catch{}Tt(f,"unauthorized-domain")})).apply(this,arguments)}function qI(f){const c=Cr(),{protocol:l,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const R=new URL(f);return""===R.hostname&&""===p?"chrome-extension:"===l&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&R.hostname===p}if(!Qh.test(l))return!1;if(Kh.test(f))return p===f;const y=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(p)}const Dm=new Li(3e4,6e4);function ul(){const f=Cn().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let l=0;l<f.CP.length;l++)f.CP[l]=null}let Du=null;const Rm=new Li(5e3,15e3),Yh="__/auth/iframe",GI="emulator/auth/iframe",WI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ho(f){const c=f.config;le(c.authDomain,f,"auth-domain-config-required");const l=c.emulator?ys(c,GI):`https://${f.config.authDomain}/${Yh}`,p={apiKey:c.apiKey,appName:f.name,v:Pe.SDK_VERSION},y=yr.get(f.config.apiHost);y&&(p.eid=y);const E=f._getFrameworks();return E.length&&(p.fw=E.join(",")),`${l}?${(0,ne.Am)(p).slice(1)}`}function Jh(){return Jh=(0,C.A)(function*(f){const c=yield function Sm(f){return Du=Du||function bm(f){return new Promise((c,l)=>{var p,y,E;function R(){ul(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{ul(),l(Nt(f,"network-request-failed"))},timeout:Dm.get()})}if(null!==(y=null===(p=Cn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==y&&y.Iframe)c(gapi.iframes.getContext());else{if(null===(E=Cn().gapi)||void 0===E||!E.load){const U=Vg("iframefcb");return Cn()[U]=()=>{gapi.load?R():l(Nt(f,"network-request-failed"))},kg(`${function q0(){return Cc.gapiScript}()}?onload=${U}`).catch(ie=>l(ie))}R()}}).catch(c=>{throw Du=null,c})}(f),Du}(f),l=Cn().gapi;return le(l,f,"internal-error"),c.open({where:document.body,url:ho(f),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WI,dontclear:!0},p=>new Promise(function(){var y=(0,C.A)(function*(E,R){yield p.restyle({setHideOnLeave:!1});const U=Nt(f,"network-request-failed"),ie=Cn().setTimeout(()=>{R(U)},Rm.get());function Ie(){Cn().clearTimeout(ie),E(p)}p.ping(Ie).then(Ie,()=>{R(U)})});return function(E,R){return y.apply(this,arguments)}}()))}),Jh.apply(this,arguments)}const KI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bu{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const cl="__/auth/handler",ll="emulator/auth/handler",dl=encodeURIComponent("fac");function Su(f,c,l,p,y,E){return hl.apply(this,arguments)}function hl(){return(hl=(0,C.A)(function*(f,c,l,p,y,E){le(f.config.authDomain,f,"auth-domain-config-required"),le(f.config.apiKey,f,"invalid-api-key");const R={apiKey:f.config.apiKey,appName:f.name,authType:l,redirectUrl:p,v:Pe.SDK_VERSION,eventId:y};if(c instanceof Fn){c.setDefaultLanguage(f.languageCode),R.providerId=c.providerId||"",(0,ne.Im)(c.getCustomParameters())||(R.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Me,Re]of Object.entries(E||{}))R[Me]=Re}if(c instanceof gr){const Me=c.getScopes().filter(Re=>""!==Re);Me.length>0&&(R.scopes=Me.join(","))}f.tenantId&&(R.tid=f.tenantId);const U=R;for(const Me of Object.keys(U))void 0===U[Me]&&delete U[Me];const ie=yield f._getAppCheckToken(),Ie=ie?`#${dl}=${encodeURIComponent(ie)}`:"";return`${function xm({config:f}){return f.emulator?ys(f,ll):`https://${f.authDomain}/${cl}`}(f)}?${(0,ne.Am)(U).slice(1)}${Ie}`})).apply(this,arguments)}const Zh="webStorageSupport",la=class ca{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zt,this._completeRedirectFn=Gh,this._overrideRedirectResult=Hh}_openPopup(c,l,p,y){var E=this;return(0,C.A)(function*(){var R;Ht(null===(R=E.eventManagers[c._key()])||void 0===R?void 0:R.manager,"_initialize() not called before _openPopup()");const U=yield Su(c,l,p,Cr(),y);return function Ps(f,c,l,p=500,y=600){const E=Math.max((window.screen.availHeight-y)/2,0).toString(),R=Math.max((window.screen.availWidth-p)/2,0).toString();let U="";const ie=Object.assign(Object.assign({},KI),{width:p.toString(),height:y.toString(),top:E,left:R}),Ie=(0,ne.ZQ)().toLowerCase();l&&(U=Dt(Ie)?"_blank":l),Xn(Ie)&&(c=c||"http://localhost",ie.scrollbars="yes");const Me=Object.entries(ie).reduce((un,[Ci,Io])=>`${un}${Ci}=${Io},`,"");if(function J(f=(0,ne.ZQ)()){var c;return ss(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(Ie)&&"_self"!==U)return function JI(f,c){const l=document.createElement("a");l.href=f,l.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(p)}(c||"",U),new bu(null);const Re=window.open(c||"",U,Me);le(Re,f,"popup-blocked");try{Re.focus()}catch{}return new bu(Re)}(c,U,aa())})()}_openRedirect(c,l,p,y){var E=this;return(0,C.A)(function*(){return yield E._originValidation(c),function im(f){Cn().location.href=f}(yield Su(c,l,p,Cr(),y)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:y,promise:E}=this.eventManagers[l];return y?Promise.resolve(y):(Ht(E,"If manager is not set, promise should be"),E)}const p=this.initAndGetManager(c);return this.eventManagers[l]={promise:p},p.catch(()=>{delete this.eventManagers[l]}),p}initAndGetManager(c){var l=this;return(0,C.A)(function*(){const p=yield function an(f){return Jh.apply(this,arguments)}(c),y=new lo(c);return p.register("authEvent",E=>(le(E?.authEvent,c,"invalid-auth-event"),{status:y.onEvent(E.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:y},l.iframes[c._key()]=p,y})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(Zh,{type:Zh},y=>{var E;const R=null===(E=y?.[0])||void 0===E?void 0:E[Zh];void 0!==R&&l(!!R),Tt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Cm(f){return Cu.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return Y()||is()||ss()}};class Nm{constructor(c){this.factorId=c}_process(c,l,p){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,p);case"signin":return this._finalizeSignIn(c,l.credential);default:return Qt("unexpected MultiFactorSessionType")}}}class Om extends Nm{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Om(c)}_finalizeEnroll(c,l,p){return function sb(f,c){return ee(f,"POST","/v2/accounts/mfaEnrollment:finalize",j(f,c))}(c,{idToken:l,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function SI(f,c){return ee(f,"POST","/v2/accounts/mfaSignIn:finalize",j(f,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Xh=(()=>{class f{constructor(){}static assertion(l){return Om._fromCredential(l)}}return f.FACTOR_ID="phone",f})();var ZI="@firebase/auth";class Ru{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,C.A)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function cr(){return window}(0,ne.XA)("authIdTokenMaxAge"),function H0(f){Cc=f}({loadJS:f=>new Promise((c,l)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=y=>{const E=Nt("internal-error");E.customData=y,l(E)},p.type="text/javascript",p.charset="UTF-8",function nE(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Pu(f){(0,Pe._registerComponent)(new sn.uA("auth",(c,{options:l})=>{const p=c.getProvider("app").getImmediate(),y=c.getProvider("heartbeat"),E=c.getProvider("app-check-internal"),{apiKey:R,authDomain:U}=p.options;le(R&&!R.includes(":"),"invalid-api-key",{appName:p.name});const ie={apiKey:R,authDomain:U,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ae(f)},Ie=new Gr(p,y,E,ie);return function _I(f,c){const l=c?.persistence||[],p=(Array.isArray(l)?l:[l]).map(Ce);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(Ie,l),Ie},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,p)=>{c.getProvider("auth-internal").initialize()})),(0,Pe._registerComponent)(new sn.uA("auth-internal",c=>{const l=bt(c.getProvider("auth").getImmediate());return new Ru(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Pe.registerVersion)(ZI,"1.7.9",function XI(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,Pe.registerVersion)(ZI,"1.7.9","esm2017")}("Browser");function Mu(){return Mu=(0,C.A)(function*(f,c,l){var p;const{BuildInfo:y}=cr();Ht(c.sessionId,"AuthEvent did not contain a session ID");const E=yield function Um(f){return _l.apply(this,arguments)}(c.sessionId),R={};return ss()?R.ibi=y.packageName:$i()?R.apn=y.packageName:Tt(f,"operation-not-supported-in-this-environment"),y.displayName&&(R.appDisplayName=y.displayName),R.sessionId=E,Su(f,l,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,R)}),Mu.apply(this,arguments)}function da(){return(da=(0,C.A)(function*(f){const{BuildInfo:c}=cr(),l={};ss()?l.iosBundleId=c.packageName:$i()?l.androidPackageName=c.packageName:Tt(f,"operation-not-supported-in-this-environment"),yield Tm(f,l)})).apply(this,arguments)}function ml(){return(ml=(0,C.A)(function*(f,c,l){const{cordova:p}=cr();let y=()=>{};try{yield new Promise((E,R)=>{let U=null;function ie(){var Re;E();const un=null===(Re=p.plugins.browsertab)||void 0===Re?void 0:Re.close;"function"==typeof un&&un(),"function"==typeof l?.close&&l.close()}function Ie(){U||(U=window.setTimeout(()=>{R(Nt(f,"redirect-cancelled-by-user"))},2e3))}function Me(){"visible"===document?.visibilityState&&Ie()}c.addPassiveListener(ie),document.addEventListener("resume",Ie,!1),$i()&&document.addEventListener("visibilitychange",Me,!1),y=()=>{c.removePassiveListener(ie),document.removeEventListener("resume",Ie,!1),document.removeEventListener("visibilitychange",Me,!1),U&&window.clearTimeout(U)}})}finally{y()}})).apply(this,arguments)}function _l(){return(_l=(0,C.A)(function*(f){const c=function sE(f){if(Ht(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const c=new ArrayBuffer(f.length),l=new Uint8Array(c);for(let p=0;p<f.length;p++)l[p]=f.charCodeAt(p);return l}(f),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(y=>y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class fo extends lo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInitialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInitialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,C.A)(function*(){yield c.initPromise})()}}function sf(f){return po.apply(this,arguments)}function po(){return(po=(0,C.A)(function*(f){const c=yield af()._get(Un(f));return c&&(yield af()._remove(Un(f))),c})).apply(this,arguments)}function vr(){const f=[];for(let l=0;l<20;l++){const p=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return f.join("")}function af(){return Ce(Oh)}function Un(f){return Le("authEvent",f.config.apiKey,f.name)}function xu(f){if(!f?.includes("?"))return{};const[c,...l]=f.split("?");return(0,ne.I9)(l.join("?"))}const fa=class ha{constructor(){this._redirectPersistence=Zt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gh,this._overrideRedirectResult=Hh}_initialize(c){var l=this;return(0,C.A)(function*(){const p=c._key();let y=l.eventManagers.get(p);return y||(y=new fo(c),l.eventManagers.set(p,y),l.attachCallbackListeners(c,y)),y})()}_openPopup(c){Tt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,p,y){var E=this;return(0,C.A)(function*(){!function Lm(f){var c,l,p,y,E,R,U,ie,Ie,Me;const Re=cr();le("function"==typeof(null===(c=Re?.universalLinks)||void 0===c?void 0:c.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(typeof(null===(l=Re?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le("function"==typeof(null===(E=null===(y=null===(p=Re?.cordova)||void 0===p?void 0:p.plugins)||void 0===y?void 0:y.browsertab)||void 0===E?void 0:E.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(ie=null===(U=null===(R=Re?.cordova)||void 0===R?void 0:R.plugins)||void 0===U?void 0:U.browsertab)||void 0===ie?void 0:ie.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(Me=null===(Ie=Re?.cordova)||void 0===Ie?void 0:Ie.InAppBrowser)||void 0===Me?void 0:Me.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const R=yield E._initialize(c);yield R.initialized(),R.resetRedirect(),function zI(){wu.clear()}(),yield E._originValidation(c);const U=function oE(f,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:vr(),postBody:null,tenantId:f.tenantId,error:Nt(f,"no-auth-event")}}(c,p,y);yield function Bm(f,c){return af()._set(Un(f),c)}(c,U);const ie=yield function gl(f,c,l){return Mu.apply(this,arguments)}(c,U,l),Ie=yield function rf(f){const{cordova:c}=cr();return new Promise(l=>{c.plugins.browsertab.isAvailable(p=>{let y=null;p?c.plugins.browsertab.openUrl(f):y=c.InAppBrowser.open(f,function de(f=(0,ne.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),l(y)})})}(ie);return function iE(f,c,l){return ml.apply(this,arguments)}(c,R,Ie)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Fm(f){return da.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:p,handleOpenURL:y,BuildInfo:E}=cr(),R=setTimeout((0,C.A)(function*(){yield sf(c),l.onEvent(go())}),500),U=function(){var Me=(0,C.A)(function*(Re){clearTimeout(R);const un=yield sf(c);let Ci=null;un&&Re?.url&&(Ci=function aE(f,c){var l,p;const y=function uE(f){const c=xu(f),l=c.link?decodeURIComponent(c.link):void 0,p=xu(l).link,y=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return xu(y).link||y||p||l||f}(c);if(y.includes("/__/auth/callback")){const E=xu(y),R=E.firebaseError?function uf(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(E.firebaseError)):null,U=null===(p=null===(l=R?.code)||void 0===l?void 0:l.split("auth/"))||void 0===p?void 0:p[1],ie=U?Nt(U):null;return ie?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:ie,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:y,postBody:null}}return null}(un,Re.url)),l.onEvent(Ci||go())});return function(un){return Me.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,U);const ie=y,Ie=`${E.packageName.toLowerCase()}://`;cr().handleOpenURL=function(){var Me=(0,C.A)(function*(Re){if(Re.toLowerCase().startsWith(Ie)&&U({url:Re}),"function"==typeof ie)try{ie(Re)}catch(un){console.error(un)}});return function(Re){return Me.apply(this,arguments)}}()}};function go(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Nt("no-auth-event")}}function Nu(){var f;return(null===(f=self?.location)||void 0===f?void 0:f.protocol)||null}function cE(f=(0,ne.ZQ)()){return!("file:"!==Nu()&&"ionic:"!==Nu()&&"capacitor:"!==Nu()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function mo(){try{const f=self.localStorage,c=aa();if(f)return f.setItem(c,"1"),f.removeItem(c),!function yb(f=(0,ne.ZQ)()){return function mb(){return(0,ne.lT)()&&11===document?.documentMode}()||function _b(f=(0,ne.ZQ)()){return/Edge\/\d+/.test(f)}(f)}()||(0,ne.zW)()}catch{return lf()&&(0,ne.zW)()}return!1}function lf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function df(){return(function pb(){return"http:"===Nu()||"https:"===Nu()}()||(0,ne.sr)()||cE())&&!function gb(){return(0,ne.lV)()||(0,ne.Ll)()}()&&mo()&&!lf()}function Rn(){return cE()&&typeof document<"u"}function _o(){return(_o=(0,C.A)(function*(){return!!Rn()&&new Promise(f=>{const c=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),f(!0)})})})).apply(this,arguments)}const Xt={LOCAL:"local",NONE:"none",SESSION:"session"},Qi=le,hf="persistence";function yo(f){return ff.apply(this,arguments)}function ff(){return(ff=(0,C.A)(function*(f){yield f._initializationPromise;const c=$m(),l=Le(hf,f.config.apiKey,f.name);c&&c.setItem(l,f._getPersistence())})).apply(this,arguments)}function $m(){var f;try{return(null===(f=function dE(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const Ib=le;class Pn{constructor(){this.browserResolver=Ce(la),this.cordovaResolver=Ce(fa),this.underlyingResolver=null,this._redirectPersistence=Zt,this._completeRedirectFn=Gh,this._overrideRedirectResult=Hh}_initialize(c){var l=this;return(0,C.A)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,p,y){var E=this;return(0,C.A)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._openPopup(c,l,p,y)})()}_openRedirect(c,l,p,y){var E=this;return(0,C.A)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._openRedirect(c,l,p,y)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return Rn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ib(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,C.A)(function*(){if(c.underlyingResolver)return;const l=yield function lE(){return _o.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function El(f){return f.unwrap()}function Eb(f){return zm(f)}function zm(f){const{_tokenResponse:c}=f instanceof ne.g?f.customData:f;if(!c)return null;if(!(f instanceof ne.g)&&"temporaryProof"in c&&"phoneNumber"in c)return Eu.credentialFromResult(f);const l=c.providerId;if(!l||l===at.PASSWORD)return null;let p;switch(l){case at.GOOGLE:p=Oc;break;case at.FACEBOOK:p=uu;break;case at.GITHUB:p=kc;break;case at.TWITTER:p=vh;break;default:const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:R,pendingToken:U,nonce:ie}=c;return E||R||y||U?U?l.startsWith("saml.")?Mr._create(l,U):Ii._fromParams({providerId:l,signInMethod:l,pendingToken:U,idToken:y,accessToken:E}):new lt(l).credential({idToken:y,accessToken:E,rawNonce:ie}):null}return f instanceof ne.g?p.credentialFromError(f):p.credentialFromResult(f)}function Nr(f,c){return c.catch(l=>{throw l instanceof ne.g&&function Hm(f,c){var l;const p=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new hE(f,function rb(f,c){var l;const p=(0,ne.Ku)(f),y=c;return le(c.customData.operationType,p,"argument-error"),le(null===(l=y.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,p,"argument-error"),em._fromError(p,y)}(f,c));else if(p){const y=zm(c),E=c;y&&(E.credential=y,E.tenantId=p.tenantId||void 0,E.email=p.email||void 0,E.phoneNumber=p.phoneNumber||void 0)}}(f,l),l}).then(l=>{const y=l.user;return{operationType:l.operationType,credential:Eb(l),additionalUserInfo:_r(l),user:cs.getOrCreate(y)}})}function pf(f,c){return gf.apply(this,arguments)}function gf(){return(gf=(0,C.A)(function*(f,c){const l=yield c;return{verificationId:l.verificationId,confirm:p=>Nr(f,l.confirm(p))}})).apply(this,arguments)}class hE{constructor(c,l){this.resolver=l,this.auth=function ga(f){return f.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Nr(El(this.auth),this.resolver.resolveSignIn(c))}}class cs{constructor(c){this._delegate=c,this.multiFactor=function nm(f){const c=(0,ne.Ku)(f);return Kc.has(c)||Kc.set(c,tm._fromUser(c)),Kc.get(c)}(c)}static getOrCreate(c){return cs.USER_MAP.has(c)||cs.USER_MAP.set(c,new cs(c)),cs.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,C.A)(function*(){return Nr(l.auth,wi(l._delegate,c))})()}linkWithPhoneNumber(c,l){var p=this;return(0,C.A)(function*(){return pf(p.auth,function FI(f,c,l){return fi.apply(this,arguments)}(p._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,C.A)(function*(){return Nr(l.auth,function jI(f,c,l){return He.apply(this,arguments)}(l._delegate,c,Pn))})()}linkWithRedirect(c){var l=this;return(0,C.A)(function*(){return yield yo(bt(l.auth)),Au(l._delegate,c,Pn)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,C.A)(function*(){return Nr(l.auth,Kg(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return pf(this.auth,function gm(f,c,l){return Xc.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return Nr(this.auth,function _m(f,c,l){return nl.apply(this,arguments)}(this._delegate,c,Pn))}reauthenticateWithRedirect(c){var l=this;return(0,C.A)(function*(){return yield yo(bt(l.auth)),Im(l._delegate,c,Pn)})()}sendEmailVerification(c){return function ia(f,c){return li.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,C.A)(function*(){return yield function EI(f,c){return Kr.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function dt(f,c){const l=(0,ne.Ku)(f);return(0,Pe._isFirebaseServerApp)(l.auth.app)?Promise.reject(Be(l.auth)):Gc(l,c,null)}(this._delegate,c)}updatePassword(c){return function Z0(f,c){return Gc((0,ne.Ku)(f),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function el(f,c){return ar.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function fu(f,c){return so.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function hu(f,c,l){return qc.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}cs.USER_MAP=new WeakMap;const vo=le;let Ou=(()=>{class f{constructor(l,p){if(this.app=l,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:y}=l.options;vo(y,"invalid-api-key",{appName:l.name}),vo(y,"invalid-api-key",{appName:l.name});const E=typeof window<"u"?Pn:void 0;this._delegate=p.initialize({options:{persistence:ku(y,l.name),popupRedirectResolver:E}}),this._delegate._updateErrorMap(Yn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?cs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,p){!function ch(f,c,l){const p=bt(f);le(p._canInitEmulator,p,"emulator-config-failed"),le(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const y=!!l?.disableWarnings,E=Lg(c),{host:R,port:U}=function Sc(f){const c=Lg(f),l=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!l)return{host:"",port:null};const p=l[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(p);if(y){const E=y[1];return{host:E,port:nu(p.substr(E.length+1))}}{const[E,R]=p.split(":");return{host:E,port:nu(R)}}}(c);p.config.emulator={url:`${E}//${R}${null===U?"":`:${U}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:R,port:U,protocol:E.replace(":",""),options:Object.freeze({disableWarnings:y})}),y||function lh(){function f(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,l,p)}applyActionCode(l){return function wI(f,c){return Yt.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return De(this._delegate,l)}confirmPasswordReset(l,p){return function zc(f,c,l){return Ph.apply(this,arguments)}(this._delegate,l,p)}createUserWithEmailAndPassword(l,p){var y=this;return(0,C.A)(function*(){return Nr(y._delegate,function du(f,c,l){return Wn.apply(this,arguments)}(y._delegate,l,p))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function Tn(f,c){return io.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function ra(f,c){const l=au.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,C.A)(function*(){vo(df(),l._delegate,"operation-not-supported-in-this-environment");const p=yield function zh(f,c){return qh.apply(this,arguments)}(l._delegate,Pn);return p?Nr(l._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function jm(f,c){bt(f)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,p,y){const{next:E,error:R,complete:U}=qm(l,p,y);return this._delegate.onAuthStateChanged(E,R,U)}onIdTokenChanged(l,p,y){const{next:E,error:R,complete:U}=qm(l,p,y);return this._delegate.onIdTokenChanged(E,R,U)}sendSignInLinkToEmail(l,p){return function An(f,c,l){return zi.apply(this,arguments)}(this._delegate,l,p)}sendPasswordResetEmail(l,p){return function Yg(f,c,l){return Hc.apply(this,arguments)}(this._delegate,l,p||void 0)}setPersistence(l){var p=this;return(0,C.A)(function*(){let y;switch(function Il(f,c){Qi(Object.values(Xt).includes(c),f,"invalid-persistence-type"),(0,ne.lV)()?Qi(c!==Xt.SESSION,f,"unsupported-persistence-type"):(0,ne.Ll)()?Qi(c===Xt.NONE,f,"unsupported-persistence-type"):lf()?Qi(c===Xt.NONE||c===Xt.LOCAL&&(0,ne.zW)(),f,"unsupported-persistence-type"):Qi(c===Xt.NONE||mo(),f,"unsupported-persistence-type")}(p._delegate,l),l){case Xt.SESSION:y=Zt;break;case Xt.LOCAL:y=(yield Ce(yu)._isAvailable())?yu:Oh;break;case Xt.NONE:y=Sn;break;default:return Tt("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(y)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return Nr(this._delegate,function qg(f){return Lc.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return Nr(this._delegate,$c(this._delegate,l))}signInWithCustomToken(l){return Nr(this._delegate,function Qg(f,c){return We.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,p){return Nr(this._delegate,function na(f,c,l){return(0,Pe._isFirebaseServerApp)(f.app)?Promise.reject(Be(f)):$c((0,ne.Ku)(f),ea.credential(c,l)).catch(function(){var p=(0,C.A)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&Ts(f),y});return function(y){return p.apply(this,arguments)}}())}(this._delegate,l,p))}signInWithEmailLink(l,p){return Nr(this._delegate,function Ye(f,c,l){return ro.apply(this,arguments)}(this._delegate,l,p))}signInWithPhoneNumber(l,p){return pf(this._delegate,function VI(f,c,l){return vu.apply(this,arguments)}(this._delegate,l,p))}signInWithPopup(l){var p=this;return(0,C.A)(function*(){return vo(df(),p._delegate,"operation-not-supported-in-this-environment"),Nr(p._delegate,function BI(f,c,l){return tl.apply(this,arguments)}(p._delegate,l,Pn))})()}signInWithRedirect(l){var p=this;return(0,C.A)(function*(){return vo(df(),p._delegate,"operation-not-supported-in-this-environment"),yield yo(p._delegate),ue(p._delegate,l,Pn)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function Jt(f,c){return Yr.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=Xt,f})();function qm(f,c,l){let p=f;"function"!=typeof f&&({next:p,error:c,complete:l}=f);const y=p;return{next:R=>y(R&&cs.getOrCreate(R)),error:c,complete:l}}function ku(f,c){const l=function vb(f,c){const l=$m();if(!l)return[];const p=Le(hf,f,c);switch(l.getItem(p)){case Xt.NONE:return[Sn];case Xt.LOCAL:return[yu,Zt];case Xt.SESSION:return[Zt];default:return[]}}(f,c);if(typeof self<"u"&&!l.includes(yu)&&l.push(yu),typeof window<"u")for(const p of[Oh,Zt])l.includes(p)||l.push(p);return l.includes(Sn)||l.push(Sn),l}class mf{constructor(){this.providerId="phone",this._delegate=new Eu(El(ze.A.auth()))}static credential(c,l){return Eu.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}mf.PHONE_SIGN_IN_METHOD=Eu.PHONE_SIGN_IN_METHOD,mf.PROVIDER_ID=Eu.PROVIDER_ID;const wl=le;class fE{constructor(c,l,p=ze.A.app()){var y;wl(null===(y=p.options)||void 0===y?void 0:y.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new kI(p.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function _f(f){f.INTERNAL.registerComponent(new sn.uA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new Ou(l,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ea,FacebookAuthProvider:uu,GithubAuthProvider:kc,GoogleAuthProvider:Oc,OAuthProvider:lt,SAMLAuthProvider:lu,PhoneAuthProvider:mf,PhoneMultiFactorGenerator:Xh,RecaptchaVerifier:fE,TwitterAuthProvider:vh,Auth:Ou,AuthCredential:no,Error:ne.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.14")}(ze.A)},467:(ns,ir,et)=>{function C(Pe,ne,It,rn,sn,Hn,at){try{var oe=Pe[Hn](at),me=oe.value}catch(Ne){return void It(Ne)}oe.done?ne(me):Promise.resolve(me).then(rn,sn)}function ze(Pe){return function(){var ne=this,It=arguments;return new Promise(function(rn,sn){var Hn=Pe.apply(ne,It);function at(me){C(Hn,rn,sn,at,oe,"next",me)}function oe(me){C(Hn,rn,sn,at,oe,"throw",me)}at(void 0)})}}et.d(ir,{A:()=>ze})},635:(ns,ir,et)=>{function ne(q,X){var re={};for(var j in q)Object.prototype.hasOwnProperty.call(q,j)&&X.indexOf(j)<0&&(re[j]=q[j]);if(null!=q&&"function"==typeof Object.getOwnPropertySymbols){var ee=0;for(j=Object.getOwnPropertySymbols(q);ee<j.length;ee++)X.indexOf(j[ee])<0&&Object.prototype.propertyIsEnumerable.call(q,j[ee])&&(re[j[ee]]=q[j[ee]])}return re}function Ne(q,X,re,j){return new(re||(re=Promise))(function(pe,fe){function rt(wt){try{je(j.next(wt))}catch(fn){fe(fn)}}function Ct(wt){try{je(j.throw(wt))}catch(fn){fe(fn)}}function je(wt){wt.done?pe(wt.value):function ee(pe){return pe instanceof re?pe:new re(function(fe){fe(pe)})}(wt.value).then(rt,Ct)}je((j=j.apply(q,X||[])).next())})}function Kt(q){return this instanceof Kt?(this.v=q,this):new Kt(q)}function Tt(q,X,re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,j=re.apply(q,X||[]),pe=[];return ee=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),rt("next"),rt("throw"),rt("return",function fe(vt){return function(Dn){return Promise.resolve(Dn).then(vt,fn)}}),ee[Symbol.asyncIterator]=function(){return this},ee;function rt(vt,Dn){j[vt]&&(ee[vt]=function(Vn){return new Promise(function(sr,Dr){pe.push([vt,Vn,sr,Dr])>1||Ct(vt,Vn)})},Dn&&(ee[vt]=Dn(ee[vt])))}function Ct(vt,Dn){try{!function je(vt){vt.value instanceof Kt?Promise.resolve(vt.value.v).then(wt,fn):vi(pe[0][2],vt)}(j[vt](Dn))}catch(Vn){vi(pe[0][3],Vn)}}function wt(vt){Ct("next",vt)}function fn(vt){Ct("throw",vt)}function vi(vt,Dn){vt(Dn),pe.shift(),pe.length&&Ct(pe[0][0],pe[0][1])}}function fr(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var re,X=q[Symbol.asyncIterator];return X?X.call(q):(q=function Et(q){var X="function"==typeof Symbol&&Symbol.iterator,re=X&&q[X],j=0;if(re)return re.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&j>=q.length&&(q=void 0),{value:q&&q[j++],done:!q}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),re={},j("next"),j("throw"),j("return"),re[Symbol.asyncIterator]=function(){return this},re);function j(pe){re[pe]=q[pe]&&function(fe){return new Promise(function(rt,Ct){!function ee(pe,fe,rt,Ct){Promise.resolve(Ct).then(function(je){pe({value:je,done:rt})},fe)}(rt,Ct,(fe=q[pe](fe)).done,fe.value)})}}}et.d(ir,{AQ:()=>Tt,N3:()=>Kt,Tt:()=>ne,sH:()=>Ne,xN:()=>fr}),"function"==typeof SuppressedError&&SuppressedError}},ns=>{ns(ns.s=503)}]);
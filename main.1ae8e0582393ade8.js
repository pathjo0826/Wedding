"use strict";(self.webpackChunkwedding_app=self.webpackChunkwedding_app||[]).push([[792],{401:(os,or,it)=>{it.d(or,{Am:()=>eo,Bd:()=>le,FA:()=>ft,Fy:()=>mr,I9:()=>Hi,Im:()=>Yo,Ku:()=>as,Ll:()=>$t,T9:()=>Qt,Uj:()=>ht,XA:()=>bt,ZQ:()=>ze,bD:()=>Xs,c1:()=>qt,cY:()=>Vt,eX:()=>se,g:()=>fe,gR:()=>Jr,hp:()=>to,jZ:()=>En,lT:()=>Es,lV:()=>pi,mS:()=>At,nr:()=>Z,p7:()=>Yt,sr:()=>Rr,tD:()=>Sn,u:()=>oe,zW:()=>te,zw:()=>Ne});const ee=function(S){const P=[];let k=0;for(let B=0;B<S.length;B++){let q=S.charCodeAt(B);q<128?P[k++]=q:q<2048?(P[k++]=q>>6|192,P[k++]=63&q|128):55296==(64512&q)&&B+1<S.length&&56320==(64512&S.charCodeAt(B+1))?(q=65536+((1023&q)<<10)+(1023&S.charCodeAt(++B)),P[k++]=q>>18|240,P[k++]=q>>12&63|128,P[k++]=q>>6&63|128,P[k++]=63&q|128):(P[k++]=q>>12|224,P[k++]=q>>6&63|128,P[k++]=63&q|128)}return P},on={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(S,P){if(!Array.isArray(S))throw Error("encodeByteArray takes an array as a parameter");this.init_();const k=P?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let q=0;q<S.length;q+=3){const Se=S[q],Ce=q+1<S.length,Ht=Ce?S[q+1]:0,Rn=q+2<S.length,$e=Rn?S[q+2]:0;let er=(15&Ht)<<2|$e>>6,us=63&$e;Rn||(us=64,Ce||(er=64)),B.push(k[Se>>2],k[(3&Se)<<4|Ht>>4],k[er],k[us])}return B.join("")},encodeString(S,P){return this.HAS_NATIVE_SUPPORT&&!P?btoa(S):this.encodeByteArray(ee(S),P)},decodeString(S,P){return this.HAS_NATIVE_SUPPORT&&!P?atob(S):function(S){const P=[];let k=0,B=0;for(;k<S.length;){const q=S[k++];if(q<128)P[B++]=String.fromCharCode(q);else if(q>191&&q<224){const Se=S[k++];P[B++]=String.fromCharCode((31&q)<<6|63&Se)}else if(q>239&&q<365){const Rn=((7&q)<<18|(63&S[k++])<<12|(63&S[k++])<<6|63&S[k++])-65536;P[B++]=String.fromCharCode(55296+(Rn>>10)),P[B++]=String.fromCharCode(56320+(1023&Rn))}else{const Se=S[k++],Ce=S[k++];P[B++]=String.fromCharCode((15&q)<<12|(63&Se)<<6|63&Ce)}}return P.join("")}(this.decodeStringToByteArray(S,P))},decodeStringToByteArray(S,P){this.init_();const k=P?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let q=0;q<S.length;){const Se=k[S.charAt(q++)],Ht=q<S.length?k[S.charAt(q)]:0;++q;const $e=q<S.length?k[S.charAt(q)]:64;++q;const He=q<S.length?k[S.charAt(q)]:64;if(++q,null==Se||null==Ht||null==$e||null==He)throw new gn;B.push(Se<<2|Ht>>4),64!==$e&&(B.push(Ht<<4&240|$e>>2),64!==He&&B.push($e<<6&192|He))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let S=0;S<this.ENCODED_VALS.length;S++)this.byteToCharMap_[S]=this.ENCODED_VALS.charAt(S),this.charToByteMap_[this.byteToCharMap_[S]]=S,this.byteToCharMapWebSafe_[S]=this.ENCODED_VALS_WEBSAFE.charAt(S),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[S]]=S,S>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(S)]=S,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(S)]=S)}}};class gn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ht=function(S){return function(S){const P=ee(S);return on.encodeByteArray(P,!0)}(S).replace(/\./g,"")},oe=function(S){try{return on.decodeString(S,!0)}catch(P){console.error("base64Decode failed: ",P)}return null};function Ne(S,P){if(!(P instanceof Object))return P;switch(P.constructor){case Date:return new Date(P.getTime());case Object:void 0===S&&(S={});break;case Array:S=[];break;default:return P}for(const k in P)!P.hasOwnProperty(k)||!lt(k)||(S[k]=Ne(S[k],P[k]));return S}function lt(S){return"__proto__"!==S}function At(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ot=()=>{try{return At().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const S=process.env.__FIREBASE_DEFAULTS__;return S?JSON.parse(S):void 0})()||(()=>{if(typeof document>"u")return;let S;try{S=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const P=S&&oe(S[1]);return P&&JSON.parse(P)})()}catch(S){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${S}`)}},Qt=()=>{var S;return null===(S=ot())||void 0===S?void 0:S.config},bt=S=>{var P;return null===(P=ot())||void 0===P?void 0:P[`_${S}`]};class Vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((P,k)=>{this.resolve=P,this.reject=k})}wrapCallback(P){return(k,B)=>{k?this.reject(k):this.resolve(B),"function"==typeof P&&(this.promise.catch(()=>{}),1===P.length?P(k):P(k,B))}}}function mr(S,P){if(S.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=P||"demo-project",q=S.iat||0,Se=S.sub||S.user_id;if(!Se)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ce=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:q,exp:q+3600,auth_time:q,sub:Se,user_id:Se,firebase:{sign_in_provider:"custom",identities:{}}},S);return[ht(JSON.stringify({alg:"none",type:"JWT"})),ht(JSON.stringify(Ce)),""].join(".")}function ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function En(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function $t(){var S;const P=null===(S=ot())||void 0===S?void 0:S.forceEnvironment;if("node"===P)return!0;if("browser"===P)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function le(){return typeof window<"u"||Yt()}function Yt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function qt(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Rr(){const S="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof S&&void 0!==S.id}function pi(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Es(){const S=ze();return S.indexOf("MSIE ")>=0||S.indexOf("Trident/")>=0}function Z(){return!$t()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function te(){try{return"object"==typeof indexedDB}catch{return!1}}function se(){return new Promise((S,P)=>{try{let k=!0;const B="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(B);q.onsuccess=()=>{q.result.close(),k||self.indexedDB.deleteDatabase(B),S(!0)},q.onupgradeneeded=()=>{k=!1},q.onerror=()=>{var Se;P((null===(Se=q.error)||void 0===Se?void 0:Se.message)||"")}}catch(k){P(k)}})}class fe extends Error{constructor(P,k,B){super(k),this.code=P,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ft.prototype.create)}}class ft{constructor(P,k,B){this.service=P,this.serviceName=k,this.errors=B}create(P,...k){const B=k[0]||{},q=`${this.service}/${P}`,Se=this.errors[P],Ce=Se?function Oe(S,P){return S.replace(Be,(k,B)=>{const q=P[B];return null!=q?String(q):`<${B}?>`})}(Se,B):"Error";return new fe(q,`${this.serviceName}: ${Ce} (${q}).`,B)}}const Be=/\{\$([^}]+)}/g;function Jr(S,P){return Object.prototype.hasOwnProperty.call(S,P)}function Yo(S){for(const P in S)if(Object.prototype.hasOwnProperty.call(S,P))return!1;return!0}function Xs(S,P){if(S===P)return!0;const k=Object.keys(S),B=Object.keys(P);for(const q of k){if(!B.includes(q))return!1;const Se=S[q],Ce=P[q];if(ws(Se)&&ws(Ce)){if(!Xs(Se,Ce))return!1}else if(Se!==Ce)return!1}for(const q of B)if(!k.includes(q))return!1;return!0}function ws(S){return null!==S&&"object"==typeof S}function eo(S){const P=[];for(const[k,B]of Object.entries(S))Array.isArray(B)?B.forEach(q=>{P.push(encodeURIComponent(k)+"="+encodeURIComponent(q))}):P.push(encodeURIComponent(k)+"="+encodeURIComponent(B));return P.length?"&"+P.join("&"):""}function Hi(S){const P={};return S.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[q,Se]=B.split("=");P[decodeURIComponent(q)]=decodeURIComponent(Se)}}),P}function to(S){const P=S.indexOf("?");if(!P)return"";const k=S.indexOf("#",P);return S.substring(P,k>0?k:void 0)}function Sn(S,P){const k=new xr(S,P);return k.subscribe.bind(k)}class xr{constructor(P,k){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=k,this.task.then(()=>{P(this)}).catch(B=>{this.error(B)})}next(P){this.forEachObserver(k=>{k.next(P)})}error(P){this.forEachObserver(k=>{k.error(P)}),this.close(P)}complete(){this.forEachObserver(P=>{P.complete()}),this.close()}subscribe(P,k,B){let q;if(void 0===P&&void 0===k&&void 0===B)throw new Error("Missing Observer.");q=function zi(S,P){if("object"!=typeof S||null===S)return!1;for(const k of P)if(k in S&&"function"==typeof S[k])return!0;return!1}(P,["next","error","complete"])?P:{next:P,error:k,complete:B},void 0===q.next&&(q.next=An),void 0===q.error&&(q.error=An),void 0===q.complete&&(q.complete=An);const Se=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),Se}unsubscribeOne(P){void 0===this.observers||void 0===this.observers[P]||(delete this.observers[P],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(P){if(!this.finalized)for(let k=0;k<this.observers.length;k++)this.sendOne(k,P)}sendOne(P,k){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[P])try{k(this.observers[P])}catch(B){typeof console<"u"&&console.error&&console.error(B)}})}close(P){this.finalized||(this.finalized=!0,void 0!==P&&(this.finalError=P),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function An(){}function as(S){return S&&S._delegate?S._delegate:S}},596:(os,or,it)=>{function C(n){return"function"==typeof n}function We(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Pe=We(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ee(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Tt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(C(r))try{r()}catch(s){e=s instanceof Pe?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Qn(s)}catch(o){e=e??[],o instanceof Pe?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Pe(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Qn(e);else{if(e instanceof Tt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ee(t,e)}remove(e){const{_finalizers:t}=this;t&&ee(t,e),e instanceof Tt&&e._removeParent(this)}}Tt.EMPTY=(()=>{const n=new Tt;return n.closed=!0,n})();const on=Tt.EMPTY;function gn(n){return n instanceof Tt||n&&"closed"in n&&C(n.remove)&&C(n.add)&&C(n.unsubscribe)}function Qn(n){C(n)?n():n.unsubscribe()}const ht={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},oe={setTimeout(n,e,...t){const{delegate:r}=oe;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=oe;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ge(n){oe.setTimeout(()=>{const{onUnhandledError:e}=ht;if(!e)throw n;e(n)})}function Ne(){}const lt=Ct("C",void 0,void 0);function Ct(n,e,t){return{kind:n,value:e,error:t}}let Ke=null;function ot(n){if(ht.useDeprecatedSynchronousErrorHandling){const e=!Ke;if(e&&(Ke={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Ke;if(Ke=null,t)throw r}}else n()}class Zn extends Tt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gn(e)&&e.add(this)):this.destination=le}static create(e,t,r){return new mr(e,t,r)}next(e){this.isStopped?$t(function Yn(n){return Ct("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?$t(function At(n){return Ct("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?$t(lt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qt=Function.prototype.bind;function bt(n,e){return Qt.call(n,e)}class Vt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ze(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ze(r)}else ze(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ze(t)}}}class mr extends Zn{constructor(e,t,r){let i;if(super(),C(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ht.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bt(e.next,s),error:e.error&&bt(e.error,s),complete:e.complete&&bt(e.complete,s)}):i=e}this.destination=new Vt(i)}}function ze(n){ht.useDeprecatedSynchronousErrorHandling?function Jn(n){ht.useDeprecatedSynchronousErrorHandling&&Ke&&(Ke.errorThrown=!0,Ke.error=n)}(n):ge(n)}function $t(n,e){const{onStoppedNotification:t}=ht;t&&oe.setTimeout(()=>t(n,e))}const le={closed:!0,next:Ne,error:function En(n){throw n},complete:Ne},Yt="function"==typeof Symbol&&Symbol.observable||"@@observable";function qt(n){return n}function pi(n){return 0===n.length?qt:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let dt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Y(n){return n&&n instanceof Zn||function iu(n){return n&&C(n.next)&&C(n.error)&&C(n.complete)}(n)&&gn(n)}(t)?t:new mr(t,r,i);return ot(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Es(r))((i,s)=>{const o=new mr({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Yt](){return this}pipe(...t){return pi(t)(this)}toPromise(t){return new(t=Es(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Es(n){var e;return null!==(e=n??ht.Promise)&&void 0!==e?e:Promise}const Z=We(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let te=(()=>{class n extends dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new se(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Z}next(t){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?on:(this.currentObservers=null,s.push(t),new Tt(()=>{this.currentObservers=null,ee(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new dt;return t.source=this,t}}return n.create=(e,t)=>new se(e,t),n})();class se extends te{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:on}}function Ie(n){return C(n?.lift)}function ne(n){return e=>{if(Ie(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(n,e,t,r,i){return new ft(n,e,t,r,i)}class ft extends Zn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Oe(n,e){return ne((t,r)=>{let i=0;t.subscribe(fe(r,s=>{r.next(n.call(e,s,i++))}))})}var Be=it(635);const pt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Jt(n){return C(n?.then)}function Rt(n){return C(n[Yt])}function ar(n){return Symbol.asyncIterator&&C(n?.[Symbol.asyncIterator])}function Pr(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Mr=function Xn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Jr(n){return C(n?.[Mr])}function Qo(n){return(0,Be.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Be.N3)(t.read());if(i)return yield(0,Be.N3)(void 0);yield yield(0,Be.N3)(r)}}finally{t.releaseLock()}})}function Yo(n){return C(n?.getReader)}function Hn(n){if(n instanceof dt)return n;if(null!=n){if(Rt(n))return function Xs(n){return new dt(e=>{const t=n[Yt]();if(C(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(pt(n))return function ws(n){return new dt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Jt(n))return function Sc(n){return new dt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ge)})}(n);if(ar(n))return Hi(n);if(Jr(n))return function eo(n){return new dt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Yo(n))return function to(n){return Hi(Qo(n))}(n)}throw Pr(n)}function Hi(n){return new dt(e=>{(function gi(n,e){var t,r,i,s;return(0,Be.sH)(this,void 0,void 0,function*(){try{for(t=(0,Be.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Sn(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function wn(n,e,t=1/0){return C(e)?wn((r,i)=>Oe((s,o)=>e(r,s,i,o))(Hn(n(r,i))),t):("number"==typeof e&&(t=e),ne((r,i)=>function xr(n,e,t,r,i,s,o,a){const u=[];let d=0,g=0,m=!1;const v=()=>{m&&!u.length&&!d&&e.complete()},w=D=>d<r?T(D):u.push(D),T=D=>{s&&e.next(D),d++;let M=!1;Hn(t(D,g++)).subscribe(fe(e,z=>{i?.(z),s?w(z):e.next(z)},()=>{M=!0},void 0,()=>{if(M)try{for(d--;u.length&&d<r;){const z=u.shift();o?Sn(e,o,()=>T(z)):T(z)}v()}catch(z){e.error(z)}}))};return n.subscribe(fe(e,w,()=>{m=!0,v()})),()=>{a?.()}}(r,i,n,t)))}function zi(n=1/0){return wn(qt,n)}const An=new dt(n=>n.complete());function Nr(n){return n[n.length-1]}function no(n){return C(Nr(n))?n.pop():void 0}function As(n){return function Zo(n){return n&&C(n.schedule)}(Nr(n))?n.pop():void 0}function Zr(n,e=0){return ne((t,r)=>{t.subscribe(fe(r,i=>Sn(r,n,()=>r.next(i),e),()=>Sn(r,n,()=>r.complete(),e),i=>Sn(r,n,()=>r.error(i),e)))})}function Or(n,e=0){return ne((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ea(n,e){if(!n)throw new Error("Iterable cannot be null");return new dt(t=>{Sn(t,e,()=>{const r=n[Symbol.asyncIterator]();Sn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function S(n,e){return e?function as(n,e){if(null!=n){if(Rt(n))return function ro(n,e){return Hn(n).pipe(Or(e),Zr(e))}(n,e);if(pt(n))return function io(n,e){return new dt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Jt(n))return function Xo(n,e){return Hn(n).pipe(Or(e),Zr(e))}(n,e);if(ar(n))return ea(n,e);if(Jr(n))return function Rc(n,e){return new dt(t=>{let r;return Sn(t,e,()=>{r=n[Mr](),Sn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>C(r?.return)&&r.return()})}(n,e);if(Yo(n))return function ta(n,e){return ea(Qo(n),e)}(n,e)}throw Pr(n)}(n,e):Hn(n)}function P(...n){const e=As(n),t=function _r(n,e){return"number"==typeof Nr(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Hn(r[0]):zi(t)(S(r,e)):An}class k extends te{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function B(...n){return S(n,As(n))}function q(n={}){const{connector:e=(()=>new te),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,d=0,g=!1,m=!1;const v=()=>{a?.unsubscribe(),a=void 0},w=()=>{v(),o=u=void 0,g=m=!1},T=()=>{const D=o;w(),D?.unsubscribe()};return ne((D,M)=>{d++,!m&&!g&&v();const z=u=u??e();M.add(()=>{d--,0===d&&!m&&!g&&(a=Se(T,i))}),z.subscribe(M),!o&&d>0&&(o=new mr({next:F=>z.next(F),error:F=>{m=!0,v(),a=Se(w,t,F),z.error(F)},complete:()=>{g=!0,v(),a=Se(w,r),z.complete()}}),Hn(D).subscribe(o))})(s)}}function Se(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new mr({next:()=>{r.unsubscribe(),n()}});return Hn(e(...t)).subscribe(r)}function Ce(n,e){return ne((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(fe(r,u=>{i?.unsubscribe();let d=0;const g=s++;Hn(n(u,g)).subscribe(i=fe(r,m=>r.next(e?e(u,m,g,d++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ht(n,e=qt){return n=n??Rn,ne((t,r)=>{let i,s=!0;t.subscribe(fe(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Rn(n,e){return n===e}function $e(n){for(let e in n)if(n[e]===$e)return e;throw Error("Could not find renamed property on target object.")}function Tn(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function He(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(He).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function er(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const us=$e({__forward_ref__:$e});function St(n){return n.__forward_ref__=St,n.toString=function(){return He(this())},n}function qe(n){return Gi(n)?n():n}function Gi(n){return"function"==typeof n&&n.hasOwnProperty(us)&&n.__forward_ref__===St}function na(n){return n&&!!n.\u0275providers}const cs="https://g.co/ng/security#xss";class de extends Error{constructor(e,t){super(function Q(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function x(n){return"string"==typeof n?n:null==n?"":String(n)}function rt(n,e){throw new de(-201,!1)}function mi(n,e){null==n&&function Qe(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Fe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ur(n){return{providers:n.providers||[],imports:n.imports||[]}}function xc(n){return mh(n,su)||mh(n,so)}function mh(n,e){return n.hasOwnProperty(e)?n[e]:null}function Nc(n){return n&&(n.hasOwnProperty(_h)||n.hasOwnProperty(Gg))?n[_h]:null}const su=$e({\u0275prov:$e}),_h=$e({\u0275inj:$e}),so=$e({ngInjectableDef:$e}),Gg=$e({ngInjectorDef:$e});var ct=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ct||{});let yh;function kr(n){const e=yh;return yh=n,e}function kc(n,e,t){const r=xc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ct.Optional?null:void 0!==e?e:void rt(He(n))}const Ft=globalThis;class _e{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Fe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const au={},uu="__NG_DI_FLAG__",Ts="ngTempTokenPath",Ah=/\n/gm,Di="__source";let ra;function Cs(n){const e=ra;return ra=n,e}function Ch(n,e=ct.Default){if(void 0===ra)throw new de(-203,!1);return null===ra?kc(n,void 0,e):ra.get(n,e&ct.Optional?null:void 0,e)}function me(n,e=ct.Default){return(function Oc(){return yh}()||Ch)(qe(n),e)}function be(n,e=ct.Default){return me(n,Lc(e))}function Lc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function cu(n){const e=[];for(let t=0;t<n.length;t++){const r=qe(n[t]);if(Array.isArray(r)){if(0===r.length)throw new de(900,!1);let i,s=ct.Default;for(let o=0;o<r.length;o++){const a=r[o],u=CI(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(me(i,s))}else e.push(me(r))}return e}function bi(n,e){return n[uu]=e,n.prototype[uu]=e,n}function CI(n){return n[uu]}function Ds(n){return{toString:n}.toString()}var ia=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ia||{}),Fn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Fn||{});const yr={},gt=[],du=$e({\u0275cmp:$e}),Uc=$e({\u0275dir:$e}),Bc=$e({\u0275pipe:$e}),Jg=$e({\u0275mod:$e}),Vr=$e({\u0275fac:$e}),hu=$e({__NG_ELEMENT_ID__:$e}),fu=$e({__NG_ENV_ID__:$e});function Dh(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function jc(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];ei(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function $c(n){return 3===n||4===n||6===n}function ei(n){return 64===n.charCodeAt(0)}function sa(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Zg(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Zg(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Hc="ng-template";function zc(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==Dh(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function bh(n){return 4===n.type&&n.value!==Hc}function Xg(n,e,t){return e===(4!==n.type||t?n.value:Hc)}function bI(n,e,t){let r=4;const i=n.attrs||[],s=function Rh(n){for(let e=0;e<n.length;e++)if($c(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Xg(n,u,t)||""===u&&1===e.length){if(ti(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!zc(n.attrs,d,t)){if(ti(r))return!1;o=!0}continue}const m=Sh(8&r?"class":u,i,bh(n),t);if(-1===m){if(ti(r))return!1;o=!0;continue}if(""!==d){let v;v=m>s?"":i[m+1].toLowerCase();const w=8&r?v:null;if(w&&-1!==Dh(w,d,0)||2&r&&d!==v){if(ti(r))return!1;o=!0}}}}else{if(!o&&!ti(r)&&!ti(u))return!1;if(o&&ti(u))continue;o=!1,r=u|1&r}}return ti(r)||o}function ti(n){return 0==(1&n)}function Sh(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function em(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function qc(n,e,t=!1){for(let r=0;r<e.length;r++)if(bI(n,e[r],t))return!0;return!1}function Mh(n,e){return n?":not("+e.trim()+")":e}function xh(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ti(o)&&(e+=Mh(s,i),i=""),r=o,s=s||!ti(r);t++}return""!==i&&(e+=Mh(s,i)),e}function Si(n){return Ds(()=>{const e=rm(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ia.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Fn.Emulated,styles:n.styles||gt,_:null,schemas:n.schemas||null,tView:null,id:""};Kc(t);const r=n.dependencies;return t.directiveDefs=Qc(r,!1),t.pipeDefs=Qc(r,!0),t.id=function SI(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function tm(n){return yt(n)||Ln(n)}function kh(n){return null!==n}function ni(n){return Ds(()=>({type:n.type,bootstrap:n.bootstrap||gt,declarations:n.declarations||gt,imports:n.imports||gt,exports:n.exports||gt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function nm(n,e){if(null==n)return yr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Ye(n){return Ds(()=>{const e=rm(n);return Kc(e),e})}function yt(n){return n[du]||null}function Ln(n){return n[Uc]||null}function qn(n){return n[Bc]||null}function vr(n,e){const t=n[Jg]||null;if(!t&&!0===e)throw new Error(`Type ${He(n)} does not have '\u0275mod' property.`);return t}function rm(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||yr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||gt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nm(n.inputs,e),outputs:nm(n.outputs)}}function Kc(n){n.features?.forEach(e=>e(n))}function Qc(n,e){if(!n)return null;const t=e?qn:tm;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(kh)}const Zt=0,De=1,Ze=2,Xt=3,ri=4,pu=5,Gn=6,oa=7,Cn=8,Ki=9,aa=10,Xe=11,oo=12,im=13,Ss=14,Dn=15,ao=16,ua=17,_i=18,gu=19,Yc=20,Rs=21,Ri=22,mu=23,uo=24,mt=25,Jc=1,Zc=2,Qi=7,co=9,tr=11;function Fr(n){return Array.isArray(n)&&"object"==typeof n[Jc]}function Ir(n){return Array.isArray(n)&&!0===n[Jc]}function sm(n){return 0!=(4&n.flags)}function ca(n){return n.componentOffset>-1}function Lh(n){return 1==(1&n.flags)}function ii(n){return!!n.template}function Uh(n){return 0!=(512&n[Ze])}function lo(n,e){return n.hasOwnProperty(Vr)?n[Vr]:null}let en=null,el=!1;function yi(n){const e=en;return en=n,e}const da={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function bn(n){if(!ha(n)||n.dirty){if(!n.producerMustRecompute(n)&&!fm(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function hm(n){n.dirty=!0,function dm(n){if(void 0===n.liveConsumerNode)return;const e=el;el=!0;try{for(const t of n.liveConsumerNode)t.dirty||hm(t)}finally{el=e}}(n),n.consumerMarkedDirty?.(n)}function vu(n){return n&&(n.nextProducerIndex=0),yi(n)}function $h(n,e){if(yi(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(ha(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)fo(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function fm(n){Yi(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(bn(t),r!==t.version))return!0}return!1}function Hh(n){if(Yi(n),ha(n))for(let e=0;e<n.producerNode.length;e++)fo(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function fo(n,e){if(function Iu(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Yi(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)fo(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Yi(i),i.producerIndexOfThis[r]=e}}function ha(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Yi(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let qh=null;const nl=()=>{},LI=(()=>({...da,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:nl}))();class UI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function vi(){return Wh}function Wh(n){return n.type.prototype.ngOnChanges&&(n.setInput=jI),BI}function BI(){const n=rl(this),e=n?.current;if(e){const t=n.previous;if(t===yr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function jI(n,e,t,r){const i=this.declaredInputs[t],s=rl(n)||function $I(n,e){return n[Em]=e}(n,{previous:yr,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new UI(u&&u.currentValue,e,a===yr),n[r]=e}vi.ngInherit=!0;const Em="__ngSimpleChanges__";function rl(n){return n[Em]||null}const Ii=function(n,e,t){};function xt(n){for(;Array.isArray(n);)n=n[Zt];return n}function sl(n,e){return xt(e[n])}function cr(n,e){return xt(e[n.index])}function Ps(n,e){return n.data[e]}function si(n,e){const t=e[n];return Fr(t)?t:t[Zt]}function hs(n,e){return null==e?null:n[e]}function Am(n){n[ua]=0}function GI(n){1024&n[Ze]||(n[Ze]|=1024,Tm(n,1))}function ol(n){1024&n[Ze]&&(n[Ze]&=-1025,Tm(n,-1))}function Tm(n,e){let t=n[Xt];if(null===t)return;t[pu]+=e;let r=t;for(t=t[Xt];null!==t&&(1===e&&1===r[pu]||-1===e&&0===r[pu]);)t[pu]+=e,r=t,t=t[Xt]}const Ge={lFrame:Ru(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function cl(){return Ge.bindingsEnabled}function ue(){return Ge.lFrame.lView}function It(){return Ge.lFrame.tView}function lr(n){return Ge.lFrame.contextLView=n,n[Cn]}function Lr(n){return Ge.lFrame.contextLView=null,n}function nr(){let n=ll();for(;null!==n&&64===n.type;)n=n.parent;return n}function ll(){return Ge.lFrame.currentTNode}function Ji(n,e){const t=Ge.lFrame;t.currentTNode=n,t.isParent=e}function bu(){return Ge.lFrame.isParent}function po(){return Ge.lFrame.bindingIndex++}function Pm(n,e){const t=Ge.lFrame;t.bindingIndex=t.bindingRootIndex=n,tf(e)}function tf(n){Ge.lFrame.currentDirectiveIndex=n}function Su(n){Ge.lFrame.currentQueryIndex=n}function JI(n){const e=n[De];return 2===e.type?e.declTNode:1===e.type?n[Gn]:null}function xm(n,e,t){if(t&ct.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&ct.Host||(i=JI(s),null===i||(s=s[Ss],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Ge.lFrame=Nm();return r.currentTNode=e,r.lView=n,!0}function hl(n){const e=Nm(),t=n[De];Ge.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Nm(){const n=Ge.lFrame,e=null===n?null:n.child;return null===e?Ru(n):e}function Ru(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Om(){const n=Ge.lFrame;return Ge.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const km=Om;function rf(){const n=Om();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Er(){return Ge.lFrame.selectedIndex}function go(n){Ge.lFrame.selectedIndex=n}function un(){const n=Ge.lFrame;return Ps(n.tView,n.selectedIndex)}let Fm=!0;function Pu(){return Fm}function Ns(n){Fm=n}function fl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:g}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),null!=g&&(n.destroyHooks??=[]).push(t,g)}}function pl(n,e,t){ml(n,e,3,t)}function gl(n,e,t,r){(3&n[Ze])===t&&ml(n,e,t,r)}function Mu(n,e){let t=n[Ze];(3&t)===e&&(t&=8191,t+=1,n[Ze]=t)}function ml(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[ua]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[ua]+=65536),(a<s||-1==s)&&(af(n,t,e,u),n[ua]=(4294901760&n[ua])+u+2),u++}function Lm(n,e){Ii(4,n,e);const t=yi(null);try{e.call(n)}finally{yi(t),Ii(5,n,e)}}function af(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[Ze]>>13<n[ua]>>16&&(3&n[Ze])===e&&(n[Ze]+=8192,Lm(a,s)):Lm(a,s)}const fa=-1;class pa{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function _l(n){return n!==fa}function xu(n){return 32767&n}function Nu(n,e){let t=function sE(n){return n>>16}(n),r=e;for(;t>0;)r=r[Ss],t--;return r}let df=!0;function yl(n){const e=df;return df=n,e}const $m=255,aE=5;let uE=0;const hr={};function vl(n,e){const t=Hm(n,e);if(-1!==t)return t;const r=e[De];r.firstCreatePass&&(n.injectorIndex=e.length,Ou(r.data,n),Ou(e,null),Ou(r.blueprint,null));const i=ga(n,e),s=n.injectorIndex;if(_l(i)){const o=xu(i),a=Nu(i,e),u=a[De].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function Ou(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Hm(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function ga(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=ku(i),null===r)return fa;if(t++,i=i[Ss],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return fa}function hf(n,e,t){!function cE(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(hu)&&(r=t[hu]),null==r&&(r=t[hu]=uE++);const i=r&$m;e.data[n+(i>>aE)]|=1<<i}(n,e,t)}function Il(n,e,t){if(t&ct.Optional||void 0!==n)return n;rt()}function zm(n,e,t,r){if(t&ct.Optional&&void 0===r&&(r=null),!(t&(ct.Self|ct.Host))){const i=n[Ki],s=kr(void 0);try{return i?i.get(e,r,t&ct.Optional):kc(e,r,t&ct.Optional)}finally{kr(s)}}return Il(r,0,t)}function qm(n,e,t,r=ct.Default,i){if(null!==n){if(2048&e[Ze]&&!(r&ct.Self)){const o=function pE(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Ze]&&!(512&o[Ze]);){const a=El(s,o,t,r|ct.Self,hr);if(a!==hr)return a;let u=s.parent;if(!u){const d=o[Yc];if(d){const g=d.get(t,hr,r);if(g!==hr)return g}u=ku(o),o=o[Ss]}s=u}return i}(n,e,t,r,hr);if(o!==hr)return o}const s=El(n,e,t,r,hr);if(s!==hr)return s}return zm(e,t,r,i)}function El(n,e,t,r,i){const s=function hE(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(hu)?n[hu]:void 0;return"number"==typeof e?e>=0?e&$m:pf:e}(t);if("function"==typeof s){if(!xm(e,n,r))return r&ct.Host?Il(i,0,r):zm(e,t,r,i);try{let o;if(o=s(r),null!=o||r&ct.Optional)return o;rt()}finally{km()}}else if("number"==typeof s){let o=null,a=Hm(n,e),u=fa,d=r&ct.Host?e[Dn][Gn]:null;for((-1===a||r&ct.SkipSelf)&&(u=-1===a?ga(n,e):e[a+8],u!==fa&&ff(r,!1)?(o=e[De],a=xu(u),e=Nu(u,e)):a=-1);-1!==a;){const g=e[De];if(Gm(s,a,g.data)){const m=dE(a,e,t,o,r,d);if(m!==hr)return m}u=e[a+8],u!==fa&&ff(r,e[De].data[a+8]===d)&&Gm(s,a,e)?(o=g,a=xu(u),e=Nu(u,e)):a=-1}}return i}function dE(n,e,t,r,i,s){const o=e[De],a=o.data[n+8],g=function wl(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,g=s>>20,v=i?a+g:n.directiveEnd;for(let w=r?a:a+g;w<v;w++){const T=o[w];if(w<u&&t===T||w>=u&&T.type===t)return w}if(i){const w=o[u];if(w&&ii(w)&&w.type===t)return u}return null}(a,o,t,null==r?ca(a)&&df:r!=o&&0!=(3&a.type),i&ct.Host&&s===a);return null!==g?mo(e,o,g,a):hr}function mo(n,e,t,r){let i=n[t];const s=e.data;if(function Um(n){return n instanceof pa}(i)){const o=i;o.resolving&&function Ae(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new de(-200,`Circular dependency in DI detected for ${n}${t}`)}(function K(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():x(n)}(s[t]));const a=yl(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?kr(o.injectImpl):null;xm(n,r,ct.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function rE(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Wh(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==d&&kr(d),yl(a),o.resolving=!1,km()}}return i}function Gm(n,e,t){return!!(t[e+(n>>aE)]&1<<n)}function ff(n,e){return!(n&ct.Self||n&ct.Host&&e)}class wr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return qm(this._tNode,this._lView,e,Lc(r),t)}}function pf(){return new wr(nr(),ue())}function Un(n){return Ds(()=>{const e=n.prototype.constructor,t=e[Vr]||gf(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Vr]||gf(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function gf(n){return Gi(n)?()=>{const e=gf(qe(n));return e&&e()}:lo(n)}function ku(n){const e=n[De],t=e.type;return 2===t?e.declTNode:1===t?n[Gn]:null}const _a="__parameters__";function ya(n,e,t){return Ds(()=>{const r=function mf(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,g){const m=u.hasOwnProperty(_a)?u[_a]:Object.defineProperty(u,_a,{value:[]})[_a];for(;m.length<=g;)m.push(null);return(m[g]=m[g]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Xi(n,e){n.forEach(t=>Array.isArray(t)?Xi(t,e):e(t))}function vf(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Tl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Mn(n,e,t){let r=va(n,e);return r>=0?n[1|r]=t:(r=~r,function Km(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Cl(n,e){const t=va(n,e);if(t>=0)return n[1|t]}function va(n,e){return function Qm(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Lu=bi(ya("Optional"),8),Dl=bi(ya("SkipSelf"),4);function r_(n){return 128==(128&n.flags)}var Ia=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ia||{});const wE=new Map;let QU=0;const TE="__ngContext__";function Br(n,e){Fr(e)?(n[TE]=e[gu],function JU(n){wE.set(n[gu],n)}(e)):n[TE]=e}let CE;function DE(n,e){return CE(n,e)}function Mf(n){const e=n[Xt];return Ir(e)?e[Xt]:e}function Hb(n){return qb(n[oo])}function zb(n){return qb(n[ri])}function qb(n){for(;null!==n&&!Ir(n);)n=n[ri];return n}function Pl(n,e,t,r,i){if(null!=r){let s,o=!1;Ir(r)?s=r:Fr(r)&&(o=!0,r=r[Zt]);const a=xt(r);0===n&&null!==t?null==i?Qb(e,t,a):Uu(e,t,a,i||null,!0):1===n&&null!==t?Uu(e,t,a,i||null,!0):2===n?function l_(n,e,t){const r=u_(n,e);r&&function mB(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function vB(n,e,t,r,i){const s=t[Qi];s!==xt(t)&&Pl(e,n,r,s,i);for(let a=tr;a<t.length;a++){const u=t[a];Nf(u[De],u,n,e,r,s)}}(e,n,s,t,i)}}function o_(n,e,t){return n.createElement(e,t)}function Wb(n,e){const t=n[co],r=t.indexOf(e);ol(e),t.splice(r,1)}function a_(n,e){if(n.length<=tr)return;const t=tr+e,r=n[t];if(r){const i=r[ao];null!==i&&i!==n&&Wb(i,r),e>0&&(n[t-1][ri]=r[ri]);const s=Tl(n,tr+e);!function uB(n,e){Nf(n,e,e[Xe],2,null,null),e[Zt]=null,e[Gn]=null}(r[De],r);const o=s[_i];null!==o&&o.detachView(s[De]),r[Xt]=null,r[ri]=null,r[Ze]&=-129}return r}function SE(n,e){if(!(256&e[Ze])){const t=e[Xe];e[mu]&&Hh(e[mu]),e[uo]&&Hh(e[uo]),t.destroyNode&&Nf(n,e,t,3,null,null),function dB(n){let e=n[oo];if(!e)return RE(n[De],n);for(;e;){let t=null;if(Fr(e))t=e[oo];else{const r=e[tr];r&&(t=r)}if(!t){for(;e&&!e[ri]&&e!==n;)Fr(e)&&RE(e[De],e),e=e[Xt];null===e&&(e=n),Fr(e)&&RE(e[De],e),t=e&&e[ri]}e=t}}(e)}}function RE(n,e){if(!(256&e[Ze])){e[Ze]&=-129,e[Ze]|=256,function gB(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof pa)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Ii(4,a,u);try{u.call(a)}finally{Ii(5,a,u)}}else{Ii(4,i,s);try{s.call(i)}finally{Ii(5,i,s)}}}}}(n,e),function pB(n,e){const t=n.cleanup,r=e[oa];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[oa]=null);const i=e[Rs];if(null!==i){e[Rs]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[De].type&&e[Xe].destroy();const t=e[ao];if(null!==t&&Ir(e[Xt])){t!==e[Xt]&&Wb(t,e);const r=e[_i];null!==r&&r.detachView(n)}!function ZU(n){wE.delete(n[gu])}(e)}}function PE(n,e,t){return function Kb(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Zt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Fn.None||s===Fn.Emulated)return null}return cr(r,t)}}(n,e.parent,t)}function Uu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Qb(n,e,t){n.appendChild(e,t)}function Yb(n,e,t,r,i){null!==r?Uu(n,e,t,r,i):Qb(n,e,t)}function u_(n,e){return n.parentNode(e)}let ME,kE,h_,Xb=function Zb(n,e,t){return 40&n.type?cr(n,t):null};function c_(n,e,t,r){const i=PE(n,r,e),s=e[Xe],a=function Jb(n,e,t){return Xb(n,e,t)}(r.parent||e[Gn],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)Yb(s,i,t[u],a,!1);else Yb(s,i,t,a,!1);void 0!==ME&&ME(s,r,e,t,i)}function xf(n,e){if(null!==e){const t=e.type;if(3&t)return cr(e,n);if(4&t)return xE(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return xf(n,r);{const i=n[e.index];return Ir(i)?xE(-1,i):xt(i)}}if(32&t)return DE(e,n)()||xt(n[e.index]);{const r=tS(n,e);return null!==r?Array.isArray(r)?r[0]:xf(Mf(n[Dn]),r):xf(n,e.next)}}return null}function tS(n,e){return null!==e?n[Dn][Gn].projection[e.projection]:null}function xE(n,e){const t=tr+n+1;if(t<e.length){const r=e[t],i=r[De].firstChild;if(null!==i)return xf(r,i)}return e[Qi]}function NE(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&Br(xt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)NE(n,e,t.child,r,i,s,!1),Pl(e,n,i,a,s);else if(32&u){const d=DE(t,r);let g;for(;g=d();)Pl(e,n,i,g,s);Pl(e,n,i,a,s)}else 16&u?rS(n,e,r,t,i,s):Pl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Nf(n,e,t,r,i,s){NE(t,r,n.firstChild,e,i,s,!1)}function rS(n,e,t,r,i,s){const o=t[Dn],u=o[Gn].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Pl(e,n,i,u[d],s);else{let d=u;const g=o[Xt];r_(r)&&(d.flags|=128),NE(n,e,d,g,i,s,!0)}}function iS(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function sS(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&jc(n,e,r),null!==i&&iS(n,e,i),null!==s&&function EB(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function uS(n){return function VE(){if(void 0===h_&&(h_=null,Ft.trustedTypes))try{h_=Ft.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return h_}()?.createScriptURL(n)||n}class cS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${cs})`}}function Ea(n){return n instanceof cS?n.changingThisBreaksApplicationSecurity:n}function Of(n,e){const t=function MB(n){return n instanceof cS&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${cs})`)}return t===e}const kB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Nl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Nl||{});function jE(n){const e=Vf();return e?e.sanitize(Nl.URL,n)||"":Of(n,"URL")?Ea(n):function FE(n){return(n=String(n)).match(kB)?n:"unsafe:"+n}(x(n))}function mS(n){const e=Vf();if(e)return uS(e.sanitize(Nl.RESOURCE_URL,n)||"");if(Of(n,"ResourceURL"))return uS(Ea(n));throw new de(904,!1)}function Vf(){const n=ue();return n&&n[aa].sanitizer}const Ff=new _e("ENVIRONMENT_INITIALIZER"),yS=new _e("INJECTOR",-1),vS=new _e("INJECTOR_DEF_TYPES");class $E{get(e,t=au){if(t===au){const r=new Error(`NullInjectorError: No provider for ${He(e)}!`);throw r.name="NullInjectorError",r}return t}}function KB(...n){return{\u0275providers:IS(0,n),\u0275fromNgModule:!0}}function IS(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Xi(e,o=>{const a=o;p_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&ES(i,s),t}function ES(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];zE(i,s=>{e(s,r)})}}function p_(n,e,t,r){if(!(n=qe(n)))return!1;let i=null,s=Nc(n);const o=!s&&yt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=Nc(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)p_(d,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{Xi(s.imports,g=>{p_(g,e,t,r)&&(d||=[],d.push(g))})}finally{}void 0!==d&&ES(d,e)}if(!a){const d=lo(i)||(()=>new i);e({provide:i,useFactory:d,deps:gt},i),e({provide:vS,useValue:i,multi:!0},i),e({provide:Ff,useValue:()=>me(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=n;zE(u,g=>{e(g,d)})}}}return i!==n&&void 0!==n.providers}function zE(n,e){for(let t of n)na(t)&&(t=t.\u0275providers),Array.isArray(t)?zE(t,e):e(t)}const QB=$e({provide:String,useValue:$e});function qE(n){return null!==n&&"object"==typeof n&&QB in n}function Bu(n){return"function"==typeof n}const GE=new _e("Set Injector scope."),g_={},JB={};let WE;function m_(){return void 0===WE&&(WE=new $E),WE}class xi{}class Ol extends xi{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,QE(e,o=>this.processProvider(o)),this.records.set(yS,kl(void 0,this)),i.has("environment")&&this.records.set(xi,kl(void 0,this));const s=this.records.get(GE);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(vS.multi,gt,ct.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Cs(this),r=kr(void 0);try{return e()}finally{Cs(t),kr(r)}}get(e,t=au,r=ct.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(fu))return e[fu](this);r=Lc(r);const s=Cs(this),o=kr(void 0);try{if(!(r&ct.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function nj(n){return"function"==typeof n||"object"==typeof n&&n instanceof _e}(e)&&xc(e);u=d&&this.injectableDefInScope(d)?kl(KE(e),g_):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&ct.Self?m_():this.parent).get(e,t=r&ct.Optional&&t===au?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Ts]=a[Ts]||[]).unshift(He(e)),s)throw a;return function DI(n,e,t,r){const i=n[Ts];throw e[Di]&&i.unshift(e[Di]),n.message=function lu(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=He(e);if(Array.isArray(e))i=e.map(He).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):He(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Ah,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Ts]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{kr(o),Cs(s)}}resolveInjectorInitializers(){const e=Cs(this),t=kr(void 0);try{const i=this.get(Ff.multi,gt,ct.Self);for(const s of i)s()}finally{Cs(e),kr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(He(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(e){let t=Bu(e=qe(e))?e:qe(e&&e.provide);const r=function XB(n){return qE(n)?kl(void 0,n.useValue):kl(TS(n),g_)}(e);if(Bu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=kl(void 0,g_,!0),i.factory=()=>cu(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===g_&&(t.value=JB,t.value=t.factory()),"object"==typeof t.value&&t.value&&function tj(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=qe(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function KE(n){const e=xc(n),t=null!==e?e.factory:lo(n);if(null!==t)return t;if(n instanceof _e)throw new de(204,!1);if(n instanceof Function)return function ZB(n){const e=n.length;if(e>0)throw function Eo(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new de(204,!1);const t=function qg(n){return n&&(n[su]||n[so])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new de(204,!1)}function TS(n,e,t){let r;if(Bu(n)){const i=qe(n);return lo(i)||KE(i)}if(qE(n))r=()=>qe(n.useValue);else if(function AS(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...cu(n.deps||[]));else if(function wS(n){return!(!n||!n.useExisting)}(n))r=()=>me(qe(n.useExisting));else{const i=qe(n&&(n.useClass||n.provide));if(!function ej(n){return!!n.deps}(n))return lo(i)||KE(i);r=()=>new i(...cu(n.deps))}return r}function kl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function QE(n,e){for(const t of n)Array.isArray(t)?QE(t,e):t&&na(t)?QE(t.\u0275providers,e):e(t)}const __=new _e("AppId",{providedIn:"root",factory:()=>rj}),rj="ng",CS=new _e("Platform Initializer"),Os=new _e("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),DS=new _e("CSP nonce",{providedIn:"root",factory:()=>function xl(){if(void 0!==kE)return kE;if(typeof document<"u")return document;throw new de(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let bS=(n,e,t)=>null;function rw(n,e,t=!1){return bS(n,e,t)}class fj{}class PS{}class gj{resolveComponentFactory(e){throw function pj(n){const e=Error(`No component factory found for ${He(n)}.`);return e.ngComponent=n,e}(e)}}let A_=(()=>{class n{static{this.NULL=new gj}}return n})();function mj(){return Ll(nr(),ue())}function Ll(n,e){return new Ni(cr(n,e))}let Ni=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=mj}}return n})();class xS{}let Co=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function yj(){const n=ue(),t=si(nr().index,n);return(Fr(t)?t:n)[Xe]}()}}return n})(),vj=(()=>{class n{static{this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>null})}}return n})();class Ul{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const NS=new Ul("16.2.12"),ow={};function FS(n,e=null,t=null,r){const i=LS(n,e,t,r);return i.resolveInjectorInitializers(),i}function LS(n,e=null,t=null,r,i=new Set){const s=[t||gt,KB(n)];return r=r||("object"==typeof n?void 0:He(n)),new Ol(s,e||m_(),r||null,i)}let Oi=(()=>{class n{static{this.THROW_IF_NOT_FOUND=au}static{this.NULL=new $E}static create(t,r){if(Array.isArray(t))return FS({name:""},r,t,"");{const i=t.name??"";return FS({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Fe({token:n,providedIn:"any",factory:()=>me(yS)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function uw(n){return n.ngOriginalError}class Do{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&uw(e);for(;t&&uw(t);)t=uw(t);return t||null}}function cw(n){return e=>{setTimeout(n,void 0,e)}}const xn=class bj extends te{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=cw(s),i&&(i=cw(i)),o&&(o=cw(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Tt&&e.add(a),a}};function BS(...n){}class Lt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xn(!1),this.onMicrotaskEmpty=new xn(!1),this.onStable=new xn(!1),this.onError=new xn(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Sj(){const n="function"==typeof Ft.requestAnimationFrame;let e=Ft[n?"requestAnimationFrame":"setTimeout"],t=Ft[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Mj(n){const e=()=>{!function Pj(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ft,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,dw(n),n.isCheckStableRunning=!0,lw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),dw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function Nj(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return jS(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),$S(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return jS(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),$S(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,dw(n),lw(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Lt.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(Lt.isInAngularZone())throw new de(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Rj,BS,BS);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Rj={};function lw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function dw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function jS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $S(n){n._nesting--,lw(n)}class xj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xn,this.onMicrotaskEmpty=new xn,this.onStable=new xn,this.onError=new xn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const HS=new _e("",{providedIn:"root",factory:zS});function zS(){const n=be(Lt);let e=!0;return P(new dt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new dt(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Lt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Lt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(q()))}function bo(n){return n instanceof Function?n():n}let hw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Bf(n){for(;n;){n[Ze]|=64;const e=Mf(n);if(Uh(n)&&!e)return n;n=e}return null}const QS=new _e("",{providedIn:"root",factory:()=>!1});let D_=null;function XS(n,e){return n[e]??nR()}function eR(n,e){const t=nR();t.producerNode?.length&&(n[e]=D_,t.lView=n,D_=tR())}const Hj={...da,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Bf(n.lView)},lView:null};function tR(){return Object.create(Hj)}function nR(){return D_??=tR(),D_}const st={};function Nn(n){rR(It(),ue(),Er()+n,!1)}function rR(n,e,t,r){if(!r)if(3==(3&e[Ze])){const s=n.preOrderCheckHooks;null!==s&&pl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&gl(e,s,0,t)}go(t)}function pe(n,e=ct.Default){const t=ue();return null===t?me(n,e):qm(nr(),t,qe(n),e)}function b_(n,e,t,r,i,s,o,a,u,d,g){const m=e.blueprint.slice();return m[Zt]=i,m[Ze]=140|r,(null!==d||n&&2048&n[Ze])&&(m[Ze]|=2048),Am(m),m[Xt]=m[Ss]=n,m[Cn]=t,m[aa]=o||n&&n[aa],m[Xe]=a||n&&n[Xe],m[Ki]=u||n&&n[Ki]||null,m[Gn]=s,m[gu]=function YU(){return QU++}(),m[Ri]=g,m[Yc]=d,m[Dn]=2==e.type?n[Dn]:m,m}function $l(n,e,t,r,i){let s=n.data[e];if(null===s)s=function fw(n,e,t,r,i){const s=ll(),o=bu(),u=n.data[e]=function Jj(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function xs(){return null!==Ge.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function Sm(){return Ge.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Du(){const n=Ge.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ji(s,!0),s}function jf(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function sR(n,e,t,r,i){const s=XS(e,mu),o=Er(),a=2&r;try{go(-1),a&&e.length>mt&&rR(n,e,mt,!1),Ii(a?2:0,i);const d=a?s:null,g=vu(d);try{null!==d&&(d.dirty=!1),t(r,i)}finally{$h(d,g)}}finally{a&&null===e[mu]&&eR(e,mu),go(o),Ii(a?3:1,i)}}function pw(n,e,t){if(sm(e)){const r=yi(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{yi(r)}}}function gw(n,e,t){cl()&&(function i$(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;ca(t)&&function d$(n,e,t){const r=cr(e,n),i=oR(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=S_(n,b_(n,i,null,o,r,e,null,n[aa].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||vl(t,e),Br(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],d=mo(e,n,a,t);Br(d,e),null!==o&&h$(0,a-i,d,u,0,o),ii(u)&&(si(t.index,e)[Cn]=mo(e,n,a,t))}}(n,e,t,cr(t,e)),64==(64&t.flags)&&dR(n,e,t))}function mw(n,e,t=cr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function oR(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=_w(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function _w(n,e,t,r,i,s,o,a,u,d,g){const m=mt+r,v=m+i,w=function qj(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:st);return t}(m,v),T="function"==typeof d?d():d;return w[De]={type:n,blueprint:w,template:t,queries:null,viewQuery:a,declTNode:e,data:w.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:g}}let aR=n=>null;function uR(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?cR(t,e,i,s):r.hasOwnProperty(i)&&cR(t,e,r[i],s)}return t}function cR(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function yw(n,e,t,r){if(cl()){const i=null===r?null:{"":-1},s=function o$(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(qc(e,o.selectors,!1))if(r||(r=[]),ii(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),vw(n,e,a.length)}else r.unshift(o),vw(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&lR(n,e,t,o,i,a),i&&function a$(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new de(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=sa(t.mergedAttrs,t.attrs)}function lR(n,e,t,r,i,s){for(let d=0;d<r.length;d++)hf(vl(t,e),n,r[d].type);!function c$(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let d=0;d<r.length;d++){const g=r[d];g.providersResolver&&g.providersResolver(g)}let o=!1,a=!1,u=jf(n,e,r.length,null);for(let d=0;d<r.length;d++){const g=r[d];t.mergedAttrs=sa(t.mergedAttrs,g.hostAttrs),l$(n,t,e,u,g),u$(u,g,i),null!==g.contentQueries&&(t.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(t.flags|=64);const m=g.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function Zj(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,d=null;for(let g=e.directiveStart;g<i;g++){const m=s[g],v=t?t.get(m):null,T=v?v.outputs:null;u=uR(m.inputs,g,u,v?v.inputs:null),d=uR(m.outputs,g,d,T);const D=null===u||null===o||bh(e)?null:f$(u,g,o);a.push(D)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(n,t,s)}function dR(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function ef(){return Ge.lFrame.currentDirectiveIndex}();try{go(s);for(let a=r;a<i;a++){const u=n.data[a],d=e[a];tf(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&s$(u,d)}}finally{go(-1),tf(o)}}function s$(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function vw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function u$(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ii(e)&&(t[""]=n)}}function l$(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=lo(i.type)),o=new pa(s,ii(i),pe);n.blueprint[r]=o,t[r]=o,function n$(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function r$(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,jf(n,t,i.hostVars,st),i)}function ks(n,e,t,r,i,s){const o=cr(n,e);!function Iw(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?x(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[Xe],o,s,n.value,t,r,i)}function h$(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)hR(r,t,o[a++],o[a++],o[a++])}function hR(n,e,t,r,i){const s=yi(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{yi(s)}}function f$(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function fR(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function pR(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Su(t[r]),o.contentQueries(2,e[s],s)}}}function S_(n,e){return n[oo]?n[im][ri]=e:n[oo]=e,n[im]=e,e}function Ew(n,e,t){Su(0);const r=yi(null);try{e(n,t)}finally{yi(r)}}function yR(n,e){const t=n[Ki],r=t?t.get(Do,null):null;r&&r.handleError(e)}function ww(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];hR(n.data[o],e[o],r,a,i)}}function p$(n,e){const t=si(e,n),r=t[De];!function g$(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Zt];null!==i&&null===t[Ri]&&(t[Ri]=rw(i,t[Ki])),Aw(r,t,t[Cn])}function Aw(n,e,t){hl(e);try{const r=n.viewQuery;null!==r&&Ew(1,r,t);const i=n.template;null!==i&&sR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&pR(n,e),n.staticViewQueries&&Ew(2,n.viewQuery,t);const s=n.components;null!==s&&function m$(n,e){for(let t=0;t<e.length;t++)p$(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ze]&=-5,rf()}}let vR=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function FI(n,e,t){const r=Object.create(LI);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>hm(r),run:()=>{if(r.dirty=!1,r.hasRun&&!fm(r))return;r.hasRun=!0;const o=vu(r);try{r.cleanupFn(),r.cleanupFn=nl,r.fn(i)}finally{$h(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new n})}}return n})();function R_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=er(i,a):2==s&&(r=er(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function $f(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(xt(s)),Ir(s)&&IR(s,r);const o=t.type;if(8&o)$f(n,e,t.child,r);else if(32&o){const a=DE(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=tS(e,t);if(Array.isArray(a))r.push(...a);else{const u=Mf(e[Dn]);$f(u[De],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function IR(n,e){for(let t=tr;t<n.length;t++){const r=n[t],i=r[De].firstChild;null!==i&&$f(r[De],r,i,e)}n[Qi]!==n[Zt]&&e.push(n[Qi])}function P_(n,e,t,r=!0){const i=e[aa],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{ER(n,e,n.template,t)}catch(u){throw r&&yR(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function ER(n,e,t,r){const i=e[Ze];if(256!=(256&i)){e[aa].effectManager?.flush(),hl(e);try{Am(e),function bm(n){return Ge.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&sR(n,e,t,2,r);const o=3==(3&i);if(o){const d=n.preOrderCheckHooks;null!==d&&pl(e,d,null)}else{const d=n.preOrderHooks;null!==d&&gl(e,d,0,null),Mu(e,0)}if(function v$(n){for(let e=Hb(n);null!==e;e=zb(e)){if(!e[Zc])continue;const t=e[co];for(let r=0;r<t.length;r++){GI(t[r])}}}(e),wR(e,2),null!==n.contentQueries&&pR(n,e),o){const d=n.contentCheckHooks;null!==d&&pl(e,d)}else{const d=n.contentHooks;null!==d&&gl(e,d,1),Mu(e,1)}!function zj(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=XS(e,uo);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)go(~s);else{const o=s,a=t[++i],u=t[++i];Pm(a,o),r.dirty=!1;const d=vu(r);try{u(2,e[o])}finally{$h(r,d)}}}}finally{null===e[uo]&&eR(e,uo),go(-1)}}(n,e);const a=n.components;null!==a&&TR(e,a,0);const u=n.viewQuery;if(null!==u&&Ew(2,u,r),o){const d=n.viewCheckHooks;null!==d&&pl(e,d)}else{const d=n.viewHooks;null!==d&&gl(e,d,2),Mu(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Ze]&=-73,ol(e)}finally{rf()}}}function wR(n,e){for(let t=Hb(n);null!==t;t=zb(t))for(let r=tr;r<t.length;r++)AR(t[r],e)}function I$(n,e,t){AR(si(e,n),t)}function AR(n,e){if(!function qI(n){return 128==(128&n[Ze])}(n))return;const t=n[De],r=n[Ze];if(80&r&&0===e||1024&r||2===e)ER(t,n,t.template,n[Cn]);else if(n[pu]>0){wR(n,1);const i=t.components;null!==i&&TR(n,i,1)}}function TR(n,e,t){for(let r=0;r<e.length;r++)I$(n,e[r],t)}class Hf{get rootNodes(){const e=this._lView,t=e[De];return $f(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Cn]}set context(e){this._lView[Cn]=e}get destroyed(){return 256==(256&this._lView[Ze])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Xt];if(Ir(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(a_(e,r),Tl(t,r))}this._attachedToViewContainer=!1}SE(this._lView[De],this._lView)}onDestroy(e){!function al(n,e){if(256==(256&n[Ze]))throw new de(911,!1);null===n[Rs]&&(n[Rs]=[]),n[Rs].push(e)}(this._lView,e)}markForCheck(){Bf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ze]&=-129}reattach(){this._lView[Ze]|=128}detectChanges(){P_(this._lView[De],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function lB(n,e){Nf(n,e,e[Xe],2,null,null)}(this._lView[De],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=e}}class E$ extends Hf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;P_(e[De],e,e[Cn],!1)}checkNoChanges(){}get context(){return null}}class CR extends A_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=yt(e);return new zf(t,this.ngModule)}}function DR(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class A${constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Lc(r);const i=this.injector.get(e,ow,r);return i!==ow||t===ow?i:this.parentInjector.get(e,t,r)}}class zf extends PS{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=DR(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return DR(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Wc(n){return n.map(xh).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof xi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new A$(e,s):e,a=o.get(xS,null);if(null===a)throw new de(407,!1);const m={rendererFactory:a,sanitizer:o.get(vj,null),effectManager:o.get(vR,null),afterRenderEventManager:o.get(hw,null)},v=a.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",T=r?function Gj(n,e,t,r){const s=r.get(QS,!1)||t===Fn.ShadowDom,o=n.selectRootElement(e,s);return function Wj(n){aR(n)}(o),o}(v,r,this.componentDef.encapsulation,o):o_(v,w,function w$(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(w)),z=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let F=null;null!==T&&(F=rw(T,o,!0));const G=_w(0,null,null,1,0,null,null,null,null,null,null),ae=b_(null,G,null,z,null,null,m,v,o,null,F);let ye,Le;hl(ae);try{const V=this.componentDef;let b,O=null;V.findHostDirectiveDefs?(b=[],O=new Map,V.findHostDirectiveDefs(V,b,O),b.push(V)):b=[V];const L=function C$(n,e){const t=n[De],r=mt;return n[r]=e,$l(t,r,2,"#host",null)}(ae,T),j=function D$(n,e,t,r,i,s,o){const a=i[De];!function b$(n,e,t,r){for(const i of n)e.mergedAttrs=sa(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(R_(e,e.mergedAttrs,!0),null!==t&&sS(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=rw(e,i[Ki]));const d=s.rendererFactory.createRenderer(e,t);let g=16;t.signals?g=4096:t.onPush&&(g=64);const m=b_(i,oR(t),null,g,i[n.index],n,s,d,null,null,u);return a.firstCreatePass&&vw(a,n,r.length-1),S_(i,m),i[n.index]=m}(L,T,V,b,ae,m,v);Le=Ps(G,mt),T&&function R$(n,e,t,r){if(r)jc(n,t,["ng-version",NS.full]);else{const{attrs:i,classes:s}=function Nh(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!ti(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&jc(n,t,i),s&&s.length>0&&iS(n,t,s.join(" "))}}(v,V,T,r),void 0!==t&&function P$(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Le,this.ngContentSelectors,t),ye=function S$(n,e,t,r,i,s){const o=nr(),a=i[De],u=cr(o,i);lR(a,i,o,t,null,r);for(let g=0;g<t.length;g++)Br(mo(i,a,o.directiveStart+g,o),i);dR(a,i,o),u&&Br(u,i);const d=mo(i,a,o.directiveStart+o.componentOffset,o);if(n[Cn]=i[Cn]=d,null!==s)for(const g of s)g(d,e);return pw(a,o,n),d}(j,V,b,O,ae,[M$]),Aw(G,ae,null)}finally{rf()}return new T$(this.componentType,ye,Ll(Le,ae),ae,Le)}}class T$ extends fj{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new E$(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;ww(s[De],s,i,e,t),this.previousInputValues.set(e,t),Bf(si(this._tNode.index,s))}}get injector(){return new wr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function M$(){const n=nr();fl(ue()[De],n)}function Ut(n){let e=function bR(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(ii(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new de(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=M_(n.inputs),o.inputTransforms=M_(n.inputTransforms),o.declaredInputs=M_(n.declaredInputs),o.outputs=M_(n.outputs);const a=i.hostBindings;a&&k$(n,a);const u=i.viewQuery,d=i.contentQueries;if(u&&N$(n,u),d&&O$(n,d),Tn(n.inputs,i.inputs),Tn(n.declaredInputs,i.declaredInputs),Tn(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Tn(o.inputTransforms,i.inputTransforms)),ii(i)&&i.data.animation){const g=n.data;g.animation=(g.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Ut&&(t=!1)}}e=Object.getPrototypeOf(e)}!function x$(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=sa(i.hostAttrs,t=sa(t,i.hostAttrs))}}(r)}function M_(n){return n===yr?{}:n===gt?[]:n}function N$(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function O$(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function k$(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function MR(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function x_(n){return!!Tw(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Tw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function jr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Fs(n,e,t,r){const i=ue();return jr(i,po(),e)&&(It(),ks(un(),i,n,e,t,r)),Fs}function Zl(n,e,t,r,i,s,o,a){const u=ue(),d=It(),g=n+mt,m=d.firstCreatePass?function oH(n,e,t,r,i,s,o,a,u){const d=e.consts,g=$l(e,n,4,o||null,hs(d,a));yw(e,t,g,hs(d,u)),fl(e,g);const m=g.tView=_w(2,g,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,g),m.queries=e.queries.embeddedTView(g)),g}(g,d,u,e,t,r,i,s,o):d.data[g];Ji(m,!1);const v=zR(d,u,m,n);Pu()&&c_(d,u,v,m),Br(v,u),S_(u,u[g]=fR(v,u,v,m)),Lh(m)&&gw(d,u,m),null!=o&&mw(u,m,a)}let zR=function qR(n,e,t,r){return Ns(!0),e[Xe].createComment("")};function Ls(n){return function Ms(n,e){return n[e]}(function Zh(){return Ge.lFrame.contextLView}(),mt+n)}function Ar(n,e,t){const r=ue();return jr(r,po(),e)&&function ki(n,e,t,r,i,s,o,a){const u=cr(e,t);let g,d=e.inputs;!a&&null!=d&&(g=d[r])?(ww(n,t,g,r,i),ca(e)&&function e$(n,e){const t=si(e,n);16&t[Ze]||(t[Ze]|=64)}(t,e.index)):3&e.type&&(r=function Xj(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(It(),un(),r,n,e,r[Xe],t,!1),Ar}function Pw(n,e,t,r,i){const o=i?"class":"style";ww(n,t,e.inputs[o],o,r)}function ke(n,e,t,r){const i=ue(),s=It(),o=mt+n,a=i[Xe],u=s.firstCreatePass?function lH(n,e,t,r,i,s){const o=e.consts,u=$l(e,n,2,r,hs(o,i));return yw(e,t,u,hs(o,s)),null!==u.attrs&&R_(u,u.attrs,!1),null!==u.mergedAttrs&&R_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],d=GR(s,i,u,a,e,n);i[o]=d;const g=Lh(u);return Ji(u,!0),sS(a,d,u),32!=(32&u.flags)&&Pu()&&c_(s,i,d,u),0===function Cu(){return Ge.lFrame.elementDepthCount}()&&Br(d,i),function KI(){Ge.lFrame.elementDepthCount++}(),g&&(gw(s,i,u),pw(s,u,i)),null!==r&&mw(i,u),ke}function je(){let n=nr();bu()?function Jh(){Ge.lFrame.isParent=!1}():(n=n.parent,Ji(n,!1));const e=n;(function Qh(n){return Ge.skipHydrationRootTNode===n})(e)&&function Dm(){Ge.skipHydrationRootTNode=null}(),function QI(){Ge.lFrame.elementDepthCount--}();const t=It();return t.firstCreatePass&&(fl(t,n),sm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function cf(n){return 0!=(8&n.flags)}(e)&&Pw(t,e,ue(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function jm(n){return 0!=(16&n.flags)}(e)&&Pw(t,e,ue(),e.stylesWithoutHost,!1),je}function rr(n,e,t,r){return ke(n,e,t,r),je(),rr}let GR=(n,e,t,r,i,s)=>(Ns(!0),o_(r,i,function Vm(){return Ge.lFrame.currentNamespace}()));function $u(){return ue()}function Qf(n){return!!n&&"function"==typeof n.then}function QR(n){return!!n&&"function"==typeof n.subscribe}function ln(n,e,t,r){const i=ue(),s=It(),o=nr();return function JR(n,e,t,r,i,s,o){const a=Lh(r),d=n.firstCreatePass&&function mR(n){return n.cleanup||(n.cleanup=[])}(n),g=e[Cn],m=function gR(n){return n[oa]||(n[oa]=[])}(e);let v=!0;if(3&r.type||o){const D=cr(r,e),M=o?o(D):D,z=m.length,F=o?ae=>o(xt(ae[r.index])):r.index;let G=null;if(!o&&a&&(G=function mH(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[oa],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==G)(G.__ngLastListenerFn__||G).__ngNextListenerFn__=s,G.__ngLastListenerFn__=s,v=!1;else{s=XR(r,e,g,s,!1);const ae=t.listen(M,i,s);m.push(s,ae),d&&d.push(i,F,z,z+1)}}else s=XR(r,e,g,s,!1);const w=r.outputs;let T;if(v&&null!==w&&(T=w[i])){const D=T.length;if(D)for(let M=0;M<D;M+=2){const ye=e[T[M]][T[M+1]].subscribe(s),Le=m.length;m.push(s,ye),d&&d.push(i,r.index,Le,-(Le+1))}}}(s,i,i[Xe],o,n,e,r),ln}function ZR(n,e,t,r){try{return Ii(6,e,t),!1!==t(r)}catch(i){return yR(n,i),!1}finally{Ii(7,e,t)}}function XR(n,e,t,r,i){return function s(o){if(o===Function)return r;Bf(n.componentOffset>-1?si(n.index,e):e);let u=ZR(e,t,r,o),d=s.__ngNextListenerFn__;for(;d;)u=ZR(e,t,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function Xl(n=1){return function ZI(n){return(Ge.lFrame.contextLView=function XI(n,e){for(;n>0;)e=e[Ss],n--;return e}(n,Ge.lFrame.contextLView))[Cn]}(n)}function F_(n,e){return n<<17|e<<2}function wa(n){return n>>17&32767}function Ow(n){return 2|n}function Hu(n){return(131068&n)>>2}function kw(n,e){return-131069&n|e<<2}function Vw(n){return 1|n}function cP(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?wa(s):Hu(s),u=!1;for(;0!==a&&(!1===u||o);){const g=n[a+1];CH(n[a],e)&&(u=!0,n[a+1]=r?Vw(g):Ow(g)),a=r?wa(g):Hu(g)}u&&(n[t+1]=r?Ow(s):Vw(s))}function CH(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&va(n,e)>=0}function zu(n,e){return function ps(n,e,t,r){const i=ue(),s=It(),o=function Zi(n){const e=Ge.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function yP(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Er()],o=function _P(n,e){return e>=n.expandoStartIndex}(n,t);(function wP(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function OH(n,e,t,r){const i=function nf(n){const e=Ge.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Yf(t=Fw(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Fw(i,n,e,t,r),null===s){let u=function kH(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Hu(r))return n[wa(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=Fw(null,n,e,u[1],r),u=Yf(u,e.attrs,r),function VH(n,e,t,r){n[wa(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function FH(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Yf(r,n[s].hostAttrs,t);return Yf(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function AH(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=wa(o),u=Hu(o);n[r]=t;let g,d=!1;if(Array.isArray(t)?(g=t[1],(null===g||va(t,g)>0)&&(d=!0)):g=t,i)if(0!==u){const v=wa(n[a+1]);n[r+1]=F_(v,a),0!==v&&(n[v+1]=kw(n[v+1],r)),n[a+1]=function EH(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=F_(a,0),0!==a&&(n[a+1]=kw(n[a+1],r)),a=r;else n[r+1]=F_(u,0),0===a?a=r:n[u+1]=kw(n[u+1],r),u=r;d&&(n[r+1]=Ow(n[r+1])),cP(n,g,r,!0),cP(n,g,r,!1),function TH(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&va(s,e)>=0&&(t[r+1]=Vw(t[r+1]))}(e,g,n,r,s),o=F_(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==st&&jr(i,o,e)&&function IP(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,d=u[a+1],g=function wH(n){return 1==(1&n)}(d)?EP(u,e,t,i,Hu(d),o):void 0;L_(g)||(L_(s)||function IH(n){return 2==(2&n)}(d)&&(s=EP(u,null,t,i,a,o)),function IB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Ia.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ia.Important),n.setStyle(t,r,i,s))}}(r,o,sl(Er(),t),i,s))}(s,s.data[Er()],i,i[Xe],n,i[o+1]=function jH(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=He(Ea(n)))),n}(e,t),r,o)}(n,e,null,!0),zu}function Fw(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Yf(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Yf(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Mn(n,o,!!t||e[++s]))}return void 0===n?null:n}function EP(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],d=Array.isArray(u),g=d?u[1]:u,m=null===g;let v=t[i+1];v===st&&(v=m?gt:void 0);let w=m?Cl(v,r):g===r?v:void 0;if(d&&!L_(w)&&(w=Cl(u,r)),L_(w)&&(a=w,o))return a;const T=n[i+1];i=o?wa(T):Hu(T)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Cl(u,r))}return a}function L_(n){return void 0!==n}function nt(n,e=""){const t=ue(),r=It(),i=n+mt,s=r.firstCreatePass?$l(r,i,1,e,null):r.data[i],o=AP(r,t,s,e,n);t[i]=o,Pu()&&c_(r,t,o,s),Ji(s,!1)}let AP=(n,e,t,r,i)=>(Ns(!0),function s_(n,e){return n.createText(e)}(e[Xe],r));function td(n,e,t){const r=ue(),i=function zl(n,e,t,r){return jr(n,po(),t)?e+x(t)+r:st}(r,n,e,t);return i!==st&&function So(n,e,t){const r=sl(e,n);!function Gb(n,e,t){n.setValue(e,t)}(n[Xe],r,t)}(r,Er(),i),td}const rd="en-US";let GP=rd;function Bw(n,e,t,r,i){if(n=qe(n),Array.isArray(n))for(let s=0;s<n.length;s++)Bw(n[s],e,t,r,i);else{const s=It(),o=ue(),a=nr();let u=Bu(n)?n:qe(n.provide);const d=TS(n),g=1048575&a.providerIndexes,m=a.directiveStart,v=a.providerIndexes>>20;if(Bu(n)||!n.multi){const w=new pa(d,i,pe),T=$w(u,e,i?g:g+v,m);-1===T?(hf(vl(a,o),s,u),jw(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(w),o.push(w)):(t[T]=w,o[T]=w)}else{const w=$w(u,e,g+v,m),T=$w(u,e,g,g+v),M=T>=0&&t[T];if(i&&!M||!i&&!(w>=0&&t[w])){hf(vl(a,o),s,u);const z=function uz(n,e,t,r,i){const s=new pa(n,t,pe);return s.multi=[],s.index=e,s.componentProviders=0,_M(s,i,r&&!t),s}(i?az:oz,t.length,i,r,d);!i&&M&&(t[T].providerFactory=z),jw(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(z),o.push(z)}else jw(s,n,w>-1?w:T,_M(t[i?T:w],d,!i&&r));!i&&r&&M&&t[T].componentProviders++}}}function jw(n,e,t,r){const i=Bu(e),s=function YB(n){return!!n.useClass}(e);if(i||s){const u=(s?qe(e.useClass):e).prototype.ngOnDestroy;if(u){const d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const g=d.indexOf(t);-1===g?d.push(t,[r,u]):d[g+1].push(r,u)}else d.push(t,u)}}}function _M(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function $w(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function oz(n,e,t,r){return Hw(this.multi,[])}function az(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=mo(t,t[De],this.providerFactory.index,r);s=a.slice(0,o),Hw(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Hw(i,s);return s}function Hw(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function mn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function sz(n,e,t){const r=It();if(r.firstCreatePass){const i=ii(n);Bw(t,r.data,r.blueprint,i,!0),Bw(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Gu{}class yM{}class zw extends Gu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new CR(this);const i=vr(e);this._bootstrapComponents=bo(i.bootstrap),this._r3Injector=LS(e,t,[{provide:Gu,useValue:this},{provide:A_,useValue:this.componentFactoryResolver},...r],He(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class qw extends yM{constructor(e){super(),this.moduleType=e}create(e){return new zw(this.moduleType,e,[])}}class vM extends Gu{constructor(e){super(),this.componentFactoryResolver=new CR(this),this.instance=null;const t=new Ol([...e.providers,{provide:Gu,useValue:this},{provide:A_,useValue:this.componentFactoryResolver}],e.parent||m_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Gw(n,e,t=null){return new vM({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let dz=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=IS(0,t.type),i=r.length>0?Gw([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Fe({token:n,providedIn:"environment",factory:()=>new n(me(xi))})}}return n})();function IM(n){n.getStandaloneInjector=e=>e.get(dz).getOrCreateStandaloneInjector(n)}function H_(n,e,t,r,i){return function SM(n,e,t,r,i,s,o){const a=e+t;return function ju(n,e,t,r){const i=jr(n,e,t);return jr(n,e+1,r)||i}(n,a,i,s)?function Vs(n,e,t){return n[e]=t}(n,a+2,o?r.call(o,i,s):r(i,s)):function np(n,e){const t=n[e];return t===st?void 0:t}(n,a+2)}(ue(),function dr(){const n=Ge.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}(),n,e,t,r,i)}function Lz(n,e,t,r=!0){const i=e[De];if(function hB(n,e,t,r){const i=tr+r,s=t.length;r>0&&(t[i-1][ri]=e),r<s-tr?(e[ri]=t[i],vf(t,tr+r,e)):(t.push(e),e[ri]=null),e[Xt]=t;const o=e[ao];null!==o&&t!==o&&function fB(n,e){const t=n[co];e[Dn]!==e[Xt][Xt][Dn]&&(n[Zc]=!0),null===t?n[co]=[e]:t.push(e)}(o,e);const a=e[_i];null!==a&&a.insertView(n),e[Ze]|=128}(i,e,n,t),r){const s=xE(t,n),o=e[Xe],a=u_(o,n[Qi]);null!==a&&function cB(n,e,t,r,i,s){r[Zt]=i,r[Gn]=e,Nf(n,r,t,1,i,s)}(i,n[Gn],o,e,a,s)}}let Ro=(()=>{class n{static{this.__NG_ELEMENT_ID__=jz}}return n})();const Uz=Ro,Bz=class extends Uz{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function Fz(n,e,t,r){const i=e.tView,a=b_(n,i,t,4096&n[Ze]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[ao]=n[e.index];const d=n[_i];return null!==d&&(a[_i]=d.createEmbeddedView(i)),Aw(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Hf(i)}};function jz(){return function z_(n,e){return 4&n.type?new Bz(e,n,Ll(n,e)):null}(nr(),ue())}let ms=(()=>{class n{static{this.__NG_ELEMENT_ID__=Wz}}return n})();function Wz(){return function LM(n,e){let t;const r=e[n.index];return Ir(r)?t=r:(t=fR(r,e,null,n),e[n.index]=t,S_(e,t)),UM(t,e,n,r),new VM(t,n,e)}(nr(),ue())}const Kz=ms,VM=class extends Kz{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ll(this._hostTNode,this._hostLView)}get injector(){return new wr(this._hostTNode,this._hostLView)}get parentInjector(){const e=ga(this._hostTNode,this._hostLView);if(_l(e)){const t=Nu(e,this._hostLView),r=xu(e);return new wr(t[De].data[r+8],t)}return new wr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=FM(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-tr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Io(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,s=D.environmentInjector||D.ngModuleRef}const u=o?e:new zf(yt(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const M=(o?d:this.parentInjector).get(xi,null);M&&(s=M)}yt(u.componentType??{});const w=u.create(d,i,null,s);return this.insertImpl(w.hostView,a,false),w}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function Kh(n){return Ir(n[Xt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[Xt],g=new VM(d,d[Gn],d[Xt]);g.detach(g.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return Lz(a,i,o,!r),e.attachToViewContainerRef(),vf(Qw(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=FM(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=a_(this._lContainer,t);r&&(Tl(Qw(this._lContainer),t),SE(r[De],r))}detach(e){const t=this._adjustIndex(e,-1),r=a_(this._lContainer,t);return r&&null!=Tl(Qw(this._lContainer),t)?new Hf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function FM(n){return n[8]}function Qw(n){return n[8]||(n[8]=[])}let UM=function BM(n,e,t,r){if(n[Qi])return;let i;i=8&t.type?xt(r):function Qz(n,e){const t=n[Xe],r=t.createComment(""),i=cr(e,n);return Uu(t,u_(t,i),r,function _B(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Qi]=i};const oA=new _e("Application Initializer");let aA=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=be(oA,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Qf(s))t.push(s);else if(QR(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dx=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const Po=new _e("LocaleId",{providedIn:"root",factory:()=>be(Po,ct.Optional|ct.SkipSelf)||function Dq(){return typeof $localize<"u"&&$localize.locale||rd}()});let W_=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new k(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class Rq{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let hx=(()=>{class n{compileModuleSync(t){return new qw(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=bo(vr(t).declarations).reduce((o,a)=>{const u=yt(a);return u&&o.push(new zf(u)),o},[]);return new Rq(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const mx=new _e(""),Q_=new _e("");let hA,lA=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,hA||(function Jq(n){hA=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Lt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(me(Lt),me(dA),me(Q_))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})(),dA=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return hA?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Aa=null;const _x=new _e("AllowMultipleToken"),fA=new _e("PlatformDestroyListeners"),pA=new _e("appBootstrapListener");class vx{constructor(e,t){this.name=e,this.token=t}}function Ex(n,e,t=[]){const r=`Platform: ${e}`,i=new _e(r);return(s=[])=>{let o=gA();if(!o||o.injector.get(_x,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function eG(n){if(Aa&&!Aa.get(_x,!1))throw new de(400,!1);(function yx(){!function NI(n){qh=n}(()=>{throw new de(600,!1)})})(),Aa=n;const e=n.get(Ax);(function Ix(n){n.get(CS,null)?.forEach(t=>t())})(n)}(function wx(n=[],e){return Oi.create({name:e,providers:[{provide:GE,useValue:"platform"},{provide:fA,useValue:new Set([()=>Aa=null])},...n]})}(a,r))}return function nG(n){const e=gA();if(!e)throw new de(401,!1);return e}()}}function gA(){return Aa?.get(Ax)??null}let Ax=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function rG(n="zone.js",e){return"noop"===n?new xj:"zone.js"===n?new Lt(e):n}(r?.ngZone,function Tx(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function lz(n,e,t){return new zw(n,e,t)}(t.moduleType,this.injector,function Rx(n){return[{provide:Lt,useFactory:n},{provide:Ff,multi:!0,useFactory:()=>{const e=be(sG,{optional:!0});return()=>e.initialize()}},{provide:Sx,useFactory:iG},{provide:HS,useFactory:zS}]}(()=>i)),o=s.injector.get(Do,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{Y_(this._modules,s),a.unsubscribe()})}),function Cx(n,e,t){try{const r=t();return Qf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(aA);return a.runInitializers(),a.donePromise.then(()=>(function WP(n){mi(n,"Expected localeId to be defined"),"string"==typeof n&&(GP=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Po,rd)||rd),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=Dx({},r);return function Zq(n,e,t){const r=new qw(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(od);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new de(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(fA,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(me(Oi))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function Dx(n,e){return Array.isArray(e)?e.reduce(Dx,n):{...n,...e}}let od=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=be(Sx),this.zoneIsStable=be(HS),this.componentTypes=[],this.components=[],this.isStable=be(W_).hasPendingTasks.pipe(Ce(t=>t?B(!1):this.zoneIsStable),Ht(),q()),this._injector=be(xi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof PS;if(!this._injector.get(aA).done)throw!i&&function bs(n){const e=yt(n)||Ln(n)||qn(n);return null!==e&&e.standalone}(t),new de(405,!1);let o;o=i?t:this._injector.get(A_).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Xq(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Gu),d=o.create(Oi.NULL,[],r||o.selector,a),g=d.location.nativeElement,m=d.injector.get(mx,null);return m?.registerApplication(g),d.onDestroy(()=>{this.detachView(d.hostView),Y_(this.components,d),m?.unregisterApplication(g)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Y_(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(pA,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Y_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new de(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Y_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Sx=new _e("",{providedIn:"root",factory:()=>be(Do).handleError.bind(void 0)});function iG(){const n=be(Lt),e=be(Do);return t=>n.runOutsideAngular(()=>e.handleError(t))}let sG=(()=>{class n{constructor(){this.zone=be(Lt),this.applicationRef=be(od)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let J_=(()=>{class n{static{this.__NG_ELEMENT_ID__=aG}}return n})();function aG(n){return function uG(n,e,t){if(ca(n)&&!t){const r=si(n.index,e);return new Hf(r,r)}return 47&n.type?new Hf(e[Dn],e):null}(nr(),ue(),16==(16&n))}class kx{constructor(){}supports(e){return x_(e)}create(e){return new fG(e)}}const hG=(n,e)=>e;class fG{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||hG}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<Fx(r,i,s)?t:r,a=Fx(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,g=u-i;if(d!=g){for(let v=0;v<d;v++){const w=v<s.length?s[v]:s[v]=0,T=w+v;g<=T&&T<d&&(s[v]=w+1)}s[o.previousIndex]=g-d}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!x_(e))throw new de(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function $$(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new pG(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Vx),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Vx),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class pG{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gG{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class Vx{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new gG,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Fx(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class Lx{constructor(){}supports(e){return e instanceof Map||Tw(e)}create(){return new mG}}class mG{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Tw(e)))throw new de(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new _G(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class _G{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ux(){return new ey([new kx])}let ey=(()=>{class n{static{this.\u0275prov=Fe({token:n,providedIn:"root",factory:Ux})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Ux()),deps:[[n,new Dl,new Lu]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new de(901,!1)}}return n})();function Bx(){return new op([new Lx])}let op=(()=>{class n{static{this.\u0275prov=Fe({token:n,providedIn:"root",factory:Bx})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Bx()),deps:[[n,new Dl,new Lu]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new de(901,!1)}}return n})();const IG=Ex(null,"core",[]);let EG=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(me(od))}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=ur({})}}return n})();function ad(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let EA=null;function Ta(){return EA}class kG{}const Vi=new _e("DocumentToken");let wA=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:function(){return be(FG)},providedIn:"platform"})}}return n})();const VG=new _e("Location Initialized");let FG=(()=>{class n extends wA{constructor(){super(),this._doc=be(Vi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ta().getBaseHref(this._doc)}onPopState(t){const r=Ta().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Ta().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function AA(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Qx(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Mo(n){return n&&"?"!==n[0]?"?"+n:n}let Ku=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:function(){return be(Jx)},providedIn:"root"})}}return n})();const Yx=new _e("appBaseHref");let Jx=(()=>{class n extends Ku{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??be(Vi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return AA(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Mo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Mo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Mo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(me(wA),me(Yx,8))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),LG=(()=>{class n extends Ku{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=AA(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Mo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Mo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(me(wA),me(Yx,8))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})(),TA=(()=>{class n{constructor(t){this._subject=new xn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function jG(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Qx(Zx(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Mo(r))}normalize(t){return n.stripTrailingSlash(function BG(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Zx(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Mo}static{this.joinWithSlash=AA}static{this.stripTrailingSlash=Qx}static{this.\u0275fac=function(r){return new(r||n)(me(Ku))}}static{this.\u0275prov=Fe({token:n,factory:function(){return function UG(){return new TA(me(Ku))}()},providedIn:"root"})}}return n})();function Zx(n){return n.replace(/\/index.html$/,"")}function aN(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class b3{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let lN=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new b3(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),dN(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{dN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(pe(ms),pe(Ro),pe(ey))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function dN(n,e){n.context.$implicit=e.item}let kA=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new S3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hN("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hN("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(pe(ms),pe(Ro))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class S3{constructor(){this.$implicit=null,this.ngIf=null}}function hN(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${He(e)}'.`)}let pN=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:Ia.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(pe(Ni),pe(op),pe(Co))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),e9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=ur({})}}return n})();function hy(n){return"server"===n}let i9=(()=>{class n{static{this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new s9(me(Vi),window)})}}return n})();class s9{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function o9(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class _N{}class R9 extends kG{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class $A extends R9{static makeCurrent(){!function OG(n){EA||(EA=n)}(new $A)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function P9(){return lp=lp||document.querySelector("base"),lp?lp.getAttribute("href"):null}();return null==t?null:function M9(n){gy=gy||document.createElement("a"),gy.setAttribute("href",n);const e=gy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){lp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return aN(document.cookie,e)}}let gy,lp=null,N9=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();const HA=new _e("EventManagerPlugins");let wN=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new de(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(me(HA),me(Lt))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();class AN{constructor(e){this._doc=e}}const zA="ng-app-id";let TN=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=hy(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${zA}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(zA),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(zA,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(me(Vi),me(__),me(DS,8),me(Os))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();const qA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},GA=/%COMP%/g,F9=new _e("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function DN(n,e){return e.map(t=>t.replace(GA,n))}let bN=(()=>{class n{constructor(t,r,i,s,o,a,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=hy(a),this.defaultRenderer=new WA(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Fn.ShadowDom&&(r={...r,encapsulation:Fn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof RN?i.applyToHost(t):i instanceof KA&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Fn.Emulated:s=new RN(u,d,r,this.appId,g,o,a,m);break;case Fn.ShadowDom:return new j9(u,d,t,r,o,a,this.nonce,m);default:s=new KA(u,d,r,g,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(me(wN),me(TN),me(__),me(F9),me(Vi),me(Os),me(Lt),me(DS))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();class WA{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(qA[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(SN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(SN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new de(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=qA[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=qA[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ia.DashCase|Ia.Important)?e.style.setProperty(t,r,i&Ia.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ia.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Ta().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function SN(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class j9 extends WA{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=DN(i.id,i.styles);for(const g of d){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=g,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class KA extends WA{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?DN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class RN extends KA{constructor(e,t,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,t,r,s,o,a,u,d),this.contentAttr=function L9(n){return"_ngcontent-%COMP%".replace(GA,n)}(d),this.hostAttr=function U9(n){return"_nghost-%COMP%".replace(GA,n)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let $9=(()=>{class n extends AN{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(me(Vi))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();const PN=["alt","control","meta","shift"],H9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let q9=(()=>{class n extends AN{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ta().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),PN.forEach(d=>{const g=r.indexOf(d);g>-1&&(r.splice(g,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=H9[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),PN.forEach(o=>{o!==i&&(0,z9[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(me(Vi))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();const Q9=Ex(IG,"browser",[{provide:Os,useValue:"browser"},{provide:CS,useValue:function G9(){$A.makeCurrent()},multi:!0},{provide:Vi,useFactory:function K9(){return function CB(n){kE=n}(document),document},deps:[]}]),Y9=new _e(""),NN=[{provide:Q_,useClass:class x9{addToWindow(e){Ft.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new de(5103,!1);return s},Ft.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ft.getAllAngularRootElements=()=>e.getAllRootElements(),Ft.frameworkStabilizers||(Ft.frameworkStabilizers=[]),Ft.frameworkStabilizers.push(r=>{const i=Ft.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Ta().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:mx,useClass:lA,deps:[Lt,dA,Q_]},{provide:lA,useClass:lA,deps:[Lt,dA,Q_]}],ON=[{provide:GE,useValue:"root"},{provide:Do,useFactory:function W9(){return new Do},deps:[]},{provide:HA,useClass:$9,multi:!0,deps:[Vi,Lt,Os]},{provide:HA,useClass:q9,multi:!0,deps:[Vi]},bN,TN,wN,{provide:xS,useExisting:bN},{provide:_N,useClass:N9,deps:[]},[]];let J9=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:__,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(me(Y9,12))}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=ur({providers:[...ON,...NN],imports:[e9,EG]})}}return n})(),kN=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(me(Vi))}}static{this.\u0275prov=Fe({token:n,factory:function(r){let i=null;return i=r?new r:function X9(){return new kN(me(Vi))}(),i},providedIn:"root"})}}return n})();typeof window<"u"&&window;const{isArray:s6}=Array,{getPrototypeOf:o6,prototype:a6,keys:u6}=Object;function UN(n){if(1===n.length){const e=n[0];if(s6(e))return{args:e,keys:null};if(function c6(n){return n&&"object"==typeof n&&o6(n)===a6}(e)){const t=u6(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:l6}=Array;function BN(n){return Oe(e=>function d6(n,e){return l6(e)?n(...e):n(e)}(n,e))}function jN(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function YA(...n){const e=As(n),t=no(n),{args:r,keys:i}=UN(n);if(0===r.length)return S([],e);const s=new dt(function h6(n,e,t=qt){return r=>{$N(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)$N(e,()=>{const d=S(n[u],e);let g=!1;d.subscribe(fe(r,m=>{s[u]=m,g||(g=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>jN(i,o):qt));return t?s.pipe(BN(t)):s}function $N(n,e,t){n?Sn(t,n,e):e()}const my=We(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function JA(...n){return function f6(){return zi(1)}()(S(n,As(n)))}function HN(n){return new dt(e=>{Hn(n()).subscribe(e)})}function dp(n,e){const t=C(n)?n:()=>n,r=i=>i.error(t());return new dt(e?i=>e.schedule(r,0,i):r)}function ZA(){return ne((n,e)=>{let t=null;n._refCount++;const r=fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class zN extends dt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ie(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Tt;const t=this.getSubject();e.add(this.source.subscribe(fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Tt.EMPTY)}return e}refCount(){return ZA()(this)}}function cd(n){return n<=0?()=>An:ne((e,t)=>{let r=0;e.subscribe(fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function _y(...n){const e=As(n);return ne((t,r)=>{(e?JA(n,t,e):JA(n,t)).subscribe(r)})}function rs(n,e){return ne((t,r)=>{let i=0;t.subscribe(fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function yy(n){return ne((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function qN(n=p6){return ne((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function p6(){return new my}function Da(n,e){const t=arguments.length>=2;return r=>r.pipe(n?rs((i,s)=>n(i,s,r)):qt,cd(1),t?yy(e):qN(()=>new my))}function ld(n,e){return C(e)?wn(n,e,1):wn(n,1)}function Tr(n,e,t){const r=C(n)||e||t?{next:n,error:e,complete:t}:n;return r?ne((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(fe(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):qt}function Qu(n){return ne((e,t)=>{let s,r=null,i=!1;r=e.subscribe(fe(t,void 0,void 0,o=>{s=Hn(n(o,Qu(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function vy(n,e){return ne(function g6(n,e,t,r,i){return(s,o)=>{let a=t,u=e,d=0;s.subscribe(fe(o,g=>{const m=d++;u=a?n(u,g,m):(a=!0,g),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function XA(n){return n<=0?()=>An:ne((e,t)=>{let r=[];e.subscribe(fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function hp(n){return ne((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const at="primary",fp=Symbol("RouteTitle");class v6{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function dd(n){return new v6(n)}function I6(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function js(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!GN(n[i],e[i]))return!1;return!0}function GN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function WN(n){return n.length>0?n[n.length-1]:null}function ba(n){return function i6(n){return!!n&&(n instanceof dt||C(n.lift)&&C(n.subscribe))}(n)?n:Qf(n)?S(Promise.resolve(n)):B(n)}const w6={exact:function YN(n,e,t){if(!Yu(n.segments,e.segments)||!Iy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!YN(n.children[r],e.children[r],t))return!1;return!0},subset:JN},KN={exact:function A6(n,e){return js(n,e)},subset:function T6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>GN(n[t],e[t]))},ignored:()=>!0};function QN(n,e,t){return w6[t.paths](n.root,e.root,t.matrixParams)&&KN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function JN(n,e,t){return ZN(n,e,e.segments,t)}function ZN(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Yu(i,t)||e.hasChildren()||!Iy(i,t,r))}if(n.segments.length===t.length){if(!Yu(n.segments,t)||!Iy(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!JN(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Yu(n.segments,i)&&Iy(n.segments,i,r)&&n.children[at])&&ZN(n.children[at],e,s,r)}}function Iy(n,e,t){return e.every((r,i)=>KN[t](n[i].parameters,r.parameters))}class hd{constructor(e=new Bt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=dd(this.queryParams)),this._queryParamMap}toString(){return b6.serialize(this)}}class Bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ey(this)}}class pp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=dd(this.parameters)),this._parameterMap}toString(){return tO(this)}}function Yu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let gp=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:function(){return new eT},providedIn:"root"})}}return n})();class eT{parse(e){const t=new L6(e);return new hd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${mp(e.root,!0)}`,r=function P6(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${wy(t)}=${wy(i)}`).join("&"):`${wy(t)}=${wy(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function S6(n){return encodeURI(n)}(e.fragment)}`:""}`}}const b6=new eT;function Ey(n){return n.segments.map(e=>tO(e)).join("/")}function mp(n,e){if(!n.hasChildren())return Ey(n);if(e){const t=n.children[at]?mp(n.children[at],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==at&&r.push(`${i}:${mp(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function D6(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===at&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==at&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===at?[mp(n.children[at],!1)]:[`${i}:${mp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[at]?`${Ey(n)}/${t[0]}`:`${Ey(n)}/(${t.join("//")})`}}function XN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wy(n){return XN(n).replace(/%3B/gi,";")}function tT(n){return XN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ay(n){return decodeURIComponent(n)}function eO(n){return Ay(n.replace(/\+/g,"%20"))}function tO(n){return`${tT(n.path)}${function R6(n){return Object.keys(n).map(e=>`;${tT(e)}=${tT(n[e])}`).join("")}(n.parameters)}`}const M6=/^[^\/()?;#]+/;function nT(n){const e=n.match(M6);return e?e[0]:""}const x6=/^[^\/()?;=#]+/,O6=/^[^=?&#]+/,V6=/^[^&#]+/;class L6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[at]=new Bt(e,t)),r}parseSegment(){const e=nT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(e),new pp(Ay(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function N6(n){const e=n.match(x6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=nT(this.remaining);i&&(r=i,this.capture(r))}e[Ay(t)]=Ay(r)}parseQueryParam(e){const t=function k6(n){const e=n.match(O6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function F6(n){const e=n.match(V6);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=eO(t),s=eO(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=nT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new de(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=at);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[at]:new Bt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new de(4011,!1)}}function nO(n){return n.segments.length>0?new Bt([],{[at]:n}):n}function rO(n){const e={};for(const r of Object.keys(n.children)){const s=rO(n.children[r]);if(r===at&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function U6(n){if(1===n.numberOfChildren&&n.children[at]){const e=n.children[at];return new Bt(n.segments.concat(e.segments),e.children)}return n}(new Bt(n.segments,e))}function Ju(n){return n instanceof hd}function iO(n){let e;const i=nO(function t(s){const o={};for(const u of s.children){const d=t(u);o[u.outlet]=d}const a=new Bt(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function sO(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return rT(i,i,i,t,r);const s=function j6(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new aO(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new aO(t,e,r)}(e);if(s.toRoot())return rT(i,i,new Bt([],{}),t,r);const o=function $6(n,e,t){if(n.isAbsolute)return new Cy(e,!0,0);if(!t)return new Cy(e,!1,NaN);if(null===t.parent)return new Cy(t,!0,0);const r=Ty(n.commands[0])?0:1;return function H6(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new de(4005,!1);i=r.segments.length}return new Cy(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?yp(o.segmentGroup,o.index,s.commands):uO(o.segmentGroup,o.index,s.commands);return rT(i,o.segmentGroup,a,t,r)}function Ty(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function _p(n){return"object"==typeof n&&null!=n&&n.outlets}function rT(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(g=>`${g}`):`${d}`}),o=n===e?t:oO(n,e,t);const a=nO(rO(o));return new hd(a,s,i)}function oO(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:oO(s,e,t)}),new Bt(n.segments,r)}class aO{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ty(r[0]))throw new de(4003,!1);const i=r.find(_p);if(i&&i!==WN(r))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function uO(n,e,t){if(n||(n=new Bt([],{})),0===n.segments.length&&n.hasChildren())return yp(n,e,t);const r=function q6(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(_p(a))break;const u=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!lO(u,d,o))return s;r+=2}else{if(!lO(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Bt(n.segments.slice(0,r.pathIndex),{});return s.children[at]=new Bt(n.segments.slice(r.pathIndex),n.children),yp(s,0,i)}return r.match&&0===i.length?new Bt(n.segments,{}):r.match&&!n.hasChildren()?iT(n,e,t):r.match?yp(n,0,i):iT(n,e,t)}function yp(n,e,t){if(0===t.length)return new Bt(n.segments,{});{const r=function z6(n){return _p(n[0])?n[0].outlets:{[at]:n}}(t),i={};if(Object.keys(r).some(s=>s!==at)&&n.children[at]&&1===n.numberOfChildren&&0===n.children[at].segments.length){const s=yp(n.children[at],e,t);return new Bt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=uO(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Bt(n.segments,i)}}function iT(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(_p(s)){const u=G6(s.outlets);return new Bt(r,u)}if(0===i&&Ty(t[0])){r.push(new pp(n.segments[e].path,cO(t[0]))),i++;continue}const o=_p(s)?s.outlets[at]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Ty(a)?(r.push(new pp(o,cO(a))),i+=2):(r.push(new pp(o,{})),i++)}return new Bt(r,{})}function G6(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=iT(new Bt([],{}),0,r))}),e}function cO(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function lO(n,e,t){return n==t.path&&js(e,t.parameters)}const vp="imperative";class $s{constructor(e,t){this.id=e,this.url=t}}class Dy extends $s{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sa extends $s{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ip extends $s{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fd extends $s{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class by extends $s{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class dO extends $s{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W6 extends $s{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K6 extends $s{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Q6 extends $s{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y6 extends $s{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J6{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Z6{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class X6{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class e5{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t5{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class n5{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hO{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class sT{}class oT{constructor(e){this.url=e}}class r5{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ep,this.attachRef=null}}let Ep=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new r5,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class fO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=aT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=aT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=uT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return uT(e,this._root).map(t=>t.value)}}function aT(n,e){if(n===e.value)return e;for(const t of e.children){const r=aT(n,t);if(r)return r}return null}function uT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=uT(n,t);if(r.length)return r.unshift(e),r}return[]}class Oo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function pd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class pO extends fO{constructor(e,t){super(e),this.snapshot=t,cT(this,e)}toString(){return this.snapshot.toString()}}function gO(n,e){const t=function i5(n,e){const o=new Sy([],{},{},"",{},at,e,null,{});return new _O("",new Oo(o,[]))}(0,e),r=new k([new pp("",{})]),i=new k({}),s=new k({}),o=new k({}),a=new k(""),u=new gd(r,i,o,a,s,at,e,t.root);return u.snapshot=t.root,new pO(new Oo(u,[]),t)}class gd{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Oe(d=>d[fp]))??B(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Oe(e=>dd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Oe(e=>dd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mO(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function s5(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Sy{get title(){return this.data?.[fp]}constructor(e,t,r,i,s,o,a,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=dd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=dd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _O extends fO{constructor(e,t){super(t),this.url=e,cT(this,t)}toString(){return yO(this._root)}}function cT(n,e){e.value._routerState=n,e.children.forEach(t=>cT(n,t))}function yO(n){const e=n.children.length>0?` { ${n.children.map(yO).join(", ")} } `:"";return`${n.value}${e}`}function lT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,js(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),js(e.params,t.params)||n.paramsSubject.next(t.params),function E6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!js(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),js(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function dT(n,e){const t=js(n.params,e.params)&&function C6(n,e){return Yu(n,e)&&n.every((t,r)=>js(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||dT(n.parent,e.parent))}let hT=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=at,this.activateEvents=new xn,this.deactivateEvents=new xn,this.attachEvents=new xn,this.detachEvents=new xn,this.parentContexts=be(Ep),this.location=be(ms),this.changeDetector=be(J_),this.environmentInjector=be(xi),this.inputBinder=be(Ry,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new o5(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[vi]})}}return n})();class o5{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===gd?this.route:e===Ep?this.childContexts:this.parent.get(e,t)}}const Ry=new _e("");let vO=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=YA([r.queryParams,r.params,r.data]).pipe(Ce(([s,o,a],u)=>(a={...s,...o,...a},0===u?B(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function NG(n){const e=yt(n);if(!e)return null;const t=new zf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();function wp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function u5(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return wp(n,r,i);return wp(n,r)})}(n,e,t);return new Oo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>wp(n,a)),o}}const r=function c5(n){return new gd(new k(n.url),new k(n.params),new k(n.queryParams),new k(n.fragment),new k(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>wp(n,s));return new Oo(r,i)}}const fT="ngNavigationCancelingError";function IO(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ju(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=EO(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function EO(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[fT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function wO(n){return n&&n[fT]}let AO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Si({type:n,selectors:[["ng-component"]],standalone:!0,features:[IM],decls:1,vars:0,template:function(r,i){1&r&&rr(0,"router-outlet")},dependencies:[hT],encapsulation:2})}}return n})();function pT(n){const e=n.children&&n.children.map(pT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==at&&(t.component=AO),t}function vs(n){return n.outlet||at}function Ap(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class _5{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),lT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=pd(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=pd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=pd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=pd(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new n5(s.value.snapshot))}),e.children.length&&this.forwardEvent(new e5(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(lT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),lT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Ap(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class TO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Py{constructor(e,t){this.component=e,this.route=t}}function y5(n,e,t){const r=n._root;return Tp(r,e?e._root:null,t,[r.value])}function md(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function AI(n){return null!==xc(n)}(n)?e.get(n):n:r}function Tp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=pd(e);return n.children.forEach(o=>{(function I5(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function E5(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Yu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Yu(n.url,e.url)||!js(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dT(n,e)||!js(n.queryParams,e.queryParams);default:return!dT(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new TO(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Tp(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Py(a.outlet.component,o))}else o&&Cp(e,a,i),i.canActivateChecks.push(new TO(r)),Tp(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Cp(a,t.getContext(o),i)),i}function Cp(n,e,t){const r=pd(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Cp(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Py(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Dp(n){return"function"==typeof n}function CO(n){return n instanceof my||"EmptyError"===n?.name}const My=Symbol("INITIAL_VALUE");function _d(){return Ce(n=>YA(n.map(e=>e.pipe(cd(1),_y(My)))).pipe(Oe(e=>{for(const t of e)if(!0!==t){if(t===My)return My;if(!1===t||t instanceof hd)return t}return!0}),rs(e=>e!==My),cd(1)))}function DO(n){return function Rr(...n){return pi(n)}(Tr(e=>{if(Ju(e))throw IO(0,e)}),Oe(e=>!0===e))}class xy{constructor(e){this.segmentGroup=e||null}}class bO{constructor(e){this.urlTree=e}}function yd(n){return dp(new xy(n))}function SO(n){return dp(new bO(n))}class j5{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new de(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return B(r);if(i.numberOfChildren>1||!i.children[at])return dp(new de(4e3,!1));i=i.children[at]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new hd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Bt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new de(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const gT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $5(n,e,t,r,i){const s=mT(n,e,t);return s.matched?(r=function d5(n,e){return n.providers&&!n._injector&&(n._injector=Gw(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function L5(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?B(i.map(o=>{const a=md(o,n);return ba(function b5(n){return n&&Dp(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(_d(),DO()):B(!0)}(r,e,t).pipe(Oe(o=>!0===o?s:{...gT}))):B(s)}function mT(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...gT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||I6)(t,n,e);if(!i)return{...gT};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function RO(n,e,t,r){return t.length>0&&function q5(n,e,t){return t.some(r=>Ny(n,e,r)&&vs(r)!==at)}(n,t,r)?{segmentGroup:new Bt(e,z5(r,new Bt(t,n.children))),slicedSegments:[]}:0===t.length&&function G5(n,e,t){return t.some(r=>Ny(n,e,r))}(n,t,r)?{segmentGroup:new Bt(n.segments,H5(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Bt(n.segments,n.children),slicedSegments:t}}function H5(n,e,t,r,i){const s={};for(const o of r)if(Ny(n,t,o)&&!i[vs(o)]){const a=new Bt([],{});s[vs(o)]=a}return{...i,...s}}function z5(n,e){const t={};t[at]=e;for(const r of n)if(""===r.path&&vs(r)!==at){const i=new Bt([],{});t[vs(r)]=i}return t}function Ny(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Y5{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new j5(this.urlSerializer,this.urlTree)}noMatchError(e){return new de(4002,!1)}recognize(){const e=RO(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,at).pipe(Qu(t=>{if(t instanceof bO)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof xy?this.noMatchError(t):t}),Oe(t=>{const r=new Sy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},at,this.rootComponentType,null,{}),i=new Oo(r,t),s=new _O("",i),o=function B6(n,e,t=null,r=null){return sO(iO(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,at).pipe(Qu(r=>{throw r instanceof xy?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=mO(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return S(i).pipe(ld(s=>{const o=r.children[s],a=function g5(n,e){const t=n.filter(r=>vs(r)===e);return t.push(...n.filter(r=>vs(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),vy((s,o)=>(s.push(...o),s)),yy(null),function m6(n,e){const t=arguments.length>=2;return r=>r.pipe(n?rs((i,s)=>n(i,s,r)):qt,XA(1),t?yy(e):qN(()=>new my))}(),wn(s=>{if(null===s)return yd(r);const o=PO(s);return function J5(n){n.sort((e,t)=>e.value.outlet===at?-1:t.value.outlet===at?1:e.value.outlet.localeCompare(t.value.outlet))}(o),B(o)}))}processSegment(e,t,r,i,s,o){return S(t).pipe(ld(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Qu(u=>{if(u instanceof xy)return B(null);throw u}))),Da(a=>!!a),Qu(a=>{if(CO(a))return function K5(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?B([]):yd(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function W5(n,e,t,r){return!!(vs(n)===r||r!==at&&Ny(e,t,n))&&("**"===n.path||mT(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):yd(i):yd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?SO(s):this.applyRedirects.lineralizeSegments(r,s).pipe(wn(o=>{const a=new Bt(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:g}=mT(t,i,s);if(!a)return yd(t);const m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,g);return i.redirectTo.startsWith("/")?SO(m):this.applyRedirects.lineralizeSegments(i,m).pipe(wn(v=>this.processSegment(e,r,t,v.concat(d),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?WN(i).parameters:{};a=B({snapshot:new Sy(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,MO(r),vs(r),r.component??r._loadedComponent??null,r,xO(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=$5(t,r,i,e).pipe(Oe(({matched:u,consumedSegments:d,remainingSegments:g,parameters:m})=>u?{snapshot:new Sy(d,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,MO(r),vs(r),r.component??r._loadedComponent??null,r,xO(r)),consumedSegments:d,remainingSegments:g}:null));return a.pipe(Ce(u=>null===u?yd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Ce(({routes:d})=>{const g=r._loadedInjector??e,{snapshot:m,consumedSegments:v,remainingSegments:w}=u,{segmentGroup:T,slicedSegments:D}=RO(t,v,w,d);if(0===D.length&&T.hasChildren())return this.processChildren(g,d,T).pipe(Oe(z=>null===z?null:[new Oo(m,z)]));if(0===d.length&&0===D.length)return B([new Oo(m,[])]);const M=vs(r)===s;return this.processSegment(g,d,T,D,M?at:s,!0).pipe(Oe(z=>[new Oo(m,z)]))}))))}getChildConfig(e,t,r){return t.children?B({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?B({routes:t._loadedRoutes,injector:t._loadedInjector}):function F5(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?B(!0):B(i.map(o=>{const a=md(o,n);return ba(function A5(n){return n&&Dp(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(_d(),DO())}(e,t,r).pipe(wn(i=>i?this.configLoader.loadChildren(e,t).pipe(Tr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function B5(n){return dp(EO(!1,3))}())):B({routes:[],injector:e})}}function Z5(n){const e=n.value.routeConfig;return e&&""===e.path}function PO(n){const e=[],t=new Set;for(const r of n){if(!Z5(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=PO(r.children);e.push(new Oo(r.value,i))}return e.filter(r=>!t.has(r))}function MO(n){return n.data||{}}function xO(n){return n.resolve||{}}function NO(n){return"string"==typeof n.title||null===n.title}function _T(n){return Ce(e=>{const t=n(e);return t?S(t).pipe(Oe(()=>e)):B(e)})}const vd=new _e("ROUTES");let yT=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=be(hx)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return B(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ba(t.loadComponent()).pipe(Oe(OO),Tr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),hp(()=>{this.componentLoaders.delete(t)})),i=new zN(r,()=>new te).pipe(ZA());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return B({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function s8(n,e,t,r){return ba(n.loadChildren()).pipe(Oe(OO),wn(i=>i instanceof yM||Array.isArray(i)?B(i):S(e.compileModuleAsync(i))),Oe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(vd,[],{optional:!0,self:!0}).flat()),{routes:o.map(pT),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(hp(()=>{this.childrenLoaders.delete(r)})),o=new zN(s,()=>new te).pipe(ZA());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function OO(n){return function o8(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Oy=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new te,this.transitionAbortSubject=new te,this.configLoader=be(yT),this.environmentInjector=be(xi),this.urlSerializer=be(gp),this.rootContexts=be(Ep),this.inputBindingEnabled=null!==be(Ry,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>B(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Z6(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new J6(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new k({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:vp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(rs(s=>0!==s.id),Oe(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Ce(s=>{this.currentTransition=s;let o=!1,a=!1;return B(s).pipe(Tr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ce(u=>{const d=u.currentBrowserUrl.toString(),g=!t.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!g&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const v="";return this.events.next(new fd(u.id,this.urlSerializer.serialize(u.rawUrl),v,0)),u.resolve(null),An}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return B(u).pipe(Ce(v=>{const w=this.transitions?.getValue();return this.events.next(new Dy(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),w!==this.transitions?.getValue()?An:Promise.resolve(v)}),function X5(n,e,t,r,i,s){return wn(o=>function Q5(n,e,t,r,i,s,o="emptyOnly"){return new Y5(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Oe(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Tr(v=>{s.targetSnapshot=v.targetSnapshot,s.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:v.urlAfterRedirects};const w=new dO(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(w)}));if(g&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:v,extractedUrl:w,source:T,restoredState:D,extras:M}=u,z=new Dy(v,this.urlSerializer.serialize(w),T,D);this.events.next(z);const F=gO(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:F,urlAfterRedirects:w,extras:{...M,skipLocationChange:!1,replaceUrl:!1}},B(s)}{const v="";return this.events.next(new fd(u.id,this.urlSerializer.serialize(u.extractedUrl),v,1)),u.resolve(null),An}}),Tr(u=>{const d=new W6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Oe(u=>(this.currentTransition=s={...u,guards:y5(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function R5(n,e){return wn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?B({...t,guardsResult:!0}):function P5(n,e,t,r){return S(n).pipe(wn(i=>function V5(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?B(s.map(a=>{const u=Ap(e)??i,d=md(a,u);return ba(function D5(n){return n&&Dp(n.canDeactivate)}(d)?d.canDeactivate(n,e,t,r):u.runInContext(()=>d(n,e,t,r))).pipe(Da())})).pipe(_d()):B(!0)}(i.component,i.route,t,e,r)),Da(i=>!0!==i,!0))}(o,r,i,n).pipe(wn(a=>a&&function w5(n){return"boolean"==typeof n}(a)?function M5(n,e,t,r){return S(e).pipe(ld(i=>JA(function N5(n,e){return null!==n&&e&&e(new X6(n)),B(!0)}(i.route.parent,r),function x5(n,e){return null!==n&&e&&e(new t5(n)),B(!0)}(i.route,r),function k5(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function v5(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>HN(()=>B(o.guards.map(u=>{const d=Ap(o.node)??t,g=md(u,d);return ba(function C5(n){return n&&Dp(n.canActivateChild)}(g)?g.canActivateChild(r,n):d.runInContext(()=>g(r,n))).pipe(Da())})).pipe(_d())));return B(s).pipe(_d())}(n,i.path,t),function O5(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return B(!0);const i=r.map(s=>HN(()=>{const o=Ap(e)??t,a=md(s,o);return ba(function T5(n){return n&&Dp(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Da())}));return B(i).pipe(_d())}(n,i.route,t))),Da(i=>!0!==i,!0))}(r,s,n,e):B(a)),Oe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Tr(u=>{if(s.guardsResult=u.guardsResult,Ju(u.guardsResult))throw IO(0,u.guardsResult);const d=new K6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),rs(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),_T(u=>{if(u.guards.canActivateChecks.length)return B(u).pipe(Tr(d=>{const g=new Q6(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}),Ce(d=>{let g=!1;return B(d).pipe(function e8(n,e){return wn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return B(t);let s=0;return S(i).pipe(ld(o=>function t8(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!NO(i)&&(s[fp]=i.title),function n8(n,e,t,r){const i=function r8(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return B({});const s={};return S(i).pipe(wn(o=>function i8(n,e,t,r){const i=Ap(e)??r,s=md(n,i);return ba(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Da(),Tr(a=>{s[o]=a}))),XA(1),function _6(n){return Oe(()=>n)}(s),Qu(o=>CO(o)?An:dp(o)))}(s,n,e,r).pipe(Oe(o=>(n._resolvedData=o,n.data=mO(n,t).resolve,i&&NO(i)&&(n.data[fp]=i.title),null)))}(o.route,r,n,e)),Tr(()=>s++),XA(1),wn(o=>s===i.length?B(t):An))})}(t.paramsInheritanceStrategy,this.environmentInjector),Tr({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(d,"",2)}}))}),Tr(d=>{const g=new Y6(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}))}),_T(u=>{const d=g=>{const m=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(g.routeConfig).pipe(Tr(v=>{g.component=v}),Oe(()=>{})));for(const v of g.children)m.push(...d(v));return m};return YA(d(u.targetSnapshot.root)).pipe(yy(),cd(1))}),_T(()=>this.afterPreactivation()),Oe(u=>{const d=function a5(n,e,t){const r=wp(n,e._root,t?t._root:void 0);return new pO(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:d},s}),Tr(()=>{this.events.next(new sT)}),((n,e,t,r)=>Oe(i=>(new _5(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),cd(1),Tr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Sa(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function y6(n){return ne((e,t)=>{Hn(n).subscribe(fe(t,()=>t.complete(),Ne)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Tr(u=>{throw u}))),hp(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Qu(u=>{if(a=!0,wO(u))this.events.next(new Ip(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function l5(n){return wO(n)&&Ju(n.url)}(u)?this.events.next(new oT(u.url)):s.resolve(!1);else{this.events.next(new by(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(d){s.reject(d)}}return An}))}))}cancelNavigationTransition(t,r,i){const s=new Ip(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kO(n){return n!==vp}let VO=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===at);return r}getResolvedTitleForRoute(t){return t.data[fp]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:function(){return be(a8)},providedIn:"root"})}}return n})(),a8=(()=>{class n extends VO{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(me(kN))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),u8=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:function(){return be(l8)},providedIn:"root"})}}return n})();class c8{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let l8=(()=>{class n extends c8{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Un(n)))(i||n)}}()}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const ky=new _e("",{providedIn:"root",factory:()=>({})});let d8=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:function(){return be(h8)},providedIn:"root"})}}return n})(),h8=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bp=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(bp||{});function FO(n,e){n.events.pipe(rs(t=>t instanceof Sa||t instanceof Ip||t instanceof by||t instanceof fd),Oe(t=>t instanceof Sa||t instanceof fd?bp.COMPLETE:t instanceof Ip&&(0===t.code||1===t.code)?bp.REDIRECTING:bp.FAILED),rs(t=>t!==bp.REDIRECTING),cd(1)).subscribe(()=>{e()})}function f8(n){throw n}function p8(n,e,t){return e.parse("/")}const g8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},m8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let is=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=be(dx),this.isNgZoneEnabled=!1,this._events=new te,this.options=be(ky,{optional:!0})||{},this.pendingTasks=be(W_),this.errorHandler=this.options.errorHandler||f8,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||p8,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=be(d8),this.routeReuseStrategy=be(u8),this.titleStrategy=be(VO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=be(vd,{optional:!0})?.flat()??[],this.navigationTransitions=be(Oy),this.urlSerializer=be(gp),this.location=be(TA),this.componentInputBindingEnabled=!!be(Ry,{optional:!0}),this.eventsSubscription=new Tt,this.isNgZoneEnabled=be(Lt)instanceof Lt&&Lt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new hd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gO(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(LO(r)&&this._events.next(r));if(r instanceof Dy)kO(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof fd)this.rawUrlTree=i.rawUrl;else if(r instanceof dO){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof sT)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Ip)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof oT){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||kO(i.source)};this.scheduleNavigation(s,vp,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof by&&this.restoreHistory(i,!0),r instanceof Sa&&(this.navigated=!0),LO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),vp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(pT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let m,g=null;switch(a){case"merge":g={...this.currentUrlTree.queryParams,...s};break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=s||null}null!==g&&(g=this.removeEmptyProps(g));try{m=iO(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return sO(m,t,g,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ju(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,vp,null,r)}navigate(t,r={skipLocationChange:!1}){return function _8(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new de(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...g8}:!1===r?{...m8}:r,Ju(t))return QN(this.currentUrlTree,t,i);const s=this.parseUrl(t);return QN(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((m,v)=>{a=m,u=v});const g=this.pendingTasks.add();return FO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LO(n){return!(n instanceof sT||n instanceof oT)}let Vy=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new te,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof Sa&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function _S(n,e,t){return function WB(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?mS:jE}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(pe(is),pe(gd),function Al(n){return function lE(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if($c(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(nr(),n)}("tabindex"),pe(Co),pe(Ni),pe(Ku))}}static{this.\u0275dir=Ye({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&ln("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Fs("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",ad],skipLocationChange:["skipLocationChange","skipLocationChange",ad],replaceUrl:["replaceUrl","replaceUrl",ad],routerLink:"routerLink"},standalone:!0,features:[MR,vi]})}}return n})();class UO{}let I8=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(rs(t=>t instanceof Sa),ld(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Gw(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return S(i).pipe(zi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):B(null);const s=i.pipe(wn(o=>null===o?B(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?S([s,this.loader.loadComponent(r)]).pipe(zi()):s})}static{this.\u0275fac=function(r){return new(r||n)(me(is),me(hx),me(xi),me(UO),me(yT))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const vT=new _e("");let BO=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Dy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Sa?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof fd&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof hO&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new hO(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function iR(){throw new Error("invalid")}()}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();function ko(n,e){return{\u0275kind:n,\u0275providers:e}}function $O(){const n=be(Oi);return e=>{const t=n.get(od);if(e!==t.components[0])return;const r=n.get(is),i=n.get(HO);1===n.get(IT)&&r.initialNavigation(),n.get(zO,null,ct.Optional)?.setUpPreloading(),n.get(vT,null,ct.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const HO=new _e("",{factory:()=>new te}),IT=new _e("",{providedIn:"root",factory:()=>1}),zO=new _e("");function T8(n){return ko(0,[{provide:zO,useExisting:I8},{provide:UO,useExisting:n}])}const qO=new _e("ROUTER_FORROOT_GUARD"),D8=[TA,{provide:gp,useClass:eT},is,Ep,{provide:gd,useFactory:function jO(n){return n.routerState.root},deps:[is]},yT,[]];function b8(){return new vx("Router",is)}let ET=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[D8,[],{provide:vd,multi:!0,useValue:t},{provide:qO,useFactory:M8,deps:[[is,new Lu,new Dl]]},{provide:ky,useValue:r||{}},r?.useHash?{provide:Ku,useClass:LG}:{provide:Ku,useClass:Jx},{provide:vT,useFactory:()=>{const n=be(i9),e=be(Lt),t=be(ky),r=be(Oy),i=be(gp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new BO(i,r,n,e,t)}},r?.preloadingStrategy?T8(r.preloadingStrategy).\u0275providers:[],{provide:vx,multi:!0,useFactory:b8},r?.initialNavigation?x8(r):[],r?.bindToComponentInputs?ko(8,[vO,{provide:Ry,useExisting:vO}]).\u0275providers:[],[{provide:GO,useFactory:$O},{provide:pA,multi:!0,useExisting:GO}]]}}static forChild(t){return{ngModule:n,providers:[{provide:vd,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(me(qO,8))}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=ur({})}}return n})();function M8(n){return"guarded"}function x8(n){return["disabled"===n.initialNavigation?ko(3,[{provide:oA,multi:!0,useFactory:()=>{const e=be(is);return()=>{e.setUpLocationChangeListener()}}},{provide:IT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ko(2,[{provide:IT,useValue:0},{provide:oA,multi:!0,deps:[Oi],useFactory:e=>{const t=e.get(VG,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(is),s=e.get(HO);FO(i,()=>{r(!0)}),e.get(Oy).afterPreactivation=()=>(r(!0),s.closed?B(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const GO=new _e(""),O8=[];let k8=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=ur({imports:[ET.forRoot(O8),ET]})}}return n})(),V8=(()=>{class n{constructor(){this.title="wedding-app"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Si({type:n,selectors:[["app-root"]],decls:26,vars:6,consts:[[1,"grid-container"],[1,"grid-item1"],[1,"avatar-container"],[1,"circular-frame"],["src","assets/images/ratio1-1/picture3-1_1.jpg"],[3,"routerLink"],[1,"grid-item2"]],template:function(r,i){1&r&&(ke(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),rr(4,"img",4),je()(),ke(5,"ul")(6,"li")(7,"a",5),nt(8,"HOME"),je()(),ke(9,"li")(10,"a",5),nt(11,"ABOUT"),je()(),ke(12,"li")(13,"a",5),nt(14,"SCHEDULE"),je()(),ke(15,"li")(16,"a",5),nt(17,"REGISTRY"),je()(),ke(18,"li")(19,"a",5),nt(20,"CONTACT"),je()(),ke(21,"li")(22,"a",5),nt(23,"RSVP"),je()()()(),ke(24,"div",6),rr(25,"router-outlet"),je()()),2&r&&(Nn(7),Ar("routerLink","Home"),Nn(3),Ar("routerLink","About"),Nn(3),Ar("routerLink","Schedule"),Nn(3),Ar("routerLink","Registry"),Nn(3),Ar("routerLink","Contact"),Nn(3),Ar("routerLink","Rsvp"))},dependencies:[hT,Vy],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:16% auto}.grid-item1[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;font-family:Lora,cursive;background-color:#96a498;color:#fff;min-height:100vh}.grid-item2[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;background-color:#fcfbf4;font-family:Lora,cursive}.avatar-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.circular-frame[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:20px;width:180px;height:180px;border-radius:50%;overflow:hidden}.circular-frame[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:26px;list-style-type:none;margin-top:1em}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:inherit;text-decoration:none}@media (max-width: 1200px){.circular-frame[_ngcontent-%COMP%]{width:140px;height:140px}ul[_ngcontent-%COMP%]{padding-left:2em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 1000px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:18% auto}.circular-frame[_ngcontent-%COMP%]{width:120px;height:120px}ul[_ngcontent-%COMP%]{padding-left:1.5em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 800px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:22% auto}.circular-frame[_ngcontent-%COMP%]{width:110px;height:110px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 600px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:25% auto}.circular-frame[_ngcontent-%COMP%]{width:90px;height:90px}ul[_ngcontent-%COMP%]{padding-left:1em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 450px){.circular-frame[_ngcontent-%COMP%]{width:80px;height:80px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 450px){.circular-frame[_ngcontent-%COMP%]{width:70px;height:70px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px}}"]})}}return n})();var Id=it(979);(0,Id.registerVersion)("firebase","10.14.1","app");class U8 extends Tt{constructor(e,t){super()}schedule(e,t=0){return this}}const Fy={setInterval(n,e,...t){const{delegate:r}=Fy;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Fy;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class WO extends U8{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Fy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Fy.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ee(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const wT={now:()=>(wT.delegate||Date).now(),delegate:void 0};class Sp{constructor(e,t=Sp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Sp.now=wT.now;class KO extends Sp{constructor(e,t=Sp.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const $8=new class j8 extends KO{}(class B8 extends WO{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),QO=new KO(WO),AT=new Ul("ANGULARFIRE2_VERSION");class YO{constructor(){return((n,e)=>{const t=(0,Id.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(z8)}}const z8="app-check";function Ed(){}class JO{zone;delegate;constructor(e,t=$8){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class q8{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ed,{},Ed,Ed)),t.pipe(Tr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ZO=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new JO(Zone.current)),this.insideAngular=t.run(()=>new JO(Zone.current,QO)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(me(Lt))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Li(n){return function W8(n){return function(t){return(t=t.lift(new q8(n.ngZone))).pipe(Or(n.outsideAngular),Zr(n.insideAngular))}}(function wd(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Ra=it(574);Ra.A.registerVersion("firebase","10.14.1","app-compat");const J8=["ngOnDestroy"];class XO{constructor(e){return e}}const Ly=new _e("angularfire2.app.options"),Uy=new _e("angularfire2.app.name");function TT(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Ra.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ra.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;eW("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new XO(o)}const eW=(n,...e)=>{},tW={provide:XO,useFactory:TT,deps:[Ly,Lt,[new Lu,Uy]]};let nW=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Ly,useValue:t},{provide:Uy,useValue:r}]}}constructor(t){Ra.A.registerVersion("angularfire",AT.full,"core"),Ra.A.registerVersion("angularfire",AT.full,"app-compat"),Ra.A.registerVersion("angular",NS.full,t.toString())}static \u0275fac=function(r){return new(r||n)(me(Os))};static \u0275mod=ni({type:n});static \u0275inj=ur({providers:[tW]})}return n})();function e1(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function rW(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(t1("error",`${e} was already initialized on the ${t} Firebase App with different settings.${iW?" You may need to reload as Firebase is not HMR aware.":""}`),t1("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const iW=typeof module<"u"&&!!module.hot,t1=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],it(324);class sW extends te{constructor(e=1/0,t=1/0,r=wT){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function n1(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,q({connector:()=>new sW(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function r1(n,e){return C(e)?Ce(()=>n,e):Ce(()=>n)}const i1=new _e("angularfire2.auth.use-emulator"),s1=new _e("angularfire2.auth.settings"),o1=new _e("angularfire2.auth.tenant-id"),a1=new _e("angularfire2.auth.langugage-code"),u1=new _e("angularfire2.auth.use-device-language"),c1=new _e("angularfire.auth.persistence"),l1=(n,e,t,r,i,s,o,a)=>e1(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,g]of Object.entries(o))u.settings[d]=g;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let d1=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,d,g,m,v,w){const T=new te,D=B(void 0).pipe(Zr(o.outsideAngular),Ce(()=>s.runOutsideAngular(()=>Promise.resolve().then(it.bind(it,324)))),Oe(()=>TT(t,s,r)),Oe(M=>l1(M,s,a,d,g,m,u,v)),n1({bufferSize:1,refCount:!1}));if(hy(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=B(null);else{D.pipe(Da()).subscribe();const M=D.pipe(Ce(G=>G.getRedirectResult().then(ae=>ae,()=>null)),Li,n1({bufferSize:1,refCount:!1})),z=D.pipe(Ce(G=>new dt(ae=>({unsubscribe:s.runOutsideAngular(()=>G.onAuthStateChanged(ye=>ae.next(ye),ye=>ae.error(ye),()=>ae.complete()))})))),F=D.pipe(Ce(G=>new dt(ae=>({unsubscribe:s.runOutsideAngular(()=>G.onIdTokenChanged(ye=>ae.next(ye),ye=>ae.error(ye),()=>ae.complete()))}))));this.authState=M.pipe(r1(z),Or(o.outsideAngular),Zr(o.insideAngular)),this.user=M.pipe(r1(F),Or(o.outsideAngular),Zr(o.insideAngular)),this.idToken=this.user.pipe(Ce(G=>G?S(G.getIdToken()):B(null))),this.idTokenResult=this.user.pipe(Ce(G=>G?S(G.getIdTokenResult()):B(null))),this.credential=P(M,T,this.authState.pipe(rs(G=>!G))).pipe(Oe(G=>G?.user?G:null),Or(o.outsideAngular),Zr(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(J8.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>t.run(()=>d)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(g=>{const m=g?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,m),m})})})}))(this,D,s,{spy:{apply:(M,z,F)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&F.then(G=>T.next(G))}}})}static \u0275fac=function(r){return new(r||n)(me(Ly),me(Uy,8),me(Os),me(Lt),me(ZO),me(i1,8),me(s1,8),me(o1,8),me(a1,8),me(u1,8),me(c1,8),me(YO,8))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function CT(){return ne((n,e)=>{let t,r=!1;n.subscribe(fe(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Xu,g1,ie=it(467),h1=it(779),Hs=it(398),kt=it(401),f1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},p1={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(V,b,O){O||(O=0);var L=Array(16);if("string"==typeof b)for(var j=0;16>j;++j)L[j]=b.charCodeAt(O++)|b.charCodeAt(O++)<<8|b.charCodeAt(O++)<<16|b.charCodeAt(O++)<<24;else for(j=0;16>j;++j)L[j]=b[O++]|b[O++]<<8|b[O++]<<16|b[O++]<<24;var W=V.g[3],N=(b=V.g[0])+(W^(O=V.g[1])&((j=V.g[2])^W))+L[0]+3614090360&4294967295;N=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=O+(N<<7&4294967295|N>>>25))+((N=W+(j^b&(O^j))+L[1]+3905402710&4294967295)<<12&4294967295|N>>>20))+((N=j+(O^W&(b^O))+L[2]+606105819&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^j&(W^b))+L[3]+3250441966&4294967295)<<22&4294967295|N>>>10))+((N=b+(W^O&(j^W))+L[4]+4118548399&4294967295)<<7&4294967295|N>>>25))+((N=W+(j^b&(O^j))+L[5]+1200080426&4294967295)<<12&4294967295|N>>>20))+((N=j+(O^W&(b^O))+L[6]+2821735955&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^j&(W^b))+L[7]+4249261313&4294967295)<<22&4294967295|N>>>10))+((N=b+(W^O&(j^W))+L[8]+1770035416&4294967295)<<7&4294967295|N>>>25))+((N=W+(j^b&(O^j))+L[9]+2336552879&4294967295)<<12&4294967295|N>>>20))+((N=j+(O^W&(b^O))+L[10]+4294925233&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^j&(W^b))+L[11]+2304563134&4294967295)<<22&4294967295|N>>>10))+((N=b+(W^O&(j^W))+L[12]+1804603682&4294967295)<<7&4294967295|N>>>25))+((N=W+(j^b&(O^j))+L[13]+4254626195&4294967295)<<12&4294967295|N>>>20))+((N=j+(O^W&(b^O))+L[14]+2792965006&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^j&(W^b))+L[15]+1236535329&4294967295)<<22&4294967295|N>>>10))+((N=b+(j^W&(O^j))+L[1]+4129170786&4294967295)<<5&4294967295|N>>>27))+((N=W+(O^j&(b^O))+L[6]+3225465664&4294967295)<<9&4294967295|N>>>23))+((N=j+(b^O&(W^b))+L[11]+643717713&4294967295)<<14&4294967295|N>>>18))+((N=O+(W^b&(j^W))+L[0]+3921069994&4294967295)<<20&4294967295|N>>>12))+((N=b+(j^W&(O^j))+L[5]+3593408605&4294967295)<<5&4294967295|N>>>27))+((N=W+(O^j&(b^O))+L[10]+38016083&4294967295)<<9&4294967295|N>>>23))+((N=j+(b^O&(W^b))+L[15]+3634488961&4294967295)<<14&4294967295|N>>>18))+((N=O+(W^b&(j^W))+L[4]+3889429448&4294967295)<<20&4294967295|N>>>12))+((N=b+(j^W&(O^j))+L[9]+568446438&4294967295)<<5&4294967295|N>>>27))+((N=W+(O^j&(b^O))+L[14]+3275163606&4294967295)<<9&4294967295|N>>>23))+((N=j+(b^O&(W^b))+L[3]+4107603335&4294967295)<<14&4294967295|N>>>18))+((N=O+(W^b&(j^W))+L[8]+1163531501&4294967295)<<20&4294967295|N>>>12))+((N=b+(j^W&(O^j))+L[13]+2850285829&4294967295)<<5&4294967295|N>>>27))+((N=W+(O^j&(b^O))+L[2]+4243563512&4294967295)<<9&4294967295|N>>>23))+((N=j+(b^O&(W^b))+L[7]+1735328473&4294967295)<<14&4294967295|N>>>18))+((N=O+(W^b&(j^W))+L[12]+2368359562&4294967295)<<20&4294967295|N>>>12))+((N=b+(O^j^W)+L[5]+4294588738&4294967295)<<4&4294967295|N>>>28))+((N=W+(b^O^j)+L[8]+2272392833&4294967295)<<11&4294967295|N>>>21))+((N=j+(W^b^O)+L[11]+1839030562&4294967295)<<16&4294967295|N>>>16))+((N=O+(j^W^b)+L[14]+4259657740&4294967295)<<23&4294967295|N>>>9))+((N=b+(O^j^W)+L[1]+2763975236&4294967295)<<4&4294967295|N>>>28))+((N=W+(b^O^j)+L[4]+1272893353&4294967295)<<11&4294967295|N>>>21))+((N=j+(W^b^O)+L[7]+4139469664&4294967295)<<16&4294967295|N>>>16))+((N=O+(j^W^b)+L[10]+3200236656&4294967295)<<23&4294967295|N>>>9))+((N=b+(O^j^W)+L[13]+681279174&4294967295)<<4&4294967295|N>>>28))+((N=W+(b^O^j)+L[0]+3936430074&4294967295)<<11&4294967295|N>>>21))+((N=j+(W^b^O)+L[3]+3572445317&4294967295)<<16&4294967295|N>>>16))+((N=O+(j^W^b)+L[6]+76029189&4294967295)<<23&4294967295|N>>>9))+((N=b+(O^j^W)+L[9]+3654602809&4294967295)<<4&4294967295|N>>>28))+((N=W+(b^O^j)+L[12]+3873151461&4294967295)<<11&4294967295|N>>>21))+((N=j+(W^b^O)+L[15]+530742520&4294967295)<<16&4294967295|N>>>16))+((N=O+(j^W^b)+L[2]+3299628645&4294967295)<<23&4294967295|N>>>9))+((N=b+(j^(O|~W))+L[0]+4096336452&4294967295)<<6&4294967295|N>>>26))+((N=W+(O^(b|~j))+L[7]+1126891415&4294967295)<<10&4294967295|N>>>22))+((N=j+(b^(W|~O))+L[14]+2878612391&4294967295)<<15&4294967295|N>>>17))+((N=O+(W^(j|~b))+L[5]+4237533241&4294967295)<<21&4294967295|N>>>11))+((N=b+(j^(O|~W))+L[12]+1700485571&4294967295)<<6&4294967295|N>>>26))+((N=W+(O^(b|~j))+L[3]+2399980690&4294967295)<<10&4294967295|N>>>22))+((N=j+(b^(W|~O))+L[10]+4293915773&4294967295)<<15&4294967295|N>>>17))+((N=O+(W^(j|~b))+L[1]+2240044497&4294967295)<<21&4294967295|N>>>11))+((N=b+(j^(O|~W))+L[8]+1873313359&4294967295)<<6&4294967295|N>>>26))+((N=W+(O^(b|~j))+L[15]+4264355552&4294967295)<<10&4294967295|N>>>22))+((N=j+(b^(W|~O))+L[6]+2734768916&4294967295)<<15&4294967295|N>>>17))+((N=O+(W^(j|~b))+L[13]+1309151649&4294967295)<<21&4294967295|N>>>11))+((W=(b=O+((N=b+(j^(O|~W))+L[4]+4149444226&4294967295)<<6&4294967295|N>>>26))+((N=W+(O^(b|~j))+L[11]+3174756917&4294967295)<<10&4294967295|N>>>22))^((j=W+((N=j+(b^(W|~O))+L[2]+718787259&4294967295)<<15&4294967295|N>>>17))|~b))+L[9]+3951481745&4294967295,V.g[0]=V.g[0]+b&4294967295,V.g[1]=V.g[1]+(j+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+j&4294967295,V.g[3]=V.g[3]+W&4294967295}function o(V,b){this.h=b;for(var O=[],L=!0,j=V.length-1;0<=j;j--){var W=0|V[j];L&&W==b||(O[j]=W,L=!1)}this.g=O}(function e(V,b){function O(){}O.prototype=b.prototype,V.D=b.prototype,V.prototype=new O,V.prototype.constructor=V,V.C=function(L,j,W){for(var N=Array(arguments.length-2),Go=2;Go<arguments.length;Go++)N[Go-2]=arguments[Go];return b.prototype[j].apply(L,N)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(V,b){void 0===b&&(b=V.length);for(var O=b-this.blockSize,L=this.B,j=this.h,W=0;W<b;){if(0==j)for(;W<=O;)i(this,V,W),W+=this.blockSize;if("string"==typeof V){for(;W<b;)if(L[j++]=V.charCodeAt(W++),j==this.blockSize){i(this,L),j=0;break}}else for(;W<b;)if(L[j++]=V[W++],j==this.blockSize){i(this,L),j=0;break}}this.h=j,this.o+=b},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var b=1;b<V.length-8;++b)V[b]=0;var O=8*this.o;for(b=V.length-8;b<V.length;++b)V[b]=255&O,O/=256;for(this.u(V),V=Array(16),b=O=0;4>b;++b)for(var L=0;32>L;L+=8)V[O++]=this.g[b]>>>L&255;return V};var a={};function u(V){return-128<=V&&128>V?function s(V,b){var O=a;return Object.prototype.hasOwnProperty.call(O,V)?O[V]:O[V]=b(V)}(V,function(b){return new o([0|b],0>b?-1:0)}):new o([0|V],0>V?-1:0)}function d(V){if(isNaN(V)||!isFinite(V))return m;if(0>V)return M(d(-V));for(var b=[],O=1,L=0;V>=O;L++)b[L]=V/O|0,O*=4294967296;return new o(b,0)}var m=u(0),v=u(1),w=u(16777216);function T(V){if(0!=V.h)return!1;for(var b=0;b<V.g.length;b++)if(0!=V.g[b])return!1;return!0}function D(V){return-1==V.h}function M(V){for(var b=V.g.length,O=[],L=0;L<b;L++)O[L]=~V.g[L];return new o(O,~V.h).add(v)}function z(V,b){return V.add(M(b))}function F(V,b){for(;(65535&V[b])!=V[b];)V[b+1]+=V[b]>>>16,V[b]&=65535,b++}function G(V,b){this.g=V,this.h=b}function ae(V,b){if(T(b))throw Error("division by zero");if(T(V))return new G(m,m);if(D(V))return b=ae(M(V),b),new G(M(b.g),M(b.h));if(D(b))return b=ae(V,M(b)),new G(M(b.g),b.h);if(30<V.g.length){if(D(V)||D(b))throw Error("slowDivide_ only works with positive integers.");for(var O=v,L=b;0>=L.l(V);)O=ye(O),L=ye(L);var j=Le(O,1),W=Le(L,1);for(L=Le(L,2),O=Le(O,2);!T(L);){var N=W.add(L);0>=N.l(V)&&(j=j.add(O),W=N),L=Le(L,1),O=Le(O,1)}return b=z(V,j.j(b)),new G(j,b)}for(j=m;0<=V.l(b);){for(O=Math.max(1,Math.floor(V.m()/b.m())),L=48>=(L=Math.ceil(Math.log(O)/Math.LN2))?1:Math.pow(2,L-48),N=(W=d(O)).j(b);D(N)||0<N.l(V);)N=(W=d(O-=L)).j(b);T(W)&&(W=v),j=j.add(W),V=z(V,N)}return new G(j,V)}function ye(V){for(var b=V.g.length+1,O=[],L=0;L<b;L++)O[L]=V.i(L)<<1|V.i(L-1)>>>31;return new o(O,V.h)}function Le(V,b){var O=b>>5;b%=32;for(var L=V.g.length-O,j=[],W=0;W<L;W++)j[W]=0<b?V.i(W+O)>>>b|V.i(W+O+1)<<32-b:V.i(W+O);return new o(j,V.h)}(n=o.prototype).m=function(){if(D(this))return-M(this).m();for(var V=0,b=1,O=0;O<this.g.length;O++){var L=this.i(O);V+=(0<=L?L:4294967296+L)*b,b*=4294967296}return V},n.toString=function(V){if(2>(V=V||10)||36<V)throw Error("radix out of range: "+V);if(T(this))return"0";if(D(this))return"-"+M(this).toString(V);for(var b=d(Math.pow(V,6)),O=this,L="";;){var j=ae(O,b).g,W=((0<(O=z(O,j.j(b))).g.length?O.g[0]:O.h)>>>0).toString(V);if(T(O=j))return W+L;for(;6>W.length;)W="0"+W;L=W+L}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h},n.l=function(V){return D(V=z(this,V))?-1:T(V)?0:1},n.abs=function(){return D(this)?M(this):this},n.add=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0,j=0;j<=b;j++){var W=L+(65535&this.i(j))+(65535&V.i(j)),N=(W>>>16)+(this.i(j)>>>16)+(V.i(j)>>>16);L=N>>>16,O[j]=(N&=65535)<<16|(W&=65535)}return new o(O,-2147483648&O[O.length-1]?-1:0)},n.j=function(V){if(T(this)||T(V))return m;if(D(this))return D(V)?M(this).j(M(V)):M(M(this).j(V));if(D(V))return M(this.j(M(V)));if(0>this.l(w)&&0>V.l(w))return d(this.m()*V.m());for(var b=this.g.length+V.g.length,O=[],L=0;L<2*b;L++)O[L]=0;for(L=0;L<this.g.length;L++)for(var j=0;j<V.g.length;j++){var W=this.i(L)>>>16,N=65535&this.i(L),Go=V.i(j)>>>16,Ag=65535&V.i(j);O[2*L+2*j]+=N*Ag,F(O,2*L+2*j),O[2*L+2*j+1]+=W*Ag,F(O,2*L+2*j+1),O[2*L+2*j+1]+=N*Go,F(O,2*L+2*j+1),O[2*L+2*j+2]+=W*Go,F(O,2*L+2*j+2)}for(L=0;L<b;L++)O[L]=O[2*L+1]<<16|O[2*L];for(L=b;L<2*b;L++)O[L]=0;return new o(O,0)},n.A=function(V){return ae(this,V).h},n.and=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0;L<b;L++)O[L]=this.i(L)&V.i(L);return new o(O,this.h&V.h)},n.or=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0;L<b;L++)O[L]=this.i(L)|V.i(L);return new o(O,this.h|V.h)},n.xor=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0;L<b;L++)O[L]=this.i(L)^V.i(L);return new o(O,this.h^V.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,g1=p1.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=function g(V,b){if(0==V.length)throw Error("number format error: empty string");if(2>(b=b||10)||36<b)throw Error("radix out of range: "+b);if("-"==V.charAt(0))return M(g(V.substring(1),b));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=d(Math.pow(b,8)),L=m,j=0;j<V.length;j+=8){var W=Math.min(8,V.length-j),N=parseInt(V.substring(j,j+W),b);8>W?(W=d(Math.pow(b,W)),L=L.j(W).add(d(N))):L=(L=L.j(O)).add(d(N))}return L},Xu=p1.Integer=o}).apply(typeof f1<"u"?f1:typeof self<"u"?self:typeof window<"u"?window:{});var m1,Rp,_1,jy,DT,y1,v1,I1,By=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vo={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,I){return h==Array.prototype||h==Object.prototype||(h[_]=I.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof By&&By];for(var _=0;_<h.length;++_){var I=h[_];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var I=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var $=h[A];if(!($ in I))break e;I=I[$]}(_=_(A=I[h=h[h.length-1]]))!=A&&null!=_&&e(I,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var I=0,A=!1,$={next:function(){if(!A&&I<h.length){var X=I++;return{value:_(X,h[X]),done:!1}}return A=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}(this,function(_,I){return I})}});var o=o||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function d(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function g(h,_,I){return h.call.apply(h.bind,arguments)}function m(h,_,I){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,A),h.apply(_,$)}}return function(){return h.apply(_,arguments)}}function v(h,_,I){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function w(h,_){var I=Array.prototype.slice.call(arguments,1);return function(){var A=I.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function T(h,_){function I(){}I.prototype=_.prototype,h.aa=_.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(A,$,X){for(var we=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)we[Kt-2]=arguments[Kt];return _.prototype[$].apply(A,we)}}function D(h){const _=h.length;if(0<_){const I=Array(_);for(let A=0;A<_;A++)I[A]=h[A];return I}return[]}function M(h,_){for(let I=1;I<arguments.length;I++){const A=arguments[I];if(u(A)){const $=h.length||0,X=A.length||0;h.length=$+X;for(let we=0;we<X;we++)h[$+we]=A[we]}else h.push(A)}}function F(h){return/^[\s\xa0]*$/.test(h)}function G(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function ae(h){return ae[" "](h),h}ae[" "]=function(){};var ye=!(-1==G().indexOf("Gecko")||-1!=G().toLowerCase().indexOf("webkit")&&-1==G().indexOf("Edge")||-1!=G().indexOf("Trident")||-1!=G().indexOf("MSIE")||-1!=G().indexOf("Edge"));function Le(h,_,I){for(const A in h)_.call(I,h[A],A,h)}function b(h){const _={};for(const I in h)_[I]=h[I];return _}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,_){let I,A;for(let $=1;$<arguments.length;$++){for(I in A=arguments[$],A)h[I]=A[I];for(let X=0;X<O.length;X++)I=O[X],Object.prototype.hasOwnProperty.call(A,I)&&(h[I]=A[I])}}function j(h){var _=1;h=h.split(":");const I=[];for(;0<_&&h.length;)I.push(h.shift()),_--;return h.length&&I.push(h.join(":")),I}function W(h){a.setTimeout(()=>{throw h},0)}function N(){var h=C0;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var Ag=new class z{constructor(_,I){this.i=_,this.j=I,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new wZ,h=>h.reset());class wZ{constructor(){this.next=this.g=this.h=null}set(_,I){this.h=_,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let Tg,Cg=!1,C0=new class Go{constructor(){this.h=this.g=null}add(_,I){const A=Ag.get();A.set(_,I),this.h?this.h.next=A:this.g=A,this.h=A}},L2=()=>{const h=a.Promise.resolve(void 0);Tg=()=>{h.then(AZ)}};var AZ=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(I){W(I)}var _=Ag;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}Cg=!1};function eu(){this.s=this.s,this.C=this.C}function Wr(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}eu.prototype.s=!1,eu.prototype.ma=function(){this.s||(this.s=!0,this.N())},eu.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Wr.prototype.h=function(){this.defaultPrevented=!0};var TZ=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};a.addEventListener("test",I,_),a.removeEventListener("test",I,_)}catch{}return h}();function Dg(h,_){if(Wr.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ye){e:{try{ae(_.nodeName);var $=!0;break e}catch{}$=!1}$||(_=null)}}else"mouseover"==I?_=h.fromElement:"mouseout"==I&&(_=h.toElement);this.relatedTarget=_,A?(this.clientX=void 0!==A.clientX?A.clientX:A.pageX,this.clientY=void 0!==A.clientY?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:CZ[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Dg.aa.h.call(this)}}T(Dg,Wr);var CZ={2:"touch",3:"pen",4:"mouse"};Dg.prototype.h=function(){Dg.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var bg="closure_listenable_"+(1e6*Math.random()|0),DZ=0;function bZ(h,_,I,A,$){this.listener=h,this.proxy=null,this.src=_,this.type=I,this.capture=!!A,this.ha=$,this.key=++DZ,this.da=this.fa=!1}function iI(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function sI(h){this.src=h,this.g={},this.h=0}function D0(h,_){var I=_.type;if(I in h.g){var X,A=h.g[I],$=Array.prototype.indexOf.call(A,_,void 0);(X=0<=$)&&Array.prototype.splice.call(A,$,1),X&&(iI(_),0==h.g[I].length&&(delete h.g[I],h.h--))}}function b0(h,_,I,A){for(var $=0;$<h.length;++$){var X=h[$];if(!X.da&&X.listener==_&&X.capture==!!I&&X.ha==A)return $}return-1}sI.prototype.add=function(h,_,I,A,$){var X=h.toString();(h=this.g[X])||(h=this.g[X]=[],this.h++);var we=b0(h,_,A,$);return-1<we?(_=h[we],I||(_.fa=!1)):((_=new bZ(_,this.src,X,!!A,$)).fa=I,h.push(_)),_};var S0="closure_lm_"+(1e6*Math.random()|0),R0={};function U2(h,_,I,A,$){if(A&&A.once)return j2(h,_,I,A,$);if(Array.isArray(_)){for(var X=0;X<_.length;X++)U2(h,_[X],I,A,$);return null}return I=N0(I),h&&h[bg]?h.K(_,I,d(A)?!!A.capture:!!A,$):B2(h,_,I,!1,A,$)}function B2(h,_,I,A,$,X){if(!_)throw Error("Invalid event type");var we=d($)?!!$.capture:!!$,Kt=M0(h);if(Kt||(h[S0]=Kt=new sI(h)),(I=Kt.add(_,I,A,we,X)).proxy)return I;if(A=function SZ(){const _=RZ;return function h(I){return _.call(h.src,h.listener,I)}}(),I.proxy=A,A.src=h,A.listener=I,h.addEventListener)TZ||($=we),void 0===$&&($=!1),h.addEventListener(_.toString(),A,$);else if(h.attachEvent)h.attachEvent(H2(_.toString()),A);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(A)}return I}function j2(h,_,I,A,$){if(Array.isArray(_)){for(var X=0;X<_.length;X++)j2(h,_[X],I,A,$);return null}return I=N0(I),h&&h[bg]?h.L(_,I,d(A)?!!A.capture:!!A,$):B2(h,_,I,!0,A,$)}function $2(h,_,I,A,$){if(Array.isArray(_))for(var X=0;X<_.length;X++)$2(h,_[X],I,A,$);else A=d(A)?!!A.capture:!!A,I=N0(I),h&&h[bg]?(h=h.i,(_=String(_).toString())in h.g&&-1<(I=b0(X=h.g[_],I,A,$))&&(iI(X[I]),Array.prototype.splice.call(X,I,1),0==X.length&&(delete h.g[_],h.h--))):h&&(h=M0(h))&&(_=h.g[_.toString()],h=-1,_&&(h=b0(_,I,A,$)),(I=-1<h?_[h]:null)&&P0(I))}function P0(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[bg])D0(_.i,h);else{var I=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(I,A,h.capture):_.detachEvent?_.detachEvent(H2(I),A):_.addListener&&_.removeListener&&_.removeListener(A),(I=M0(_))?(D0(I,h),0==I.h&&(I.src=null,_[S0]=null)):iI(h)}}}function H2(h){return h in R0?R0[h]:R0[h]="on"+h}function RZ(h,_){if(h.da)h=!0;else{_=new Dg(_,this);var I=h.listener,A=h.ha||h.src;h.fa&&P0(h),h=I.call(A,_)}return h}function M0(h){return(h=h[S0])instanceof sI?h:null}var x0="__closure_events_fn_"+(1e9*Math.random()>>>0);function N0(h){return"function"==typeof h?h:(h[x0]||(h[x0]=function(_){return h.handleEvent(_)}),h[x0])}function Kr(){eu.call(this),this.i=new sI(this),this.M=this,this.F=null}function hi(h,_){var I,A=h.F;if(A)for(I=[];A;A=A.F)I.push(A);if(h=h.M,A=_.type||_,"string"==typeof _)_=new Wr(_,h);else if(_ instanceof Wr)_.target=_.target||h;else{var $=_;L(_=new Wr(A,h),$)}if($=!0,I)for(var X=I.length-1;0<=X;X--){var we=_.g=I[X];$=oI(we,A,!0,_)&&$}if($=oI(we=_.g=h,A,!0,_)&&$,$=oI(we,A,!1,_)&&$,I)for(X=0;X<I.length;X++)$=oI(we=_.g=I[X],A,!1,_)&&$}function oI(h,_,I,A){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var $=!0,X=0;X<_.length;++X){var we=_[X];if(we&&!we.da&&we.capture==I){var Kt=we.listener,Sr=we.ha||we.src;we.fa&&D0(h.i,we),$=!1!==Kt.call(Sr,A)&&$}}return $&&!A.defaultPrevented}function z2(h,_,I){if("function"==typeof h)I&&(h=v(h,I));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=v(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function q2(h){h.g=z2(()=>{h.g=null,h.i&&(h.i=!1,q2(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}T(Kr,eu),Kr.prototype[bg]=!0,Kr.prototype.removeEventListener=function(h,_,I,A){$2(this,h,_,I,A)},Kr.prototype.N=function(){if(Kr.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var I=h.g[_],A=0;A<I.length;A++)iI(I[A]);delete h.g[_],h.h--}}this.F=null},Kr.prototype.K=function(h,_,I,A){return this.i.add(String(h),_,!1,I,A)},Kr.prototype.L=function(h,_,I,A){return this.i.add(String(h),_,!0,I,A)};class PZ extends eu{constructor(_,I){super(),this.m=_,this.l=I,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:q2(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sg(h){eu.call(this),this.h=h,this.g={}}T(Sg,eu);var G2=[];function W2(h){Le(h.g,function(_,I){this.g.hasOwnProperty(I)&&P0(_)},h),h.g={}}Sg.prototype.N=function(){Sg.aa.N.call(this),W2(this)},Sg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var O0=a.JSON.stringify,MZ=a.JSON.parse,xZ=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function k0(){}function Q2(){}k0.prototype.h=null;var Rg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function V0(){Wr.call(this,"d")}function F0(){Wr.call(this,"c")}T(V0,Wr),T(F0,Wr);var Tc={},Y2=null;function aI(){return Y2=Y2||new Kr}function J2(h){Wr.call(this,Tc.La,h)}function Pg(h){const _=aI();hi(_,new J2(_))}function Z2(h,_){Wr.call(this,Tc.STAT_EVENT,h),this.stat=_}function fi(h){const _=aI();hi(_,new Z2(_,h))}function X2(h,_){Wr.call(this,Tc.Ma,h),this.size=_}function Mg(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function xg(){this.g=!0}function dh(h,_,I,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function VZ(h,_){if(!h.g)return _;if(!_)return null;try{var I=JSON.parse(_);if(I)for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var A=I[h];if(!(2>A.length)){var $=A[1];if(Array.isArray($)&&!(1>$.length)){var X=$[0];if("noop"!=X&&"stop"!=X&&"close"!=X)for(var we=1;we<$.length;we++)$[we]=""}}}return O0(I)}catch{return _}}(h,I)+(A?" "+A:"")})}Tc.La="serverreachability",T(J2,Wr),Tc.STAT_EVENT="statevent",T(Z2,Wr),Tc.Ma="timingevent",T(X2,Wr),xg.prototype.xa=function(){this.g=!1},xg.prototype.info=function(){};var L0,uI={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},eU={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function cI(){}function tu(h,_,I,A){this.j=h,this.i=_,this.l=I,this.R=A||1,this.U=new Sg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tU}function tU(){this.i=null,this.g="",this.h=!1}T(cI,k0),cI.prototype.g=function(){return new XMLHttpRequest},cI.prototype.i=function(){return{}},L0=new cI;var nU={},U0={};function B0(h,_,I){h.L=1,h.v=fI(Wo(_)),h.m=I,h.P=!0,rU(h,null)}function rU(h,_){h.F=Date.now(),lI(h),h.A=Wo(h.v);var I=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),_U(I.i,"t",A),h.C=0,I=h.j.J,h.h=new tU,h.g=kU(h.j,I?_:null,!h.m),0<h.O&&(h.M=new PZ(v(h.Y,h,h.g),h.O)),_=h.U,I=h.g,A=h.ca;var $="readystatechange";Array.isArray($)||($&&(G2[0]=$.toString()),$=G2);for(var X=0;X<$.length;X++){var we=U2(I,$[X],A||_.handleEvent,!1,_.h||_);if(!we)break;_.g[we.key]=we}_=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Pg(),function NZ(h,_,I,A,$,X){h.info(function(){if(h.g)if(X)for(var we="",Kt=X.split("&"),Sr=0;Sr<Kt.length;Sr++){var Mt=Kt[Sr].split("=");if(1<Mt.length){var Qr=Mt[0];Mt=Mt[1];var Yr=Qr.split("_");we=2<=Yr.length&&"type"==Yr[1]?we+(Qr+"=")+Mt+"&":we+(Qr+"=redacted&")}}else we=null;else we=X;return"XMLHTTP REQ ("+A+") [attempt "+$+"]: "+_+"\n"+I+"\n"+we})}(h.i,h.u,h.A,h.l,h.R,h.m)}function iU(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function FZ(h,_){var I=h.C,A=_.indexOf("\n",I);return-1==A?U0:(I=Number(_.substring(I,A)),isNaN(I)?nU:(A+=1)+I>_.length?U0:(_=_.slice(A,A+I),h.C=A+I,_))}function lI(h){h.S=Date.now()+h.I,sU(h,h.I)}function sU(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Mg(v(h.ba,h),_)}function j0(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function Ng(h){0==h.j.G||h.J||MU(h.j,h)}function Cc(h){j0(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,W2(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function $0(h,_){try{var I=h.j;if(0!=I.G&&(I.g==h||H0(I.h,h)))if(!h.K&&H0(I.h,h)&&3==I.G){try{var A=I.Da.g.parse(_)}catch{A=null}if(Array.isArray(A)&&3==A.length){var $=A;if(0==$[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<h.F))break e;yI(I),mI(I)}W0(I),fi(18)}}else I.za=$[1],0<I.za-I.T&&37500>$[2]&&I.F&&0==I.v&&!I.C&&(I.C=Mg(v(I.Za,I),6e3));if(1>=uU(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else bc(I,11)}else if((h.K||I.g==h)&&yI(I),!F(_))for($=I.Da.g.parse(_),_=0;_<$.length;_++){let Mt=$[_];if(I.T=Mt[0],Mt=Mt[1],2==I.G)if("c"==Mt[0]){I.K=Mt[1],I.ia=Mt[2];const Qr=Mt[3];null!=Qr&&(I.la=Qr,I.j.info("VER="+I.la));const Yr=Mt[4];null!=Yr&&(I.Aa=Yr,I.j.info("SVER="+I.Aa));const ph=Mt[5];null!=ph&&"number"==typeof ph&&0<ph&&(I.L=A=1.5*ph,I.j.info("backChannelRequestTimeoutMs_="+A)),A=I;const Is=h.g;if(Is){const II=Is.g?Is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(II){var X=A.h;X.g||-1==II.indexOf("spdy")&&-1==II.indexOf("quic")&&-1==II.indexOf("h2")||(X.j=X.l,X.g=new Set,X.h&&(z0(X,X.h),X.h=null))}if(A.D){const Q0=Is.g?Is.g.getResponseHeader("X-HTTP-Session-Id"):null;Q0&&(A.ya=Q0,pn(A.I,A.D,Q0))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms"));var we=h;if((A=I).qa=OU(A,A.J?A.ia:null,A.W),we.K){cU(A.h,we);var Kt=we,Sr=A.L;Sr&&(Kt.I=Sr),Kt.B&&(j0(Kt),lI(Kt)),A.g=we}else RU(A);0<I.i.length&&_I(I)}else"stop"!=Mt[0]&&"close"!=Mt[0]||bc(I,7);else 3==I.G&&("stop"==Mt[0]||"close"==Mt[0]?"stop"==Mt[0]?bc(I,7):G0(I):"noop"!=Mt[0]&&I.l&&I.l.ta(Mt),I.v=0)}Pg()}catch{}}function oU(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function aU(h){return!!h.h||!!h.g&&h.g.size>=h.j}function uU(h){return h.h?1:h.g?h.g.size:0}function H0(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function z0(h,_){h.g?h.g.add(_):h.h=_}function cU(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function lU(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const I of h.g.values())_=_.concat(I.D);return _}return D(h.i)}function dU(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var I=function BZ(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var I=0;I<h;I++)_.push(I);return _}_=[],I=0;for(const A in h)_[I++]=A;return _}}}(h),A=function UZ(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],I=h.length,A=0;A<I;A++)_.push(h[A]);return _}for(A in _=[],I=0,h)_[I++]=h[A];return _}(h),$=A.length,X=0;X<$;X++)_.call(void 0,A[X],I&&I[X],h)}tu.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==Ko(h)?_.j():this.Y(h)},tu.prototype.Y=function(h){try{if(h==this.g)e:{const Yr=Ko(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>Yr)&&(3!=Yr||this.g&&(this.h.h||this.g.oa()||TU(this.g)))){this.J||4!=Yr||7==_||Pg(),j0(this);var I=this.g.Z();this.X=I;t:if(iU(this)){var A=TU(this.g);h="";var $=A.length,X=4==Ko(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Cc(this),Ng(this);var we="";break t}this.h.i=new a.TextDecoder}for(_=0;_<$;_++)this.h.h=!0,h+=this.h.i.decode(A[_],{stream:!(X&&_==$-1)});A.length=0,this.h.g+=h,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=200==I,function OZ(h,_,I,A,$,X,we){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+$+"]: "+_+"\n"+I+"\n"+X+" "+we})}(this.i,this.u,this.A,this.l,this.R,Yr,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Kt,Sr=this.g;if((Kt=Sr.g?Sr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Kt)){var Mt=Kt;break t}}Mt=null}if(!(I=Mt)){this.o=!1,this.s=3,fi(12),Cc(this),Ng(this);break e}dh(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$0(this,I)}if(this.P){let Is;for(I=!0;!this.J&&this.C<we.length;){if(Is=FZ(this,we),Is==U0){4==Yr&&(this.s=4,fi(14),I=!1),dh(this.i,this.l,null,"[Incomplete Response]");break}if(Is==nU){this.s=4,fi(15),dh(this.i,this.l,we,"[Invalid Chunk]"),I=!1;break}dh(this.i,this.l,Is,null),$0(this,Is)}if(iU(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Yr||0!=we.length||this.h.h||(this.s=1,fi(16),I=!1),this.o=this.o&&I,I){if(0<we.length&&!this.W){this.W=!0;var Qr=this.j;Qr.g==this&&Qr.ba&&!Qr.M&&(Qr.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),K0(Qr),Qr.M=!0,fi(11))}}else dh(this.i,this.l,we,"[Invalid Chunked Response]"),Cc(this),Ng(this)}else dh(this.i,this.l,we,null),$0(this,we);4==Yr&&Cc(this),this.o&&!this.J&&(4==Yr?MU(this.j,this):(this.o=!1,lI(this)))}else(function eX(h){const _={};h=(h.g&&2<=Ko(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let A=0;A<h.length;A++){if(F(h[A]))continue;var I=j(h[A]);const $=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const X=_[$]||[];_[$]=X,X.push(I)}!function V(h,_){for(const I in h)_.call(void 0,h[I],I,h)}(_,function(A){return A.join(", ")})})(this.g),400==I&&0<we.indexOf("Unknown SID")?(this.s=3,fi(12)):(this.s=0,fi(13)),Cc(this),Ng(this)}}}catch{}},tu.prototype.cancel=function(){this.J=!0,Cc(this)},tu.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function kZ(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(Pg(),fi(17)),Cc(this),this.s=2,Ng(this)):sU(this,this.S-h)},oU.prototype.cancel=function(){if(this.i=lU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var hU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dc(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Dc){this.h=h.h,dI(this,h.j),this.o=h.o,this.g=h.g,hI(this,h.s),this.l=h.l;var _=h.i,I=new Vg;I.i=_.i,_.g&&(I.g=new Map(_.g),I.h=_.h),fU(this,I),this.m=h.m}else h&&(_=String(h).match(hU))?(this.h=!1,dI(this,_[1]||"",!0),this.o=Og(_[2]||""),this.g=Og(_[3]||"",!0),hI(this,_[4]),this.l=Og(_[5]||"",!0),fU(this,_[6]||"",!0),this.m=Og(_[7]||"")):(this.h=!1,this.i=new Vg(null,this.h))}function Wo(h){return new Dc(h)}function dI(h,_,I){h.j=I?Og(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function hI(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function fU(h,_,I){_ instanceof Vg?(h.i=_,function WZ(h,_){_&&!h.j&&(nu(h),h.i=null,h.g.forEach(function(I,A){var $=A.toLowerCase();A!=$&&(gU(this,A),_U(this,$,I))},h)),h.j=_}(h.i,h.h)):(I||(_=kg(_,qZ)),h.i=new Vg(_,h.h))}function pn(h,_,I){h.i.set(_,I)}function fI(h){return pn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Og(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function kg(h,_,I){return"string"==typeof h?(h=encodeURI(h).replace(_,$Z),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function $Z(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}Dc.prototype.toString=function(){var h=[],_=this.j;_&&h.push(kg(_,pU,!0),":");var I=this.g;return(I||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(kg(_,pU,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&h.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&h.push("/"),h.push(kg(I,"/"==I.charAt(0)?zZ:HZ,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",kg(I,GZ)),h.join("")};var h,pU=/[#\/\?@]/g,HZ=/[#\?:]/g,zZ=/[#\?]/g,qZ=/[#\?@]/g,GZ=/#/g;function Vg(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function nu(h){h.g||(h.g=new Map,h.h=0,h.i&&function jZ(h,_){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var A=h[I].indexOf("="),$=null;if(0<=A){var X=h[I].substring(0,A);$=h[I].substring(A+1)}else X=h[I];_(X,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}(h.i,function(_,I){h.add(decodeURIComponent(_.replace(/\+/g," ")),I)}))}function gU(h,_){nu(h),_=hh(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function mU(h,_){return nu(h),_=hh(h,_),h.g.has(_)}function _U(h,_,I){gU(h,_),0<I.length&&(h.i=null,h.g.set(hh(h,_),D(I)),h.h+=I.length)}function hh(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function ru(h,_,I,A,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),A(I)}catch{}}function YZ(){this.g=new xZ}function JZ(h,_,I){const A=I||"";try{dU(h,function($,X){let we=$;d($)&&(we=O0($)),_.push(A+X+"="+encodeURIComponent(we))})}catch($){throw _.push(A+"type="+encodeURIComponent("_badmap")),$}}function Fg(h){this.l=h.Ub||null,this.j=h.eb||!1}function pI(h,_){Kr.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function yU(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Lg(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ug(h)}function Ug(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function vU(h){let _="";return Le(h,function(I,A){_+=A,_+=":",_+=I,_+="\r\n"}),_}function q0(h,_,I){e:{for(A in I){var A=!1;break e}A=!0}A||(I=vU(I),"string"==typeof h?null!=I&&encodeURIComponent(String(I)):pn(h,_,I))}function Vn(h){Kr.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Vg.prototype).add=function(h,_){nu(this),this.i=null,h=hh(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(_),this.h+=1,this},n.forEach=function(h,_){nu(this),this.g.forEach(function(I,A){I.forEach(function($){h.call(_,$,A,this)},this)},this)},n.na=function(){nu(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),I=[];for(let A=0;A<_.length;A++){const $=h[A];for(let X=0;X<$.length;X++)I.push(_[A])}return I},n.V=function(h){nu(this);let _=[];if("string"==typeof h)mU(this,h)&&(_=_.concat(this.g.get(hh(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)_=_.concat(h[I])}return _},n.set=function(h,_){return nu(this),this.i=null,mU(this,h=hh(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var I=0;I<_.length;I++){var A=_[I];const X=encodeURIComponent(String(A)),we=this.V(A);for(A=0;A<we.length;A++){var $=X;""!==we[A]&&($+="="+encodeURIComponent(String(we[A]))),h.push($)}}return this.i=h.join("&")},T(Fg,k0),Fg.prototype.g=function(){return new pI(this.l,this.j)},Fg.prototype.i=(h={},function(){return h}),T(pI,Kr),(n=pI.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Ug(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lg(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ug(this)),this.g&&(this.readyState=3,Ug(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yU(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Lg(this):Ug(this),3==this.readyState&&yU(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Lg(this))},n.Qa=function(h){this.g&&(this.response=h,Lg(this))},n.ga=function(){this.g&&Lg(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var I=_.next();!I.done;)h.push((I=I.value)[0]+": "+I[1]),I=_.next();return h.join("\r\n")},Object.defineProperty(pI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),T(Vn,Kr);var ZZ=/^https?$/i,XZ=["POST","PUT"];function IU(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,EU(h),gI(h)}function EU(h){h.A||(h.A=!0,hi(h,"complete"),hi(h,"error"))}function wU(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=Ko(h)||2!=h.Z()))if(h.u&&4==Ko(h))z2(h.Ea,0,h);else if(hi(h,"readystatechange"),4==Ko(h)){h.h=!1;try{const we=h.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var I;if(!(I=_)){var A;if(A=0===we){var $=String(h.D).match(hU)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),A=!ZZ.test($?$.toLowerCase():"")}I=A}if(I)hi(h,"complete"),hi(h,"success");else{h.m=6;try{var X=2<Ko(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",EU(h)}}finally{gI(h)}}}function gI(h,_){if(h.g){AU(h);const I=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||hi(h,"ready");try{I.onreadystatechange=A}catch{}}}function AU(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function Ko(h){return h.g?h.g.readyState:0}function TU(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Bg(h,_,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||_}function CU(h){this.Aa=0,this.i=[],this.j=new xg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bg("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bg("baseRetryDelayMs",5e3,h),this.cb=Bg("retryDelaySeedMs",1e4,h),this.Wa=Bg("forwardChannelMaxRetries",2,h),this.wa=Bg("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new oU(h&&h.concurrentRequestLimit),this.Da=new YZ,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function G0(h){if(DU(h),3==h.G){var _=h.U++,I=Wo(h.I);if(pn(I,"SID",h.K),pn(I,"RID",_),pn(I,"TYPE","terminate"),jg(h,I),(_=new tu(h,h.j,_)).L=2,_.v=fI(Wo(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=_.v,I=!0),I||(_.g=kU(_.j,null),_.g.ea(_.v)),_.F=Date.now(),lI(_)}NU(h)}function mI(h){h.g&&(K0(h),h.g.cancel(),h.g=null)}function DU(h){mI(h),h.u&&(a.clearTimeout(h.u),h.u=null),yI(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function _I(h){if(!aU(h.h)&&!h.s){h.s=!0;var _=h.Ga;Tg||L2(),Cg||(Tg(),Cg=!0),C0.add(_,h),h.B=0}}function bU(h,_){var I;I=_?_.l:h.U++;const A=Wo(h.I);pn(A,"SID",h.K),pn(A,"RID",I),pn(A,"AID",h.T),jg(h,A),h.m&&h.o&&q0(A,h.m,h.o),I=new tu(h,h.j,I,h.B+1),null===h.m&&(I.H=h.o),_&&(h.i=_.D.concat(h.i)),_=SU(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),z0(h.h,I),B0(I,A,_)}function jg(h,_){h.H&&Le(h.H,function(I,A){pn(_,A,I)}),h.l&&dU({},function(I,A){pn(_,A,I)})}function SU(h,_,I){I=Math.min(h.i.length,I);var A=h.l?v(h.l.Na,h.l,h):null;e:{var $=h.i;let X=-1;for(;;){const we=["count="+I];-1==X?0<I?(X=$[0].g,we.push("ofs="+X)):X=0:we.push("ofs="+X);let Kt=!0;for(let Sr=0;Sr<I;Sr++){let Mt=$[Sr].g;const Qr=$[Sr].map;if(Mt-=X,0>Mt)X=Math.max(0,$[Sr].g-100),Kt=!1;else try{JZ(Qr,we,"req"+Mt+"_")}catch{A&&A(Qr)}}if(Kt){A=we.join("&");break e}}}return h=h.i.splice(0,I),_.D=h,A}function RU(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Tg||L2(),Cg||(Tg(),Cg=!0),C0.add(_,h),h.v=0}}function W0(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Mg(v(h.Fa,h),xU(h,h.v)),h.v++,0))}function K0(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function PU(h){h.g=new tu(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=Wo(h.qa);pn(_,"RID","rpc"),pn(_,"SID",h.K),pn(_,"AID",h.T),pn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&pn(_,"TO",h.ja),pn(_,"TYPE","xmlhttp"),jg(h,_),h.m&&h.o&&q0(_,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=fI(Wo(_)),I.m=null,I.P=!0,rU(I,h)}function yI(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function MU(h,_){var I=null;if(h.g==_){yI(h),K0(h),h.g=null;var A=2}else{if(!H0(h.h,_))return;I=_.D,cU(h.h,_),A=1}if(0!=h.G)if(_.o)if(1==A){I=_.m?_.m.length:0,_=Date.now()-_.F;var $=h.B;hi(A=aI(),new X2(A,I)),_I(h)}else RU(h);else if(3==($=_.s)||0==$&&0<_.X||!(1==A&&function tX(h,_){return!(uU(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Mg(v(h.Ga,h,_),xU(h,h.B)),h.B++,0)))}(h,_)||2==A&&W0(h)))switch(I&&0<I.length&&(_=h.h,_.i=_.i.concat(I)),$){case 1:bc(h,5);break;case 4:bc(h,10);break;case 3:bc(h,6);break;default:bc(h,2)}}function xU(h,_){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*_}function bc(h,_){if(h.j.info("Error code "+_),2==_){var I=v(h.fb,h),A=h.Xa;const $=!A;A=new Dc(A||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||dI(A,"https"),fI(A),$?function KZ(h,_){const I=new xg;if(a.Image){const A=new Image;A.onload=w(ru,I,"TestLoadImage: loaded",!0,_,A),A.onerror=w(ru,I,"TestLoadImage: error",!1,_,A),A.onabort=w(ru,I,"TestLoadImage: abort",!1,_,A),A.ontimeout=w(ru,I,"TestLoadImage: timeout",!1,_,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}(A.toString(),I):function QZ(h,_){new xg;const A=new AbortController,$=setTimeout(()=>{A.abort(),ru(0,0,!1,_)},1e4);fetch(h,{signal:A.signal}).then(X=>{clearTimeout($),ru(0,0,!!X.ok,_)}).catch(()=>{clearTimeout($),ru(0,0,!1,_)})}(A.toString(),I)}else fi(2);h.G=0,h.l&&h.l.sa(_),NU(h),DU(h)}function NU(h){if(h.G=0,h.ka=[],h.l){const _=lU(h.h);(0!=_.length||0!=h.i.length)&&(M(h.ka,_),M(h.ka,h.i),h.h.i.length=0,D(h.i),h.i.length=0),h.l.ra()}}function OU(h,_,I){var A=I instanceof Dc?Wo(I):new Dc(I);if(""!=A.g)_&&(A.g=_+"."+A.g),hI(A,A.s);else{var $=a.location;A=$.protocol,_=_?_+"."+$.hostname:$.hostname,$=+$.port;var X=new Dc(null);A&&dI(X,A),_&&(X.g=_),$&&hI(X,$),I&&(X.l=I),A=X}return _=h.ya,(I=h.D)&&_&&pn(A,I,_),pn(A,"VER",h.la),jg(h,A),A}function kU(h,_,I){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Vn(h.Ca&&!h.pa?new Fg({eb:I}):h.pa)).Ha(h.J),_}function VU(){}function vI(){}function $i(h,_){Kr.call(this),this.g=new CU(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!F(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!F(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new fh(this)}function FU(h){V0.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const I in _){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function LU(){F0.call(this),this.status=1}function fh(h){this.g=h}(n=Vn.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,I,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():L0.g(),this.v=function K2(h){return h.h||(h.h=h.i())}(this.o?this.o:L0),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(X){return void IU(this,X)}if(h=I||"",I=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var $ in A)I.set($,A[$]);else{if("function"!=typeof A.keys||"function"!=typeof A.get)throw Error("Unknown input type for opt_headers: "+String(A));for(const X of A.keys())I.set(X,A.get(X))}A=Array.from(I.keys()).find(X=>"content-type"==X.toLowerCase()),$=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(XZ,_,void 0))||A||$||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,we]of I)this.g.setRequestHeader(X,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{AU(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){IU(this,X)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,hi(this,"complete"),hi(this,"abort"),gI(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gI(this,!0)),Vn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?wU(this):this.bb())},n.bb=function(){wU(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Ko(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),MZ(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=CU.prototype).la=8,n.G=1,n.connect=function(h,_,I,A){fi(0),this.W=h,this.H=_||{},I&&void 0!==A&&(this.H.OSID=I,this.H.OAID=A),this.F=this.X,this.I=OU(this,null,this.W),_I(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const $=new tu(this,this.j,h);let X=this.o;if(this.S&&(X?(X=b(X),L(X,this.S)):X=this.S),null!==this.m||this.O||($.H=X,X=null),this.P)e:{for(var _=0,I=0;I<this.i.length;I++){var A=this.i[I];if(void 0===(A="__data__"in A.map&&"string"==typeof(A=A.map.__data__)?A.length:void 0))break;if(4096<(_+=A)){_=I;break e}if(4096===_||I===this.i.length-1){_=I+1;break e}}_=1e3}else _=1e3;_=SU(this,$,_),pn(I=Wo(this.I),"RID",h),pn(I,"CVER",22),this.D&&pn(I,"X-HTTP-Session-Id",this.D),jg(this,I),X&&(this.O?_="headers="+encodeURIComponent(String(vU(X)))+"&"+_:this.m&&q0(I,this.m,X)),z0(this.h,$),this.Ua&&pn(I,"TYPE","init"),this.P?(pn(I,"$req",_),pn(I,"SID","null"),$.T=!0,B0($,I,null)):B0($,I,_),this.G=2}}else 3==this.G&&(h?bU(this,h):0==this.i.length||aU(this.h)||bU(this))},n.Fa=function(){if(this.u=null,PU(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Mg(v(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fi(10),mI(this),PU(this))},n.Za=function(){null!=this.C&&(this.C=null,mI(this),W0(this),fi(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),fi(2)):(this.j.info("Failed to ping google.com"),fi(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=VU.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},vI.prototype.g=function(h,_){return new $i(h,_)},T($i,Kr),$i.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$i.prototype.close=function(){G0(this.g)},$i.prototype.o=function(h){var _=this.g;if("string"==typeof h){var I={};I.__data__=h,h=I}else this.u&&((I={}).__data__=O0(h),h=I);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&_I(_)},$i.prototype.N=function(){this.g.l=null,delete this.j,G0(this.g),delete this.g,$i.aa.N.call(this)},T(FU,V0),T(LU,F0),T(fh,VU),fh.prototype.ua=function(){hi(this.g,"a")},fh.prototype.ta=function(h){hi(this.g,new FU(h))},fh.prototype.sa=function(h){hi(this.g,new LU)},fh.prototype.ra=function(){hi(this.g,"b")},vI.prototype.createWebChannel=vI.prototype.g,$i.prototype.send=$i.prototype.o,$i.prototype.open=$i.prototype.m,$i.prototype.close=$i.prototype.close,I1=Vo.createWebChannelTransport=function(){return new vI},v1=Vo.getStatEventTarget=function(){return aI()},y1=Vo.Event=Tc,DT=Vo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uI.NO_ERROR=0,uI.TIMEOUT=8,uI.HTTP_ERROR=6,jy=Vo.ErrorCode=uI,eU.COMPLETE="complete",_1=Vo.EventType=eU,Q2.EventType=Rg,Rg.OPEN="a",Rg.CLOSE="b",Rg.ERROR="c",Rg.MESSAGE="d",Kr.prototype.listen=Kr.prototype.K,Rp=Vo.WebChannel=Q2,Vo.FetchXmlHttpFactory=Fg,Vn.prototype.listenOnce=Vn.prototype.L,Vn.prototype.getLastError=Vn.prototype.Ka,Vn.prototype.getLastErrorCode=Vn.prototype.Ba,Vn.prototype.getStatus=Vn.prototype.Z,Vn.prototype.getResponseJson=Vn.prototype.Oa,Vn.prototype.getResponseText=Vn.prototype.oa,Vn.prototype.send=Vn.prototype.ea,Vn.prototype.setWithCredentials=Vn.prototype.Ha,m1=Vo.XhrIo=Vn}).apply(typeof By<"u"?By:typeof self<"u"?self:typeof window<"u"?window:{});const E1="@firebase/firestore";class fr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");let Ad="10.14.0";const Pa=new Hs.Vy("@firebase/firestore");function Td(){return Pa.logLevel}function he(n,...e){if(Pa.logLevel<=Hs.$b.DEBUG){const t=e.map(bT);Pa.debug(`Firestore (${Ad}): ${n}`,...t)}}function jn(n,...e){if(Pa.logLevel<=Hs.$b.ERROR){const t=e.map(bT);Pa.error(`Firestore (${Ad}): ${n}`,...t)}}function Ui(n,...e){if(Pa.logLevel<=Hs.$b.WARN){const t=e.map(bT);Pa.warn(`Firestore (${Ad}): ${n}`,...t)}}function bT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function xe(n="Unexpected state"){const e=`FIRESTORE (${Ad}) INTERNAL ASSERTION FAILED: `+n;throw jn(e),new Error(e)}function Ve(n,e){n||xe()}function Ee(n,e){return n}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends kt.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class w1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fr.UNAUTHENTICATED))}shutdown(){}}class dW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class hW{constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;Ve(void 0===this.o);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,ie.A)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve("string"==typeof r.accessToken),new w1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(null===e||"string"==typeof e),new fr(e)}}class fW{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pW{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new fW(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gW{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ve(void 0===this.o);const r=s=>{null!=s.error&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ve("string"==typeof t.token),this.R=t.token,new A1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function mW(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class T1{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=mW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function et(n,e){return n<e?-1:n>e?1:0}function Cd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function C1(n){return n+"\0"}class _n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _n.fromMillis(Date.now())}static fromDate(e){return _n.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new _n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new _n(0,0))}static max(){return new Ue(new _n(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pp{constructor(e,t,r){void 0===t?t=0:t>e.length&&xe(),void 0===r?r=e.length-t:r>e.length-t&&xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Pp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Et extends Pp{construct(e,t,r){return new Et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Et(t)}static emptyPath(){return new Et([])}}const _W=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Pp{construct(e,t,r){return new dn(e,t,r)}static isValidIdentifier(e){return _W.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new dn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(t)}static emptyPath(){return new dn([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(Et.fromString(e))}static fromName(e){return new Te(Et.fromString(e).popFirst(5))}static empty(){return new Te(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Et.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new Et(e.slice()))}}class Dd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function ST(n){return n.fields.find(e=>2===e.kind)}function ec(n){return n.fields.filter(e=>2!==e.kind)}Dd.UNKNOWN_ID=-1;class tc{constructor(e,t){this.fieldPath=e,this.kind=t}}class bd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bd(0,Bi.min())}}function D1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ue.fromTimestamp(1e9===r?new _n(t+1,0):new _n(t,r));return new Bi(i,Te.empty(),e)}function b1(n){return new Bi(n.readTime,n.key,-1)}class Bi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Bi(Ue.min(),Te.empty(),-1)}static max(){return new Bi(Ue.max(),Te.empty(),-1)}}function RT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Te.comparator(n.documentKey,e.documentKey),0!==t?t:et(n.largestBatchId,e.largestBatchId))}const S1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ma(n){return PT.apply(this,arguments)}function PT(){return(PT=(0,ie.A)(function*(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==S1)throw n;he("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):H.reject(t)}static resolve(e){return new H((t,r)=>{t(e)})}static reject(e){return new H((t,r)=>{r(e)})}static waitFor(e){return new H((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=H.resolve(!1);for(const r of e)t=t.next(i=>i?H.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new H((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;t(e[d]).next(g=>{o[d]=g,++a,a===s&&r(o)},g=>i(g))}})}static doWhile(e,t){return new H((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class $y{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new pr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Mp(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=MT(r.target.error);this.V.reject(new Mp(e,i))}}static open(e,t,r,i){try{return new $y(t,e.transaction(i,r))}catch(s){throw new Mp(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(he("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new EW(t)}}class zs{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===zs.S((0,kt.ZQ)())&&jn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return he("SimpleDb","Removing database:",e),nc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,kt.zW)())return!1;if(zs.v())return!0;const e=(0,kt.ZQ)(),t=zs.S(e),r=0<t&&t<10,i=P1(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ie.A)(function*(){return t.db||(he("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Mp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new ce(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ce(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Mp(e,a))},s.onupgradeneeded=o=>{he("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{he("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ie.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=$y.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(g=>(u.g(),g)).catch(g=>(u.abort(g),H.reject(g))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,g="FirebaseError"!==d.name&&a<3;if(he("SimpleDb","Transaction failed with error:",d.message,"Retrying:",g),s.close(),!g)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function P1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class IW{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return nc(this.B.delete())}}class Mp extends ce{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xa(n){return"IndexedDbTransactionError"===n.name}class EW{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(he("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(he("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),nc(r)}add(e){return he("SimpleDb","ADD",this.store.name,e,e),nc(this.store.add(e))}get(e){return nc(this.store.get(e)).next(t=>(void 0===t&&(t=null),he("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return he("SimpleDb","DELETE",this.store.name,e),nc(this.store.delete(e))}count(){return he("SimpleDb","COUNT",this.store.name),nc(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new H((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new H((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){he("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new H((r,i)=>{t.onerror=s=>{const o=MT(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new H((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new IW(a),d=t(a.primaryKey,a.value,u);if(d instanceof H){const g=d.catch(m=>(u.done(),H.reject(m)));r.push(g)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>H.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function nc(n){return new H((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=MT(r.target.error);t(i)}})}let M1=!1;function MT(n){const e=zs.S((0,kt.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return M1||(M1=!0,setTimeout(()=>{throw r},0)),r}}return n}class wW{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;he("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ie.A)(function*(){t.task=null;try{he("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){xa(r)?he("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Ma(r)}yield t.X(6e4)}))}}class AW{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ie.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return H.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return he("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(he("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=b1(s);RT(o,r)>0&&(r=o)}),new Bi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ji=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function xp(n){return null==n}function Np(n){return 0===n&&1/n==-1/0}function x1(n){return"number"==typeof n&&Number.isInteger(n)&&!Np(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function $r(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=N1(e)),e=TW(n.get(t),e);return N1(e)}function TW(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function N1(n){return n+"\x01\x01"}function qs(n){const e=n.length;if(Ve(e>=2),2===e)return Ve("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Et.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&xe(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:xe()}s=o+2}return new Et(r)}const O1=["userId","batchId"];function Hy(n,e){return[n,$r(e)]}function k1(n,e,t){return[n,$r(e),t]}const CW={},DW=["prefixPath","collectionGroup","readTime","documentId"],bW=["prefixPath","collectionGroup","documentId"],SW=["collectionGroup","readTime","prefixPath","documentId"],RW=["canonicalId","targetId"],PW=["targetId","path"],MW=["path","targetId"],xW=["collectionId","parent"],NW=["indexId","uid"],OW=["uid","sequenceNumber"],kW=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],VW=["indexId","uid","orderedDocumentKey"],FW=["userId","collectionPath","documentId"],LW=["userId","collectionPath","largestBatchId"],UW=["userId","collectionGroup","largestBatchId"],V1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],BW=[...V1,"documentOverlays"],F1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],L1=F1,xT=[...L1,"indexConfiguration","indexState","indexEntries"],jW=xT,$W=[...xT,"globals"];class NT extends R1{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function sr(n,e){const t=Ee(n);return zs.F(t._e,e)}function U1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Na(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function j1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class sn{constructor(e,t){this.comparator=e,this.root=t||Cr.EMPTY}insert(e,t){return new sn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cr.BLACK,null,null))}remove(e){return new sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zy(this.root,e,this.comparator,!1)}getReverseIterator(){return new zy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zy(this.root,e,this.comparator,!0)}}class zy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Cr.RED,this.left=i??Cr.EMPTY,this.right=s??Cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Cr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Cr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Cr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}Cr.EMPTY=null,Cr.RED=!0,Cr.BLACK=!1,Cr.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Cr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zt{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $1(this.data.getIterator())}getIteratorFrom(e){return new $1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zt(this.comparator);return t.data=e,t}}class $1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Sd(n){return n.hasNext()?n.getNext():void 0}class Ti{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new Ti([])}unionWith(e){let t=new zt(dn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class H1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new H1("Invalid base64 string: "+s):s}}(e);return new kn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const zW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fo(n){if(Ve(!!n),"string"==typeof n){let e=0;const t=zW.exec(n);if(Ve(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yn(n.seconds),nanos:yn(n.nanos)}}function yn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Lo(n){return"string"==typeof n?kn.fromBase64String(n):kn.fromUint8Array(n)}function qy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Gy(n){const e=n.mapValue.fields.__previous_value__;return qy(e)?Gy(e):e}function Op(n){const e=Fo(n.mapValue.fields.__local_write_time__.timestampValue);return new _n(e.seconds,e.nanos)}class qW{constructor(e,t,r,i,s,o,a,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class Oa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Oa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Oa&&e.projectId===this.projectId&&e.database===this.database}}const ka={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wy={nullValue:"NULL_VALUE"};function Va(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qy(n)?4:K1(n)?9007199254740991:Yy(n)?10:11:xe()}function Gs(n,e){if(n===e)return!0;const t=Va(n);if(t!==Va(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Op(n).isEqual(Op(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Fo(i.timestampValue),a=Fo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Lo(n.bytesValue).isEqual(Lo(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return yn(i.geoPointValue.latitude)===yn(s.geoPointValue.latitude)&&yn(i.geoPointValue.longitude)===yn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return yn(i.integerValue)===yn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=yn(i.doubleValue),a=yn(s.doubleValue);return o===a?Np(o)===Np(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Cd(n.arrayValue.values||[],e.arrayValue.values||[],Gs);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(U1(o)!==U1(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Gs(o[u],a[u])))return!1;return!0}(n,e);default:return xe()}var s}function kp(n,e){return void 0!==(n.values||[]).find(t=>Gs(t,e))}function Fa(n,e){if(n===e)return 0;const t=Va(n),r=Va(e);if(t!==r)return et(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return et(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=yn(s.integerValue||s.doubleValue),u=yn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return z1(n.timestampValue,e.timestampValue);case 4:return z1(Op(n),Op(e));case 5:return et(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Lo(s),u=Lo(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const g=et(a[d],u[d]);if(0!==g)return g}return et(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=et(yn(s.latitude),yn(o.latitude));return 0!==a?a:et(yn(s.longitude),yn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return q1(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,d,g;const w=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,T=null===(u=(o.fields||{}).value)||void 0===u?void 0:u.arrayValue,D=et((null===(d=w?.values)||void 0===d?void 0:d.length)||0,(null===(g=T?.values)||void 0===g?void 0:g.length)||0);return 0!==D?D:q1(w,T)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===ka.mapValue&&o===ka.mapValue)return 0;if(s===ka.mapValue)return 1;if(o===ka.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},g=Object.keys(d);u.sort(),g.sort();for(let m=0;m<u.length&&m<g.length;++m){const v=et(u[m],g[m]);if(0!==v)return v;const w=Fa(a[u[m]],d[g[m]]);if(0!==w)return w}return et(u.length,g.length)}(n.mapValue,e.mapValue);default:throw xe()}}function z1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return et(n,e);const t=Fo(n),r=Fo(e),i=et(t.seconds,r.seconds);return 0!==i?i:et(t.nanos,r.nanos)}function q1(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Fa(t[i],r[i]);if(s)return s}return et(t.length,r.length)}function Rd(n){return OT(n)}function OT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Fo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Lo(n.bytesValue).toBase64():"referenceValue"in n?Te.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=OT(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${OT(t.fields[o])}`;return i+"}"}(n.mapValue):xe()}function rc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kT(n){return!!n&&"integerValue"in n}function Vp(n){return!!n&&"arrayValue"in n}function G1(n){return!!n&&"nullValue"in n}function W1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qy(n){return!!n&&"mapValue"in n}function Yy(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Fp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Na(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function K1(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const Q1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function GW(n){return"nullValue"in n?Wy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?rc(Oa.empty(),Te.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Yy(n)?Q1:{mapValue:{}}:xe()}function WW(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?rc(Oa.empty(),Te.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Q1:"mapValue"in n?Yy(n)?{mapValue:{}}:ka:xe()}function Y1(n,e){const t=Fa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function J1(n,e){const t=Fa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Dr{constructor(e){this.value=e}static empty(){return new Dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fp(t)}setAll(e){let t=dn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Fp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Qy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Qy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Na(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Dr(Fp(this.value))}}function Z1(n){const e=[];return Na(n.fields,(t,r)=>{const i=new dn([t]);if(Qy(r)){const s=Z1(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ti(e)}class hn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new hn(e,0,Ue.min(),Ue.min(),Ue.min(),Dr.empty(),0)}static newFoundDocument(e,t,r,i){return new hn(e,1,t,Ue.min(),r,i,0)}static newNoDocument(e,t){return new hn(e,2,t,Ue.min(),Ue.min(),Dr.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,Ue.min(),Ue.min(),Dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class La{constructor(e,t){this.position=e,this.inclusive=t}}function X1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Te.comparator(Te.fromName(o.referenceValue),t.key):Fa(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ek(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gs(n.position[t],e.position[t]))return!1;return!0}class Lp{constructor(e,t="asc"){this.field=e,this.dir=t}}function KW(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class tk{}class wt extends tk{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new QW(e,t,r):"array-contains"===t?new ZW(e,r):"in"===t?new ak(e,r):"not-in"===t?new XW(e,r):"array-contains-any"===t?new e7(e,r):new wt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new YW(e,r):new JW(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Fa(t,this.value)):null!==t&&Va(this.value)===Va(t)&&this.matchesComparison(Fa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jt extends tk{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new jt(e,t)}matches(e){return Pd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Pd(n){return"and"===n.op}function VT(n){return"or"===n.op}function FT(n){return nk(n)&&Pd(n)}function nk(n){for(const e of n.filters)if(e instanceof jt)return!1;return!0}function LT(n){if(n instanceof wt)return n.field.canonicalString()+n.op.toString()+Rd(n.value);if(FT(n))return n.filters.map(e=>LT(e)).join(",");{const e=n.filters.map(t=>LT(t)).join(",");return`${n.op}(${e})`}}function rk(n,e){return n instanceof wt?(r=n,(i=e)instanceof wt&&r.op===i.op&&r.field.isEqual(i.field)&&Gs(r.value,i.value)):n instanceof jt?function(r,i){return i instanceof jt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&rk(o,i.filters[a]),!0)}(n,e):void xe();var r,i}function ik(n,e){const t=n.filters.concat(e);return jt.create(t,n.op)}function sk(n){return n instanceof wt?`${(t=n).field.canonicalString()} ${t.op} ${Rd(t.value)}`:n instanceof jt?function(t){return t.op.toString()+" {"+t.getFilters().map(sk).join(" ,")+"}"}(n):"Filter";var t}class QW extends wt{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class YW extends wt{constructor(e,t){super(e,"in",t),this.keys=ok(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JW extends wt{constructor(e,t){super(e,"not-in",t),this.keys=ok(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ok(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Te.fromName(r.referenceValue))}class ZW extends wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vp(t)&&kp(t.arrayValue,this.value)}}class ak extends wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&kp(this.value.arrayValue,t)}}class XW extends wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(kp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!kp(this.value.arrayValue,t)}}class e7 extends wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>kp(this.value.arrayValue,r))}}class t7{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function UT(n,e=null,t=[],r=[],i=null,s=null,o=null){return new t7(n,e,t,r,i,s,o)}function ic(n){const e=Ee(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>LT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),xp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rd(r)).join(",")),e.ue=t}return e.ue}function Up(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!KW(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ek(n.startAt,e.startAt)&&ek(n.endAt,e.endAt)}function Jy(n){return Te.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Zy(n,e){return n.filters.filter(t=>t instanceof wt&&t.field.isEqual(e))}function uk(n,e,t){let r=Wy,i=!0;for(const s of Zy(n,e)){let o=Wy,a=!0;switch(s.op){case"<":case"<=":o=GW(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Wy}Y1({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Y1({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function ck(n,e,t){let r=ka,i=!0;for(const s of Zy(n,e)){let o=ka,a=!0;switch(s.op){case">=":case">":o=WW(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ka}J1({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];J1({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Uo{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function lk(n,e,t,r,i,s,o,a){return new Uo(n,e,t,r,i,s,o,a)}function Md(n){return new Uo(n)}function dk(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function BT(n){return null!==n.collectionGroup}function xd(n){const e=Ee(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new zt(dn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Lp(s,r))}),t.has(dn.keyField().canonicalString())||e.ce.push(new Lp(dn.keyField(),r))}return e.ce}function Hr(n){const e=Ee(n);return e.le||(e.le=function fk(n,e){if("F"===n.limitType)return UT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Lp(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new La(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new La(n.startAt.position,n.startAt.inclusive):null;return UT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,xd(n))),e.le}function jT(n,e){const t=n.filters.concat([e]);return new Uo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Xy(n,e,t){return new Uo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bp(n,e){return Up(Hr(n),Hr(e))&&n.limitType===e.limitType}function pk(n){return`${ic(Hr(n))}|lt:${n.limitType}`}function Nd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>sk(i)).join(", ")}]`),xp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Rd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Rd(i)).join(",")),`Target(${r})`}(Hr(n))}; limitType=${n.limitType})`}function jp(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of xd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const d=X1(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,xd(r),i)||r.endAt&&!function(o,a,u){const d=X1(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,xd(r),i)));var r,i}function gk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mk(n){return(e,t)=>{let r=!1;for(const i of xd(n)){const s=n7(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function n7(n,e,t){const r=n.field.isKeyField()?Te.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?Fa(u,d):xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return xe()}}class Bo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Na(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return j1(this.inner)}size(){return this.innerSize}}const r7=new sn(Te.comparator);function Ci(){return r7}const _k=new sn(Te.comparator);function $p(...n){let e=_k;for(const t of n)e=e.insert(t.key,t);return e}function yk(n){let e=_k;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ws(){return Hp()}function vk(){return Hp()}function Hp(){return new Bo(n=>n.toString(),(n,e)=>n.isEqual(e))}const i7=new sn(Te.comparator),s7=new zt(Te.comparator);function ut(...n){let e=s7;for(const t of n)e=e.add(t);return e}const o7=new zt(et);function $T(){return o7}function HT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Np(e)?"-0":e}}function Ik(n){return{integerValue:""+n}}function Ek(n,e){return x1(e)?Ik(e):HT(n,e)}class ev{constructor(){this._=void 0}}function a7(n,e,t){return n instanceof Od?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&qy(s)&&(s=Gy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof sc?Ak(n,e):n instanceof oc?Tk(n,e):function(i,s){const o=wk(i,s),a=Ck(o)+Ck(i.Pe);return kT(o)&&kT(i.Pe)?Ik(a):HT(i.serializer,a)}(n,e)}function u7(n,e,t){return n instanceof sc?Ak(n,e):n instanceof oc?Tk(n,e):t}function wk(n,e){return n instanceof kd?kT(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Od extends ev{}class sc extends ev{constructor(e){super(),this.elements=e}}function Ak(n,e){const t=Dk(e);for(const r of n.elements)t.some(i=>Gs(i,r))||t.push(r);return{arrayValue:{values:t}}}class oc extends ev{constructor(e){super(),this.elements=e}}function Tk(n,e){let t=Dk(e);for(const r of n.elements)t=t.filter(i=>!Gs(i,r));return{arrayValue:{values:t}}}class kd extends ev{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ck(n){return yn(n.integerValue||n.doubleValue)}function Dk(n){return Vp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class zp{constructor(e,t){this.field=e,this.transform=t}}class l7{constructor(e,t){this.version=e,this.transformResults=t}}class vn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vn}static exists(e){return new vn(void 0,e)}static updateTime(e){return new vn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class nv{}function bk(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Fd(n.key,vn.none()):new Vd(n.key,n.data,vn.none());{const t=n.data,r=Dr.empty();let i=new zt(dn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new jo(n.key,r,new Ti(i.toArray()),vn.none())}}function d7(n,e,t){n instanceof Vd?function(i,s,o){const a=i.value.clone(),u=Pk(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof jo?function(i,s,o){if(!tv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Pk(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Rk(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function qp(n,e,t,r){return n instanceof Vd?function(s,o,a,u){if(!tv(s.precondition,o))return a;const d=s.value.clone(),g=Mk(s.fieldTransforms,u,o);return d.setAll(g),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof jo?function(s,o,a,u){if(!tv(s.precondition,o))return a;const d=Mk(s.fieldTransforms,u,o),g=o.data;return g.setAll(Rk(s)),g.setAll(d),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,tv(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function h7(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=wk(r.transform,i||null);null!=s&&(null===t&&(t=Dr.empty()),t.set(r.field,s))}return t||null}function Sk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Cd(r,i,(s,o)=>function c7(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof sc&&i instanceof sc||r instanceof oc&&i instanceof oc?Cd(r.elements,i.elements,Gs):r instanceof kd&&i instanceof kd?Gs(r.Pe,i.Pe):r instanceof Od&&i instanceof Od);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Vd extends nv{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class jo extends nv{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Rk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Pk(n,e,t){const r=new Map;Ve(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,u7(o,a,t[i]))}return r}function Mk(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,a7(s,o,e))}return r}class Fd extends nv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zT extends nv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&d7(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=qp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=qp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=bk(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Ue.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ut())}isEqual(e){return this.batchId===e.batchId&&Cd(this.mutations,e.mutations,(t,r)=>Sk(t,r))&&Cd(this.baseMutations,e.baseMutations,(t,r)=>Sk(t,r))}}class GT{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ve(e.mutations.length===r.length);let i=i7;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new GT(e,t,r,i)}}class WT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class f7{constructor(e,t){this.count=e,this.unchangedNames=t}}var Kn,Dt;function Nk(n){switch(n){default:return xe();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function Ok(n){if(void 0===n)return jn("GRPC error has no .code"),J.UNKNOWN;switch(n){case Kn.OK:return J.OK;case Kn.CANCELLED:return J.CANCELLED;case Kn.UNKNOWN:return J.UNKNOWN;case Kn.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Kn.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Kn.INTERNAL:return J.INTERNAL;case Kn.UNAVAILABLE:return J.UNAVAILABLE;case Kn.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Kn.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Kn.NOT_FOUND:return J.NOT_FOUND;case Kn.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Kn.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Kn.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Kn.ABORTED:return J.ABORTED;case Kn.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Kn.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Kn.DATA_LOSS:return J.DATA_LOSS;default:return xe()}}(Dt=Kn||(Kn={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";function kk(){return new TextEncoder}const p7=new Xu([4294967295,4294967295],0);function Vk(n){const e=kk().encode(n),t=new g1;return t.update(e),new Uint8Array(t.digest())}function Fk(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xu([t,r],0),new Xu([i,s],0)]}class KT{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Gp(`Invalid padding: ${t}`);if(r<0)throw new Gp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Gp(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Gp(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Xu.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Xu.fromNumber(r)));return 1===i.compare(p7)&&(i=new Xu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Vk(e),[r,i]=Fk(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new KT(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=Vk(e),[r,i]=Fk(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Gp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Kp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wp(Ue.min(),i,new sn(et),Ci(),ut())}}class Kp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Kp(r,t,ut(),ut(),ut())}}class iv{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Lk{constructor(e,t){this.targetId=e,this.me=t}}class Uk{constructor(e,t,r=kn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Bk{constructor(){this.fe=0,this.ge=$k(),this.pe=kn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ut(),t=ut(),r=ut();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:xe()}}),new Kp(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=$k()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class g7{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ci(),this.qe=jk(),this.Qe=new sn(et)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Jy(s))if(0===r){const o=new Te(s.path);this.Ue(t,o,hn.newNoDocument(o,Ue.min()))}else Ve(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Lo(r).toUint8Array()}catch(u){if(u instanceof H1)return Ui("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new KT(o,i,s)}catch(u){return Ui(u instanceof Gp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Jy(a.target)){const u=new Te(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,hn.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ut();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Wp(e,t,this.Qe,this.ke,r);return this.ke=Ci(),this.qe=jk(),this.Qe=new sn(et),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Bk,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new zt(et),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||he("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Bk),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function jk(){return new sn(Te.comparator)}function $k(){return new sn(Te.comparator)}const m7={asc:"ASCENDING",desc:"DESCENDING"},_7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y7={and:"AND",or:"OR"};class v7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function QT(n,e){return n.useProto3Json||xp(e)?e:{value:e}}function Ld(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function I7(n,e){return Ld(n,e.toTimestamp())}function $n(n){return Ve(!!n),Ue.fromTimestamp(function(t){const r=Fo(t);return new _n(r.seconds,r.nanos)}(n))}function YT(n,e){return JT(n,e).canonicalString()}function JT(n,e){const t=(i=n,new Et(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function zk(n){const e=Et.fromString(n);return Ve(tV(e)),e}function Qp(n,e){return YT(n.databaseId,e.path)}function Ks(n,e){const t=zk(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(Wk(t))}function qk(n,e){return YT(n.databaseId,e)}function Gk(n){const e=zk(n);return 4===e.length?Et.emptyPath():Wk(e)}function ZT(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Wk(n){return Ve(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Kk(n,e,t){return{name:Qp(n,e),fields:t.value.mapValue.fields}}function Qk(n,e,t){const r=Ks(n,e.name),i=$n(e.updateTime),s=e.createTime?$n(e.createTime):Ue.min(),o=new Dr({mapValue:{fields:e.fields}}),a=hn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Yp(n,e){let t;if(e instanceof Vd)t={update:Kk(n,e.key,e.value)};else if(e instanceof Fd)t={delete:Qp(n,e.key)};else if(e instanceof jo)t={update:Kk(n,e.key,e.data),updateMask:S7(e.fieldMask)};else{if(!(e instanceof zT))return xe();t={verify:Qp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Od)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof sc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof oc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof kd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:I7(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:xe()),t;var s}function XT(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?vn.updateTime($n(s.updateTime)):void 0!==s.exists?vn.exists(s.exists):vn.none():vn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Ve("REQUEST_TIME"===a.setToServerValue),u=new Od):"appendMissingElements"in a?u=new sc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new oc(a.removeAllFromArray.values||[]):"increment"in a?u=new kd(o,a.increment):xe();const d=dn.fromServerFormat(a.fieldPath);return new zp(d,u)}(n,i)):[];var s;if(e.update){const i=Ks(n,e.update.name),s=new Dr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Ti((e.updateMask.fieldPaths||[]).map(g=>dn.fromServerFormat(g)));return new jo(i,s,o,t,r)}return new Vd(i,s,t,r)}if(e.delete){const i=Ks(n,e.delete);return new Fd(i,t)}if(e.verify){const i=Ks(n,e.verify);return new zT(i,t)}return xe()}function Yk(n,e){return{documents:[qk(n,e.path)]}}function sv(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=qk(n,i);const s=function(d){if(0!==d.length)return eV(jt.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(d){if(0!==d.length)return d.map(g=>{return{field:Ua((v=g).field),direction:C7(v.dir)};var v})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=QT(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i};var d}function Zk(n){let e=Gk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ve(1===r);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=function(m){const v=Xk(m);return v instanceof jt&&FT(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(v=>{return new Lp(Ud((T=v).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let a=null;t.limit&&(a=function(m){let v;return v="object"==typeof m?m.value:m,xp(v)?null:v}(t.limit));let u=null;var m;t.startAt&&(u=new La((m=t.startAt).values||[],!!m.before));let d=null;return t.endAt&&(d=function(m){return new La(m.values||[],!m.before)}(t.endAt)),lk(e,i,o,s,a,"F",u,d)}function Xk(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ud(t.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ud(t.unaryFilter.field);return wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ud(t.unaryFilter.field);return wt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ud(t.unaryFilter.field);return wt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(n):void 0!==n.fieldFilter?wt.create(Ud((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return jt.create(t.compositeFilter.filters.map(r=>Xk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xe()}}(t.compositeFilter.op))}(n):xe();var t}function C7(n){return m7[n]}function D7(n){return _7[n]}function b7(n){return y7[n]}function Ua(n){return{fieldPath:n.canonicalString()}}function Ud(n){return dn.fromServerFormat(n.fieldPath)}function eV(n){return n instanceof wt?function(t){if("=="===t.op){if(W1(t.value))return{unaryFilter:{field:Ua(t.field),op:"IS_NAN"}};if(G1(t.value))return{unaryFilter:{field:Ua(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(W1(t.value))return{unaryFilter:{field:Ua(t.field),op:"IS_NOT_NAN"}};if(G1(t.value))return{unaryFilter:{field:Ua(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ua(t.field),op:D7(t.op),value:t.value}}}(n):n instanceof jt?function(t){const r=t.getFilters().map(i=>eV(i));return 1===r.length?r[0]:{compositeFilter:{op:b7(t.op),filters:r}}}(n):xe()}function S7(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tV(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class $o{constructor(e,t,r,i,s=Ue.min(),o=Ue.min(),a=kn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new $o(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $o(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class nV{constructor(e){this.ct=e}}function rV(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ov(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Qp(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Ld(s,o.version.toTimestamp()),createTime:Ld(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ac(e.version)};else{if(!e.isUnknownDocument())return xe();r.unknownDocument={path:t.path.toArray(),version:ac(e.version)}}var s,o;return r}function ov(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ac(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function uc(n){const e=new _n(n.seconds,n.nanoseconds);return Ue.fromTimestamp(e)}function cc(n,e){const t=(e.baseMutations||[]).map(s=>XT(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>XT(n.ct,s)),i=_n.fromMillis(e.localWriteTimeMs);return new qT(e.batchId,i,t,r)}function Jp(n){const e=uc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?uc(n.lastLimboFreeSnapshotVersion):Ue.min();let r;return r=void 0!==n.query.documents?(Ve(1===(s=n.query).documents.length),Hr(Md(Gk(s.documents[0])))):function(s){return Hr(Zk(s))}(n.query),new $o(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,kn.fromBase64String(n.resumeToken));var s}function iV(n,e){const t=ac(e.snapshotVersion),r=ac(e.lastLimboFreeSnapshotVersion);let i;i=Jy(e.target)?Yk(n.ct,e.target):sv(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ic(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function eC(n){const e=Zk({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Xy(e,e.limit,"L"):e}function tC(n,e){return new WT(e.largestBatchId,XT(n.ct,e.overlayMutation))}function sV(n,e){const t=e.path.lastSegment();return[n,$r(e.path.popLast()),t]}function oV(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ac(r.readTime),documentKey:$r(r.documentKey.path),largestBatchId:r.largestBatchId}}class P7{getBundleMetadata(e,t){return aV(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:uc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return aV(e).put({bundleId:(i=t).id,createTime:ac($n(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return uV(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:eC(s.bundledQuery),readTime:uc(s.readTime)};var s})}saveNamedQuery(e,t){return uV(e).put({name:(i=t).name,readTime:ac($n(i.readTime)),bundledQuery:i.bundledQuery});var i}}function aV(n){return sr(n,"bundles")}function uV(n){return sr(n,"namedQueries")}class av{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new av(e,t.uid||"")}getOverlay(e,t){return Zp(e).get(sV(this.userId,t)).next(r=>r?tC(this.serializer,r):null)}getOverlays(e,t){const r=Ws();return H.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new WT(t,o);i.push(this.ht(e,a))}),H.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add($r(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Zp(e).j("collectionPathOverlayIndex",a))}),H.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Ws(),s=$r(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Zp(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=tC(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Ws();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zp(e).J({index:"collectionGroupOverlayIndex",range:a},(u,d,g)=>{const m=tC(this.serializer,d);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):g.done()}).next(()=>s)}ht(e,t){return Zp(e).put(function(i,s,o){const[a,u,d]=sV(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Yp(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Zp(n){return sr(n,"documentOverlays")}class M7{Pt(e){return sr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?kn.fromUint8Array(r):kn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class lc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(yn(e.integerValue));else if("doubleValue"in e){const r=yn(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Np(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Fo(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Lo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?K1(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Yy(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):xe()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(yn(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Te.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function x7(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function cV(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=x7(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}lc.vt=new lc;class N7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=cV(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=cV(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class O7{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class k7{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Xp{constructor(){this.jt=new N7,this.Ht=new O7(this.jt),this.Jt=new k7(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class dc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new dc(this.indexId,this.documentKey,this.arrayValue,r)}}function Ba(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=lV(n.arrayValue,e.arrayValue),0!==t?t:(t=lV(n.directionalValue,e.directionalValue),0!==t?t:Te.comparator(n.documentKey,e.documentKey)))}function lV(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class dV{constructor(e){this.Xt=new zt((t,r)=>dn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ve(e.collectionGroup===this.collectionId),this.nn)return!1;const t=ST(e);if(void 0!==t&&!this.sn(t))return!1;const r=ec(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new zt(dn.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new tc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new tc(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new tc(r.field,"asc"===r.dir?0:1)));return new Dd(Dd.UNKNOWN_ID,this.collectionId,t,bd.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function hV(n){var e,t;if(Ve(n instanceof wt||n instanceof jt),n instanceof wt){if(n instanceof ak){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>wt.create(n.field,"==",s)))||[];return jt.create(i,"or")}return n}const r=n.filters.map(i=>hV(i));return jt.create(r,n.op)}function V7(n){if(0===n.getFilters().length)return[];const e=iC(hV(n));return Ve(fV(e)),nC(e)||rC(e)?[e]:e.getFilters()}function nC(n){return n instanceof wt}function rC(n){return n instanceof jt&&FT(n)}function fV(n){return nC(n)||rC(n)||function(t){if(t instanceof jt&&VT(t)){for(const r of t.getFilters())if(!nC(r)&&!rC(r))return!1;return!0}return!1}(n)}function iC(n){if(Ve(n instanceof wt||n instanceof jt),n instanceof wt)return n;if(1===n.filters.length)return iC(n.filters[0]);const e=n.filters.map(r=>iC(r));let t=jt.create(e,n.op);return t=uv(t),fV(t)?t:(Ve(t instanceof jt),Ve(Pd(t)),Ve(t.filters.length>1),t.filters.reduce((r,i)=>sC(r,i)))}function sC(n,e){let t;return Ve(n instanceof wt||n instanceof jt),Ve(e instanceof wt||e instanceof jt),t=n instanceof wt?e instanceof wt?jt.create([n,e],"and"):pV(n,e):e instanceof wt?pV(e,n):function(i,s){if(Ve(i.filters.length>0&&s.filters.length>0),Pd(i)&&Pd(s))return ik(i,s.getFilters());const o=VT(i)?i:s,a=VT(i)?s:i,u=o.filters.map(d=>sC(d,a));return jt.create(u,"or")}(n,e),uv(t)}function pV(n,e){if(Pd(e))return ik(e,n.getFilters());{const t=e.filters.map(r=>sC(n,r));return jt.create(t,"or")}}function uv(n){if(Ve(n instanceof wt||n instanceof jt),n instanceof wt)return n;const e=n.getFilters();if(1===e.length)return uv(e[0]);if(nk(n))return n;const t=e.map(i=>uv(i)),r=[];return t.forEach(i=>{i instanceof wt?r.push(i):i instanceof jt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:jt.create(r,n.op)}class F7{constructor(){this.un=new oC}addToCollectionParentIndex(e,t){return this.un.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(Bi.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class oC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new zt(Et.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zt(Et.comparator)).toArray()}}const cv=new Uint8Array(0);class L7{constructor(e,t){this.databaseId=t,this.cn=new oC,this.ln=new Bo(r=>ic(r),(r,i)=>Up(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:$r(i)};return gV(e).put(s)}return H.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[C1(t),""],!1,!0);return gV(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(qs(o.parent))}return r})}addFieldIndex(e,t){const r=eg(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=jd(e);return s.next(a=>{o.put(oV(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=eg(e),i=jd(e),s=Bd(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=eg(e),r=Bd(e),i=jd(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return H.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new dV(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Bd(e);let i=!0;const s=new Map;return H.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ut();const a=[];return H.forEach(s,(u,d)=>{var G;he("IndexedDbIndexManager",`Using index ${G=u,`id=${G.indexId}|cg=${G.collectionGroup}|f=${G.fields.map(ae=>`${ae.fieldPath}:${ae.kind}`).join(",")}`} to execute ${ic(t)}`);const g=function(G,ae){const ye=ST(ae);if(void 0===ye)return null;for(const Le of Zy(G,ye.fieldPath))switch(Le.op){case"array-contains-any":return Le.value.arrayValue.values||[];case"array-contains":return[Le.value]}return null}(d,u),m=function(G,ae){const ye=new Map;for(const Le of ec(ae))for(const V of Zy(G,Le.fieldPath))switch(V.op){case"==":case"in":ye.set(Le.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return ye.set(Le.fieldPath.canonicalString(),V.value),Array.from(ye.values())}return null}(d,u),v=function(G,ae){const ye=[];let Le=!0;for(const V of ec(ae)){const b=0===V.kind?uk(G,V.fieldPath,G.startAt):ck(G,V.fieldPath,G.startAt);ye.push(b.value),Le&&(Le=b.inclusive)}return new La(ye,Le)}(d,u),w=function(G,ae){const ye=[];let Le=!0;for(const V of ec(ae)){const b=0===V.kind?ck(G,V.fieldPath,G.endAt):uk(G,V.fieldPath,G.endAt);ye.push(b.value),Le&&(Le=b.inclusive)}return new La(ye,Le)}(d,u),T=this.In(u,d,v),D=this.In(u,d,w),M=this.Tn(u,d,m),z=this.En(u.indexId,g,T,v.inclusive,D,w.inclusive,M);return H.forEach(z,F=>r.G(F,t.limit).next(G=>{G.forEach(ae=>{const ye=Te.fromSegments(ae.documentKey);o.has(ye)||(o=o.add(ye),a.push(ye))})}))}).next(()=>a)}return H.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:V7(jt.create(e.filters,"and")).map(r=>UT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),d=u/(null!=t?t.length:1),g=[];for(let m=0;m<u;++m){const v=t?this.dn(t[m/d]):cv,w=this.An(e,v,r[m%d],i),T=this.Rn(e,v,s[m%d],o),D=a.map(M=>this.An(e,v,M,!0));g.push(...this.createRange(w,T,D))}return g}An(e,t,r,i){const s=new dc(e,Te.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new dc(e,Te.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new dV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return H.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new zt(dn.comparator),g=!1;for(const m of u.filters)for(const v of m.getFlattenedFilters())v.field.isKeyField()||("array-contains"===v.op||"array-contains-any"===v.op?g=!0:d=d.add(v.field));for(const m of u.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(g?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new Xp;for(const i of ec(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);lc.vt.It(s,o)}return r.zt()}dn(e){const t=new Xp;return lc.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Xp;return lc.vt.It(rc(this.databaseId,t),r.Yt(function(s){const o=ec(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new Xp);let s=0;for(const o of ec(e)){const a=r[s++];for(const u of i)if(this.fn(t,o.fieldPath)&&Vp(a))i=this.gn(i,o,a);else{const d=u.Yt(o.kind);lc.vt.It(a,d)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Xp;u.seed(a.zt()),lc.vt.It(o,u.Yt(t.kind)),s.push(u)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof wt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=eg(e),i=jd(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return H.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(g,m){const v=m?new bd(m.sequenceNumber,new Bi(uc(m.readTime),new Te(qs(m.documentKey)),m.largestBatchId)):bd.empty(),w=g.fields.map(([T,D])=>new tc(dn.fromServerFormat(T),D));return new Dd(g.indexId,g.collectionGroup,w,v)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:et(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=eg(e),s=jd(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>H.forEach(a,u=>s.put(oV(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return H.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?H.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),H.forEach(a,u=>this.wn(e,i,u).next(d=>{const g=this.Sn(s,u);return d.isEqual(g)?H.resolve():this.bn(e,s,u,d,g)}))))})}Dn(e,t,r,i){return Bd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Bd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Bd(e);let s=new zt(Ba);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new dc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new zt(Ba);const i=this.Vn(t,e);if(null==i)return r;const s=ST(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Vp(o))for(const a of o.arrayValue.values||[])r=r.add(new dc(t.indexId,e.key,this.dn(a),i))}else r=r.add(new dc(t.indexId,e.key,cv,i));return r}bn(e,t,r,i,s){he("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,d,g,m,v){const w=u.getIterator(),T=d.getIterator();let D=Sd(w),M=Sd(T);for(;D||M;){let z=!1,F=!1;if(D&&M){const G=g(D,M);G<0?F=!0:G>0&&(z=!0)}else null!=D?F=!0:z=!0;z?(m(M),M=Sd(T)):F?(v(D),D=Sd(w)):(D=Sd(w),M=Sd(T))}}(i,s,Ba,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),H.waitFor(o)}yn(e){let t=1;return jd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Ba(o,a)).filter((o,a,u)=>!a||0!==Ba(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Ba(o,e),u=Ba(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,cv,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,cv,[]]))}return s}Cn(e,t){return Ba(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mV)}getMinOffset(e,t){return H.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||xe())).next(mV)}}function gV(n){return sr(n,"collectionParents")}function Bd(n){return sr(n,"indexEntries")}function eg(n){return sr(n,"indexConfiguration")}function jd(n){return sr(n,"indexState")}function mV(n){Ve(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;RT(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Bi(e.readTime,e.documentKey,t)}const _V={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zr(e,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yV(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:o},(g,m,v)=>(a++,v.delete()));s.push(u.next(()=>{Ve(1===a)}));const d=[];for(const g of t.mutations){const m=k1(e,g.key.path,t.batchId);s.push(i.delete(m)),d.push(g.key)}return H.waitFor(s).next(()=>d)}function lv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw xe();e=n.noDocument}return JSON.stringify(e).length}zr.DEFAULT_COLLECTION_PERCENTILE=10,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zr.DEFAULT=new zr(41943040,zr.DEFAULT_COLLECTION_PERCENTILE,zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zr.DISABLED=new zr(-1,0,0);class dv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Ve(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new dv(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ja(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=$d(e),o=ja(e);return o.add({}).next(a=>{Ve("number"==typeof a);const u=new qT(a,t,r,i),d=function(w,T,D){const M=D.baseMutations.map(F=>Yp(w.ct,F)),z=D.mutations.map(F=>Yp(w.ct,F));return{userId:T,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:M,mutations:z}}(this.serializer,this.userId,u),g=[];let m=new zt((v,w)=>et(v.canonicalString(),w.canonicalString()));for(const v of i){const w=k1(this.userId,v.key.path,a);m=m.add(v.key.path.popLast()),g.push(o.put(d)),g.push(s.put(w,CW))}return m.forEach(v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),H.waitFor(g).next(()=>u)})}lookupMutationBatch(e,t){return ja(e).get(t).next(r=>r?(Ve(r.userId===this.userId),cc(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?H.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ja(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Ve(a.batchId>=r),s=cc(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ja(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ja(e).U("userMutationsIndex",t).next(r=>r.map(i=>cc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Hy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return $d(e).J({range:i},(o,a,u)=>{const[d,g,m]=o,v=qs(g);if(d===this.userId&&t.path.isEqual(v))return ja(e).get(m).next(w=>{if(!w)throw xe();Ve(w.userId===this.userId),s.push(cc(this.serializer,w))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zt(et);const i=[];return t.forEach(s=>{const o=Hy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=$d(e).J({range:a},(d,g,m)=>{const[v,w,T]=d,D=qs(w);v===this.userId&&s.path.isEqual(D)?r=r.add(T):m.done()});i.push(u)}),H.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Hy(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new zt(et);return $d(e).J({range:o},(u,d,g)=>{const[m,v,w]=u,T=qs(v);m===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(w)):g.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(ja(e).get(s).next(o=>{if(null===o)throw xe();Ve(o.userId===this.userId),r.push(cc(this.serializer,o))}))}),H.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return yV(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),H.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return H.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return $d(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=qs(s[1]);i.push(u)}else a.done()}).next(()=>{Ve(0===i.length)})})}containsKey(e,t){return vV(e,this.userId,t)}Nn(e){return IV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function vV(n,e,t){const r=Hy(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return $d(n).J({range:s,H:!0},(a,u,d)=>{const[g,m,v]=a;g===e&&m===i&&(o=!0),d.done()}).next(()=>o)}function ja(n){return sr(n,"mutations")}function $d(n){return sr(n,"documentMutations")}function IV(n){return sr(n,"mutationQueues")}class hc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new hc(0)}static kn(){return new hc(-1)}}class U7{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new hc(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Ue.fromTimestamp(new _n(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hd(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Ve(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Hd(e).J((o,a)=>{const u=Jp(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>H.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Hd(e).J((r,i)=>{const s=Jp(i);t(s)})}qn(e){return EV(e).get("targetGlobalKey").next(t=>(Ve(null!==t),t))}Qn(e,t){return EV(e).put("targetGlobalKey",t)}Kn(e,t){return Hd(e).put(iV(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ic(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Hd(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=Jp(a);Up(t,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=$a(e);return t.forEach(o=>{const a=$r(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),H.waitFor(i)}removeMatchingKeys(e,t,r){const i=$a(e);return H.forEach(t,s=>{const o=$r(s.path);return H.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=$a(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=$a(e);let s=ut();return i.J({range:r,H:!0},(o,a,u)=>{const d=qs(o[1]),g=new Te(d);s=s.add(g)}).next(()=>s)}containsKey(e,t){const r=$r(t.path),i=IDBKeyRange.bound([r],[C1(r)],!1,!0);let s=0;return $a(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}ot(e,t){return Hd(e).get(t).next(r=>r?Jp(r):null)}}function Hd(n){return sr(n,"targets")}function EV(n){return sr(n,"targetGlobal")}function $a(n){return sr(n,"targetDocuments")}function wV([n,e],[t,r]){const i=et(n,t);return 0===i?et(e,r):i}class B7{constructor(e){this.Un=e,this.buffer=new zt(wV),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();wV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class AV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;he("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ie.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){xa(r)?he("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ma(r)}yield t.Hn(3e5)}))}}class j7{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return H.resolve(ji.oe);const r=new B7(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(_V)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_V):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,u,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Td()<=Hs.$b.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-g}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(d-u)+`ms\nTotal Duration: ${d-g}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class $7{constructor(e,t){this.db=e,this.garbageCollector=function TV(n,e){return new j7(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return hv(e,r)}removeReference(e,t,r){return hv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return hv(e,t)}nr(e,t){return function(i,s){let o=!1;return IV(i).Y(a=>vV(i,a,s).next(u=>(u&&(o=!0),H.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const u=this.nr(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ue.min()),$a(e).delete([0,$r(o.path)])))});i.push(u)}}).next(()=>H.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return hv(e,t)}tr(e,t){const r=$a(e);let i,s=ji.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==ji.oe&&t(new Te(qs(i)),s),s=d,i=u):s=ji.oe}).next(()=>{s!==ji.oe&&t(new Te(qs(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hv(n,e){return $a(n).put((i=n.currentSequenceNumber,{targetId:0,path:$r(e.path),sequenceNumber:i}));var i}class CV{constructor(){this.changes=new Bo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class H7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return fc(e).put(r)}removeEntry(e,t,r){return fc(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ov(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=hn.newInvalidDocument(t);return fc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tg(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:hn.newInvalidDocument(t)};return fc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(tg(t))},(i,s)=>{r={document:this.ir(t,s),size:lv(s)}}).next(()=>r)}getEntries(e,t){let r=Ci();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Ci(),i=new sn(Te.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,lv(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return H.resolve();let i=new zt(RV);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(tg(i.first()),tg(i.last())),o=i.getIterator();let a=o.getNext();return fc(e).J({index:"documentKeyIndex",range:s},(u,d,g)=>{const m=Te.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&RV(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?g.$(tg(a)):g.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),ov(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fc(e).U(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let g=Ci();for(const m of d){const v=this.ir(Te.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);v.isFoundDocument()&&(jp(t,v)||i.has(v.key))&&(g=g.insert(v.key,v))}return g})}getAllFromCollectionGroup(e,t,r,i){let s=Ci();const o=SV(t,r),a=SV(t,Bi.max());return fc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,g)=>{const m=this.ir(Te.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(m.key,m),s.size===i&&g.done()}).next(()=>s)}newChangeBuffer(e){return new z7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return bV(e).get("remoteDocumentGlobalKey").next(t=>(Ve(!!t),t))}rr(e,t){return bV(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function R7(n,e){let t;if(e.document)t=Qk(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Te.fromSegments(e.noDocument.path),i=uc(e.noDocument.readTime);t=hn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xe();{const r=Te.fromSegments(e.unknownDocument.path),i=uc(e.unknownDocument.version);t=hn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new _n(i[0],i[1]);return Ue.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ue.min()))return r}return hn.newInvalidDocument(e)}}function DV(n){return new H7(n)}class z7 extends CV{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Bo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new zt((s,o)=>et(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=rV(this.cr.serializer,o);i=i.add(s.path.popLast());const d=lv(u);r+=d-a.size,t.push(this.cr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=rV(this.cr.serializer,o.convertToNoDocument(Ue.min()));t.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),H.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function bV(n){return sr(n,"remoteDocumentGlobal")}function fc(n){return sr(n,"remoteDocumentsV14")}function tg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function SV(n,e){const t=e.documentKey.path.toArray();return[n,ov(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function RV(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=et(t[s],r[s]),i)return i;return i=et(t.length,r.length),i||(i=et(t[t.length-2],r[r.length-2]),i||et(t[t.length-1],r[r.length-1]))}class q7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class PV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&qp(r.mutation,i,Ti.empty(),_n.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ut()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ut()){const i=Ws();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=$p();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Ws();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ut()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ci();const o=Hp(),a=Hp();return t.forEach((u,d)=>{const g=r.get(d.key);i.has(d.key)&&(void 0===g||g.mutation instanceof jo)?s=s.insert(d.key,d):void 0!==g?(o.set(d.key,g.mutation.getFieldMask()),qp(g.mutation,d,g.mutation.getFieldMask(),_n.now())):o.set(d.key,Ti.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,g)=>o.set(d,g)),t.forEach((d,g)=>{var m;return a.set(d,new q7(g,null!==(m=o.get(d))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Hp();let i=new sn((o,a)=>o-a),s=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=t.get(u);if(null===d)return;let g=r.get(u)||Ti.empty();g=a.applyToLocalView(d,g),r.set(u,g);const m=(i.get(a.batchId)||ut()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,g=u.value,m=vk();g.forEach(v=>{if(!s.has(v)){const w=bk(t.get(v),r.get(v));null!==w&&m.set(v,w),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Te.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):BT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):H.resolve(Ws());let a=-1,u=s;return o.next(d=>H.forEach(d,(g,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(g)?H.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{u=u.insert(g,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ut())).next(g=>({batchId:a,changes:yk(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(r=>{let i=$p();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=$p();return this.indexManager.getCollectionParents(e,s).next(a=>H.forEach(a,u=>{const d=(m=t,v=u.child(s),new Uo(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,v;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(g=>{g.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,d)=>{const g=d.getKey();null===o.get(g)&&(o=o.insert(g,hn.newInvalidDocument(g)))});let a=$p();return o.forEach((u,d)=>{const g=s.get(u);void 0!==g&&qp(g.mutation,d,Ti.empty(),_n.now()),jp(t,d)&&(a=a.insert(u,d))}),a})}}class G7{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return H.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:$n(i.createTime)}),H.resolve();var i}getNamedQuery(e,t){return H.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:eC(i.bundledQuery),readTime:$n(i.readTime)}),H.resolve();var i}}class W7{constructor(){this.overlays=new sn(Te.comparator),this.Ir=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ws();return H.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),H.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){const i=Ws(),s=t.length+1,o=new Te(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return H.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new sn((d,g)=>d-g);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let g=s.get(d.largestBatchId);null===g&&(g=Ws(),s=s.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const a=Ws(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,g)=>a.set(d,g)),!(a.size()>=i)););return H.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new WT(t,r));let s=this.Ir.get(t);void 0===s&&(s=ut(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class K7{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}class aC{constructor(){this.Tr=new zt(gr.Er),this.dr=new zt(gr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new gr(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new gr(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Te(new Et([])),r=new gr(t,e),i=new gr(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Te(new Et([])),r=new gr(t,e),i=new gr(t,e+1);let s=ut();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new gr(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class gr{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Te.comparator(e.key,t.key)||et(e.wr,t.wr)}static Ar(e,t){return et(e.wr,t.wr)||Te.comparator(e.key,t.key)}}class Q7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new zt(gr.Er)}checkEmpty(e){return H.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new qT(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new gr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,t){return H.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gr(t,0),i=new gr(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zt(et);return t.forEach(i=>{const s=new gr(i,0),o=new gr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Te.isDocumentKey(s)||(s=s.child(""));const o=new gr(new Te(s),0);let a=new zt(et);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.wr)),!0)},o),H.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ve(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return H.forEach(t.mutations,i=>{const s=new gr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new gr(t,0),i=this.br.firstAfterOrEqual(r);return H.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return H.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Y7{constructor(e){this.Mr=e,this.docs=new sn(Te.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let r=Ci();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():hn.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ci();const o=t.path,a=new Te(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:g}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||RT(b1(g),r)<=0||(i.has(g.key)||jp(t,g))&&(s=s.insert(g.key,g.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,t,r,i){xe()}Or(e,t){return H.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new J7(this)}getSize(e){return H.resolve(this.size)}}class J7 extends CV{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),H.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Z7{constructor(e){this.persistence=e,this.Nr=new Bo(t=>ic(t),Up),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new aC,this.targetCount=0,this.kr=hc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),H.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new hc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Kn(t),H.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(s).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),H.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this.Br.containsKey(t))}}class uC{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ji(0),this.Kr=!1,this.Kr=!0,this.$r=new K7,this.referenceDelegate=e(this),this.Ur=new Z7(this),this.indexManager=new F7,this.remoteDocumentCache=new Y7(r=>this.referenceDelegate.Wr(r)),this.serializer=new nV(t),this.Gr=new G7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new W7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Q7(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const i=new X7(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class X7 extends R1{constructor(e){super(),this.currentSequenceNumber=e}}class fv{constructor(e){this.persistence=e,this.Jr=new aC,this.Yr=null}static Zr(e){return new fv(e)}get Xr(){if(this.Yr)return this.Yr;throw xe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),H.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const i=Te.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Ue.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return H.or([()=>H.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class eK{constructor(e){this.serializer=e}O(e,t,r,i){const s=new $y("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",O1,{unique:!0}),u.createObjectStore("documentMutations"),MV(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=H.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),MV(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ue.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",g)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").U().next(g=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",O1,{unique:!0});const m=d.store("mutations"),v=g.map(w=>m.put(w));return H.waitFor(v)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:FW});d.createIndex("collectionPathOverlayIndex",LW,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",UW,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:DW});d.createIndex("documentKeyIndex",bW),d.createIndex("collectionGroupIndex",SW)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:NW}).createIndex("sequenceNumberIndex",OW,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:kW}).createIndex("documentKeyIndex",VW,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(u){u.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=lv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>H.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>H.forEach(a,u=>{Ve(u.userId===s.userId);const d=cc(this.serializer,u);return yV(e,s.userId,d).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new Et(o),d=[0,$r(u)];s.push(t.get(d).next(g=>g?H.resolve():t.put({targetId:0,path:$r(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>H.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:xW});const r=t.store("collectionParents"),i=new oC,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:$r(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new Et(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],d)=>{const g=qs(a);return s(g.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=Jp(i),o=iV(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(m=o,m.document?new Te(Et.fromString(m.document.name).popFirst(5)):m.noDocument?Te.fromSegments(m.noDocument.path):m.unknownDocument?Te.fromSegments(m.unknownDocument.path):xe()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(d))}).next(()=>H.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=DV(this.serializer),s=new uC(fv.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var d;let g=null!==(d=a.get(u.userId))&&void 0!==d?d:ut();cc(this.serializer,u).keys().forEach(m=>g=g.add(m)),a.set(u.userId,g)}),H.forEach(a,(u,d)=>{const g=new fr(d),m=av.lt(this.serializer,g),v=s.getIndexManager(g),w=dv.lt(g,this.serializer,v,s.referenceDelegate);return new PV(i,w,m,v).recalculateAndSaveOverlaysForDocumentKeys(new NT(t,ji.oe),u).next()})})}}function MV(n){n.createObjectStore("targetDocuments",{keyPath:PW}).createIndex("documentTargetsIndex",MW,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",RW,{unique:!0}),n.createObjectStore("targetGlobal")}const cC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lC{constructor(e,t,r,i,s,o,a,u,d,g,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=d,this.li=g,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!lC.D())throw new ce(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $7(this,i),this.Ai=t+"main",this.serializer=new nV(u),this.Ri=new zs(this.Ai,this.hi,new eK(this.serializer)),this.$r=new M7,this.Ur=new U7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=DV(this.serializer),this.Gr=new P7,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===g&&jn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(J.FAILED_PRECONDITION,cC);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ji(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,ie.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,ie.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,ie.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(xa(e))return he("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return he("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ng(e).get("owner").next(t=>H.resolve(this.vi(t)))}Ci(e){return gv(e).delete(this.clientId)}Fi(){var e=this;return(0,ie.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=sr(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return H.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?H.resolve(!0):ng(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ce(J.FAILED_PRECONDITION,cC);return!1}}return!(!this.networkEnabled||!this.inForeground)||gv(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&he("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ie.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new NT(t,ji.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>gv(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return dv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new L7(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return av.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){he("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(u=this.hi)?$W:16===u?jW:15===u?xT:14===u?L1:13===u?F1:12===u?BW:11===u?V1:void xe();var u;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new NT(a,this.Qr?this.Qr.next():ji.oe),"readwrite-primary"===t?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw jn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ce(J.FAILED_PRECONDITION,S1);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return ng(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ce(J.FAILED_PRECONDITION,cC)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ng(e).put("owner",t)}static D(){return zs.D()}bi(e){const t=ng(e);return t.get("owner").next(r=>this.vi(r)?(he("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):H.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(jn(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,kt.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return he("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return jn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){jn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ng(n){return sr(n,"owner")}function gv(n){return sr(n,"clientMetadata")}function dC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class hC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ut(),i=ut();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hC(e,t.fromCache,r,i)}}class tK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,kt.nr)()?8:P1((0,kt.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new tK;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Td()<=Hs.$b.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Nd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(Td()<=Hs.$b.DEBUG&&he("QueryEngine","Query:",Nd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Td()<=Hs.$b.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Nd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(t))):H.resolve())}Yi(e,t){if(dk(t))return H.resolve(null);let r=Hr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Xy(t,null,"F"),r=Hr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ut(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(t,a);return this.ns(t,d,o,u.readTime)?this.Yi(e,Xy(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return dk(t)||i.isEqual(Ue.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?H.resolve(null):(Td()<=Hs.$b.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Nd(t)),this.rs(e,o,t,D1(i,-1)).next(a=>a))})}ts(e,t){let r=new zt(mk(e));return t.forEach((i,s)=>{jp(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Td()<=Hs.$b.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Nd(t)),this.Ji.getDocumentsMatchingQuery(e,t,Bi.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class nK{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new sn(et),this._s=new Bo(s=>ic(s),Up),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function NV(n,e,t,r){return new nK(n,e,t,r)}function OV(n,e){return fC.apply(this,arguments)}function fC(){return(fC=(0,ie.A)(function*(n,e){const t=Ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ut();for(const d of i){o.push(d.batchId);for(const g of d.mutations)u=u.add(g.key)}for(const d of s){a.push(d.batchId);for(const g of d.mutations)u=u.add(g.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function kV(n){const e=Ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function VV(n,e,t){let r=ut(),i=ut();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ci();return t.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Ue.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):he("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function sK(n,e){const t=Ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zd(n,e){const t=Ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,H.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new $o(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function qd(n,e,t){return pC.apply(this,arguments)}function pC(){return(pC=(0,ie.A)(function*(n,e,t){const r=Ee(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!xa(o))throw o;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function mv(n,e,t){const r=Ee(n);let i=Ue.min(),s=ut();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,g){const m=Ee(u),v=m._s.get(g);return void 0!==v?H.resolve(m.os.get(v)):m.Ur.getTargetData(d,g)}(r,o,Hr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Ue.min(),t?s:ut())).next(a=>(UV(r,gk(e),a),{documents:a,Ts:s})))}function FV(n,e){const t=Ee(n),r=Ee(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function LV(n,e){const t=Ee(n),r=t.us.get(e)||Ue.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,D1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(UV(t,e,i),i))}function UV(n,e,t){let r=n.us.get(e)||Ue.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function gC(){return(gC=(0,ie.A)(function*(n,e,t,r){const i=Ee(n);let s=ut(),o=Ci();for(const d of t){const g=e.Es(d.metadata.name);d.document&&(s=s.add(g));const m=e.ds(d);m.setReadTime(e.As(d.metadata.readTime)),o=o.insert(g,m)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield zd(i,(g=r,Hr(Md(Et.fromString(`__bundle__/docs/${g}`)))));var g;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>VV(d,a,o).next(g=>(a.apply(d),g)).next(g=>i.Ur.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.Ur.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,g.Ps,g.Is)).next(()=>g.Ps)))})).apply(this,arguments)}function aK(n,e){return mC.apply(this,arguments)}function mC(){return(mC=(0,ie.A)(function*(n,e,t=ut()){const r=yield zd(n,Hr(eC(e.bundledQuery))),i=Ee(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=$n(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(kn.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function BV(n,e){return`firestore_clients_${n}_${e}`}function jV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _C(n,e){return`firestore_targets_${n}_${e}`}class _v{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new ce(i.error.code,i.error.message))),o?new _v(e,t,i.state,s):(jn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ce(r.error.code,r.error.message))),s?new rg(e,r.state,i):(jn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=$T();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=x1(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new yv(e,s):(jn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class yC{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new yC(t.clientId,t.onlineState):(jn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class vC{constructor(){this.activeTargetIds=$T()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IC{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new sn(et),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=BV(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new vC),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ie.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(BV(e.persistenceKey,i));if(s){const o=yv.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(_C(this.persistenceKey,e));if(i){const s=rg.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_C(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return he("SharedClientState","READ",e,t),t}setItem(e,t){he("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){he("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(he("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void jn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,ie.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=ji.oe;if(null!=o)try{const u=JSON.parse(o);Ve("number"==typeof u),a=u}catch(u){jn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==ji.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new _v(this.currentUser,e,t,r),s=jV(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=jV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=_C(this.persistenceKey,e),s=new rg(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return yv.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return _v.Rs(new fr(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return rg.Rs(i,t)}Ls(e){return yC.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,ie.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);he("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=$T();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class $V{constructor(){this.so=new vC,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new vC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uK{_o(e){}shutdown(){}}class HV{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let vv=null;function EC(){return null===vv?vv=268435456+Math.round(2147483648*Math.random()):vv++,"0x"+vv.toString(16)}const cK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lK{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const qr="WebChannelConnection";class dK extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=EC(),u=this.xo(t,r.toUriEncodedString());he("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,u,d,i).then(g=>(he("RestConnection",`Received RPC '${t}' ${a}: `,g),g),g=>{throw Ui("RestConnection",`RPC '${t}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Ad,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${cK[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=EC();return new Promise((o,a)=>{const u=new m1;u.setWithCredentials(!0),u.listenOnce(_1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case jy.NO_ERROR:const g=u.getResponseJson();he(qr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),o(g);break;case jy.TIMEOUT:he(qr,`RPC '${e}' ${s} timed out`),a(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case jy.HTTP_ERROR:const m=u.getStatus();if(he(qr,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const w=v?.error;if(w&&w.status&&w.message){const T=function(M){const z=M.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(z)>=0?z:J.UNKNOWN}(w.status);a(new ce(T,w.message))}else a(new ce(J.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ce(J.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{he(qr,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);he(qr,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){const i=EC(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=I1(),a=v1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const g=s.join("");he(qr,`Creating RPC '${e}' stream ${i}: ${g}`,u);const m=o.createWebChannel(g,u);let v=!1,w=!1;const T=new lK({Io:M=>{w?he(qr,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(v||(he(qr,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),he(qr,`RPC '${e}' stream ${i} sending:`,M),m.send(M))},To:()=>m.close()}),D=(M,z,F)=>{M.listen(z,G=>{try{F(G)}catch(ae){setTimeout(()=>{throw ae},0)}})};return D(m,Rp.EventType.OPEN,()=>{w||(he(qr,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),D(m,Rp.EventType.CLOSE,()=>{w||(w=!0,he(qr,`RPC '${e}' stream ${i} transport closed`),T.So())}),D(m,Rp.EventType.ERROR,M=>{w||(w=!0,Ui(qr,`RPC '${e}' stream ${i} transport errored:`,M),T.So(new ce(J.UNAVAILABLE,"The operation could not be completed")))}),D(m,Rp.EventType.MESSAGE,M=>{var z;if(!w){const F=M.data[0];Ve(!!F);const ae=F.error||(null===(z=F[0])||void 0===z?void 0:z.error);if(ae){he(qr,`RPC '${e}' stream ${i} received error:`,ae);const ye=ae.status;let Le=function(O){const L=Kn[O];if(void 0!==L)return Ok(L)}(ye),V=ae.message;void 0===Le&&(Le=J.INTERNAL,V="Unknown error status: "+ye+" with message "+ae.message),w=!0,T.So(new ce(Le,V)),m.close()}else he(qr,`RPC '${e}' stream ${i} received:`,F),T.bo(F)}}),D(a,y1.STAT_EVENT,M=>{M.stat===DT.PROXY?he(qr,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===DT.NOPROXY&&he(qr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function zV(){return typeof window<"u"?window:null}function Iv(){return typeof document<"u"?document:null}function ig(n){return new v7(n,!0)}class wC{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class qV{constructor(e,t,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wC(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,ie.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,ie.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,ie.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(jn(t.toString()),jn("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===J.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ce(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,ie.A)(function*(){e.state=0,e.start()}))}I_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hK extends qV{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function w7(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:xe(),i=e.targetChange.targetIds||[],s=function(d,g){return d.useProto3Json?(Ve(void 0===g||"string"==typeof g),kn.fromBase64String(g||"")):(Ve(void 0===g||g instanceof Buffer||g instanceof Uint8Array),kn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const g=void 0===d.code?J.UNKNOWN:Ok(d.code);return new ce(g,d.message||"")}(o);t=new Uk(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Ks(n,r.document.name),s=$n(r.document.updateTime),o=r.document.createTime?$n(r.document.createTime):Ue.min(),a=new Dr({mapValue:{fields:r.document.fields}}),u=hn.newFoundDocument(i,s,o,a);t=new iv(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Ks(n,r.document),s=r.readTime?$n(r.readTime):Ue.min(),o=hn.newNoDocument(i,s);t=new iv([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Ks(n,r.document);t=new iv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return xe();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new f7(i,s);t=new Lk(r.targetId,o)}}var d;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ue.min():o.readTime?$n(o.readTime):Ue.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=ZT(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=Jy(u)?{documents:Yk(s,u)}:{query:sv(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Hk(s,o.resumeToken);const d=QT(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ue.min())>0){a.readTime=Ld(s,o.snapshotVersion.toTimestamp());const d=QT(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function T7(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=ZT(this.serializer),t.removeTarget=e,this.a_(t)}}class fK extends qV{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function A7(n,e){return n&&n.length>0?(Ve(void 0!==e),n.map(t=>function(i,s){let o=$n(i.updateTime?i.updateTime:s);return o.isEqual(Ue.min())&&(o=$n(s)),new l7(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=$n(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=ZT(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Yp(this.serializer,r))};this.a_(t)}}class pK extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,JT(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ce(J.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,JT(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(J.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class gK{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(jn(t),this.D_=!1):he("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class mK{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,ie.A)(function*(){var u;Ha(o)&&(he("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,ie.A)(function*(g){const m=Ee(g);m.L_.add(4),yield Gd(m),m.q_.set("Unknown"),m.L_.delete(4),yield sg(m)}),function d(g){return u.apply(this,arguments)})(o))}))}),this.q_=new gK(r,i)}}function sg(n){return AC.apply(this,arguments)}function AC(){return(AC=(0,ie.A)(function*(n){if(Ha(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function Gd(n){return TC.apply(this,arguments)}function TC(){return(TC=(0,ie.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function Ev(n,e){const t=Ee(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),bC(t)?DC(t):Qd(t).r_()&&CC(t,e))}function Wd(n,e){const t=Ee(n),r=Qd(t);t.N_.delete(e),r.r_()&&GV(t,e),0===t.N_.size&&(r.r_()?r.o_():Ha(t)&&t.q_.set("Unknown"))}function CC(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qd(n).A_(e)}function GV(n,e){n.Q_.xe(e),Qd(n).R_(e)}function DC(n){n.Q_=new g7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Qd(n).start(),n.q_.v_()}function bC(n){return Ha(n)&&!Qd(n).n_()&&n.N_.size>0}function Ha(n){return 0===Ee(n).L_.size}function WV(n){n.Q_=void 0}function _K(n){return SC.apply(this,arguments)}function SC(){return(SC=(0,ie.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function yK(n){return RC.apply(this,arguments)}function RC(){return(RC=(0,ie.A)(function*(n){n.N_.forEach((e,t)=>{CC(n,e)})})).apply(this,arguments)}function vK(n,e){return PC.apply(this,arguments)}function PC(){return(PC=(0,ie.A)(function*(n,e){WV(n),bC(n)?(n.q_.M_(e),DC(n)):n.q_.set("Unknown")})).apply(this,arguments)}function IK(n,e,t){return MC.apply(this,arguments)}function MC(){return MC=(0,ie.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof Uk&&2===e.state&&e.cause)try{yield(r=(0,ie.A)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.N_.delete(u),s.Q_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wv(n,r)}else if(e instanceof iv?n.Q_.Ke(e):e instanceof Lk?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ue.min()))try{const r=yield kV(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const g=s.N_.get(d);g&&s.N_.set(d,g.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const g=s.N_.get(u);if(!g)return;s.N_.set(u,g.withResumeToken(kn.EMPTY_BYTE_STRING,g.snapshotVersion)),GV(s,u);const m=new $o(g.target,u,d,g.sequenceNumber);CC(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){he("RemoteStore","Failed to raise snapshot:",r),yield wv(n,r)}var r}),MC.apply(this,arguments)}function wv(n,e,t){return xC.apply(this,arguments)}function xC(){return(xC=(0,ie.A)(function*(n,e,t){if(!xa(e))throw e;n.L_.add(1),yield Gd(n),n.q_.set("Offline"),t||(t=()=>kV(n.localStore)),n.asyncQueue.enqueueRetryable((0,ie.A)(function*(){he("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield sg(n)}))})).apply(this,arguments)}function KV(n,e){return e().catch(t=>wv(n,t,e))}function Kd(n){return NC.apply(this,arguments)}function NC(){return(NC=(0,ie.A)(function*(n){const e=Ee(n),t=za(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;EK(e);)try{const i=yield sK(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,wK(e,i)}catch(i){yield wv(e,i)}QV(e)&&YV(e)})).apply(this,arguments)}function EK(n){return Ha(n)&&n.O_.length<10}function wK(n,e){n.O_.push(e);const t=za(n);t.r_()&&t.V_&&t.m_(e.mutations)}function QV(n){return Ha(n)&&!za(n).n_()&&n.O_.length>0}function YV(n){za(n).start()}function AK(n){return OC.apply(this,arguments)}function OC(){return(OC=(0,ie.A)(function*(n){za(n).p_()})).apply(this,arguments)}function TK(n){return kC.apply(this,arguments)}function kC(){return(kC=(0,ie.A)(function*(n){const e=za(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function CK(n,e,t){return VC.apply(this,arguments)}function VC(){return(VC=(0,ie.A)(function*(n,e,t){const r=n.O_.shift(),i=GT.from(r,e,t);yield KV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Kd(n)})).apply(this,arguments)}function DK(n,e){return FC.apply(this,arguments)}function FC(){return FC=(0,ie.A)(function*(n,e){var t;e&&za(n).V_&&(yield(t=(0,ie.A)(function*(i,s){if(Nk(a=s.code)&&a!==J.ABORTED){const o=i.O_.shift();za(i).s_(),yield KV(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Kd(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),QV(n)&&YV(n)}),FC.apply(this,arguments)}function JV(n,e){return LC.apply(this,arguments)}function LC(){return(LC=(0,ie.A)(function*(n,e){const t=Ee(n);t.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const r=Ha(t);t.L_.add(3),yield Gd(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield sg(t)})).apply(this,arguments)}function UC(n,e){return BC.apply(this,arguments)}function BC(){return(BC=(0,ie.A)(function*(n,e){const t=Ee(n);e?(t.L_.delete(2),yield sg(t)):e||(t.L_.add(2),yield Gd(t),t.q_.set("Unknown"))})).apply(this,arguments)}function Qd(n){return n.K_||(n.K_=function(t,r,i){const s=Ee(t);return s.w_(),new hK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:_K.bind(null,n),Ro:yK.bind(null,n),mo:vK.bind(null,n),d_:IK.bind(null,n)}),n.B_.push(function(){var e=(0,ie.A)(function*(t){t?(n.K_.s_(),bC(n)?DC(n):n.q_.set("Unknown")):(yield n.K_.stop(),WV(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function za(n){return n.U_||(n.U_=function(t,r,i){const s=Ee(t);return s.w_(),new fK(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:AK.bind(null,n),mo:DK.bind(null,n),f_:TK.bind(null,n),g_:CK.bind(null,n)}),n.B_.push(function(){var e=(0,ie.A)(function*(t){t?(n.U_.s_(),yield Kd(n)):(yield n.U_.stop(),n.O_.length>0&&(he("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class jC{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new jC(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yd(n,e){if(jn("AsyncQueue",`${e}: ${n}`),xa(n))return new ce(J.UNAVAILABLE,`${e}: ${n}`);throw n}class Jd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=$p(),this.sortedSet=new sn(this.comparator)}static emptySet(e){return new Jd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Jd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ZV{constructor(){this.W_=new sn(Te.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):xe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Zd{constructor(e,t,r,i,s,o,a,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Zd(e,t,Jd.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class bK{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class SK{constructor(){this.queries=XV(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Ee(t),s=i.queries;i.queries=XV(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})}(this,new ce(J.ABORTED,"Firestore shutting down"))}}function XV(){return new Bo(n=>pk(n),Bp)}function $C(n,e){return HC.apply(this,arguments)}function HC(){return(HC=(0,ie.A)(function*(n,e){const t=Ee(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new bK,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Yd(o,`Initialization of query '${Nd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&GC(t)})).apply(this,arguments)}function zC(n,e){return qC.apply(this,arguments)}function qC(){return(qC=(0,ie.A)(function*(n,e){const t=Ee(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function RK(n,e){const t=Ee(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&GC(t)}function PK(n,e,t){const r=Ee(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function GC(n){n.Y_.forEach(e=>{e.next()})}var WC,eF;(eF=WC||(WC={})).ea="default",eF.Cache="cache";class KC{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Zd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=Zd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==WC.Cache}}class MK{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class tF{constructor(e){this.serializer=e}Es(e){return Ks(this.serializer,e)}ds(e){return e.metadata.exists?Qk(this.serializer,e.document,!1):hn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return $n(e)}}class xK{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nF(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=Et.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new tF(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||ut()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,ie.A)(function*(){const t=yield function oK(n,e,t,r){return gC.apply(this,arguments)}(e.localStore,new tF(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield aK(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function nF(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class rF{constructor(e){this.key=e}}class iF{constructor(e){this.key=e}}class sF{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ut(),this.mutatedKeys=ut(),this.Aa=mk(e),this.Ra=new Jd(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new ZV,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,m)=>{const v=i.get(g),w=jp(this.query,m)?m:null,T=!!v&&this.mutatedKeys.has(v.key),D=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;v&&w?v.data.isEqual(w.data)?T!==D&&(r.track({type:3,doc:w}),M=!0):this.ga(v,w)||(r.track({type:2,doc:w}),M=!0,(u&&this.Aa(w,u)>0||d&&this.Aa(w,d)<0)&&(a=!0)):!v&&w?(r.track({type:0,doc:w}),M=!0):v&&!w&&(r.track({type:1,doc:v}),M=!0,(u||d)&&(a=!0)),M&&(w?(o=o.add(w),s=D?s.add(g):s.delete(g)):(o=o.delete(g),s=s.delete(g)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const g="F"===this.query.limitType?o.last():o.first();o=o.delete(g.key),s=s.delete(g.key),r.track({type:1,doc:g})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((g,m)=>function(w,T){const D=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return D(w)-D(T)}(g.type,m.type)||this.Aa(g.doc,m.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],u=0===this.da.size&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,0!==o.length||d?{snapshot:new Zd(this.query,e.Ra,s,o,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ZV,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ut(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new iF(r))}),this.da.forEach(r=>{e.has(r)||t.push(new rF(r))}),t}ba(e){this.Ta=e.Ts,this.da=ut();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Zd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class NK{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class OK{constructor(e){this.key=e,this.va=!1}}class kK{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Bo(a=>pk(a),Bp),this.Ma=new Map,this.xa=new Set,this.Oa=new sn(Te.comparator),this.Na=new Map,this.La=new aC,this.Ba={},this.ka=new Map,this.qa=hc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function VK(n,e){return QC.apply(this,arguments)}function QC(){return(QC=(0,ie.A)(function*(n,e,t=!0){const r=Av(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield oF(r,e,t,!0),i})).apply(this,arguments)}function FK(n,e){return YC.apply(this,arguments)}function YC(){return(YC=(0,ie.A)(function*(n,e){const t=Av(n);yield oF(t,e,!0,!1)})).apply(this,arguments)}function oF(n,e,t,r){return JC.apply(this,arguments)}function JC(){return(JC=(0,ie.A)(function*(n,e,t,r){const i=yield zd(n.localStore,Hr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield ZC(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&Ev(n.remoteStore,i),a})).apply(this,arguments)}function ZC(n,e,t,r,i){return XC.apply(this,arguments)}function XC(){return XC=(0,ie.A)(function*(n,e,t,r,i){n.Ka=(m,v,w)=>{return(T=(0,ie.A)(function*(M,z,F,G){let ae=z.view.ma(F);ae.ns&&(ae=yield mv(M.localStore,z.query,!1).then(({documents:b})=>z.view.ma(b,ae)));const ye=G&&G.targetChanges.get(z.targetId),Le=G&&null!=G.targetMismatches.get(z.targetId),V=z.view.applyChanges(ae,M.isPrimaryClient,ye,Le);return lD(M,z.targetId,V.wa),V.snapshot}),function D(M,z,F,G){return T.apply(this,arguments)})(n,m,v,w);var T};const s=yield mv(n.localStore,e,!0),o=new sF(e,s.Ts),a=o.ma(s.documents),u=Kp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),d=o.applyChanges(a,n.isPrimaryClient,u);lD(n,t,d.wa);const g=new NK(e,t,o);return n.Fa.set(e,g),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot}),XC.apply(this,arguments)}function LK(n,e,t){return eD.apply(this,arguments)}function eD(){return(eD=(0,ie.A)(function*(n,e,t){const r=Ee(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Bp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield qd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Wd(r.remoteStore,i.targetId),Xd(r,i.targetId)}).catch(Ma))):(Xd(r,i.targetId),yield qd(r.localStore,i.targetId,!0))})).apply(this,arguments)}function UK(n,e){return tD.apply(this,arguments)}function tD(){return(tD=(0,ie.A)(function*(n,e){const t=Ee(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Wd(t.remoteStore,r.targetId))})).apply(this,arguments)}function nD(){return(nD=(0,ie.A)(function*(n,e,t){const r=ED(n);try{const i=yield function(o,a){const u=Ee(o),d=_n.now(),g=a.reduce((w,T)=>w.add(T.key),ut());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let T=Ci(),D=ut();return u.cs.getEntries(w,g).next(M=>{T=M,T.forEach((z,F)=>{F.isValidDocument()||(D=D.add(z))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,T)).next(M=>{m=M;const z=[];for(const F of a){const G=h7(F,m.get(F.key).overlayedDocument);null!=G&&z.push(new jo(F.key,G,Z1(G.value.mapValue),vn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,z,a)}).next(M=>{v=M;const z=M.applyToLocalDocumentSet(m,D);return u.documentOverlayCache.saveOverlays(w,M.batchId,z)})}).then(()=>({batchId:v.batchId,changes:yk(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new sn(et)),d=d.insert(a,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,t),yield Ho(r,i.changes),yield Kd(r.remoteStore)}catch(i){const s=Yd(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function aF(n,e){return rD.apply(this,arguments)}function rD(){return(rD=(0,ie.A)(function*(n,e){const t=Ee(n);try{const r=yield function iK(n,e){const t=Ee(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((g,m)=>{const v=i.get(m);if(!v)return;a.push(t.Ur.removeMatchingKeys(s,g.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(s,g.addedDocuments,m)));let w=v.withSequenceNumber(s.currentSequenceNumber);var D,M,z;null!==e.targetMismatches.get(m)?w=w.withResumeToken(kn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,r)),i=i.insert(m,w),M=w,z=g,(0===(D=v).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8||z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,w))});let u=Ci(),d=ut();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))}),a.push(VV(s,o,e.documentUpdates).next(g=>{u=g.Ps,d=g.Is})),!r.isEqual(Ue.min())){const g=t.Ur.getLastRemoteSnapshotVersion(s).next(m=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(g)}return H.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(Ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ve(o.va):i.removedDocuments.size>0&&(Ve(o.va),o.va=!1))}),yield Ho(t,r,e)}catch(r){yield Ma(r)}})).apply(this,arguments)}function uF(n,e,t){const r=Ee(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Ee(o);u.onlineState=a;let d=!1;u.queries.forEach((g,m)=>{for(const v of m.j_)v.Z_(a)&&(d=!0)}),d&&GC(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function jK(n,e,t){return iD.apply(this,arguments)}function iD(){return(iD=(0,ie.A)(function*(n,e,t){const r=Ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new sn(Te.comparator);o=o.insert(s,hn.newNoDocument(s,Ue.min()));const a=ut().add(s),u=new Wp(Ue.min(),new Map,new sn(et),o,a);yield aF(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),dD(r)}else yield qd(r.localStore,e,!1).then(()=>Xd(r,e,t)).catch(Ma)})).apply(this,arguments)}function $K(n,e){return sD.apply(this,arguments)}function sD(){return(sD=(0,ie.A)(function*(n,e){const t=Ee(n),r=e.batch.batchId;try{const i=yield function rK(n,e){const t=Ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,d,g){const m=d.batch,v=m.keys();let w=H.resolve();return v.forEach(T=>{w=w.next(()=>g.getEntry(u,T)).next(D=>{const M=d.docVersions.get(T);Ve(null!==M),D.version.compareTo(M)<0&&(m.applyToRemoteDocument(D,d),D.isValidDocument()&&(D.setReadTime(d.commitVersion),g.addEntry(D)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ut();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);cD(t,r,null),uD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ho(t,i)}catch(i){yield Ma(i)}})).apply(this,arguments)}function HK(n,e,t){return oD.apply(this,arguments)}function oD(){return(oD=(0,ie.A)(function*(n,e,t){const r=Ee(n);try{const i=yield function(o,a){const u=Ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return u.mutationQueue.lookupMutationBatch(d,a).next(m=>(Ve(null!==m),g=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,g,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>u.localDocuments.getDocuments(d,g))})}(r.localStore,e);cD(r,e,t),uD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ho(r,i)}catch(i){yield Ma(i)}})).apply(this,arguments)}function aD(){return(aD=(0,ie.A)(function*(n,e){const t=Ee(n);Ha(t.remoteStore)||he("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ee(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=Yd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function uD(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function cD(n,e,t){const r=Ee(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Xd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||cF(n,r)})}function cF(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(Wd(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),dD(n))}function lD(n,e,t){for(const r of t)r instanceof rF?(n.La.addReference(r.key,e),qK(n,r)):r instanceof iF?(he("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||cF(n,r.key)):xe()}function qK(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(he("SyncEngine","New document in limbo: "+t),n.xa.add(r),dD(n))}function dD(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Te(Et.fromString(e)),r=n.qa.next();n.Na.set(r,new OK(t)),n.Oa=n.Oa.insert(t,r),Ev(n.remoteStore,new $o(Hr(Md(t.path)),r,"TargetPurposeLimboResolution",ji.oe))}}function Ho(n,e,t){return hD.apply(this,arguments)}function hD(){return hD=(0,ie.A)(function*(n,e,t){const r=Ee(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,t).then(d=>{var g;if((d||t)&&r.isPrimaryClient){const m=d?!d.fromCache:null===(g=t?.targetChanges.get(u.targetId))||void 0===g?void 0:g.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=hC.Wi(u.targetId,d);s.push(m)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,ie.A)(function*(d,g){const m=Ee(d);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>H.forEach(g,w=>H.forEach(w.$i,T=>m.persistence.referenceDelegate.addReference(v,w.targetId,T)).next(()=>H.forEach(w.Ui,T=>m.persistence.referenceDelegate.removeReference(v,w.targetId,T)))))}catch(v){if(!xa(v))throw v;he("LocalStore","Failed to update sequence numbers: "+v)}for(const v of g){const w=v.targetId;if(!v.fromCache){const T=m.os.get(w),M=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);m.os=m.os.insert(w,M)}}}),function u(d,g){return a.apply(this,arguments)})(r.localStore,s))}),hD.apply(this,arguments)}function GK(n,e){return fD.apply(this,arguments)}function fD(){return(fD=(0,ie.A)(function*(n,e){const t=Ee(n);if(!t.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const r=yield OV(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(u=>{u.reject(new ce(J.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ho(t,r.hs)}var s})).apply(this,arguments)}function WK(n,e){const t=Ee(n),r=t.Na.get(e);if(r&&r.va)return ut().add(r.key);{let i=ut();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function KK(n,e){return pD.apply(this,arguments)}function pD(){return(pD=(0,ie.A)(function*(n,e){const t=Ee(n),r=yield mv(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&lD(t,e.targetId,i.wa),i})).apply(this,arguments)}function QK(n,e){return gD.apply(this,arguments)}function gD(){return(gD=(0,ie.A)(function*(n,e){const t=Ee(n);return LV(t.localStore,e).then(r=>Ho(t,r))})).apply(this,arguments)}function YK(n,e,t,r){return mD.apply(this,arguments)}function mD(){return(mD=(0,ie.A)(function*(n,e,t,r){const i=Ee(n),s=yield function(a,u){const d=Ee(a),g=Ee(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",m=>g.Mn(m,u).next(v=>v?d.localDocuments.getDocuments(m,v):H.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield Kd(i.remoteStore):"acknowledged"===t||"rejected"===t?(cD(i,e,r||null),uD(i,e),u=e,Ee(Ee(i.localStore).mutationQueue).On(u)):xe(),yield Ho(i,s)):he("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function _D(){return(_D=(0,ie.A)(function*(n,e){const t=Ee(n);if(Av(t),ED(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield lF(t,r.toArray());t.Qa=!0,yield UC(t.remoteStore,!0);for(const s of i)Ev(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Xd(t,o),qd(t.localStore,o,!0))),Wd(t.remoteStore,o)}),yield i,yield lF(t,r),function(o){const a=Ee(o);a.Na.forEach((u,d)=>{Wd(a.remoteStore,d)}),a.La.pr(),a.Na=new Map,a.Oa=new sn(Te.comparator)}(t),t.Qa=!1,yield UC(t.remoteStore,!1)}})).apply(this,arguments)}function lF(n,e,t){return yD.apply(this,arguments)}function yD(){return(yD=(0,ie.A)(function*(n,e,t){const r=Ee(n),i=[],s=[];for(const o of e){let a;const u=r.Ma.get(o);if(u&&0!==u.length){a=yield zd(r.localStore,Hr(u[0]));for(const d of u){const g=r.Fa.get(d),m=yield KK(r,g);m.snapshot&&s.push(m.snapshot)}}else{const d=yield FV(r.localStore,o);a=yield zd(r.localStore,d),yield ZC(r,dF(d),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function dF(n){return lk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ZK(n){return t=Ee(n).localStore,Ee(Ee(t).persistence).Qi();var t}function XK(n,e,t,r){return vD.apply(this,arguments)}function vD(){return(vD=(0,ie.A)(function*(n,e,t,r){const i=Ee(n);if(i.Qa)return void he("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield LV(i.localStore,gk(s[0])),a=Wp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,kn.EMPTY_BYTE_STRING);yield Ho(i,o,a);break}case"rejected":yield qd(i.localStore,e,!0),Xd(i,e,r);break;default:xe()}})).apply(this,arguments)}function eQ(n,e,t){return ID.apply(this,arguments)}function ID(){return(ID=(0,ie.A)(function*(n,e,t){const r=Av(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){he("SyncEngine","Adding an already active target "+i);continue}const s=yield FV(r.localStore,i),o=yield zd(r.localStore,s);yield ZC(r,dF(s),o.targetId,!1,o.resumeToken),Ev(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield qd(r.localStore,i,!1).then(()=>{Wd(r.remoteStore,i),Xd(r,i)}).catch(Ma))}})).apply(this,arguments)}function Av(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=aF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jK.bind(null,e),e.Ca.d_=RK.bind(null,e.eventManager),e.Ca.$a=PK.bind(null,e.eventManager),e}function ED(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$K.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HK.bind(null,e),e}let eh=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,ie.A)(function*(){r.serializer=ig(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return NV(this.persistence,new xV,t.initialUser,this.serializer)}Ga(t){return new uC(fv.Zr,this.serializer)}Wa(t){return new $V}terminate(){var t=this;return(0,ie.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class wD extends eh{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ie.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield ED(r.Ja.syncEngine),yield Kd(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return NV(this.persistence,new xV,e.initialUser,this.serializer)}ja(e,t){return new AV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new AW(t,this.persistence);return new wW(e.asyncQueue,r)}Ga(e){const t=dC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?zr.withCacheSize(this.cacheSizeBytes):zr.DEFAULT;return new lC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,zV(),Iv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new $V}}class hF extends wD{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ie.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof IC&&(r.sharedClientState.syncEngine={no:YK.bind(null,i),ro:XK.bind(null,i),io:eQ.bind(null,i),Qi:ZK.bind(null,i),eo:QK.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,ie.A)(function*(o){yield function JK(n,e){return _D.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=zV();if(!IC.D(t))throw new ce(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new IC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let th=(()=>{class n{initialize(t,r){var i=this;return(0,ie.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>uF(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=GK.bind(null,i.syncEngine),yield UC(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new SK}createDatastore(t){const r=ig(t.databaseInfo.databaseId),i=new dK(t.databaseInfo);return new pK(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>uF(this.syncEngine,r,0),u=HV.D()?new HV:new uK,new mK(i,s,o,a,u);var i,s,o,a,u}createSyncEngine(t,r){return function(s,o,a,u,d,g,m){const v=new kK(s,o,a,u,d,g);return m&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,ie.A)(function*(){var r,i,s;yield(s=(0,ie.A)(function*(a){const u=Ee(a);he("RemoteStore","RemoteStore shutting down."),u.L_.add(5),yield Gd(u),u.k_.shutdown(),u.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function fF(n,e=10240){let t=0;return{read:()=>(0,ie.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ie.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Tv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):jn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class rQ{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new pr,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,ie.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,ie.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,ie.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new MK(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,ie.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,ie.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,ie.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class iQ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ie.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ce(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ie.A)(function*(o,a){const u=Ee(o),d={documents:a.map(w=>Qp(u.serializer,w))},g=yield u.Lo("BatchGetDocuments",u.serializer.databaseId,Et.emptyPath(),d,a.length),m=new Map;g.forEach(w=>{const T=function E7(n,e){return"found"in e?function(r,i){Ve(!!i.found);const s=Ks(r,i.found.name),o=$n(i.found.updateTime),a=i.found.createTime?$n(i.found.createTime):Ue.min(),u=new Dr({mapValue:{fields:i.found.fields}});return hn.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){Ve(!!i.missing),Ve(!!i.readTime);const s=Ks(r,i.missing),o=$n(i.readTime);return hn.newNoDocument(s,o)}(n,e):xe()}(u.serializer,w);m.set(T.key.toString(),T)});const v=[];return a.forEach(w=>{const T=m.get(w.toString());Ve(!!T),v.push(T)}),v}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ie.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Te.fromPath(i);e.mutations.push(new zT(s,e.precondition(s)))}),yield(r=(0,ie.A)(function*(s,o){const a=Ee(s),u={writes:o.map(d=>Yp(a.serializer,d))};yield a.Mo("Commit",a.serializer.databaseId,Et.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xe();t=Ue.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ce(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ue.min())?vn.exists(!1):vn.updateTime(t):vn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ue.min()))throw new ce(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vn.updateTime(t)}return vn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class sQ{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new wC(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,ie.A)(function*(){const t=new iQ(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!xp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Nk(t)}return!1}}class oQ{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=fr.UNAUTHENTICATED,this.clientId=T1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,ie.A)(function*(u){he("FirestoreClient","Received user=",u.uid),yield o.authCredentialListener(u),o.user=u});return function(u){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(he("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ie.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Yd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function AD(n,e){return TD.apply(this,arguments)}function TD(){return TD=(0,ie.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ie.A)(function*(s){r.isEqual(s)||(yield OV(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),TD.apply(this,arguments)}function pF(n,e){return CD.apply(this,arguments)}function CD(){return(CD=(0,ie.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield DD(n);he("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>JV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>JV(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function DD(n){return bD.apply(this,arguments)}function bD(){return(bD=(0,ie.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{yield AD(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Ui("Error using user provided cache. Falling back to memory cache: "+e),yield AD(n,new eh)}}else he("FirestoreClient","Using default OfflineComponentProvider"),yield AD(n,new eh);var i;return n._offlineComponents})).apply(this,arguments)}function Cv(n){return SD.apply(this,arguments)}function SD(){return(SD=(0,ie.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),yield pF(n,n._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),yield pF(n,new th))),n._onlineComponents})).apply(this,arguments)}function gF(n){return DD(n).then(e=>e.persistence)}function nh(n){return DD(n).then(e=>e.localStore)}function mF(n){return Cv(n).then(e=>e.remoteStore)}function RD(n){return Cv(n).then(e=>e.syncEngine)}function rh(n){return PD.apply(this,arguments)}function PD(){return(PD=(0,ie.A)(function*(n){const e=yield Cv(n),t=e.eventManager;return t.onListen=VK.bind(null,e.syncEngine),t.onUnlisten=LK.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=FK.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=UK.bind(null,e.syncEngine),t})).apply(this,arguments)}function yF(n,e,t={}){const r=new pr;return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function(s,o,a,u,d){const g=new Tv({next:v=>{g.Za(),o.enqueueAndForget(()=>zC(s,m));const w=v.docs.has(a);!w&&v.fromCache?d.reject(new ce(J.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&u&&"server"===u.source?d.reject(new ce(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new KC(Md(a.path),g,{includeMetadataChanges:!0,_a:!0});return $C(s,m)}(yield rh(n),n.asyncQueue,e,t,r)})),r.promise}function vF(n,e,t={}){const r=new pr;return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function(s,o,a,u,d){const g=new Tv({next:v=>{g.Za(),o.enqueueAndForget(()=>zC(s,m)),v.fromCache&&"server"===u.source?d.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new KC(a,g,{includeMetadataChanges:!0,_a:!0});return $C(s,m)}(yield rh(n),n.asyncQueue,e,t,r)})),r.promise}function IF(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const EF=new Map;function MD(n,e,t){if(!t)throw new ce(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wF(n,e,t,r){if(!0===e&&!0===r)throw new ce(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function AF(n){if(!Te.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TF(n){if(Te.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Dv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":xe()}function vt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Dv(n);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function CF(n,e){if(e<=0)throw new ce(J.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class DF{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=IF(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class og{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DF({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DF(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new lW;switch(r.type){case"firstParty":return new pW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,ie.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=EF.get(t);r&&(he("ComponentProvider","Removing Datastore"),EF.delete(t),r.terminate())}(this),Promise.resolve()}}class br{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new br(this.firestore,e,this._query)}}class fn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fn(this.firestore,e,this._key)}}class Qs extends br{constructor(e,t,r){super(e,t,Md(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fn(this.firestore,null,new Te(e))}withConverter(e){return new Qs(this.firestore,e,this._path)}}function SF(n,e,...t){if(n=(0,kt.Ku)(n),MD("collection","path",e),n instanceof og){const r=Et.fromString(e,...t);return TF(r),new Qs(n,null,r)}{if(!(n instanceof fn||n instanceof Qs))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return TF(r),new Qs(n.firestore,null,r)}}function bv(n,e,...t){if(n=(0,kt.Ku)(n),1===arguments.length&&(e=T1.newId()),MD("doc","path",e),n instanceof og){const r=Et.fromString(e,...t);return AF(r),new fn(n,null,new Te(r))}{if(!(n instanceof fn||n instanceof Qs))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return AF(r),new fn(n.firestore,n instanceof Qs?n.converter:null,new Te(r))}}function RF(n,e){return n=(0,kt.Ku)(n),e=(0,kt.Ku)(e),(n instanceof fn||n instanceof Qs)&&(e instanceof fn||e instanceof Qs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function xD(n,e){return n=(0,kt.Ku)(n),e=(0,kt.Ku)(e),n instanceof br&&e instanceof br&&n.firestore===e.firestore&&Bp(n._query,e._query)&&n.converter===e.converter}class PF{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new wC(this,"async_queue_retry"),this.Vu=()=>{const r=Iv();r&&he("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Iv();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Iv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new pr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,ie.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!xa(t))throw t;he("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,jn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=jC.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&xe()}verifyOperationInProgress(){}wu(){var e=this;return(0,ie.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function ND(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class vQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new pr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wt extends og{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new PF,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,ie.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new PF(t),e._firestoreClient=void 0,yield t}})()}}function In(n){if(n._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||MF(n),n._firestoreClient}function MF(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new qW(n._databaseId,u,n._persistenceKey,(g=i).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,IF(g.experimentalLongPollingOptions),g.useFetchStreams));var u,g;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new oQ(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function OD(){return(OD=(0,ie.A)(function*(n){Ui("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();xF(n,th.provider,{build:t=>new hF(t,e.cacheSizeBytes)})})).apply(this,arguments)}function xF(n,e,t){if((n=vt(n,Wt))._firestoreClient||n._terminated)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ce(J.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},MF(n)}class Ys{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ys(kn.fromBase64String(e))}catch(t){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ys(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pc{constructor(e){this._methodName=e}}class Sv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}}class Rv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const PQ=/^__.*__$/;class MQ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new jo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vd(e,this.data,t,this.fieldTransforms)}}class NF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new jo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function OF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class Pv{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Pv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Nv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(OF(this.Cu)&&PQ.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class xQ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ig(e)}Qu(e,t,r,i=!1){return new Pv({Cu:e,methodName:t,qu:r,path:dn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gc(n){const e=n._freezeSettings(),t=ig(n._databaseId);return new xQ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Mv(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);jD("Data must be an object, but it was:",o,r);const a=FF(r,o);let u,d;if(s.merge)u=new Ti(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const g=[];for(const m of s.mergeFields){const v=cg(e,m,t);if(!o.contains(v))throw new ce(J.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);UF(g,v)||g.push(v)}u=new Ti(g),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new MQ(new Dr(a),u,d)}class ug extends pc{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ug}}function kF(n,e,t){return new Pv({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class kD extends pc{_toFieldTransform(e){return new zp(e.path,new Od)}isEqual(e){return e instanceof kD}}class VD extends pc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=kF(this,e,!0),r=this.Ku.map(s=>mc(s,t)),i=new sc(r);return new zp(e.path,i)}isEqual(e){return e instanceof VD&&(0,kt.bD)(this.Ku,e.Ku)}}class FD extends pc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=kF(this,e,!0),r=this.Ku.map(s=>mc(s,t)),i=new oc(r);return new zp(e.path,i)}isEqual(e){return e instanceof FD&&(0,kt.bD)(this.Ku,e.Ku)}}class LD extends pc{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new kd(e.serializer,Ek(e.serializer,this.$u));return new zp(e.path,t)}isEqual(e){return e instanceof LD&&this.$u===e.$u}}function UD(n,e,t,r){const i=n.Qu(1,e,t);jD("Data must be an object, but it was:",i,r);const s=[],o=Dr.empty();Na(r,(u,d)=>{const g=xv(e,u,t);d=(0,kt.Ku)(d);const m=i.Nu(g);if(d instanceof ug)s.push(g);else{const v=mc(d,m);null!=v&&(s.push(g),o.set(g,v))}});const a=new Ti(s);return new NF(o,a,i.fieldTransforms)}function BD(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[cg(e,r,t)],u=[i];if(s.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(cg(e,s[v])),u.push(s[v+1]);const d=[],g=Dr.empty();for(let v=a.length-1;v>=0;--v)if(!UF(d,a[v])){const w=a[v];let T=u[v];T=(0,kt.Ku)(T);const D=o.Nu(w);if(T instanceof ug)d.push(w);else{const M=mc(T,D);null!=M&&(d.push(w),g.set(w,M))}}const m=new Ti(d);return new NF(g,m,o.fieldTransforms)}function VF(n,e,t,r=!1){return mc(t,n.Qu(r?4:3,e))}function mc(n,e){if(LF(n=(0,kt.Ku)(n)))return jD("Unsupported field value:",e,n),FF(n,e);if(n instanceof pc)return function(r,i){if(!OF(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=mc(a,i.Lu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,kt.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Ek(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=_n.fromDate(r);return{timestampValue:Ld(i.serializer,s)}}if(r instanceof _n){const s=new _n(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ld(i.serializer,s)}}if(r instanceof Sv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ys)return{bytesValue:Hk(i.serializer,r._byteString)};if(r instanceof fn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:YT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Rv)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.Bu("VectorValues must only contain numeric values.");return HT(a.serializer,u)})}}}}};var a;throw i.Bu(`Unsupported field value: ${Dv(r)}`)}(n,e)}function FF(n,e){const t={};return j1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Na(n,(r,i)=>{const s=mc(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function LF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof _n||n instanceof Sv||n instanceof Ys||n instanceof fn||n instanceof pc||n instanceof Rv)}function jD(n,e,t){if(!LF(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Dv(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function cg(n,e,t){if((e=(0,kt.Ku)(e))instanceof zo)return e._internalPath;if("string"==typeof e)return xv(n,e);throw Nv("Field path arguments must be of type string or ",n,!1,void 0,t)}const NQ=new RegExp("[~\\*/\\[\\]]");function xv(n,e,t){if(e.search(NQ)>=0)throw Nv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zo(...e.split("."))._internalPath}catch{throw Nv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nv(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ce(J.INVALID_ARGUMENT,a+n+u)}function UF(n,e){return n.some(t=>t.isEqual(e))}class lg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new OQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ov("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class OQ extends lg{data(){return super.data()}}function Ov(n,e){return"string"==typeof e?xv(n,e):e instanceof zo?e._internalPath:e._delegate._internalPath}function BF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $D{}class dg extends $D{}function qa(n,e,...t){let r=[];e instanceof $D&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof ih).length,a=s.filter(u=>u instanceof hg).length;if(o>1||o>0&&a>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class hg extends dg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new hg(e,t,r)}_apply(e){const t=this._parse(e);return zF(e._query,t),new br(e.firestore,e.converter,jT(e._query,t))}_parse(e){const t=gc(e.firestore);return function(s,o,a,u,d,g,m){let v;if(d.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){HF(m,g);const w=[];for(const T of m)w.push($F(u,s,T));v={arrayValue:{values:w}}}else v=$F(u,s,m)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||HF(m,g),v=VF(a,"where",m,"in"===g||"not-in"===g);return wt.create(d,g,v)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ih extends $D{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ih(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:jt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)zF(o,u),o=jT(o,u)}(e._query,t),new br(e.firestore,e.converter,jT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class HD extends dg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new HD(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lp(s,o)}(e._query,this._field,this._direction);return new br(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Uo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class kv extends dg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new kv(e,t,r)}_apply(e){return new br(e.firestore,e.converter,Xy(e._query,this._limit,this._limitType))}}class Vv extends dg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Vv(e,t,r)}_apply(e){const t=jF(e,this.type,this._docOrFields,this._inclusive);return new br(e.firestore,e.converter,(s=t,new Uo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Fv extends dg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Fv(e,t,r)}_apply(e){const t=jF(e,this.type,this._docOrFields,this._inclusive);return new br(e.firestore,e.converter,(s=t,new Uo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function jF(n,e,t,r){if(t[0]=(0,kt.Ku)(t[0]),t[0]instanceof lg)return function(s,o,a,u,d){if(!u)throw new ce(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const g=[];for(const m of xd(s))if(m.field.isKeyField())g.push(rc(o,u.key));else{const v=u.data.field(m.field);if(qy(v))throw new ce(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===v){const w=m.field.canonicalString();throw new ce(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}g.push(v)}return new La(g,d)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=gc(n.firestore);return function(o,a,u,d,g,m){const v=o.explicitOrderBy;if(g.length>v.length)throw new ce(J.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let T=0;T<g.length;T++){const D=g[T];if(v[T].field.isKeyField()){if("string"!=typeof D)throw new ce(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof D}`);if(!BT(o)&&-1!==D.indexOf("/"))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${D}' contains a slash.`);const M=o.path.child(Et.fromString(D));if(!Te.isDocumentKey(M))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const z=new Te(M);w.push(rc(a,z))}else{const M=VF(u,d,D);w.push(M)}}return new La(w,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function $F(n,e,t){if("string"==typeof(t=(0,kt.Ku)(t))){if(""===t)throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BT(e)&&-1!==t.indexOf("/"))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Et.fromString(t));if(!Te.isDocumentKey(r))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rc(n,new Te(r))}if(t instanceof fn)return rc(n,t._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dv(t)}.`)}function HF(n,e){if(!Array.isArray(n)||0===n.length)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zF(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ce(J.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class zD{convertValue(e,t="none"){switch(Va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Na(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>yn(o.doubleValue));return new Rv(s)}convertGeoPoint(e){return new Sv(yn(e.latitude),yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Gy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Op(e));default:return null}}convertTimestamp(e){const t=Fo(e);return new _n(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Et.fromString(e);Ve(tV(r));const i=new Oa(r.get(1),r.get(3)),s=new Te(r.popFirst(5));return i.isEqual(t)||jn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Lv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class HQ extends zD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ys(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,t)}}class _c{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qo extends lg{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ov("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class fg extends qo{data(e={}){return super.data(e)}}class Ga{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new _c(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new fg(this._firestore,this._userDataWriter,r.key,r,new _c(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new fg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _c(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new fg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new _c(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,g=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),g=o.indexOf(a.doc.key)),{type:qQ(a.type),doc:u,oldIndex:d,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}function GF(n,e){return n instanceof qo&&e instanceof qo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ga&&e instanceof Ga&&n._firestore===e._firestore&&xD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Wa extends zD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ys(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,t)}}function WF(n,e,t){n=vt(n,fn);const r=vt(n.firestore,Wt),i=Lv(n.converter,e,t);return sh(r,[Mv(gc(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,vn.none())])}function KF(n,e,t,...r){n=vt(n,fn);const i=vt(n.firestore,Wt),s=gc(i);let o;return o="string"==typeof(e=(0,kt.Ku)(e))||e instanceof zo?BD(s,"updateDoc",n._key,e,t,r):UD(s,"updateDoc",n._key,e),sh(i,[o.toMutation(n._key,vn.exists(!0))])}function QF(n,...e){var t,r,i;n=(0,kt.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||ND(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ND(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,d,g;if(n instanceof fn)d=vt(n.firestore,Wt),g=Md(n._key.path),u={next:m=>{e[o]&&e[o](qD(d,n,m))},error:e[o+1],complete:e[o+2]};else{const m=vt(n,br);d=vt(m.firestore,Wt),g=m._query;const v=new Wa(d);u={next:w=>{e[o]&&e[o](new Ga(d,v,m,w))},error:e[o+1],complete:e[o+2]},BF(n._query)}return function(v,w,T,D){const M=new Tv(D),z=new KC(w,M,T);return v.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return $C(yield rh(v),z)})),()=>{M.Za(),v.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return zC(yield rh(v),z)}))}}(In(d),g,a,u)}function sh(n,e){return function(r,i){const s=new pr;return r.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function BK(n,e,t){return nD.apply(this,arguments)}(yield RD(r),i,s)})),s.promise}(In(n),e)}function qD(n,e,t){const r=t.docs.get(e._key),i=new Wa(n);return new qo(n,i,e._key,r,new _c(t.hasPendingWrites,t.fromCache),e.converter)}const cY={maxAttempts:5};class YF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gc(e)}set(e,t,r){this._verifyNotCommitted();const i=Ka(e,this._firestore),s=Lv(i.converter,t,r),o=Mv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,vn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Ka(e,this._firestore);let o;return o="string"==typeof(t=(0,kt.Ku)(t))||t instanceof zo?BD(this._dataReader,"WriteBatch.update",s._key,t,r,i):UD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ka(e,this._firestore);return this._mutations=this._mutations.concat(new Fd(t._key,vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ka(n,e){if((n=(0,kt.Ku)(n)).firestore!==e)throw new ce(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class lY extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=gc(t)}get(t){const r=Ka(t,this._firestore),i=new HQ(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return xe();const o=s[0];if(o.isFoundDocument())return new lg(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new lg(this._firestore,i,r._key,null,r.converter);throw xe()})}set(t,r,i){const s=Ka(t,this._firestore),o=Lv(s.converter,r,i),a=Mv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Ka(t,this._firestore);let a;return a="string"==typeof(r=(0,kt.Ku)(r))||r instanceof zo?BD(this._dataReader,"Transaction.update",o._key,r,i,s):UD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Ka(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ka(e,this._firestore),r=new Wa(this._firestore);return super.get(e).then(i=>new qo(this._firestore,r,t._key,i._document,new _c(!1,!1),t.converter))}}function WD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function eL(){if(typeof Uint8Array>"u")throw new ce("unimplemented","Uint8Arrays are not available in this environment.")}function tL(){if(!function HW(){return typeof atob<"u"}())throw new ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Ad=Id.SDK_VERSION,(0,Id._registerComponent)(new h1.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Wt(new hW(r.getProvider("auth-internal")),new gW(r.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oa(d.options.projectId,g)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Id.registerVersion)(E1,"4.7.3",e),(0,Id.registerVersion)(E1,"4.7.3","esm2017")}();class pg{constructor(e){this._delegate=e}static fromBase64String(e){return tL(),new pg(Ys.fromBase64String(e))}static fromUint8Array(e){return eL(),new pg(Ys.fromUint8Array(e))}toBase64(){return tL(),this._delegate.toBase64()}toUint8Array(){return eL(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function KD(n){return function IY(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class EY{enableIndexedDbPersistence(e,t){return function EQ(n,e){Ui("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return xF(n,th.provider,{build:r=>new wD(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function wQ(n){return OD.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function AQ(n){if(n._initialized&&!n._terminated)throw new ce(J.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ie.A)(function*(){try{yield(t=(0,ie.A)(function*(i){if(!zs.D())return Promise.resolve();const s=i+"main";yield zs.delete(s)}),function r(i){return t.apply(this,arguments)})(dC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class nL{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Oa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ui("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function bF(n,e,t,r={}){var i;const s=(n=vt(n,og))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ui("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=fr.MOCK_USER;else{a=(0,kt.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new fr(d)}n._authCredentials=new dW(new w1(a,u))}}(this._delegate,e,t,r)}enableNetwork(){return function CQ(n){return function aQ(n){return n.asyncQueue.enqueue((0,ie.A)(function*(){const e=yield gF(n),t=yield mF(n);return e.setNetworkEnabled(!0),function(i){const s=Ee(i);return s.L_.delete(0),sg(s)}(t)}))}(In(n=vt(n,Wt)))}(this._delegate)}disableNetwork(){return function DQ(n){return function uQ(n){return n.asyncQueue.enqueue((0,ie.A)(function*(){const e=yield gF(n),t=yield mF(n);return e.setNetworkEnabled(!1),(r=(0,ie.A)(function*(s){const o=Ee(s);o.L_.add(0),yield Gd(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(In(n=vt(n,Wt)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,wF("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function TQ(n){return function(t){const r=new pr;return t.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function zK(n,e){return aD.apply(this,arguments)}(yield RD(t),r)})),r.promise}(In(n=vt(n,Wt)))}(this._delegate)}onSnapshotsInSync(e){return function eY(n,e){return function hQ(n,e){const t=new Tv(e);return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return i=yield rh(n),s=t,Ee(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return i=yield rh(n),s=t,void Ee(i).Y_.delete(s);var i,s}))}}(In(n=vt(n,Wt)),ND(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new oh(this,SF(this._delegate,e))}catch(t){throw ci(t,"collection()","Firestore.collection()")}}doc(e){try{return new ss(this,bv(this._delegate,e))}catch(t){throw ci(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new li(this,function yQ(n,e){if(n=vt(n,og),MD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new br(n,null,(r=e,new Uo(Et.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw ci(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function dY(n,e,t){n=vt(n,Wt);const r=Object.assign(Object.assign({},cY),t);return function(s){if(s.maxAttempts<1)throw new ce(J.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new pr;return s.asyncQueue.enqueueAndForget((0,ie.A)(function*(){const d=yield function _F(n){return Cv(n).then(e=>e.datastore)}(s);new sQ(s.asyncQueue,d,a,o,u).au()})),u.promise}(In(n),i=>e(new lY(n,i)),r)}(this._delegate,t=>e(new rL(this,t)))}batch(){return In(this._delegate),new iL(new YF(this._delegate,e=>sh(this._delegate,e)))}loadBundle(e){return function bQ(n,e){const t=In(n=vt(n,Wt)),r=new vQ;return function fQ(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?kk().encode(o):o,g=function(g,m){if(g instanceof Uint8Array)return fF(g,m);if(g instanceof ArrayBuffer)return fF(new Uint8Array(g),m);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new rQ(g,a);var g}(t,ig(e));n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){!function tQ(n,e,t){const r=Ee(n);var i;(i=(0,ie.A)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(T,D){const M=Ee(T),z=$n(D.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",F=>M.Gr.getBundleMetadata(F,D.id)).then(F=>!!F&&F.createTime.compareTo(z)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(T=d).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);u._updateProgress(nF(d));const g=new xK(d,o.localStore,a.serializer);let m=yield a.Ua();for(;m;){const w=yield g.la(m);w&&u._updateProgress(w),m=yield a.Ua()}const v=yield g.complete();return yield Ho(o,v.Ia,void 0),yield function(T,D){const M=Ee(T);return M.persistence.runTransaction("Save bundle","readwrite",z=>M.Gr.saveBundleMetadata(z,D))}(o.localStore,d),u._completeWith(v.progress),Promise.resolve(v.Pa)}catch(d){return Ui("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var T}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield RD(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function SQ(n,e){return function pQ(n,e){return n.asyncQueue.enqueue((0,ie.A)(function*(){return function(r,i){const s=Ee(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield nh(n),e)}))}(In(n=vt(n,Wt)),e).then(t=>t?new br(n,null,t.query):null)}(this._delegate,e).then(t=>t?new li(this,t):null)}}class Bv extends zD{constructor(e){super(),this.firestore=e}convertBytes(e){return new pg(new Ys(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ss.forKey(t,this.firestore,null)}}class rL{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Bv(e)}get(e){const t=vc(e);return this._delegate.get(t).then(r=>new gg(this._firestore,new qo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=vc(e);return r?(WD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=vc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=vc(e);return this._delegate.delete(t),this}}class iL{constructor(e){this._delegate=e}set(e,t,r){const i=vc(e);return r?(WD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=vc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=vc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class yc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new fg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mg(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=yc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new yc(e,new Bv(e),t),i.set(t,s)),s}}yc.INSTANCES=new WeakMap;class ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bv(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ss(t,new fn(t._delegate,r,new Te(e)))}static forKey(e,t,r){return new ss(t,new fn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new oh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new oh(this.firestore,SF(this._delegate,e))}catch(t){throw ci(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,kt.Ku)(e))instanceof fn&&RF(this._delegate,e)}set(e,t){t=WD("DocumentReference.set",t);try{return t?WF(this._delegate,e,t):WF(this._delegate,e)}catch(r){throw ci(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?KF(this._delegate,e):KF(this._delegate,e,t,...r)}catch(i){throw ci(i,"updateDoc()","DocumentReference.update()")}}delete(){return function ZQ(n){return sh(vt(n.firestore,Wt),[new Fd(n._key,vn.none())])}(this._delegate)}onSnapshot(...e){const t=sL(e),r=oL(e,i=>new gg(this.firestore,new qo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return QF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function WQ(n){n=vt(n,fn);const e=vt(n.firestore,Wt),t=In(e),r=new Wa(e);return function cQ(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return(r=(0,ie.A)(function*(s,o,a){try{const u=yield function(g,m){const v=Ee(g);return v.persistence.runTransaction("read document","readonly",w=>v.localDocuments.getDocument(w,m))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ce(J.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=Yd(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield nh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new qo(e,r,n._key,i,new _c(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function KQ(n){n=vt(n,fn);const e=vt(n.firestore,Wt);return yF(In(e),n._key,{source:"server"}).then(t=>qD(e,n,t))}(this._delegate):function GQ(n){n=vt(n,fn);const e=vt(n.firestore,Wt);return yF(In(e),n._key).then(t=>qD(e,n,t))}(this._delegate),t.then(r=>new gg(this.firestore,new qo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ss(this.firestore,this._delegate.withConverter(e?yc.getInstance(this.firestore,e):null))}}function ci(n,e,t){return n.message=n.message.replace(e,t),n}function sL(n){for(const e of n)if("object"==typeof e&&!KD(e))return e;return{}}function oL(n,e){var t,r;let i;return i=KD(n[0])?n[0]:KD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class gg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ss(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return GF(this._delegate,e._delegate)}}class mg extends gg{data(e){const t=this._delegate.data(e);return this._delegate._converter||function cW(n,e){n||xe()}(void 0!==t),t}}class li{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bv(e)}where(e,t,r){try{return new li(this.firestore,qa(this._delegate,function kQ(n,e,t){const r=e,i=Ov("where",n);return hg._create(i,r,t)}(e,t,r)))}catch(i){throw ci(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new li(this.firestore,qa(this._delegate,function VQ(n,e="asc"){const t=e,r=Ov("orderBy",n);return HD._create(r,t)}(e,t)))}catch(r){throw ci(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new li(this.firestore,qa(this._delegate,function FQ(n){return CF("limit",n),kv._create("limit",n,"F")}(e)))}catch(t){throw ci(t,"limit()","Query.limit()")}}limitToLast(e){try{return new li(this.firestore,qa(this._delegate,function LQ(n){return CF("limitToLast",n),kv._create("limitToLast",n,"L")}(e)))}catch(t){throw ci(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new li(this.firestore,qa(this._delegate,function UQ(...n){return Vv._create("startAt",n,!0)}(...e)))}catch(t){throw ci(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new li(this.firestore,qa(this._delegate,function BQ(...n){return Vv._create("startAfter",n,!1)}(...e)))}catch(t){throw ci(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new li(this.firestore,qa(this._delegate,function jQ(...n){return Fv._create("endBefore",n,!1)}(...e)))}catch(t){throw ci(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new li(this.firestore,qa(this._delegate,function $Q(...n){return Fv._create("endAt",n,!0)}(...e)))}catch(t){throw ci(t,"endAt()","Query.endAt()")}}isEqual(e){return xD(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function YQ(n){n=vt(n,br);const e=vt(n.firestore,Wt),t=In(e),r=new Wa(e);return function lQ(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return(r=(0,ie.A)(function*(s,o,a){try{const u=yield mv(s,o,!0),d=new sF(o,u.Ts),g=d.ma(u.documents),m=d.applyChanges(g,!1);a.resolve(m.snapshot)}catch(u){const d=Yd(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield nh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ga(e,r,n,i))}(this._delegate):"server"===e?.source?function JQ(n){n=vt(n,br);const e=vt(n.firestore,Wt),t=In(e),r=new Wa(e);return vF(t,n._query,{source:"server"}).then(i=>new Ga(e,r,n,i))}(this._delegate):function QQ(n){n=vt(n,br);const e=vt(n.firestore,Wt),t=In(e),r=new Wa(e);return BF(n._query),vF(t,n._query).then(i=>new Ga(e,r,n,i))}(this._delegate),t.then(r=>new QD(this.firestore,new Ga(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=sL(e),r=oL(e,i=>new QD(this.firestore,new Ga(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return QF(this._delegate,t,r)}withConverter(e){return new li(this.firestore,this._delegate.withConverter(e?yc.getInstance(this.firestore,e):null))}}class AY{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new mg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class QD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new li(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new mg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new AY(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new mg(this._firestore,r))})}isEqual(e){return GF(this._delegate,e._delegate)}}class oh extends li{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ss(this.firestore,e):null}doc(e){try{return new ss(this.firestore,void 0===e?bv(this._delegate):bv(this._delegate,e))}catch(t){throw ci(t,"doc()","CollectionReference.doc()")}}add(e){return function XQ(n,e){const t=vt(n.firestore,Wt),r=bv(n),i=Lv(n.converter,e);return sh(t,[Mv(gc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,vn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ss(this.firestore,t))}isEqual(e){return RF(this._delegate,e._delegate)}withConverter(e){return new oh(this.firestore,this._delegate.withConverter(e?yc.getInstance(this.firestore,e):null))}}function vc(n){return vt(n,fn)}class YD{constructor(...e){this._delegate=new zo(...e)}static documentId(){return new YD(dn.keyField().canonicalString())}isEqual(e){return(e=(0,kt.Ku)(e))instanceof zo&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ic{constructor(e){this._delegate=e}static serverTimestamp(){const e=function fY(){return new kD("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ic(e)}static delete(){const e=function hY(){return new ug("deleteField")}();return e._methodName="FieldValue.delete",new Ic(e)}static arrayUnion(...e){const t=function pY(...n){return new VD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ic(t)}static arrayRemove(...e){const t=function gY(...n){return new FD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ic(t)}static increment(e){const t=function mY(n){return new LD("increment",n)}(e);return t._methodName="FieldValue.increment",new Ic(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const TY={Firestore:nL,GeoPoint:Sv,Timestamp:_n,Blob:pg,Transaction:rL,WriteBatch:iL,DocumentReference:ss,DocumentSnapshot:gg,Query:li,QueryDocumentSnapshot:mg,QuerySnapshot:QD,CollectionReference:oh,FieldPath:YD,FieldValue:Ic,setLogLevel:function wY(n){!function uW(n){Pa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function aL(n,e){return function bY(n,e=QO){return new dt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function JD(n,e){return aL(n,e).pipe(Oe(t=>({payload:t,type:"query"})))}!function DY(n){(function CY(n,e){n.INTERNAL.registerComponent(new h1.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},TY)))})(n,(e,t)=>new nL(e,t,new EY)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Ra.A);class uL{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=pL(r,t);return new dL(i,s,this.afs)}snapshotChanges(){return function SY(n,e){return aL(n,e).pipe(_y(void 0),CT(),Oe(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Li)}valueChanges(e={}){return this.snapshotChanges().pipe(Oe(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return S(this.ref.get(e)).pipe(Li)}}function jv(n,e){return JD(n,e).pipe(_y(void 0),CT(),Oe(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(m=>m.doc.ref.isEqual(a.ref)),g=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&g&&JSON.stringify(g.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function cL(n,e,t){return jv(n,t).pipe(vy((r,i)=>function RY(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function PY(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ZD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ZD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ZD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Ht(),Oe(r=>r.map(i=>({type:i.type,payload:i}))))}function ZD(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function lL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class dL{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=jv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Oe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(_y(void 0),CT(),rs(([r,i])=>i.length>0||!r),Oe(([,r])=>r),Li)}auditTrail(e){return this.stateChanges(e).pipe(vy((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lL(e);return cL(this.query,t,this.afs.schedulers.outsideAngular).pipe(Li)}valueChanges(e={}){return JD(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Li)}get(e){return S(this.query.get(e)).pipe(Li)}add(e){return this.ref.add(e)}doc(e){return new uL(this.ref.doc(e),this.afs)}}class MY{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jv(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(t=>t.filter(r=>e.indexOf(r.type)>-1)),rs(t=>t.length>0),Li):jv(this.query,this.afs.schedulers.outsideAngular).pipe(Li)}auditTrail(e){return this.stateChanges(e).pipe(vy((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lL(e);return cL(this.query,t,this.afs.schedulers.outsideAngular).pipe(Li)}valueChanges(e={}){return JD(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Li)}get(e){return S(this.query.get(e)).pipe(Li)}}const hL=new _e("angularfire2.enableFirestorePersistence"),fL=new _e("angularfire2.firestore.persistenceSettings"),xY=new _e("angularfire2.firestore.settings"),NY=new _e("angularfire2.firestore.use-emulator");function pL(n,e=(t=>t)){return{query:e(n),ref:n}}let OY=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,d,g,m,v,w,T,D,M,z,F){this.schedulers=u;const G=TT(t,a,r),ae=g;m&&l1(G,a,v,T,D,M,w,z),[this.firestore,this.persistenceEnabled$]=e1(`${G.name}.firestore`,"AngularFirestore",G.name,()=>{const ye=a.runOutsideAngular(()=>G.firestore());if(s&&ye.settings(s),ae&&ye.useEmulator(...ae),i&&!hy(o)){const Le=()=>{try{return S(ye.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(V){return typeof console<"u"&&console.warn(V),B(!1)}};return[ye,a.runOutsideAngular(Le)]}return[ye,B(!1)]},[s,ae,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=pL(i,r),a=this.schedulers.ngZone.run(()=>s);return new dL(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new MY(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new uL(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(me(Ly),me(Uy,8),me(hL,8),me(xY,8),me(Os),me(Lt),me(ZO),me(fL,8),me(NY,8),me(d1,8),me(i1,8),me(s1,8),me(o1,8),me(a1,8),me(u1,8),me(c1,8),me(YO,8))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),kY=(()=>{class n{constructor(){Ra.A.registerVersion("angularfire",AT.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:hL,useValue:!0},{provide:fL,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ni({type:n});static \u0275inj=ur({providers:[OY]})}return n})();const VY_firebase={apiKey:"AIzaSyDWOb8hpZ7JQcpPzpcNw6SW53_pG0V5UE0",authDomain:"wedding-29b48.firebaseapp.com",projectId:"wedding-29b48",storageBucket:"wedding-29b48.firebasestorage.app",messagingSenderId:"807343676966",appId:"1:807343676966:web:1c21870a5ee2dfbae790e7",measurementId:"YOUR_MEASUREMENT_ID"};let gL=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(pe(Co),pe(Ni))}}static{this.\u0275dir=Ye({type:n})}}return n})(),Ec=(()=>{class n extends gL{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Un(n)))(i||n)}}()}static{this.\u0275dir=Ye({type:n,features:[Ut]})}}return n})();const Js=new _e("NgValueAccessor"),UY={provide:Js,useExisting:St(()=>$v),multi:!0},jY=new _e("CompositionEventMode");let $v=(()=>{class n extends gL{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function BY(){const n=Ta()?Ta().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(pe(Co),pe(Ni),pe(jY,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&ln("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[mn([UY]),Ut]})}}return n})();const Gr=new _e("NgValidators"),Ya=new _e("NgAsyncValidators");function DL(n){return null!=n}function bL(n){return Qf(n)?S(n):n}function SL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function RL(n,e){return e.map(t=>t(n))}function PL(n){return n.map(e=>function HY(n){return!n.validate}(e)?e:t=>e.validate(t))}function XD(n){return null!=n?function ML(n){if(!n)return null;const e=n.filter(DL);return 0==e.length?null:function(t){return SL(RL(t,e))}}(PL(n)):null}function e0(n){return null!=n?function xL(n){if(!n)return null;const e=n.filter(DL);return 0==e.length?null:function(t){return function FY(...n){const e=no(n),{args:t,keys:r}=UN(n),i=new dt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,d=o;for(let g=0;g<o;g++){let m=!1;Hn(t[g]).subscribe(fe(s,v=>{m||(m=!0,d--),a[g]=v},()=>u--,void 0,()=>{(!u||!m)&&(d||s.next(r?jN(r,a):a),s.complete())}))}});return e?i.pipe(BN(e)):i}(RL(t,e).map(bL)).pipe(Oe(SL))}}(PL(n)):null}function NL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function t0(n){return n?Array.isArray(n)?n:[n]:[]}function zv(n,e){return Array.isArray(n)?n.includes(e):n===e}function VL(n,e){const t=t0(e);return t0(n).forEach(i=>{zv(t,i)||t.push(i)}),t}function FL(n,e){return t0(e).filter(t=>!zv(n,t))}class LL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=XD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=e0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class di extends LL{get formDirective(){return null}get path(){return null}}class Ja extends LL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class UL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let BL=(()=>{class n extends UL{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(pe(Ja,2))}}static{this.\u0275dir=Ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&zu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ut]})}}return n})(),jL=(()=>{class n extends UL{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(pe(di,10))}}static{this.\u0275dir=Ye({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&zu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ut]})}}return n})();const _g="VALID",Gv="INVALID",ah="PENDING",yg="DISABLED";function s0(n){return(Wv(n)?n.validators:n)||null}function o0(n,e){return(Wv(e)?e.asyncValidators:n)||null}function Wv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class a0{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_g}get invalid(){return this.status===Gv}get pending(){return this.status==ah}get disabled(){return this.status===yg}get enabled(){return this.status!==yg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(VL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(VL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FL(e,this._rawAsyncValidators))}hasValidator(e){return zv(this._rawValidators,e)}hasAsyncValidator(e){return zv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ah,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_g,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_g||this.status===ah)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yg:_g}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ah,this._hasOwnPendingAsyncValidator=!0;const t=bL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new xn,this.statusChanges=new xn}_calculateStatus(){return this._allControlsDisabled()?yg:this.errors?Gv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ah)?ah:this._anyControlsHaveStatus(Gv)?Gv:_g}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Wv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function WY(n){return Array.isArray(n)?XD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function KY(n){return Array.isArray(n)?e0(n):n||null}(this._rawAsyncValidators)}}class u0 extends a0{constructor(e,t,r){super(s0(t),o0(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function zL(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new de(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function HL(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new de(1e3,"");if(!r[t])throw new de(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const uh=new _e("CallSetDisabledState",{providedIn:"root",factory:()=>Kv}),Kv="always";function vg(n,e,t=Kv){c0(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function JY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qL(n,e)})}(n,e),function XY(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ZY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function YY(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Jv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function c0(n,e){const t=function OL(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(NL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function kL(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(NL(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Jv(e._rawValidators,i),Jv(e._rawAsyncValidators,i)}function qL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const iJ={provide:di,useExisting:St(()=>Xv)},Ig=(()=>Promise.resolve())();let Xv=(()=>{class n extends di{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new xn,this.form=new u0({},XD(t),e0(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ig.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),vg(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ig.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ig.then(()=>{const r=this._findContainer(t.path),i=new u0({});(function GL(n,e){c0(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ig.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ig.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function WL(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(pe(Gr,10),pe(Ya,10),pe(uh,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&ln("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[mn([iJ]),Ut]})}}return n})();function KL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function QL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const YL=class extends a0{constructor(e=null,t,r){super(s0(t),o0(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Wv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=QL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){KL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){KL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){QL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},aJ={provide:Ja,useExisting:St(()=>f0)},XL=(()=>Promise.resolve())();let f0=(()=>{class n extends Ja{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new YL,this._registered=!1,this.name="",this.update=new xn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function h0(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===$v?t=s:function nJ(n){return Object.getPrototypeOf(n.constructor)===Ec}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function d0(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){vg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){XL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&ad(r);XL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Qv(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(pe(di,9),pe(Gr,10),pe(Ya,10),pe(Js,10),pe(J_,8),pe(uh,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[mn([aJ]),Ut,vi]})}}return n})(),e2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),n2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=ur({})}}return n})(),MJ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=ur({imports:[n2]})}}return n})(),NJ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:uh,useValue:t.callSetDisabledState??Kv}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=ur({imports:[MJ]})}}return n})();class eI{}class tI{}class Zs{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Zs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Zs;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Zs?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class OJ{encodeKey(e){return I2(e)}encodeValue(e){return I2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const VJ=/%(\d[a-f0-9])/gi,FJ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function I2(n){return encodeURIComponent(n).replace(VJ,(e,t)=>FJ[t]??e)}function nI(n){return`${n}`}class Za{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new OJ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function kJ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(nI):[nI(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Za({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(nI(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(nI(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class LJ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function E2(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function w2(n){return typeof Blob<"u"&&n instanceof Blob}function A2(n){return typeof FormData<"u"&&n instanceof FormData}class Eg{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function UJ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Zs),this.context||(this.context=new LJ),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Za,this.urlWithParams=t}serializeBody(){return null===this.body?null:E2(this.body)||w2(this.body)||A2(this.body)||function BJ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Za?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||A2(this.body)?null:w2(this.body)?this.body.type||null:E2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Za?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,d=e.params||this.params;const g=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),d)),new Eg(t,r,s,{params:d,headers:u,context:g,reportProgress:a,responseType:i,withCredentials:o})}}var ch=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ch||{});class I0{constructor(e,t=200,r="OK"){this.headers=e.headers||new Zs,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class E0 extends I0{constructor(e={}){super(e),this.type=ch.ResponseHeader}clone(e={}){return new E0({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class lh extends I0{constructor(e={}){super(e),this.type=ch.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new lh({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class T2 extends I0{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function w0(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let C2=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Eg)s=t;else{let u,d;u=i.headers instanceof Zs?i.headers:new Zs(i.headers),i.params&&(d=i.params instanceof Za?i.params:new Za({fromObject:i.params})),s=new Eg(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=B(s).pipe(ld(u=>this.handler.handle(u)));if(t instanceof Eg||"events"===i.observe)return o;const a=o.pipe(rs(u=>u instanceof lh));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Oe(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(Oe(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(Oe(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(Oe(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Za).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,w0(i,r))}post(t,r,i={}){return this.request("POST",t,w0(i,r))}put(t,r,i={}){return this.request("PUT",t,w0(i,r))}static{this.\u0275fac=function(r){return new(r||n)(me(eI))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();function S2(n,e){return e(n)}function $J(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const zJ=new _e(""),wg=new _e(""),R2=new _e("");function qJ(){let n=null;return(e,t)=>{null===n&&(n=(be(zJ,{optional:!0})??[]).reduceRight($J,S2));const r=be(W_),i=r.add();return n(e,t).pipe(hp(()=>r.remove(i)))}}let P2=(()=>{class n extends eI{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=be(W_)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(wg),...this.injector.get(R2,[])]));this.chain=i.reduceRight((s,o)=>function HJ(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),S2)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(hp(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(me(tI),me(xi))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();const QJ=/^\)\]\}',?\n/;let x2=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new de(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?S(r.\u0275loadImpl()):B(null)).pipe(Ce(()=>new dt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((D,M)=>o.setRequestHeader(D,M.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const D=t.detectContentTypeHeader();null!==D&&o.setRequestHeader("Content-Type",D)}if(t.responseType){const D=t.responseType.toLowerCase();o.responseType="json"!==D?D:"text"}const a=t.serializeBody();let u=null;const d=()=>{if(null!==u)return u;const D=o.statusText||"OK",M=new Zs(o.getAllResponseHeaders()),z=function YJ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return u=new E0({headers:M,status:o.status,statusText:D,url:z}),u},g=()=>{let{headers:D,status:M,statusText:z,url:F}=d(),G=null;204!==M&&(G=typeof o.response>"u"?o.responseText:o.response),0===M&&(M=G?200:0);let ae=M>=200&&M<300;if("json"===t.responseType&&"string"==typeof G){const ye=G;G=G.replace(QJ,"");try{G=""!==G?JSON.parse(G):null}catch(Le){G=ye,ae&&(ae=!1,G={error:Le,text:G})}}ae?(s.next(new lh({body:G,headers:D,status:M,statusText:z,url:F||void 0})),s.complete()):s.error(new T2({error:G,headers:D,status:M,statusText:z,url:F||void 0}))},m=D=>{const{url:M}=d(),z=new T2({error:D,status:o.status||0,statusText:o.statusText||"Unknown Error",url:M||void 0});s.error(z)};let v=!1;const w=D=>{v||(s.next(d()),v=!0);let M={type:ch.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(M.total=D.total),"text"===t.responseType&&o.responseText&&(M.partialText=o.responseText),s.next(M)},T=D=>{let M={type:ch.UploadProgress,loaded:D.loaded};D.lengthComputable&&(M.total=D.total),s.next(M)};return o.addEventListener("load",g),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),t.reportProgress&&(o.addEventListener("progress",w),null!==a&&o.upload&&o.upload.addEventListener("progress",T)),o.send(a),s.next({type:ch.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",g),o.removeEventListener("timeout",m),t.reportProgress&&(o.removeEventListener("progress",w),null!==a&&o.upload&&o.upload.removeEventListener("progress",T)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(me(_N))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();const A0=new _e("XSRF_ENABLED"),N2=new _e("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),O2=new _e("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class k2{}let XJ=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=aN(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(me(Vi),me(Os),me(N2))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();function eZ(n,e){const t=n.url.toLowerCase();if(!be(A0)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=be(k2).getToken(),i=be(O2);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Xa=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Xa||{});function Ac(n,e){return{\u0275kind:n,\u0275providers:e}}function tZ(...n){const e=[C2,x2,P2,{provide:eI,useExisting:P2},{provide:tI,useExisting:x2},{provide:wg,useValue:eZ,multi:!0},{provide:A0,useValue:!0},{provide:k2,useClass:XJ}];for(const t of n)e.push(...t.\u0275providers);return function HE(n){return{\u0275providers:n}}(e)}const V2=new _e("LEGACY_INTERCEPTOR_FN");let rZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ni({type:n})}static{this.\u0275inj=ur({providers:[tZ(Ac(Xa.LegacyInterceptors,[{provide:V2,useFactory:qJ},{provide:wg,useExisting:V2,multi:!0}]))]})}}return n})();function cZ(n,e){if(1&n){const t=$u();ke(0,"div",35),ln("click",function(){return lr(t),Lr(Xl().hideImage())}),rr(1,"img",36),je()}if(2&n){const t=Xl();Nn(1),Ar("src",t.enlargedImageSrc,jE)}}let lZ=(()=>{class n{constructor(){this.isImageVisible=!1,this.enlargedImageSrc=""}showImage(t){this.enlargedImageSrc=t.src,this.isImageVisible=!0}hideImage(){this.isImageVisible=!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Si({type:n,selectors:[["app-home"]],decls:61,vars:1,consts:[[1,"container"],[1,"welcome-text"],[1,"time-and-place"],[1,"dot"],[1,"our-story"],[1,"our-story-headline"],[1,"our-story-text"],[1,"collage-container"],[1,"collage-item-1",3,"click"],["src","assets/images/ratio1-1/picture5-1_1.jpg"],["collageItem1",""],[1,"overlay-text-1_1"],[1,"collage-item-2",3,"click"],["src","assets/images/ratio1-1/picture12-1_1.jpg"],["collageItem2",""],[1,"collage-item-3",3,"click"],["src","assets/images/ratio9-16/picture10-9_16.jpg"],["collageItem3",""],[1,"overlay-text-9_16"],[1,"collage-item-4",3,"click"],["src","assets/images/ratio9-16/picture6-9_16.jpg"],["collageItem4",""],[1,"collage-item-5",3,"click"],["src","assets/images/ratio9-16/picture18-9_16.jpg"],["collageItem5",""],[1,"collage-item-6",3,"click"],["src","assets/images/ratio9-16/picture17-9_16.jpg"],["collageItem6",""],[1,"collage-item-7",3,"click"],["src","assets/images/ratio1-1/picture8-1_1.jpg"],["collageItem7",""],[1,"collage-item-8",3,"click"],["src","assets/images/ratio1-1/picture14-1_1.jpg"],["collageItem8",""],["class","image-overlay",3,"click",4,"ngIf"],[1,"image-overlay",3,"click"],[3,"src"]],template:function(r,i){if(1&r){const s=$u();ke(0,"div",0)(1,"div",1)(2,"div"),nt(3,"We are delighted to welcome you to"),je(),ke(4,"div"),nt(5,"Patrik & Claudia's"),je(),ke(6,"div"),nt(7,"wedding!"),je()(),ke(8,"div",2),nt(9," July 19 2025 "),rr(10,"span",3),nt(11," G\xf6teborg "),rr(12,"span",3),nt(13," 224 days to go "),je(),ke(14,"div",4)(15,"div",5),nt(16,"OUR STORY"),je(),ke(17,"p",6),nt(18," Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempore id reprehenderit culpa veniam, totam aliquid perferendis doloribus alias vel sapiente quibusdam ipsum accusamus ullam deleniti sunt explicabo excepturi ips cum corporis incidunt atque eveniet? Ducimus, dicta consectetur? Accusantium atque similique magni blanditiis, excepturi non maiores ab necessitatibus fugiat, tempora sed et voluptates reiciendis eius minima fugit ducimus porro facilis totam quidem. Modi nihil, assumenda consequatur magnam itaque, dolor, deserunt ut qui necessitatibus consectetur enim. Cum eum exercitationem ut dolor obcaecati qui dicta, officia voluptatum! Modi, beatae consectetur, sint quasi dolorum enim repudiandae necessitatibus quibusdam in ipsum doloremque maxime quae nobis."),je()(),ke(19,"div",7)(20,"div",8),ln("click",function(){lr(s);const a=Ls(22);return Lr(i.showImage(a))}),rr(21,"img",9,10),ke(23,"div",11),nt(24,"Dec 2023"),je()(),ke(25,"div",12),ln("click",function(){lr(s);const a=Ls(27);return Lr(i.showImage(a))}),rr(26,"img",13,14),ke(28,"div",11),nt(29,"May 2023"),je()(),ke(30,"div",15),ln("click",function(){lr(s);const a=Ls(32);return Lr(i.showImage(a))}),rr(31,"img",16,17),ke(33,"div",18),nt(34,"Aug 2023"),je()(),ke(35,"div",19),ln("click",function(){lr(s);const a=Ls(37);return Lr(i.showImage(a))}),rr(36,"img",20,21),ke(38,"div",18),nt(39,"Dec 2023"),je()(),ke(40,"div",22),ln("click",function(){lr(s);const a=Ls(42);return Lr(i.showImage(a))}),rr(41,"img",23,24),ke(43,"div",18),nt(44,"Feb 2023"),je()(),ke(45,"div",25),ln("click",function(){lr(s);const a=Ls(47);return Lr(i.showImage(a))}),rr(46,"img",26,27),ke(48,"div",18),nt(49,"Sept 2024"),je()(),ke(50,"div",28),ln("click",function(){lr(s);const a=Ls(52);return Lr(i.showImage(a))}),rr(51,"img",29,30),ke(53,"div",11),nt(54,"July 2024"),je()(),ke(55,"div",31),ln("click",function(){lr(s);const a=Ls(57);return Lr(i.showImage(a))}),rr(56,"img",32,33),ke(58,"div",11),nt(59,"Dec 2022"),je()()(),Zl(60,cZ,2,1,"div",34),je()}2&r&&(Nn(60),Ar("ngIf",i.isImageVisible))},dependencies:[kA],styles:[".container[_ngcontent-%COMP%]{align-items:center;text-align:center}.welcome-text[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:30px;font-family:Waterfall,cursive;font-size:80px;z-index:1}.time-and-place[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:auto;background-color:#96a498;color:#fff;padding:.5em;font-size:22px}.dot[_ngcontent-%COMP%]{height:5px;width:5px;background-color:#fff;border-radius:50%;display:inline-block;margin-left:1.5em;margin-right:1.5em}.our-story-headline[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:center;font-size:26px}.our-story-text[_ngcontent-%COMP%]{font-size:14px;margin-top:5px}.collage-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:auto auto auto auto;grid-column-gap:3%;grid-row-gap:3%;margin:5%}.collage-item-1[_ngcontent-%COMP%]{grid-column:1/1;grid-row:1/2;position:relative}.collage-item-2[_ngcontent-%COMP%]{grid-column:2/2;grid-row:1/2;position:relative}.collage-item-3[_ngcontent-%COMP%]{grid-column:3/4;grid-row:1/3;position:relative}.collage-item-4[_ngcontent-%COMP%]{grid-column:4/5;grid-row:1/3;position:relative}.collage-item-5[_ngcontent-%COMP%]{grid-column:1/2;grid-row:2/4;position:relative}.collage-item-6[_ngcontent-%COMP%]{grid-column:2/3;grid-row:2/4;position:relative}.collage-item-7[_ngcontent-%COMP%]{grid-column:3/4;grid-row:3/4;position:relative}.collage-item-8[_ngcontent-%COMP%]{grid-column:4/5;grid-row:3/4;position:relative}.collage-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:auto;object-fit:cover;border-radius:5px;filter:grayscale(100%);transition:filter .3s ease}.collage-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{filter:grayscale(0%)}.overlay-text-1_1[_ngcontent-%COMP%]{position:absolute;top:85%;left:10%;color:#fff;text-shadow:2px 2px 5px rgb(0,0,0);font-size:16px;font-weight:700}.overlay-text-9_16[_ngcontent-%COMP%]{position:absolute;top:90%;left:10%;color:#fff;text-shadow:2px 2px 5px rgb(0,0,0);font-size:16px;font-weight:700}.image-overlay[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;max-height:100%;max-width:auto;transform:translate(-35%,-50%);background-color:#000c;padding:40px;display:flex;justify-content:center;align-items:center;z-index:2}.image-overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:90vh;box-shadow:0 0 20px #00000080;border:2px solid white}@media (max-width: 1200px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:70px}.time-and-place[_ngcontent-%COMP%]{font-size:20px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 1000px){.welcome-text[_ngcontent-%COMP%]{margin-top:60px;font-size:65px}.time-and-place[_ngcontent-%COMP%]{font-size:18px}.dot[_ngcontent-%COMP%]{height:4px;width:4px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 800px){.welcome-text[_ngcontent-%COMP%]{margin-top:60px;font-size:52px}.time-and-place[_ngcontent-%COMP%]{font-size:16px}.our-story-headline[_ngcontent-%COMP%]{margin-top:20px;font-size:22px}.our-story-text[_ngcontent-%COMP%]{font-size:12px;margin-top:4px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:10px}.image-overlay[_ngcontent-%COMP%]{padding:30px;transform:translate(-30%,-50%)}}@media (max-width: 600px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:30px;font-size:38px}.time-and-place[_ngcontent-%COMP%]{font-size:12px}.dot[_ngcontent-%COMP%]{height:3px;width:3px}.our-story-text[_ngcontent-%COMP%]{font-size:10px}.our-story-headline[_ngcontent-%COMP%]{margin-top:15px;font-size:18px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:8px}}@media (max-width: 450px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:35px}.time-and-place[_ngcontent-%COMP%]{font-size:10px}.our-story[_ngcontent-%COMP%]{font-size:8px}.our-story-headline[_ngcontent-%COMP%]{font-size:14px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:6px}.image-overlay[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 400px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:28px}.timer[_ngcontent-%COMP%]{margin-top:20px}}"]})}}return n})(),dZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Si({type:n,selectors:[["app-about"]],decls:14,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(ke(0,"div",0)(1,"ul")(2,"li"),nt(3,"Registry: Pink radio buttons"),je(),ke(4,"li"),nt(5,"Registry: Fix true/false logic"),je(),ke(6,"li"),nt(7,"Registry: Headline, white on green background"),je(),ke(8,"li"),nt(9,"The Wedding: Here goes information about the wedding, place & time. This could be expanded into a finer schedule later on."),je(),ke(10,"li"),nt(11,"FAQ: Accomodation, transportation, clothes, gifts, contact info, allergies etc."),je(),ke(12,"li"),nt(13,"RSVP"),je()()())},styles:[".container[_ngcontent-%COMP%]{margin:2em;height:100vh}"]})}}return n})(),hZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Si({type:n,selectors:[["app-schedule"]],decls:2,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(ke(0,"div",0),nt(1,"Schedule View"),je())},styles:[".container[_ngcontent-%COMP%]{margin:2em;height:100vh}"]})}}return n})(),fZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Si({type:n,selectors:[["app-contact"]],decls:2,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(ke(0,"div",0),nt(1,"Contact View works"),je())},styles:[".container[_ngcontent-%COMP%]{height:100vh;margin:2em}"]})}}return n})(),pZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Si({type:n,selectors:[["app-error"]],decls:5,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(ke(0,"div",0)(1,"h1"),nt(2,"404: Page Not Found"),je(),ke(3,"p"),nt(4,"The page you are looking for cannot be found or you do not have access to this page."),je()())},styles:[".container[_ngcontent-%COMP%]{text-align:center;margin:30px 0}"]})}}return n})(),F2=(()=>{class n{constructor(t){this.http=t}fetchGifts(){return this.http.get("https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app/gifts.json").pipe(Oe(r=>{const i=[];for(const s in r)i.push({...r[s]});return i}))}updateClaim(t,r){return this.http.patch("https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app//"+t+".json",r)}addGuest(t){return this.http.post("https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app/guests.json",t)}static{this.\u0275fac=function(r){return new(r||n)(me(C2))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gZ(n,e){1&n&&(ke(0,"div",10),nt(1,"Name missing"),je())}let mZ=(()=>{class n{constructor(t){this.firebaseService=t,this.validName=!0}addGuest(t,r){try{this.validateName(t.name),this.firebaseService.addGuest(t).subscribe(),this.validName=!0,r.reset()}catch(i){this.validName=!1,console.error("Adding a Guest failed: "+i)}}validateName(t){if(t.length<1)throw Error}static{this.\u0275fac=function(r){return new(r||n)(pe(F2))}}static{this.\u0275cmp=Si({type:n,selectors:[["app-rsvp"]],decls:20,vars:1,consts:[[1,"container"],[1,"text-container"],[1,"form-container"],[1,"form",3,"ngSubmit"],["guestForm","ngForm"],["type","text","name","name","ngModel","",1,"input-field"],["class","error-message",4,"ngIf"],["type","text","name","plusOne","ngModel","",1,"input-field"],["name","additional","rows","5","ngModel","",1,"input-field"],["type","submit","value","Send",1,"submit-button"],[1,"error-message"]],template:function(r,i){if(1&r){const s=$u();ke(0,"div",0)(1,"div",1)(2,"h2"),nt(3,"Respondez, s'il vous plait"),je(),ke(4,"p"),nt(5,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ipsam natus deleniti ex delectus at libero consequatur est sequi numquam eveniet! "),je()(),ke(6,"div",2)(7,"form",3,4),ln("ngSubmit",function(){lr(s);const a=Ls(8);return Lr(i.addGuest(a.value,a))}),ke(9,"label"),nt(10,"Name"),je(),rr(11,"input",5),Zl(12,gZ,2,0,"div",6),ke(13,"label"),nt(14,"Plus one (if any)"),je(),rr(15,"input",7),ke(16,"label"),nt(17,"Additional info"),je(),rr(18,"textarea",8)(19,"input",9),je()()()}2&r&&(Nn(12),Ar("ngIf",!i.validName))},dependencies:[kA,e2,$v,BL,jL,f0,Xv],styles:[".container[_ngcontent-%COMP%]{height:100vh;margin:2em}.text-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.form-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:400px;height:auto;background-color:#96a498;color:#fff;border-radius:10px;padding:1em}label[_ngcontent-%COMP%]{font-size:18px;margin-top:1em}.input-field[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:.5em;width:300px}.submit-button[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:2em;width:50px}.error-message[_ngcontent-%COMP%]{color:#fff}@media (max-width: 1000px){.form[_ngcontent-%COMP%]{width:300px;height:auto}.input-field[_ngcontent-%COMP%]{width:200px}}@media (max-width: 600px){.form[_ngcontent-%COMP%]{width:200px;height:auto}.input-field[_ngcontent-%COMP%]{width:150px}label[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 450px){.form[_ngcontent-%COMP%]{width:150px;height:auto}.input-field[_ngcontent-%COMP%]{width:120px}label[_ngcontent-%COMP%]{font-size:12px}}"]})}}return n})();const T0=function(n,e){return{"text-decoration":n,color:e}};function _Z(n,e){if(1&n){const t=$u();ke(0,"tr")(1,"td",5)(2,"button",6),ln("click",function(){const s=lr(t).$implicit;return Lr(Xl().updateGiftStatus(s))}),je()(),ke(3,"td",7),nt(4),je()()}if(2&n){const t=e.$implicit;Nn(2),zu("ticked",t.claimed),Nn(1),Ar("ngStyle",H_(4,T0,t.claimed?"line-through":"none",t.claimed?"gray":"black")),Nn(1),td(" ",t.name," ")}}function yZ(n,e){if(1&n){const t=$u();ke(0,"tr")(1,"td",5)(2,"button",6),ln("click",function(){const s=lr(t).$implicit;return Lr(Xl().updateGiftStatus(s))}),je()(),ke(3,"td",7),nt(4),je()()}if(2&n){const t=e.$implicit;Nn(2),zu("ticked",t.claimed),Nn(1),Ar("ngStyle",H_(4,T0,t.claimed?"line-through":"none",t.claimed?"gray":"black")),Nn(1),td(" ",t.name," ")}}function vZ(n,e){if(1&n){const t=$u();ke(0,"tr")(1,"td",5)(2,"button",6),ln("click",function(){const s=lr(t).$implicit;return Lr(Xl().updateGiftStatus(s))}),je()(),ke(3,"td",7),nt(4),je()()}if(2&n){const t=e.$implicit;Nn(2),zu("ticked",t.claimed),Nn(1),Ar("ngStyle",H_(4,T0,t.claimed?"line-through":"none",t.claimed?"gray":"black")),Nn(1),td(" ",t.name," ")}}const IZ=[{path:"",redirectTo:"Home",pathMatch:"full"},{path:"Home",component:lZ},{path:"About",component:dZ},{path:"Schedule",component:hZ},{path:"Registry",component:(()=>{class n{constructor(t){this.firebaseService=t,this.giftList=[]}ngOnInit(){this.fetchGifts()}fetchGifts(){this.firebaseService.fetchGifts().subscribe(t=>{this.giftList=t})}sortGifts(t){let r=[];return this.giftList.forEach(i=>{i.category===t&&r.push(i)}),r}updateGiftStatus(t){const r=`gifts/gift_${t.id}`;this.firebaseService.updateClaim(r,{claimed:!t.claimed}).subscribe(()=>{try{console.log("Update: "+r+" successful"),this.ngOnInit()}catch(s){console.error("Update failed",s)}})}static{this.\u0275fac=function(r){return new(r||n)(pe(F2))}}static{this.\u0275cmp=Si({type:n,selectors:[["app-registry"]],decls:19,vars:3,consts:[[1,"page-headline"],[1,"container"],[1,"columns"],[1,"headline"],[4,"ngFor","ngForOf"],[1,"td-button"],[1,"button",3,"click"],[3,"ngStyle"]],template:function(r,i){1&r&&(ke(0,"div",0),nt(1,"REGISTRY"),je(),ke(2,"div",1)(3,"div",2)(4,"div",3),nt(5,"Category 1"),je(),ke(6,"table")(7,"tbody"),Zl(8,_Z,5,7,"tr",4),je()(),ke(9,"div",3),nt(10,"Category 2"),je(),ke(11,"table")(12,"tbody"),Zl(13,yZ,5,7,"tr",4),je()(),ke(14,"div",3),nt(15,"Category 3"),je(),ke(16,"table")(17,"tbody"),Zl(18,vZ,5,7,"tr",4),je()()()()),2&r&&(Nn(8),Ar("ngForOf",i.sortGifts("1")),Nn(5),Ar("ngForOf",i.sortGifts("2")),Nn(5),Ar("ngForOf",i.sortGifts("3")))},dependencies:[lN,pN],styles:['.container[_ngcontent-%COMP%]{height:100vh;margin:2em}.page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.columns[_ngcontent-%COMP%]{column-count:3;column-gap:20px;height:80vh;overflow-y:auto;column-fill:auto}table[_ngcontent-%COMP%]{width:100%;border-spacing:0 10px}.headline[_ngcontent-%COMP%]{display:flex;justify-content:center;background-color:#96a498;color:#fff;margin-top:10px;margin-bottom:10px;border-radius:5px;padding:3px;font-size:18px}.td-button[_ngcontent-%COMP%]{width:20px}td[_ngcontent-%COMP%]{padding-left:30px;font-size:16px}.button[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;border:1px solid;padding:0;margin:0;display:flex;justify-content:center;cursor:pointer}.button[_ngcontent-%COMP%]:after{content:"";margin-left:20px;margin-top:4px;position:absolute;width:18px;height:6px;border-left:2px solid black;border-bottom:2px solid black;transform:rotate(-45deg) scale(0);transform-origin:bottom left;opacity:0}.button.ticked[_ngcontent-%COMP%]:after{transform:rotate(-45deg) scale(1);opacity:1}.button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}@media (max-width: 1200px){.headline[_ngcontent-%COMP%]{font-size:17px}td[_ngcontent-%COMP%]{padding-left:25px}}@media (max-width: 1000px){td[_ngcontent-%COMP%]{padding-left:20px}}@media (max-width: 800px){.headline[_ngcontent-%COMP%]{font-size:16px}.button[_ngcontent-%COMP%]{width:15px;height:15px}td[_ngcontent-%COMP%]{padding-left:15px;font-size:15px}}@media (max-width: 600px){.headline[_ngcontent-%COMP%]{font-size:14px}.button[_ngcontent-%COMP%]{width:13px;height:13px}td[_ngcontent-%COMP%]{padding-left:10px;font-size:13px}}@media (max-width: 450px){td[_ngcontent-%COMP%]{padding-left:10px}}']})}}return n})()},{path:"Contact",component:fZ},{path:"Rsvp",component:mZ},{path:"**",component:pZ}];let EZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ni({type:n,bootstrap:[V8]})}static{this.\u0275inj=ur({imports:[J9,NJ,k8,ET.forRoot(IZ),nW.initializeApp(VY_firebase),kY,rZ]})}}return n})();Q9().bootstrapModule(EZ).catch(n=>console.error(n))},574:(os,or,it)=>{it.d(or,{A:()=>Yn});var C=it(401),We=it(779),Pe=it(979),ee=it(398);class Tt{constructor(Ke,ot){this._delegate=Ke,this.firebase=ot,(0,Pe._addComponent)(Ke,new We.uA("app-compat",()=>this,"PUBLIC")),this.container=Ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ke){this._delegate.automaticDataCollectionEnabled=Ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ke=>{this._delegate.checkDestroyed(),Ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Pe.deleteApp)(this._delegate)))}_getService(Ke,ot=Pe._DEFAULT_ENTRY_NAME){var Jn;this._delegate.checkDestroyed();const Zn=this._delegate.container.getProvider(Ke);return!Zn.isInitialized()&&"EXPLICIT"===(null===(Jn=Zn.getComponent())||void 0===Jn?void 0:Jn.instantiationMode)&&Zn.initialize(),Zn.getImmediate({identifier:ot})}_removeServiceInstance(Ke,ot=Pe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ke).clearInstance(ot)}_addComponent(Ke){(0,Pe._addComponent)(this._delegate,Ke)}_addOrOverwriteComponent(Ke){(0,Pe._addOrOverwriteComponent)(this._delegate,Ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const gn=new C.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function ht(){const Ct=function Qn(Ct){const Ke={},ot={__esModule:!0,initializeApp:function Qt(ze,En={}){const $t=Pe.initializeApp(ze,En);if((0,C.gR)(Ke,$t.name))return Ke[$t.name];const le=new Ct($t,ot);return Ke[$t.name]=le,le},app:Zn,registerVersion:Pe.registerVersion,setLogLevel:Pe.setLogLevel,onLog:Pe.onLog,apps:null,SDK_VERSION:Pe.SDK_VERSION,INTERNAL:{registerComponent:function Vt(ze){const En=ze.name,$t=En.replace("-compat","");if(Pe._registerComponent(ze)&&"PUBLIC"===ze.type){const le=(Yt=Zn())=>{if("function"!=typeof Yt[$t])throw gn.create("invalid-app-argument",{appName:En});return Yt[$t]()};void 0!==ze.serviceProps&&(0,C.zw)(le,ze.serviceProps),ot[$t]=le,Ct.prototype[$t]=function(...Yt){return this._getService.bind(this,En).apply(this,ze.multipleInstances?Yt:[])}}return"PUBLIC"===ze.type?ot[$t]:null},removeApp:function Jn(ze){delete Ke[ze]},useAsService:function mr(ze,En){return"serverAuth"===En?null:En},modularAPIs:Pe}};function Zn(ze){if(!(0,C.gR)(Ke,ze=ze||Pe._DEFAULT_ENTRY_NAME))throw gn.create("no-app",{appName:ze});return Ke[ze]}return ot.default=ot,Object.defineProperty(ot,"apps",{get:function bt(){return Object.keys(Ke).map(ze=>Ke[ze])}}),Zn.App=Ct,ot}(Tt);return Ct.INTERNAL=Object.assign(Object.assign({},Ct.INTERNAL),{createFirebaseNamespace:ht,extendNamespace:function Ke(ot){(0,C.zw)(Ct,ot)},createSubscribe:C.tD,ErrorFactory:C.FA,deepExtend:C.zw}),Ct}(),ge=new ee.Vy("@firebase/app-compat");try{const Ct=(0,C.mS)();if(void 0!==Ct.firebase){ge.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const Ke=Ct.firebase.SDK_VERSION;Ke&&Ke.indexOf("LITE")>=0&&ge.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Yn=oe;!function At(Ct){(0,Pe.registerVersion)("@firebase/app-compat","0.2.43",Ct)}()},979:(os,or,it)=>{it.r(or),it.d(or,{FirebaseError:()=>ee.g,SDK_VERSION:()=>ro,_DEFAULT_ENTRY_NAME:()=>Hi,_addComponent:()=>wn,_addOrOverwriteComponent:()=>zi,_apps:()=>gi,_clearComponents:()=>no,_components:()=>xr,_getProvider:()=>Jo,_isFirebaseApp:()=>Zo,_isFirebaseServerApp:()=>Nr,_registerComponent:()=>An,_removeServiceInstance:()=>qi,_serverApps:()=>Sn,deleteApp:()=>ta,getApp:()=>Rc,getApps:()=>ea,initializeApp:()=>Xo,initializeServerApp:()=>io,onLog:()=>P,registerVersion:()=>S,setLogLevel:()=>k});var C=it(467),We=it(779),Pe=it(398),ee=it(401);const Tt=(Q,x)=>x.some(K=>Q instanceof K);let on,gn;const oe=new WeakMap,ge=new WeakMap,Ne=new WeakMap,lt=new WeakMap,At=new WeakMap;let Ke={get(Q,x,K){if(Q instanceof IDBTransaction){if("done"===x)return ge.get(Q);if("objectStoreNames"===x)return Q.objectStoreNames||Ne.get(Q);if("store"===x)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return Qt(Q[x])},set:(Q,x,K)=>(Q[x]=K,!0),has:(Q,x)=>Q instanceof IDBTransaction&&("done"===x||"store"===x)||x in Q};function Zn(Q){return"function"==typeof Q?function Jn(Q){return Q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ht(){return gn||(gn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Q)?function(...x){return Q.apply(bt(this),x),Qt(oe.get(this))}:function(...x){return Qt(Q.apply(bt(this),x))}:function(x,...K){const Ae=Q.call(bt(this),x,...K);return Ne.set(Ae,x.sort?x.sort():[x]),Qt(Ae)}}(Q):(Q instanceof IDBTransaction&&function Ct(Q){if(ge.has(Q))return;const x=new Promise((K,Ae)=>{const Je=()=>{Q.removeEventListener("complete",tt),Q.removeEventListener("error",rt),Q.removeEventListener("abort",rt)},tt=()=>{K(),Je()},rt=()=>{Ae(Q.error||new DOMException("AbortError","AbortError")),Je()};Q.addEventListener("complete",tt),Q.addEventListener("error",rt),Q.addEventListener("abort",rt)});ge.set(Q,x)}(Q),Tt(Q,function Qn(){return on||(on=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Q,Ke):Q)}function Qt(Q){if(Q instanceof IDBRequest)return function Yn(Q){const x=new Promise((K,Ae)=>{const Je=()=>{Q.removeEventListener("success",tt),Q.removeEventListener("error",rt)},tt=()=>{K(Qt(Q.result)),Je()},rt=()=>{Ae(Q.error),Je()};Q.addEventListener("success",tt),Q.addEventListener("error",rt)});return x.then(K=>{K instanceof IDBCursor&&oe.set(K,Q)}).catch(()=>{}),At.set(x,Q),x}(Q);if(lt.has(Q))return lt.get(Q);const x=Zn(Q);return x!==Q&&(lt.set(Q,x),At.set(x,Q)),x}const bt=Q=>At.get(Q),ze=["get","getKey","getAll","getAllKeys","count"],En=["put","add","delete","clear"],$t=new Map;function le(Q,x){if(!(Q instanceof IDBDatabase)||x in Q||"string"!=typeof x)return;if($t.get(x))return $t.get(x);const K=x.replace(/FromIndex$/,""),Ae=x!==K,Je=En.includes(K);if(!(K in(Ae?IDBIndex:IDBObjectStore).prototype)||!Je&&!ze.includes(K))return;const tt=function(){var rt=(0,C.A)(function*(_t,...an){const Xr=this.transaction(_t,Je?"readwrite":"readonly");let Pt=Xr.store;return Ae&&(Pt=Pt.index(an.shift())),(yield Promise.all([Pt[K](...an),Je&&Xr.done]))[0]});return function(an){return rt.apply(this,arguments)}}();return $t.set(x,tt),tt}!function ot(Q){Ke=Q(Ke)}(Q=>({...Q,get:(x,K,Ae)=>le(x,K)||Q.get(x,K,Ae),has:(x,K)=>!!le(x,K)||Q.has(x,K)}));class Yt{constructor(x){this.container=x}getPlatformInfoString(){return this.container.getProviders().map(K=>{if(function qt(Q){const x=Q.getComponent();return"VERSION"===x?.type}(K)){const Ae=K.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(K=>K).join(" ")}}const Rr="@firebase/app",pi="0.10.13",dt=new Pe.Vy("@firebase/app"),Hi="[DEFAULT]",to={[Rr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},gi=new Map,Sn=new Map,xr=new Map;function wn(Q,x){try{Q.container.addComponent(x)}catch(K){dt.debug(`Component ${x.name} failed to register with FirebaseApp ${Q.name}`,K)}}function zi(Q,x){Q.container.addOrOverwriteComponent(x)}function An(Q){const x=Q.name;if(xr.has(x))return dt.debug(`There were multiple attempts to register component ${x}.`),!1;xr.set(x,Q);for(const K of gi.values())wn(K,Q);for(const K of Sn.values())wn(K,Q);return!0}function Jo(Q,x){const K=Q.container.getProvider("heartbeat").getImmediate({optional:!0});return K&&K.triggerHeartbeat(),Q.container.getProvider(x)}function qi(Q,x,K=Hi){Jo(Q,x).clearInstance(K)}function Zo(Q){return void 0!==Q.options}function Nr(Q){return void 0!==Q.settings}function no(){xr.clear()}const _r=new ee.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Zr{constructor(x,K,Ae){this._isDeleted=!1,this._options=Object.assign({},x),this._config=Object.assign({},K),this._name=K.name,this._automaticDataCollectionEnabled=K.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new We.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(x){this.checkDestroyed(),this._automaticDataCollectionEnabled=x}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(x){this._isDeleted=x}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}class Or extends Zr{constructor(x,K,Ae,Je){const tt=void 0!==K.automaticDataCollectionEnabled&&K.automaticDataCollectionEnabled,rt={name:Ae,automaticDataCollectionEnabled:tt};super(void 0!==x.apiKey?x:x.options,rt,Je),this._serverConfig=Object.assign({automaticDataCollectionEnabled:tt},K),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,K.releaseOnDeref=void 0,S(Rr,pi,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(x){this.isDeleted||(this._refCount++,void 0!==x&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(x,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ta(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw _r.create("server-app-deleted")}}const ro="10.14.1";function Xo(Q,x={}){let K=Q;"object"!=typeof x&&(x={name:x});const Ae=Object.assign({name:Hi,automaticDataCollectionEnabled:!1},x),Je=Ae.name;if("string"!=typeof Je||!Je)throw _r.create("bad-app-name",{appName:String(Je)});if(K||(K=(0,ee.T9)()),!K)throw _r.create("no-options");const tt=gi.get(Je);if(tt){if((0,ee.bD)(K,tt.options)&&(0,ee.bD)(Ae,tt.config))return tt;throw _r.create("duplicate-app",{appName:Je})}const rt=new We.h1(Je);for(const an of xr.values())rt.addComponent(an);const _t=new Zr(K,Ae,rt);return gi.set(Je,_t),_t}function io(Q,x){if((0,ee.Bd)()&&!(0,ee.p7)())throw _r.create("invalid-server-app-environment");let K;void 0===x.automaticDataCollectionEnabled&&(x.automaticDataCollectionEnabled=!1),K=Zo(Q)?Q.options:Q;const Ae=Object.assign(Object.assign({},x),K);if(void 0!==Ae.releaseOnDeref&&delete Ae.releaseOnDeref,void 0!==x.releaseOnDeref&&typeof FinalizationRegistry>"u")throw _r.create("finalization-registry-not-supported",{});const tt=""+(Xr=JSON.stringify(Ae),[...Xr].reduce((Pt,Wi)=>Math.imul(31,Pt)+Wi.charCodeAt(0)|0,0)),rt=Sn.get(tt);var Xr;if(rt)return rt.incRefCount(x.releaseOnDeref),rt;const _t=new We.h1(tt);for(const Xr of xr.values())_t.addComponent(Xr);const an=new Or(K,x,tt,_t);return Sn.set(tt,an),an}function Rc(Q=Hi){const x=gi.get(Q);if(!x&&Q===Hi&&(0,ee.T9)())return Xo();if(!x)throw _r.create("no-app",{appName:Q});return x}function ea(){return Array.from(gi.values())}function ta(Q){return as.apply(this,arguments)}function as(){return(as=(0,C.A)(function*(Q){let x=!1;const K=Q.name;gi.has(K)?(x=!0,gi.delete(K)):Sn.has(K)&&Q.decRefCount()<=0&&(Sn.delete(K),x=!0),x&&(yield Promise.all(Q.container.getProviders().map(Ae=>Ae.delete())),Q.isDeleted=!0)})).apply(this,arguments)}function S(Q,x,K){var Ae;let Je=null!==(Ae=to[Q])&&void 0!==Ae?Ae:Q;K&&(Je+=`-${K}`);const tt=Je.match(/\s|\//),rt=x.match(/\s|\//);if(tt||rt){const _t=[`Unable to register library "${Je}" with version "${x}":`];return tt&&_t.push(`library name "${Je}" contains illegal characters (whitespace or "/")`),tt&&rt&&_t.push("and"),rt&&_t.push(`version name "${x}" contains illegal characters (whitespace or "/")`),void dt.warn(_t.join(" "))}An(new We.uA(`${Je}-version`,()=>({library:Je,version:x}),"VERSION"))}function P(Q,x){if(null!==Q&&"function"!=typeof Q)throw _r.create("invalid-log-argument");(0,Pe.Ey)(Q,x)}function k(Q){(0,Pe.He)(Q)}const B="firebase-heartbeat-database",q=1,Se="firebase-heartbeat-store";let Ce=null;function Ht(){return Ce||(Ce=function Vt(Q,x,{blocked:K,upgrade:Ae,blocking:Je,terminated:tt}={}){const rt=indexedDB.open(Q,x),_t=Qt(rt);return Ae&&rt.addEventListener("upgradeneeded",an=>{Ae(Qt(rt.result),an.oldVersion,an.newVersion,Qt(rt.transaction),an)}),K&&rt.addEventListener("blocked",an=>K(an.oldVersion,an.newVersion,an)),_t.then(an=>{tt&&an.addEventListener("close",()=>tt()),Je&&an.addEventListener("versionchange",Xr=>Je(Xr.oldVersion,Xr.newVersion,Xr))}).catch(()=>{}),_t}(B,q,{upgrade:(Q,x)=>{if(0===x)try{Q.createObjectStore(Se)}catch(K){console.warn(K)}}}).catch(Q=>{throw _r.create("idb-open",{originalErrorMessage:Q.message})})),Ce}function $e(){return($e=(0,C.A)(function*(Q){try{const K=(yield Ht()).transaction(Se),Ae=yield K.objectStore(Se).get(er(Q));return yield K.done,Ae}catch(x){if(x instanceof ee.g)dt.warn(x.message);else{const K=_r.create("idb-get",{originalErrorMessage:x?.message});dt.warn(K.message)}}})).apply(this,arguments)}function Tn(Q,x){return He.apply(this,arguments)}function He(){return(He=(0,C.A)(function*(Q,x){try{const Ae=(yield Ht()).transaction(Se,"readwrite");yield Ae.objectStore(Se).put(x,er(Q)),yield Ae.done}catch(K){if(K instanceof ee.g)dt.warn(K.message);else{const Ae=_r.create("idb-set",{originalErrorMessage:K?.message});dt.warn(Ae.message)}}})).apply(this,arguments)}function er(Q){return`${Q.name}!${Q.options.appId}`}class qe{constructor(x){this.container=x,this._heartbeatsCache=null;const K=this.container.getProvider("app").getImmediate();this._storage=new gh(K),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var x=this;return(0,C.A)(function*(){var K,Ae;try{const tt=x.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),rt=Gi();return null==(null===(K=x._heartbeatsCache)||void 0===K?void 0:K.heartbeats)&&(x._heartbeatsCache=yield x._heartbeatsCachePromise,null==(null===(Ae=x._heartbeatsCache)||void 0===Ae?void 0:Ae.heartbeats))||x._heartbeatsCache.lastSentHeartbeatDate===rt||x._heartbeatsCache.heartbeats.some(_t=>_t.date===rt)?void 0:(x._heartbeatsCache.heartbeats.push({date:rt,agent:tt}),x._heartbeatsCache.heartbeats=x._heartbeatsCache.heartbeats.filter(_t=>{const an=new Date(_t.date).valueOf();return Date.now()-an<=2592e6}),x._storage.overwrite(x._heartbeatsCache))}catch(Je){dt.warn(Je)}})()}getHeartbeatsHeader(){var x=this;return(0,C.A)(function*(){var K;try{if(null===x._heartbeatsCache&&(yield x._heartbeatsCachePromise),null==(null===(K=x._heartbeatsCache)||void 0===K?void 0:K.heartbeats)||0===x._heartbeatsCache.heartbeats.length)return"";const Ae=Gi(),{heartbeatsToSend:Je,unsentEntries:tt}=function na(Q,x=1024){const K=[];let Ae=Q.slice();for(const Je of Q){const tt=K.find(rt=>rt.agent===Je.agent);if(tt){if(tt.dates.push(Je.date),cs(K)>x){tt.dates.pop();break}}else if(K.push({agent:Je.agent,dates:[Je.date]}),cs(K)>x){K.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:K,unsentEntries:Ae}}(x._heartbeatsCache.heartbeats),rt=(0,ee.Uj)(JSON.stringify({version:2,heartbeats:Je}));return x._heartbeatsCache.lastSentHeartbeatDate=Ae,tt.length>0?(x._heartbeatsCache.heartbeats=tt,yield x._storage.overwrite(x._heartbeatsCache)):(x._heartbeatsCache.heartbeats=[],x._storage.overwrite(x._heartbeatsCache)),rt}catch(Ae){return dt.warn(Ae),""}})()}}function Gi(){return(new Date).toISOString().substring(0,10)}class gh{constructor(x){this.app=x,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.A)(function*(){return!!(0,ee.zW)()&&(0,ee.eX)().then(()=>!0).catch(()=>!1)})()}read(){var x=this;return(0,C.A)(function*(){if(yield x._canUseIndexedDBPromise){const Ae=yield function Rn(Q){return $e.apply(this,arguments)}(x.app);return Ae?.heartbeats?Ae:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(x){var K=this;return(0,C.A)(function*(){var Ae;if(yield K._canUseIndexedDBPromise){const tt=yield K.read();return Tn(K.app,{lastSentHeartbeatDate:null!==(Ae=x.lastSentHeartbeatDate)&&void 0!==Ae?Ae:tt.lastSentHeartbeatDate,heartbeats:x.heartbeats})}})()}add(x){var K=this;return(0,C.A)(function*(){var Ae;if(yield K._canUseIndexedDBPromise){const tt=yield K.read();return Tn(K.app,{lastSentHeartbeatDate:null!==(Ae=x.lastSentHeartbeatDate)&&void 0!==Ae?Ae:tt.lastSentHeartbeatDate,heartbeats:[...tt.heartbeats,...x.heartbeats]})}})()}}function cs(Q){return(0,ee.Uj)(JSON.stringify({version:2,heartbeats:Q})).length}!function de(Q){An(new We.uA("platform-logger",x=>new Yt(x),"PRIVATE")),An(new We.uA("heartbeat",x=>new qe(x),"PRIVATE")),S(Rr,pi,Q),S(Rr,pi,"esm2017"),S("fire-js","")}("")},779:(os,or,it)=>{it.d(or,{h1:()=>Qn,uA:()=>Pe});var C=it(467),We=it(401);class Pe{constructor(oe,ge,Ne){this.name=oe,this.instanceFactory=ge,this.type=Ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const ee="[DEFAULT]";class Tt{constructor(oe,ge){this.name=oe,this.container=ge,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const ge=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(ge)){const Ne=new We.cY;if(this.instancesDeferred.set(ge,Ne),this.isInitialized(ge)||this.shouldAutoInitialize())try{const lt=this.getOrInitializeService({instanceIdentifier:ge});lt&&Ne.resolve(lt)}catch{}}return this.instancesDeferred.get(ge).promise}getImmediate(oe){var ge;const Ne=this.normalizeInstanceIdentifier(oe?.identifier),lt=null!==(ge=oe?.optional)&&void 0!==ge&&ge;if(!this.isInitialized(Ne)&&!this.shouldAutoInitialize()){if(lt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ne})}catch(At){if(lt)return null;throw At}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function gn(ht){return"EAGER"===ht.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[ge,Ne]of this.instancesDeferred.entries()){const lt=this.normalizeInstanceIdentifier(ge);try{const At=this.getOrInitializeService({instanceIdentifier:lt});Ne.resolve(At)}catch{}}}}clearInstance(oe=ee){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,C.A)(function*(){const ge=Array.from(oe.instances.values());yield Promise.all([...ge.filter(Ne=>"INTERNAL"in Ne).map(Ne=>Ne.INTERNAL.delete()),...ge.filter(Ne=>"_delete"in Ne).map(Ne=>Ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=ee){return this.instances.has(oe)}getOptions(oe=ee){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:ge={}}=oe,Ne=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(Ne))throw Error(`${this.name}(${Ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const lt=this.getOrInitializeService({instanceIdentifier:Ne,options:ge});for(const[At,Yn]of this.instancesDeferred.entries())Ne===this.normalizeInstanceIdentifier(At)&&Yn.resolve(lt);return lt}onInit(oe,ge){var Ne;const lt=this.normalizeInstanceIdentifier(ge),At=null!==(Ne=this.onInitCallbacks.get(lt))&&void 0!==Ne?Ne:new Set;At.add(oe),this.onInitCallbacks.set(lt,At);const Yn=this.instances.get(lt);return Yn&&oe(Yn,lt),()=>{At.delete(oe)}}invokeOnInitCallbacks(oe,ge){const Ne=this.onInitCallbacks.get(ge);if(Ne)for(const lt of Ne)try{lt(oe,ge)}catch{}}getOrInitializeService({instanceIdentifier:oe,options:ge={}}){let Ne=this.instances.get(oe);if(!Ne&&this.component&&(Ne=this.component.instanceFactory(this.container,{instanceIdentifier:(ht=oe,ht===ee?void 0:ht),options:ge}),this.instances.set(oe,Ne),this.instancesOptions.set(oe,ge),this.invokeOnInitCallbacks(Ne,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,Ne)}catch{}var ht;return Ne||null}normalizeInstanceIdentifier(oe=ee){return this.component?this.component.multipleInstances?oe:ee:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Qn{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const ge=this.getProvider(oe.name);if(ge.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);ge.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const ge=new Tt(oe,this);return this.providers.set(oe,ge),ge}getProviders(){return Array.from(this.providers.values())}}},398:(os,or,it)=>{it.d(or,{$b:()=>We,Ey:()=>ht,He:()=>Qn,Vy:()=>gn});const C=[];var We=function(oe){return oe[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",oe}(We||{});const Pe={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},ee=We.INFO,Tt={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},on=(oe,ge,...Ne)=>{if(ge<oe.logLevel)return;const lt=(new Date).toISOString(),At=Tt[ge];if(!At)throw new Error(`Attempted to log a message with an invalid logType (value: ${ge})`);console[At](`[${lt}]  ${oe.name}:`,...Ne)};class gn{constructor(ge){this.name=ge,this._logLevel=ee,this._logHandler=on,this._userLogHandler=null,C.push(this)}get logLevel(){return this._logLevel}set logLevel(ge){if(!(ge in We))throw new TypeError(`Invalid value "${ge}" assigned to \`logLevel\``);this._logLevel=ge}setLogLevel(ge){this._logLevel="string"==typeof ge?Pe[ge]:ge}get logHandler(){return this._logHandler}set logHandler(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge}get userLogHandler(){return this._userLogHandler}set userLogHandler(ge){this._userLogHandler=ge}debug(...ge){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...ge),this._logHandler(this,We.DEBUG,...ge)}log(...ge){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...ge),this._logHandler(this,We.VERBOSE,...ge)}info(...ge){this._userLogHandler&&this._userLogHandler(this,We.INFO,...ge),this._logHandler(this,We.INFO,...ge)}warn(...ge){this._userLogHandler&&this._userLogHandler(this,We.WARN,...ge),this._logHandler(this,We.WARN,...ge)}error(...ge){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...ge),this._logHandler(this,We.ERROR,...ge)}}function Qn(oe){C.forEach(ge=>{ge.setLogLevel(oe)})}function ht(oe,ge){for(const Ne of C){let lt=null;ge&&ge.level&&(lt=Pe[ge.level]),Ne.userLogHandler=null===oe?null:(At,Yn,...Ct)=>{const Ke=Ct.map(ot=>{if(null==ot)return null;if("string"==typeof ot)return ot;if("number"==typeof ot||"boolean"==typeof ot)return ot.toString();if(ot instanceof Error)return ot.message;try{return JSON.stringify(ot)}catch{return null}}).filter(ot=>ot).join(" ");Yn>=(lt??At.logLevel)&&oe({level:We[Yn].toLowerCase(),message:Ke,args:Ct,type:At.name})}}}},324:(os,or,it)=>{var C=it(467),We=it(574),Pe=it(979),ee=it(401),Tt=it(398),on=it(635),gn=it(779);const ht={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Yn=function lt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Ct=function At(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ke=new ee.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Jn=new Tt.Vy("@firebase/auth");function Qt(f,...c){Jn.logLevel<=Tt.$b.ERROR&&Jn.error(`Auth (${Pe.SDK_VERSION}): ${f}`,...c)}function bt(f,...c){throw $t(f,...c)}function Vt(f,...c){return $t(f,...c)}function mr(f,c,l){const p=Object.assign(Object.assign({},Ct()),{[c]:l});return new ee.FA("auth","Firebase",p).create(c,{appName:f.name})}function ze(f){return mr(f,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function En(f,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&bt(f,"argument-error"),mr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $t(f,...c){if("string"!=typeof f){const l=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(l,...p)}return Ke.create(f,...c)}function le(f,c,...l){if(!f)throw $t(c,...l)}function Yt(f){const c="INTERNAL ASSERTION FAILED: "+f;throw Qt(c),new Error(c)}function qt(f,c){f||Yt(c)}function Rr(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function pi(){return"http:"===dt()||"https:"===dt()}function dt(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Y{constructor(c,l){this.shortDelay=c,this.longDelay=l,qt(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,ee.jZ)()||(0,ee.lV)()}get(){return function Es(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(pi()||(0,ee.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Z(f,c){qt(f.emulator,"Emulator should always be set here");const{url:l}=f.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class te{static initialize(c,l,p){this.fetchImpl=c,l&&(this.headersImpl=l),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Yt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Yt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Yt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const se={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ie=new Y(3e4,6e4);function ne(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function fe(f,c,l,p){return ft.apply(this,arguments)}function ft(){return(ft=(0,C.A)(function*(f,c,l,p,y={}){return Oe(f,y,(0,C.A)(function*(){let E={},R={};p&&("GET"===c?R=p:E={body:JSON.stringify(p)});const U=(0,ee.Am)(Object.assign({key:f.config.apiKey},R)).slice(1),re=yield f._getAdditionalHeaders();re["Content-Type"]="application/json",f.languageCode&&(re["X-Firebase-Locale"]=f.languageCode);const ve=Object.assign({method:c,headers:re},E);return(0,ee.c1)()||(ve.referrerPolicy="no-referrer"),te.fetch()(Rt(f,f.config.apiHost,l,U),ve)}))})).apply(this,arguments)}function Oe(f,c,l){return Be.apply(this,arguments)}function Be(){return(Be=(0,C.A)(function*(f,c,l){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},se),c);try{const y=new Pr(f),E=yield Promise.race([l(),y.promise]);y.clearNetworkTimeout();const R=yield E.json();if("needConfirmation"in R)throw Xn(f,"account-exists-with-different-credential",R);if(E.ok&&!("errorMessage"in R))return R;{const U=E.ok?R.errorMessage:R.error.message,[re,ve]=U.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===re)throw Xn(f,"credential-already-in-use",R);if("EMAIL_EXISTS"===re)throw Xn(f,"email-already-in-use",R);if("USER_DISABLED"===re)throw Xn(f,"user-disabled",R);const Me=p[re]||re.toLowerCase().replace(/[_\s]+/g,"-");if(ve)throw mr(f,Me,ve);bt(f,Me)}}catch(y){if(y instanceof ee.g)throw y;bt(f,"network-request-failed",{message:String(y)})}})).apply(this,arguments)}function pt(f,c,l,p){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,C.A)(function*(f,c,l,p,y={}){const E=yield fe(f,c,l,p,y);return"mfaPendingCredential"in E&&bt(f,"multi-factor-auth-required",{_serverResponse:E}),E})).apply(this,arguments)}function Rt(f,c,l,p){const y=`${c}${l}?${p}`;return f.config.emulator?Z(f.config,y):`${f.config.apiScheme}://${y}`}function ar(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Pr{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,p)=>{this.timer=setTimeout(()=>p(Vt(this.auth,"network-request-failed")),Ie.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xn(f,c,l){const p={appName:f.name};l.email&&(p.email=l.email),l.phoneNumber&&(p.phoneNumber=l.phoneNumber);const y=Vt(f,c,p);return y.customData._tokenResponse=l,y}function Mr(f){return void 0!==f&&void 0!==f.getResponse}function Jr(f){return void 0!==f&&void 0!==f.enterprise}class Qo{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return ar(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Hn(){return(Hn=(0,C.A)(function*(f){return(yield fe(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Xs(f,c){return ws.apply(this,arguments)}function ws(){return(ws=(0,C.A)(function*(f,c){return fe(f,"GET","/v2/recaptchaConfig",ne(f,c))})).apply(this,arguments)}function eo(){return(eo=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function to(){return(to=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function gi(f,c){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function xr(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function An(){return(An=(0,C.A)(function*(f,c=!1){const l=(0,ee.Ku)(f),p=yield l.getIdToken(c),y=qi(p);le(y&&y.exp&&y.auth_time&&y.iat,l.auth,"internal-error");const E="object"==typeof y.firebase?y.firebase:void 0,R=E?.sign_in_provider;return{claims:y,token:p,authTime:xr(Jo(y.auth_time)),issuedAtTime:xr(Jo(y.iat)),expirationTime:xr(Jo(y.exp)),signInProvider:R||null,signInSecondFactor:E?.sign_in_second_factor||null}})).apply(this,arguments)}function Jo(f){return 1e3*Number(f)}function qi(f){const[c,l,p]=f.split(".");if(void 0===c||void 0===l||void 0===p)return Qt("JWT malformed, contained fewer than 3 sections"),null;try{const y=(0,ee.u)(l);return y?JSON.parse(y):(Qt("Failed to decode base64 JWT payload"),null)}catch(y){return Qt("Caught error parsing JWT payload as JSON",y?.toString()),null}}function Zo(f){const c=qi(f);return le(c,"internal-error"),le(typeof c.exp<"u","internal-error"),le(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function Nr(f,c){return no.apply(this,arguments)}function no(){return(no=(0,C.A)(function*(f,c,l=!1){if(l)return c;try{return yield c}catch(p){throw p instanceof ee.g&&function As({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class _r{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const y=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,y)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,C.A)(function*(){yield l.iteration()}),p)}iteration(){var c=this;return(0,C.A)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class Zr{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=xr(this.lastLoginAt),this.creationTime=xr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Or(f){return ro.apply(this,arguments)}function ro(){return(ro=(0,C.A)(function*(f){var c;const l=f.auth,p=yield f.getIdToken(),y=yield Nr(f,gi(l,{idToken:p}));le(y?.users.length,l,"internal-error");const E=y.users[0];f._notifyReloadListener(E);const R=null!==(c=E.providerUserInfo)&&void 0!==c&&c.length?ea(E.providerUserInfo):[],U=function Rc(f,c){return[...f.filter(p=>!c.some(y=>y.providerId===p.providerId)),...c]}(f.providerData,R),Me=!!f.isAnonymous&&!(f.email&&E.passwordHash||U?.length),Re={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:U,metadata:new Zr(E.createdAt,E.lastLoginAt),isAnonymous:Me};Object.assign(f,Re)})).apply(this,arguments)}function io(){return(io=(0,C.A)(function*(f){const c=(0,ee.Ku)(f);yield Or(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function ea(f){return f.map(c=>{var{providerId:l}=c,p=(0,on.Tt)(c,["providerId"]);return{providerId:l,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}function as(){return(as=(0,C.A)(function*(f,c){const l=yield Oe(f,{},(0,C.A)(function*(){const p=(0,ee.Am)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:y,apiKey:E}=f.config,R=Rt(f,y,"/v1/token",`key=${E}`),U=yield f._getAdditionalHeaders();return U["Content-Type"]="application/x-www-form-urlencoded",te.fetch()(R,{method:"POST",headers:U,body:p})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function P(){return(P=(0,C.A)(function*(f,c){return fe(f,"POST","/v2/accounts:revokeToken",ne(f,c))})).apply(this,arguments)}class k{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){le(c.idToken,"internal-error"),le(typeof c.idToken<"u","internal-error"),le(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):Zo(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}updateFromIdToken(c){le(0!==c.length,"internal-error");const l=Zo(c);this.updateTokensAndExpiration(c,null,l)}getToken(c,l=!1){var p=this;return(0,C.A)(function*(){return l||!p.accessToken||p.isExpired?(le(p.refreshToken,c,"user-token-expired"),p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null):p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var p=this;return(0,C.A)(function*(){const{accessToken:y,refreshToken:E,expiresIn:R}=yield function ta(f,c){return as.apply(this,arguments)}(c,l);p.updateTokensAndExpiration(y,E,Number(R))})()}updateTokensAndExpiration(c,l,p){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,l){const{refreshToken:p,accessToken:y,expirationTime:E}=l,R=new k;return p&&(le("string"==typeof p,"internal-error",{appName:c}),R.refreshToken=p),y&&(le("string"==typeof y,"internal-error",{appName:c}),R.accessToken=y),E&&(le("number"==typeof E,"internal-error",{appName:c}),R.expirationTime=E),R}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new k,this.toJSON())}_performRefresh(){return Yt("not implemented")}}function B(f,c){le("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class q{constructor(c){var{uid:l,auth:p,stsTokenManager:y}=c,E=(0,on.Tt)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _r(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=p,this.stsTokenManager=y,this.accessToken=y.accessToken,this.displayName=E.displayName||null,this.email=E.email||null,this.emailVerified=E.emailVerified||!1,this.phoneNumber=E.phoneNumber||null,this.photoURL=E.photoURL||null,this.isAnonymous=E.isAnonymous||!1,this.tenantId=E.tenantId||null,this.providerData=E.providerData?[...E.providerData]:[],this.metadata=new Zr(E.createdAt||void 0,E.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,C.A)(function*(){const p=yield Nr(l,l.stsTokenManager.getToken(l.auth,c));return le(p,l.auth,"internal-error"),l.accessToken!==p&&(l.accessToken=p,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),p})()}getIdTokenResult(c){return function zi(f){return An.apply(this,arguments)}(this,c)}reload(){return function Xo(f){return io.apply(this,arguments)}(this)}_assign(c){this!==c&&(le(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new q(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var p=this;return(0,C.A)(function*(){let y=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),y=!0),l&&(yield Or(p)),yield p.auth._persistUserIfCurrent(p),y&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,C.A)(function*(){if((0,Pe._isFirebaseServerApp)(c.auth.app))return Promise.reject(ze(c.auth));const l=yield c.getIdToken();return yield Nr(c,function Sc(f,c){return eo.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var p,y,E,R,U,re,ve,Me;const Re=null!==(p=l.displayName)&&void 0!==p?p:void 0,cn=null!==(y=l.email)&&void 0!==y?y:void 0,Mi=null!==(E=l.phoneNumber)&&void 0!==E?E:void 0,Ao=null!==(R=l.photoURL)&&void 0!==R?R:void 0,Cf=null!==(U=l.tenantId)&&void 0!==U?U:void 0,Df=null!==(re=l._redirectEventId)&&void 0!==re?re:void 0,bf=null!==(ve=l.createdAt)&&void 0!==ve?ve:void 0,IE=null!==(Me=l.lastLoginAt)&&void 0!==Me?Me:void 0,{uid:bl,emailVerified:EE,isAnonymous:Xm,providerData:Sf,stsTokenManager:Sl}=l;le(bl&&Sl,c,"internal-error");const Rb=k.fromJSON(this.name,Sl);le("string"==typeof bl,c,"internal-error"),B(Re,c.name),B(cn,c.name),le("boolean"==typeof EE,c,"internal-error"),le("boolean"==typeof Xm,c,"internal-error"),B(Mi,c.name),B(Ao,c.name),B(Cf,c.name),B(Df,c.name),B(bf,c.name),B(IE,c.name);const e_=new q({uid:bl,auth:c,email:cn,emailVerified:EE,displayName:Re,isAnonymous:Xm,photoURL:Ao,phoneNumber:Mi,tenantId:Cf,stsTokenManager:Rb,createdAt:bf,lastLoginAt:IE});return Sf&&Array.isArray(Sf)&&(e_.providerData=Sf.map(Rf=>Object.assign({},Rf))),Df&&(e_._redirectEventId=Df),e_}static _fromIdTokenResponse(c,l,p=!1){return(0,C.A)(function*(){const y=new k;y.updateFromServerResponse(l);const E=new q({uid:l.localId,auth:c,stsTokenManager:y,isAnonymous:p});return yield Or(E),E})()}static _fromGetAccountInfoResponse(c,l,p){return(0,C.A)(function*(){const y=l.users[0];le(void 0!==y.localId,"internal-error");const E=void 0!==y.providerUserInfo?ea(y.providerUserInfo):[],R=!(y.email&&y.passwordHash||E?.length),U=new k;U.updateFromIdToken(p);const re=new q({uid:y.localId,auth:c,stsTokenManager:U,isAnonymous:R}),ve={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:E,metadata:new Zr(y.createdAt,y.lastLoginAt),isAnonymous:!(y.email&&y.passwordHash||E?.length)};return Object.assign(re,ve),re})()}}const Se=new Map;function Ce(f){qt(f instanceof Function,"Expected a class definition");let c=Se.get(f);return c?(qt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,Se.set(f,c),c)}const Rn=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.A)(function*(){return!0})()}_set(l,p){var y=this;return(0,C.A)(function*(){y.storage[l]=p})()}_get(l){var p=this;return(0,C.A)(function*(){const y=p.storage[l];return void 0===y?null:y})()}_remove(l){var p=this;return(0,C.A)(function*(){delete p.storage[l]})()}_addListener(l,p){}_removeListener(l,p){}}return f.type="NONE",f})();function $e(f,c,l){return`firebase:${f}:${c}:${l}`}class Tn{constructor(c,l,p){this.persistence=c,this.auth=l,this.userKey=p;const{config:y,name:E}=this.auth;this.fullUserKey=$e(this.userKey,y.apiKey,E),this.fullPersistenceKey=$e("persistence",y.apiKey,E),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,C.A)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?q._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,C.A)(function*(){if(l.persistence===c)return;const p=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,p?l.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,p="authUser"){return(0,C.A)(function*(){if(!l.length)return new Tn(Ce(Rn),c,p);const y=(yield Promise.all(l.map(function(){var ve=(0,C.A)(function*(Me){if(yield Me._isAvailable())return Me});return function(Me){return ve.apply(this,arguments)}}()))).filter(ve=>ve);let E=y[0]||Ce(Rn);const R=$e(p,c.config.apiKey,c.name);let U=null;for(const ve of l)try{const Me=yield ve._get(R);if(Me){const Re=q._fromJSON(c,Me);ve!==E&&(U=Re),E=ve;break}}catch{}const re=y.filter(ve=>ve._shouldAllowMigration);return E._shouldAllowMigration&&re.length?(E=re[0],U&&(yield E._set(R,U.toJSON())),yield Promise.all(l.map(function(){var ve=(0,C.A)(function*(Me){if(Me!==E)try{yield Me._remove(R)}catch{}});return function(Me){return ve.apply(this,arguments)}}())),new Tn(E,c,p)):new Tn(E,c,p)})()}}function He(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(qe(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(er(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(na(c))return"Blackberry";if(gh(c))return"Webos";if(us(c))return"Safari";if((c.includes("chrome/")||St(c))&&!c.includes("edge/"))return"Chrome";if(Gi(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function er(f=(0,ee.ZQ)()){return/firefox\//i.test(f)}function us(f=(0,ee.ZQ)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function St(f=(0,ee.ZQ)()){return/crios\//i.test(f)}function qe(f=(0,ee.ZQ)()){return/iemobile/i.test(f)}function Gi(f=(0,ee.ZQ)()){return/android/i.test(f)}function na(f=(0,ee.ZQ)()){return/blackberry/i.test(f)}function gh(f=(0,ee.ZQ)()){return/webos/i.test(f)}function cs(f=(0,ee.ZQ)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function K(f=(0,ee.ZQ)()){return cs(f)||Gi(f)||gh(f)||na(f)||/windows phone/i.test(f)||qe(f)}function Ae(f,c=[]){let l;switch(f){case"Browser":l=He((0,ee.ZQ)());break;case"Worker":l=`${He((0,ee.ZQ)())}-${f}`;break;default:l=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Pe.SDK_VERSION}/${p}`}class Je{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const p=E=>new Promise((R,U)=>{try{R(c(E))}catch(re){U(re)}});p.onAbort=l,this.queue.push(p);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,C.A)(function*(){if(l.auth.currentUser===c)return;const p=[];try{for(const y of l.queue)yield y(c),y.onAbort&&p.push(y.onAbort)}catch(y){p.reverse();for(const E of p)try{E()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:y?.message})}})()}}function rt(){return(rt=(0,C.A)(function*(f,c={}){return fe(f,"GET","/v2/passwordPolicy",ne(f,c))})).apply(this,arguments)}class an{constructor(c){var l,p,y,E;const R=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=R.minPasswordLength)&&void 0!==l?l:6,R.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=R.maxPasswordLength),void 0!==R.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=R.containsLowercaseCharacter),void 0!==R.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=R.containsUppercaseCharacter),void 0!==R.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=R.containsNumericCharacter),void 0!==R.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=R.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(y=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==y?y:"",this.forceUpgradeOnSignin=null!==(E=c.forceUpgradeOnSignin)&&void 0!==E&&E,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,p,y,E,R,U;const re={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,re),this.validatePasswordCharacterOptions(c,re),re.isValid&&(re.isValid=null===(l=re.meetsMinPasswordLength)||void 0===l||l),re.isValid&&(re.isValid=null===(p=re.meetsMaxPasswordLength)||void 0===p||p),re.isValid&&(re.isValid=null===(y=re.containsLowercaseLetter)||void 0===y||y),re.isValid&&(re.isValid=null===(E=re.containsUppercaseLetter)||void 0===E||E),re.isValid&&(re.isValid=null===(R=re.containsNumericCharacter)||void 0===R||R),re.isValid&&(re.isValid=null===(U=re.containsNonAlphanumericCharacter)||void 0===U||U),re}validatePasswordLengthOptions(c,l){const p=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;p&&(l.meetsMinPasswordLength=c.length>=p),y&&(l.meetsMaxPasswordLength=c.length<=y)}validatePasswordCharacterOptions(c,l){let p;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let y=0;y<c.length;y++)p=c.charAt(y),this.updatePasswordCharacterOptionsStatuses(l,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,l,p,y,E){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=E))}}class Xr{constructor(c,l,p,y){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=p,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wi(this),this.idTokenSubscription=new Wi(this),this.beforeStateQueue=new Je(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ke,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(c,l){var p=this;return l&&(this._popupRedirectResolver=Ce(l)),this._initializationPromise=this.queue((0,C.A)(function*(){var y,E;if(!p._deleted&&(p.persistenceManager=yield Tn.create(p,c),!p._deleted)){if(null!==(y=p._popupRedirectResolver)&&void 0!==y&&y._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(l),p.lastNotifiedUid=(null===(E=p.currentUser)||void 0===E?void 0:E.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,C.A)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUserFromIdToken(c){var l=this;return(0,C.A)(function*(){try{const p=yield gi(l,{idToken:c}),y=yield q._fromGetAccountInfoResponse(l,p,c);yield l.directlySetCurrentUser(y)}catch(p){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",p),yield l.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var l=this;return(0,C.A)(function*(){var p;if((0,Pe._isFirebaseServerApp)(l.app)){const U=l.app.settings.authIdToken;return U?new Promise(re=>{setTimeout(()=>l.initializeCurrentUserFromIdToken(U).then(re,re))}):l.directlySetCurrentUser(null)}const y=yield l.assertedPersistence.getCurrentUser();let E=y,R=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const U=null===(p=l.redirectUser)||void 0===p?void 0:p._redirectEventId,re=E?._redirectEventId,ve=yield l.tryRedirectSignIn(c);(!U||U===re)&&ve?.user&&(E=ve.user,R=!0)}if(!E)return l.directlySetCurrentUser(null);if(!E._redirectEventId){if(R)try{yield l.beforeStateQueue.runMiddleware(E)}catch(U){E=y,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(U))}return E?l.reloadAndSetCurrentUserOrClear(E):l.directlySetCurrentUser(null)}return le(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===E._redirectEventId?l.directlySetCurrentUser(E):l.reloadAndSetCurrentUserOrClear(E)})()}tryRedirectSignIn(c){var l=this;return(0,C.A)(function*(){let p=null;try{p=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,C.A)(function*(){try{yield Or(c)}catch(p){if("auth/network-request-failed"!==p?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function iu(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,C.A)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,C.A)(function*(){if((0,Pe._isFirebaseServerApp)(l.app))return Promise.reject(ze(l));const p=c?(0,ee.Ku)(c):null;return p&&le(p.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(p&&p._clone(l))})()}_updateCurrentUser(c,l=!1){var p=this;return(0,C.A)(function*(){if(!p._deleted)return c&&le(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),l||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,C.A)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,C.A)(function*(){return(0,Pe._isFirebaseServerApp)(c.app)?Promise.reject(ze(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var l=this;return(0,Pe._isFirebaseServerApp)(this.app)?Promise.reject(ze(this)):this.queue((0,C.A)(function*(){yield l.assertedPersistence.setPersistence(Ce(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,C.A)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const p=l._getPasswordPolicyInternal();return p.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,C.A)(function*(){const l=yield function tt(f){return rt.apply(this,arguments)}(c),p=new an(l);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new ee.FA("auth","Firebase",c())}onAuthStateChanged(c,l,p){return this.registerStateListener(this.authStateSubscription,c,l,p)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,p){return this.registerStateListener(this.idTokenSubscription,c,l,p)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,C.A)(function*(){if(l.currentUser){const p=yield l.currentUser.getIdToken(),y={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=l.tenantId&&(y.tenantId=l.tenantId),yield function S(f,c){return P.apply(this,arguments)}(l,y)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var p=this;return(0,C.A)(function*(){const y=yield p.getOrInitRedirectPersistenceManager(l);return null===c?y.removeCurrentUser():y.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,C.A)(function*(){if(!l.redirectPersistenceManager){const p=c&&Ce(c)||l._popupRedirectResolver;le(p,l,"argument-error"),l.redirectPersistenceManager=yield Tn.create(l,[Ce(p._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,C.A)(function*(){var p,y;return l._isInitialized&&(yield l.queue((0,C.A)(function*(){}))),(null===(p=l._currentUser)||void 0===p?void 0:p._redirectEventId)===c?l._currentUser:(null===(y=l.redirectUser)||void 0===y?void 0:y._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,C.A)(function*(){if(c===l.currentUser)return l.queue((0,C.A)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,p,y){if(this._deleted)return()=>{};const E="function"==typeof l?l:l.next.bind(l);let R=!1;const U=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(U,this,"internal-error"),U.then(()=>{R||E(this.currentUser)}),"function"==typeof l){const re=c.addObserver(l,p,y);return()=>{R=!0,re()}}{const re=c.addObserver(l);return()=>{R=!0,re()}}}directlySetCurrentUser(c){var l=this;return(0,C.A)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Ae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,C.A)(function*(){var l;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const y=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();y&&(p["X-Firebase-Client"]=y);const E=yield c._getAppCheckToken();return E&&(p["X-Firebase-AppCheck"]=E),p})()}_getAppCheckToken(){var c=this;return(0,C.A)(function*(){var l;const p=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return p?.error&&function Zn(f,...c){Jn.logLevel<=Tt.$b.WARN&&Jn.warn(`Auth (${Pe.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Pt(f){return(0,ee.Ku)(f)}class Wi{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,ee.tD)(l=>this.observer=l)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Pc={loadJS:()=>(0,C.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $g(f){return Pc.loadJS(f)}function Hg(f){return`__${f}${Math.floor(1e6*Math.random())}`}class Qe{constructor(c){this.type="recaptcha-enterprise",this.auth=Pt(c)}verify(c="verify",l=!1){var p=this;return(0,C.A)(function*(){function E(){return E=(0,C.A)(function*(U){if(!l){if(null==U.tenantId&&null!=U._agentRecaptchaConfig)return U._agentRecaptchaConfig.siteKey;if(null!=U.tenantId&&void 0!==U._tenantRecaptchaConfigs[U.tenantId])return U._tenantRecaptchaConfigs[U.tenantId].siteKey}return new Promise(function(){var re=(0,C.A)(function*(ve,Me){Xs(U,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Re=>{if(void 0!==Re.recaptchaKey){const cn=new Qo(Re);return null==U.tenantId?U._agentRecaptchaConfig=cn:U._tenantRecaptchaConfigs[U.tenantId]=cn,ve(cn.siteKey)}Me(new Error("recaptcha Enterprise site key undefined"))}).catch(Re=>{Me(Re)})});return function(ve,Me){return re.apply(this,arguments)}}())}),E.apply(this,arguments)}function R(U,re,ve){const Me=window.grecaptcha;Jr(Me)?Me.enterprise.ready(()=>{Me.enterprise.execute(U,{action:c}).then(Re=>{re(Re)}).catch(()=>{re("NO_RECAPTCHA")})}):ve(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((U,re)=>{(function y(U){return E.apply(this,arguments)})(p.auth).then(ve=>{if(!l&&Jr(window.grecaptcha))R(ve,U,re);else{if(typeof window>"u")return void re(new Error("RecaptchaVerifier is only supported in browser"));let Me=function EI(){return Pc.recaptchaEnterpriseScript}();0!==Me.length&&(Me+=ve),$g(Me).then(()=>{R(ve,U,re)}).catch(Re=>{re(Re)})}}).catch(ve=>{re(ve)})})})()}}function wI(f,c,l){return zg.apply(this,arguments)}function zg(){return(zg=(0,C.A)(function*(f,c,l,p=!1){const y=new Qe(f);let E;try{E=yield y.verify(l)}catch{E=yield y.verify(l,!0)}const R=Object.assign({},c);return Object.assign(R,p?{captchaResp:E}:{captchaResponse:E}),Object.assign(R,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(R,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),R})).apply(this,arguments)}function Mc(f,c,l,p){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,C.A)(function*(f,c,l,p){var y;if(null!==(y=f._getRecaptchaConfig())&&void 0!==y&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const E=yield wI(f,c,l,"getOobCode"===l);return p(f,E)}return p(f,c).catch(function(){var E=(0,C.A)(function*(R){if("auth/missing-recaptcha-token"===R.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const U=yield wI(f,c,l,"getOobCode"===l);return p(f,U)}return Promise.reject(R)});return function(R){return E.apply(this,arguments)}}())}),Fe.apply(this,arguments)}function qg(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function su(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class so{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return Yt("not implemented")}_getIdTokenResponse(c){return Yt("not implemented")}_linkToIdToken(c,l){return Yt("not implemented")}_getReauthenticationResolver(c){return Yt("not implemented")}}function Gg(f,c){return ct.apply(this,arguments)}function ct(){return(ct=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:resetPassword",ne(f,c))})).apply(this,arguments)}function Oc(){return(Oc=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function kr(f,c){return kc.apply(this,arguments)}function kc(){return(kc=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Ft(){return(Ft=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:update",ne(f,c))})).apply(this,arguments)}function nb(f,c){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,C.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signInWithPassword",ne(f,c))})).apply(this,arguments)}function _e(f,c){return ou.apply(this,arguments)}function ou(){return(ou=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:sendOobCode",ne(f,c))})).apply(this,arguments)}function Vc(){return(Vc=(0,C.A)(function*(f,c){return _e(f,c)})).apply(this,arguments)}function Ih(f,c){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,C.A)(function*(f,c){return _e(f,c)})).apply(this,arguments)}function wh(f,c){return Kg.apply(this,arguments)}function Kg(){return(Kg=(0,C.A)(function*(f,c){return _e(f,c)})).apply(this,arguments)}function Qg(){return(Qg=(0,C.A)(function*(f,c){return _e(f,c)})).apply(this,arguments)}function Yg(){return(Yg=(0,C.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signInWithEmailLink",ne(f,c))})).apply(this,arguments)}function uu(){return(uu=(0,C.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signInWithEmailLink",ne(f,c))})).apply(this,arguments)}class Ts extends so{constructor(c,l,p,y=null){super("password",p),this._email=c,this._password=l,this._tenantId=y}static _fromEmailAndPassword(c,l){return new Ts(c,l,"password")}static _fromEmailAndCode(c,l,p=null){return new Ts(c,l,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,C.A)(function*(){switch(l.signInMethod){case"password":return Mc(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",nb);case"emailLink":return function ib(f,c){return Yg.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:bt(c,"internal-error")}})()}_linkToIdToken(c,l){var p=this;return(0,C.A)(function*(){switch(p.signInMethod){case"password":return Mc(c,{idToken:l,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kr);case"emailLink":return function au(f,c){return uu.apply(this,arguments)}(c,{idToken:l,email:p._email,oobCode:p._password});default:bt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function ls(f,c){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,C.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signInWithIdp",ne(f,c))})).apply(this,arguments)}class Di extends so{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Di(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):bt("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:y}=l,E=(0,on.Tt)(l,["providerId","signInMethod"]);if(!p||!y)return null;const R=new Di(p,y);return R.idToken=E.idToken||void 0,R.accessToken=E.accessToken||void 0,R.secret=E.secret,R.nonce=E.nonce,R.pendingToken=E.pendingToken||null,R}_getIdTokenResponse(c){return ls(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,ls(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,ls(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,ee.Am)(l)}return c}}function Th(){return(Th=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:sendVerificationCode",ne(f,c))})).apply(this,arguments)}function Ch(){return(Ch=(0,C.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signInWithPhoneNumber",ne(f,c))})).apply(this,arguments)}function Fc(){return(Fc=(0,C.A)(function*(f,c){const l=yield pt(f,"POST","/v1/accounts:signInWithPhoneNumber",ne(f,c));if(l.temporaryProof)throw Xn(f,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const be={USER_NOT_FOUND:"user-not-found"};function cu(){return(cu=(0,C.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signInWithPhoneNumber",ne(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),be)})).apply(this,arguments)}class bi extends so{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new bi({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new bi({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function Cs(f,c){return Ch.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function me(f,c){return Fc.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Lc(f,c){return cu.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:p,verificationCode:y}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:p,code:y}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:p,phoneNumber:y,temporaryProof:E}=c;return p||l||y||E?new bi({verificationId:l,verificationCode:p,phoneNumber:y,temporaryProof:E}):null}}class lu{constructor(c){var l,p,y,E,R,U;const re=(0,ee.I9)((0,ee.hp)(c)),ve=null!==(l=re.apiKey)&&void 0!==l?l:null,Me=null!==(p=re.oobCode)&&void 0!==p?p:null,Re=function CI(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(y=re.mode)&&void 0!==y?y:null);le(ve&&Me&&Re,"argument-error"),this.apiKey=ve,this.operation=Re,this.code=Me,this.continueUrl=null!==(E=re.continueUrl)&&void 0!==E?E:null,this.languageCode=null!==(R=re.languageCode)&&void 0!==R?R:null,this.tenantId=null!==(U=re.tenantId)&&void 0!==U?U:null}static parseLink(c){const l=function DI(f){const c=(0,ee.I9)((0,ee.hp)(f)).link,l=c?(0,ee.I9)((0,ee.hp)(c)).deep_link_id:null,p=(0,ee.I9)((0,ee.hp)(f)).deep_link_id;return(p?(0,ee.I9)((0,ee.hp)(p)).link:null)||p||l||c||f}(c);try{return new lu(l)}catch{return null}}}let ia=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(l,p){return Ts._fromEmailAndPassword(l,p)}static credentialWithLink(l,p){const y=lu.parseLink(p);return le(y,"argument-error"),Ts._fromEmailAndCode(l,y.code,y.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Fn{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class yr extends Fn{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class gt extends yr{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return le("providerId"in l&&"signInMethod"in l,"argument-error"),Di._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return le(c.idToken||c.accessToken,"argument-error"),Di._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return gt.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return gt.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:p,oauthTokenSecret:y,pendingToken:E,nonce:R,providerId:U}=c;if(!p&&!y&&!l&&!E||!U)return null;try{return new gt(U)._credential({idToken:l,accessToken:p,nonce:R,pendingToken:E})}catch{return null}}}let du=(()=>{class f extends yr{constructor(){super("facebook.com")}static credential(l){return Di._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),Uc=(()=>{class f extends yr{constructor(){super("google.com"),this.addScope("profile")}static credential(l,p){return Di._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:p})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:p,oauthAccessToken:y}=l;if(!p&&!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),Bc=(()=>{class f extends yr{constructor(){super("github.com")}static credential(l){return Di._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class Vr extends so{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return ls(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,ls(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,ls(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:y,pendingToken:E}=l;return p&&y&&E&&p===y?new Vr(p,E):null}static _create(c,l){return new Vr(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fu extends Fn{constructor(c){le(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return fu.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return fu.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=Vr.fromJSON(c);return le(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:p}=c;if(!l||!p)return null;try{return Vr._create(p,l)}catch{return null}}}let Dh=(()=>{class f extends yr{constructor(){super("twitter.com")}static credential(l,p){return Di._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:p})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:p,oauthTokenSecret:y}=l;if(!p||!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function jc(f,c){return $c.apply(this,arguments)}function $c(){return($c=(0,C.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signUp",ne(f,c))})).apply(this,arguments)}class ei{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,p,y=!1){return(0,C.A)(function*(){const E=yield q._fromIdTokenResponse(c,p,y),R=sa(p);return new ei({user:E,providerId:R,_tokenResponse:p,operationType:l})})()}static _forOperation(c,l,p){return(0,C.A)(function*(){yield c._updateTokensIfNecessary(p,!0);const y=sa(p);return new ei({user:c,providerId:y,_tokenResponse:p,operationType:l})})()}}function sa(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function Hc(){return(Hc=(0,C.A)(function*(f){var c;if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const l=Pt(f);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new ei({user:l.currentUser,providerId:null,operationType:"signIn"});const p=yield jc(l,{returnSecureToken:!0}),y=yield ei._fromIdTokenResponse(l,"signIn",p,!0);return yield l._updateCurrentUser(y.user),y})).apply(this,arguments)}class zc extends ee.g{constructor(c,l,p,y){var E;super(l.code,l.message),this.operationType=p,this.user=y,Object.setPrototypeOf(this,zc.prototype),this.customData={appName:c.name,tenantId:null!==(E=c.tenantId)&&void 0!==E?E:void 0,_serverResponse:l.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,l,p,y){return new zc(c,l,p,y)}}function bh(f,c,l,p){return("reauthenticate"===c?l._getReauthenticationResolver(f):l._getIdTokenResponse(f)).catch(E=>{throw"auth/multi-factor-auth-required"===E.code?zc._fromErrorAndOperation(f,E,c,p):E})}function Xg(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function ti(){return ti=(0,C.A)(function*(f,c){const l=(0,ee.Ku)(f);yield Gc(!0,l,c);const{providerUserInfo:p}=yield function Hi(f,c){return to.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),y=Xg(p||[]);return l.providerData=l.providerData.filter(E=>y.has(E.providerId)),y.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),ti.apply(this,arguments)}function Sh(f,c){return qc.apply(this,arguments)}function qc(){return(qc=(0,C.A)(function*(f,c,l=!1){const p=yield Nr(f,c._linkToIdToken(f.auth,yield f.getIdToken()),l);return ei._forOperation(f,"link",p)})).apply(this,arguments)}function Gc(f,c,l){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,C.A)(function*(f,c,l){yield Or(c);const y=!1===f?"provider-already-linked":"no-such-provider";le(Xg(c.providerData).has(l)===f,c.auth,y)})).apply(this,arguments)}function em(f,c){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,C.A)(function*(f,c,l=!1){const{auth:p}=f;if((0,Pe._isFirebaseServerApp)(p.app))return Promise.reject(ze(p));const y="reauthenticate";try{const E=yield Nr(f,bh(p,y,c,f),l);le(E.idToken,p,"internal-error");const R=qi(E.idToken);le(R,p,"internal-error");const{sub:U}=R;return le(f.uid===U,p,"user-mismatch"),ei._forOperation(f,y,E)}catch(E){throw"auth/user-not-found"===E?.code&&bt(p,"user-mismatch"),E}})).apply(this,arguments)}function Mh(f,c){return xh.apply(this,arguments)}function xh(){return(xh=(0,C.A)(function*(f,c,l=!1){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const p="signIn",y=yield bh(f,p,c),E=yield ei._fromIdTokenResponse(f,p,y);return l||(yield f._updateCurrentUser(E.user)),E})).apply(this,arguments)}function Wc(f,c){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,C.A)(function*(f,c){return Mh(Pt(f),c)})).apply(this,arguments)}function Si(f,c){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,C.A)(function*(f,c){const l=(0,ee.Ku)(f);return yield Gc(!1,l,c.providerId),Sh(l,c)})).apply(this,arguments)}function tm(f,c){return kh.apply(this,arguments)}function kh(){return(kh=(0,C.A)(function*(f,c){return em((0,ee.Ku)(f),c)})).apply(this,arguments)}function Vh(){return(Vh=(0,C.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signInWithCustomToken",ne(f,c))})).apply(this,arguments)}function Ye(){return Ye=(0,C.A)(function*(f,c){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const l=Pt(f),p=yield function ni(f,c){return Vh.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),y=yield ei._fromIdTokenResponse(l,"signIn",p);return yield l._updateCurrentUser(y.user),y}),Ye.apply(this,arguments)}class zn{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?yt._fromServerResponse(c,l):"totpInfo"in l?Ln._fromServerResponse(c,l):bt(c,"internal-error")}}class yt extends zn{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new yt(l)}}class Ln extends zn{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new Ln(l)}}function qn(f,c,l){var p;le((null===(p=l.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),le(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(le(l.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(le(l.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function bs(f){return vr.apply(this,arguments)}function vr(){return(vr=(0,C.A)(function*(f){const c=Pt(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Kc(){return(Kc=(0,C.A)(function*(f,c,l){const p=Pt(f),y={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&qn(p,y,l),yield Mc(p,y,"getOobCode",Ih)})).apply(this,arguments)}function Fh(){return Fh=(0,C.A)(function*(f,c,l){yield Gg((0,ee.Ku)(f),{oobCode:c,newPassword:l}).catch(function(){var p=(0,C.A)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&bs(f),y});return function(y){return p.apply(this,arguments)}}())}),Fh.apply(this,arguments)}function Zt(){return Zt=(0,C.A)(function*(f,c){yield function tb(f,c){return Ft.apply(this,arguments)}((0,ee.Ku)(f),{oobCode:c})}),Zt.apply(this,arguments)}function De(f,c){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,C.A)(function*(f,c){const l=(0,ee.Ku)(f),p=yield Gg(l,{oobCode:c}),y=p.requestType;switch(le(y,l,"internal-error"),y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(p.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(p.mfaInfo,l,"internal-error");default:le(p.email,l,"internal-error")}let E=null;return p.mfaInfo&&(E=zn._fromServerResponse(Pt(l),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:E},operation:y}})).apply(this,arguments)}function ri(){return(ri=(0,C.A)(function*(f,c){const{data:l}=yield De((0,ee.Ku)(f),c);return l.email})).apply(this,arguments)}function Gn(){return(Gn=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const p=Pt(f),R=yield Mc(p,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jc).catch(re=>{throw"auth/password-does-not-meet-requirements"===re.code&&bs(f),re}),U=yield ei._fromIdTokenResponse(p,"signIn",R);return yield p._updateCurrentUser(U.user),U})).apply(this,arguments)}function Ki(){return(Ki=(0,C.A)(function*(f,c,l){const p=Pt(f),y={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function E(R,U){le(U.handleCodeInApp,p,"argument-error"),U&&qn(p,R,U)})(y,l),yield Mc(p,y,"getOobCode",wh)})).apply(this,arguments)}function oo(){return(oo=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const p=(0,ee.Ku)(f),y=ia.credentialWithLink(c,l||Rr());return le(y._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),Wc(p,y)})).apply(this,arguments)}function Ss(){return(Ss=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:createAuthUri",ne(f,c))})).apply(this,arguments)}function ao(){return ao=(0,C.A)(function*(f,c){const p={identifier:c,continueUri:pi()?Rr():"http://localhost"},{signinMethods:y}=yield function im(f,c){return Ss.apply(this,arguments)}((0,ee.Ku)(f),p);return y||[]}),ao.apply(this,arguments)}function _i(){return _i=(0,C.A)(function*(f,c){const l=(0,ee.Ku)(f),y={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&qn(l.auth,y,c);const{email:E}=yield function vh(f,c){return Vc.apply(this,arguments)}(l.auth,y);E!==f.email&&(yield f.reload())}),_i.apply(this,arguments)}function Yc(){return Yc=(0,C.A)(function*(f,c,l){const p=(0,ee.Ku)(f),E={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};l&&qn(p.auth,E,l);const{email:R}=yield function rb(f,c){return Qg.apply(this,arguments)}(p.auth,E);R!==f.email&&(yield f.reload())}),Yc.apply(this,arguments)}function Ri(){return(Ri=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function uo(){return uo=(0,C.A)(function*(f,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const p=(0,ee.Ku)(f),E={idToken:yield p.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},R=yield Nr(p,function Rs(f,c){return Ri.apply(this,arguments)}(p.auth,E));p.displayName=R.displayName||null,p.photoURL=R.photoUrl||null;const U=p.providerData.find(({providerId:re})=>"password"===re);U&&(U.displayName=p.displayName,U.photoURL=p.photoURL),yield p._updateTokensIfNecessary(R)}),uo.apply(this,arguments)}function Jc(f,c,l){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,C.A)(function*(f,c,l){const{auth:p}=f,E={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(E.email=c),l&&(E.password=l);const R=yield Nr(f,function yh(f,c){return Oc.apply(this,arguments)}(p,E));yield f._updateTokensIfNecessary(R,!0)}),Zc.apply(this,arguments)}class ds{constructor(c,l,p={}){this.isNewUser=c,this.providerId=l,this.profile=p}}class co extends ds{constructor(c,l,p,y){super(c,l,p),this.username=y}}class _u extends ds{constructor(c,l){super(c,"facebook.com",l)}}class tr extends co{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class ob extends ds{constructor(c,l){super(c,"google.com",l)}}class Fr extends co{constructor(c,l,p){super(c,"twitter.com",l,p)}}function Ir(f){const{user:c,_tokenResponse:l}=f;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function Qi(f){var c,l;if(!f)return null;const{providerId:p}=f,y=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},E=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const R=null===(l=null===(c=qi(f.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(R)return new ds(E,"anonymous"!==R&&"custom"!==R?R:null)}if(!p)return null;switch(p){case"facebook.com":return new _u(E,y);case"github.com":return new tr(E,y);case"google.com":return new ob(E,y);case"twitter.com":return new Fr(E,y,f.screenName||null);case"custom":case"anonymous":return new ds(E,null);default:return new ds(E,p,y)}}(l)}class la{constructor(c,l,p){this.type=c,this.credential=l,this.user=p}static _fromIdtoken(c,l){return new la("enroll",c,l)}static _fromMfaPendingCredential(c){return new la("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,p;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return la._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return la._fromIdtoken(c.multiFactorSession.idToken)}return null}}class am{constructor(c,l,p){this.session=c,this.hints=l,this.signInResolver=p}static _fromError(c,l){const p=Pt(c),y=l.customData._serverResponse,E=(y.mfaInfo||[]).map(U=>zn._fromServerResponse(p,U));le(y.mfaPendingCredential,p,"internal-error");const R=la._fromMfaPendingCredential(y.mfaPendingCredential);return new am(R,E,function(){var U=(0,C.A)(function*(re){const ve=yield re._process(p,R);delete y.mfaInfo,delete y.mfaPendingCredential;const Me=Object.assign(Object.assign({},y),{idToken:ve.idToken,refreshToken:ve.refreshToken});switch(l.operationType){case"signIn":const Re=yield ei._fromIdTokenResponse(p,l.operationType,Me);return yield p._updateCurrentUser(Re.user),Re;case"reauthenticate":return le(l.user,p,"internal-error"),ei._forOperation(l.user,l.operationType,Me);default:bt(p,"internal-error")}});return function(re){return U.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,C.A)(function*(){return l.signInResolver(c)})()}}class um{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(p=>zn._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new um(c)}getSession(){var c=this;return(0,C.A)(function*(){return la._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var p=this;return(0,C.A)(function*(){const y=c,E=yield p.getSession(),R=yield Nr(p.user,y._process(p.user.auth,E,l));return yield p.user._updateTokensIfNecessary(R),p.user.reload()})()}unenroll(c){var l=this;return(0,C.A)(function*(){const p="string"==typeof c?c:c.uid,y=yield l.user.getIdToken();try{const E=yield Nr(l.user,function pb(f,c){return fe(f,"POST","/v2/accounts/mfaEnrollment:withdraw",ne(f,c))}(l.user.auth,{idToken:y,mfaEnrollmentId:p}));l.enrolledFactors=l.enrolledFactors.filter(({uid:R})=>R!==p),yield l.user._updateTokensIfNecessary(E),yield l.user.reload()}catch(E){throw E}})()}}const Xc=new WeakMap,Bh="__sak";class PI{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(Bh,"1"),this.storage.removeItem(Bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const jh=(()=>{class f extends PI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,p)=>this.onStorageEvent(l,p),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=K(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const p of Object.keys(this.listeners)){const y=this.storage.getItem(p),E=this.localCache[p];y!==E&&l(p,E,y)}}onStorageEvent(l,p=!1){if(!l.key)return void this.forAllChangedKeys((U,re,ve)=>{this.notifyListeners(U,ve)});const y=l.key;p?this.detachListener():this.stopPolling();const E=()=>{const U=this.storage.getItem(y);!p&&this.localCache[y]===U||this.notifyListeners(y,U)},R=this.storage.getItem(y);!function x(){return(0,ee.lT)()&&10===document.documentMode}()||R===l.newValue||l.newValue===l.oldValue?E():setTimeout(E,10)}notifyListeners(l,p){this.localCache[l]=p;const y=this.listeners[l];if(y)for(const E of Array.from(y))E(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,p,y)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:p,newValue:y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,p){var y=()=>super._set,E=this;return(0,C.A)(function*(){yield y().call(E,l,p),E.localCache[l]=JSON.stringify(p)})()}_get(l){var p=()=>super._get,y=this;return(0,C.A)(function*(){const E=yield p().call(y,l);return y.localCache[l]=JSON.stringify(E),E})()}_remove(l){var p=()=>super._remove,y=this;return(0,C.A)(function*(){yield p().call(y,l),delete y.localCache[l]})()}}return f.type="LOCAL",f})(),en=(()=>{class f extends PI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,p){}_removeListener(l,p){}}return f.type="SESSION",f})();let yi=(()=>{class f{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const p=this.receivers.find(E=>E.isListeningto(l));if(p)return p;const y=new f(l);return this.receivers.push(y),y}isListeningto(l){return this.eventTarget===l}handleEvent(l){var p=this;return(0,C.A)(function*(){const y=l,{eventId:E,eventType:R,data:U}=y.data,re=p.handlersMap[R];if(!re?.size)return;y.ports[0].postMessage({status:"ack",eventId:E,eventType:R});const ve=Array.from(re).map(function(){var Re=(0,C.A)(function*(cn){return cn(y.origin,U)});return function(cn){return Re.apply(this,arguments)}}()),Me=yield function el(f){return Promise.all(f.map(function(){var c=(0,C.A)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(p){return{fulfilled:!1,reason:p}}});return function(l){return c.apply(this,arguments)}}()))}(ve);y.ports[0].postMessage({status:"done",eventId:E,eventType:R,response:Me})})()}_subscribe(l,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(p)}_unsubscribe(l,p){this.handlersMap[l]&&p&&this.handlersMap[l].delete(p),(!p||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function da(f="",c=10){let l="";for(let p=0;p<c;p++)l+=Math.floor(10*Math.random());return f+l}class lm{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,p=50){var y=this;return(0,C.A)(function*(){const E=typeof MessageChannel<"u"?new MessageChannel:null;if(!E)throw new Error("connection_unavailable");let R,U;return new Promise((re,ve)=>{const Me=da("",20);E.port1.start();const Re=setTimeout(()=>{ve(new Error("unsupported_event"))},p);U={messageChannel:E,onMessage(cn){const Mi=cn;if(Mi.data.eventId===Me)switch(Mi.data.status){case"ack":clearTimeout(Re),R=setTimeout(()=>{ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(R),re(Mi.data.response);break;default:clearTimeout(Re),clearTimeout(R),ve(new Error("invalid_response"))}}},y.handlers.add(U),E.port1.addEventListener("message",U.onMessage),y.target.postMessage({eventType:c,eventId:Me,data:l},[E.port2])}).finally(()=>{U&&y.removeMessageHandler(U)})})()}}function bn(){return window}function yu(){return typeof bn().WorkerGlobalScope<"u"&&"function"==typeof bn().importScripts}function vu(){return(vu=(0,C.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Hh="firebaseLocalStorageDb",fo="firebaseLocalStorage",ha="fbase_key";class Yi{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function Iu(f,c){return f.transaction([fo],c?"readwrite":"readonly").objectStore(fo)}function gm(){const f=indexedDB.open(Hh,1);return new Promise((c,l)=>{f.addEventListener("error",()=>{l(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(fo,{keyPath:ha})}catch(y){l(y)}}),f.addEventListener("success",(0,C.A)(function*(){const p=f.result;p.objectStoreNames.contains(fo)?c(p):(p.close(),yield function mb(){const f=indexedDB.deleteDatabase(Hh);return new Yi(f).toPromise()}(),c(yield gm()))}))})}function MI(f,c,l){return zh.apply(this,arguments)}function zh(){return(zh=(0,C.A)(function*(f,c,l){const p=Iu(f,!0).put({[ha]:c,value:l});return new Yi(p).toPromise()})).apply(this,arguments)}function mm(){return(mm=(0,C.A)(function*(f,c){const l=Iu(f,!1).get(c),p=yield new Yi(l).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function qh(f,c){const l=Iu(f,!0).delete(c);return new Yi(l).toPromise()}const Eu=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,C.A)(function*(){return l.db||(l.db=yield gm()),l.db})()}_withRetries(l){var p=this;return(0,C.A)(function*(){let y=0;for(;;)try{const E=yield p._openDb();return yield l(E)}catch(E){if(y++>3)throw E;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,C.A)(function*(){return yu()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,C.A)(function*(){l.receiver=yi._getInstance(function fm(){return yu()?self:null}()),l.receiver._subscribe("keyChanged",function(){var p=(0,C.A)(function*(y,E){return{keyProcessed:(yield l._poll()).includes(E.key)}});return function(y,E){return p.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var p=(0,C.A)(function*(y,E){return["keyChanged"]});return function(y,E){return p.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,C.A)(function*(){var p,y;if(l.activeServiceWorker=yield function hm(){return vu.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new lm(l.activeServiceWorker);const E=yield l.sender._send("ping",{},800);E&&null!==(p=E[0])&&void 0!==p&&p.fulfilled&&null!==(y=E[0])&&void 0!==y&&y.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var p=this;return(0,C.A)(function*(){if(p.sender&&p.activeServiceWorker&&function $h(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:l},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.A)(function*(){try{if(!indexedDB)return!1;const l=yield gm();return yield MI(l,Bh,"1"),yield qh(l,Bh),!0}catch{}return!1})()}_withPendingWrite(l){var p=this;return(0,C.A)(function*(){p.pendingWrites++;try{yield l()}finally{p.pendingWrites--}})()}_set(l,p){var y=this;return(0,C.A)(function*(){return y._withPendingWrite((0,C.A)(function*(){return yield y._withRetries(E=>MI(E,l,p)),y.localCache[l]=p,y.notifyServiceWorker(l)}))})()}_get(l){var p=this;return(0,C.A)(function*(){const y=yield p._withRetries(E=>function xI(f,c){return mm.apply(this,arguments)}(E,l));return p.localCache[l]=y,y})()}_remove(l){var p=this;return(0,C.A)(function*(){return p._withPendingWrite((0,C.A)(function*(){return yield p._withRetries(y=>qh(y,l)),delete p.localCache[l],p.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,C.A)(function*(){const p=yield l._withRetries(R=>{const U=Iu(R,!1).getAll();return new Yi(U).toPromise()});if(!p)return[];if(0!==l.pendingWrites)return[];const y=[],E=new Set;if(0!==p.length)for(const{fbase_key:R,value:U}of p)E.add(R),JSON.stringify(l.localCache[R])!==JSON.stringify(U)&&(l.notifyListeners(R,U),y.push(R));for(const R of Object.keys(l.localCache))l.localCache[R]&&!E.has(R)&&(l.notifyListeners(R,null),y.push(R));return y})()}notifyListeners(l,p){this.localCache[l]=p;const y=this.listeners[l];if(y)for(const E of Array.from(y))E(p)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,C.A)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),tl=1e12;class VI{constructor(c){this.auth=c,this.counter=tl,this._widgets=new Map}render(c,l){const p=this.counter;return this._widgets.set(p,new Im(c,this.auth.name,l||{})),this.counter++,p}reset(c){var l;const p=c||tl;null===(l=this._widgets.get(p))||void 0===l||l.delete(),this._widgets.delete(p)}getResponse(c){var l;return(null===(l=this._widgets.get(c||tl))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,C.A)(function*(){var p;return null===(p=l._widgets.get(c||tl))||void 0===p||p.execute(),""})()}}class Im{constructor(c,l,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const y="string"==typeof c?document.getElementById(c):c;le(y,"argument-error",{appName:l}),this.container=y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function FI(f){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const nl=Hg("rcb"),LI=new Y(3e4,6e4);class yb{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=bn().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return le(function UI(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&Mr(bn().grecaptcha)?Promise.resolve(bn().grecaptcha):new Promise((p,y)=>{const E=bn().setTimeout(()=>{y(Vt(c,"network-request-failed"))},LI.get());bn()[nl]=()=>{bn().clearTimeout(E),delete bn()[nl];const U=bn().grecaptcha;if(!U||!Mr(U))return void y(Vt(c,"internal-error"));const re=U.render;U.render=(ve,Me)=>{const Re=re(ve,Me);return this.counter++,Re},this.hostLanguage=l,p(U)},$g(`${function J0(){return Pc.recaptchaV2Script}()}?${(0,ee.Am)({onload:nl,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(E),y(Vt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=bn().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class vi{load(c){return(0,C.A)(function*(){return new VI(c)})()}clearedOneInstance(){}}const Wh="recaptcha",BI={theme:"light",type:"image"};class jI{constructor(c,l,p=Object.assign({},BI)){this.parameters=p,this.type=Wh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pt(c),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const y="string"==typeof l?document.getElementById(l):l;le(y,this.auth,"argument-error"),this.container=y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new vi:new yb,this.validateStartingState()}verify(){var c=this;return(0,C.A)(function*(){c.assertNotDestroyed();const l=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(l)||new Promise(E=>{const R=U=>{U&&(c.tokenChangeListeners.delete(R),E(U))};c.tokenChangeListeners.add(R),c.isInvisible&&p.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(p=>p(l)),"function"==typeof c)c(l);else if("string"==typeof c){const p=bn()[c];"function"==typeof p&&p(l)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,C.A)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const p=document.createElement("div");l.appendChild(p),l=p}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,C.A)(function*(){le(pi()&&!yu(),c.auth,"internal-error"),yield function Em(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function Yo(f){return Hn.apply(this,arguments)}(c.auth);le(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rl{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=bi._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function wu(){return(wu=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const p=Pt(f),y=yield xt(p,c,(0,ee.Ku)(l));return new rl(y,E=>Wc(p,E))})).apply(this,arguments)}function Ii(){return(Ii=(0,C.A)(function*(f,c,l){const p=(0,ee.Ku)(f);yield Gc(!1,p,"phone");const y=yield xt(p.auth,c,(0,ee.Ku)(l));return new rl(y,E=>Si(p,E))})).apply(this,arguments)}function il(){return(il=(0,C.A)(function*(f,c,l){const p=(0,ee.Ku)(f);if((0,Pe._isFirebaseServerApp)(p.auth.app))return Promise.reject(ze(p.auth));const y=yield xt(p.auth,c,(0,ee.Ku)(l));return new rl(y,E=>tm(p,E))})).apply(this,arguments)}function xt(f,c,l){return Au.apply(this,arguments)}function Au(){return Au=(0,C.A)(function*(f,c,l){var p;const y=yield l.verify();try{let E;if(le("string"==typeof y,f,"argument-error"),le(l.type===Wh,f,"argument-error"),E="string"==typeof c?{phoneNumber:c}:c,"session"in E){const R=E.session;if("phoneNumber"in E)return le("enroll"===R.type,f,"internal-error"),(yield function db(f,c){return fe(f,"POST","/v2/accounts/mfaEnrollment:start",ne(f,c))}(f,{idToken:R.credential,phoneEnrollmentInfo:{phoneNumber:E.phoneNumber,recaptchaToken:y}})).phoneSessionInfo.sessionInfo;{le("signin"===R.type,f,"internal-error");const U=(null===(p=E.multiFactorHint)||void 0===p?void 0:p.uid)||E.multiFactorUid;return le(U,f,"missing-multi-factor-info"),(yield function _b(f,c){return fe(f,"POST","/v2/accounts/mfaSignIn:start",ne(f,c))}(f,{mfaPendingCredential:R.credential,mfaEnrollmentId:U,phoneSignInInfo:{recaptchaToken:y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:R}=yield function ra(f,c){return Th.apply(this,arguments)}(f,{phoneNumber:E.phoneNumber,recaptchaToken:y});return R}}finally{l._reset()}}),Au.apply(this,arguments)}function cr(){return(cr=(0,C.A)(function*(f,c){const l=(0,ee.Ku)(f);if((0,Pe._isFirebaseServerApp)(l.auth.app))return Promise.reject(ze(l.auth));yield Sh(l,c)})).apply(this,arguments)}let Tu=(()=>{class f{constructor(l){this.providerId=f.PROVIDER_ID,this.auth=Pt(l)}verifyPhoneNumber(l,p){return xt(this.auth,l,(0,ee.Ku)(p))}static credential(l,p){return bi._fromVerification(l,p)}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:p,temporaryProof:y}=l;return p&&y?bi._fromTokenResponse(p,y):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function Ps(f,c){return c?Ce(c):(le(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class Ms extends so{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return ls(c,this._buildIdpRequest())}_linkToIdToken(c,l){return ls(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return ls(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function si(f){return Mh(f.auth,new Ms(f),f.bypassAuthState)}function zI(f){const{auth:c,user:l}=f;return le(l,c,"internal-error"),em(l,new Ms(f),f.bypassAuthState)}function qI(f){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,C.A)(function*(f){const{auth:c,user:l}=f;return le(l,c,"internal-error"),Sh(l,new Ms(f),f.bypassAuthState)})).apply(this,arguments)}class hs{constructor(c,l,p,y,E=!1){this.auth=c,this.resolver=p,this.user=y,this.bypassAuthState=E,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,C.A)(function*(p,y){c.pendingPromise={resolve:p,reject:y};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(E){c.reject(E)}});return function(p,y){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,C.A)(function*(){const{urlResponse:p,sessionId:y,postBody:E,tenantId:R,error:U,type:re}=c;if(U)return void l.reject(U);const ve={auth:l.auth,requestUri:p,sessionId:y,tenantId:R||void 0,postBody:E||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(re)(ve))}catch(Me){l.reject(Me)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return si;case"linkViaPopup":case"linkViaRedirect":return qI;case"reauthViaPopup":case"reauthViaRedirect":return zI;default:bt(this.auth,"internal-error")}}resolve(c){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Am=new Y(2e3,1e4);function ol(){return(ol=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(Vt(f,"operation-not-supported-in-this-environment"));const p=Pt(f);En(f,c,Fn);const y=Ps(p,l);return new ul(p,"signInViaPopup",c,y).executeNotNull()})).apply(this,arguments)}function al(){return(al=(0,C.A)(function*(f,c,l){const p=(0,ee.Ku)(f);if((0,Pe._isFirebaseServerApp)(p.auth.app))return Promise.reject(Vt(p.auth,"operation-not-supported-in-this-environment"));En(p.auth,c,Fn);const y=Ps(p.auth,l);return new ul(p.auth,"reauthViaPopup",c,y,p).executeNotNull()})).apply(this,arguments)}function Ge(){return(Ge=(0,C.A)(function*(f,c,l){const p=(0,ee.Ku)(f);En(p.auth,c,Fn);const y=Ps(p.auth,l);return new ul(p.auth,"linkViaPopup",c,y,p).executeNotNull()})).apply(this,arguments)}let ul=(()=>{class f extends hs{constructor(l,p,y,E,R){super(l,p,E,R),this.provider=y,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var l=this;return(0,C.A)(function*(){const p=yield l.execute();return le(p,l.auth,"internal-error"),p})()}onExecution(){var l=this;return(0,C.A)(function*(){qt(1===l.filter.length,"Popup operations only handle one event");const p=da();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],p),l.authWindow.associatedEvent=p,l.resolver._originValidation(l.auth).catch(y=>{l.reject(y)}),l.resolver._isIframeWebStorageSupported(l.auth,y=>{y||l.reject(Vt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(Vt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const l=()=>{var p,y;this.pollId=null!==(y=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==y&&y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Vt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,Am.get())};l()}}return f.currentPopupAction=null,f})();const vb="pendingRedirect",Cu=new Map;class KI extends hs{constructor(c,l,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,C.A)(function*(){let p=Cu.get(l.auth._key());if(!p){try{const E=(yield function QI(f,c){return cl.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;p=()=>Promise.resolve(E)}catch(y){p=()=>Promise.reject(y)}Cu.set(l.auth._key(),p)}return l.bypassAuthState||Cu.set(l.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,p=this;return(0,C.A)(function*(){if("signInViaRedirect"===c.type)return l().call(p,c);if("unknown"!==c.type){if(c.eventId){const y=yield p.auth._redirectUserForId(c.eventId);if(y)return p.user=y,l().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,C.A)(function*(){})()}cleanUp(){}}function cl(){return(cl=(0,C.A)(function*(f,c){const l=Dm(c),p=Cm(f);if(!(yield p._isAvailable()))return!1;const y="true"===(yield p._get(l));return yield p._remove(l),y})).apply(this,arguments)}function xs(f,c){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,C.A)(function*(f,c){return Cm(f)._set(Dm(c),"true")})).apply(this,arguments)}function Yh(f,c){Cu.set(f._key(),c)}function Cm(f){return Ce(f._redirectPersistence)}function Dm(f){return $e(vb,f.config.apiKey,f.name)}function ue(f,c,l){return function It(f,c,l){return lr.apply(this,arguments)}(f,c,l)}function lr(){return(lr=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const p=Pt(f);En(f,c,Fn),yield p._initializationPromise;const y=Ps(p,l);return yield xs(y,p),y._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function Lr(f,c,l){return function nr(f,c,l){return ll.apply(this,arguments)}(f,c,l)}function ll(){return(ll=(0,C.A)(function*(f,c,l){const p=(0,ee.Ku)(f);if(En(p.auth,c,Fn),(0,Pe._isFirebaseServerApp)(p.auth.app))return Promise.reject(ze(p.auth));yield p.auth._initializationPromise;const y=Ps(p.auth,l);yield xs(y,p.auth);const E=yield dr(p);return y._openRedirect(p.auth,c,"reauthViaRedirect",E)})).apply(this,arguments)}function Du(f,c,l){return function Ji(f,c,l){return bu.apply(this,arguments)}(f,c,l)}function bu(){return(bu=(0,C.A)(function*(f,c,l){const p=(0,ee.Ku)(f);En(p.auth,c,Fn),yield p.auth._initializationPromise;const y=Ps(p.auth,l);yield Gc(!1,p,c.providerId),yield xs(y,p.auth);const E=yield dr(p);return y._openRedirect(p.auth,c,"linkViaRedirect",E)})).apply(this,arguments)}function Zh(){return(Zh=(0,C.A)(function*(f,c){return yield Pt(f)._initializationPromise,Xh(f,c,!1)})).apply(this,arguments)}function Xh(f,c){return dl.apply(this,arguments)}function dl(){return(dl=(0,C.A)(function*(f,c,l=!1){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const p=Pt(f),y=Ps(p,c),R=yield new KI(p,y,l).execute();return R&&!l&&(delete R.user._redirectEventId,yield p._persistUserIfCurrent(R.user),yield p._setRedirectUser(null,c)),R})).apply(this,arguments)}function dr(f){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,C.A)(function*(f){const c=da(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class po{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(l=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Rm(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sm(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var p;if(c.error&&!Sm(c)){const y=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";l.onError(Vt(this.auth,y))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const p=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zi(c))}saveEventToCache(c){this.cachedEventUids.add(Zi(c)),this.lastProcessedEventTime=Date.now()}}function Zi(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function Sm({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function Pm(f){return ef.apply(this,arguments)}function ef(){return(ef=(0,C.A)(function*(f,c={}){return fe(f,"GET","/v1/projects",c)})).apply(this,arguments)}const tf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nf=/^https?/;function Su(){return(Su=(0,C.A)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield Pm(f);for(const l of c)try{if(JI(l))return}catch{}bt(f,"unauthorized-domain")})).apply(this,arguments)}function JI(f){const c=Rr(),{protocol:l,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const R=new URL(f);return""===R.hostname&&""===p?"chrome-extension:"===l&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&R.hostname===p}if(!nf.test(l))return!1;if(tf.test(f))return p===f;const y=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(p)}const xm=new Y(3e4,6e4);function hl(){const f=bn().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let l=0;l<f.CP.length;l++)f.CP[l]=null}let Ru=null;const km=new Y(5e3,15e3),rf="__/auth/iframe",ZI="emulator/auth/iframe",XI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Er=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function go(f){const c=f.config;le(c.authDomain,f,"auth-domain-config-required");const l=c.emulator?Z(c,ZI):`https://${f.config.authDomain}/${rf}`,p={apiKey:c.apiKey,appName:f.name,v:Pe.SDK_VERSION},y=Er.get(f.config.apiHost);y&&(p.eid=y);const E=f._getFrameworks();return E.length&&(p.fw=E.join(",")),`${l}?${(0,ee.Am)(p).slice(1)}`}function sf(){return sf=(0,C.A)(function*(f){const c=yield function Om(f){return Ru=Ru||function Nm(f){return new Promise((c,l)=>{var p,y,E;function R(){hl(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{hl(),l(Vt(f,"network-request-failed"))},timeout:xm.get()})}if(null!==(y=null===(p=bn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==y&&y.Iframe)c(gapi.iframes.getContext());else{if(null===(E=bn().gapi)||void 0===E||!E.load){const U=Hg("iframefcb");return bn()[U]=()=>{gapi.load?R():l(Vt(f,"network-request-failed"))},$g(`${function Z0(){return Pc.gapiScript}()}?onload=${U}`).catch(re=>l(re))}R()}}).catch(c=>{throw Ru=null,c})}(f),Ru}(f),l=bn().gapi;return le(l,f,"internal-error"),c.open({where:document.body,url:go(f),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XI,dontclear:!0},p=>new Promise(function(){var y=(0,C.A)(function*(E,R){yield p.restyle({setHideOnLeave:!1});const U=Vt(f,"network-request-failed"),re=bn().setTimeout(()=>{R(U)},km.get());function ve(){bn().clearTimeout(re),E(p)}p.ping(ve).then(ve,()=>{R(U)})});return function(E,R){return y.apply(this,arguments)}}()))}),sf.apply(this,arguments)}const eE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pu{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const fl="__/auth/handler",pl="emulator/auth/handler",gl=encodeURIComponent("fac");function Mu(f,c,l,p,y,E){return ml.apply(this,arguments)}function ml(){return(ml=(0,C.A)(function*(f,c,l,p,y,E){le(f.config.authDomain,f,"auth-domain-config-required"),le(f.config.apiKey,f,"invalid-api-key");const R={apiKey:f.config.apiKey,appName:f.name,authType:l,redirectUrl:p,v:Pe.SDK_VERSION,eventId:y};if(c instanceof Fn){c.setDefaultLanguage(f.languageCode),R.providerId=c.providerId||"",(0,ee.Im)(c.getCustomParameters())||(R.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Me,Re]of Object.entries(E||{}))R[Me]=Re}if(c instanceof yr){const Me=c.getScopes().filter(Re=>""!==Re);Me.length>0&&(R.scopes=Me.join(","))}f.tenantId&&(R.tid=f.tenantId);const U=R;for(const Me of Object.keys(U))void 0===U[Me]&&delete U[Me];const re=yield f._getAppCheckToken(),ve=re?`#${gl}=${encodeURIComponent(re)}`:"";return`${function Lm({config:f}){return f.emulator?Z(f,pl):`https://${f.authDomain}/${fl}`}(f)}?${(0,ee.Am)(U).slice(1)}${ve}`})).apply(this,arguments)}const af="webStorageSupport",pa=class fa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=en,this._completeRedirectFn=Xh,this._overrideRedirectResult=Yh}_openPopup(c,l,p,y){var E=this;return(0,C.A)(function*(){var R;qt(null===(R=E.eventManagers[c._key()])||void 0===R?void 0:R.manager,"_initialize() not called before _openPopup()");const U=yield Mu(c,l,p,Rr(),y);return function Ns(f,c,l,p=500,y=600){const E=Math.max((window.screen.availHeight-y)/2,0).toString(),R=Math.max((window.screen.availWidth-p)/2,0).toString();let U="";const re=Object.assign(Object.assign({},eE),{width:p.toString(),height:y.toString(),top:E,left:R}),ve=(0,ee.ZQ)().toLowerCase();l&&(U=St(ve)?"_blank":l),er(ve)&&(c=c||"http://localhost",re.scrollbars="yes");const Me=Object.entries(re).reduce((cn,[Mi,Ao])=>`${cn}${Mi}=${Ao},`,"");if(function Q(f=(0,ee.ZQ)()){var c;return cs(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ve)&&"_self"!==U)return function rE(f,c){const l=document.createElement("a");l.href=f,l.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(p)}(c||"",U),new Pu(null);const Re=window.open(c||"",U,Me);le(Re,f,"popup-blocked");try{Re.focus()}catch{}return new Pu(Re)}(c,U,da())})()}_openRedirect(c,l,p,y){var E=this;return(0,C.A)(function*(){return yield E._originValidation(c),function dm(f){bn().location.href=f}(yield Mu(c,l,p,Rr(),y)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:y,promise:E}=this.eventManagers[l];return y?Promise.resolve(y):(qt(E,"If manager is not set, promise should be"),E)}const p=this.initAndGetManager(c);return this.eventManagers[l]={promise:p},p.catch(()=>{delete this.eventManagers[l]}),p}initAndGetManager(c){var l=this;return(0,C.A)(function*(){const p=yield function un(f){return sf.apply(this,arguments)}(c),y=new po(c);return p.register("authEvent",E=>(le(E?.authEvent,c,"invalid-auth-event"),{status:y.onEvent(E.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:y},l.iframes[c._key()]=p,y})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(af,{type:af},y=>{var E;const R=null===(E=y?.[0])||void 0===E?void 0:E[af];void 0!==R&&l(!!R),bt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Mm(f){return Su.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return K()||us()||cs()}};class Um{constructor(c){this.factorId=c}_process(c,l,p){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,p);case"signin":return this._finalizeSignIn(c,l.credential);default:return Yt("unexpected MultiFactorSessionType")}}}class Bm extends Um{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Bm(c)}_finalizeEnroll(c,l,p){return function hb(f,c){return fe(f,"POST","/v2/accounts/mfaEnrollment:finalize",ne(f,c))}(c,{idToken:l,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function OI(f,c){return fe(f,"POST","/v2/accounts/mfaSignIn:finalize",ne(f,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let uf=(()=>{class f{constructor(){}static assertion(l){return Bm._fromCredential(l)}}return f.FACTOR_ID="phone",f})();var iE="@firebase/auth";class xu{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,C.A)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hr(){return window}(0,ee.XA)("authIdTokenMaxAge"),function Y0(f){Pc=f}({loadJS:f=>new Promise((c,l)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=y=>{const E=Vt("internal-error");E.customData=y,l(E)},p.type="text/javascript",p.charset="UTF-8",function uE(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Nu(f){(0,Pe._registerComponent)(new gn.uA("auth",(c,{options:l})=>{const p=c.getProvider("app").getImmediate(),y=c.getProvider("heartbeat"),E=c.getProvider("app-check-internal"),{apiKey:R,authDomain:U}=p.options;le(R&&!R.includes(":"),"invalid-api-key",{appName:p.name});const re={apiKey:R,authDomain:U,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ae(f)},ve=new Xr(p,y,E,re);return function AI(f,c){const l=c?.persistence||[],p=(Array.isArray(l)?l:[l]).map(Ce);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(ve,l),ve},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,p)=>{c.getProvider("auth-internal").initialize()})),(0,Pe._registerComponent)(new gn.uA("auth-internal",c=>{const l=Pt(c.getProvider("auth").getImmediate());return new xu(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Pe.registerVersion)(iE,"1.7.9",function sE(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,Pe.registerVersion)(iE,"1.7.9","esm2017")}("Browser");function Ou(){return Ou=(0,C.A)(function*(f,c,l){var p;const{BuildInfo:y}=hr();qt(c.sessionId,"AuthEvent did not contain a session ID");const E=yield function qm(f){return El.apply(this,arguments)}(c.sessionId),R={};return cs()?R.ibi=y.packageName:Gi()?R.apn=y.packageName:bt(f,"operation-not-supported-in-this-environment"),y.displayName&&(R.appDisplayName=y.displayName),R.sessionId=E,Mu(f,l,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,R)}),Ou.apply(this,arguments)}function ga(){return(ga=(0,C.A)(function*(f){const{BuildInfo:c}=hr(),l={};cs()?l.iosBundleId=c.packageName:Gi()?l.androidPackageName=c.packageName:bt(f,"operation-not-supported-in-this-environment"),yield Pm(f,l)})).apply(this,arguments)}function Il(){return(Il=(0,C.A)(function*(f,c,l){const{cordova:p}=hr();let y=()=>{};try{yield new Promise((E,R)=>{let U=null;function re(){var Re;E();const cn=null===(Re=p.plugins.browsertab)||void 0===Re?void 0:Re.close;"function"==typeof cn&&cn(),"function"==typeof l?.close&&l.close()}function ve(){U||(U=window.setTimeout(()=>{R(Vt(f,"redirect-cancelled-by-user"))},2e3))}function Me(){"visible"===document?.visibilityState&&ve()}c.addPassiveListener(re),document.addEventListener("resume",ve,!1),Gi()&&document.addEventListener("visibilitychange",Me,!1),y=()=>{c.removePassiveListener(re),document.removeEventListener("resume",ve,!1),document.removeEventListener("visibilitychange",Me,!1),U&&window.clearTimeout(U)}})}finally{y()}})).apply(this,arguments)}function El(){return(El=(0,C.A)(function*(f){const c=function dE(f){if(qt(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const c=new ArrayBuffer(f.length),l=new Uint8Array(c);for(let p=0;p<f.length;p++)l[p]=f.charCodeAt(p);return l}(f),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(y=>y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class mo extends po{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInitialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInitialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,C.A)(function*(){yield c.initPromise})()}}function ff(f){return _o.apply(this,arguments)}function _o(){return(_o=(0,C.A)(function*(f){const c=yield pf()._get(Un(f));return c&&(yield pf()._remove(Un(f))),c})).apply(this,arguments)}function wr(){const f=[];for(let l=0;l<20;l++){const p=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return f.join("")}function pf(){return Ce(jh)}function Un(f){return $e("authEvent",f.config.apiKey,f.name)}function ku(f){if(!f?.includes("?"))return{};const[c,...l]=f.split("?");return(0,ee.I9)(l.join("?"))}const _a=class ma{constructor(){this._redirectPersistence=en,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xh,this._overrideRedirectResult=Yh}_initialize(c){var l=this;return(0,C.A)(function*(){const p=c._key();let y=l.eventManagers.get(p);return y||(y=new mo(c),l.eventManagers.set(p,y),l.attachCallbackListeners(c,y)),y})()}_openPopup(c){bt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,p,y){var E=this;return(0,C.A)(function*(){!function zm(f){var c,l,p,y,E,R,U,re,ve,Me;const Re=hr();le("function"==typeof(null===(c=Re?.universalLinks)||void 0===c?void 0:c.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(typeof(null===(l=Re?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le("function"==typeof(null===(E=null===(y=null===(p=Re?.cordova)||void 0===p?void 0:p.plugins)||void 0===y?void 0:y.browsertab)||void 0===E?void 0:E.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(re=null===(U=null===(R=Re?.cordova)||void 0===R?void 0:R.plugins)||void 0===U?void 0:U.browsertab)||void 0===re?void 0:re.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(Me=null===(ve=Re?.cordova)||void 0===ve?void 0:ve.InAppBrowser)||void 0===Me?void 0:Me.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const R=yield E._initialize(c);yield R.initialized(),R.resetRedirect(),function YI(){Cu.clear()}(),yield E._originValidation(c);const U=function hE(f,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:wr(),postBody:null,tenantId:f.tenantId,error:Vt(f,"no-auth-event")}}(c,p,y);yield function Gm(f,c){return pf()._set(Un(f),c)}(c,U);const re=yield function vl(f,c,l){return Ou.apply(this,arguments)}(c,U,l),ve=yield function hf(f){const{cordova:c}=hr();return new Promise(l=>{c.plugins.browsertab.isAvailable(p=>{let y=null;p?c.plugins.browsertab.openUrl(f):y=c.InAppBrowser.open(f,function de(f=(0,ee.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),l(y)})})}(re);return function lE(f,c,l){return Il.apply(this,arguments)}(c,R,ve)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Hm(f){return ga.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:p,handleOpenURL:y,BuildInfo:E}=hr(),R=setTimeout((0,C.A)(function*(){yield ff(c),l.onEvent(yo())}),500),U=function(){var Me=(0,C.A)(function*(Re){clearTimeout(R);const cn=yield ff(c);let Mi=null;cn&&Re?.url&&(Mi=function fE(f,c){var l,p;const y=function pE(f){const c=ku(f),l=c.link?decodeURIComponent(c.link):void 0,p=ku(l).link,y=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return ku(y).link||y||p||l||f}(c);if(y.includes("/__/auth/callback")){const E=ku(y),R=E.firebaseError?function gf(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(E.firebaseError)):null,U=null===(p=null===(l=R?.code)||void 0===l?void 0:l.split("auth/"))||void 0===p?void 0:p[1],re=U?Vt(U):null;return re?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:re,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:y,postBody:null}}return null}(cn,Re.url)),l.onEvent(Mi||yo())});return function(cn){return Me.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,U);const re=y,ve=`${E.packageName.toLowerCase()}://`;hr().handleOpenURL=function(){var Me=(0,C.A)(function*(Re){if(Re.toLowerCase().startsWith(ve)&&U({url:Re}),"function"==typeof re)try{re(Re)}catch(cn){console.error(cn)}});return function(Re){return Me.apply(this,arguments)}}()}};function yo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Vt("no-auth-event")}}function Vu(){var f;return(null===(f=self?.location)||void 0===f?void 0:f.protocol)||null}function gE(f=(0,ee.ZQ)()){return!("file:"!==Vu()&&"ionic:"!==Vu()&&"capacitor:"!==Vu()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function vo(){try{const f=self.localStorage,c=da();if(f)return f.setItem(c,"1"),f.removeItem(c),!function Cb(f=(0,ee.ZQ)()){return function Ab(){return(0,ee.lT)()&&11===document?.documentMode}()||function Tb(f=(0,ee.ZQ)()){return/Edge\/\d+/.test(f)}(f)}()||(0,ee.zW)()}catch{return _f()&&(0,ee.zW)()}return!1}function _f(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function yf(){return(function Eb(){return"http:"===Vu()||"https:"===Vu()}()||(0,ee.sr)()||gE())&&!function wb(){return(0,ee.lV)()||(0,ee.Ll)()}()&&vo()&&!_f()}function Pn(){return gE()&&typeof document<"u"}function Io(){return(Io=(0,C.A)(function*(){return!!Pn()&&new Promise(f=>{const c=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),f(!0)})})})).apply(this,arguments)}const tn={LOCAL:"local",NONE:"none",SESSION:"session"},Xi=le,vf="persistence";function Eo(f){return If.apply(this,arguments)}function If(){return(If=(0,C.A)(function*(f){yield f._initializationPromise;const c=Km(),l=$e(vf,f.config.apiKey,f.name);c&&c.setItem(l,f._getPersistence())})).apply(this,arguments)}function Km(){var f;try{return(null===(f=function _E(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const bb=le;class Mn{constructor(){this.browserResolver=Ce(pa),this.cordovaResolver=Ce(_a),this.underlyingResolver=null,this._redirectPersistence=en,this._completeRedirectFn=Xh,this._overrideRedirectResult=Yh}_initialize(c){var l=this;return(0,C.A)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,p,y){var E=this;return(0,C.A)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._openPopup(c,l,p,y)})()}_openRedirect(c,l,p,y){var E=this;return(0,C.A)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._openRedirect(c,l,p,y)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return Pn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return bb(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,C.A)(function*(){if(c.underlyingResolver)return;const l=yield function mE(){return Io.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function Cl(f){return f.unwrap()}function Sb(f){return Ym(f)}function Ym(f){const{_tokenResponse:c}=f instanceof ee.g?f.customData:f;if(!c)return null;if(!(f instanceof ee.g)&&"temporaryProof"in c&&"phoneNumber"in c)return Tu.credentialFromResult(f);const l=c.providerId;if(!l||l===ht.PASSWORD)return null;let p;switch(l){case ht.GOOGLE:p=Uc;break;case ht.FACEBOOK:p=du;break;case ht.GITHUB:p=Bc;break;case ht.TWITTER:p=Dh;break;default:const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:R,pendingToken:U,nonce:re}=c;return E||R||y||U?U?l.startsWith("saml.")?Vr._create(l,U):Di._fromParams({providerId:l,signInMethod:l,pendingToken:U,idToken:y,accessToken:E}):new gt(l).credential({idToken:y,accessToken:E,rawNonce:re}):null}return f instanceof ee.g?p.credentialFromError(f):p.credentialFromResult(f)}function Ur(f,c){return c.catch(l=>{throw l instanceof ee.g&&function Qm(f,c){var l;const p=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new yE(f,function lb(f,c){var l;const p=(0,ee.Ku)(f),y=c;return le(c.customData.operationType,p,"argument-error"),le(null===(l=y.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,p,"argument-error"),am._fromError(p,y)}(f,c));else if(p){const y=Ym(c),E=c;y&&(E.credential=y,E.tenantId=p.tenantId||void 0,E.email=p.email||void 0,E.phoneNumber=p.phoneNumber||void 0)}}(f,l),l}).then(l=>{const y=l.user;return{operationType:l.operationType,credential:Sb(l),additionalUserInfo:Ir(l),user:fs.getOrCreate(y)}})}function Ef(f,c){return wf.apply(this,arguments)}function wf(){return(wf=(0,C.A)(function*(f,c){const l=yield c;return{verificationId:l.verificationId,confirm:p=>Ur(f,l.confirm(p))}})).apply(this,arguments)}class yE{constructor(c,l){this.resolver=l,this.auth=function va(f){return f.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Ur(Cl(this.auth),this.resolver.resolveSignIn(c))}}class fs{constructor(c){this._delegate=c,this.multiFactor=function cm(f){const c=(0,ee.Ku)(f);return Xc.has(c)||Xc.set(c,um._fromUser(c)),Xc.get(c)}(c)}static getOrCreate(c){return fs.USER_MAP.has(c)||fs.USER_MAP.set(c,new fs(c)),fs.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,C.A)(function*(){return Ur(l.auth,Si(l._delegate,c))})()}linkWithPhoneNumber(c,l){var p=this;return(0,C.A)(function*(){return Ef(p.auth,function HI(f,c,l){return Ii.apply(this,arguments)}(p._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,C.A)(function*(){return Ur(l.auth,function WI(f,c,l){return Ge.apply(this,arguments)}(l._delegate,c,Mn))})()}linkWithRedirect(c){var l=this;return(0,C.A)(function*(){return yield Eo(Pt(l.auth)),Du(l._delegate,c,Mn)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,C.A)(function*(){return Ur(l.auth,tm(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return Ef(this.auth,function wm(f,c,l){return il.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return Ur(this.auth,function Tm(f,c,l){return al.apply(this,arguments)}(this._delegate,c,Mn))}reauthenticateWithRedirect(c){var l=this;return(0,C.A)(function*(){return yield Eo(Pt(l.auth)),Lr(l._delegate,c,Mn)})()}sendEmailVerification(c){return function ua(f,c){return _i.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,C.A)(function*(){return yield function bI(f,c){return ti.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function mt(f,c){const l=(0,ee.Ku)(f);return(0,Pe._isFirebaseServerApp)(l.auth.app)?Promise.reject(ze(l.auth)):Jc(l,c,null)}(this._delegate,c)}updatePassword(c){return function sb(f,c){return Jc((0,ee.Ku)(f),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function sl(f,c){return cr.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function mu(f,c){return uo.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function gu(f,c,l){return Yc.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}fs.USER_MAP=new WeakMap;const wo=le;let Fu=(()=>{class f{constructor(l,p){if(this.app=l,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:y}=l.options;wo(y,"invalid-api-key",{appName:l.name}),wo(y,"invalid-api-key",{appName:l.name});const E=typeof window<"u"?Mn:void 0;this._delegate=p.initialize({options:{persistence:Lu(y,l.name),popupRedirectResolver:E}}),this._delegate._updateErrorMap(Yn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?fs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,p){!function mh(f,c,l){const p=Pt(f);le(p._canInitEmulator,p,"emulator-config-failed"),le(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const y=!!l?.disableWarnings,E=qg(c),{host:R,port:U}=function Nc(f){const c=qg(f),l=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!l)return{host:"",port:null};const p=l[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(p);if(y){const E=y[1];return{host:E,port:su(p.substr(E.length+1))}}{const[E,R]=p.split(":");return{host:E,port:su(R)}}}(c);p.config.emulator={url:`${E}//${R}${null===U?"":`:${U}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:R,port:U,protocol:E.replace(":",""),options:Object.freeze({disableWarnings:y})}),y||function _h(){function f(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,l,p)}applyActionCode(l){return function SI(f,c){return Zt.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return De(this._delegate,l)}confirmPasswordReset(l,p){return function Qc(f,c,l){return Fh.apply(this,arguments)}(this._delegate,l,p)}createUserWithEmailAndPassword(l,p){var y=this;return(0,C.A)(function*(){return Ur(y._delegate,function pu(f,c,l){return Gn.apply(this,arguments)}(y._delegate,l,p))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function Dn(f,c){return ao.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function aa(f,c){const l=lu.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,C.A)(function*(){wo(yf(),l._delegate,"operation-not-supported-in-this-environment");const p=yield function Jh(f,c){return Zh.apply(this,arguments)}(l._delegate,Mn);return p?Ur(l._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function Wm(f,c){Pt(f)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,p,y){const{next:E,error:R,complete:U}=Jm(l,p,y);return this._delegate.onAuthStateChanged(E,R,U)}onIdTokenChanged(l,p,y){const{next:E,error:R,complete:U}=Jm(l,p,y);return this._delegate.onIdTokenChanged(E,R,U)}sendSignInLinkToEmail(l,p){return function Cn(f,c,l){return Ki.apply(this,arguments)}(this._delegate,l,p)}sendPasswordResetEmail(l,p){return function rm(f,c,l){return Kc.apply(this,arguments)}(this._delegate,l,p||void 0)}setPersistence(l){var p=this;return(0,C.A)(function*(){let y;switch(function Tl(f,c){Xi(Object.values(tn).includes(c),f,"invalid-persistence-type"),(0,ee.lV)()?Xi(c!==tn.SESSION,f,"unsupported-persistence-type"):(0,ee.Ll)()?Xi(c===tn.NONE,f,"unsupported-persistence-type"):_f()?Xi(c===tn.NONE||c===tn.LOCAL&&(0,ee.zW)(),f,"unsupported-persistence-type"):Xi(c===tn.NONE||vo(),f,"unsupported-persistence-type")}(p._delegate,l),l){case tn.SESSION:y=en;break;case tn.LOCAL:y=(yield Ce(Eu)._isAvailable())?Eu:jh;break;case tn.NONE:y=Rn;break;default:return bt("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(y)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return Ur(this._delegate,function Zg(f){return Hc.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return Ur(this._delegate,Wc(this._delegate,l))}signInWithCustomToken(l){return Ur(this._delegate,function nm(f,c){return Ye.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,p){return Ur(this._delegate,function oa(f,c,l){return(0,Pe._isFirebaseServerApp)(f.app)?Promise.reject(ze(f)):Wc((0,ee.Ku)(f),ia.credential(c,l)).catch(function(){var p=(0,C.A)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&bs(f),y});return function(y){return p.apply(this,arguments)}}())}(this._delegate,l,p))}signInWithEmailLink(l,p){return Ur(this._delegate,function Xe(f,c,l){return oo.apply(this,arguments)}(this._delegate,l,p))}signInWithPhoneNumber(l,p){return Ef(this._delegate,function $I(f,c,l){return wu.apply(this,arguments)}(this._delegate,l,p))}signInWithPopup(l){var p=this;return(0,C.A)(function*(){return wo(yf(),p._delegate,"operation-not-supported-in-this-environment"),Ur(p._delegate,function GI(f,c,l){return ol.apply(this,arguments)}(p._delegate,l,Mn))})()}signInWithRedirect(l){var p=this;return(0,C.A)(function*(){return wo(yf(),p._delegate,"operation-not-supported-in-this-environment"),yield Eo(p._delegate),ue(p._delegate,l,Mn)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function Xt(f,c){return ri.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=tn,f})();function Jm(f,c,l){let p=f;"function"!=typeof f&&({next:p,error:c,complete:l}=f);const y=p;return{next:R=>y(R&&fs.getOrCreate(R)),error:c,complete:l}}function Lu(f,c){const l=function Db(f,c){const l=Km();if(!l)return[];const p=$e(vf,f,c);switch(l.getItem(p)){case tn.NONE:return[Rn];case tn.LOCAL:return[Eu,en];case tn.SESSION:return[en];default:return[]}}(f,c);if(typeof self<"u"&&!l.includes(Eu)&&l.push(Eu),typeof window<"u")for(const p of[jh,en])l.includes(p)||l.push(p);return l.includes(Rn)||l.push(Rn),l}class Af{constructor(){this.providerId="phone",this._delegate=new Tu(Cl(We.A.auth()))}static credential(c,l){return Tu.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}Af.PHONE_SIGN_IN_METHOD=Tu.PHONE_SIGN_IN_METHOD,Af.PROVIDER_ID=Tu.PROVIDER_ID;const Dl=le;class vE{constructor(c,l,p=We.A.app()){var y;Dl(null===(y=p.options)||void 0===y?void 0:y.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new jI(p.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Tf(f){f.INTERNAL.registerComponent(new gn.uA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new Fu(l,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ia,FacebookAuthProvider:du,GithubAuthProvider:Bc,GoogleAuthProvider:Uc,OAuthProvider:gt,SAMLAuthProvider:fu,PhoneAuthProvider:Af,PhoneMultiFactorGenerator:uf,RecaptchaVerifier:vE,TwitterAuthProvider:Dh,Auth:Fu,AuthCredential:so,Error:ee.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.14")}(We.A)},467:(os,or,it)=>{function C(Pe,ee,Tt,on,gn,Qn,ht){try{var oe=Pe[Qn](ht),ge=oe.value}catch(Ne){return void Tt(Ne)}oe.done?ee(ge):Promise.resolve(ge).then(on,gn)}function We(Pe){return function(){var ee=this,Tt=arguments;return new Promise(function(on,gn){var Qn=Pe.apply(ee,Tt);function ht(ge){C(Qn,on,gn,ht,oe,"next",ge)}function oe(ge){C(Qn,on,gn,ht,oe,"throw",ge)}ht(void 0)})}}it.d(or,{A:()=>We})},635:(os,or,it)=>{function ee(Y,Z){var te={};for(var se in Y)Object.prototype.hasOwnProperty.call(Y,se)&&Z.indexOf(se)<0&&(te[se]=Y[se]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var Ie=0;for(se=Object.getOwnPropertySymbols(Y);Ie<se.length;Ie++)Z.indexOf(se[Ie])<0&&Object.prototype.propertyIsEnumerable.call(Y,se[Ie])&&(te[se[Ie]]=Y[se[Ie]])}return te}function Ne(Y,Z,te,se){return new(te||(te=Promise))(function(ne,fe){function ft(pt){try{Be(se.next(pt))}catch(Jt){fe(Jt)}}function Oe(pt){try{Be(se.throw(pt))}catch(Jt){fe(Jt)}}function Be(pt){pt.done?ne(pt.value):function Ie(ne){return ne instanceof te?ne:new te(function(fe){fe(ne)})}(pt.value).then(ft,Oe)}Be((se=se.apply(Y,Z||[])).next())})}function Qt(Y){return this instanceof Qt?(this.v=Y,this):new Qt(Y)}function bt(Y,Z,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,se=te.apply(Y,Z||[]),ne=[];return Ie={},fe("next"),fe("throw"),fe("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie;function fe(Rt){se[Rt]&&(Ie[Rt]=function(ar){return new Promise(function(Pr,Xn){ne.push([Rt,ar,Pr,Xn])>1||ft(Rt,ar)})})}function ft(Rt,ar){try{!function Oe(Rt){Rt.value instanceof Qt?Promise.resolve(Rt.value.v).then(Be,pt):Jt(ne[0][2],Rt)}(se[Rt](ar))}catch(Pr){Jt(ne[0][3],Pr)}}function Be(Rt){ft("next",Rt)}function pt(Rt){ft("throw",Rt)}function Jt(Rt,ar){Rt(ar),ne.shift(),ne.length&&ft(ne[0][0],ne[0][1])}}function mr(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,Z=Y[Symbol.asyncIterator];return Z?Z.call(Y):(Y=function Ct(Y){var Z="function"==typeof Symbol&&Symbol.iterator,te=Z&&Y[Z],se=0;if(te)return te.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&se>=Y.length&&(Y=void 0),{value:Y&&Y[se++],done:!Y}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),te={},se("next"),se("throw"),se("return"),te[Symbol.asyncIterator]=function(){return this},te);function se(ne){te[ne]=Y[ne]&&function(fe){return new Promise(function(ft,Oe){!function Ie(ne,fe,ft,Oe){Promise.resolve(Oe).then(function(Be){ne({value:Be,done:ft})},fe)}(ft,Oe,(fe=Y[ne](fe)).done,fe.value)})}}}it.d(or,{AQ:()=>bt,N3:()=>Qt,Tt:()=>ee,sH:()=>Ne,xN:()=>mr}),"function"==typeof SuppressedError&&SuppressedError}},os=>{os(os.s=596)}]);
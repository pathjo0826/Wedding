"use strict";(self.webpackChunkwedding_app=self.webpackChunkwedding_app||[]).push([[792],{401:(ls,ar,Ze)=>{Ze.d(ar,{Am:()=>Ks,Bd:()=>X,FA:()=>he,Fy:()=>Bn,I9:()=>Qs,Im:()=>Kr,Ku:()=>se,Ll:()=>De,T9:()=>ur,Uj:()=>it,XA:()=>Nt,ZQ:()=>$e,bD:()=>No,c1:()=>ft,cY:()=>Ft,eX:()=>Z,g:()=>Y,gR:()=>jn,hp:()=>Gi,jZ:()=>me,lT:()=>In,lV:()=>Jt,mS:()=>wt,nr:()=>qs,p7:()=>ot,sr:()=>En,tD:()=>Nr,u:()=>ie,zW:()=>z,zw:()=>Ve});const ee=function(A){const b=[];let M=0;for(let k=0;k<A.length;k++){let U=A.charCodeAt(k);U<128?b[M++]=U:U<2048?(b[M++]=U>>6|192,b[M++]=63&U|128):55296==(64512&U)&&k+1<A.length&&56320==(64512&A.charCodeAt(k+1))?(U=65536+((1023&U)<<10)+(1023&A.charCodeAt(++k)),b[M++]=U>>18|240,b[M++]=U>>12&63|128,b[M++]=U>>6&63|128,b[M++]=63&U|128):(b[M++]=U>>12|224,b[M++]=U>>6&63|128,b[M++]=63&U|128)}return b},on={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(A,b){if(!Array.isArray(A))throw Error("encodeByteArray takes an array as a parameter");this.init_();const M=b?this.byteToCharMapWebSafe_:this.byteToCharMap_,k=[];for(let U=0;U<A.length;U+=3){const Ce=A[U],Se=U+1<A.length,zt=Se?A[U+1]:0,Hn=U+2<A.length,ze=Hn?A[U+2]:0;let Jr=(15&zt)<<2|ze>>6,Fo=63&ze;Hn||(Fo=64,Se||(Jr=64)),k.push(M[Ce>>2],M[(3&Ce)<<4|zt>>4],M[Jr],M[Fo])}return k.join("")},encodeString(A,b){return this.HAS_NATIVE_SUPPORT&&!b?btoa(A):this.encodeByteArray(ee(A),b)},decodeString(A,b){return this.HAS_NATIVE_SUPPORT&&!b?atob(A):function(A){const b=[];let M=0,k=0;for(;M<A.length;){const U=A[M++];if(U<128)b[k++]=String.fromCharCode(U);else if(U>191&&U<224){const Ce=A[M++];b[k++]=String.fromCharCode((31&U)<<6|63&Ce)}else if(U>239&&U<365){const Hn=((7&U)<<18|(63&A[M++])<<12|(63&A[M++])<<6|63&A[M++])-65536;b[k++]=String.fromCharCode(55296+(Hn>>10)),b[k++]=String.fromCharCode(56320+(1023&Hn))}else{const Ce=A[M++],Se=A[M++];b[k++]=String.fromCharCode((15&U)<<12|(63&Ce)<<6|63&Se)}}return b.join("")}(this.decodeStringToByteArray(A,b))},decodeStringToByteArray(A,b){this.init_();const M=b?this.charToByteMapWebSafe_:this.charToByteMap_,k=[];for(let U=0;U<A.length;){const Ce=M[A.charAt(U++)],zt=U<A.length?M[A.charAt(U)]:0;++U;const ze=U<A.length?M[A.charAt(U)]:64;++U;const Qe=U<A.length?M[A.charAt(U)]:64;if(++U,null==Ce||null==zt||null==ze||null==Qe)throw new Zt;k.push(Ce<<2|zt>>4),64!==ze&&(k.push(zt<<4&240|ze>>2),64!==Qe&&k.push(ze<<6&192|Qe))}return k},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let A=0;A<this.ENCODED_VALS.length;A++)this.byteToCharMap_[A]=this.ENCODED_VALS.charAt(A),this.charToByteMap_[this.byteToCharMap_[A]]=A,this.byteToCharMapWebSafe_[A]=this.ENCODED_VALS_WEBSAFE.charAt(A),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[A]]=A,A>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(A)]=A,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(A)]=A)}}};class Zt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const it=function(A){return function(A){const b=ee(A);return on.encodeByteArray(b,!0)}(A).replace(/\./g,"")},ie=function(A){try{return on.decodeString(A,!0)}catch(b){console.error("base64Decode failed: ",b)}return null};function Ve(A,b){if(!(b instanceof Object))return b;switch(b.constructor){case Date:return new Date(b.getTime());case Object:void 0===A&&(A={});break;case Array:A=[];break;default:return b}for(const M in b)!b.hasOwnProperty(M)||!ht(M)||(A[M]=Ve(A[M],b[M]));return A}function ht(A){return"__proto__"!==A}function wt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Ke=()=>{try{return wt().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const A=process.env.__FIREBASE_DEFAULTS__;return A?JSON.parse(A):void 0})()||(()=>{if(typeof document>"u")return;let A;try{A=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const b=A&&ie(A[1]);return b&&JSON.parse(b)})()}catch(A){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${A}`)}},ur=()=>{var A;return null===(A=Ke())||void 0===A?void 0:A.config},Nt=A=>{var b;return null===(b=Ke())||void 0===b?void 0:b[`_${A}`]};class Ft{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((b,M)=>{this.resolve=b,this.reject=M})}wrapCallback(b){return(M,k)=>{M?this.reject(M):this.resolve(k),"function"==typeof b&&(this.promise.catch(()=>{}),1===b.length?b(M):b(M,k))}}}function Bn(A,b){if(A.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const k=b||"demo-project",U=A.iat||0,Ce=A.sub||A.user_id;if(!Ce)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Se=Object.assign({iss:`https://securetoken.google.com/${k}`,aud:k,iat:U,exp:U+3600,auth_time:U,sub:Ce,user_id:Ce,firebase:{sign_in_provider:"custom",identities:{}}},A);return[it(JSON.stringify({alg:"none",type:"JWT"})),it(JSON.stringify(Se)),""].join(".")}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function me(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function De(){var A;const b=null===(A=Ke())||void 0===A?void 0:A.forceEnvironment;if("node"===b)return!0;if("browser"===b)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function X(){return typeof window<"u"||ot()}function ot(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ft(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function En(){const A="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof A&&void 0!==A.id}function Jt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function In(){const A=$e();return A.indexOf("MSIE ")>=0||A.indexOf("Trident/")>=0}function qs(){return!De()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function z(){try{return"object"==typeof indexedDB}catch{return!1}}function Z(){return new Promise((A,b)=>{try{let M=!0;const k="validate-browser-context-for-indexeddb-analytics-module",U=self.indexedDB.open(k);U.onsuccess=()=>{U.result.close(),M||self.indexedDB.deleteDatabase(k),A(!0)},U.onupgradeneeded=()=>{M=!1},U.onerror=()=>{var Ce;b((null===(Ce=U.error)||void 0===Ce?void 0:Ce.message)||"")}}catch(M){b(M)}})}class Y extends Error{constructor(b,M,k){super(M),this.code=b,this.customData=k,this.name="FirebaseError",Object.setPrototypeOf(this,Y.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,he.prototype.create)}}class he{constructor(b,M,k){this.service=b,this.serviceName=M,this.errors=k}create(b,...M){const k=M[0]||{},U=`${this.service}/${b}`,Ce=this.errors[b],Se=Ce?function le(A,b){return A.replace(st,(M,k)=>{const U=b[k];return null!=U?String(U):`<${k}?>`})}(Ce,k):"Error";return new Y(U,`${this.serviceName}: ${Se} (${U}).`,k)}}const st=/\{\$([^}]+)}/g;function jn(A,b){return Object.prototype.hasOwnProperty.call(A,b)}function Kr(A){for(const b in A)if(Object.prototype.hasOwnProperty.call(A,b))return!1;return!0}function No(A,b){if(A===b)return!0;const M=Object.keys(A),k=Object.keys(b);for(const U of M){if(!k.includes(U))return!1;const Ce=A[U],Se=b[U];if(Ws(Ce)&&Ws(Se)){if(!No(Ce,Se))return!1}else if(Ce!==Se)return!1}for(const U of k)if(!M.includes(U))return!1;return!0}function Ws(A){return null!==A&&"object"==typeof A}function Ks(A){const b=[];for(const[M,k]of Object.entries(A))Array.isArray(k)?k.forEach(U=>{b.push(encodeURIComponent(M)+"="+encodeURIComponent(U))}):b.push(encodeURIComponent(M)+"="+encodeURIComponent(k));return b.length?"&"+b.join("&"):""}function Qs(A){const b={};return A.replace(/^\?/,"").split("&").forEach(k=>{if(k){const[U,Ce]=k.split("=");b[decodeURIComponent(U)]=decodeURIComponent(Ce)}}),b}function Gi(A){const b=A.indexOf("?");if(!b)return"";const M=A.indexOf("#",b);return A.substring(b,M>0?M:void 0)}function Nr(A,b){const M=new bs(A,b);return M.subscribe.bind(M)}class bs{constructor(b,M){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=M,this.task.then(()=>{b(this)}).catch(k=>{this.error(k)})}next(b){this.forEachObserver(M=>{M.next(b)})}error(b){this.forEachObserver(M=>{M.error(b)}),this.close(b)}complete(){this.forEachObserver(b=>{b.complete()}),this.close()}subscribe(b,M,k){let U;if(void 0===b&&void 0===M&&void 0===k)throw new Error("Missing Observer.");U=function Qr(A,b){if("object"!=typeof A||null===A)return!1;for(const M of b)if(M in A&&"function"==typeof A[M])return!0;return!1}(b,["next","error","complete"])?b:{next:b,error:M,complete:k},void 0===U.next&&(U.next=$n),void 0===U.error&&(U.error=$n),void 0===U.complete&&(U.complete=$n);const Ce=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?U.error(this.finalError):U.complete()}catch{}}),this.observers.push(U),Ce}unsubscribeOne(b){void 0===this.observers||void 0===this.observers[b]||(delete this.observers[b],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(b){if(!this.finalized)for(let M=0;M<this.observers.length;M++)this.sendOne(M,b)}sendOne(b,M){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[b])try{M(this.observers[b])}catch(k){typeof console<"u"&&console.error&&console.error(k)}})}close(b){this.finalized||(this.finalized=!0,void 0!==b&&(this.finalError=b),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $n(){}function se(A){return A&&A._delegate?A._delegate:A}},813:(ls,ar,Ze)=>{function D(n){return"function"==typeof n}function He(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Ne=He(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ee(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Ct{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(D(r))try{r()}catch(s){e=s instanceof Ne?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{en(s)}catch(o){e=e??[],o instanceof Ne?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ne(e)}}add(e){var t;if(e&&e!==this)if(this.closed)en(e);else{if(e instanceof Ct){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ee(t,e)}remove(e){const{_finalizers:t}=this;t&&ee(t,e),e instanceof Ct&&e._removeParent(this)}}Ct.EMPTY=(()=>{const n=new Ct;return n.closed=!0,n})();const on=Ct.EMPTY;function Zt(n){return n instanceof Ct||n&&"closed"in n&&D(n.remove)&&D(n.add)&&D(n.unsubscribe)}function en(n){D(n)?n():n.unsubscribe()}const it={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ie={setTimeout(n,e,...t){const{delegate:r}=ie;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ie;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function pe(n){ie.setTimeout(()=>{const{onUnhandledError:e}=it;if(!e)throw n;e(n)})}function Ve(){}const ht=Tt("C",void 0,void 0);function Tt(n,e,t){return{kind:n,value:e,error:t}}let We=null;function Ke(n){if(it.useDeprecatedSynchronousErrorHandling){const e=!We;if(e&&(We={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=We;if(We=null,t)throw r}}else n()}class Xn extends Ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Zt(e)&&e.add(this)):this.destination=X}static create(e,t,r){return new Bn(e,t,r)}next(e){this.isStopped?De(function Jn(n){return Tt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?De(function wt(n){return Tt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?De(ht,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ur=Function.prototype.bind;function Nt(n,e){return ur.call(n,e)}class Ft{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){$e(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){$e(r)}else $e(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){$e(t)}}}class Bn extends Xn{constructor(e,t,r){let i;if(super(),D(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&it.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Nt(e.next,s),error:e.error&&Nt(e.error,s),complete:e.complete&&Nt(e.complete,s)}):i=e}this.destination=new Ft(i)}}function $e(n){it.useDeprecatedSynchronousErrorHandling?function kn(n){it.useDeprecatedSynchronousErrorHandling&&We&&(We.errorThrown=!0,We.error=n)}(n):pe(n)}function De(n,e){const{onStoppedNotification:t}=it;t&&ie.setTimeout(()=>t(n,e))}const X={closed:!0,next:Ve,error:function me(n){throw n},complete:Ve},ot="function"==typeof Symbol&&Symbol.observable||"@@observable";function ft(n){return n}function Jt(n){return 0===n.length?ft:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let yt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Wr(n){return n&&n instanceof Xn||function gi(n){return n&&D(n.next)&&D(n.error)&&D(n.complete)}(n)&&Zt(n)}(t)?t:new Bn(t,r,i);return Ke(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=In(r))((i,s)=>{const o=new Bn({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[ot](){return this}pipe(...t){return Jt(t)(this)}toPromise(t){return new(t=In(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function In(n){var e;return null!==(e=n??it.Promise)&&void 0!==e?e:Promise}const qs=He(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let z=(()=>{class n extends yt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Z(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new qs}next(t){Ke(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Ke(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ke(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?on:(this.currentObservers=null,s.push(t),new Ct(()=>{this.currentObservers=null,ee(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new yt;return t.source=this,t}}return n.create=(e,t)=>new Z(e,t),n})();class Z extends z{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:on}}function te(n){return D(n?.lift)}function B(n){return e=>{if(te(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Y(n,e,t,r,i){return new he(n,e,t,r,i)}class he extends Xn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function le(n,e){return B((t,r)=>{let i=0;t.subscribe(Y(r,s=>{r.next(n.call(e,s,i++))}))})}var st=Ze(635);const xt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ge(n){return D(n?.then)}function St(n){return D(n[ot])}function Sn(n){return Symbol.asyncIterator&&D(n?.[Symbol.asyncIterator])}function zi(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ot=function Rt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function jn(n){return D(n?.[Ot])}function Cr(n){return(0,st.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,st.N3)(t.read());if(i)return yield(0,st.N3)(void 0);yield yield(0,st.N3)(r)}}finally{t.releaseLock()}})}function Kr(n){return D(n?.getReader)}function Zn(n){if(n instanceof yt)return n;if(null!=n){if(St(n))return function No(n){return new yt(e=>{const t=n[ot]();if(D(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(xt(n))return function Ws(n){return new yt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Ge(n))return function kl(n){return new yt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,pe)})}(n);if(Sn(n))return Qs(n);if(jn(n))return function Ks(n){return new yt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Kr(n))return function Gi(n){return Qs(Cr(n))}(n)}throw zi(n)}function Qs(n){return new yt(e=>{(function Ju(n,e){var t,r,i,s;return(0,st.sH)(this,void 0,void 0,function*(){try{for(t=(0,st.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Nr(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function er(n,e,t=1/0){return D(e)?er((r,i)=>le((s,o)=>e(r,s,i,o))(Zn(n(r,i))),t):("number"==typeof e&&(t=e),B((r,i)=>function bs(n,e,t,r,i,s,o,a){const u=[];let l=0,f=0,m=!1;const _=()=>{m&&!u.length&&!l&&e.complete()},I=S=>l<r?C(S):u.push(S),C=S=>{s&&e.next(S),l++;let R=!1;Zn(t(S,f++)).subscribe(Y(e,H=>{i?.(H),s?I(H):e.next(H)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){const H=u.shift();o?Nr(e,o,()=>C(H)):C(H)}_()}catch(H){e.error(H)}}))};return n.subscribe(Y(e,I,()=>{m=!0,_()})),()=>{a?.()}}(r,i,n,t)))}function Qr(n=1/0){return er(ft,n)}const $n=new yt(n=>n.complete());function Or(n){return n[n.length-1]}function Ds(n){return D(Or(n))?n.pop():void 0}function Ss(n){return function Oo(n){return n&&D(n.schedule)}(Or(n))?n.pop():void 0}function Mi(n,e=0){return B((t,r)=>{t.subscribe(Y(r,i=>Nr(r,n,()=>r.next(i),e),()=>Nr(r,n,()=>r.complete(),e),i=>Nr(r,n,()=>r.error(i),e)))})}function Yr(n,e=0){return B((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Ma(n,e){if(!n)throw new Error("Iterable cannot be null");return new yt(t=>{Nr(t,e,()=>{const r=n[Symbol.asyncIterator]();Nr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function A(n,e){return e?function se(n,e){if(null!=n){if(St(n))return function Ys(n,e){return Zn(n).pipe(Yr(e),Mi(e))}(n,e);if(xt(n))return function ko(n,e){return new yt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Ge(n))return function Xu(n,e){return Zn(n).pipe(Yr(e),Mi(e))}(n,e);if(Sn(n))return Ma(n,e);if(jn(n))return function Zu(n,e){return new yt(t=>{let r;return Nr(t,e,()=>{r=n[Ot](),Nr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>D(r?.return)&&r.return()})}(n,e);if(Kr(n))return function Pe(n,e){return Ma(Cr(n),e)}(n,e)}throw zi(n)}(n,e):Zn(n)}function b(...n){const e=Ss(n),t=function Fl(n,e){return"number"==typeof Or(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Zn(r[0]):Qr(t)(A(r,e)):$n}class M extends z{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function k(...n){return A(n,Ss(n))}function U(n={}){const{connector:e=(()=>new z),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,l=0,f=!1,m=!1;const _=()=>{a?.unsubscribe(),a=void 0},I=()=>{_(),o=u=void 0,f=m=!1},C=()=>{const S=o;I(),S?.unsubscribe()};return B((S,R)=>{l++,!m&&!f&&_();const H=u=u??e();R.add(()=>{l--,0===l&&!m&&!f&&(a=Ce(C,i))}),H.subscribe(R),!o&&l>0&&(o=new Bn({next:F=>H.next(F),error:F=>{m=!0,_(),a=Ce(I,t,F),H.error(F)},complete:()=>{f=!0,_(),a=Ce(I,r),H.complete()}}),Zn(S).subscribe(o))})(s)}}function Ce(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Bn({next:()=>{r.unsubscribe(),n()}});return Zn(e(...t)).subscribe(r)}function Se(n,e){return B((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Y(r,u=>{i?.unsubscribe();let l=0;const f=s++;Zn(n(u,f)).subscribe(i=Y(r,m=>r.next(e?e(u,m,f,l++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function zt(n,e=ft){return n=n??Hn,B((t,r)=>{let i,s=!0;t.subscribe(Y(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Hn(n,e){return n===e}function ze(n){for(let e in n)if(n[e]===ze)return e;throw Error("Could not find renamed property on target object.")}function cr(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Qe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Qe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Jr(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Fo=ze({__forward_ref__:ze});function Ut(n){return n.__forward_ref__=Ut,n.toString=function(){return Qe(this())},n}function Xe(n){return Vo(n)?n():n}function Vo(n){return"function"==typeof n&&n.hasOwnProperty(Fo)&&n.__forward_ref__===Ut}function Vl(n){return n&&!!n.\u0275providers}const Na="https://g.co/ng/security#xss";class de extends Error{constructor(e,t){super(function Ll(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function et(n){return"string"==typeof n?n:null==n?"":String(n)}function ec(n,e){throw new de(-201,!1)}function Ni(n,e){null==n&&function Ye(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Ue(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tr(n){return{providers:n.providers||[],imports:n.imports||[]}}function jl(n){return Hf(n,tc)||Hf(n,Lo)}function Hf(n,e){return n.hasOwnProperty(e)?n[e]:null}function $l(n){return n&&(n.hasOwnProperty(zf)||n.hasOwnProperty(X_))?n[zf]:null}const tc=ze({\u0275prov:ze}),zf=ze({\u0275inj:ze}),Lo=ze({ngInjectableDef:ze}),X_=ze({ngInjectorDef:ze});var dt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(dt||{});let Gf;function Xr(n){const e=Gf;return Gf=n,e}function zl(n,e,t){const r=jl(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&dt.Optional?null:void 0!==e?e:void ec(Qe(n))}const Gt=globalThis;class ve{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ue({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const rc={},ic="__NG_DI_FLAG__",Xs="ngTempTokenPath",Yf=/\n/gm,qi="__source";let Oa;function Zs(n){const e=Oa;return Oa=n,e}function Xf(n,e=dt.Default){if(void 0===Oa)throw new de(-203,!1);return null===Oa?zl(n,void 0,e):Oa.get(n,e&dt.Optional?null:void 0,e)}function ye(n,e=dt.Default){return(function Hl(){return Gf}()||Xf)(Xe(n),e)}function Me(n,e=dt.Default){return ye(n,Wl(e))}function Wl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function sc(n){const e=[];for(let t=0;t<n.length;t++){const r=Xe(n[t]);if(Array.isArray(r)){if(0===r.length)throw new de(900,!1);let i,s=dt.Default;for(let o=0;o<r.length;o++){const a=r[o],u=PC(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(ye(i,s))}else e.push(ye(r))}return e}function Wi(n,e){return n[ic]=e,n.prototype[ic]=e,n}function PC(n){return n[ic]}function eo(n){return{toString:n}.toString()}var ka=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ka||{}),tr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(tr||{});const kr={},pt=[],ac=ze({\u0275cmp:ze}),Kl=ze({\u0275dir:ze}),Ql=ze({\u0275pipe:ze}),ry=ze({\u0275mod:ze}),Zr=ze({\u0275fac:ze}),uc=ze({__NG_ELEMENT_ID__:ze}),cc=ze({__NG_ENV_ID__:ze});function Zf(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Yl(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];_i(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Jl(n){return 3===n||4===n||6===n}function _i(n){return 64===n.charCodeAt(0)}function Fa(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||iy(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function iy(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Xl="ng-template";function Zl(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==Zf(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function ep(n){return 4===n.type&&n.value!==Xl}function sy(n,e,t){return e===(4!==n.type||t?n.value:Xl)}function MC(n,e,t){let r=4;const i=n.attrs||[],s=function np(n){for(let e=0;e<n.length;e++)if(Jl(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!sy(n,u,t)||""===u&&1===e.length){if(yi(r))return!1;o=!0}}else{const l=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!Zl(n.attrs,l,t)){if(yi(r))return!1;o=!0}continue}const m=tp(8&r?"class":u,i,ep(n),t);if(-1===m){if(yi(r))return!1;o=!0;continue}if(""!==l){let _;_=m>s?"":i[m+1].toLowerCase();const I=8&r?_:null;if(I&&-1!==Zf(I,l,0)||2&r&&l!==_){if(yi(r))return!1;o=!0}}}}else{if(!o&&!yi(r)&&!yi(u))return!1;if(o&&yi(u))continue;o=!1,r=u|1&r}}return yi(r)||o}function yi(n){return 0==(1&n)}function tp(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function oy(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function ed(n,e,t=!1){for(let r=0;r<e.length;r++)if(MC(n,e[r],t))return!0;return!1}function ip(n,e){return n?":not("+e.trim()+")":e}function sp(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!yi(o)&&(e+=ip(s,i),i=""),r=o,s=s||!yi(r);t++}return""!==i&&(e+=ip(s,i)),e}function ei(n){return eo(()=>{const e=cy(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ka.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||tr.Emulated,styles:n.styles||pt,_:null,schemas:n.schemas||null,tView:null,id:""};rd(t);const r=n.dependencies;return t.directiveDefs=id(r,!1),t.pipeDefs=id(r,!0),t.id=function NC(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function ay(n){return vt(n)||nr(n)}function up(n){return null!==n}function vi(n){return eo(()=>({type:n.type,bootstrap:n.bootstrap||pt,declarations:n.declarations||pt,imports:n.imports||pt,exports:n.exports||pt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function uy(n,e){if(null==n)return kr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Je(n){return eo(()=>{const e=cy(n);return rd(e),e})}function vt(n){return n[ac]||null}function nr(n){return n[Kl]||null}function dr(n){return n[Ql]||null}function Fr(n,e){const t=n[ry]||null;if(!t&&!0===e)throw new Error(`Type ${Qe(n)} does not have '\u0275mod' property.`);return t}function cy(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||kr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||pt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uy(n.inputs,e),outputs:uy(n.outputs)}}function rd(n){n.features?.forEach(e=>e(n))}function id(n,e){if(!n)return null;const t=e?dr:ay;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(up)}const un=0,xe=1,tt=2,cn=3,Ei=4,lc=5,hr=6,Va=7,Fn=8,hs=9,La=10,nt=11,Uo=12,ly=13,no=14,Vn=15,Bo=16,Ua=17,Oi=18,dc=19,sd=20,ro=21,Ki=22,hc=23,jo=24,gt=25,od=1,ad=2,fs=7,$o=9,mr=11;function ti(n){return Array.isArray(n)&&"object"==typeof n[od]}function Vr(n){return Array.isArray(n)&&!0===n[od]}function dy(n){return 0!=(4&n.flags)}function Ba(n){return n.componentOffset>-1}function dp(n){return 1==(1&n.flags)}function Ii(n){return!!n.template}function hp(n){return 0!=(512&n[tt])}function Ho(n,e){return n.hasOwnProperty(Zr)?n[Zr]:null}let ln=null,cd=!1;function ki(n){const e=ln;return ln=n,e}const $a={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Ln(n){if(!Ha(n)||n.dirty){if(!n.producerMustRecompute(n)&&!vy(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function yy(n){n.dirty=!0,function _y(n){if(void 0===n.liveConsumerNode)return;const e=cd;cd=!0;try{for(const t of n.liveConsumerNode)t.dirty||yy(t)}finally{cd=e}}(n),n.consumerMarkedDirty?.(n)}function gc(n){return n&&(n.nextProducerIndex=0),ki(n)}function gp(n,e){if(ki(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Ha(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Go(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function vy(n){ps(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Ln(t),r!==t.version))return!0}return!1}function mp(n){if(ps(n),Ha(n))for(let e=0;e<n.producerNode.length;e++)Go(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Go(n,e){if(function mc(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),ps(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Go(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ps(i),i.producerIndexOfThis[r]=e}}function Ha(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ps(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let yp=null;const dd=()=>{},HC=(()=>({...$a,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:dd}))();class zC{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Fi(){return Ep}function Ep(n){return n.type.prototype.ngOnChanges&&(n.setInput=qC),GC}function GC(){const n=hd(this),e=n?.current;if(e){const t=n.previous;if(t===kr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function qC(n,e,t,r){const i=this.declaredInputs[t],s=hd(n)||function WC(n,e){return n[Dy]=e}(n,{previous:kr,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new zC(u&&u.currentValue,e,a===kr),n[r]=e}Fi.ngInherit=!0;const Dy="__ngSimpleChanges__";function hd(n){return n[Dy]||null}const Vi=function(n,e,t){};function Bt(n){for(;Array.isArray(n);)n=n[un];return n}function pd(n,e){return Bt(e[n])}function Ar(n,e){return Bt(e[n.index])}function io(n,e){return n.data[e]}function wi(n,e){const t=e[n];return ti(t)?t:t[un]}function xs(n,e){return null==e?null:n[e]}function Ry(n){n[Ua]=0}function JC(n){1024&n[tt]||(n[tt]|=1024,Py(n,1))}function gd(n){1024&n[tt]&&(n[tt]&=-1025,Py(n,-1))}function Py(n,e){let t=n[cn];if(null===t)return;t[lc]+=e;let r=t;for(t=t[cn];null!==t&&(1===e&&1===r[lc]||-1===e&&0===r[lc]);)t[lc]+=e,r=t,t=t[cn]}const qe={lFrame:Ac(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function yd(){return qe.bindingsEnabled}function ae(){return qe.lFrame.lView}function At(){return qe.lFrame.tView}function _r(n){return qe.lFrame.contextLView=n,n[Fn]}function Lr(n){return qe.lFrame.contextLView=null,n}function yr(){let n=vd();for(;null!==n&&64===n.type;)n=n.parent;return n}function vd(){return qe.lFrame.currentTNode}function gs(n,e){const t=qe.lFrame;t.currentTNode=n,t.isParent=e}function Cc(){return qe.lFrame.isParent}function qo(){return qe.lFrame.bindingIndex++}function ms(n){const e=qe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Fy(n,e){const t=qe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Sp(e)}function Sp(n){qe.lFrame.currentDirectiveIndex=n}function Tc(n){qe.lFrame.currentQueryIndex=n}function nT(n){const e=n[xe];return 2===e.type?e.declTNode:1===e.type?n[hr]:null}function Ly(n,e,t){if(t&dt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&dt.Host||(i=nT(s),null===i||(s=s[no],10&i.type))););if(null===i)return!1;e=i,n=s}const r=qe.lFrame=Uy();return r.currentTNode=e,r.lView=n,!0}function Id(n){const e=Uy(),t=n[xe];qe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Uy(){const n=qe.lFrame,e=null===n?null:n.child;return null===e?Ac(n):e}function Ac(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function By(){const n=qe.lFrame;return qe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const jy=By;function Pp(){const n=By();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ur(){return qe.lFrame.selectedIndex}function Wo(n){qe.lFrame.selectedIndex=n}function wn(){const n=qe.lFrame;return io(n.tView,n.selectedIndex)}let Hy=!0;function bc(){return Hy}function ao(n){Hy=n}function wd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=f&&(n.destroyHooks??=[]).push(t,f)}}function Cd(n,e,t){Ad(n,e,3,t)}function Td(n,e,t,r){(3&n[tt])===t&&Ad(n,e,t,r)}function Dc(n,e){let t=n[tt];(3&t)===e&&(t&=8191,t+=1,n[tt]=t)}function Ad(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[Ua]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[Ua]+=65536),(a<s||-1==s)&&(Mp(n,t,e,u),n[Ua]=(4294901760&n[Ua])+u+2),u++}function zy(n,e){Vi(4,n,e);const t=ki(null);try{e.call(n)}finally{ki(t),Vi(5,n,e)}}function Mp(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[tt]>>13<n[Ua]>>16&&(3&n[tt])===e&&(n[tt]+=8192,zy(a,s)):zy(a,s)}const za=-1;class Ga{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function bd(n){return n!==za}function Sc(n){return 32767&n}function Rc(n,e){let t=function lT(n){return n>>16}(n),r=e;for(;t>0;)r=r[no],t--;return r}let Fp=!0;function Dd(n){const e=Fp;return Fp=n,e}const Ky=255,hT=5;let fT=0;const Dr={};function Sd(n,e){const t=Qy(n,e);if(-1!==t)return t;const r=e[xe];r.firstCreatePass&&(n.injectorIndex=e.length,Pc(r.data,n),Pc(e,null),Pc(r.blueprint,null));const i=qa(n,e),s=n.injectorIndex;if(bd(i)){const o=Sc(i),a=Rc(i,e),u=a[xe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Pc(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Qy(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function qa(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=xc(i),null===r)return za;if(t++,i=i[no],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return za}function Vp(n,e,t){!function pT(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(uc)&&(r=t[uc]),null==r&&(r=t[uc]=fT++);const i=r&Ky;e.data[n+(i>>hT)]|=1<<i}(n,e,t)}function Rd(n,e,t){if(t&dt.Optional||void 0!==n)return n;ec()}function Yy(n,e,t,r){if(t&dt.Optional&&void 0===r&&(r=null),!(t&(dt.Self|dt.Host))){const i=n[hs],s=Xr(void 0);try{return i?i.get(e,r,t&dt.Optional):zl(e,r,t&dt.Optional)}finally{Xr(s)}}return Rd(r,0,t)}function Jy(n,e,t,r=dt.Default,i){if(null!==n){if(2048&e[tt]&&!(r&dt.Self)){const o=function vT(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[tt]&&!(512&o[tt]);){const a=Pd(s,o,t,r|dt.Self,Dr);if(a!==Dr)return a;let u=s.parent;if(!u){const l=o[sd];if(l){const f=l.get(t,Dr,r);if(f!==Dr)return f}u=xc(o),o=o[no]}s=u}return i}(n,e,t,r,Dr);if(o!==Dr)return o}const s=Pd(n,e,t,r,Dr);if(s!==Dr)return s}return Yy(e,t,r,i)}function Pd(n,e,t,r,i){const s=function _T(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(uc)?n[uc]:void 0;return"number"==typeof e?e>=0?e&Ky:Up:e}(t);if("function"==typeof s){if(!Ly(e,n,r))return r&dt.Host?Rd(i,0,r):Yy(e,t,r,i);try{let o;if(o=s(r),null!=o||r&dt.Optional)return o;ec()}finally{jy()}}else if("number"==typeof s){let o=null,a=Qy(n,e),u=za,l=r&dt.Host?e[Vn][hr]:null;for((-1===a||r&dt.SkipSelf)&&(u=-1===a?qa(n,e):e[a+8],u!==za&&Lp(r,!1)?(o=e[xe],a=Sc(u),e=Rc(u,e)):a=-1);-1!==a;){const f=e[xe];if(Xy(s,a,f.data)){const m=mT(a,e,t,o,r,l);if(m!==Dr)return m}u=e[a+8],u!==za&&Lp(r,e[xe].data[a+8]===l)&&Xy(s,a,e)?(o=f,a=Sc(u),e=Rc(u,e)):a=-1}}return i}function mT(n,e,t,r,i,s){const o=e[xe],a=o.data[n+8],f=function xd(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,f=s>>20,_=i?a+f:n.directiveEnd;for(let I=r?a:a+f;I<_;I++){const C=o[I];if(I<u&&t===C||I>=u&&C.type===t)return I}if(i){const I=o[u];if(I&&Ii(I)&&I.type===t)return u}return null}(a,o,t,null==r?Ba(a)&&Fp:r!=o&&0!=(3&a.type),i&dt.Host&&s===a);return null!==f?Ko(e,o,f,a):Dr}function Ko(n,e,t,r){let i=n[t];const s=e.data;if(function Gy(n){return n instanceof Ga}(i)){const o=i;o.resolving&&function W_(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new de(-200,`Circular dependency in DI detected for ${n}${t}`)}(function kt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():et(n)}(s[t]));const a=Dd(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Xr(o.injectImpl):null;Ly(n,r,dt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function uT(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Ep(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&Xr(l),Dd(a),o.resolving=!1,jy()}}return i}function Xy(n,e,t){return!!(t[e+(n>>hT)]&1<<n)}function Lp(n,e){return!(n&dt.Self||n&dt.Host&&e)}class Br{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Jy(this._tNode,this._lView,e,Wl(r),t)}}function Up(){return new Br(yr(),ae())}function rr(n){return eo(()=>{const e=n.prototype.constructor,t=e[Zr]||Bp(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Zr]||Bp(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Bp(n){return Vo(n)?()=>{const e=Bp(Xe(n));return e&&e()}:Ho(n)}function xc(n){const e=n[xe],t=e.type;return 2===t?e.declTNode:1===t?n[hr]:null}const Ka="__parameters__";function Qa(n,e,t){return eo(()=>{const r=function jp(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,l,f){const m=u.hasOwnProperty(Ka)?u[Ka]:Object.defineProperty(u,Ka,{value:[]})[Ka];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function _s(n,e){n.forEach(t=>Array.isArray(t)?_s(t,e):e(t))}function zp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Nd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Gn(n,e,t){let r=Ya(n,e);return r>=0?n[1|r]=t:(r=~r,function ev(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Od(n,e){const t=Ya(n,e);if(t>=0)return n[1|t]}function Ya(n,e){return function tv(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Oc=Wi(Qa("Optional"),8),kd=Wi(Qa("SkipSelf"),4);function cv(n){return 128==(128&n.flags)}var Ja=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ja||{});const DT=new Map;let C3=0;const RT="__ngContext__";function ri(n,e){ti(e)?(n[RT]=e[dc],function A3(n){DT.set(n[dc],n)}(e)):n[RT]=e}let PT;function xT(n,e){return PT(n,e)}function ng(n){const e=n[cn];return Vr(e)?e[cn]:e}function FM(n){return LM(n[Uo])}function VM(n){return LM(n[Ei])}function LM(n){for(;null!==n&&!Vr(n);)n=n[Ei];return n}function Ud(n,e,t,r,i){if(null!=r){let s,o=!1;Vr(r)?s=r:ti(r)&&(o=!0,r=r[un]);const a=Bt(r);0===n&&null!==t?null==i?$M(e,t,a):kc(e,t,a,i||null,!0):1===n&&null!==t?kc(e,t,a,i||null,!0):2===n?function mv(n,e,t){const r=pv(n,e);r&&function z3(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function W3(n,e,t,r,i){const s=t[fs];s!==Bt(t)&&Ud(e,n,r,s,i);for(let a=mr;a<t.length;a++){const u=t[a];ig(u[xe],u,n,e,r,s)}}(e,n,s,t,i)}}function hv(n,e,t){return n.createElement(e,t)}function BM(n,e){const t=n[$o],r=t.indexOf(e);gd(e),t.splice(r,1)}function fv(n,e){if(n.length<=mr)return;const t=mr+e,r=n[t];if(r){const i=r[Bo];null!==i&&i!==n&&BM(i,r),e>0&&(n[t-1][Ei]=r[Ei]);const s=Nd(n,mr+e);!function F3(n,e){ig(n,e,e[nt],2,null,null),e[un]=null,e[hr]=null}(r[xe],r);const o=s[Oi];null!==o&&o.detachView(s[xe]),r[cn]=null,r[Ei]=null,r[tt]&=-129}return r}function NT(n,e){if(!(256&e[tt])){const t=e[nt];e[hc]&&mp(e[hc]),e[jo]&&mp(e[jo]),t.destroyNode&&ig(n,e,t,3,null,null),function U3(n){let e=n[Uo];if(!e)return OT(n[xe],n);for(;e;){let t=null;if(ti(e))t=e[Uo];else{const r=e[mr];r&&(t=r)}if(!t){for(;e&&!e[Ei]&&e!==n;)ti(e)&&OT(e[xe],e),e=e[cn];null===e&&(e=n),ti(e)&&OT(e[xe],e),t=e&&e[Ei]}e=t}}(e)}}function OT(n,e){if(!(256&e[tt])){e[tt]&=-129,e[tt]|=256,function H3(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Ga)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Vi(4,a,u);try{u.call(a)}finally{Vi(5,a,u)}}else{Vi(4,i,s);try{s.call(i)}finally{Vi(5,i,s)}}}}}(n,e),function $3(n,e){const t=n.cleanup,r=e[Va];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[Va]=null);const i=e[ro];if(null!==i){e[ro]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[xe].type&&e[nt].destroy();const t=e[Bo];if(null!==t&&Vr(e[cn])){t!==e[cn]&&BM(t,e);const r=e[Oi];null!==r&&r.detachView(n)}!function b3(n){DT.delete(n[dc])}(e)}}function kT(n,e,t){return function jM(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[un];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===tr.None||s===tr.Emulated)return null}return Ar(r,t)}}(n,e.parent,t)}function kc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function $M(n,e,t){n.appendChild(e,t)}function HM(n,e,t,r,i){null!==r?kc(n,e,t,r,i):$M(n,e,t)}function pv(n,e){return n.parentNode(e)}let FT,BT,yv,qM=function GM(n,e,t){return 40&n.type?Ar(n,t):null};function gv(n,e,t,r){const i=kT(n,r,e),s=e[nt],a=function zM(n,e,t){return qM(n,e,t)}(r.parent||e[hr],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)HM(s,i,t[u],a,!1);else HM(s,i,t,a,!1);void 0!==FT&&FT(s,r,e,t,i)}function rg(n,e){if(null!==e){const t=e.type;if(3&t)return Ar(e,n);if(4&t)return VT(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return rg(n,r);{const i=n[e.index];return Vr(i)?VT(-1,i):Bt(i)}}if(32&t)return xT(e,n)()||Bt(n[e.index]);{const r=KM(n,e);return null!==r?Array.isArray(r)?r[0]:rg(ng(n[Vn]),r):rg(n,e.next)}}return null}function KM(n,e){return null!==e?n[Vn][hr].projection[e.projection]:null}function VT(n,e){const t=mr+n+1;if(t<e.length){const r=e[t],i=r[xe].firstChild;if(null!==i)return rg(r,i)}return e[fs]}function LT(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&ri(Bt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)LT(n,e,t.child,r,i,s,!1),Ud(e,n,i,a,s);else if(32&u){const l=xT(t,r);let f;for(;f=l();)Ud(e,n,i,f,s);Ud(e,n,i,a,s)}else 16&u?YM(n,e,r,t,i,s):Ud(e,n,i,a,s);t=o?t.projectionNext:t.next}}function ig(n,e,t,r,i,s){LT(t,r,n.firstChild,e,i,s,!1)}function YM(n,e,t,r,i,s){const o=t[Vn],u=o[hr].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++)Ud(e,n,i,u[l],s);else{let l=u;const f=o[cn];cv(r)&&(l.flags|=128),LT(n,e,l,f,i,s,!0)}}function JM(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function XM(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Yl(n,e,r),null!==i&&JM(n,e,i),null!==s&&function Q3(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function tN(n){return function jT(){if(void 0===yv&&(yv=null,Gt.trustedTypes))try{yv=Gt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return yv}()?.createScriptURL(n)||n}class nN{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Na})`}}function Xa(n){return n instanceof nN?n.changingThisBreaksApplicationSecurity:n}function sg(n,e){const t=function sq(n){return n instanceof nN&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Na})`)}return t===e}const cq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var $d=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}($d||{});function Za(n){const e=ag();return e?e.sanitize($d.URL,n)||"":sg(n,"URL")?Xa(n):function $T(n){return(n=String(n)).match(cq)?n:"unsafe:"+n}(et(n))}function cN(n){const e=ag();if(e)return tN(e.sanitize($d.RESOURCE_URL,n)||"");if(sg(n,"ResourceURL"))return tN(Xa(n));throw new de(904,!1)}function ag(){const n=ae();return n&&n[La].sanitizer}const ug=new ve("ENVIRONMENT_INITIALIZER"),dN=new ve("INJECTOR",-1),hN=new ve("INJECTOR_DEF_TYPES");class qT{get(e,t=rc){if(t===rc){const r=new Error(`NullInjectorError: No provider for ${Qe(e)}!`);throw r.name="NullInjectorError",r}return t}}function wq(...n){return{\u0275providers:fN(0,n),\u0275fromNgModule:!0}}function fN(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return _s(e,o=>{const a=o;Ev(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&pN(i,s),t}function pN(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];KT(i,s=>{e(s,r)})}}function Ev(n,e,t,r){if(!(n=Xe(n)))return!1;let i=null,s=$l(n);const o=!s&&vt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=$l(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of u)Ev(l,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;r.add(i);try{_s(s.imports,f=>{Ev(f,e,t,r)&&(l||=[],l.push(f))})}finally{}void 0!==l&&pN(l,e)}if(!a){const l=Ho(i)||(()=>new i);e({provide:i,useFactory:l,deps:pt},i),e({provide:hN,useValue:i,multi:!0},i),e({provide:ug,useValue:()=>ye(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const l=n;KT(u,f=>{e(f,l)})}}}return i!==n&&void 0!==n.providers}function KT(n,e){for(let t of n)Vl(t)&&(t=t.\u0275providers),Array.isArray(t)?KT(t,e):e(t)}const Cq=ze({provide:String,useValue:ze});function QT(n){return null!==n&&"object"==typeof n&&Cq in n}function Fc(n){return"function"==typeof n}const YT=new ve("Set Injector scope."),Iv={},Aq={};let JT;function wv(){return void 0===JT&&(JT=new qT),JT}class Ji{}class Hd extends Ji{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ZT(e,o=>this.processProvider(o)),this.records.set(dN,zd(void 0,this)),i.has("environment")&&this.records.set(Ji,zd(void 0,this));const s=this.records.get(YT);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(hN.multi,pt,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Zs(this),r=Xr(void 0);try{return e()}finally{Zs(t),Xr(r)}}get(e,t=rc,r=dt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(cc))return e[cc](this);r=Wl(r);const s=Zs(this),o=Xr(void 0);try{if(!(r&dt.SkipSelf)){let u=this.records.get(e);if(void 0===u){const l=function Pq(n){return"function"==typeof n||"object"==typeof n&&n instanceof ve}(e)&&jl(e);u=l&&this.injectableDefInScope(l)?zd(XT(e),Iv):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&dt.Self?wv():this.parent).get(e,t=r&dt.Optional&&t===rc?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Xs]=a[Xs]||[]).unshift(Qe(e)),s)throw a;return function xC(n,e,t,r){const i=n[Xs];throw e[qi]&&i.unshift(e[qi]),n.message=function oc(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Qe(e);if(Array.isArray(e))i=e.map(Qe).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Qe(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Yf,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Xs]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Xr(o),Zs(s)}}resolveInjectorInitializers(){const e=Zs(this),t=Xr(void 0);try{const i=this.get(ug.multi,pt,dt.Self);for(const s of i)s()}finally{Zs(e),Xr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Qe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(e){let t=Fc(e=Xe(e))?e:Xe(e&&e.provide);const r=function Dq(n){return QT(n)?zd(void 0,n.useValue):zd(_N(n),Iv)}(e);if(Fc(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=zd(void 0,Iv,!0),i.factory=()=>sc(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Iv&&(t.value=Aq,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Rq(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Xe(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function XT(n){const e=jl(n),t=null!==e?e.factory:Ho(n);if(null!==t)return t;if(n instanceof ve)throw new de(204,!1);if(n instanceof Function)return function bq(n){const e=n.length;if(e>0)throw function Zo(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new de(204,!1);const t=function J_(n){return n&&(n[tc]||n[Lo])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new de(204,!1)}function _N(n,e,t){let r;if(Fc(n)){const i=Xe(n);return Ho(i)||XT(i)}if(QT(n))r=()=>Xe(n.useValue);else if(function mN(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...sc(n.deps||[]));else if(function gN(n){return!(!n||!n.useExisting)}(n))r=()=>ye(Xe(n.useExisting));else{const i=Xe(n&&(n.useClass||n.provide));if(!function Sq(n){return!!n.deps}(n))return Ho(i)||XT(i);r=()=>new i(...sc(n.deps))}return r}function zd(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ZT(n,e){for(const t of n)Array.isArray(t)?ZT(t,e):t&&Vl(t)?ZT(t.\u0275providers,e):e(t)}const Cv=new ve("AppId",{providedIn:"root",factory:()=>xq}),xq="ng",yN=new ve("Platform Initializer"),uo=new ve("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vN=new ve("CSP nonce",{providedIn:"root",factory:()=>function jd(){if(void 0!==BT)return BT;if(typeof document<"u")return document;throw new de(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let EN=(n,e,t)=>null;function aA(n,e,t=!1){return EN(n,e,t)}class jq{}class CN{}class Hq{resolveComponentFactory(e){throw function $q(n){const e=Error(`No component factory found for ${Qe(n)}.`);return e.ngComponent=n,e}(e)}}let Rv=(()=>{class n{static{this.NULL=new Hq}}return n})();function zq(){return Wd(yr(),ae())}function Wd(n,e){return new Xi(Ar(n,e))}let Xi=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=zq}}return n})();class AN{}let ra=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function qq(){const n=ae(),t=wi(yr().index,n);return(ti(t)?t:n)[nt]}()}}return n})(),Wq=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>null})}}return n})();class Kd{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const bN=new Kd("16.2.12"),lA={};function PN(n,e=null,t=null,r){const i=xN(n,e,t,r);return i.resolveInjectorInitializers(),i}function xN(n,e=null,t=null,r,i=new Set){const s=[t||pt,wq(n)];return r=r||("object"==typeof n?void 0:Qe(n)),new Hd(s,e||wv(),r||null,i)}let Zi=(()=>{class n{static{this.THROW_IF_NOT_FOUND=rc}static{this.NULL=new qT}static create(t,r){if(Array.isArray(t))return PN({name:""},r,t,"");{const i=t.name??"";return PN({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Ue({token:n,providedIn:"any",factory:()=>ye(dN)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function hA(n){return n.ngOriginalError}class ia{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&hA(e);for(;t&&hA(t);)t=hA(t);return t||null}}function fA(n){return e=>{setTimeout(n,void 0,e)}}const qn=class t6 extends z{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=fA(s),i&&(i=fA(i)),o&&(o=fA(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ct&&e.add(a),a}};function NN(...n){}class qt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qn(!1),this.onMicrotaskEmpty=new qn(!1),this.onStable=new qn(!1),this.onError=new qn(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function n6(){const n="function"==typeof Gt.requestAnimationFrame;let e=Gt[n?"requestAnimationFrame":"setTimeout"],t=Gt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function s6(n){const e=()=>{!function i6(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Gt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,gA(n),n.isCheckStableRunning=!0,pA(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),gA(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function a6(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return ON(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),kN(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return ON(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),kN(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,gA(n),pA(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qt.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(qt.isInAngularZone())throw new de(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,r6,NN,NN);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const r6={};function pA(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function gA(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function ON(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kN(n){n._nesting--,pA(n)}class o6{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qn,this.onMicrotaskEmpty=new qn,this.onStable=new qn,this.onError=new qn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const FN=new ve("",{providedIn:"root",factory:VN});function VN(){const n=Me(qt);let e=!0;return b(new yt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new yt(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{qt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{qt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(U()))}function sa(n){return n instanceof Function?n():n}let mA=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>new n})}}return n})();function dg(n){for(;n;){n[tt]|=64;const e=ng(n);if(hp(n)&&!e)return n;n=e}return null}const $N=new ve("",{providedIn:"root",factory:()=>!1});let Mv=null;function qN(n,e){return n[e]??QN()}function WN(n,e){const t=QN();t.producerNode?.length&&(n[e]=Mv,t.lView=n,Mv=KN())}const _6={...$a,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{dg(n.lView)},lView:null};function KN(){return Object.create(_6)}function QN(){return Mv??=KN(),Mv}const at={};function Pt(n){YN(At(),ae(),Ur()+n,!1)}function YN(n,e,t,r){if(!r)if(3==(3&e[tt])){const s=n.preOrderCheckHooks;null!==s&&Cd(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Td(e,s,0,t)}Wo(t)}function ge(n,e=dt.Default){const t=ae();return null===t?ye(n,e):Jy(yr(),t,Xe(n),e)}function Nv(n,e,t,r,i,s,o,a,u,l,f){const m=e.blueprint.slice();return m[un]=i,m[tt]=140|r,(null!==l||n&&2048&n[tt])&&(m[tt]|=2048),Ry(m),m[cn]=m[no]=n,m[Fn]=t,m[La]=o||n&&n[La],m[nt]=a||n&&n[nt],m[hs]=u||n&&n[hs]||null,m[hr]=s,m[dc]=function T3(){return C3++}(),m[Ki]=f,m[sd]=l,m[Vn]=2==e.type?n[Vn]:m,m}function Jd(n,e,t,r,i){let s=n.data[e];if(null===s)s=function _A(n,e,t,r,i){const s=vd(),o=Cc(),u=n.data[e]=function A6(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function oo(){return null!==qe.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function Oy(){return qe.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function wc(){const n=qe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return gs(s,!0),s}function hg(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function XN(n,e,t,r,i){const s=qN(e,hc),o=Ur(),a=2&r;try{Wo(-1),a&&e.length>gt&&YN(n,e,gt,!1),Vi(a?2:0,i);const l=a?s:null,f=gc(l);try{null!==l&&(l.dirty=!1),t(r,i)}finally{gp(l,f)}}finally{a&&null===e[hc]&&WN(e,hc),Wo(o),Vi(a?3:1,i)}}function yA(n,e,t){if(dy(e)){const r=ki(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{ki(r)}}}function vA(n,e,t){yd()&&(function M6(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;Ba(t)&&function U6(n,e,t){const r=Ar(e,n),i=ZN(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Ov(n,Nv(n,i,null,o,r,e,null,n[La].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Sd(t,e),ri(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],l=Ko(e,n,a,t);ri(l,e),null!==o&&B6(0,a-i,l,u,0,o),Ii(u)&&(wi(t.index,e)[Fn]=Ko(e,n,a,t))}}(n,e,t,Ar(t,e)),64==(64&t.flags)&&iO(n,e,t))}function EA(n,e,t=Ar){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function ZN(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=IA(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function IA(n,e,t,r,i,s,o,a,u,l,f){const m=gt+r,_=m+i,I=function v6(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:at);return t}(m,_),C="function"==typeof l?l():l;return I[xe]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:f}}let eO=n=>null;function tO(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?nO(t,e,i,s):r.hasOwnProperty(i)&&nO(t,e,r[i],s)}return t}function nO(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function es(n,e,t,r,i,s,o,a){const u=Ar(e,t);let f,l=e.inputs;!a&&null!=l&&(f=l[r])?(bA(n,t,f,r,i),Ba(e)&&function S6(n,e){const t=wi(e,n);16&t[tt]||(t[tt]|=64)}(t,e.index)):3&e.type&&(r=function D6(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function wA(n,e,t,r){if(yd()){const i=null===r?null:{"":-1},s=function O6(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(ed(e,o.selectors,!1))if(r||(r=[]),Ii(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),CA(n,e,a.length)}else r.unshift(o),CA(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&rO(n,e,t,o,i,a),i&&function k6(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new de(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Fa(t.mergedAttrs,t.attrs)}function rO(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Vp(Sd(t,e),n,r[l].type);!function V6(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const f=r[l];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,u=hg(n,e,r.length,null);for(let l=0;l<r.length;l++){const f=r[l];t.mergedAttrs=Fa(t.mergedAttrs,f.hostAttrs),L6(n,t,e,u,f),F6(u,f,i),null!==f.contentQueries&&(t.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=64);const m=f.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function b6(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,l=null;for(let f=e.directiveStart;f<i;f++){const m=s[f],_=t?t.get(m):null,C=_?_.outputs:null;u=tO(m.inputs,f,u,_?_.inputs:null),l=tO(m.outputs,f,l,C);const S=null===u||null===o||ep(e)?null:j6(u,f,o);a.push(S)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}(n,t,s)}function iO(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function Dp(){return qe.lFrame.currentDirectiveIndex}();try{Wo(s);for(let a=r;a<i;a++){const u=n.data[a],l=e[a];Sp(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&N6(u,l)}}finally{Wo(-1),Sp(o)}}function N6(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function CA(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function F6(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ii(e)&&(t[""]=n)}}function L6(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ho(i.type)),o=new Ga(s,Ii(i),ge);n.blueprint[r]=o,t[r]=o,function P6(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function x6(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,hg(n,t,i.hostVars,at),i)}function co(n,e,t,r,i,s){const o=Ar(n,e);!function TA(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?et(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[nt],o,s,n.value,t,r,i)}function B6(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)sO(r,t,o[a++],o[a++],o[a++])}function sO(n,e,t,r,i){const s=ki(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{ki(s)}}function j6(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function oO(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function aO(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Tc(t[r]),o.contentQueries(2,e[s],s)}}}function Ov(n,e){return n[Uo]?n[ly][Ei]=e:n[Uo]=e,n[ly]=e,e}function AA(n,e,t){Tc(0);const r=ki(null);try{e(n,t)}finally{ki(r)}}function dO(n,e){const t=n[hs],r=t?t.get(ia,null):null;r&&r.handleError(e)}function bA(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];sO(n.data[o],e[o],r,a,i)}}function oa(n,e,t){const r=pd(e,n);!function UM(n,e,t){n.setValue(e,t)}(n[nt],r,t)}function $6(n,e){const t=wi(e,n),r=t[xe];!function H6(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[un];null!==i&&null===t[Ki]&&(t[Ki]=aA(i,t[hs])),DA(r,t,t[Fn])}function DA(n,e,t){Id(e);try{const r=n.viewQuery;null!==r&&AA(1,r,t);const i=n.template;null!==i&&XN(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&aO(n,e),n.staticViewQueries&&AA(2,n.viewQuery,t);const s=n.components;null!==s&&function z6(n,e){for(let t=0;t<e.length;t++)$6(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[tt]&=-5,Pp()}}let hO=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function $C(n,e,t){const r=Object.create(HC);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>yy(r),run:()=>{if(r.dirty=!1,r.hasRun&&!vy(r))return;r.hasRun=!0;const o=gc(r);try{r.cleanupFn(),r.cleanupFn=dd,r.fn(i)}finally{gp(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,l=>{this.all.has(l)&&this.queue.set(l,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>new n})}}return n})();function kv(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Jr(i,a):2==s&&(r=Jr(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function fg(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Bt(s)),Vr(s)&&fO(s,r);const o=t.type;if(8&o)fg(n,e,t.child,r);else if(32&o){const a=xT(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=KM(e,t);if(Array.isArray(a))r.push(...a);else{const u=ng(e[Vn]);fg(u[xe],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function fO(n,e){for(let t=mr;t<n.length;t++){const r=n[t],i=r[xe].firstChild;null!==i&&fg(r[xe],r,i,e)}n[fs]!==n[un]&&e.push(n[fs])}function Fv(n,e,t,r=!0){const i=e[La],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{pO(n,e,n.template,t)}catch(u){throw r&&dO(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function pO(n,e,t,r){const i=e[tt];if(256!=(256&i)){e[La].effectManager?.flush(),Id(e);try{Ry(e),function Ny(n){return qe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&XN(n,e,t,2,r);const o=3==(3&i);if(o){const l=n.preOrderCheckHooks;null!==l&&Cd(e,l,null)}else{const l=n.preOrderHooks;null!==l&&Td(e,l,0,null),Dc(e,0)}if(function W6(n){for(let e=FM(n);null!==e;e=VM(e)){if(!e[ad])continue;const t=e[$o];for(let r=0;r<t.length;r++){JC(t[r])}}}(e),gO(e,2),null!==n.contentQueries&&aO(n,e),o){const l=n.contentCheckHooks;null!==l&&Cd(e,l)}else{const l=n.contentHooks;null!==l&&Td(e,l,1),Dc(e,1)}!function y6(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=qN(e,jo);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Wo(~s);else{const o=s,a=t[++i],u=t[++i];Fy(a,o),r.dirty=!1;const l=gc(r);try{u(2,e[o])}finally{gp(r,l)}}}}finally{null===e[jo]&&WN(e,jo),Wo(-1)}}(n,e);const a=n.components;null!==a&&_O(e,a,0);const u=n.viewQuery;if(null!==u&&AA(2,u,r),o){const l=n.viewCheckHooks;null!==l&&Cd(e,l)}else{const l=n.viewHooks;null!==l&&Td(e,l,2),Dc(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[tt]&=-73,gd(e)}finally{Pp()}}}function gO(n,e){for(let t=FM(n);null!==t;t=VM(t))for(let r=mr;r<t.length;r++)mO(t[r],e)}function K6(n,e,t){mO(wi(e,n),t)}function mO(n,e){if(!function YC(n){return 128==(128&n[tt])}(n))return;const t=n[xe],r=n[tt];if(80&r&&0===e||1024&r||2===e)pO(t,n,t.template,n[Fn]);else if(n[lc]>0){gO(n,1);const i=t.components;null!==i&&_O(n,i,1)}}function _O(n,e,t){for(let r=0;r<e.length;r++)K6(n,e[r],t)}class pg{get rootNodes(){const e=this._lView,t=e[xe];return fg(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Fn]}set context(e){this._lView[Fn]=e}get destroyed(){return 256==(256&this._lView[tt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[cn];if(Vr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(fv(e,r),Nd(t,r))}this._attachedToViewContainer=!1}NT(this._lView[xe],this._lView)}onDestroy(e){!function md(n,e){if(256==(256&n[tt]))throw new de(911,!1);null===n[ro]&&(n[ro]=[]),n[ro].push(e)}(this._lView,e)}markForCheck(){dg(this._cdRefInjectingView||this._lView)}detach(){this._lView[tt]&=-129}reattach(){this._lView[tt]|=128}detectChanges(){Fv(this._lView[xe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function L3(n,e){ig(n,e,e[nt],2,null,null)}(this._lView[xe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=e}}class Q6 extends pg{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Fv(e[xe],e,e[Fn],!1)}checkNoChanges(){}get context(){return null}}class yO extends Rv{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=vt(e);return new gg(t,this.ngModule)}}function vO(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class J6{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Wl(r);const i=this.injector.get(e,lA,r);return i!==lA||t===lA?i:this.parentInjector.get(e,t,r)}}class gg extends CN{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=vO(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return vO(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function nd(n){return n.map(sp).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Ji?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new J6(e,s):e,a=o.get(AN,null);if(null===a)throw new de(407,!1);const m={rendererFactory:a,sanitizer:o.get(Wq,null),effectManager:o.get(hO,null),afterRenderEventManager:o.get(mA,null)},_=a.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",C=r?function E6(n,e,t,r){const s=r.get($N,!1)||t===tr.ShadowDom,o=n.selectRootElement(e,s);return function I6(n){eO(n)}(o),o}(_,r,this.componentDef.encapsulation,o):hv(_,I,function Y6(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(I)),H=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let F=null;null!==C&&(F=aA(C,o,!0));const W=IA(0,null,null,1,0,null,null,null,null,null,null),oe=Nv(null,W,null,H,null,null,m,_,o,null,F);let Ie,Be;Id(oe);try{const V=this.componentDef;let P,O=null;V.findHostDirectiveDefs?(P=[],O=new Map,V.findHostDirectiveDefs(V,P,O),P.push(V)):P=[V];const L=function Z6(n,e){const t=n[xe],r=gt;return n[r]=e,Jd(t,r,2,"#host",null)}(oe,C),$=function eW(n,e,t,r,i,s,o){const a=i[xe];!function tW(n,e,t,r){for(const i of n)e.mergedAttrs=Fa(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(kv(e,e.mergedAttrs,!0),null!==t&&XM(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=aA(e,i[hs]));const l=s.rendererFactory.createRenderer(e,t);let f=16;t.signals?f=4096:t.onPush&&(f=64);const m=Nv(i,ZN(t),null,f,i[n.index],n,s,l,null,null,u);return a.firstCreatePass&&CA(a,n,r.length-1),Ov(i,m),i[n.index]=m}(L,C,V,P,oe,m,_);Be=io(W,gt),C&&function rW(n,e,t,r){if(r)Yl(n,t,["ng-version",bN.full]);else{const{attrs:i,classes:s}=function op(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!yi(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Yl(n,t,i),s&&s.length>0&&JM(n,t,s.join(" "))}}(_,V,C,r),void 0!==t&&function iW(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Be,this.ngContentSelectors,t),Ie=function nW(n,e,t,r,i,s){const o=yr(),a=i[xe],u=Ar(o,i);rO(a,i,o,t,null,r);for(let f=0;f<t.length;f++)ri(Ko(i,a,o.directiveStart+f,o),i);iO(a,i,o),u&&ri(u,i);const l=Ko(i,a,o.directiveStart+o.componentOffset,o);if(n[Fn]=i[Fn]=l,null!==s)for(const f of s)f(l,e);return yA(a,o,n),l}($,V,P,O,oe,[sW]),DA(W,oe,null)}finally{Pp()}return new X6(this.componentType,Ie,Wd(Be,oe),oe,Be)}}class X6 extends jq{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Q6(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;bA(s[xe],s,i,e,t),this.previousInputValues.set(e,t),dg(wi(this._tNode.index,s))}}get injector(){return new Br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function sW(){const n=yr();wd(ae()[xe],n)}function Kt(n){let e=function EO(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Ii(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new de(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=Vv(n.inputs),o.inputTransforms=Vv(n.inputTransforms),o.declaredInputs=Vv(n.declaredInputs),o.outputs=Vv(n.outputs);const a=i.hostBindings;a&&cW(n,a);const u=i.viewQuery,l=i.contentQueries;if(u&&aW(n,u),l&&uW(n,l),cr(n.inputs,i.inputs),cr(n.declaredInputs,i.declaredInputs),cr(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),cr(o.inputTransforms,i.inputTransforms)),Ii(i)&&i.data.animation){const f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Kt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function oW(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fa(i.hostAttrs,t=Fa(t,i.hostAttrs))}}(r)}function Vv(n){return n===kr?{}:n===pt?[]:n}function aW(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function uW(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function cW(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function TO(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function Lv(n){return!!SA(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function SA(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ii(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Vc(n,e,t,r){const i=ii(n,e,t);return ii(n,e+1,r)||i}function ho(n,e,t,r){const i=ae();return ii(i,qo(),e)&&(At(),co(wn(),i,n,e,t,r)),ho}function Zd(n,e,t,r){return ii(n,qo(),t)?e+et(t)+r:at}function nh(n,e,t,r,i,s,o,a,u,l){const m=function ys(n,e,t,r,i,s){const o=Vc(n,e,t,r);return Vc(n,e+2,i,s)||o}(n,function Qi(){return qe.lFrame.bindingIndex}(),t,i,o,u);return ms(4),m?e+et(t)+r+et(i)+s+et(o)+a+et(u)+l:at}function Ns(n,e,t,r,i,s,o,a){const u=ae(),l=At(),f=n+gt,m=l.firstCreatePass?function OW(n,e,t,r,i,s,o,a,u){const l=e.consts,f=Jd(e,n,4,o||null,xs(l,a));wA(e,t,f,xs(l,u)),wd(e,f);const m=f.tView=IA(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,l,u,e,t,r,i,s,o):l.data[f];gs(m,!1);const _=VO(l,u,m,n);bc()&&gv(l,u,_,m),ri(_,u),Ov(u,u[f]=oO(_,u,_,m)),dp(m)&&vA(l,u,m),null!=o&&EA(u,m,a)}let VO=function LO(n,e,t,r){return ao(!0),e[nt].createComment("")};function fo(n){return function so(n,e){return n[e]}(function Ap(){return qe.lFrame.contextLView}(),gt+n)}function hn(n,e,t){const r=ae();return ii(r,qo(),e)&&es(At(),wn(),r,n,e,r[nt],t,!1),hn}function OA(n,e,t,r,i){const o=i?"class":"style";bA(n,t,e.inputs[o],o,r)}function fe(n,e,t,r){const i=ae(),s=At(),o=gt+n,a=i[nt],u=s.firstCreatePass?function LW(n,e,t,r,i,s){const o=e.consts,u=Jd(e,n,2,r,xs(o,i));return wA(e,t,u,xs(o,s)),null!==u.attrs&&kv(u,u.attrs,!1),null!==u.mergedAttrs&&kv(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],l=UO(s,i,u,a,e,n);i[o]=l;const f=dp(u);return gs(u,!0),XM(a,l,u),32!=(32&u.flags)&&bc()&&gv(s,i,l,u),0===function Ic(){return qe.lFrame.elementDepthCount}()&&ri(l,i),function ZC(){qe.lFrame.elementDepthCount++}(),f&&(vA(s,i,u),yA(s,u,i)),null!==r&&EA(i,u),fe}function _e(){let n=yr();Cc()?function Tp(){qe.lFrame.isParent=!1}():(n=n.parent,gs(n,!1));const e=n;(function wp(n){return qe.skipHydrationRootTNode===n})(e)&&function My(){qe.skipHydrationRootTNode=null}(),function eT(){qe.lFrame.elementDepthCount--}();const t=At();return t.firstCreatePass&&(wd(t,n),dy(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Op(n){return 0!=(8&n.flags)}(e)&&OA(t,e,ae(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Wy(n){return 0!=(16&n.flags)}(e)&&OA(t,e,ae(),e.stylesWithoutHost,!1),_e}function fr(n,e,t,r){return fe(n,e,t,r),_e(),fr}let UO=(n,e,t,r,i,s)=>(ao(!0),hv(r,i,function $y(){return qe.lFrame.currentNamespace}()));function eu(){return ae()}function Eg(n){return!!n&&"function"==typeof n.then}function $O(n){return!!n&&"function"==typeof n.subscribe}function fn(n,e,t,r){const i=ae(),s=At(),o=yr();return function zO(n,e,t,r,i,s,o){const a=dp(r),l=n.firstCreatePass&&function cO(n){return n.cleanup||(n.cleanup=[])}(n),f=e[Fn],m=function uO(n){return n[Va]||(n[Va]=[])}(e);let _=!0;if(3&r.type||o){const S=Ar(r,e),R=o?o(S):S,H=m.length,F=o?oe=>o(Bt(oe[r.index])):r.index;let W=null;if(!o&&a&&(W=function zW(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[Va],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==W)(W.__ngLastListenerFn__||W).__ngNextListenerFn__=s,W.__ngLastListenerFn__=s,_=!1;else{s=qO(r,e,f,s,!1);const oe=t.listen(R,i,s);m.push(s,oe),l&&l.push(i,F,H,H+1)}}else s=qO(r,e,f,s,!1);const I=r.outputs;let C;if(_&&null!==I&&(C=I[i])){const S=C.length;if(S)for(let R=0;R<S;R+=2){const Ie=e[C[R]][C[R+1]].subscribe(s),Be=m.length;m.push(s,Ie),l&&l.push(i,r.index,Be,-(Be+1))}}}(s,i,i[nt],o,n,e,r),fn}function GO(n,e,t,r){try{return Vi(6,e,t),!1!==t(r)}catch(i){return dO(n,i),!1}finally{Vi(7,e,t)}}function qO(n,e,t,r,i){return function s(o){if(o===Function)return r;dg(n.componentOffset>-1?wi(n.index,e):e);let u=GO(e,t,r,o),l=s.__ngNextListenerFn__;for(;l;)u=GO(e,t,l,o)&&u,l=l.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function vr(n=1){return function rT(n){return(qe.lFrame.contextLView=function iT(n,e){for(;n>0;)e=e[no],n--;return e}(n,qe.lFrame.contextLView))[Fn]}(n)}function ah(n,e,t){return VA(n,"",e,"",t),ah}function VA(n,e,t,r,i){const s=ae(),o=Zd(s,e,t,r);return o!==at&&es(At(),wn(),s,n,o,s[nt],i,!1),VA}function Hv(n,e){return n<<17|e<<2}function tu(n){return n>>17&32767}function LA(n){return 2|n}function Lc(n){return(131068&n)>>2}function UA(n,e){return-131069&n|e<<2}function BA(n){return 1|n}function tk(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?tu(s):Lc(s),u=!1;for(;0!==a&&(!1===u||o);){const f=n[a+1];ZW(n[a],e)&&(u=!0,n[a+1]=r?BA(f):LA(f)),a=r?tu(f):Lc(f)}u&&(n[t+1]=r?LA(s):BA(s))}function ZW(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ya(n,e)>=0}function nu(n,e){return function Os(n,e,t,r){const i=ae(),s=At(),o=ms(2);s.firstUpdatePass&&function lk(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Ur()],o=function ck(n,e){return e>=n.expandoStartIndex}(n,t);(function pk(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function u9(n,e,t,r){const i=function Rp(n){const e=qe.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Ig(t=jA(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=jA(i,n,e,t,r),null===s){let u=function c9(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Lc(r))return n[tu(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=jA(null,n,e,u[1],r),u=Ig(u,e.attrs,r),function l9(n,e,t,r){n[tu(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function d9(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Ig(r,n[s].hostAttrs,t);return Ig(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function JW(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=tu(o),u=Lc(o);n[r]=t;let f,l=!1;if(Array.isArray(t)?(f=t[1],(null===f||Ya(t,f)>0)&&(l=!0)):f=t,i)if(0!==u){const _=tu(n[a+1]);n[r+1]=Hv(_,a),0!==_&&(n[_+1]=UA(n[_+1],r)),n[a+1]=function QW(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Hv(a,0),0!==a&&(n[a+1]=UA(n[a+1],r)),a=r;else n[r+1]=Hv(u,0),0===a?a=r:n[u+1]=UA(n[u+1],r),u=r;l&&(n[r+1]=LA(n[r+1])),tk(n,f,r,!0),tk(n,f,r,!1),function XW(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Ya(s,e)>=0&&(t[r+1]=BA(t[r+1]))}(e,f,n,r,s),o=Hv(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==at&&ii(i,o,e)&&function hk(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,l=u[a+1],f=function YW(n){return 1==(1&n)}(l)?fk(u,e,t,i,Lc(l),o):void 0;zv(f)||(zv(s)||function KW(n){return 2==(2&n)}(l)&&(s=fk(u,null,t,i,a,o)),function K3(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Ja.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ja.Important),n.setStyle(t,r,i,s))}}(r,o,pd(Ur(),t),i,s))}(s,s.data[Ur()],i,i[nt],n,i[o+1]=function g9(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Qe(Xa(n)))),n}(e,t),r,o)}(n,e,null,!0),nu}function jA(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ig(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Ig(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Gn(n,o,!!t||e[++s]))}return void 0===n?null:n}function fk(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],l=Array.isArray(u),f=l?u[1]:u,m=null===f;let _=t[i+1];_===at&&(_=m?pt:void 0);let I=m?Od(_,r):f===r?_:void 0;if(l&&!zv(I)&&(I=Od(u,r)),zv(I)&&(a=I,o))return a;const C=n[i+1];i=o?tu(C):Lc(C)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Od(u,r))}return a}function zv(n){return void 0!==n}function Ae(n,e=""){const t=ae(),r=At(),i=n+gt,s=r.firstCreatePass?Jd(r,i,1,e,null):r.data[i],o=gk(r,t,s,e,n);t[i]=o,bc()&&gv(r,t,o,s),gs(s,!1)}let gk=(n,e,t,r,i)=>(ao(!0),function dv(n,e){return n.createText(e)}(e[nt],r));function $A(n){return ru("",n,""),$A}function ru(n,e,t){const r=ae(),i=Zd(r,n,e,t);return i!==at&&oa(r,Ur(),i),ru}function HA(n,e,t,r,i,s,o,a,u){const l=ae(),f=nh(l,n,e,t,r,i,s,o,a,u);return f!==at&&oa(l,Ur(),f),HA}const lh="en-US";let Fk=lh;function qA(n,e,t,r,i){if(n=Xe(n),Array.isArray(n))for(let s=0;s<n.length;s++)qA(n[s],e,t,r,i);else{const s=At(),o=ae(),a=yr();let u=Fc(n)?n:Xe(n.provide);const l=_N(n),f=1048575&a.providerIndexes,m=a.directiveStart,_=a.providerIndexes>>20;if(Fc(n)||!n.multi){const I=new Ga(l,i,ge),C=KA(u,e,i?f:f+_,m);-1===C?(Vp(Sd(a,o),s,u),WA(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),o.push(I)):(t[C]=I,o[C]=I)}else{const I=KA(u,e,f+_,m),C=KA(u,e,f,f+_),R=C>=0&&t[C];if(i&&!R||!i&&!(I>=0&&t[I])){Vp(Sd(a,o),s,u);const H=function F5(n,e,t,r,i){const s=new Ga(n,t,ge);return s.multi=[],s.index=e,s.componentProviders=0,a1(s,i,r&&!t),s}(i?k5:O5,t.length,i,r,l);!i&&R&&(t[C].providerFactory=H),WA(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),o.push(H)}else WA(s,n,I>-1?I:C,a1(t[i?C:I],l,!i&&r));!i&&r&&R&&t[C].componentProviders++}}}function WA(n,e,t,r){const i=Fc(e),s=function Tq(n){return!!n.useClass}(e);if(i||s){const u=(s?Xe(e.useClass):e).prototype.ngOnDestroy;if(u){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const f=l.indexOf(t);-1===f?l.push(t,[r,u]):l[f+1].push(r,u)}else l.push(t,u)}}}function a1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function KA(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function O5(n,e,t,r){return QA(this.multi,[])}function k5(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ko(t,t[xe],this.providerFactory.index,r);s=a.slice(0,o),QA(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],QA(i,s);return s}function QA(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Rn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function N5(n,e,t){const r=At();if(r.firstCreatePass){const i=Ii(n);qA(t,r.data,r.blueprint,i,!0),qA(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Bc{}class u1{}class YA extends Bc{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yO(this);const i=Fr(e);this._bootstrapComponents=sa(i.bootstrap),this._r3Injector=xN(e,t,[{provide:Bc,useValue:this},{provide:Rv,useValue:this.componentFactoryResolver},...r],Qe(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class JA extends u1{constructor(e){super(),this.moduleType=e}create(e){return new YA(this.moduleType,e,[])}}class c1 extends Bc{constructor(e){super(),this.componentFactoryResolver=new yO(this),this.instance=null;const t=new Hd([...e.providers,{provide:Bc,useValue:this},{provide:Rv,useValue:this.componentFactoryResolver}],e.parent||wv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function XA(n,e,t=null){return new c1({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let U5=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=fN(0,t.type),i=r.length>0?XA([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ue({token:n,providedIn:"environment",factory:()=>new n(ye(Ji))})}}return n})();function l1(n){n.getStandaloneInjector=e=>e.get(U5).getOrCreateStandaloneInjector(n)}function f8(n,e,t,r=!0){const i=e[xe];if(function B3(n,e,t,r){const i=mr+r,s=t.length;r>0&&(t[i-1][Ei]=e),r<s-mr?(e[Ei]=t[i],zp(t,mr+r,e)):(t.push(e),e[Ei]=null),e[cn]=t;const o=e[Bo];null!==o&&t!==o&&function j3(n,e){const t=n[$o];e[Vn]!==e[cn][cn][Vn]&&(n[ad]=!0),null===t?n[$o]=[e]:t.push(e)}(o,e);const a=e[Oi];null!==a&&a.insertView(n),e[tt]|=128}(i,e,n,t),r){const s=VT(t,n),o=e[nt],a=pv(o,n[fs]);null!==a&&function V3(n,e,t,r,i,s){r[un]=i,r[hr]=e,ig(n,r,t,1,i,s)}(i,n[hr],o,e,a,s)}}let aa=(()=>{class n{static{this.__NG_ELEMENT_ID__=m8}}return n})();const p8=aa,g8=class extends p8{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function h8(n,e,t,r){const i=e.tView,a=Nv(n,i,t,4096&n[tt]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Bo]=n[e.index];const l=n[Oi];return null!==l&&(a[Oi]=l.createEmbeddedView(i)),DA(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new pg(i)}};function m8(){return function Qv(n,e){return 4&n.type?new g8(e,n,Wd(n,e)):null}(yr(),ae())}let Fs=(()=>{class n{static{this.__NG_ELEMENT_ID__=w8}}return n})();function w8(){return function S1(n,e){let t;const r=e[n.index];return Vr(r)?t=r:(t=oO(r,e,null,n),e[n.index]=t,Ov(e,t)),R1(t,e,n,r),new b1(t,n,e)}(yr(),ae())}const C8=Fs,b1=class extends C8{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Wd(this._hostTNode,this._hostLView)}get injector(){return new Br(this._hostTNode,this._hostLView)}get parentInjector(){const e=qa(this._hostTNode,this._hostLView);if(bd(e)){const t=Rc(e,this._hostLView),r=Sc(e);return new Br(t[xe].data[r+8],t)}return new Br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=D1(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-mr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Xo(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const S=t||{};a=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef}const u=o?e:new gg(vt(e)),l=r||this.parentInjector;if(!s&&null==u.ngModule){const R=(o?l:this.parentInjector).get(Ji,null);R&&(s=R)}vt(u.componentType??{});const I=u.create(l,i,null,s);return this.insertImpl(I.hostView,a,false),I}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function Ip(n){return Vr(n[cn])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const l=i[cn],f=new b1(l,l[hr],l[cn]);f.detach(f.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return f8(a,i,o,!r),e.attachToViewContainerRef(),zp(tb(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=D1(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=fv(this._lContainer,t);r&&(Nd(tb(this._lContainer),t),NT(r[xe],r))}detach(e){const t=this._adjustIndex(e,-1),r=fv(this._lContainer,t);return r&&null!=Nd(tb(this._lContainer),t)?new pg(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function D1(n){return n[8]}function tb(n){return n[8]||(n[8]=[])}let R1=function P1(n,e,t,r){if(n[fs])return;let i;i=8&t.type?Bt(r):function T8(n,e){const t=n[nt],r=t.createComment(""),i=Ar(e,n);return kc(t,pv(t,i),r,function G3(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[fs]=i};const hb=new ve("Application Initializer");let fb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Me(hb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Eg(s))t.push(s);else if($O(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),tF=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const ua=new ve("LocaleId",{providedIn:"root",factory:()=>Me(ua,dt.Optional|dt.SkipSelf)||function tK(){return typeof $localize<"u"&&$localize.locale||lh}()});let Xv=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new M(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class iK{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let nF=(()=>{class n{compileModuleSync(t){return new JA(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=sa(Fr(t).declarations).reduce((o,a)=>{const u=vt(a);return u&&o.push(new gg(u)),o},[]);return new iK(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const oF=new ve(""),eE=new ve("");let yb,mb=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,yb||(function bK(n){yb=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(ye(qt),ye(_b),ye(eE))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),_b=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return yb?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),iu=null;const aF=new ve("AllowMultipleToken"),vb=new ve("PlatformDestroyListeners"),Eb=new ve("appBootstrapListener");class cF{constructor(e,t){this.name=e,this.token=t}}function dF(n,e,t=[]){const r=`Platform: ${e}`,i=new ve(r);return(s=[])=>{let o=Ib();if(!o||o.injector.get(aF,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function RK(n){if(iu&&!iu.get(aF,!1))throw new de(400,!1);(function uF(){!function LC(n){yp=n}(()=>{throw new de(600,!1)})})(),iu=n;const e=n.get(fF);(function lF(n){n.get(yN,null)?.forEach(t=>t())})(n)}(function hF(n=[],e){return Zi.create({name:e,providers:[{provide:YT,useValue:"platform"},{provide:vb,useValue:new Set([()=>iu=null])},...n]})}(a,r))}return function xK(n){const e=Ib();if(!e)throw new de(401,!1);return e}()}}function Ib(){return iu?.get(fF)??null}let fF=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function MK(n="zone.js",e){return"noop"===n?new o6:"zone.js"===n?new qt(e):n}(r?.ngZone,function pF(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function L5(n,e,t){return new YA(n,e,t)}(t.moduleType,this.injector,function vF(n){return[{provide:qt,useFactory:n},{provide:ug,multi:!0,useFactory:()=>{const e=Me(OK,{optional:!0});return()=>e.initialize()}},{provide:yF,useFactory:NK},{provide:FN,useFactory:VN}]}(()=>i)),o=s.injector.get(ia,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{tE(this._modules,s),a.unsubscribe()})}),function gF(n,e,t){try{const r=t();return Eg(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(fb);return a.runInitializers(),a.donePromise.then(()=>(function Vk(n){Ni(n,"Expected localeId to be defined"),"string"==typeof n&&(Fk=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(ua,lh)||lh),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=mF({},r);return function DK(n,e,t){const r=new JA(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(fh);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new de(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(vb,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(ye(Zi))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function mF(n,e){return Array.isArray(e)?e.reduce(mF,n):{...n,...e}}let fh=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Me(yF),this.zoneIsStable=Me(FN),this.componentTypes=[],this.components=[],this.isStable=Me(Xv).hasPendingTasks.pipe(Se(t=>t?k(!1):this.zoneIsStable),zt(),U()),this._injector=Me(Ji)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof CN;if(!this._injector.get(fb).done)throw!i&&function to(n){const e=vt(n)||nr(n)||dr(n);return null!==e&&e.standalone}(t),new de(405,!1);let o;o=i?t:this._injector.get(Rv).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function SK(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Bc),l=o.create(Zi.NULL,[],r||o.selector,a),f=l.location.nativeElement,m=l.injector.get(oF,null);return m?.registerApplication(f),l.onDestroy(()=>{this.detachView(l.hostView),tE(this.components,l),m?.unregisterApplication(f)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;tE(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(Eb,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>tE(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new de(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const yF=new ve("",{providedIn:"root",factory:()=>Me(ia).handleError.bind(void 0)});function NK(){const n=Me(qt),e=Me(ia);return t=>n.runOutsideAngular(()=>e.handleError(t))}let OK=(()=>{class n{constructor(){this.zone=Me(qt),this.applicationRef=Me(fh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let nE=(()=>{class n{static{this.__NG_ELEMENT_ID__=FK}}return n})();function FK(n){return function VK(n,e,t){if(Ba(n)&&!t){const r=wi(n.index,e);return new pg(r,r)}return 47&n.type?new pg(e[Vn],e):null}(yr(),ae(),16==(16&n))}class AF{constructor(){}supports(e){return Lv(e)}create(e){return new $K(e)}}const jK=(n,e)=>e;class $K{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||jK}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<DF(r,i,s)?t:r,a=DF(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const l=a-i,f=u-i;if(l!=f){for(let _=0;_<l;_++){const I=_<s.length?s[_]:s[_]=0,C=I+_;f<=C&&C<l&&(s[_]=I+1)}s[o.previousIndex]=f-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Lv(e))throw new de(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function mW(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new HK(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new bF),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bF),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class HK{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zK{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class bF{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new zK,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function DF(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class SF{constructor(){}supports(e){return e instanceof Map||SA(e)}create(){return new GK}}class GK{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||SA(e)))throw new de(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new qK(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class qK{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function RF(){return new sE([new AF])}let sE=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:RF})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||RF()),deps:[[n,new kd,new Oc]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new de(901,!1)}}return n})();function PF(){return new xg([new SF])}let xg=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:PF})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||PF()),deps:[[n,new kd,new Oc]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new de(901,!1)}}return n})();const QK=dF(null,"core",[]);let YK=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(ye(fh))}}static{this.\u0275mod=vi({type:n})}static{this.\u0275inj=Tr({})}}return n})();function ph(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Db=null;function su(){return Db}class l7{}const ts=new ve("DocumentToken");let Sb=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(){return Me(h7)},providedIn:"platform"})}}return n})();const d7=new ve("Location Initialized");let h7=(()=>{class n extends Sb{constructor(){super(),this._doc=Me(ts),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return su().getBaseHref(this._doc)}onPopState(t){const r=su().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=su().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function Rb(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function UF(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ca(n){return n&&"?"!==n[0]?"?"+n:n}let $c=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(){return Me(jF)},providedIn:"root"})}}return n})();const BF=new ve("appBaseHref");let jF=(()=>{class n extends $c{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Me(ts).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Rb(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ca(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+ca(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+ca(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ye(Sb),ye(BF,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),f7=(()=>{class n extends $c{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Rb(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+ca(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+ca(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ye(Sb),ye(BF,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),Pb=(()=>{class n{constructor(t){this._subject=new qn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function m7(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(UF($F(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ca(r))}normalize(t){return n.stripTrailingSlash(function g7(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,$F(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ca(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ca(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=ca}static{this.joinWithSlash=Rb}static{this.stripTrailingSlash=UF}static{this.\u0275fac=function(r){return new(r||n)(ye($c))}}static{this.\u0275prov=Ue({token:n,factory:function(){return function p7(){return new Pb(ye($c))}()},providedIn:"root"})}}return n})();function $F(n){return n.replace(/\/index.html$/,"")}function JF(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class nQ{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let eV=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new nQ(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),tV(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{tV(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ge(Fs),ge(aa),ge(sE))}}static{this.\u0275dir=Je({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function tV(n,e){n.context.$implicit=e.item}let _E=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new rQ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){nV("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){nV("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ge(Fs),ge(aa))}}static{this.\u0275dir=Je({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class rQ{constructor(){this.$implicit=null,this.ngIf=null}}function nV(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Qe(e)}'.`)}let iV=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:Ja.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(ge(Xi),ge(xg),ge(ra))}}static{this.\u0275dir=Je({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),RQ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vi({type:n})}static{this.\u0275inj=Tr({})}}return n})();function yE(n){return"server"===n}let NQ=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>new OQ(ye(ts),window)})}}return n})();class OQ{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function kQ(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class aV{}class iY extends l7{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Wb extends iY{static makeCurrent(){!function c7(n){Db||(Db=n)}(new Wb)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function sY(){return kg=kg||document.querySelector("base"),kg?kg.getAttribute("href"):null}();return null==t?null:function oY(n){IE=IE||document.createElement("a"),IE.setAttribute("href",n);const e=IE.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){kg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return JF(document.cookie,e)}}let IE,kg=null,uY=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const Kb=new ve("EventManagerPlugins");let hV=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new de(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(ye(Kb),ye(qt))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();class fV{constructor(e){this._doc=e}}const Qb="ng-app-id";let pV=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yE(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Qb}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Qb),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Qb,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ye(ts),ye(Cv),ye(vN,8),ye(uo))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const Yb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Jb=/%COMP%/g,hY=new ve("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function mV(n,e){return e.map(t=>t.replace(Jb,n))}let _V=(()=>{class n{constructor(t,r,i,s,o,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=yE(a),this.defaultRenderer=new Xb(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===tr.ShadowDom&&(r={...r,encapsulation:tr.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof vV?i.applyToHost(t):i instanceof Zb&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case tr.Emulated:s=new vV(u,l,r,this.appId,f,o,a,m);break;case tr.ShadowDom:return new mY(u,l,t,r,o,a,this.nonce,m);default:s=new Zb(u,l,r,f,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ye(hV),ye(pV),ye(Cv),ye(hY),ye(ts),ye(uo),ye(qt),ye(vN))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();class Xb{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Yb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(yV(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(yV(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new de(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Yb[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Yb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ja.DashCase|Ja.Important)?e.style.setProperty(t,r,i&Ja.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ja.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=su().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function yV(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class mY extends Xb{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=mV(i.id,i.styles);for(const f of l){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Zb extends Xb{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?mV(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class vV extends Zb{constructor(e,t,r,i,s,o,a,u){const l=i+"-"+r.id;super(e,t,r,s,o,a,u,l),this.contentAttr=function fY(n){return"_ngcontent-%COMP%".replace(Jb,n)}(l),this.hostAttr=function pY(n){return"_nghost-%COMP%".replace(Jb,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let _Y=(()=>{class n extends fV{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(ye(ts))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const EV=["alt","control","meta","shift"],yY={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vY={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let EY=(()=>{class n extends fV{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>su().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),EV.forEach(l=>{const f=r.indexOf(l);f>-1&&(r.splice(f,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=yY[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),EV.forEach(o=>{o!==i&&(0,vY[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(ye(ts))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const TY=dF(QK,"browser",[{provide:uo,useValue:"browser"},{provide:yN,useValue:function IY(){Wb.makeCurrent()},multi:!0},{provide:ts,useFactory:function CY(){return function Z3(n){BT=n}(document),document},deps:[]}]),AY=new ve(""),CV=[{provide:eE,useClass:class aY{addToWindow(e){Gt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new de(5103,!1);return s},Gt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Gt.getAllAngularRootElements=()=>e.getAllRootElements(),Gt.frameworkStabilizers||(Gt.frameworkStabilizers=[]),Gt.frameworkStabilizers.push(r=>{const i=Gt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?su().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:oF,useClass:mb,deps:[qt,_b,eE]},{provide:mb,useClass:mb,deps:[qt,_b,eE]}],TV=[{provide:YT,useValue:"root"},{provide:ia,useFactory:function wY(){return new ia},deps:[]},{provide:Kb,useClass:_Y,multi:!0,deps:[ts,qt,uo]},{provide:Kb,useClass:EY,multi:!0,deps:[ts]},_V,pV,hV,{provide:AN,useExisting:_V},{provide:aV,useClass:uY,deps:[]},[]];let bY=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Cv,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(ye(AY,12))}}static{this.\u0275mod=vi({type:n})}static{this.\u0275inj=Tr({providers:[...TV,...CV],imports:[RQ,YK]})}}return n})(),AV=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(ye(ts))}}static{this.\u0275prov=Ue({token:n,factory:function(r){let i=null;return i=r?new r:function SY(){return new AV(ye(ts))}(),i},providedIn:"root"})}}return n})();typeof window<"u"&&window;const{isArray:OY}=Array,{getPrototypeOf:kY,prototype:FY,keys:VY}=Object;function RV(n){if(1===n.length){const e=n[0];if(OY(e))return{args:e,keys:null};if(function LY(n){return n&&"object"==typeof n&&kY(n)===FY}(e)){const t=VY(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:UY}=Array;function PV(n){return le(e=>function BY(n,e){return UY(e)?n(...e):n(e)}(n,e))}function xV(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function t0(...n){const e=Ss(n),t=Ds(n),{args:r,keys:i}=RV(n);if(0===r.length)return A([],e);const s=new yt(function jY(n,e,t=ft){return r=>{MV(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)MV(e,()=>{const l=A(n[u],e);let f=!1;l.subscribe(Y(r,m=>{s[u]=m,f||(f=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>xV(i,o):ft));return t?s.pipe(PV(t)):s}function MV(n,e,t){n?Nr(t,n,e):e()}const wE=He(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function n0(...n){return function $Y(){return Qr(1)}()(A(n,Ss(n)))}function NV(n){return new yt(e=>{Zn(n()).subscribe(e)})}function Fg(n,e){const t=D(n)?n:()=>n,r=i=>i.error(t());return new yt(e?i=>e.schedule(r,0,i):r)}function r0(){return B((n,e)=>{let t=null;n._refCount++;const r=Y(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class OV extends yt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,te(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ct;const t=this.getSubject();e.add(this.source.subscribe(Y(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ct.EMPTY)}return e}refCount(){return r0()(this)}}function mh(n){return n<=0?()=>$n:B((e,t)=>{let r=0;e.subscribe(Y(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function CE(...n){const e=Ss(n);return B((t,r)=>{(e?n0(n,t,e):n0(n,t)).subscribe(r)})}function Is(n,e){return B((t,r)=>{let i=0;t.subscribe(Y(r,s=>n.call(e,s,i++)&&r.next(s)))})}function TE(n){return B((e,t)=>{let r=!1;e.subscribe(Y(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function kV(n=HY){return B((e,t)=>{let r=!1;e.subscribe(Y(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function HY(){return new wE}function au(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Is((i,s)=>n(i,s,r)):ft,mh(1),t?TE(e):kV(()=>new wE))}function _h(n,e){return D(e)?er(n,e,1):er(n,1)}function jr(n,e,t){const r=D(n)||e||t?{next:n,error:e,complete:t}:n;return r?B((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Y(s,u=>{var l;null===(l=r.next)||void 0===l||l.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,u),s.error(u)},()=>{var u,l;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):ft}function Hc(n){return B((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Y(t,void 0,void 0,o=>{s=Zn(n(o,Hc(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function AE(n,e){return B(function zY(n,e,t,r,i){return(s,o)=>{let a=t,u=e,l=0;s.subscribe(Y(o,f=>{const m=l++;u=a?n(u,f,m):(a=!0,f),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function s0(n){return n<=0?()=>$n:B((e,t)=>{let r=[];e.subscribe(Y(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Vg(n){return B((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ct="primary",Lg=Symbol("RouteTitle");class KY{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function yh(n){return new KY(n)}function QY(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function mo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!FV(n[i],e[i]))return!1;return!0}function FV(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function VV(n){return n.length>0?n[n.length-1]:null}function uu(n){return function NY(n){return!!n&&(n instanceof yt||D(n.lift)&&D(n.subscribe))}(n)?n:Eg(n)?A(Promise.resolve(n)):k(n)}const JY={exact:function BV(n,e,t){if(!zc(n.segments,e.segments)||!bE(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!BV(n.children[r],e.children[r],t))return!1;return!0},subset:jV},LV={exact:function XY(n,e){return mo(n,e)},subset:function ZY(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>FV(n[t],e[t]))},ignored:()=>!0};function UV(n,e,t){return JY[t.paths](n.root,e.root,t.matrixParams)&&LV[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function jV(n,e,t){return $V(n,e,e.segments,t)}function $V(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!zc(i,t)||e.hasChildren()||!bE(i,t,r))}if(n.segments.length===t.length){if(!zc(n.segments,t)||!bE(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!jV(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(zc(n.segments,i)&&bE(n.segments,i,r)&&n.children[ct])&&$V(n.children[ct],e,s,r)}}function bE(n,e,t){return e.every((r,i)=>LV[t](n[i].parameters,r.parameters))}class vh{constructor(e=new Qt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yh(this.queryParams)),this._queryParamMap}toString(){return nJ.serialize(this)}}class Qt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return DE(this)}}class Ug{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=yh(this.parameters)),this._parameterMap}toString(){return GV(this)}}function zc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Bg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(){return new o0},providedIn:"root"})}}return n})();class o0{parse(e){const t=new fJ(e);return new vh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${jg(e.root,!0)}`,r=function sJ(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${SE(t)}=${SE(i)}`).join("&"):`${SE(t)}=${SE(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function rJ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const nJ=new o0;function DE(n){return n.segments.map(e=>GV(e)).join("/")}function jg(n,e){if(!n.hasChildren())return DE(n);if(e){const t=n.children[ct]?jg(n.children[ct],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ct&&r.push(`${i}:${jg(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function tJ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ct&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ct&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===ct?[jg(n.children[ct],!1)]:[`${i}:${jg(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ct]?`${DE(n)}/${t[0]}`:`${DE(n)}/(${t.join("//")})`}}function HV(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function SE(n){return HV(n).replace(/%3B/gi,";")}function a0(n){return HV(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function RE(n){return decodeURIComponent(n)}function zV(n){return RE(n.replace(/\+/g,"%20"))}function GV(n){return`${a0(n.path)}${function iJ(n){return Object.keys(n).map(e=>`;${a0(e)}=${a0(n[e])}`).join("")}(n.parameters)}`}const oJ=/^[^\/()?;#]+/;function u0(n){const e=n.match(oJ);return e?e[0]:""}const aJ=/^[^\/()?;=#]+/,cJ=/^[^=?&#]+/,dJ=/^[^&#]+/;class fJ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qt([],{}):new Qt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ct]=new Qt(e,t)),r}parseSegment(){const e=u0(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(e),new Ug(RE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function uJ(n){const e=n.match(aJ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=u0(this.remaining);i&&(r=i,this.capture(r))}e[RE(t)]=RE(r)}parseQueryParam(e){const t=function lJ(n){const e=n.match(cJ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function hJ(n){const e=n.match(dJ);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=zV(t),s=zV(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=u0(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new de(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ct);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[ct]:new Qt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new de(4011,!1)}}function qV(n){return n.segments.length>0?new Qt([],{[ct]:n}):n}function WV(n){const e={};for(const r of Object.keys(n.children)){const s=WV(n.children[r]);if(r===ct&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function pJ(n){if(1===n.numberOfChildren&&n.children[ct]){const e=n.children[ct];return new Qt(n.segments.concat(e.segments),e.children)}return n}(new Qt(n.segments,e))}function Gc(n){return n instanceof vh}function KV(n){let e;const i=qV(function t(s){const o={};for(const u of s.children){const l=t(u);o[u.outlet]=l}const a=new Qt(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function QV(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return c0(i,i,i,t,r);const s=function mJ(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new JV(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new JV(t,e,r)}(e);if(s.toRoot())return c0(i,i,new Qt([],{}),t,r);const o=function _J(n,e,t){if(n.isAbsolute)return new xE(e,!0,0);if(!t)return new xE(e,!1,NaN);if(null===t.parent)return new xE(t,!0,0);const r=PE(n.commands[0])?0:1;return function yJ(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new de(4005,!1);i=r.segments.length}return new xE(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Hg(o.segmentGroup,o.index,s.commands):XV(o.segmentGroup,o.index,s.commands);return c0(i,o.segmentGroup,a,t,r)}function PE(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function $g(n){return"object"==typeof n&&null!=n&&n.outlets}function c0(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`}),o=n===e?t:YV(n,e,t);const a=qV(WV(o));return new vh(a,s,i)}function YV(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:YV(s,e,t)}),new Qt(n.segments,r)}class JV{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&PE(r[0]))throw new de(4003,!1);const i=r.find($g);if(i&&i!==VV(r))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xE{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function XV(n,e,t){if(n||(n=new Qt([],{})),0===n.segments.length&&n.hasChildren())return Hg(n,e,t);const r=function EJ(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if($g(a))break;const u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!eL(u,l,o))return s;r+=2}else{if(!eL(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Qt(n.segments.slice(0,r.pathIndex),{});return s.children[ct]=new Qt(n.segments.slice(r.pathIndex),n.children),Hg(s,0,i)}return r.match&&0===i.length?new Qt(n.segments,{}):r.match&&!n.hasChildren()?l0(n,e,t):r.match?Hg(n,0,i):l0(n,e,t)}function Hg(n,e,t){if(0===t.length)return new Qt(n.segments,{});{const r=function vJ(n){return $g(n[0])?n[0].outlets:{[ct]:n}}(t),i={};if(Object.keys(r).some(s=>s!==ct)&&n.children[ct]&&1===n.numberOfChildren&&0===n.children[ct].segments.length){const s=Hg(n.children[ct],e,t);return new Qt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=XV(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Qt(n.segments,i)}}function l0(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if($g(s)){const u=IJ(s.outlets);return new Qt(r,u)}if(0===i&&PE(t[0])){r.push(new Ug(n.segments[e].path,ZV(t[0]))),i++;continue}const o=$g(s)?s.outlets[ct]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&PE(a)?(r.push(new Ug(o,ZV(a))),i+=2):(r.push(new Ug(o,{})),i++)}return new Qt(r,{})}function IJ(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=l0(new Qt([],{}),0,r))}),e}function ZV(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function eL(n,e,t){return n==t.path&&mo(e,t.parameters)}const zg="imperative";class _o{constructor(e,t){this.id=e,this.url=t}}class ME extends _o{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cu extends _o{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gg extends _o{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Eh extends _o{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class NE extends _o{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class tL extends _o{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wJ extends _o{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CJ extends _o{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class TJ extends _o{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AJ extends _o{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bJ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class DJ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class SJ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RJ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PJ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xJ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nL{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class d0{}class h0{constructor(e){this.url=e}}class MJ{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new qg,this.attachRef=null}}let qg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new MJ,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class rL{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=f0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=f0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=p0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return p0(e,this._root).map(t=>t.value)}}function f0(n,e){if(n===e.value)return e;for(const t of e.children){const r=f0(n,t);if(r)return r}return null}function p0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=p0(n,t);if(r.length)return r.unshift(e),r}return[]}class ha{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ih(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class iL extends rL{constructor(e,t){super(e),this.snapshot=t,g0(this,e)}toString(){return this.snapshot.toString()}}function sL(n,e){const t=function NJ(n,e){const o=new OE([],{},{},"",{},ct,e,null,{});return new aL("",new ha(o,[]))}(0,e),r=new M([new Ug("",{})]),i=new M({}),s=new M({}),o=new M({}),a=new M(""),u=new wh(r,i,o,a,s,ct,e,t.root);return u.snapshot=t.root,new iL(new ha(u,[]),t)}class wh{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(le(l=>l[Lg]))??k(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(le(e=>yh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(le(e=>yh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function oL(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function OJ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class OE{get title(){return this.data?.[Lg]}constructor(e,t,r,i,s,o,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class aL extends rL{constructor(e,t){super(t),this.url=e,g0(this,t)}toString(){return uL(this._root)}}function g0(n,e){e.value._routerState=n,e.children.forEach(t=>g0(n,t))}function uL(n){const e=n.children.length>0?` { ${n.children.map(uL).join(", ")} } `:"";return`${n.value}${e}`}function m0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,mo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),mo(e.params,t.params)||n.paramsSubject.next(t.params),function YY(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!mo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),mo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function _0(n,e){const t=mo(n.params,e.params)&&function eJ(n,e){return zc(n,e)&&n.every((t,r)=>mo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||_0(n.parent,e.parent))}let y0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ct,this.activateEvents=new qn,this.deactivateEvents=new qn,this.attachEvents=new qn,this.detachEvents=new qn,this.parentContexts=Me(qg),this.location=Me(Fs),this.changeDetector=Me(nE),this.environmentInjector=Me(Ji),this.inputBinder=Me(kE,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new kJ(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Je({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fi]})}}return n})();class kJ{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===wh?this.route:e===qg?this.childContexts:this.parent.get(e,t)}}const kE=new ve("");let cL=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=t0([r.queryParams,r.params,r.data]).pipe(Se(([s,o,a],u)=>(a={...s,...o,...a},0===u?k(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function u7(n){const e=vt(n);if(!e)return null;const t=new gg(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function Wg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function VJ(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Wg(n,r,i);return Wg(n,r)})}(n,e,t);return new ha(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Wg(n,a)),o}}const r=function LJ(n){return new wh(new M(n.url),new M(n.params),new M(n.queryParams),new M(n.fragment),new M(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Wg(n,s));return new ha(r,i)}}const v0="ngNavigationCancelingError";function lL(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Gc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=dL(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function dL(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[v0]=!0,r.cancellationCode=e,t&&(r.url=t),r}function hL(n){return n&&n[v0]}let fL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ei({type:n,selectors:[["ng-component"]],standalone:!0,features:[l1],decls:1,vars:0,template:function(r,i){1&r&&fr(0,"router-outlet")},dependencies:[y0],encapsulation:2})}}return n})();function E0(n){const e=n.children&&n.children.map(E0),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ct&&(t.component=fL),t}function Us(n){return n.outlet||ct}function Kg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class qJ{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),m0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ih(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ih(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ih(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ih(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new xJ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new RJ(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(m0(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),m0(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Kg(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class pL{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class FE{constructor(e,t){this.component=e,this.route=t}}function WJ(n,e,t){const r=n._root;return Qg(r,e?e._root:null,t,[r.value])}function Ch(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function SC(n){return null!==jl(n)}(n)?e.get(n):n:r}function Qg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ih(e);return n.children.forEach(o=>{(function QJ(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function YJ(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!zc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!zc(n.url,e.url)||!mo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_0(n,e)||!mo(n.queryParams,e.queryParams);default:return!_0(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new pL(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Qg(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new FE(a.outlet.component,o))}else o&&Yg(e,a,i),i.canActivateChecks.push(new pL(r)),Qg(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Yg(a,t.getContext(o),i)),i}function Yg(n,e,t){const r=Ih(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Yg(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new FE(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Jg(n){return"function"==typeof n}function gL(n){return n instanceof wE||"EmptyError"===n?.name}const VE=Symbol("INITIAL_VALUE");function Th(){return Se(n=>t0(n.map(e=>e.pipe(mh(1),CE(VE)))).pipe(le(e=>{for(const t of e)if(!0!==t){if(t===VE)return VE;if(!1===t||t instanceof vh)return t}return!0}),Is(e=>e!==VE),mh(1)))}function mL(n){return function En(...n){return Jt(n)}(jr(e=>{if(Gc(e))throw lL(0,e)}),le(e=>!0===e))}class LE{constructor(e){this.segmentGroup=e||null}}class _L{constructor(e){this.urlTree=e}}function Ah(n){return Fg(new LE(n))}function yL(n){return Fg(new _L(n))}class mX{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new de(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return k(r);if(i.numberOfChildren>1||!i.children[ct])return Fg(new de(4e3,!1));i=i.children[ct]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new vh(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Qt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new de(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const I0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _X(n,e,t,r,i){const s=w0(n,e,t);return s.matched?(r=function BJ(n,e){return n.providers&&!n._injector&&(n._injector=XA(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function fX(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?k(i.map(o=>{const a=Ch(o,n);return uu(function nX(n){return n&&Jg(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Th(),mL()):k(!0)}(r,e,t).pipe(le(o=>!0===o?s:{...I0}))):k(s)}function w0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...I0}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||QY)(t,n,e);if(!i)return{...I0};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function vL(n,e,t,r){return t.length>0&&function EX(n,e,t){return t.some(r=>UE(n,e,r)&&Us(r)!==ct)}(n,t,r)?{segmentGroup:new Qt(e,vX(r,new Qt(t,n.children))),slicedSegments:[]}:0===t.length&&function IX(n,e,t){return t.some(r=>UE(n,e,r))}(n,t,r)?{segmentGroup:new Qt(n.segments,yX(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Qt(n.segments,n.children),slicedSegments:t}}function yX(n,e,t,r,i){const s={};for(const o of r)if(UE(n,t,o)&&!i[Us(o)]){const a=new Qt([],{});s[Us(o)]=a}return{...i,...s}}function vX(n,e){const t={};t[ct]=e;for(const r of n)if(""===r.path&&Us(r)!==ct){const i=new Qt([],{});t[Us(r)]=i}return t}function UE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class AX{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new mX(this.urlSerializer,this.urlTree)}noMatchError(e){return new de(4002,!1)}recognize(){const e=vL(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ct).pipe(Hc(t=>{if(t instanceof _L)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof LE?this.noMatchError(t):t}),le(t=>{const r=new OE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ct,this.rootComponentType,null,{}),i=new ha(r,t),s=new aL("",i),o=function gJ(n,e,t=null,r=null){return QV(KV(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,ct).pipe(Hc(r=>{throw r instanceof LE?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=oL(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return A(i).pipe(_h(s=>{const o=r.children[s],a=function zJ(n,e){const t=n.filter(r=>Us(r)===e);return t.push(...n.filter(r=>Us(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),AE((s,o)=>(s.push(...o),s)),TE(null),function GY(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Is((i,s)=>n(i,s,r)):ft,s0(1),t?TE(e):kV(()=>new wE))}(),er(s=>{if(null===s)return Ah(r);const o=EL(s);return function bX(n){n.sort((e,t)=>e.value.outlet===ct?-1:t.value.outlet===ct?1:e.value.outlet.localeCompare(t.value.outlet))}(o),k(o)}))}processSegment(e,t,r,i,s,o){return A(t).pipe(_h(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Hc(u=>{if(u instanceof LE)return k(null);throw u}))),au(a=>!!a),Hc(a=>{if(gL(a))return function CX(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?k([]):Ah(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function wX(n,e,t,r){return!!(Us(n)===r||r!==ct&&UE(e,t,n))&&("**"===n.path||w0(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Ah(i):Ah(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?yL(s):this.applyRedirects.lineralizeSegments(r,s).pipe(er(o=>{const a=new Qt(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:l,positionalParamSegments:f}=w0(t,i,s);if(!a)return Ah(t);const m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,f);return i.redirectTo.startsWith("/")?yL(m):this.applyRedirects.lineralizeSegments(i,m).pipe(er(_=>this.processSegment(e,r,t,_.concat(l),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?VV(i).parameters:{};a=k({snapshot:new OE(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,IL(r),Us(r),r.component??r._loadedComponent??null,r,wL(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=_X(t,r,i,e).pipe(le(({matched:u,consumedSegments:l,remainingSegments:f,parameters:m})=>u?{snapshot:new OE(l,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,IL(r),Us(r),r.component??r._loadedComponent??null,r,wL(r)),consumedSegments:l,remainingSegments:f}:null));return a.pipe(Se(u=>null===u?Ah(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Se(({routes:l})=>{const f=r._loadedInjector??e,{snapshot:m,consumedSegments:_,remainingSegments:I}=u,{segmentGroup:C,slicedSegments:S}=vL(t,_,I,l);if(0===S.length&&C.hasChildren())return this.processChildren(f,l,C).pipe(le(H=>null===H?null:[new ha(m,H)]));if(0===l.length&&0===S.length)return k([new ha(m,[])]);const R=Us(r)===s;return this.processSegment(f,l,C,S,R?ct:s,!0).pipe(le(H=>[new ha(m,H)]))}))))}getChildConfig(e,t,r){return t.children?k({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?k({routes:t._loadedRoutes,injector:t._loadedInjector}):function hX(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?k(!0):k(i.map(o=>{const a=Ch(o,n);return uu(function XJ(n){return n&&Jg(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Th(),mL())}(e,t,r).pipe(er(i=>i?this.configLoader.loadChildren(e,t).pipe(jr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function gX(n){return Fg(dL(!1,3))}())):k({routes:[],injector:e})}}function DX(n){const e=n.value.routeConfig;return e&&""===e.path}function EL(n){const e=[],t=new Set;for(const r of n){if(!DX(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=EL(r.children);e.push(new ha(r.value,i))}return e.filter(r=>!t.has(r))}function IL(n){return n.data||{}}function wL(n){return n.resolve||{}}function CL(n){return"string"==typeof n.title||null===n.title}function C0(n){return Se(e=>{const t=n(e);return t?A(t).pipe(le(()=>e)):k(e)})}const bh=new ve("ROUTES");let T0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Me(nF)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return k(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=uu(t.loadComponent()).pipe(le(TL),jr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Vg(()=>{this.componentLoaders.delete(t)})),i=new OV(r,()=>new z).pipe(r0());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return k({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function OX(n,e,t,r){return uu(n.loadChildren()).pipe(le(TL),er(i=>i instanceof u1||Array.isArray(i)?k(i):A(e.compileModuleAsync(i))),le(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(bh,[],{optional:!0,self:!0}).flat()),{routes:o.map(E0),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Vg(()=>{this.childrenLoaders.delete(r)})),o=new OV(s,()=>new z).pipe(r0());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function TL(n){return function kX(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let BE=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new z,this.transitionAbortSubject=new z,this.configLoader=Me(T0),this.environmentInjector=Me(Ji),this.urlSerializer=Me(Bg),this.rootContexts=Me(qg),this.inputBindingEnabled=null!==Me(kE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>k(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new DJ(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new bJ(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new M({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:zg,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Is(s=>0!==s.id),le(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Se(s=>{this.currentTransition=s;let o=!1,a=!1;return k(s).pipe(jr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Se(u=>{const l=u.currentBrowserUrl.toString(),f=!t.navigated||u.extractedUrl.toString()!==l||l!==u.currentUrlTree.toString();if(!f&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const _="";return this.events.next(new Eh(u.id,this.urlSerializer.serialize(u.rawUrl),_,0)),u.resolve(null),$n}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return k(u).pipe(Se(_=>{const I=this.transitions?.getValue();return this.events.next(new ME(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),I!==this.transitions?.getValue()?$n:Promise.resolve(_)}),function SX(n,e,t,r,i,s){return er(o=>function TX(n,e,t,r,i,s,o="emptyOnly"){return new AX(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(le(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),jr(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const I=new tL(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(I)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:_,extractedUrl:I,source:C,restoredState:S,extras:R}=u,H=new ME(_,this.urlSerializer.serialize(I),C,S);this.events.next(H);const F=sL(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:F,urlAfterRedirects:I,extras:{...R,skipLocationChange:!1,replaceUrl:!1}},k(s)}{const _="";return this.events.next(new Eh(u.id,this.urlSerializer.serialize(u.extractedUrl),_,1)),u.resolve(null),$n}}),jr(u=>{const l=new wJ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),le(u=>(this.currentTransition=s={...u,guards:WJ(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function iX(n,e){return er(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?k({...t,guardsResult:!0}):function sX(n,e,t,r){return A(n).pipe(er(i=>function dX(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?k(s.map(a=>{const u=Kg(e)??i,l=Ch(a,u);return uu(function tX(n){return n&&Jg(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):u.runInContext(()=>l(n,e,t,r))).pipe(au())})).pipe(Th()):k(!0)}(i.component,i.route,t,e,r)),au(i=>!0!==i,!0))}(o,r,i,n).pipe(er(a=>a&&function JJ(n){return"boolean"==typeof n}(a)?function oX(n,e,t,r){return A(e).pipe(_h(i=>n0(function uX(n,e){return null!==n&&e&&e(new SJ(n)),k(!0)}(i.route.parent,r),function aX(n,e){return null!==n&&e&&e(new PJ(n)),k(!0)}(i.route,r),function lX(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function KJ(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>NV(()=>k(o.guards.map(u=>{const l=Kg(o.node)??t,f=Ch(u,l);return uu(function eX(n){return n&&Jg(n.canActivateChild)}(f)?f.canActivateChild(r,n):l.runInContext(()=>f(r,n))).pipe(au())})).pipe(Th())));return k(s).pipe(Th())}(n,i.path,t),function cX(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return k(!0);const i=r.map(s=>NV(()=>{const o=Kg(e)??t,a=Ch(s,o);return uu(function ZJ(n){return n&&Jg(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(au())}));return k(i).pipe(Th())}(n,i.route,t))),au(i=>!0!==i,!0))}(r,s,n,e):k(a)),le(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),jr(u=>{if(s.guardsResult=u.guardsResult,Gc(u.guardsResult))throw lL(0,u.guardsResult);const l=new CJ(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Is(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),C0(u=>{if(u.guards.canActivateChecks.length)return k(u).pipe(jr(l=>{const f=new TJ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),Se(l=>{let f=!1;return k(l).pipe(function RX(n,e){return er(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return k(t);let s=0;return A(i).pipe(_h(o=>function PX(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!CL(i)&&(s[Lg]=i.title),function xX(n,e,t,r){const i=function MX(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return k({});const s={};return A(i).pipe(er(o=>function NX(n,e,t,r){const i=Kg(e)??r,s=Ch(n,i);return uu(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(au(),jr(a=>{s[o]=a}))),s0(1),function qY(n){return le(()=>n)}(s),Hc(o=>gL(o)?$n:Fg(o)))}(s,n,e,r).pipe(le(o=>(n._resolvedData=o,n.data=oL(n,t).resolve,i&&CL(i)&&(n.data[Lg]=i.title),null)))}(o.route,r,n,e)),jr(()=>s++),s0(1),er(o=>s===i.length?k(t):$n))})}(t.paramsInheritanceStrategy,this.environmentInjector),jr({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(l,"",2)}}))}),jr(l=>{const f=new AJ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}))}),C0(u=>{const l=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(jr(_=>{f.component=_}),le(()=>{})));for(const _ of f.children)m.push(...l(_));return m};return t0(l(u.targetSnapshot.root)).pipe(TE(),mh(1))}),C0(()=>this.afterPreactivation()),le(u=>{const l=function FJ(n,e,t){const r=Wg(n,e._root,t?t._root:void 0);return new iL(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:l},s}),jr(()=>{this.events.next(new d0)}),((n,e,t,r)=>le(i=>(new qJ(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),mh(1),jr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new cu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function WY(n){return B((e,t)=>{Zn(n).subscribe(Y(t,()=>t.complete(),Ve)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(jr(u=>{throw u}))),Vg(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Hc(u=>{if(a=!0,hL(u))this.events.next(new Gg(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function UJ(n){return hL(n)&&Gc(n.url)}(u)?this.events.next(new h0(u.url)):s.resolve(!1);else{this.events.next(new NE(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(l){s.reject(l)}}return $n}))}))}cancelNavigationTransition(t,r,i){const s=new Gg(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function AL(n){return n!==zg}let bL=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ct);return r}getResolvedTitleForRoute(t){return t.data[Lg]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(){return Me(FX)},providedIn:"root"})}}return n})(),FX=(()=>{class n extends bL{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ye(AV))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),VX=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(){return Me(UX)},providedIn:"root"})}}return n})();class LX{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let UX=(()=>{class n extends LX{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=rr(n)))(i||n)}}()}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const jE=new ve("",{providedIn:"root",factory:()=>({})});let BX=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(){return Me(jX)},providedIn:"root"})}}return n})(),jX=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Xg=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Xg||{});function DL(n,e){n.events.pipe(Is(t=>t instanceof cu||t instanceof Gg||t instanceof NE||t instanceof Eh),le(t=>t instanceof cu||t instanceof Eh?Xg.COMPLETE:t instanceof Gg&&(0===t.code||1===t.code)?Xg.REDIRECTING:Xg.FAILED),Is(t=>t!==Xg.REDIRECTING),mh(1)).subscribe(()=>{e()})}function $X(n){throw n}function HX(n,e,t){return e.parse("/")}const zX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ws=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Me(tF),this.isNgZoneEnabled=!1,this._events=new z,this.options=Me(jE,{optional:!0})||{},this.pendingTasks=Me(Xv),this.errorHandler=this.options.errorHandler||$X,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||HX,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Me(BX),this.routeReuseStrategy=Me(VX),this.titleStrategy=Me(bL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Me(bh,{optional:!0})?.flat()??[],this.navigationTransitions=Me(BE),this.urlSerializer=Me(Bg),this.location=Me(Pb),this.componentInputBindingEnabled=!!Me(kE,{optional:!0}),this.eventsSubscription=new Ct,this.isNgZoneEnabled=Me(qt)instanceof qt&&qt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new vh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=sL(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(SL(r)&&this._events.next(r));if(r instanceof ME)AL(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Eh)this.rawUrlTree=i.rawUrl;else if(r instanceof tL){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof d0)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Gg)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof h0){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||AL(i.source)};this.scheduleNavigation(s,zg,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof NE&&this.restoreHistory(i,!0),r instanceof cu&&(this.navigated=!0),SL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),zg,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(E0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o;let m,f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=KV(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return QV(m,t,f,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Gc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,zg,null,r)}navigate(t,r={skipLocationChange:!1}){return function qX(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new de(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...zX}:!1===r?{...GX}:r,Gc(t))return UV(this.currentUrlTree,t,i);const s=this.parseUrl(t);return UV(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((m,_)=>{a=m,u=_});const f=this.pendingTasks.add();return DL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function SL(n){return!(n instanceof d0||n instanceof h0)}let Zg=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new z,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof cu&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function lN(n,e,t){return function Iq(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?cN:Za}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(ge(ws),ge(wh),function Md(n){return function gT(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Jl(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(yr(),n)}("tabindex"),ge(ra),ge(Xi),ge($c))}}static{this.\u0275dir=Je({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&fn("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&ho("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",ph],skipLocationChange:["skipLocationChange","skipLocationChange",ph],replaceUrl:["replaceUrl","replaceUrl",ph],routerLink:"routerLink"},standalone:!0,features:[TO,Fi]})}}return n})();class RL{}let QX=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Is(t=>t instanceof cu),_h(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=XA(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return A(i).pipe(Qr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):k(null);const s=i.pipe(er(o=>null===o?k(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?A([s,this.loader.loadComponent(r)]).pipe(Qr()):s})}static{this.\u0275fac=function(r){return new(r||n)(ye(ws),ye(nF),ye(Ji),ye(RL),ye(T0))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const A0=new ve("");let PL=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ME?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof cu?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Eh&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof nL&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new nL(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function JN(){throw new Error("invalid")}()}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function fa(n,e){return{\u0275kind:n,\u0275providers:e}}function ML(){const n=Me(Zi);return e=>{const t=n.get(fh);if(e!==t.components[0])return;const r=n.get(ws),i=n.get(NL);1===n.get(b0)&&r.initialNavigation(),n.get(OL,null,dt.Optional)?.setUpPreloading(),n.get(A0,null,dt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const NL=new ve("",{factory:()=>new z}),b0=new ve("",{providedIn:"root",factory:()=>1}),OL=new ve("");function ZX(n){return fa(0,[{provide:OL,useExisting:QX},{provide:RL,useExisting:n}])}const kL=new ve("ROUTER_FORROOT_GUARD"),tZ=[Pb,{provide:Bg,useClass:o0},ws,qg,{provide:wh,useFactory:function xL(n){return n.routerState.root},deps:[ws]},T0,[]];function nZ(){return new cF("Router",ws)}let D0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[tZ,[],{provide:bh,multi:!0,useValue:t},{provide:kL,useFactory:oZ,deps:[[ws,new Oc,new kd]]},{provide:jE,useValue:r||{}},r?.useHash?{provide:$c,useClass:f7}:{provide:$c,useClass:jF},{provide:A0,useFactory:()=>{const n=Me(NQ),e=Me(qt),t=Me(jE),r=Me(BE),i=Me(Bg);return t.scrollOffset&&n.setOffset(t.scrollOffset),new PL(i,r,n,e,t)}},r?.preloadingStrategy?ZX(r.preloadingStrategy).\u0275providers:[],{provide:cF,multi:!0,useFactory:nZ},r?.initialNavigation?aZ(r):[],r?.bindToComponentInputs?fa(8,[cL,{provide:kE,useExisting:cL}]).\u0275providers:[],[{provide:FL,useFactory:ML},{provide:Eb,multi:!0,useExisting:FL}]]}}static forChild(t){return{ngModule:n,providers:[{provide:bh,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(ye(kL,8))}}static{this.\u0275mod=vi({type:n})}static{this.\u0275inj=Tr({})}}return n})();function oZ(n){return"guarded"}function aZ(n){return["disabled"===n.initialNavigation?fa(3,[{provide:hb,multi:!0,useFactory:()=>{const e=Me(ws);return()=>{e.setUpLocationChangeListener()}}},{provide:b0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?fa(2,[{provide:b0,useValue:0},{provide:hb,multi:!0,deps:[Zi],useFactory:e=>{const t=e.get(d7,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(ws),s=e.get(NL);DL(i,()=>{r(!0)}),e.get(BE).afterPreactivation=()=>(r(!0),s.closed?k(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const FL=new ve(""),cZ=[];let lZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vi({type:n})}static{this.\u0275inj=Tr({imports:[D0.forRoot(cZ),D0]})}}return n})(),dZ=(()=>{class n{constructor(){this.title="wedding-app"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ei({type:n,selectors:[["app-root"]],decls:29,vars:7,consts:[[1,"grid-container"],[1,"grid-item1"],[1,"avatar-container"],[1,"circular-frame"],["src","assets/images/ratio1-1/picture3-1_1.jpg"],[3,"routerLink"],[1,"grid-item2"]],template:function(r,i){1&r&&(fe(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),fr(4,"img",4),_e()(),fe(5,"ul")(6,"li")(7,"a",5),Ae(8,"HOME"),_e()(),fe(9,"li")(10,"a",5),Ae(11,"ABOUT"),_e()(),fe(12,"li")(13,"a",5),Ae(14,"SCHEDULE"),_e()(),fe(15,"li")(16,"a",5),Ae(17,"REGISTRY"),_e()(),fe(18,"li")(19,"a",5),Ae(20,"FAQ"),_e()(),fe(21,"li")(22,"a",5),Ae(23,"CONTACT"),_e()(),fe(24,"li")(25,"a",5),Ae(26,"RSVP"),_e()()()(),fe(27,"div",6),fr(28,"router-outlet"),_e()()),2&r&&(Pt(7),hn("routerLink","Home"),Pt(3),hn("routerLink","About"),Pt(3),hn("routerLink","Schedule"),Pt(3),hn("routerLink","Registry"),Pt(3),hn("routerLink","FAQ"),Pt(3),hn("routerLink","Contact"),Pt(3),hn("routerLink","Rsvp"))},dependencies:[y0,Zg],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:16% auto}.grid-item1[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;font-family:Lora,cursive;background-color:#96a498;color:#fff;min-height:100vh}.grid-item2[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;background-color:#fcfbf4;font-family:Lora,cursive}.avatar-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.circular-frame[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:20px;width:180px;height:180px;border-radius:50%;overflow:hidden}.circular-frame[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:26px;list-style-type:none;margin-top:1em}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:inherit;text-decoration:none}@media (max-width: 1200px){.circular-frame[_ngcontent-%COMP%]{width:140px;height:140px}ul[_ngcontent-%COMP%]{padding-left:2em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 1000px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:18% auto}.circular-frame[_ngcontent-%COMP%]{width:120px;height:120px}ul[_ngcontent-%COMP%]{padding-left:1.5em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 800px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:22% auto}.circular-frame[_ngcontent-%COMP%]{width:110px;height:110px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 600px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:25% auto}.circular-frame[_ngcontent-%COMP%]{width:90px;height:90px}ul[_ngcontent-%COMP%]{padding-left:1em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 450px){.circular-frame[_ngcontent-%COMP%]{width:80px;height:80px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 450px){.circular-frame[_ngcontent-%COMP%]{width:70px;height:70px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px}}"]})}}return n})();var Dh=Ze(631);(0,Dh.registerVersion)("firebase","10.14.1","app");class pZ extends Ct{constructor(e,t){super()}schedule(e,t=0){return this}}const $E={setInterval(n,e,...t){const{delegate:r}=$E;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=$E;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class VL extends pZ{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return $E.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&$E.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ee(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const S0={now:()=>(S0.delegate||Date).now(),delegate:void 0};class em{constructor(e,t=em.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}em.now=S0.now;class LL extends em{constructor(e,t=em.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const _Z=new class mZ extends LL{}(class gZ extends VL{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),UL=new LL(VL),R0=new Kd("ANGULARFIRE2_VERSION");class BL{constructor(){return((n,e)=>{const t=(0,Dh.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(vZ)}}const vZ="app-check";function Sh(){}class jL{zone;delegate;constructor(e,t=_Z){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class EZ{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sh,{},Sh,Sh)),t.pipe(jr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $L=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new jL(Zone.current)),this.insideAngular=t.run(()=>new jL(Zone.current,UL)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ye(qt))};static \u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rs(n){return function wZ(n){return function(t){return(t=t.lift(new EZ(n.ngZone))).pipe(Yr(n.outsideAngular),Mi(n.insideAngular))}}(function Rh(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var lu=Ze(574);lu.A.registerVersion("firebase","10.14.1","app-compat");const bZ=["ngOnDestroy"];class HL{constructor(e){return e}}const HE=new ve("angularfire2.app.options"),zE=new ve("angularfire2.app.name");function P0(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=lu.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>lu.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;RZ("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new HL(o)}const RZ=(n,...e)=>{},PZ={provide:HL,useFactory:P0,deps:[HE,qt,[new Oc,zE]]};let xZ=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:HE,useValue:t},{provide:zE,useValue:r}]}}constructor(t){lu.A.registerVersion("angularfire",R0.full,"core"),lu.A.registerVersion("angularfire",R0.full,"app-compat"),lu.A.registerVersion("angular",bN.full,t.toString())}static \u0275fac=function(r){return new(r||n)(ye(uo))};static \u0275mod=vi({type:n});static \u0275inj=Tr({providers:[PZ]})}return n})();function zL(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function MZ(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(GL("error",`${e} was already initialized on the ${t} Firebase App with different settings.${NZ?" You may need to reload as Firebase is not HMR aware.":""}`),GL("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const NZ=typeof module<"u"&&!!module.hot,GL=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Ze(324);class OZ extends z{constructor(e=1/0,t=1/0,r=S0){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function qL(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,U({connector:()=>new OZ(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function WL(n,e){return D(e)?Se(()=>n,e):Se(()=>n)}const KL=new ve("angularfire2.auth.use-emulator"),QL=new ve("angularfire2.auth.settings"),YL=new ve("angularfire2.auth.tenant-id"),JL=new ve("angularfire2.auth.langugage-code"),XL=new ve("angularfire2.auth.use-device-language"),ZL=new ve("angularfire.auth.persistence"),e2=(n,e,t,r,i,s,o,a)=>zL(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[l,f]of Object.entries(o))u.settings[l]=f;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let t2=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,l,f,m,_,I){const C=new z,S=k(void 0).pipe(Mi(o.outsideAngular),Se(()=>s.runOutsideAngular(()=>Promise.resolve().then(Ze.bind(Ze,324)))),le(()=>P0(t,s,r)),le(R=>e2(R,s,a,l,f,m,u,_)),qL({bufferSize:1,refCount:!1}));if(yE(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=k(null);else{S.pipe(au()).subscribe();const R=S.pipe(Se(W=>W.getRedirectResult().then(oe=>oe,()=>null)),rs,qL({bufferSize:1,refCount:!1})),H=S.pipe(Se(W=>new yt(oe=>({unsubscribe:s.runOutsideAngular(()=>W.onAuthStateChanged(Ie=>oe.next(Ie),Ie=>oe.error(Ie),()=>oe.complete()))})))),F=S.pipe(Se(W=>new yt(oe=>({unsubscribe:s.runOutsideAngular(()=>W.onIdTokenChanged(Ie=>oe.next(Ie),Ie=>oe.error(Ie),()=>oe.complete()))}))));this.authState=R.pipe(WL(H),Yr(o.outsideAngular),Mi(o.insideAngular)),this.user=R.pipe(WL(F),Yr(o.outsideAngular),Mi(o.insideAngular)),this.idToken=this.user.pipe(Se(W=>W?A(W.getIdToken()):k(null))),this.idTokenResult=this.user.pipe(Se(W=>W?A(W.getIdTokenResult()):k(null))),this.credential=b(R,C,this.authState.pipe(Is(W=>!W))).pipe(le(W=>W?.user?W:null),Yr(o.outsideAngular),Mi(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(bZ.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,l)=>o.then(f=>{const m=f?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,m),m})})})}))(this,S,s,{spy:{apply:(R,H,F)=>{(R.startsWith("signIn")||R.startsWith("createUser"))&&F.then(W=>C.next(W))}}})}static \u0275fac=function(r){return new(r||n)(ye(HE),ye(zE,8),ye(uo),ye(qt),ye($L),ye(KL,8),ye(QL,8),ye(YL,8),ye(JL,8),ye(XL,8),ye(ZL,8),ye(BL,8))};static \u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function x0(){return B((n,e)=>{let t,r=!1;n.subscribe(Y(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Wc,s2,Q=Ze(467),n2=Ze(779),yo=Ze(398),Ht=Ze(401),r2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i2={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(V,P,O){O||(O=0);var L=Array(16);if("string"==typeof P)for(var $=0;16>$;++$)L[$]=P.charCodeAt(O++)|P.charCodeAt(O++)<<8|P.charCodeAt(O++)<<16|P.charCodeAt(O++)<<24;else for($=0;16>$;++$)L[$]=P[O++]|P[O++]<<8|P[O++]<<16|P[O++]<<24;var K=V.g[3],N=(P=V.g[0])+(K^(O=V.g[1])&(($=V.g[2])^K))+L[0]+3614090360&4294967295;N=(O=($=(K=(P=(O=($=(K=(P=(O=($=(K=(P=(O=($=(K=(P=(O=($=(K=(P=(O=($=(K=(P=(O=($=(K=(P=(O=($=(K=(P=(O=($=(K=(P=(O=($=(K=(P=(O=($=(K=(P=(O=($=(K=(P=(O=($=(K=(P=(O=($=(K=(P=(O=($=(K=(P=O+(N<<7&4294967295|N>>>25))+((N=K+($^P&(O^$))+L[1]+3905402710&4294967295)<<12&4294967295|N>>>20))+((N=$+(O^K&(P^O))+L[2]+606105819&4294967295)<<17&4294967295|N>>>15))+((N=O+(P^$&(K^P))+L[3]+3250441966&4294967295)<<22&4294967295|N>>>10))+((N=P+(K^O&($^K))+L[4]+4118548399&4294967295)<<7&4294967295|N>>>25))+((N=K+($^P&(O^$))+L[5]+1200080426&4294967295)<<12&4294967295|N>>>20))+((N=$+(O^K&(P^O))+L[6]+2821735955&4294967295)<<17&4294967295|N>>>15))+((N=O+(P^$&(K^P))+L[7]+4249261313&4294967295)<<22&4294967295|N>>>10))+((N=P+(K^O&($^K))+L[8]+1770035416&4294967295)<<7&4294967295|N>>>25))+((N=K+($^P&(O^$))+L[9]+2336552879&4294967295)<<12&4294967295|N>>>20))+((N=$+(O^K&(P^O))+L[10]+4294925233&4294967295)<<17&4294967295|N>>>15))+((N=O+(P^$&(K^P))+L[11]+2304563134&4294967295)<<22&4294967295|N>>>10))+((N=P+(K^O&($^K))+L[12]+1804603682&4294967295)<<7&4294967295|N>>>25))+((N=K+($^P&(O^$))+L[13]+4254626195&4294967295)<<12&4294967295|N>>>20))+((N=$+(O^K&(P^O))+L[14]+2792965006&4294967295)<<17&4294967295|N>>>15))+((N=O+(P^$&(K^P))+L[15]+1236535329&4294967295)<<22&4294967295|N>>>10))+((N=P+($^K&(O^$))+L[1]+4129170786&4294967295)<<5&4294967295|N>>>27))+((N=K+(O^$&(P^O))+L[6]+3225465664&4294967295)<<9&4294967295|N>>>23))+((N=$+(P^O&(K^P))+L[11]+643717713&4294967295)<<14&4294967295|N>>>18))+((N=O+(K^P&($^K))+L[0]+3921069994&4294967295)<<20&4294967295|N>>>12))+((N=P+($^K&(O^$))+L[5]+3593408605&4294967295)<<5&4294967295|N>>>27))+((N=K+(O^$&(P^O))+L[10]+38016083&4294967295)<<9&4294967295|N>>>23))+((N=$+(P^O&(K^P))+L[15]+3634488961&4294967295)<<14&4294967295|N>>>18))+((N=O+(K^P&($^K))+L[4]+3889429448&4294967295)<<20&4294967295|N>>>12))+((N=P+($^K&(O^$))+L[9]+568446438&4294967295)<<5&4294967295|N>>>27))+((N=K+(O^$&(P^O))+L[14]+3275163606&4294967295)<<9&4294967295|N>>>23))+((N=$+(P^O&(K^P))+L[3]+4107603335&4294967295)<<14&4294967295|N>>>18))+((N=O+(K^P&($^K))+L[8]+1163531501&4294967295)<<20&4294967295|N>>>12))+((N=P+($^K&(O^$))+L[13]+2850285829&4294967295)<<5&4294967295|N>>>27))+((N=K+(O^$&(P^O))+L[2]+4243563512&4294967295)<<9&4294967295|N>>>23))+((N=$+(P^O&(K^P))+L[7]+1735328473&4294967295)<<14&4294967295|N>>>18))+((N=O+(K^P&($^K))+L[12]+2368359562&4294967295)<<20&4294967295|N>>>12))+((N=P+(O^$^K)+L[5]+4294588738&4294967295)<<4&4294967295|N>>>28))+((N=K+(P^O^$)+L[8]+2272392833&4294967295)<<11&4294967295|N>>>21))+((N=$+(K^P^O)+L[11]+1839030562&4294967295)<<16&4294967295|N>>>16))+((N=O+($^K^P)+L[14]+4259657740&4294967295)<<23&4294967295|N>>>9))+((N=P+(O^$^K)+L[1]+2763975236&4294967295)<<4&4294967295|N>>>28))+((N=K+(P^O^$)+L[4]+1272893353&4294967295)<<11&4294967295|N>>>21))+((N=$+(K^P^O)+L[7]+4139469664&4294967295)<<16&4294967295|N>>>16))+((N=O+($^K^P)+L[10]+3200236656&4294967295)<<23&4294967295|N>>>9))+((N=P+(O^$^K)+L[13]+681279174&4294967295)<<4&4294967295|N>>>28))+((N=K+(P^O^$)+L[0]+3936430074&4294967295)<<11&4294967295|N>>>21))+((N=$+(K^P^O)+L[3]+3572445317&4294967295)<<16&4294967295|N>>>16))+((N=O+($^K^P)+L[6]+76029189&4294967295)<<23&4294967295|N>>>9))+((N=P+(O^$^K)+L[9]+3654602809&4294967295)<<4&4294967295|N>>>28))+((N=K+(P^O^$)+L[12]+3873151461&4294967295)<<11&4294967295|N>>>21))+((N=$+(K^P^O)+L[15]+530742520&4294967295)<<16&4294967295|N>>>16))+((N=O+($^K^P)+L[2]+3299628645&4294967295)<<23&4294967295|N>>>9))+((N=P+($^(O|~K))+L[0]+4096336452&4294967295)<<6&4294967295|N>>>26))+((N=K+(O^(P|~$))+L[7]+1126891415&4294967295)<<10&4294967295|N>>>22))+((N=$+(P^(K|~O))+L[14]+2878612391&4294967295)<<15&4294967295|N>>>17))+((N=O+(K^($|~P))+L[5]+4237533241&4294967295)<<21&4294967295|N>>>11))+((N=P+($^(O|~K))+L[12]+1700485571&4294967295)<<6&4294967295|N>>>26))+((N=K+(O^(P|~$))+L[3]+2399980690&4294967295)<<10&4294967295|N>>>22))+((N=$+(P^(K|~O))+L[10]+4293915773&4294967295)<<15&4294967295|N>>>17))+((N=O+(K^($|~P))+L[1]+2240044497&4294967295)<<21&4294967295|N>>>11))+((N=P+($^(O|~K))+L[8]+1873313359&4294967295)<<6&4294967295|N>>>26))+((N=K+(O^(P|~$))+L[15]+4264355552&4294967295)<<10&4294967295|N>>>22))+((N=$+(P^(K|~O))+L[6]+2734768916&4294967295)<<15&4294967295|N>>>17))+((N=O+(K^($|~P))+L[13]+1309151649&4294967295)<<21&4294967295|N>>>11))+((K=(P=O+((N=P+($^(O|~K))+L[4]+4149444226&4294967295)<<6&4294967295|N>>>26))+((N=K+(O^(P|~$))+L[11]+3174756917&4294967295)<<10&4294967295|N>>>22))^(($=K+((N=$+(P^(K|~O))+L[2]+718787259&4294967295)<<15&4294967295|N>>>17))|~P))+L[9]+3951481745&4294967295,V.g[0]=V.g[0]+P&4294967295,V.g[1]=V.g[1]+($+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+$&4294967295,V.g[3]=V.g[3]+K&4294967295}function o(V,P){this.h=P;for(var O=[],L=!0,$=V.length-1;0<=$;$--){var K=0|V[$];L&&K==P||(O[$]=K,L=!1)}this.g=O}(function e(V,P){function O(){}O.prototype=P.prototype,V.D=P.prototype,V.prototype=new O,V.prototype.constructor=V,V.C=function(L,$,K){for(var N=Array(arguments.length-2),Sa=2;Sa<arguments.length;Sa++)N[Sa-2]=arguments[Sa];return P.prototype[$].apply(L,N)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(V,P){void 0===P&&(P=V.length);for(var O=P-this.blockSize,L=this.B,$=this.h,K=0;K<P;){if(0==$)for(;K<=O;)i(this,V,K),K+=this.blockSize;if("string"==typeof V){for(;K<P;)if(L[$++]=V.charCodeAt(K++),$==this.blockSize){i(this,L),$=0;break}}else for(;K<P;)if(L[$++]=V[K++],$==this.blockSize){i(this,L),$=0;break}}this.h=$,this.o+=P},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var P=1;P<V.length-8;++P)V[P]=0;var O=8*this.o;for(P=V.length-8;P<V.length;++P)V[P]=255&O,O/=256;for(this.u(V),V=Array(16),P=O=0;4>P;++P)for(var L=0;32>L;L+=8)V[O++]=this.g[P]>>>L&255;return V};var a={};function u(V){return-128<=V&&128>V?function s(V,P){var O=a;return Object.prototype.hasOwnProperty.call(O,V)?O[V]:O[V]=P(V)}(V,function(P){return new o([0|P],0>P?-1:0)}):new o([0|V],0>V?-1:0)}function l(V){if(isNaN(V)||!isFinite(V))return m;if(0>V)return R(l(-V));for(var P=[],O=1,L=0;V>=O;L++)P[L]=V/O|0,O*=4294967296;return new o(P,0)}var m=u(0),_=u(1),I=u(16777216);function C(V){if(0!=V.h)return!1;for(var P=0;P<V.g.length;P++)if(0!=V.g[P])return!1;return!0}function S(V){return-1==V.h}function R(V){for(var P=V.g.length,O=[],L=0;L<P;L++)O[L]=~V.g[L];return new o(O,~V.h).add(_)}function H(V,P){return V.add(R(P))}function F(V,P){for(;(65535&V[P])!=V[P];)V[P+1]+=V[P]>>>16,V[P]&=65535,P++}function W(V,P){this.g=V,this.h=P}function oe(V,P){if(C(P))throw Error("division by zero");if(C(V))return new W(m,m);if(S(V))return P=oe(R(V),P),new W(R(P.g),R(P.h));if(S(P))return P=oe(V,R(P)),new W(R(P.g),P.h);if(30<V.g.length){if(S(V)||S(P))throw Error("slowDivide_ only works with positive integers.");for(var O=_,L=P;0>=L.l(V);)O=Ie(O),L=Ie(L);var $=Be(O,1),K=Be(L,1);for(L=Be(L,2),O=Be(O,2);!C(L);){var N=K.add(L);0>=N.l(V)&&($=$.add(O),K=N),L=Be(L,1),O=Be(O,1)}return P=H(V,$.j(P)),new W($,P)}for($=m;0<=V.l(P);){for(O=Math.max(1,Math.floor(V.m()/P.m())),L=48>=(L=Math.ceil(Math.log(O)/Math.LN2))?1:Math.pow(2,L-48),N=(K=l(O)).j(P);S(N)||0<N.l(V);)N=(K=l(O-=L)).j(P);C(K)&&(K=_),$=$.add(K),V=H(V,N)}return new W($,V)}function Ie(V){for(var P=V.g.length+1,O=[],L=0;L<P;L++)O[L]=V.i(L)<<1|V.i(L-1)>>>31;return new o(O,V.h)}function Be(V,P){var O=P>>5;P%=32;for(var L=V.g.length-O,$=[],K=0;K<L;K++)$[K]=0<P?V.i(K+O)>>>P|V.i(K+O+1)<<32-P:V.i(K+O);return new o($,V.h)}(n=o.prototype).m=function(){if(S(this))return-R(this).m();for(var V=0,P=1,O=0;O<this.g.length;O++){var L=this.i(O);V+=(0<=L?L:4294967296+L)*P,P*=4294967296}return V},n.toString=function(V){if(2>(V=V||10)||36<V)throw Error("radix out of range: "+V);if(C(this))return"0";if(S(this))return"-"+R(this).toString(V);for(var P=l(Math.pow(V,6)),O=this,L="";;){var $=oe(O,P).g,K=((0<(O=H(O,$.j(P))).g.length?O.g[0]:O.h)>>>0).toString(V);if(C(O=$))return K+L;for(;6>K.length;)K="0"+K;L=K+L}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h},n.l=function(V){return S(V=H(this,V))?-1:C(V)?0:1},n.abs=function(){return S(this)?R(this):this},n.add=function(V){for(var P=Math.max(this.g.length,V.g.length),O=[],L=0,$=0;$<=P;$++){var K=L+(65535&this.i($))+(65535&V.i($)),N=(K>>>16)+(this.i($)>>>16)+(V.i($)>>>16);L=N>>>16,O[$]=(N&=65535)<<16|(K&=65535)}return new o(O,-2147483648&O[O.length-1]?-1:0)},n.j=function(V){if(C(this)||C(V))return m;if(S(this))return S(V)?R(this).j(R(V)):R(R(this).j(V));if(S(V))return R(this.j(R(V)));if(0>this.l(I)&&0>V.l(I))return l(this.m()*V.m());for(var P=this.g.length+V.g.length,O=[],L=0;L<2*P;L++)O[L]=0;for(L=0;L<this.g.length;L++)for(var $=0;$<V.g.length;$++){var K=this.i(L)>>>16,N=65535&this.i(L),Sa=V.i($)>>>16,S_=65535&V.i($);O[2*L+2*$]+=N*S_,F(O,2*L+2*$),O[2*L+2*$+1]+=K*S_,F(O,2*L+2*$+1),O[2*L+2*$+1]+=N*Sa,F(O,2*L+2*$+1),O[2*L+2*$+2]+=K*Sa,F(O,2*L+2*$+2)}for(L=0;L<P;L++)O[L]=O[2*L+1]<<16|O[2*L];for(L=P;L<2*P;L++)O[L]=0;return new o(O,0)},n.A=function(V){return oe(this,V).h},n.and=function(V){for(var P=Math.max(this.g.length,V.g.length),O=[],L=0;L<P;L++)O[L]=this.i(L)&V.i(L);return new o(O,this.h&V.h)},n.or=function(V){for(var P=Math.max(this.g.length,V.g.length),O=[],L=0;L<P;L++)O[L]=this.i(L)|V.i(L);return new o(O,this.h|V.h)},n.xor=function(V){for(var P=Math.max(this.g.length,V.g.length),O=[],L=0;L<P;L++)O[L]=this.i(L)^V.i(L);return new o(O,this.h^V.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,s2=i2.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=function f(V,P){if(0==V.length)throw Error("number format error: empty string");if(2>(P=P||10)||36<P)throw Error("radix out of range: "+P);if("-"==V.charAt(0))return R(f(V.substring(1),P));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=l(Math.pow(P,8)),L=m,$=0;$<V.length;$+=8){var K=Math.min(8,V.length-$),N=parseInt(V.substring($,$+K),P);8>K?(K=l(Math.pow(P,K)),L=L.j(K).add(l(N))):L=(L=L.j(O)).add(l(N))}return L},Wc=i2.Integer=o}).apply(typeof r2<"u"?r2:typeof self<"u"?self:typeof window<"u"?window:{});var o2,tm,a2,qE,M0,u2,c2,l2,GE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pa={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,y,E){return h==Array.prototype||h==Object.prototype||(h[y]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof GE&&GE];for(var y=0;y<h.length;++y){var E=h[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,y){if(y)e:{var E=r;h=h.split(".");for(var T=0;T<h.length-1;T++){var G=h[T];if(!(G in E))break e;E=E[G]}(y=y(T=E[h=h[h.length-1]]))!=T&&null!=y&&e(E,h,{configurable:!0,writable:!0,value:y})}}("Array.prototype.values",function(h){return h||function(){return function s(h,y){h instanceof String&&(h+="");var E=0,T=!1,G={next:function(){if(!T&&E<h.length){var ne=E++;return{value:y(ne,h[ne]),done:!1}}return T=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}(this,function(y,E){return E})}});var o=o||{},a=this||self;function u(h){var y=typeof h;return"array"==(y="object"!=y?y:h?Array.isArray(h)?"array":y:"null")||"object"==y&&"number"==typeof h.length}function l(h){var y=typeof h;return"object"==y&&null!=h||"function"==y}function f(h,y,E){return h.call.apply(h.bind,arguments)}function m(h,y,E){if(!h)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,T),h.apply(y,G)}}return function(){return h.apply(y,arguments)}}function _(h,y,E){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function I(h,y){var E=Array.prototype.slice.call(arguments,1);return function(){var T=E.slice();return T.push.apply(T,arguments),h.apply(this,T)}}function C(h,y){function E(){}E.prototype=y.prototype,h.aa=y.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(T,G,ne){for(var be=Array(arguments.length-2),sn=2;sn<arguments.length;sn++)be[sn-2]=arguments[sn];return y.prototype[G].apply(T,be)}}function S(h){const y=h.length;if(0<y){const E=Array(y);for(let T=0;T<y;T++)E[T]=h[T];return E}return[]}function R(h,y){for(let E=1;E<arguments.length;E++){const T=arguments[E];if(u(T)){const G=h.length||0,ne=T.length||0;h.length=G+ne;for(let be=0;be<ne;be++)h[G+be]=T[be]}else h.push(T)}}function F(h){return/^[\s\xa0]*$/.test(h)}function W(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function oe(h){return oe[" "](h),h}oe[" "]=function(){};var Ie=!(-1==W().indexOf("Gecko")||-1!=W().toLowerCase().indexOf("webkit")&&-1==W().indexOf("Edge")||-1!=W().indexOf("Trident")||-1!=W().indexOf("MSIE")||-1!=W().indexOf("Edge"));function Be(h,y,E){for(const T in h)y.call(E,h[T],T,h)}function P(h){const y={};for(const E in h)y[E]=h[E];return y}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,y){let E,T;for(let G=1;G<arguments.length;G++){for(E in T=arguments[G],T)h[E]=T[E];for(let ne=0;ne<O.length;ne++)E=O[ne],Object.prototype.hasOwnProperty.call(T,E)&&(h[E]=T[E])}}function $(h){var y=1;h=h.split(":");const E=[];for(;0<y&&h.length;)E.push(h.shift()),y--;return h.length&&E.push(h.join(":")),E}function K(h){a.setTimeout(()=>{throw h},0)}function N(){var h=mx;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}var S_=new class H{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}(()=>new Lde,h=>h.reset());class Lde{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let R_,P_=!1,mx=new class Sa{constructor(){this.h=this.g=null}add(y,E){const T=S_.get();T.set(y,E),this.h?this.h.next=T:this.g=T,this.h=T}},hG=()=>{const h=a.Promise.resolve(void 0);R_=()=>{h.then(Ude)}};var Ude=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(E){K(E)}var y=S_;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}P_=!1};function Wu(){this.s=this.s,this.C=this.C}function di(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}Wu.prototype.s=!1,Wu.prototype.ma=function(){this.s||(this.s=!0,this.N())},Wu.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},di.prototype.h=function(){this.defaultPrevented=!0};var Bde=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,y),a.removeEventListener("test",E,y)}catch{}return h}();function x_(h,y){if(di.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,T=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(Ie){e:{try{oe(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else"mouseover"==E?y=h.fromElement:"mouseout"==E&&(y=h.toElement);this.relatedTarget=y,T?(this.clientX=void 0!==T.clientX?T.clientX:T.pageX,this.clientY=void 0!==T.clientY?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:jde[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&x_.aa.h.call(this)}}C(x_,di);var jde={2:"touch",3:"pen",4:"mouse"};x_.prototype.h=function(){x_.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var M_="closure_listenable_"+(1e6*Math.random()|0),$de=0;function Hde(h,y,E,T,G){this.listener=h,this.proxy=null,this.src=y,this.type=E,this.capture=!!T,this.ha=G,this.key=++$de,this.da=this.fa=!1}function oC(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function aC(h){this.src=h,this.g={},this.h=0}function _x(h,y){var E=y.type;if(E in h.g){var ne,T=h.g[E],G=Array.prototype.indexOf.call(T,y,void 0);(ne=0<=G)&&Array.prototype.splice.call(T,G,1),ne&&(oC(y),0==h.g[E].length&&(delete h.g[E],h.h--))}}function yx(h,y,E,T){for(var G=0;G<h.length;++G){var ne=h[G];if(!ne.da&&ne.listener==y&&ne.capture==!!E&&ne.ha==T)return G}return-1}aC.prototype.add=function(h,y,E,T,G){var ne=h.toString();(h=this.g[ne])||(h=this.g[ne]=[],this.h++);var be=yx(h,y,T,G);return-1<be?(y=h[be],E||(y.fa=!1)):((y=new Hde(y,this.src,ne,!!T,G)).fa=E,h.push(y)),y};var vx="closure_lm_"+(1e6*Math.random()|0),Ex={};function fG(h,y,E,T,G){if(T&&T.once)return gG(h,y,E,T,G);if(Array.isArray(y)){for(var ne=0;ne<y.length;ne++)fG(h,y[ne],E,T,G);return null}return E=Tx(E),h&&h[M_]?h.K(y,E,l(T)?!!T.capture:!!T,G):pG(h,y,E,!1,T,G)}function pG(h,y,E,T,G,ne){if(!y)throw Error("Invalid event type");var be=l(G)?!!G.capture:!!G,sn=wx(h);if(sn||(h[vx]=sn=new aC(h)),(E=sn.add(y,E,T,be,ne)).proxy)return E;if(T=function zde(){const y=Gde;return function h(E){return y.call(h.src,h.listener,E)}}(),E.proxy=T,T.src=h,T.listener=E,h.addEventListener)Bde||(G=be),void 0===G&&(G=!1),h.addEventListener(y.toString(),T,G);else if(h.attachEvent)h.attachEvent(_G(y.toString()),T);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(T)}return E}function gG(h,y,E,T,G){if(Array.isArray(y)){for(var ne=0;ne<y.length;ne++)gG(h,y[ne],E,T,G);return null}return E=Tx(E),h&&h[M_]?h.L(y,E,l(T)?!!T.capture:!!T,G):pG(h,y,E,!0,T,G)}function mG(h,y,E,T,G){if(Array.isArray(y))for(var ne=0;ne<y.length;ne++)mG(h,y[ne],E,T,G);else T=l(T)?!!T.capture:!!T,E=Tx(E),h&&h[M_]?(h=h.i,(y=String(y).toString())in h.g&&-1<(E=yx(ne=h.g[y],E,T,G))&&(oC(ne[E]),Array.prototype.splice.call(ne,E,1),0==ne.length&&(delete h.g[y],h.h--))):h&&(h=wx(h))&&(y=h.g[y.toString()],h=-1,y&&(h=yx(y,E,T,G)),(E=-1<h?y[h]:null)&&Ix(E))}function Ix(h){if("number"!=typeof h&&h&&!h.da){var y=h.src;if(y&&y[M_])_x(y.i,h);else{var E=h.type,T=h.proxy;y.removeEventListener?y.removeEventListener(E,T,h.capture):y.detachEvent?y.detachEvent(_G(E),T):y.addListener&&y.removeListener&&y.removeListener(T),(E=wx(y))?(_x(E,h),0==E.h&&(E.src=null,y[vx]=null)):oC(h)}}}function _G(h){return h in Ex?Ex[h]:Ex[h]="on"+h}function Gde(h,y){if(h.da)h=!0;else{y=new x_(y,this);var E=h.listener,T=h.ha||h.src;h.fa&&Ix(h),h=E.call(T,y)}return h}function wx(h){return(h=h[vx])instanceof aC?h:null}var Cx="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tx(h){return"function"==typeof h?h:(h[Cx]||(h[Cx]=function(y){return h.handleEvent(y)}),h[Cx])}function hi(){Wu.call(this),this.i=new aC(this),this.M=this,this.F=null}function Pi(h,y){var E,T=h.F;if(T)for(E=[];T;T=T.F)E.push(T);if(h=h.M,T=y.type||y,"string"==typeof y)y=new di(y,h);else if(y instanceof di)y.target=y.target||h;else{var G=y;L(y=new di(T,h),G)}if(G=!0,E)for(var ne=E.length-1;0<=ne;ne--){var be=y.g=E[ne];G=uC(be,T,!0,y)&&G}if(G=uC(be=y.g=h,T,!0,y)&&G,G=uC(be,T,!1,y)&&G,E)for(ne=0;ne<E.length;ne++)G=uC(be=y.g=E[ne],T,!1,y)&&G}function uC(h,y,E,T){if(!(y=h.i.g[String(y)]))return!0;y=y.concat();for(var G=!0,ne=0;ne<y.length;++ne){var be=y[ne];if(be&&!be.da&&be.capture==E){var sn=be.listener,qr=be.ha||be.src;be.fa&&_x(h.i,be),G=!1!==sn.call(qr,T)&&G}}return G&&!T.defaultPrevented}function yG(h,y,E){if("function"==typeof h)E&&(h=_(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=_(h.handleEvent,h)}return 2147483647<Number(y)?-1:a.setTimeout(h,y||0)}function vG(h){h.g=yG(()=>{h.g=null,h.i&&(h.i=!1,vG(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}C(hi,Wu),hi.prototype[M_]=!0,hi.prototype.removeEventListener=function(h,y,E,T){mG(this,h,y,E,T)},hi.prototype.N=function(){if(hi.aa.N.call(this),this.i){var y,h=this.i;for(y in h.g){for(var E=h.g[y],T=0;T<E.length;T++)oC(E[T]);delete h.g[y],h.h--}}this.F=null},hi.prototype.K=function(h,y,E,T){return this.i.add(String(h),y,!1,E,T)},hi.prototype.L=function(h,y,E,T){return this.i.add(String(h),y,!0,E,T)};class qde extends Wu{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:vG(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function N_(h){Wu.call(this),this.h=h,this.g={}}C(N_,Wu);var EG=[];function IG(h){Be(h.g,function(y,E){this.g.hasOwnProperty(E)&&Ix(y)},h),h.g={}}N_.prototype.N=function(){N_.aa.N.call(this),IG(this)},N_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ax=a.JSON.stringify,Wde=a.JSON.parse,Kde=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function bx(){}function CG(){}bx.prototype.h=null;var O_={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dx(){di.call(this,"d")}function Sx(){di.call(this,"c")}C(Dx,di),C(Sx,di);var xl={},TG=null;function cC(){return TG=TG||new hi}function AG(h){di.call(this,xl.La,h)}function k_(h){const y=cC();Pi(y,new AG(y))}function bG(h,y){di.call(this,xl.STAT_EVENT,h),this.stat=y}function xi(h){const y=cC();Pi(y,new bG(y,h))}function DG(h,y){di.call(this,xl.Ma,h),this.size=y}function F_(h,y){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},y)}function V_(){this.g=!0}function Uf(h,y,E,T){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+function Xde(h,y){if(!h.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var T=E[h];if(!(2>T.length)){var G=T[1];if(Array.isArray(G)&&!(1>G.length)){var ne=G[0];if("noop"!=ne&&"stop"!=ne&&"close"!=ne)for(var be=1;be<G.length;be++)G[be]=""}}}return Ax(E)}catch{return y}}(h,E)+(T?" "+T:"")})}xl.La="serverreachability",C(AG,di),xl.STAT_EVENT="statevent",C(bG,di),xl.Ma="timingevent",C(DG,di),V_.prototype.xa=function(){this.g=!1},V_.prototype.info=function(){};var Rx,lC={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},SG={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function dC(){}function Ku(h,y,E,T){this.j=h,this.i=y,this.l=E,this.R=T||1,this.U=new N_(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new RG}function RG(){this.i=null,this.g="",this.h=!1}C(dC,bx),dC.prototype.g=function(){return new XMLHttpRequest},dC.prototype.i=function(){return{}},Rx=new dC;var PG={},Px={};function xx(h,y,E){h.L=1,h.v=gC(Ra(y)),h.m=E,h.P=!0,xG(h,null)}function xG(h,y){h.F=Date.now(),hC(h),h.A=Ra(h.v);var E=h.A,T=h.R;Array.isArray(T)||(T=[String(T)]),GG(E.i,"t",T),h.C=0,E=h.j.J,h.h=new RG,h.g=c3(h.j,E?y:null,!h.m),0<h.O&&(h.M=new qde(_(h.Y,h,h.g),h.O)),y=h.U,E=h.g,T=h.ca;var G="readystatechange";Array.isArray(G)||(G&&(EG[0]=G.toString()),G=EG);for(var ne=0;ne<G.length;ne++){var be=fG(E,G[ne],T||y.handleEvent,!1,y.h||y);if(!be)break;y.g[be.key]=be}y=h.H?P(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),k_(),function Qde(h,y,E,T,G,ne){h.info(function(){if(h.g)if(ne)for(var be="",sn=ne.split("&"),qr=0;qr<sn.length;qr++){var Lt=sn[qr].split("=");if(1<Lt.length){var fi=Lt[0];Lt=Lt[1];var pi=fi.split("_");be=2<=pi.length&&"type"==pi[1]?be+(fi+"=")+Lt+"&":be+(fi+"=redacted&")}}else be=null;else be=ne;return"XMLHTTP REQ ("+T+") [attempt "+G+"]: "+y+"\n"+E+"\n"+be})}(h.i,h.u,h.A,h.l,h.R,h.m)}function MG(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function Zde(h,y){var E=h.C,T=y.indexOf("\n",E);return-1==T?Px:(E=Number(y.substring(E,T)),isNaN(E)?PG:(T+=1)+E>y.length?Px:(y=y.slice(T,T+E),h.C=T+E,y))}function hC(h){h.S=Date.now()+h.I,NG(h,h.I)}function NG(h,y){if(null!=h.B)throw Error("WatchDog timer not null");h.B=F_(_(h.ba,h),y)}function Mx(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function L_(h){0==h.j.G||h.J||s3(h.j,h)}function Ml(h){Mx(h);var y=h.M;y&&"function"==typeof y.ma&&y.ma(),h.M=null,IG(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Nx(h,y){try{var E=h.j;if(0!=E.G&&(E.g==h||Ox(E.h,h)))if(!h.K&&Ox(E.h,h)&&3==E.G){try{var T=E.Da.g.parse(y)}catch{T=null}if(Array.isArray(T)&&3==T.length){var G=T;if(0==G[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;EC(E),yC(E)}Lx(E),xi(18)}}else E.za=G[1],0<E.za-E.T&&37500>G[2]&&E.F&&0==E.v&&!E.C&&(E.C=F_(_(E.Za,E),6e3));if(1>=FG(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Ol(E,11)}else if((h.K||E.g==h)&&EC(E),!F(y))for(G=E.Da.g.parse(y),y=0;y<G.length;y++){let Lt=G[y];if(E.T=Lt[0],Lt=Lt[1],2==E.G)if("c"==Lt[0]){E.K=Lt[1],E.ia=Lt[2];const fi=Lt[3];null!=fi&&(E.la=fi,E.j.info("VER="+E.la));const pi=Lt[4];null!=pi&&(E.Aa=pi,E.j.info("SVER="+E.Aa));const $f=Lt[5];null!=$f&&"number"==typeof $f&&0<$f&&(E.L=T=1.5*$f,E.j.info("backChannelRequestTimeoutMs_="+T)),T=E;const Gs=h.g;if(Gs){const wC=Gs.g?Gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wC){var ne=T.h;ne.g||-1==wC.indexOf("spdy")&&-1==wC.indexOf("quic")&&-1==wC.indexOf("h2")||(ne.j=ne.l,ne.g=new Set,ne.h&&(kx(ne,ne.h),ne.h=null))}if(T.D){const Bx=Gs.g?Gs.g.getResponseHeader("X-HTTP-Session-Id"):null;Bx&&(T.ya=Bx,Dn(T.I,T.D,Bx))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var be=h;if((T=E).qa=u3(T,T.J?T.ia:null,T.W),be.K){VG(T.h,be);var sn=be,qr=T.L;qr&&(sn.I=qr),sn.B&&(Mx(sn),hC(sn)),T.g=be}else r3(T);0<E.i.length&&vC(E)}else"stop"!=Lt[0]&&"close"!=Lt[0]||Ol(E,7);else 3==E.G&&("stop"==Lt[0]||"close"==Lt[0]?"stop"==Lt[0]?Ol(E,7):Vx(E):"noop"!=Lt[0]&&E.l&&E.l.ta(Lt),E.v=0)}k_()}catch{}}function OG(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kG(h){return!!h.h||!!h.g&&h.g.size>=h.j}function FG(h){return h.h?1:h.g?h.g.size:0}function Ox(h,y){return h.h?h.h==y:!!h.g&&h.g.has(y)}function kx(h,y){h.g?h.g.add(y):h.h=y}function VG(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}function LG(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let y=h.i;for(const E of h.g.values())y=y.concat(E.D);return y}return S(h.i)}function UG(h,y){if(h.forEach&&"function"==typeof h.forEach)h.forEach(y,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,y,void 0);else for(var E=function nhe(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var y=[];h=h.length;for(var E=0;E<h;E++)y.push(E);return y}y=[],E=0;for(const T in h)y[E++]=T;return y}}}(h),T=function the(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var y=[],E=h.length,T=0;T<E;T++)y.push(h[T]);return y}for(T in y=[],E=0,h)y[E++]=h[T];return y}(h),G=T.length,ne=0;ne<G;ne++)y.call(void 0,T[ne],E&&E[ne],h)}Ku.prototype.ca=function(h){h=h.target;const y=this.M;y&&3==Pa(h)?y.j():this.Y(h)},Ku.prototype.Y=function(h){try{if(h==this.g)e:{const pi=Pa(this.g);var y=this.g.Ba();if(this.g.Z(),!(3>pi)&&(3!=pi||this.g&&(this.h.h||this.g.oa()||XG(this.g)))){this.J||4!=pi||7==y||k_(),Mx(this);var E=this.g.Z();this.X=E;t:if(MG(this)){var T=XG(this.g);h="";var G=T.length,ne=4==Pa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ml(this),L_(this);var be="";break t}this.h.i=new a.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,h+=this.h.i.decode(T[y],{stream:!(ne&&y==G-1)});T.length=0,this.h.g+=h,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=200==E,function Yde(h,y,E,T,G,ne,be){h.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+G+"]: "+y+"\n"+E+"\n"+ne+" "+be})}(this.i,this.u,this.A,this.l,this.R,pi,E),this.o){if(this.T&&!this.K){t:{if(this.g){var sn,qr=this.g;if((sn=qr.g?qr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(sn)){var Lt=sn;break t}}Lt=null}if(!(E=Lt)){this.o=!1,this.s=3,xi(12),Ml(this),L_(this);break e}Uf(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nx(this,E)}if(this.P){let Gs;for(E=!0;!this.J&&this.C<be.length;){if(Gs=Zde(this,be),Gs==Px){4==pi&&(this.s=4,xi(14),E=!1),Uf(this.i,this.l,null,"[Incomplete Response]");break}if(Gs==PG){this.s=4,xi(15),Uf(this.i,this.l,be,"[Invalid Chunk]"),E=!1;break}Uf(this.i,this.l,Gs,null),Nx(this,Gs)}if(MG(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=pi||0!=be.length||this.h.h||(this.s=1,xi(16),E=!1),this.o=this.o&&E,E){if(0<be.length&&!this.W){this.W=!0;var fi=this.j;fi.g==this&&fi.ba&&!fi.M&&(fi.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),Ux(fi),fi.M=!0,xi(11))}}else Uf(this.i,this.l,be,"[Invalid Chunked Response]"),Ml(this),L_(this)}else Uf(this.i,this.l,be,null),Nx(this,be);4==pi&&Ml(this),this.o&&!this.J&&(4==pi?s3(this.j,this):(this.o=!1,hC(this)))}else(function mhe(h){const y={};h=(h.g&&2<=Pa(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let T=0;T<h.length;T++){if(F(h[T]))continue;var E=$(h[T]);const G=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const ne=y[G]||[];y[G]=ne,ne.push(E)}!function V(h,y){for(const E in h)y.call(void 0,h[E],E,h)}(y,function(T){return T.join(", ")})})(this.g),400==E&&0<be.indexOf("Unknown SID")?(this.s=3,xi(12)):(this.s=0,xi(13)),Ml(this),L_(this)}}}catch{}},Ku.prototype.cancel=function(){this.J=!0,Ml(this)},Ku.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function Jde(h,y){h.info(function(){return"TIMEOUT: "+y})}(this.i,this.A),2!=this.L&&(k_(),xi(17)),Ml(this),this.s=2,L_(this)):NG(this,this.S-h)},OG.prototype.cancel=function(){if(this.i=LG(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var BG=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nl(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Nl){this.h=h.h,fC(this,h.j),this.o=h.o,this.g=h.g,pC(this,h.s),this.l=h.l;var y=h.i,E=new j_;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),jG(this,E),this.m=h.m}else h&&(y=String(h).match(BG))?(this.h=!1,fC(this,y[1]||"",!0),this.o=U_(y[2]||""),this.g=U_(y[3]||"",!0),pC(this,y[4]),this.l=U_(y[5]||"",!0),jG(this,y[6]||"",!0),this.m=U_(y[7]||"")):(this.h=!1,this.i=new j_(null,this.h))}function Ra(h){return new Nl(h)}function fC(h,y,E){h.j=E?U_(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function pC(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function jG(h,y,E){y instanceof j_?(h.i=y,function che(h,y){y&&!h.j&&(Qu(h),h.i=null,h.g.forEach(function(E,T){var G=T.toLowerCase();T!=G&&(HG(this,T),GG(this,G,E))},h)),h.j=y}(h.i,h.h)):(E||(y=B_(y,ahe)),h.i=new j_(y,h.h))}function Dn(h,y,E){h.i.set(y,E)}function gC(h){return Dn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function U_(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function B_(h,y,E){return"string"==typeof h?(h=encodeURI(h).replace(y,ihe),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ihe(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}Nl.prototype.toString=function(){var h=[],y=this.j;y&&h.push(B_(y,$G,!0),":");var E=this.g;return(E||"file"==y)&&(h.push("//"),(y=this.o)&&h.push(B_(y,$G,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(B_(E,"/"==E.charAt(0)?ohe:she,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",B_(E,uhe)),h.join("")};var h,$G=/[#\/\?@]/g,she=/[#\?:]/g,ohe=/[#\?]/g,ahe=/[#\?@]/g,uhe=/#/g;function j_(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Qu(h){h.g||(h.g=new Map,h.h=0,h.i&&function rhe(h,y){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var T=h[E].indexOf("="),G=null;if(0<=T){var ne=h[E].substring(0,T);G=h[E].substring(T+1)}else ne=h[E];y(ne,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}(h.i,function(y,E){h.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}function HG(h,y){Qu(h),y=Bf(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function zG(h,y){return Qu(h),y=Bf(h,y),h.g.has(y)}function GG(h,y,E){HG(h,y),0<E.length&&(h.i=null,h.g.set(Bf(h,y),S(E)),h.h+=E.length)}function Bf(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Yu(h,y,E,T,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),T(E)}catch{}}function hhe(){this.g=new Kde}function fhe(h,y,E){const T=E||"";try{UG(h,function(G,ne){let be=G;l(G)&&(be=Ax(G)),y.push(T+ne+"="+encodeURIComponent(be))})}catch(G){throw y.push(T+"type="+encodeURIComponent("_badmap")),G}}function $_(h){this.l=h.Ub||null,this.j=h.eb||!1}function mC(h,y){hi.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function qG(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function H_(h){h.readyState=4,h.l=null,h.j=null,h.v=null,z_(h)}function z_(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function WG(h){let y="";return Be(h,function(E,T){y+=T,y+=":",y+=E,y+="\r\n"}),y}function Fx(h,y,E){e:{for(T in E){var T=!1;break e}T=!0}T||(E=WG(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):Dn(h,y,E))}function Yn(h){hi.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=j_.prototype).add=function(h,y){Qu(this),this.i=null,h=Bf(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(y),this.h+=1,this},n.forEach=function(h,y){Qu(this),this.g.forEach(function(E,T){E.forEach(function(G){h.call(y,G,T,this)},this)},this)},n.na=function(){Qu(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let T=0;T<y.length;T++){const G=h[T];for(let ne=0;ne<G.length;ne++)E.push(y[T])}return E},n.V=function(h){Qu(this);let y=[];if("string"==typeof h)zG(this,h)&&(y=y.concat(this.g.get(Bf(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)y=y.concat(h[E])}return y},n.set=function(h,y){return Qu(this),this.i=null,zG(this,h=Bf(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h&&0<(h=this.V(h)).length?String(h[0]):y},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var T=y[E];const ne=encodeURIComponent(String(T)),be=this.V(T);for(T=0;T<be.length;T++){var G=ne;""!==be[T]&&(G+="="+encodeURIComponent(String(be[T]))),h.push(G)}}return this.i=h.join("&")},C($_,bx),$_.prototype.g=function(){return new mC(this.l,this.j)},$_.prototype.i=(h={},function(){return h}),C(mC,hi),(n=mC.prototype).open=function(h,y){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,z_(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,H_(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,z_(this)),this.g&&(this.readyState=3,z_(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qG(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?H_(this):z_(this),3==this.readyState&&qG(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,H_(this))},n.Qa=function(h){this.g&&(this.response=h,H_(this))},n.ga=function(){this.g&&H_(this)},n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var E=y.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=y.next();return h.join("\r\n")},Object.defineProperty(mC.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),C(Yn,hi);var phe=/^https?$/i,ghe=["POST","PUT"];function KG(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,QG(h),_C(h)}function QG(h){h.A||(h.A=!0,Pi(h,"complete"),Pi(h,"error"))}function YG(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=Pa(h)||2!=h.Z()))if(h.u&&4==Pa(h))yG(h.Ea,0,h);else if(Pi(h,"readystatechange"),4==Pa(h)){h.h=!1;try{const be=h.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var T;if(T=0===be){var G=String(h.D).match(BG)[1]||null;!G&&a.self&&a.self.location&&(G=a.self.location.protocol.slice(0,-1)),T=!phe.test(G?G.toLowerCase():"")}E=T}if(E)Pi(h,"complete"),Pi(h,"success");else{h.m=6;try{var ne=2<Pa(h)?h.g.statusText:""}catch{ne=""}h.l=ne+" ["+h.Z()+"]",QG(h)}}finally{_C(h)}}}function _C(h,y){if(h.g){JG(h);const E=h.g,T=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Pi(h,"ready");try{E.onreadystatechange=T}catch{}}}function JG(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function Pa(h){return h.g?h.g.readyState:0}function XG(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function G_(h,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||y}function ZG(h){this.Aa=0,this.i=[],this.j=new V_,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=G_("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=G_("baseRetryDelayMs",5e3,h),this.cb=G_("retryDelaySeedMs",1e4,h),this.Wa=G_("forwardChannelMaxRetries",2,h),this.wa=G_("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new OG(h&&h.concurrentRequestLimit),this.Da=new hhe,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Vx(h){if(e3(h),3==h.G){var y=h.U++,E=Ra(h.I);if(Dn(E,"SID",h.K),Dn(E,"RID",y),Dn(E,"TYPE","terminate"),q_(h,E),(y=new Ku(h,h.j,y)).L=2,y.v=gC(Ra(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=y.v,E=!0),E||(y.g=c3(y.j,null),y.g.ea(y.v)),y.F=Date.now(),hC(y)}a3(h)}function yC(h){h.g&&(Ux(h),h.g.cancel(),h.g=null)}function e3(h){yC(h),h.u&&(a.clearTimeout(h.u),h.u=null),EC(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function vC(h){if(!kG(h.h)&&!h.s){h.s=!0;var y=h.Ga;R_||hG(),P_||(R_(),P_=!0),mx.add(y,h),h.B=0}}function t3(h,y){var E;E=y?y.l:h.U++;const T=Ra(h.I);Dn(T,"SID",h.K),Dn(T,"RID",E),Dn(T,"AID",h.T),q_(h,T),h.m&&h.o&&Fx(T,h.m,h.o),E=new Ku(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),y&&(h.i=y.D.concat(h.i)),y=n3(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),kx(h.h,E),xx(E,T,y)}function q_(h,y){h.H&&Be(h.H,function(E,T){Dn(y,T,E)}),h.l&&UG({},function(E,T){Dn(y,T,E)})}function n3(h,y,E){E=Math.min(h.i.length,E);var T=h.l?_(h.l.Na,h.l,h):null;e:{var G=h.i;let ne=-1;for(;;){const be=["count="+E];-1==ne?0<E?(ne=G[0].g,be.push("ofs="+ne)):ne=0:be.push("ofs="+ne);let sn=!0;for(let qr=0;qr<E;qr++){let Lt=G[qr].g;const fi=G[qr].map;if(Lt-=ne,0>Lt)ne=Math.max(0,G[qr].g-100),sn=!1;else try{fhe(fi,be,"req"+Lt+"_")}catch{T&&T(fi)}}if(sn){T=be.join("&");break e}}}return h=h.i.splice(0,E),y.D=h,T}function r3(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;R_||hG(),P_||(R_(),P_=!0),mx.add(y,h),h.v=0}}function Lx(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=F_(_(h.Fa,h),o3(h,h.v)),h.v++,0))}function Ux(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function i3(h){h.g=new Ku(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var y=Ra(h.qa);Dn(y,"RID","rpc"),Dn(y,"SID",h.K),Dn(y,"AID",h.T),Dn(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Dn(y,"TO",h.ja),Dn(y,"TYPE","xmlhttp"),q_(h,y),h.m&&h.o&&Fx(y,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=gC(Ra(y)),E.m=null,E.P=!0,xG(E,h)}function EC(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function s3(h,y){var E=null;if(h.g==y){EC(h),Ux(h),h.g=null;var T=2}else{if(!Ox(h.h,y))return;E=y.D,VG(h.h,y),T=1}if(0!=h.G)if(y.o)if(1==T){E=y.m?y.m.length:0,y=Date.now()-y.F;var G=h.B;Pi(T=cC(),new DG(T,E)),vC(h)}else r3(h);else if(3==(G=y.s)||0==G&&0<y.X||!(1==T&&function _he(h,y){return!(FG(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=y.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=F_(_(h.Ga,h,y),o3(h,h.B)),h.B++,0)))}(h,y)||2==T&&Lx(h)))switch(E&&0<E.length&&(y=h.h,y.i=y.i.concat(E)),G){case 1:Ol(h,5);break;case 4:Ol(h,10);break;case 3:Ol(h,6);break;default:Ol(h,2)}}function o3(h,y){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*y}function Ol(h,y){if(h.j.info("Error code "+y),2==y){var E=_(h.fb,h),T=h.Xa;const G=!T;T=new Nl(T||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||fC(T,"https"),gC(T),G?function lhe(h,y){const E=new V_;if(a.Image){const T=new Image;T.onload=I(Yu,E,"TestLoadImage: loaded",!0,y,T),T.onerror=I(Yu,E,"TestLoadImage: error",!1,y,T),T.onabort=I(Yu,E,"TestLoadImage: abort",!1,y,T),T.ontimeout=I(Yu,E,"TestLoadImage: timeout",!1,y,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=h}else y(!1)}(T.toString(),E):function dhe(h,y){new V_;const T=new AbortController,G=setTimeout(()=>{T.abort(),Yu(0,0,!1,y)},1e4);fetch(h,{signal:T.signal}).then(ne=>{clearTimeout(G),Yu(0,0,!!ne.ok,y)}).catch(()=>{clearTimeout(G),Yu(0,0,!1,y)})}(T.toString(),E)}else xi(2);h.G=0,h.l&&h.l.sa(y),a3(h),e3(h)}function a3(h){if(h.G=0,h.ka=[],h.l){const y=LG(h.h);(0!=y.length||0!=h.i.length)&&(R(h.ka,y),R(h.ka,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.ra()}}function u3(h,y,E){var T=E instanceof Nl?Ra(E):new Nl(E);if(""!=T.g)y&&(T.g=y+"."+T.g),pC(T,T.s);else{var G=a.location;T=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var ne=new Nl(null);T&&fC(ne,T),y&&(ne.g=y),G&&pC(ne,G),E&&(ne.l=E),T=ne}return y=h.ya,(E=h.D)&&y&&Dn(T,E,y),Dn(T,"VER",h.la),q_(h,T),T}function c3(h,y,E){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(y=new Yn(h.Ca&&!h.pa?new $_({eb:E}):h.pa)).Ha(h.J),y}function l3(){}function IC(){}function cs(h,y){hi.call(this),this.g=new ZG(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!F(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!F(y)&&(this.g.D=y,null!==(h=this.h)&&y in h&&y in(h=this.h)&&delete h[y]),this.j=new jf(this)}function d3(h){Dx.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const E in y){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,y=null!==y&&h in y?y[h]:void 0),this.data=y}else this.data=h}function h3(){Sx.call(this),this.status=1}function jf(h){this.g=h}(n=Yn.prototype).Ha=function(h){this.J=h},n.ea=function(h,y,E,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rx.g(),this.v=function wG(h){return h.h||(h.h=h.i())}(this.o?this.o:Rx),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ne){return void KG(this,ne)}if(h=E||"",E=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var G in T)E.set(G,T[G]);else{if("function"!=typeof T.keys||"function"!=typeof T.get)throw Error("Unknown input type for opt_headers: "+String(T));for(const ne of T.keys())E.set(ne,T.get(ne))}T=Array.from(E.keys()).find(ne=>"content-type"==ne.toLowerCase()),G=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ghe,y,void 0))||T||G||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,be]of E)this.g.setRequestHeader(ne,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{JG(this),this.u=!0,this.g.send(h),this.u=!1}catch(ne){KG(this,ne)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Pi(this,"complete"),Pi(this,"abort"),_C(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_C(this,!0)),Yn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?YG(this):this.bb())},n.bb=function(){YG(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Pa(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&0==y.indexOf(h)&&(y=y.substring(h.length)),Wde(y)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=ZG.prototype).la=8,n.G=1,n.connect=function(h,y,E,T){xi(0),this.W=h,this.H=y||{},E&&void 0!==T&&(this.H.OSID=E,this.H.OAID=T),this.F=this.X,this.I=u3(this,null,this.W),vC(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const G=new Ku(this,this.j,h);let ne=this.o;if(this.S&&(ne?(ne=P(ne),L(ne,this.S)):ne=this.S),null!==this.m||this.O||(G.H=ne,ne=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){var T=this.i[E];if(void 0===(T="__data__"in T.map&&"string"==typeof(T=T.map.__data__)?T.length:void 0))break;if(4096<(y+=T)){y=E;break e}if(4096===y||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=n3(this,G,y),Dn(E=Ra(this.I),"RID",h),Dn(E,"CVER",22),this.D&&Dn(E,"X-HTTP-Session-Id",this.D),q_(this,E),ne&&(this.O?y="headers="+encodeURIComponent(String(WG(ne)))+"&"+y:this.m&&Fx(E,this.m,ne)),kx(this.h,G),this.Ua&&Dn(E,"TYPE","init"),this.P?(Dn(E,"$req",y),Dn(E,"SID","null"),G.T=!0,xx(G,E,null)):xx(G,E,y),this.G=2}}else 3==this.G&&(h?t3(this,h):0==this.i.length||kG(this.h)||t3(this))},n.Fa=function(){if(this.u=null,i3(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=F_(_(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xi(10),yC(this),i3(this))},n.Za=function(){null!=this.C&&(this.C=null,yC(this),Lx(this),xi(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),xi(2)):(this.j.info("Failed to ping google.com"),xi(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=l3.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},IC.prototype.g=function(h,y){return new cs(h,y)},C(cs,hi),cs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cs.prototype.close=function(){Vx(this.g)},cs.prototype.o=function(h){var y=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=Ax(h),h=E);y.i.push(new class{constructor(h,y){this.g=h,this.map=y}}(y.Ya++,h)),3==y.G&&vC(y)},cs.prototype.N=function(){this.g.l=null,delete this.j,Vx(this.g),delete this.g,cs.aa.N.call(this)},C(d3,Dx),C(h3,Sx),C(jf,l3),jf.prototype.ua=function(){Pi(this.g,"a")},jf.prototype.ta=function(h){Pi(this.g,new d3(h))},jf.prototype.sa=function(h){Pi(this.g,new h3)},jf.prototype.ra=function(){Pi(this.g,"b")},IC.prototype.createWebChannel=IC.prototype.g,cs.prototype.send=cs.prototype.o,cs.prototype.open=cs.prototype.m,cs.prototype.close=cs.prototype.close,l2=pa.createWebChannelTransport=function(){return new IC},c2=pa.getStatEventTarget=function(){return cC()},u2=pa.Event=xl,M0=pa.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lC.NO_ERROR=0,lC.TIMEOUT=8,lC.HTTP_ERROR=6,qE=pa.ErrorCode=lC,SG.COMPLETE="complete",a2=pa.EventType=SG,CG.EventType=O_,O_.OPEN="a",O_.CLOSE="b",O_.ERROR="c",O_.MESSAGE="d",hi.prototype.listen=hi.prototype.K,tm=pa.WebChannel=CG,pa.FetchXmlHttpFactory=$_,Yn.prototype.listenOnce=Yn.prototype.L,Yn.prototype.getLastError=Yn.prototype.Ka,Yn.prototype.getLastErrorCode=Yn.prototype.Ba,Yn.prototype.getStatus=Yn.prototype.Z,Yn.prototype.getResponseJson=Yn.prototype.Oa,Yn.prototype.getResponseText=Yn.prototype.oa,Yn.prototype.send=Yn.prototype.ea,Yn.prototype.setWithCredentials=Yn.prototype.Ha,o2=pa.XhrIo=Yn}).apply(typeof GE<"u"?GE:typeof self<"u"?self:typeof window<"u"?window:{});const d2="@firebase/firestore";class Sr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sr.UNAUTHENTICATED=new Sr(null),Sr.GOOGLE_CREDENTIALS=new Sr("google-credentials-uid"),Sr.FIRST_PARTY=new Sr("first-party-uid"),Sr.MOCK_USER=new Sr("mock-user");let Ph="10.14.0";const du=new yo.Vy("@firebase/firestore");function xh(){return du.logLevel}function ce(n,...e){if(du.logLevel<=yo.$b.DEBUG){const t=e.map(N0);du.debug(`Firestore (${Ph}): ${n}`,...t)}}function sr(n,...e){if(du.logLevel<=yo.$b.ERROR){const t=e.map(N0);du.error(`Firestore (${Ph}): ${n}`,...t)}}function is(n,...e){if(du.logLevel<=yo.$b.WARN){const t=e.map(N0);du.warn(`Firestore (${Ph}): ${n}`,...t)}}function N0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Fe(n="Unexpected state"){const e=`FIRESTORE (${Ph}) INTERNAL ASSERTION FAILED: `+n;throw sr(e),new Error(e)}function Le(n,e){n||Fe()}function Te(n,e){return n}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Ht.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class h2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Sr.UNAUTHENTICATED))}shutdown(){}}class BZ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class jZ{constructor(e){this.t=e,this.currentUser=Sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;Le(void 0===this.o);let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let o=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=o;e.enqueueRetryable((0,Q.A)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le("string"==typeof r.accessToken),new h2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(null===e||"string"==typeof e),new Sr(e)}}class $Z{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Sr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class HZ{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new $Z(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Sr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class f2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zZ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Le(void 0===this.o);const r=s=>{null!=s.error&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Le("string"==typeof t.token),this.R=t.token,new f2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function GZ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class p2{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=GZ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function rt(n,e){return n<e?-1:n>e?1:0}function Mh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function g2(n){return n+"\0"}class Pn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class je{constructor(e){this.timestamp=e}static fromTimestamp(e){return new je(e)}static min(){return new je(new Pn(0,0))}static max(){return new je(new Pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nm{constructor(e,t,r){void 0===t?t=0:t>e.length&&Fe(),void 0===r?r=e.length-t:r>e.length-t&&Fe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===nm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bt extends nm{construct(e,t,r){return new bt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new bt(t)}static emptyPath(){return new bt([])}}const qZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends nm{construct(e,t,r){return new Tn(e,t,r)}static isValidIdentifier(e){return qZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Tn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ue(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ue(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ue(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ue(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tn(t)}static emptyPath(){return new Tn([])}}class Re{constructor(e){this.path=e}static fromPath(e){return new Re(bt.fromString(e))}static fromName(e){return new Re(bt.fromString(e).popFirst(5))}static empty(){return new Re(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new bt(e.slice()))}}class Nh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function O0(n){return n.fields.find(e=>2===e.kind)}function Kc(n){return n.fields.filter(e=>2!==e.kind)}Nh.UNKNOWN_ID=-1;class Qc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Oh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Oh(0,ss.min())}}function m2(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=je.fromTimestamp(1e9===r?new Pn(t+1,0):new Pn(t,r));return new ss(i,Re.empty(),e)}function _2(n){return new ss(n.readTime,n.key,-1)}class ss{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ss(je.min(),Re.empty(),-1)}static max(){return new ss(je.max(),Re.empty(),-1)}}function k0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Re.comparator(n.documentKey,e.documentKey),0!==t?t:rt(n.largestBatchId,e.largestBatchId))}const y2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function hu(n){return F0.apply(this,arguments)}function F0(){return(F0=(0,Q.A)(function*(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==y2)throw n;ce("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,r)=>{t(e)})}static reject(e){return new q((t,r)=>{r(e)})}static waitFor(e){return new q((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next(i=>i?q.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;t(e[l]).next(f=>{o[l]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new q((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class WE{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Rr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new rm(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=V0(r.target.error);this.V.reject(new rm(e,i))}}static open(e,t,r,i){try{return new WE(t,e.transaction(i,r))}catch(s){throw new rm(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ce("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new YZ(t)}}class vo{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===vo.S((0,Ht.ZQ)())&&sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ce("SimpleDb","Removing database:",e),Yc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ht.zW)())return!1;if(vo.v())return!0;const e=(0,Ht.ZQ)(),t=vo.S(e),r=0<t&&t<10,i=E2(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,Q.A)(function*(){return t.db||(ce("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new rm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new ue(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ue(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new rm(e,a))},s.onupgradeneeded=o=>{ce("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{ce("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Q.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=WE.open(s.db,e,o?"readonly":"readwrite",r),l=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),q.reject(f))).toPromise();return l.catch(()=>{}),yield u.m,l}catch(u){const l=u,f="FirebaseError"!==l.name&&a<3;if(ce("SimpleDb","Transaction failed with error:",l.message,"Retrying:",f),s.close(),!f)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function E2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class QZ{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Yc(this.B.delete())}}class rm extends ue{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fu(n){return"IndexedDbTransactionError"===n.name}class YZ{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ce("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Yc(r)}add(e){return ce("SimpleDb","ADD",this.store.name,e,e),Yc(this.store.add(e))}get(e){return Yc(this.store.get(e)).next(t=>(void 0===t&&(t=null),ce("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ce("SimpleDb","DELETE",this.store.name,e),Yc(this.store.delete(e))}count(){return ce("SimpleDb","COUNT",this.store.name),Yc(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new q((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new q((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){ce("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new q((r,i)=>{t.onerror=s=>{const o=V0(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new q((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new QZ(a),l=t(a.primaryKey,a.value,u);if(l instanceof q){const f=l.catch(m=>(u.done(),q.reject(m)));r.push(f)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>q.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Yc(n){return new q((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=V0(r.target.error);t(i)}})}let I2=!1;function V0(n){const e=vo.S((0,Ht.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return I2||(I2=!0,setTimeout(()=>{throw r},0)),r}}return n}class JZ{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;ce("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Q.A)(function*(){t.task=null;try{ce("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){fu(r)?ce("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield hu(r)}yield t.X(6e4)}))}}class XZ{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,Q.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return q.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ce("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(ce("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=_2(s);k0(o,r)>0&&(r=o)}),new ss(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let os=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function im(n){return null==n}function sm(n){return 0===n&&1/n==-1/0}function w2(n){return"number"==typeof n&&Number.isInteger(n)&&!sm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function si(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=C2(e)),e=ZZ(n.get(t),e);return C2(e)}function ZZ(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function C2(n){return n+"\x01\x01"}function Eo(n){const e=n.length;if(Le(e>=2),2===e)return Le("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),bt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Fe(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Fe()}s=o+2}return new bt(r)}const T2=["userId","batchId"];function KE(n,e){return[n,si(e)]}function A2(n,e,t){return[n,si(e),t]}const eee={},tee=["prefixPath","collectionGroup","readTime","documentId"],nee=["prefixPath","collectionGroup","documentId"],ree=["collectionGroup","readTime","prefixPath","documentId"],iee=["canonicalId","targetId"],see=["targetId","path"],oee=["path","targetId"],aee=["collectionId","parent"],uee=["indexId","uid"],cee=["uid","sequenceNumber"],lee=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dee=["indexId","uid","orderedDocumentKey"],hee=["userId","collectionPath","documentId"],fee=["userId","collectionPath","largestBatchId"],pee=["userId","collectionGroup","largestBatchId"],b2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gee=[...b2,"documentOverlays"],D2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],S2=D2,L0=[...S2,"indexConfiguration","indexState","indexEntries"],mee=L0,_ee=[...L0,"globals"];class U0 extends v2{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Ir(n,e){const t=Te(n);return vo.F(t._e,e)}function R2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function x2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mn{constructor(e,t){this.comparator=e,this.root=t||$r.EMPTY}insert(e,t){return new mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new QE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new QE(this.root,e,this.comparator,!1)}getReverseIterator(){return new QE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new QE(this.root,e,this.comparator,!0)}}class QE{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $r{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??$r.RED,this.left=i??$r.EMPTY,this.right=s??$r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new $r(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return $r.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Fe();const e=this.left.check();if(e!==this.right.check())throw Fe();return e+(this.isRed()?0:1)}}$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1,$r.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe()}get value(){throw Fe()}get color(){throw Fe()}get left(){throw Fe()}get right(){throw Fe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new $r(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xt{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new M2(this.data.getIterator())}getIteratorFrom(e){return new M2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xt(this.comparator);return t.data=e,t}}class M2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function kh(n){return n.hasNext()?n.getNext():void 0}class ji{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new ji([])}unionWith(e){let t=new Xt(Tn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ji(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class N2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new N2("Invalid base64 string: "+s):s}}(e);return new Kn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kn.EMPTY_BYTE_STRING=new Kn("");const vee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ga(n){if(Le(!!n),"string"==typeof n){let e=0;const t=vee.exec(n);if(Le(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xn(n.seconds),nanos:xn(n.nanos)}}function xn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ma(n){return"string"==typeof n?Kn.fromBase64String(n):Kn.fromUint8Array(n)}function YE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function JE(n){const e=n.mapValue.fields.__previous_value__;return YE(e)?JE(e):e}function om(n){const e=ga(n.mapValue.fields.__local_write_time__.timestampValue);return new Pn(e.seconds,e.nanos)}class Eee{constructor(e,t,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class gu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gu&&e.projectId===this.projectId&&e.database===this.database}}const mu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},XE={nullValue:"NULL_VALUE"};function _u(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?YE(n)?4:L2(n)?9007199254740991:tI(n)?10:11:Fe()}function Io(n,e){if(n===e)return!0;const t=_u(n);if(t!==_u(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return om(n).isEqual(om(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ga(i.timestampValue),a=ga(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,ma(n.bytesValue).isEqual(ma(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return xn(i.geoPointValue.latitude)===xn(s.geoPointValue.latitude)&&xn(i.geoPointValue.longitude)===xn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return xn(i.integerValue)===xn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=xn(i.doubleValue),a=xn(s.doubleValue);return o===a?sm(o)===sm(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Mh(n.arrayValue.values||[],e.arrayValue.values||[],Io);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(R2(o)!==R2(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Io(o[u],a[u])))return!1;return!0}(n,e);default:return Fe()}var s}function am(n,e){return void 0!==(n.values||[]).find(t=>Io(t,e))}function yu(n,e){if(n===e)return 0;const t=_u(n),r=_u(e);if(t!==r)return rt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return rt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=xn(s.integerValue||s.doubleValue),u=xn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return O2(n.timestampValue,e.timestampValue);case 4:return O2(om(n),om(e));case 5:return rt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=ma(s),u=ma(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const f=rt(a[l],u[l]);if(0!==f)return f}return rt(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=rt(xn(s.latitude),xn(o.latitude));return 0!==a?a:rt(xn(s.longitude),xn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return k2(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,f;const I=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,C=null===(u=(o.fields||{}).value)||void 0===u?void 0:u.arrayValue,S=rt((null===(l=I?.values)||void 0===l?void 0:l.length)||0,(null===(f=C?.values)||void 0===f?void 0:f.length)||0);return 0!==S?S:k2(I,C)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===mu.mapValue&&o===mu.mapValue)return 0;if(s===mu.mapValue)return 1;if(o===mu.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const _=rt(u[m],f[m]);if(0!==_)return _;const I=yu(a[u[m]],l[f[m]]);if(0!==I)return I}return rt(u.length,f.length)}(n.mapValue,e.mapValue);default:throw Fe()}}function O2(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return rt(n,e);const t=ga(n),r=ga(e),i=rt(t.seconds,r.seconds);return 0!==i?i:rt(t.nanos,r.nanos)}function k2(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=yu(t[i],r[i]);if(s)return s}return rt(t.length,r.length)}function Fh(n){return B0(n)}function B0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ga(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ma(n.bytesValue).toBase64():"referenceValue"in n?Re.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=B0(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${B0(t.fields[o])}`;return i+"}"}(n.mapValue):Fe()}function Jc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function j0(n){return!!n&&"integerValue"in n}function um(n){return!!n&&"arrayValue"in n}function F2(n){return!!n&&"nullValue"in n}function V2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function eI(n){return!!n&&"mapValue"in n}function tI(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function cm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function L2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const U2={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Iee(n){return"nullValue"in n?XE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Jc(gu.empty(),Re.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?tI(n)?U2:{mapValue:{}}:Fe()}function wee(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Jc(gu.empty(),Re.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?U2:"mapValue"in n?tI(n)?{mapValue:{}}:mu:Fe()}function B2(n,e){const t=yu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function j2(n,e){const t=yu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Hr{constructor(e){this.value=e}static empty(){return new Hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!eI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cm(t)}setAll(e){let t=Tn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=cm(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());eI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Io(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];eI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pu(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Hr(cm(this.value))}}function $2(n){const e=[];return pu(n.fields,(t,r)=>{const i=new Tn([t]);if(eI(r)){const s=$2(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ji(e)}class An{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new An(e,0,je.min(),je.min(),je.min(),Hr.empty(),0)}static newFoundDocument(e,t,r,i){return new An(e,1,t,je.min(),r,i,0)}static newNoDocument(e,t){return new An(e,2,t,je.min(),je.min(),Hr.empty(),0)}static newUnknownDocument(e,t){return new An(e,3,t,je.min(),je.min(),Hr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vu{constructor(e,t){this.position=e,this.inclusive=t}}function H2(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Re.comparator(Re.fromName(o.referenceValue),t.key):yu(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function z2(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Io(n.position[t],e.position[t]))return!1;return!0}class lm{constructor(e,t="asc"){this.field=e,this.dir=t}}function Cee(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class G2{}class Dt extends G2{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Tee(e,t,r):"array-contains"===t?new Dee(e,r):"in"===t?new J2(e,r):"not-in"===t?new See(e,r):"array-contains-any"===t?new Ree(e,r):new Dt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Aee(e,r):new bee(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(yu(t,this.value)):null!==t&&_u(this.value)===_u(t)&&this.matchesComparison(yu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yt extends G2{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Yt(e,t)}matches(e){return Vh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Vh(n){return"and"===n.op}function $0(n){return"or"===n.op}function H0(n){return q2(n)&&Vh(n)}function q2(n){for(const e of n.filters)if(e instanceof Yt)return!1;return!0}function z0(n){if(n instanceof Dt)return n.field.canonicalString()+n.op.toString()+Fh(n.value);if(H0(n))return n.filters.map(e=>z0(e)).join(",");{const e=n.filters.map(t=>z0(t)).join(",");return`${n.op}(${e})`}}function W2(n,e){return n instanceof Dt?(r=n,(i=e)instanceof Dt&&r.op===i.op&&r.field.isEqual(i.field)&&Io(r.value,i.value)):n instanceof Yt?function(r,i){return i instanceof Yt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&W2(o,i.filters[a]),!0)}(n,e):void Fe();var r,i}function K2(n,e){const t=n.filters.concat(e);return Yt.create(t,n.op)}function Q2(n){return n instanceof Dt?`${(t=n).field.canonicalString()} ${t.op} ${Fh(t.value)}`:n instanceof Yt?function(t){return t.op.toString()+" {"+t.getFilters().map(Q2).join(" ,")+"}"}(n):"Filter";var t}class Tee extends Dt{constructor(e,t,r){super(e,t,r),this.key=Re.fromName(r.referenceValue)}matches(e){const t=Re.comparator(e.key,this.key);return this.matchesComparison(t)}}class Aee extends Dt{constructor(e,t){super(e,"in",t),this.keys=Y2(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bee extends Dt{constructor(e,t){super(e,"not-in",t),this.keys=Y2(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Y2(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Re.fromName(r.referenceValue))}class Dee extends Dt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return um(t)&&am(t.arrayValue,this.value)}}class J2 extends Dt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&am(this.value.arrayValue,t)}}class See extends Dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(am(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!am(this.value.arrayValue,t)}}class Ree extends Dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!um(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>am(this.value.arrayValue,r))}}class Pee{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function G0(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Pee(n,e,t,r,i,s,o)}function Xc(n){const e=Te(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>z0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),im(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fh(r)).join(",")),e.ue=t}return e.ue}function dm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Cee(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!W2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!z2(n.startAt,e.startAt)&&z2(n.endAt,e.endAt)}function nI(n){return Re.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function rI(n,e){return n.filters.filter(t=>t instanceof Dt&&t.field.isEqual(e))}function X2(n,e,t){let r=XE,i=!0;for(const s of rI(n,e)){let o=XE,a=!0;switch(s.op){case"<":case"<=":o=Iee(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=XE}B2({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];B2({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function Z2(n,e,t){let r=mu,i=!0;for(const s of rI(n,e)){let o=mu,a=!0;switch(s.op){case">=":case">":o=wee(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=mu}j2({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];j2({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class _a{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function eU(n,e,t,r,i,s,o,a){return new _a(n,e,t,r,i,s,o,a)}function Lh(n){return new _a(n)}function tU(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function q0(n){return null!==n.collectionGroup}function Uh(n){const e=Te(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xt(Tn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new lm(s,r))}),t.has(Tn.keyField().canonicalString())||e.ce.push(new lm(Tn.keyField(),r))}return e.ce}function oi(n){const e=Te(n);return e.le||(e.le=function rU(n,e){if("F"===n.limitType)return G0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new lm(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new vu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new vu(n.startAt.position,n.startAt.inclusive):null;return G0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Uh(n))),e.le}function W0(n,e){const t=n.filters.concat([e]);return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function iI(n,e,t){return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hm(n,e){return dm(oi(n),oi(e))&&n.limitType===e.limitType}function iU(n){return`${Xc(oi(n))}|lt:${n.limitType}`}function Bh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Q2(i)).join(", ")}]`),im(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Fh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Fh(i)).join(",")),`Target(${r})`}(oi(n))}; limitType=${n.limitType})`}function fm(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Re.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Uh(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const l=H2(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Uh(r),i)||r.endAt&&!function(o,a,u){const l=H2(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Uh(r),i)));var r,i}function sU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oU(n){return(e,t)=>{let r=!1;for(const i of Uh(n)){const s=xee(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function xee(n,e,t){const r=n.field.isKeyField()?Re.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return null!==u&&null!==l?yu(u,l):Fe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Fe()}}class ya{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pu(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return x2(this.inner)}size(){return this.innerSize}}const Mee=new mn(Re.comparator);function $i(){return Mee}const aU=new mn(Re.comparator);function pm(...n){let e=aU;for(const t of n)e=e.insert(t.key,t);return e}function uU(n){let e=aU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function wo(){return gm()}function cU(){return gm()}function gm(){return new ya(n=>n.toString(),(n,e)=>n.isEqual(e))}const Nee=new mn(Re.comparator),Oee=new Xt(Re.comparator);function lt(...n){let e=Oee;for(const t of n)e=e.add(t);return e}const kee=new Xt(rt);function K0(){return kee}function Q0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sm(e)?"-0":e}}function lU(n){return{integerValue:""+n}}function dU(n,e){return w2(e)?lU(e):Q0(n,e)}class sI{constructor(){this._=void 0}}function Fee(n,e,t){return n instanceof jh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&YE(s)&&(s=JE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Zc?fU(n,e):n instanceof el?pU(n,e):function(i,s){const o=hU(i,s),a=gU(o)+gU(i.Pe);return j0(o)&&j0(i.Pe)?lU(a):Q0(i.serializer,a)}(n,e)}function Vee(n,e,t){return n instanceof Zc?fU(n,e):n instanceof el?pU(n,e):t}function hU(n,e){return n instanceof $h?j0(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class jh extends sI{}class Zc extends sI{constructor(e){super(),this.elements=e}}function fU(n,e){const t=mU(e);for(const r of n.elements)t.some(i=>Io(i,r))||t.push(r);return{arrayValue:{values:t}}}class el extends sI{constructor(e){super(),this.elements=e}}function pU(n,e){let t=mU(e);for(const r of n.elements)t=t.filter(i=>!Io(i,r));return{arrayValue:{values:t}}}class $h extends sI{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function gU(n){return xn(n.integerValue||n.doubleValue)}function mU(n){return um(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class mm{constructor(e,t){this.field=e,this.transform=t}}class Uee{constructor(e,t){this.version=e,this.transformResults=t}}class Mn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class aI{}function _U(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new zh(n.key,Mn.none()):new Hh(n.key,n.data,Mn.none());{const t=n.data,r=Hr.empty();let i=new Xt(Tn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new va(n.key,r,new ji(i.toArray()),Mn.none())}}function Bee(n,e,t){n instanceof Hh?function(i,s,o){const a=i.value.clone(),u=EU(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof va?function(i,s,o){if(!oI(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=EU(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(vU(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _m(n,e,t,r){return n instanceof Hh?function(s,o,a,u){if(!oI(s.precondition,o))return a;const l=s.value.clone(),f=IU(s.fieldTransforms,u,o);return l.setAll(f),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof va?function(s,o,a,u){if(!oI(s.precondition,o))return a;const l=IU(s.fieldTransforms,u,o),f=o.data;return f.setAll(vU(s)),f.setAll(l),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,oI(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function jee(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=hU(r.transform,i||null);null!=s&&(null===t&&(t=Hr.empty()),t.set(r.field,s))}return t||null}function yU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Mh(r,i,(s,o)=>function Lee(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Zc&&i instanceof Zc||r instanceof el&&i instanceof el?Mh(r.elements,i.elements,Io):r instanceof $h&&i instanceof $h?Io(r.Pe,i.Pe):r instanceof jh&&i instanceof jh);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Hh extends aI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class va extends aI{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function vU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function EU(n,e,t){const r=new Map;Le(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Vee(o,a,t[i]))}return r}function IU(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Fee(s,o,e))}return r}class zh extends aI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Y0 extends aI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class J0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Bee(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_m(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_m(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=cU();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=_U(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(je.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),lt())}isEqual(e){return this.batchId===e.batchId&&Mh(this.mutations,e.mutations,(t,r)=>yU(t,r))&&Mh(this.baseMutations,e.baseMutations,(t,r)=>yU(t,r))}}class X0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Le(e.mutations.length===r.length);let i=Nee;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new X0(e,t,r,i)}}class Z0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $ee{constructor(e,t){this.count=e,this.unchangedNames=t}}var gr,Mt;function CU(n){switch(n){default:return Fe();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function TU(n){if(void 0===n)return sr("GRPC error has no .code"),J.UNKNOWN;switch(n){case gr.OK:return J.OK;case gr.CANCELLED:return J.CANCELLED;case gr.UNKNOWN:return J.UNKNOWN;case gr.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case gr.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case gr.INTERNAL:return J.INTERNAL;case gr.UNAVAILABLE:return J.UNAVAILABLE;case gr.UNAUTHENTICATED:return J.UNAUTHENTICATED;case gr.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case gr.NOT_FOUND:return J.NOT_FOUND;case gr.ALREADY_EXISTS:return J.ALREADY_EXISTS;case gr.PERMISSION_DENIED:return J.PERMISSION_DENIED;case gr.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case gr.ABORTED:return J.ABORTED;case gr.OUT_OF_RANGE:return J.OUT_OF_RANGE;case gr.UNIMPLEMENTED:return J.UNIMPLEMENTED;case gr.DATA_LOSS:return J.DATA_LOSS;default:return Fe()}}(Mt=gr||(gr={}))[Mt.OK=0]="OK",Mt[Mt.CANCELLED=1]="CANCELLED",Mt[Mt.UNKNOWN=2]="UNKNOWN",Mt[Mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mt[Mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mt[Mt.NOT_FOUND=5]="NOT_FOUND",Mt[Mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mt[Mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mt[Mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mt[Mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mt[Mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mt[Mt.ABORTED=10]="ABORTED",Mt[Mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mt[Mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mt[Mt.INTERNAL=13]="INTERNAL",Mt[Mt.UNAVAILABLE=14]="UNAVAILABLE",Mt[Mt.DATA_LOSS=15]="DATA_LOSS";function AU(){return new TextEncoder}const Hee=new Wc([4294967295,4294967295],0);function bU(n){const e=AU().encode(n),t=new s2;return t.update(e),new Uint8Array(t.digest())}function DU(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Wc([t,r],0),new Wc([i,s],0)]}class eD{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ym(`Invalid padding: ${t}`);if(r<0)throw new ym(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new ym(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new ym(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Wc.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Wc.fromNumber(r)));return 1===i.compare(Hee)&&(i=new Wc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=bU(e),[r,i]=DU(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new eD(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=bU(e),[r,i]=DU(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class ym extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vm{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Em.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new vm(je.min(),i,new mn(rt),$i(),lt())}}class Em{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Em(r,t,lt(),lt(),lt())}}class cI{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class SU{constructor(e,t){this.targetId=e,this.me=t}}class RU{constructor(e,t,r=Kn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class PU{constructor(){this.fe=0,this.ge=MU(),this.pe=Kn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=lt(),t=lt(),r=lt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Fe()}}),new Em(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=MU()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class zee{constructor(e){this.Le=e,this.Be=new Map,this.ke=$i(),this.qe=xU(),this.Qe=new mn(rt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Fe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(nI(s))if(0===r){const o=new Re(s.path);this.Ue(t,o,An.newNoDocument(o,je.min()))}else Le(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=ma(r).toUint8Array()}catch(u){if(u instanceof N2)return is("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new eD(o,i,s)}catch(u){return is(u instanceof ym?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&nI(a.target)){const u=new Re(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,An.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=lt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new vm(e,t,this.Qe,this.ke,r);return this.ke=$i(),this.qe=xU(),this.Qe=new mn(rt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new PU,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Xt(rt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ce("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new PU),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function xU(){return new mn(Re.comparator)}function MU(){return new mn(Re.comparator)}const Gee={asc:"ASCENDING",desc:"DESCENDING"},qee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wee={and:"AND",or:"OR"};class Kee{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tD(n,e){return n.useProto3Json||im(e)?e:{value:e}}function Gh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NU(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Qee(n,e){return Gh(n,e.toTimestamp())}function or(n){return Le(!!n),je.fromTimestamp(function(t){const r=ga(t);return new Pn(r.seconds,r.nanos)}(n))}function nD(n,e){return rD(n,e).canonicalString()}function rD(n,e){const t=(i=n,new bt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function OU(n){const e=bt.fromString(n);return Le(GU(e)),e}function Im(n,e){return nD(n.databaseId,e.path)}function Co(n,e){const t=OU(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Re(VU(t))}function kU(n,e){return nD(n.databaseId,e)}function FU(n){const e=OU(n);return 4===e.length?bt.emptyPath():VU(e)}function iD(n){return new bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VU(n){return Le(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function LU(n,e,t){return{name:Im(n,e),fields:t.value.mapValue.fields}}function UU(n,e,t){const r=Co(n,e.name),i=or(e.updateTime),s=e.createTime?or(e.createTime):je.min(),o=new Hr({mapValue:{fields:e.fields}}),a=An.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function wm(n,e){let t;if(e instanceof Hh)t={update:LU(n,e.key,e.value)};else if(e instanceof zh)t={delete:Im(n,e.key)};else if(e instanceof va)t={update:LU(n,e.key,e.data),updateMask:rte(e.fieldMask)};else{if(!(e instanceof Y0))return Fe();t={verify:Im(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof jh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Zc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof el)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $h)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Fe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Qee(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Fe()),t;var s}function sD(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Mn.updateTime(or(s.updateTime)):void 0!==s.exists?Mn.exists(s.exists):Mn.none():Mn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Le("REQUEST_TIME"===a.setToServerValue),u=new jh):"appendMissingElements"in a?u=new Zc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new el(a.removeAllFromArray.values||[]):"increment"in a?u=new $h(o,a.increment):Fe();const l=Tn.fromServerFormat(a.fieldPath);return new mm(l,u)}(n,i)):[];var s;if(e.update){const i=Co(n,e.update.name),s=new Hr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new ji((e.updateMask.fieldPaths||[]).map(f=>Tn.fromServerFormat(f)));return new va(i,s,o,t,r)}return new Hh(i,s,t,r)}if(e.delete){const i=Co(n,e.delete);return new zh(i,t)}if(e.verify){const i=Co(n,e.verify);return new Y0(i,t)}return Fe()}function BU(n,e){return{documents:[kU(n,e.path)]}}function lI(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=kU(n,i);const s=function(l){if(0!==l.length)return zU(Yt.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(l){if(0!==l.length)return l.map(f=>{return{field:Eu((_=f).field),direction:ete(_.dir)};var _})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=tD(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i};var l}function $U(n){let e=FU(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Le(1===r);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){const _=HU(m);return _ instanceof Yt&&H0(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(_=>{return new lm(qh((C=_).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let a=null;t.limit&&(a=function(m){let _;return _="object"==typeof m?m.value:m,im(_)?null:_}(t.limit));let u=null;var m;t.startAt&&(u=new vu((m=t.startAt).values||[],!!m.before));let l=null;return t.endAt&&(l=function(m){return new vu(m.values||[],!m.before)}(t.endAt)),eU(e,i,o,s,a,"F",u,l)}function HU(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=qh(t.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=qh(t.unaryFilter.field);return Dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=qh(t.unaryFilter.field);return Dt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=qh(t.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Fe()}}(n):void 0!==n.fieldFilter?Dt.create(qh((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fe()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Yt.create(t.compositeFilter.filters.map(r=>HU(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Fe()}}(t.compositeFilter.op))}(n):Fe();var t}function ete(n){return Gee[n]}function tte(n){return qee[n]}function nte(n){return Wee[n]}function Eu(n){return{fieldPath:n.canonicalString()}}function qh(n){return Tn.fromServerFormat(n.fieldPath)}function zU(n){return n instanceof Dt?function(t){if("=="===t.op){if(V2(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NAN"}};if(F2(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(V2(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NOT_NAN"}};if(F2(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eu(t.field),op:tte(t.op),value:t.value}}}(n):n instanceof Yt?function(t){const r=t.getFilters().map(i=>zU(i));return 1===r.length?r[0]:{compositeFilter:{op:nte(t.op),filters:r}}}(n):Fe()}function rte(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function GU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ea{constructor(e,t,r,i,s=je.min(),o=je.min(),a=Kn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ea(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ea(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qU{constructor(e){this.ct=e}}function WU(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:dI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Im(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Gh(s,o.version.toTimestamp()),createTime:Gh(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:tl(e.version)};else{if(!e.isUnknownDocument())return Fe();r.unknownDocument={path:t.path.toArray(),version:tl(e.version)}}var s,o;return r}function dI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function tl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function nl(n){const e=new Pn(n.seconds,n.nanoseconds);return je.fromTimestamp(e)}function rl(n,e){const t=(e.baseMutations||[]).map(s=>sD(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>sD(n.ct,s)),i=Pn.fromMillis(e.localWriteTimeMs);return new J0(e.batchId,i,t,r)}function Cm(n){const e=nl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?nl(n.lastLimboFreeSnapshotVersion):je.min();let r;return r=void 0!==n.query.documents?(Le(1===(s=n.query).documents.length),oi(Lh(FU(s.documents[0])))):function(s){return oi($U(s))}(n.query),new Ea(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Kn.fromBase64String(n.resumeToken));var s}function KU(n,e){const t=tl(e.snapshotVersion),r=tl(e.lastLimboFreeSnapshotVersion);let i;i=nI(e.target)?BU(n.ct,e.target):lI(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xc(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function oD(n){const e=$U({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?iI(e,e.limit,"L"):e}function aD(n,e){return new Z0(e.largestBatchId,sD(n.ct,e.overlayMutation))}function QU(n,e){const t=e.path.lastSegment();return[n,si(e.path.popLast()),t]}function YU(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:tl(r.readTime),documentKey:si(r.documentKey.path),largestBatchId:r.largestBatchId}}class ste{getBundleMetadata(e,t){return JU(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:nl(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return JU(e).put({bundleId:(i=t).id,createTime:tl(or(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return XU(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:oD(s.bundledQuery),readTime:nl(s.readTime)};var s})}saveNamedQuery(e,t){return XU(e).put({name:(i=t).name,readTime:tl(or(i.readTime)),bundledQuery:i.bundledQuery});var i}}function JU(n){return Ir(n,"bundles")}function XU(n){return Ir(n,"namedQueries")}class hI{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new hI(e,t.uid||"")}getOverlay(e,t){return Tm(e).get(QU(this.userId,t)).next(r=>r?aD(this.serializer,r):null)}getOverlays(e,t){const r=wo();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new Z0(t,o);i.push(this.ht(e,a))}),q.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(si(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Tm(e).j("collectionPathOverlayIndex",a))}),q.waitFor(s)}getOverlaysForCollection(e,t,r){const i=wo(),s=si(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Tm(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const l=aD(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=wo();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Tm(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,f)=>{const m=aD(this.serializer,l);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,t){return Tm(e).put(function(i,s,o){const[a,u,l]=QU(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:wm(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Tm(n){return Ir(n,"documentOverlays")}class ote{Pt(e){return Ir(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?Kn.fromUint8Array(r):Kn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class il{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(xn(e.integerValue));else if("doubleValue"in e){const r=xn(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),sm(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=ga(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ma(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?L2(e)?this.dt(t,Number.MAX_SAFE_INTEGER):tI(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Fe()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(xn(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Re.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function ate(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function ZU(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=ate(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}il.vt=new il;class ute{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=ZU(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=ZU(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class cte{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class lte{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Am{constructor(){this.jt=new ute,this.Ht=new cte(this.jt),this.Jt=new lte(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class sl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new sl(this.indexId,this.documentKey,this.arrayValue,r)}}function Iu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=eB(n.arrayValue,e.arrayValue),0!==t?t:(t=eB(n.directionalValue,e.directionalValue),0!==t?t:Re.comparator(n.documentKey,e.documentKey)))}function eB(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class tB{constructor(e){this.Xt=new Xt((t,r)=>Tn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Le(e.collectionGroup===this.collectionId),this.nn)return!1;const t=O0(e);if(void 0!==t&&!this.sn(t))return!1;const r=Kc(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new Xt(Tn.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Qc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Qc(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Qc(r.field,"asc"===r.dir?0:1)));return new Nh(Nh.UNKNOWN_ID,this.collectionId,t,Oh.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function nB(n){var e,t;if(Le(n instanceof Dt||n instanceof Yt),n instanceof Dt){if(n instanceof J2){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Dt.create(n.field,"==",s)))||[];return Yt.create(i,"or")}return n}const r=n.filters.map(i=>nB(i));return Yt.create(r,n.op)}function dte(n){if(0===n.getFilters().length)return[];const e=lD(nB(n));return Le(rB(e)),uD(e)||cD(e)?[e]:e.getFilters()}function uD(n){return n instanceof Dt}function cD(n){return n instanceof Yt&&H0(n)}function rB(n){return uD(n)||cD(n)||function(t){if(t instanceof Yt&&$0(t)){for(const r of t.getFilters())if(!uD(r)&&!cD(r))return!1;return!0}return!1}(n)}function lD(n){if(Le(n instanceof Dt||n instanceof Yt),n instanceof Dt)return n;if(1===n.filters.length)return lD(n.filters[0]);const e=n.filters.map(r=>lD(r));let t=Yt.create(e,n.op);return t=fI(t),rB(t)?t:(Le(t instanceof Yt),Le(Vh(t)),Le(t.filters.length>1),t.filters.reduce((r,i)=>dD(r,i)))}function dD(n,e){let t;return Le(n instanceof Dt||n instanceof Yt),Le(e instanceof Dt||e instanceof Yt),t=n instanceof Dt?e instanceof Dt?Yt.create([n,e],"and"):iB(n,e):e instanceof Dt?iB(e,n):function(i,s){if(Le(i.filters.length>0&&s.filters.length>0),Vh(i)&&Vh(s))return K2(i,s.getFilters());const o=$0(i)?i:s,a=$0(i)?s:i,u=o.filters.map(l=>dD(l,a));return Yt.create(u,"or")}(n,e),fI(t)}function iB(n,e){if(Vh(e))return K2(e,n.getFilters());{const t=e.filters.map(r=>dD(n,r));return Yt.create(t,"or")}}function fI(n){if(Le(n instanceof Dt||n instanceof Yt),n instanceof Dt)return n;const e=n.getFilters();if(1===e.length)return fI(e[0]);if(q2(n))return n;const t=e.map(i=>fI(i)),r=[];return t.forEach(i=>{i instanceof Dt?r.push(i):i instanceof Yt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Yt.create(r,n.op)}class hte{constructor(){this.un=new hD}addToCollectionParentIndex(e,t){return this.un.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(ss.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class hD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Xt(bt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xt(bt.comparator)).toArray()}}const pI=new Uint8Array(0);class fte{constructor(e,t){this.databaseId=t,this.cn=new hD,this.ln=new ya(r=>Xc(r),(r,i)=>dm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:si(i)};return sB(e).put(s)}return q.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[g2(t),""],!1,!0);return sB(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Eo(o.parent))}return r})}addFieldIndex(e,t){const r=bm(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Kh(e);return s.next(a=>{o.put(YU(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=bm(e),i=Kh(e),s=Wh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=bm(e),r=Wh(e),i=Kh(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return q.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new tB(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Wh(e);let i=!0;const s=new Map;return q.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=lt();const a=[];return q.forEach(s,(u,l)=>{var W;ce("IndexedDbIndexManager",`Using index ${W=u,`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(oe=>`${oe.fieldPath}:${oe.kind}`).join(",")}`} to execute ${Xc(t)}`);const f=function(W,oe){const Ie=O0(oe);if(void 0===Ie)return null;for(const Be of rI(W,Ie.fieldPath))switch(Be.op){case"array-contains-any":return Be.value.arrayValue.values||[];case"array-contains":return[Be.value]}return null}(l,u),m=function(W,oe){const Ie=new Map;for(const Be of Kc(oe))for(const V of rI(W,Be.fieldPath))switch(V.op){case"==":case"in":Ie.set(Be.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return Ie.set(Be.fieldPath.canonicalString(),V.value),Array.from(Ie.values())}return null}(l,u),_=function(W,oe){const Ie=[];let Be=!0;for(const V of Kc(oe)){const P=0===V.kind?X2(W,V.fieldPath,W.startAt):Z2(W,V.fieldPath,W.startAt);Ie.push(P.value),Be&&(Be=P.inclusive)}return new vu(Ie,Be)}(l,u),I=function(W,oe){const Ie=[];let Be=!0;for(const V of Kc(oe)){const P=0===V.kind?Z2(W,V.fieldPath,W.endAt):X2(W,V.fieldPath,W.endAt);Ie.push(P.value),Be&&(Be=P.inclusive)}return new vu(Ie,Be)}(l,u),C=this.In(u,l,_),S=this.In(u,l,I),R=this.Tn(u,l,m),H=this.En(u.indexId,f,C,_.inclusive,S,I.inclusive,R);return q.forEach(H,F=>r.G(F,t.limit).next(W=>{W.forEach(oe=>{const Ie=Re.fromSegments(oe.documentKey);o.has(Ie)||(o=o.add(Ie),a.push(Ie))})}))}).next(()=>a)}return q.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:dte(Yt.create(e.filters,"and")).map(r=>G0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),l=u/(null!=t?t.length:1),f=[];for(let m=0;m<u;++m){const _=t?this.dn(t[m/l]):pI,I=this.An(e,_,r[m%l],i),C=this.Rn(e,_,s[m%l],o),S=a.map(R=>this.An(e,_,R,!0));f.push(...this.createRange(I,C,S))}return f}An(e,t,r,i){const s=new sl(e,Re.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new sl(e,Re.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new tB(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return q.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let l=new Xt(Tn.comparator),f=!1;for(const m of u.filters)for(const _ of m.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?f=!0:l=l.add(_.field));for(const m of u.orderBy)m.field.isKeyField()||(l=l.add(m.field));return l.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new Am;for(const i of Kc(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);il.vt.It(s,o)}return r.zt()}dn(e){const t=new Am;return il.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Am;return il.vt.It(Jc(this.databaseId,t),r.Yt(function(s){const o=Kc(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new Am);let s=0;for(const o of Kc(e)){const a=r[s++];for(const u of i)if(this.fn(t,o.fieldPath)&&um(a))i=this.gn(i,o,a);else{const l=u.Yt(o.kind);il.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Am;u.seed(a.zt()),il.vt.It(o,u.Yt(t.kind)),s.push(u)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Dt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=bm(e),i=Kh(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return q.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(f,m){const _=m?new Oh(m.sequenceNumber,new ss(nl(m.readTime),new Re(Eo(m.documentKey)),m.largestBatchId)):Oh.empty(),I=f.fields.map(([C,S])=>new Qc(Tn.fromServerFormat(C),S));return new Nh(f.indexId,f.collectionGroup,I,_)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:rt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=bm(e),s=Kh(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>q.forEach(a,u=>s.put(YU(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?q.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),q.forEach(a,u=>this.wn(e,i,u).next(l=>{const f=this.Sn(s,u);return l.isEqual(f)?q.resolve():this.bn(e,s,u,l,f)}))))})}Dn(e,t,r,i){return Wh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Wh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Wh(e);let s=new Xt(Iu);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new sl(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Xt(Iu);const i=this.Vn(t,e);if(null==i)return r;const s=O0(t);if(null!=s){const o=e.data.field(s.fieldPath);if(um(o))for(const a of o.arrayValue.values||[])r=r.add(new sl(t.indexId,e.key,this.dn(a),i))}else r=r.add(new sl(t.indexId,e.key,pI,i));return r}bn(e,t,r,i,s){ce("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,l,f,m,_){const I=u.getIterator(),C=l.getIterator();let S=kh(I),R=kh(C);for(;S||R;){let H=!1,F=!1;if(S&&R){const W=f(S,R);W<0?F=!0:W>0&&(H=!0)}else null!=S?F=!0:H=!0;H?(m(R),R=kh(C)):F?(_(S),S=kh(I)):(S=kh(I),R=kh(C))}}(i,s,Iu,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),q.waitFor(o)}yn(e){let t=1;return Kh(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Iu(o,a)).filter((o,a,u)=>!a||0!==Iu(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Iu(o,e),u=Iu(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,pI,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,pI,[]]))}return s}Cn(e,t){return Iu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(oB)}getMinOffset(e,t){return q.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Fe())).next(oB)}}function sB(n){return Ir(n,"collectionParents")}function Wh(n){return Ir(n,"indexEntries")}function bm(n){return Ir(n,"indexConfiguration")}function Kh(n){return Ir(n,"indexState")}function oB(n){Le(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;k0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ss(e.readTime,e.documentKey,t)}const aB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ai{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ai(e,ai.DEFAULT_COLLECTION_PERCENTILE,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function uB(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:o},(f,m,_)=>(a++,_.delete()));s.push(u.next(()=>{Le(1===a)}));const l=[];for(const f of t.mutations){const m=A2(e,f.key.path,t.batchId);s.push(i.delete(m)),l.push(f.key)}return q.waitFor(s).next(()=>l)}function gI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Fe();e=n.noDocument}return JSON.stringify(e).length}ai.DEFAULT_COLLECTION_PERCENTILE=10,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ai.DEFAULT=new ai(41943040,ai.DEFAULT_COLLECTION_PERCENTILE,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ai.DISABLED=new ai(-1,0,0);class mI{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Le(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new mI(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wu(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Qh(e),o=wu(e);return o.add({}).next(a=>{Le("number"==typeof a);const u=new J0(a,t,r,i),l=function(I,C,S){const R=S.baseMutations.map(F=>wm(I.ct,F)),H=S.mutations.map(F=>wm(I.ct,F));return{userId:C,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:R,mutations:H}}(this.serializer,this.userId,u),f=[];let m=new Xt((_,I)=>rt(_.canonicalString(),I.canonicalString()));for(const _ of i){const I=A2(this.userId,_.key.path,a);m=m.add(_.key.path.popLast()),f.push(o.put(l)),f.push(s.put(I,eee))}return m.forEach(_=>{f.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),q.waitFor(f).next(()=>u)})}lookupMutationBatch(e,t){return wu(e).get(t).next(r=>r?(Le(r.userId===this.userId),rl(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?q.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return wu(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Le(a.batchId>=r),s=rl(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return wu(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return wu(e).U("userMutationsIndex",t).next(r=>r.map(i=>rl(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=KE(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Qh(e).J({range:i},(o,a,u)=>{const[l,f,m]=o,_=Eo(f);if(l===this.userId&&t.path.isEqual(_))return wu(e).get(m).next(I=>{if(!I)throw Fe();Le(I.userId===this.userId),s.push(rl(this.serializer,I))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xt(rt);const i=[];return t.forEach(s=>{const o=KE(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=Qh(e).J({range:a},(l,f,m)=>{const[_,I,C]=l,S=Eo(I);_===this.userId&&s.path.isEqual(S)?r=r.add(C):m.done()});i.push(u)}),q.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=KE(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Xt(rt);return Qh(e).J({range:o},(u,l,f)=>{const[m,_,I]=u,C=Eo(_);m===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(I)):f.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(wu(e).get(s).next(o=>{if(null===o)throw Fe();Le(o.userId===this.userId),r.push(rl(this.serializer,o))}))}),q.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return uB(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Qh(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Eo(s[1]);i.push(u)}else a.done()}).next(()=>{Le(0===i.length)})})}containsKey(e,t){return cB(e,this.userId,t)}Nn(e){return lB(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function cB(n,e,t){const r=KE(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Qh(n).J({range:s,H:!0},(a,u,l)=>{const[f,m,_]=a;f===e&&m===i&&(o=!0),l.done()}).next(()=>o)}function wu(n){return Ir(n,"mutations")}function Qh(n){return Ir(n,"documentMutations")}function lB(n){return Ir(n,"mutationQueues")}class ol{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ol(0)}static kn(){return new ol(-1)}}class pte{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new ol(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>je.fromTimestamp(new Pn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yh(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Le(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Yh(e).J((o,a)=>{const u=Cm(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>q.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Yh(e).J((r,i)=>{const s=Cm(i);t(s)})}qn(e){return dB(e).get("targetGlobalKey").next(t=>(Le(null!==t),t))}Qn(e,t){return dB(e).put("targetGlobalKey",t)}Kn(e,t){return Yh(e).put(KU(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Xc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Yh(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const l=Cm(a);dm(t,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Cu(e);return t.forEach(o=>{const a=si(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),q.waitFor(i)}removeMatchingKeys(e,t,r){const i=Cu(e);return q.forEach(t,s=>{const o=si(s.path);return q.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Cu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Cu(e);let s=lt();return i.J({range:r,H:!0},(o,a,u)=>{const l=Eo(o[1]),f=new Re(l);s=s.add(f)}).next(()=>s)}containsKey(e,t){const r=si(t.path),i=IDBKeyRange.bound([r],[g2(r)],!1,!0);let s=0;return Cu(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,l)=>{0!==o&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return Yh(e).get(t).next(r=>r?Cm(r):null)}}function Yh(n){return Ir(n,"targets")}function dB(n){return Ir(n,"targetGlobal")}function Cu(n){return Ir(n,"targetDocuments")}function hB([n,e],[t,r]){const i=rt(n,t);return 0===i?rt(e,r):i}class gte{constructor(e){this.Un=e,this.buffer=new Xt(hB),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();hB(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fB{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;ce("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Q.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){fu(r)?ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield hu(r)}yield t.Hn(3e5)}))}}class mte{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return q.resolve(os.oe);const r=new gte(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(aB)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),aB):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,u,l;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(l=Date.now(),xh()<=yo.$b.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(l-u)+`ms\nTotal Duration: ${l-f}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class _te{constructor(e,t){this.db=e,this.garbageCollector=function pB(n,e){return new mte(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return _I(e,r)}removeReference(e,t,r){return _I(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return _I(e,t)}nr(e,t){return function(i,s){let o=!1;return lB(i).Y(a=>cB(i,a,s).next(u=>(u&&(o=!0),q.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const u=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,je.min()),Cu(e).delete([0,si(o.path)])))});i.push(u)}}).next(()=>q.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return _I(e,t)}tr(e,t){const r=Cu(e);let i,s=os.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{0===o?(s!==os.oe&&t(new Re(Eo(i)),s),s=l,i=u):s=os.oe}).next(()=>{s!==os.oe&&t(new Re(Eo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _I(n,e){return Cu(n).put((i=n.currentSequenceNumber,{targetId:0,path:si(e.path),sequenceNumber:i}));var i}class gB{constructor(){this.changes=new ya(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yte{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return al(e).put(r)}removeEntry(e,t,r){return al(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],dI(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=An.newInvalidDocument(t);return al(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Dm(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:An.newInvalidDocument(t)};return al(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Dm(t))},(i,s)=>{r={document:this.ir(t,s),size:gI(s)}}).next(()=>r)}getEntries(e,t){let r=$i();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=$i(),i=new mn(Re.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,gI(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return q.resolve();let i=new Xt(vB);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Dm(i.first()),Dm(i.last())),o=i.getIterator();let a=o.getNext();return al(e).J({index:"documentKeyIndex",range:s},(u,l,f)=>{const m=Re.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&vB(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?f.$(Dm(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),dI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return al(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let f=$i();for(const m of l){const _=this.ir(Re.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);_.isFoundDocument()&&(fm(t,_)||i.has(_.key))&&(f=f.insert(_.key,_))}return f})}getAllFromCollectionGroup(e,t,r,i){let s=$i();const o=yB(t,r),a=yB(t,ss.max());return al(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,f)=>{const m=this.ir(Re.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new vte(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return _B(e).get("remoteDocumentGlobalKey").next(t=>(Le(!!t),t))}rr(e,t){return _B(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function ite(n,e){let t;if(e.document)t=UU(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Re.fromSegments(e.noDocument.path),i=nl(e.noDocument.readTime);t=An.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Fe();{const r=Re.fromSegments(e.unknownDocument.path),i=nl(e.unknownDocument.version);t=An.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Pn(i[0],i[1]);return je.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(je.min()))return r}return An.newInvalidDocument(e)}}function mB(n){return new yte(n)}class vte extends gB{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new ya(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Xt((s,o)=>rt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=WU(this.cr.serializer,o);i=i.add(s.path.popLast());const l=gI(u);r+=l-a.size,t.push(this.cr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=WU(this.cr.serializer,o.convertToNoDocument(je.min()));t.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function _B(n){return Ir(n,"remoteDocumentGlobal")}function al(n){return Ir(n,"remoteDocumentsV14")}function Dm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yB(n,e){const t=e.documentKey.path.toArray();return[n,dI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vB(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=rt(t[s],r[s]),i)return i;return i=rt(t.length,r.length),i||(i=rt(t[t.length-2],r[r.length-2]),i||rt(t[t.length-1],r[r.length-1]))}class Ete{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class EB{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&_m(r.mutation,i,ji.empty(),Pn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,lt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=lt()){const i=wo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=pm();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=wo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,lt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=$i();const o=gm(),a=gm();return t.forEach((u,l)=>{const f=r.get(l.key);i.has(l.key)&&(void 0===f||f.mutation instanceof va)?s=s.insert(l.key,l):void 0!==f?(o.set(l.key,f.mutation.getFieldMask()),_m(f.mutation,l,f.mutation.getFieldMask(),Pn.now())):o.set(l.key,ji.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,f)=>o.set(l,f)),t.forEach((l,f)=>{var m;return a.set(l,new Ete(f,null!==(m=o.get(l))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=gm();let i=new mn((o,a)=>o-a),s=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=t.get(u);if(null===l)return;let f=r.get(u)||ji.empty();f=a.applyToLocalView(l,f),r.set(u,f);const m=(i.get(a.batchId)||lt()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,f=u.value,m=cU();f.forEach(_=>{if(!s.has(_)){const I=_U(t.get(_),r.get(_));null!==I&&m.set(_,I),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,m))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Re.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):q0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):q.resolve(wo());let a=-1,u=s;return o.next(l=>q.forEach(l,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?q.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{u=u.insert(f,_)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,lt())).next(f=>({batchId:a,changes:uU(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Re(t)).next(r=>{let i=pm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=pm();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,u=>{const l=(m=t,_=u.child(s),new _a(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,_;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((m,_)=>{o=o.insert(m,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{const f=l.getKey();null===o.get(f)&&(o=o.insert(f,An.newInvalidDocument(f)))});let a=pm();return o.forEach((u,l)=>{const f=s.get(u);void 0!==f&&_m(f.mutation,l,ji.empty(),Pn.now()),fm(t,l)&&(a=a.insert(u,l))}),a})}}class Ite{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return q.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:or(i.createTime)}),q.resolve();var i}getNamedQuery(e,t){return q.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:oD(i.bundledQuery),readTime:or(i.readTime)}),q.resolve();var i}}class wte{constructor(){this.overlays=new mn(Re.comparator),this.Ir=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=wo();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const i=wo(),s=t.length+1,o=new Re(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new mn((l,f)=>l-f);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=s.get(l.largestBatchId);null===f&&(f=wo(),s=s.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}const a=wo(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return q.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Z0(t,r));let s=this.Ir.get(t);void 0===s&&(s=lt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class Cte{constructor(){this.sessionToken=Kn.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}class fD{constructor(){this.Tr=new Xt(Pr.Er),this.dr=new Xt(Pr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Pr(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Pr(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Re(new bt([])),r=new Pr(t,e),i=new Pr(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Re(new bt([])),r=new Pr(t,e),i=new Pr(t,e+1);let s=lt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Pr(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Pr{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Re.comparator(e.key,t.key)||rt(e.wr,t.wr)}static Ar(e,t){return rt(e.wr,t.wr)||Re.comparator(e.key,t.key)}}class Tte{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Xt(Pr.Er)}checkEmpty(e){return q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new J0(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Pr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,t){return q.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pr(t,0),i=new Pr(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xt(rt);return t.forEach(i=>{const s=new Pr(i,0),o=new Pr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Re.isDocumentKey(s)||(s=s.child(""));const o=new Pr(new Re(s),0);let a=new Xt(rt);return this.br.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),q.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Le(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return q.forEach(t.mutations,i=>{const s=new Pr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Pr(t,0),i=this.br.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return q.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ate{constructor(e){this.Mr=e,this.docs=new mn(Re.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():An.newInvalidDocument(t))}getEntries(e,t){let r=$i();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():An.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=$i();const o=t.path,a=new Re(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:f}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||k0(_2(f),r)<=0||(i.has(f.key)||fm(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Fe()}Or(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bte(this)}getSize(e){return q.resolve(this.size)}}class bte extends gB{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class Dte{constructor(e){this.persistence=e,this.Nr=new ya(t=>Xc(t),dm),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fD,this.targetCount=0,this.kr=ol.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),q.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new ol(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Kn(t),q.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.Br.containsKey(t))}}class pD{constructor(e,t){this.qr={},this.overlays={},this.Qr=new os(0),this.Kr=!1,this.Kr=!0,this.$r=new Cte,this.referenceDelegate=e(this),this.Ur=new Dte(this),this.indexManager=new hte,this.remoteDocumentCache=new Ate(r=>this.referenceDelegate.Wr(r)),this.serializer=new qU(t),this.Gr=new Ite(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wte,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Tte(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const i=new Ste(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class Ste extends v2{constructor(e){super(),this.currentSequenceNumber=e}}class yI{constructor(e){this.persistence=e,this.Jr=new fD,this.Yr=null}static Zr(e){return new yI(e)}get Xr(){if(this.Yr)return this.Yr;throw Fe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),q.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,r=>{const i=Re.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,je.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return q.or([()=>q.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Rte{constructor(e){this.serializer=e}O(e,t,r,i){const s=new WE("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T2,{unique:!0}),u.createObjectStore("documentMutations"),IB(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=q.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),IB(e)),o=o.next(()=>function(u){const l=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:je.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,l){return l.store("mutations").U().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T2,{unique:!0});const m=l.store("mutations"),_=f.map(I=>m.put(I));return q.waitFor(_)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const l=u.createObjectStore("documentOverlays",{keyPath:hee});l.createIndex("collectionPathOverlayIndex",fee,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",pee,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:tee});l.createIndex("documentKeyIndex",nee),l.createIndex("collectionGroupIndex",ree)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:uee}).createIndex("sequenceNumberIndex",cee,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:lee}).createIndex("documentKeyIndex",dee,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(u){u.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=gI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>q.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>q.forEach(a,u=>{Le(u.userId===s.userId);const l=rl(this.serializer,u);return uB(e,s.userId,l).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new bt(o),l=[0,si(u)];s.push(t.get(l).next(f=>f?q.resolve():t.put({targetId:0,path:si(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>q.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:aee});const r=t.store("collectionParents"),i=new hD,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:si(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new bt(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],l)=>{const f=Eo(a);return s(f.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=Cm(i),o=KU(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(m=o,m.document?new Re(bt.fromString(m.document.name).popFirst(5)):m.noDocument?Re.fromSegments(m.noDocument.path):m.unknownDocument?Re.fromSegments(m.unknownDocument.path):Fe()).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(l))}).next(()=>q.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=mB(this.serializer),s=new pD(yI.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var l;let f=null!==(l=a.get(u.userId))&&void 0!==l?l:lt();rl(this.serializer,u).keys().forEach(m=>f=f.add(m)),a.set(u.userId,f)}),q.forEach(a,(u,l)=>{const f=new Sr(l),m=hI.lt(this.serializer,f),_=s.getIndexManager(f),I=mI.lt(f,this.serializer,_,s.referenceDelegate);return new EB(i,I,m,_).recalculateAndSaveOverlaysForDocumentKeys(new U0(t,os.oe),u).next()})})}}function IB(n){n.createObjectStore("targetDocuments",{keyPath:see}).createIndex("documentTargetsIndex",oee,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",iee,{unique:!0}),n.createObjectStore("targetGlobal")}const gD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class mD{constructor(e,t,r,i,s,o,a,u,l,f,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=f,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=_=>Promise.resolve(),!mD.D())throw new ue(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _te(this,i),this.Ai=t+"main",this.serializer=new qU(u),this.Ri=new vo(this.Ai,this.hi,new Rte(this.serializer)),this.$r=new ote,this.Ur=new pte(this.referenceDelegate,this.serializer),this.remoteDocumentCache=mB(this.serializer),this.Gr=new ste,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===f&&sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ue(J.FAILED_PRECONDITION,gD);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new os(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,Q.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,Q.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,Q.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>EI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(fu(e))return ce("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Sm(e).get("owner").next(t=>q.resolve(this.vi(t)))}Ci(e){return EI(e).delete(this.clientId)}Fi(){var e=this;return(0,Q.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ir(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return q.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?q.resolve(!0):Sm(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ue(J.FAILED_PRECONDITION,gD);return!1}}return!(!this.networkEnabled||!this.inForeground)||EI(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ce("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Q.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new U0(t,os.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>EI(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return mI.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new fte(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return hI.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){ce("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(u=this.hi)?_ee:16===u?mee:15===u?L0:14===u?S2:13===u?D2:12===u?gee:11===u?b2:void Fe();var u;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new U0(a,this.Qr?this.Qr.next():os.oe),"readwrite-primary"===t?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ue(J.FAILED_PRECONDITION,y2);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Sm(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ue(J.FAILED_PRECONDITION,gD)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Sm(e).put("owner",t)}static D(){return vo.D()}bi(e){const t=Sm(e);return t.get("owner").next(r=>this.vi(r)?(ce("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):q.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(sr(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,Ht.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return ce("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return sr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){sr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Sm(n){return Ir(n,"owner")}function EI(n){return Ir(n,"clientMetadata")}function _D(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class yD{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=lt(),i=lt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new yD(e,t.fromCache,r,i)}}class Pte{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class wB{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,Ht.nr)()?8:E2((0,Ht.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Pte;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(xh()<=yo.$b.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Bh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(xh()<=yo.$b.DEBUG&&ce("QueryEngine","Query:",Bh(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(xh()<=yo.$b.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Bh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oi(t))):q.resolve())}Yi(e,t){if(tU(t))return q.resolve(null);let r=oi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=iI(t,null,"F"),r=oi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=lt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.ts(t,a);return this.ns(t,l,o,u.readTime)?this.Yi(e,iI(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return tU(t)||i.isEqual(je.min())?q.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?q.resolve(null):(xh()<=yo.$b.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bh(t)),this.rs(e,o,t,m2(i,-1)).next(a=>a))})}ts(e,t){let r=new Xt(oU(e));return t.forEach((i,s)=>{fm(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return xh()<=yo.$b.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Bh(t)),this.Ji.getDocumentsMatchingQuery(e,t,ss.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class xte{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new mn(rt),this._s=new ya(s=>Xc(s),dm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EB(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function CB(n,e,t,r){return new xte(n,e,t,r)}function TB(n,e){return vD.apply(this,arguments)}function vD(){return(vD=(0,Q.A)(function*(n,e){const t=Te(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=lt();for(const l of i){o.push(l.batchId);for(const f of l.mutations)u=u.add(f.key)}for(const l of s){a.push(l.batchId);for(const f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function AB(n){const e=Te(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function bB(n,e,t){let r=lt(),i=lt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=$i();return t.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(je.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ce("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function Ote(n,e){const t=Te(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Jh(n,e){const t=Te(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Ea(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Xh(n,e,t){return ED.apply(this,arguments)}function ED(){return(ED=(0,Q.A)(function*(n,e,t){const r=Te(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!fu(o))throw o;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function II(n,e,t){const r=Te(n);let i=je.min(),s=lt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,f){const m=Te(u),_=m._s.get(f);return void 0!==_?q.resolve(m.os.get(_)):m.Ur.getTargetData(l,f)}(r,o,oi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:je.min(),t?s:lt())).next(a=>(RB(r,sU(e),a),{documents:a,Ts:s})))}function DB(n,e){const t=Te(n),r=Te(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function SB(n,e){const t=Te(n),r=t.us.get(e)||je.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,m2(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(RB(t,e,i),i))}function RB(n,e,t){let r=n.us.get(e)||je.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function ID(){return(ID=(0,Q.A)(function*(n,e,t,r){const i=Te(n);let s=lt(),o=$i();for(const l of t){const f=e.Es(l.metadata.name);l.document&&(s=s.add(f));const m=e.ds(l);m.setReadTime(e.As(l.metadata.readTime)),o=o.insert(f,m)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Jh(i,(f=r,oi(Lh(bt.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>bB(l,a,o).next(f=>(a.apply(l),f)).next(f=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,f.Ps,f.Is)).next(()=>f.Ps)))})).apply(this,arguments)}function Fte(n,e){return wD.apply(this,arguments)}function wD(){return(wD=(0,Q.A)(function*(n,e,t=lt()){const r=yield Jh(n,oi(oD(e.bundledQuery))),i=Te(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=or(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Kn.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function PB(n,e){return`firestore_clients_${n}_${e}`}function xB(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function CD(n,e){return`firestore_targets_${n}_${e}`}class wI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new ue(i.error.code,i.error.message))),o?new wI(e,t,i.state,s):(sr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ue(r.error.code,r.error.message))),s?new Rm(e,r.state,i):(sr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class CI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=K0();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=w2(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new CI(e,s):(sr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class TD{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new TD(t.clientId,t.onlineState):(sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class AD{constructor(){this.activeTargetIds=K0()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bD{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new mn(rt),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=PB(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new AD),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Q.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(PB(e.persistenceKey,i));if(s){const o=CI.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(CD(this.persistenceKey,e));if(i){const s=Rm.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(CD(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce("SharedClientState","READ",e,t),t}setItem(e,t){ce("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ce("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,Q.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=os.oe;if(null!=o)try{const u=JSON.parse(o);Le("number"==typeof u),a=u}catch(u){sr("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==os.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new wI(this.currentUser,e,t,r),s=xB(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=xB(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=CD(this.persistenceKey,e),s=new Rm(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return CI.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return wI.Rs(new Sr(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return Rm.Rs(i,t)}Ls(e){return TD.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,Q.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);ce("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=K0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class MB{constructor(){this.so=new AD,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new AD,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Vte{_o(e){}shutdown(){}}class NB{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let TI=null;function DD(){return null===TI?TI=268435456+Math.round(2147483648*Math.random()):TI++,"0x"+TI.toString(16)}const Lte={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ute{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const ui="WebChannelConnection";class Bte extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=DD(),u=this.xo(t,r.toUriEncodedString());ce("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,u,l,i).then(f=>(ce("RestConnection",`Received RPC '${t}' ${a}: `,f),f),f=>{throw is("RestConnection",`RPC '${t}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Ph,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${Lte[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=DD();return new Promise((o,a)=>{const u=new o2;u.setWithCredentials(!0),u.listenOnce(a2.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case qE.NO_ERROR:const f=u.getResponseJson();ce(ui,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case qE.TIMEOUT:ce(ui,`RPC '${e}' ${s} timed out`),a(new ue(J.DEADLINE_EXCEEDED,"Request time out"));break;case qE.HTTP_ERROR:const m=u.getStatus();if(ce(ui,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const I=_?.error;if(I&&I.status&&I.message){const C=function(R){const H=R.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(H)>=0?H:J.UNKNOWN}(I.status);a(new ue(C,I.message))}else a(new ue(J.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ue(J.UNAVAILABLE,"Connection failed."));break;default:Fe()}}finally{ce(ui,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(i);ce(ui,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){const i=DD(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=l2(),a=c2(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const f=s.join("");ce(ui,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=o.createWebChannel(f,u);let _=!1,I=!1;const C=new Ute({Io:R=>{I?ce(ui,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(_||(ce(ui,`Opening RPC '${e}' stream ${i} transport.`),m.open(),_=!0),ce(ui,`RPC '${e}' stream ${i} sending:`,R),m.send(R))},To:()=>m.close()}),S=(R,H,F)=>{R.listen(H,W=>{try{F(W)}catch(oe){setTimeout(()=>{throw oe},0)}})};return S(m,tm.EventType.OPEN,()=>{I||(ce(ui,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),S(m,tm.EventType.CLOSE,()=>{I||(I=!0,ce(ui,`RPC '${e}' stream ${i} transport closed`),C.So())}),S(m,tm.EventType.ERROR,R=>{I||(I=!0,is(ui,`RPC '${e}' stream ${i} transport errored:`,R),C.So(new ue(J.UNAVAILABLE,"The operation could not be completed")))}),S(m,tm.EventType.MESSAGE,R=>{var H;if(!I){const F=R.data[0];Le(!!F);const oe=F.error||(null===(H=F[0])||void 0===H?void 0:H.error);if(oe){ce(ui,`RPC '${e}' stream ${i} received error:`,oe);const Ie=oe.status;let Be=function(O){const L=gr[O];if(void 0!==L)return TU(L)}(Ie),V=oe.message;void 0===Be&&(Be=J.INTERNAL,V="Unknown error status: "+Ie+" with message "+oe.message),I=!0,C.So(new ue(Be,V)),m.close()}else ce(ui,`RPC '${e}' stream ${i} received:`,F),C.bo(F)}}),S(a,u2.STAT_EVENT,R=>{R.stat===M0.PROXY?ce(ui,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===M0.NOPROXY&&ce(ui,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function OB(){return typeof window<"u"?window:null}function AI(){return typeof document<"u"?document:null}function Pm(n){return new Kee(n,!0)}class SD{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class kB{constructor(e,t,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new SD(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,Q.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,Q.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,Q.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===J.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ue(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,Q.A)(function*(){e.state=0,e.start()}))}I_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jte extends kB{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function Jee(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Fe(),i=e.targetChange.targetIds||[],s=function(l,f){return l.useProto3Json?(Le(void 0===f||"string"==typeof f),Kn.fromBase64String(f||"")):(Le(void 0===f||f instanceof Buffer||f instanceof Uint8Array),Kn.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const f=void 0===l.code?J.UNKNOWN:TU(l.code);return new ue(f,l.message||"")}(o);t=new RU(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Co(n,r.document.name),s=or(r.document.updateTime),o=r.document.createTime?or(r.document.createTime):je.min(),a=new Hr({mapValue:{fields:r.document.fields}}),u=An.newFoundDocument(i,s,o,a);t=new cI(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Co(n,r.document),s=r.readTime?or(r.readTime):je.min(),o=An.newNoDocument(i,s);t=new cI([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Co(n,r.document);t=new cI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Fe();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new $ee(i,s);t=new SU(r.targetId,o)}}var l;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return je.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?je.min():o.readTime?or(o.readTime):je.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=iD(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=nI(u)?{documents:BU(s,u)}:{query:lI(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=NU(s,o.resumeToken);const l=tD(s,o.expectedCount);null!==l&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(je.min())>0){a.readTime=Gh(s,o.snapshotVersion.toTimestamp());const l=tD(s,o.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function Zee(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=iD(this.serializer),t.removeTarget=e,this.a_(t)}}class $te extends kB{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Le(!!e.streamToken),this.lastStreamToken=e.streamToken,Le(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function Xee(n,e){return n&&n.length>0?(Le(void 0!==e),n.map(t=>function(i,s){let o=or(i.updateTime?i.updateTime:s);return o.isEqual(je.min())&&(o=or(s)),new Uee(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=or(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=iD(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>wm(this.serializer,r))};this.a_(t)}}class Hte extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,rD(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ue(J.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,rD(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(J.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class zte{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(sr(t),this.D_=!1):ce("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Gte{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,Q.A)(function*(){var u;Tu(o)&&(ce("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,Q.A)(function*(f){const m=Te(f);m.L_.add(4),yield Zh(m),m.q_.set("Unknown"),m.L_.delete(4),yield xm(m)}),function l(f){return u.apply(this,arguments)})(o))}))}),this.q_=new zte(r,i)}}function xm(n){return RD.apply(this,arguments)}function RD(){return(RD=(0,Q.A)(function*(n){if(Tu(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function Zh(n){return PD.apply(this,arguments)}function PD(){return(PD=(0,Q.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function bI(n,e){const t=Te(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),ND(t)?MD(t):nf(t).r_()&&xD(t,e))}function ef(n,e){const t=Te(n),r=nf(t);t.N_.delete(e),r.r_()&&FB(t,e),0===t.N_.size&&(r.r_()?r.o_():Tu(t)&&t.q_.set("Unknown"))}function xD(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nf(n).A_(e)}function FB(n,e){n.Q_.xe(e),nf(n).R_(e)}function MD(n){n.Q_=new zee({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),nf(n).start(),n.q_.v_()}function ND(n){return Tu(n)&&!nf(n).n_()&&n.N_.size>0}function Tu(n){return 0===Te(n).L_.size}function VB(n){n.Q_=void 0}function qte(n){return OD.apply(this,arguments)}function OD(){return(OD=(0,Q.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function Wte(n){return kD.apply(this,arguments)}function kD(){return(kD=(0,Q.A)(function*(n){n.N_.forEach((e,t)=>{xD(n,e)})})).apply(this,arguments)}function Kte(n,e){return FD.apply(this,arguments)}function FD(){return(FD=(0,Q.A)(function*(n,e){VB(n),ND(n)?(n.q_.M_(e),MD(n)):n.q_.set("Unknown")})).apply(this,arguments)}function Qte(n,e,t){return VD.apply(this,arguments)}function VD(){return VD=(0,Q.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof RU&&2===e.state&&e.cause)try{yield(r=(0,Q.A)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.N_.delete(u),s.Q_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield DI(n,r)}else if(e instanceof cI?n.Q_.Ke(e):e instanceof SU?n.Q_.He(e):n.Q_.We(e),!t.isEqual(je.min()))try{const r=yield AB(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(l);f&&s.N_.set(l,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(Kn.EMPTY_BYTE_STRING,f.snapshotVersion)),FB(s,u);const m=new Ea(f.target,u,l,f.sequenceNumber);xD(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ce("RemoteStore","Failed to raise snapshot:",r),yield DI(n,r)}var r}),VD.apply(this,arguments)}function DI(n,e,t){return LD.apply(this,arguments)}function LD(){return(LD=(0,Q.A)(function*(n,e,t){if(!fu(e))throw e;n.L_.add(1),yield Zh(n),n.q_.set("Offline"),t||(t=()=>AB(n.localStore)),n.asyncQueue.enqueueRetryable((0,Q.A)(function*(){ce("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield xm(n)}))})).apply(this,arguments)}function LB(n,e){return e().catch(t=>DI(n,t,e))}function tf(n){return UD.apply(this,arguments)}function UD(){return(UD=(0,Q.A)(function*(n){const e=Te(n),t=Au(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Yte(e);)try{const i=yield Ote(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,Jte(e,i)}catch(i){yield DI(e,i)}UB(e)&&BB(e)})).apply(this,arguments)}function Yte(n){return Tu(n)&&n.O_.length<10}function Jte(n,e){n.O_.push(e);const t=Au(n);t.r_()&&t.V_&&t.m_(e.mutations)}function UB(n){return Tu(n)&&!Au(n).n_()&&n.O_.length>0}function BB(n){Au(n).start()}function Xte(n){return BD.apply(this,arguments)}function BD(){return(BD=(0,Q.A)(function*(n){Au(n).p_()})).apply(this,arguments)}function Zte(n){return jD.apply(this,arguments)}function jD(){return(jD=(0,Q.A)(function*(n){const e=Au(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function ene(n,e,t){return $D.apply(this,arguments)}function $D(){return($D=(0,Q.A)(function*(n,e,t){const r=n.O_.shift(),i=X0.from(r,e,t);yield LB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield tf(n)})).apply(this,arguments)}function tne(n,e){return HD.apply(this,arguments)}function HD(){return HD=(0,Q.A)(function*(n,e){var t;e&&Au(n).V_&&(yield(t=(0,Q.A)(function*(i,s){if(CU(a=s.code)&&a!==J.ABORTED){const o=i.O_.shift();Au(i).s_(),yield LB(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield tf(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),UB(n)&&BB(n)}),HD.apply(this,arguments)}function jB(n,e){return zD.apply(this,arguments)}function zD(){return(zD=(0,Q.A)(function*(n,e){const t=Te(n);t.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const r=Tu(t);t.L_.add(3),yield Zh(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield xm(t)})).apply(this,arguments)}function GD(n,e){return qD.apply(this,arguments)}function qD(){return(qD=(0,Q.A)(function*(n,e){const t=Te(n);e?(t.L_.delete(2),yield xm(t)):e||(t.L_.add(2),yield Zh(t),t.q_.set("Unknown"))})).apply(this,arguments)}function nf(n){return n.K_||(n.K_=function(t,r,i){const s=Te(t);return s.w_(),new jte(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:qte.bind(null,n),Ro:Wte.bind(null,n),mo:Kte.bind(null,n),d_:Qte.bind(null,n)}),n.B_.push(function(){var e=(0,Q.A)(function*(t){t?(n.K_.s_(),ND(n)?MD(n):n.q_.set("Unknown")):(yield n.K_.stop(),VB(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function Au(n){return n.U_||(n.U_=function(t,r,i){const s=Te(t);return s.w_(),new $te(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Xte.bind(null,n),mo:tne.bind(null,n),f_:Zte.bind(null,n),g_:ene.bind(null,n)}),n.B_.push(function(){var e=(0,Q.A)(function*(t){t?(n.U_.s_(),yield tf(n)):(yield n.U_.stop(),n.O_.length>0&&(ce("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class WD{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new WD(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ue(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rf(n,e){if(sr("AsyncQueue",`${e}: ${n}`),fu(n))return new ue(J.UNAVAILABLE,`${e}: ${n}`);throw n}class sf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Re.comparator(t.key,r.key):(t,r)=>Re.comparator(t.key,r.key),this.keyedMap=pm(),this.sortedSet=new mn(this.comparator)}static emptySet(e){return new sf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new sf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class $B{constructor(){this.W_=new mn(Re.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Fe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class af{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new af(e,t,sf.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class nne{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class rne{constructor(){this.queries=HB(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Te(t),s=i.queries;i.queries=HB(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})}(this,new ue(J.ABORTED,"Firestore shutting down"))}}function HB(){return new ya(n=>iU(n),hm)}function KD(n,e){return QD.apply(this,arguments)}function QD(){return(QD=(0,Q.A)(function*(n,e){const t=Te(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new nne,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=rf(o,`Initialization of query '${Bh(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&XD(t)})).apply(this,arguments)}function YD(n,e){return JD.apply(this,arguments)}function JD(){return(JD=(0,Q.A)(function*(n,e){const t=Te(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function ine(n,e){const t=Te(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&XD(t)}function sne(n,e,t){const r=Te(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function XD(n){n.Y_.forEach(e=>{e.next()})}var ZD,zB;(zB=ZD||(ZD={})).ea="default",zB.Cache="cache";class eS{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new af(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=af.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ZD.Cache}}class one{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class GB{constructor(e){this.serializer=e}Es(e){return Co(this.serializer,e)}ds(e){return e.metadata.exists?UU(this.serializer,e.document,!1):An.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return or(e)}}class ane{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=qB(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=bt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new GB(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||lt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,Q.A)(function*(){const t=yield function kte(n,e,t,r){return ID.apply(this,arguments)}(e.localStore,new GB(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield Fte(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function qB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class WB{constructor(e){this.key=e}}class KB{constructor(e){this.key=e}}class QB{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=lt(),this.mutatedKeys=lt(),this.Aa=oU(e),this.Ra=new sf(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new $B,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const _=i.get(f),I=fm(this.query,m)?m:null,C=!!_&&this.mutatedKeys.has(_.key),S=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let R=!1;_&&I?_.data.isEqual(I.data)?C!==S&&(r.track({type:3,doc:I}),R=!0):this.ga(_,I)||(r.track({type:2,doc:I}),R=!0,(u&&this.Aa(I,u)>0||l&&this.Aa(I,l)<0)&&(a=!0)):!_&&I?(r.track({type:0,doc:I}),R=!0):_&&!I&&(r.track({type:1,doc:_}),R=!0,(u||l)&&(a=!0)),R&&(I?(o=o.add(I),s=S?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,m)=>function(I,C){const S=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe()}};return S(I)-S(C)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],u=0===this.da.size&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,0!==o.length||l?{snapshot:new af(this.query,e.Ra,s,o,e.mutatedKeys,0===u,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $B,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=lt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new KB(r))}),this.da.forEach(r=>{e.has(r)||t.push(new WB(r))}),t}ba(e){this.Ta=e.Ts,this.da=lt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return af.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class une{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cne{constructor(e){this.key=e,this.va=!1}}class lne{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ya(a=>iU(a),hm),this.Ma=new Map,this.xa=new Set,this.Oa=new mn(Re.comparator),this.Na=new Map,this.La=new fD,this.Ba={},this.ka=new Map,this.qa=ol.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function dne(n,e){return tS.apply(this,arguments)}function tS(){return(tS=(0,Q.A)(function*(n,e,t=!0){const r=SI(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield YB(r,e,t,!0),i})).apply(this,arguments)}function hne(n,e){return nS.apply(this,arguments)}function nS(){return(nS=(0,Q.A)(function*(n,e){const t=SI(n);yield YB(t,e,!0,!1)})).apply(this,arguments)}function YB(n,e,t,r){return rS.apply(this,arguments)}function rS(){return(rS=(0,Q.A)(function*(n,e,t,r){const i=yield Jh(n.localStore,oi(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield iS(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&bI(n.remoteStore,i),a})).apply(this,arguments)}function iS(n,e,t,r,i){return sS.apply(this,arguments)}function sS(){return sS=(0,Q.A)(function*(n,e,t,r,i){n.Ka=(m,_,I)=>{return(C=(0,Q.A)(function*(R,H,F,W){let oe=H.view.ma(F);oe.ns&&(oe=yield II(R.localStore,H.query,!1).then(({documents:P})=>H.view.ma(P,oe)));const Ie=W&&W.targetChanges.get(H.targetId),Be=W&&null!=W.targetMismatches.get(H.targetId),V=H.view.applyChanges(oe,R.isPrimaryClient,Ie,Be);return mS(R,H.targetId,V.wa),V.snapshot}),function S(R,H,F,W){return C.apply(this,arguments)})(n,m,_,I);var C};const s=yield II(n.localStore,e,!0),o=new QB(e,s.Ts),a=o.ma(s.documents),u=Em.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=o.applyChanges(a,n.isPrimaryClient,u);mS(n,t,l.wa);const f=new une(e,t,o);return n.Fa.set(e,f),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot}),sS.apply(this,arguments)}function fne(n,e,t){return oS.apply(this,arguments)}function oS(){return(oS=(0,Q.A)(function*(n,e,t){const r=Te(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!hm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Xh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ef(r.remoteStore,i.targetId),uf(r,i.targetId)}).catch(hu))):(uf(r,i.targetId),yield Xh(r.localStore,i.targetId,!0))})).apply(this,arguments)}function pne(n,e){return aS.apply(this,arguments)}function aS(){return(aS=(0,Q.A)(function*(n,e){const t=Te(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ef(t.remoteStore,r.targetId))})).apply(this,arguments)}function uS(){return(uS=(0,Q.A)(function*(n,e,t){const r=DS(n);try{const i=yield function(o,a){const u=Te(o),l=Pn.now(),f=a.reduce((I,C)=>I.add(C.key),lt());let m,_;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let C=$i(),S=lt();return u.cs.getEntries(I,f).next(R=>{C=R,C.forEach((H,F)=>{F.isValidDocument()||(S=S.add(H))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,C)).next(R=>{m=R;const H=[];for(const F of a){const W=jee(F,m.get(F.key).overlayedDocument);null!=W&&H.push(new va(F.key,W,$2(W.value.mapValue),Mn.exists(!0)))}return u.mutationQueue.addMutationBatch(I,l,H,a)}).next(R=>{_=R;const H=R.applyToLocalDocumentSet(m,S);return u.documentOverlayCache.saveOverlays(I,R.batchId,H)})}).then(()=>({batchId:_.batchId,changes:uU(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new mn(rt)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Ia(r,i.changes),yield tf(r.remoteStore)}catch(i){const s=rf(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function JB(n,e){return cS.apply(this,arguments)}function cS(){return(cS=(0,Q.A)(function*(n,e){const t=Te(n);try{const r=yield function Nte(n,e){const t=Te(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((f,m)=>{const _=i.get(m);if(!_)return;a.push(t.Ur.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(s,f.addedDocuments,m)));let I=_.withSequenceNumber(s.currentSequenceNumber);var S,R,H;null!==e.targetMismatches.get(m)?I=I.withResumeToken(Kn.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):f.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(f.resumeToken,r)),i=i.insert(m,I),R=I,H=f,(0===(S=_).resumeToken.approximateByteSize()||R.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8||H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,I))});let u=$i(),l=lt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(bB(s,o,e.documentUpdates).next(f=>{u=f.Ps,l=f.Is})),!r.isEqual(je.min())){const f=t.Ur.getLastRemoteSnapshotVersion(s).next(m=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Le(o.va):i.removedDocuments.size>0&&(Le(o.va),o.va=!1))}),yield Ia(t,r,e)}catch(r){yield hu(r)}})).apply(this,arguments)}function XB(n,e,t){const r=Te(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Te(o);u.onlineState=a;let l=!1;u.queries.forEach((f,m)=>{for(const _ of m.j_)_.Z_(a)&&(l=!0)}),l&&XD(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mne(n,e,t){return lS.apply(this,arguments)}function lS(){return(lS=(0,Q.A)(function*(n,e,t){const r=Te(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new mn(Re.comparator);o=o.insert(s,An.newNoDocument(s,je.min()));const a=lt().add(s),u=new vm(je.min(),new Map,new mn(rt),o,a);yield JB(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),_S(r)}else yield Xh(r.localStore,e,!1).then(()=>uf(r,e,t)).catch(hu)})).apply(this,arguments)}function _ne(n,e){return dS.apply(this,arguments)}function dS(){return(dS=(0,Q.A)(function*(n,e){const t=Te(n),r=e.batch.batchId;try{const i=yield function Mte(n,e){const t=Te(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,f){const m=l.batch,_=m.keys();let I=q.resolve();return _.forEach(C=>{I=I.next(()=>f.getEntry(u,C)).next(S=>{const R=l.docVersions.get(C);Le(null!==R),S.version.compareTo(R)<0&&(m.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),f.addEntry(S)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=lt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);gS(t,r,null),pS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ia(t,i)}catch(i){yield hu(i)}})).apply(this,arguments)}function yne(n,e,t){return hS.apply(this,arguments)}function hS(){return(hS=(0,Q.A)(function*(n,e,t){const r=Te(n);try{const i=yield function(o,a){const u=Te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(m=>(Le(null!==m),f=m.keys(),u.mutationQueue.removeMutationBatch(l,m))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})}(r.localStore,e);gS(r,e,t),pS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ia(r,i)}catch(i){yield hu(i)}})).apply(this,arguments)}function fS(){return(fS=(0,Q.A)(function*(n,e){const t=Te(n);Tu(t.remoteStore)||ce("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Te(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=rf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function pS(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function gS(n,e,t){const r=Te(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function uf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||ZB(n,r)})}function ZB(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(ef(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),_S(n))}function mS(n,e,t){for(const r of t)r instanceof WB?(n.La.addReference(r.key,e),Ene(n,r)):r instanceof KB?(ce("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||ZB(n,r.key)):Fe()}function Ene(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ce("SyncEngine","New document in limbo: "+t),n.xa.add(r),_S(n))}function _S(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Re(bt.fromString(e)),r=n.qa.next();n.Na.set(r,new cne(t)),n.Oa=n.Oa.insert(t,r),bI(n.remoteStore,new Ea(oi(Lh(t.path)),r,"TargetPurposeLimboResolution",os.oe))}}function Ia(n,e,t){return yS.apply(this,arguments)}function yS(){return yS=(0,Q.A)(function*(n,e,t){const r=Te(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,t).then(l=>{var f;if((l||t)&&r.isPrimaryClient){const m=l?!l.fromCache:null===(f=t?.targetChanges.get(u.targetId))||void 0===f?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(l){i.push(l);const m=yD.Wi(u.targetId,l);s.push(m)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,Q.A)(function*(l,f){const m=Te(l);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>q.forEach(f,I=>q.forEach(I.$i,C=>m.persistence.referenceDelegate.addReference(_,I.targetId,C)).next(()=>q.forEach(I.Ui,C=>m.persistence.referenceDelegate.removeReference(_,I.targetId,C)))))}catch(_){if(!fu(_))throw _;ce("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of f){const I=_.targetId;if(!_.fromCache){const C=m.os.get(I),R=C.withLastLimboFreeSnapshotVersion(C.snapshotVersion);m.os=m.os.insert(I,R)}}}),function u(l,f){return a.apply(this,arguments)})(r.localStore,s))}),yS.apply(this,arguments)}function Ine(n,e){return vS.apply(this,arguments)}function vS(){return(vS=(0,Q.A)(function*(n,e){const t=Te(n);if(!t.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const r=yield TB(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(u=>{u.reject(new ue(J.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ia(t,r.hs)}var s})).apply(this,arguments)}function wne(n,e){const t=Te(n),r=t.Na.get(e);if(r&&r.va)return lt().add(r.key);{let i=lt();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function Cne(n,e){return ES.apply(this,arguments)}function ES(){return(ES=(0,Q.A)(function*(n,e){const t=Te(n),r=yield II(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&mS(t,e.targetId,i.wa),i})).apply(this,arguments)}function Tne(n,e){return IS.apply(this,arguments)}function IS(){return(IS=(0,Q.A)(function*(n,e){const t=Te(n);return SB(t.localStore,e).then(r=>Ia(t,r))})).apply(this,arguments)}function Ane(n,e,t,r){return wS.apply(this,arguments)}function wS(){return(wS=(0,Q.A)(function*(n,e,t,r){const i=Te(n),s=yield function(a,u){const l=Te(a),f=Te(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.Mn(m,u).next(_=>_?l.localDocuments.getDocuments(m,_):q.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield tf(i.remoteStore):"acknowledged"===t||"rejected"===t?(gS(i,e,r||null),pS(i,e),u=e,Te(Te(i.localStore).mutationQueue).On(u)):Fe(),yield Ia(i,s)):ce("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function CS(){return(CS=(0,Q.A)(function*(n,e){const t=Te(n);if(SI(t),DS(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield ej(t,r.toArray());t.Qa=!0,yield GD(t.remoteStore,!0);for(const s of i)bI(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(uf(t,o),Xh(t.localStore,o,!0))),ef(t.remoteStore,o)}),yield i,yield ej(t,r),function(o){const a=Te(o);a.Na.forEach((u,l)=>{ef(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new mn(Re.comparator)}(t),t.Qa=!1,yield GD(t.remoteStore,!1)}})).apply(this,arguments)}function ej(n,e,t){return TS.apply(this,arguments)}function TS(){return(TS=(0,Q.A)(function*(n,e,t){const r=Te(n),i=[],s=[];for(const o of e){let a;const u=r.Ma.get(o);if(u&&0!==u.length){a=yield Jh(r.localStore,oi(u[0]));for(const l of u){const f=r.Fa.get(l),m=yield Cne(r,f);m.snapshot&&s.push(m.snapshot)}}else{const l=yield DB(r.localStore,o);a=yield Jh(r.localStore,l),yield iS(r,tj(l),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function tj(n){return eU(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Dne(n){return t=Te(n).localStore,Te(Te(t).persistence).Qi();var t}function Sne(n,e,t,r){return AS.apply(this,arguments)}function AS(){return(AS=(0,Q.A)(function*(n,e,t,r){const i=Te(n);if(i.Qa)return void ce("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield SB(i.localStore,sU(s[0])),a=vm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Kn.EMPTY_BYTE_STRING);yield Ia(i,o,a);break}case"rejected":yield Xh(i.localStore,e,!0),uf(i,e,r);break;default:Fe()}})).apply(this,arguments)}function Rne(n,e,t){return bS.apply(this,arguments)}function bS(){return(bS=(0,Q.A)(function*(n,e,t){const r=SI(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ce("SyncEngine","Adding an already active target "+i);continue}const s=yield DB(r.localStore,i),o=yield Jh(r.localStore,s);yield iS(r,tj(s),o.targetId,!1,o.resumeToken),bI(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield Xh(r.localStore,i,!1).then(()=>{ef(r.remoteStore,i),uf(r,i)}).catch(hu))}})).apply(this,arguments)}function SI(n){const e=Te(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wne.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mne.bind(null,e),e.Ca.d_=ine.bind(null,e.eventManager),e.Ca.$a=sne.bind(null,e.eventManager),e}function DS(n){const e=Te(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_ne.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yne.bind(null,e),e}let cf=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,Q.A)(function*(){r.serializer=Pm(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return CB(this.persistence,new wB,t.initialUser,this.serializer)}Ga(t){return new pD(yI.Zr,this.serializer)}Wa(t){return new MB}terminate(){var t=this;return(0,Q.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class SS extends cf{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Q.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield DS(r.Ja.syncEngine),yield tf(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return CB(this.persistence,new wB,e.initialUser,this.serializer)}ja(e,t){return new fB(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new XZ(t,this.persistence);return new JZ(e.asyncQueue,r)}Ga(e){const t=_D(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ai.withCacheSize(this.cacheSizeBytes):ai.DEFAULT;return new mD(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,OB(),AI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new MB}}class nj extends SS{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Q.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof bD&&(r.sharedClientState.syncEngine={no:Ane.bind(null,i),ro:Sne.bind(null,i),io:Rne.bind(null,i),Qi:Dne.bind(null,i),eo:Tne.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,Q.A)(function*(o){yield function bne(n,e){return CS.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=OB();if(!bD.D(t))throw new ue(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=_D(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new bD(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let lf=(()=>{class n{initialize(t,r){var i=this;return(0,Q.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>XB(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=Ine.bind(null,i.syncEngine),yield GD(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new rne}createDatastore(t){const r=Pm(t.databaseInfo.databaseId),i=new Bte(t.databaseInfo);return new Hte(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>XB(this.syncEngine,r,0),u=NB.D()?new NB:new Vte,new Gte(i,s,o,a,u);var i,s,o,a,u}createSyncEngine(t,r){return function(s,o,a,u,l,f,m){const _=new lne(s,o,a,u,l,f);return m&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,Q.A)(function*(){var r,i,s;yield(s=(0,Q.A)(function*(a){const u=Te(a);ce("RemoteStore","RemoteStore shutting down."),u.L_.add(5),yield Zh(u),u.k_.shutdown(),u.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function rj(n,e=10240){let t=0;return{read:()=>(0,Q.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Q.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class RI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Mne{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Rr,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,Q.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,Q.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,Q.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new one(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,Q.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,Q.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,Q.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Nne{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Q.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ue(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,Q.A)(function*(o,a){const u=Te(o),l={documents:a.map(I=>Im(u.serializer,I))},f=yield u.Lo("BatchGetDocuments",u.serializer.databaseId,bt.emptyPath(),l,a.length),m=new Map;f.forEach(I=>{const C=function Yee(n,e){return"found"in e?function(r,i){Le(!!i.found);const s=Co(r,i.found.name),o=or(i.found.updateTime),a=i.found.createTime?or(i.found.createTime):je.min(),u=new Hr({mapValue:{fields:i.found.fields}});return An.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){Le(!!i.missing),Le(!!i.readTime);const s=Co(r,i.missing),o=or(i.readTime);return An.newNoDocument(s,o)}(n,e):Fe()}(u.serializer,I);m.set(C.key.toString(),C)});const _=[];return a.forEach(I=>{const C=m.get(I.toString());Le(!!C),_.push(C)}),_}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new zh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Q.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Re.fromPath(i);e.mutations.push(new Y0(s,e.precondition(s)))}),yield(r=(0,Q.A)(function*(s,o){const a=Te(s),u={writes:o.map(l=>wm(a.serializer,l))};yield a.Mo("Commit",a.serializer.databaseId,bt.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Fe();t=je.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ue(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(je.min())?Mn.exists(!1):Mn.updateTime(t):Mn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(je.min()))throw new ue(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mn.updateTime(t)}return Mn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class One{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new SD(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,Q.A)(function*(){const t=new Nne(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!im(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!CU(t)}return!1}}class kne{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Sr.UNAUTHENTICATED,this.clientId=p2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,Q.A)(function*(u){ce("FirestoreClient","Received user=",u.uid),yield o.authCredentialListener(u),o.user=u});return function(u){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(ce("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Q.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=rf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function RS(n,e){return PS.apply(this,arguments)}function PS(){return PS=(0,Q.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Q.A)(function*(s){r.isEqual(s)||(yield TB(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),PS.apply(this,arguments)}function ij(n,e){return xS.apply(this,arguments)}function xS(){return(xS=(0,Q.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield MS(n);ce("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>jB(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>jB(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function MS(n){return NS.apply(this,arguments)}function NS(){return(NS=(0,Q.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{yield RS(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;is("Error using user provided cache. Falling back to memory cache: "+e),yield RS(n,new cf)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),yield RS(n,new cf);var i;return n._offlineComponents})).apply(this,arguments)}function PI(n){return OS.apply(this,arguments)}function OS(){return(OS=(0,Q.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),yield ij(n,n._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),yield ij(n,new lf))),n._onlineComponents})).apply(this,arguments)}function sj(n){return MS(n).then(e=>e.persistence)}function df(n){return MS(n).then(e=>e.localStore)}function oj(n){return PI(n).then(e=>e.remoteStore)}function kS(n){return PI(n).then(e=>e.syncEngine)}function hf(n){return FS.apply(this,arguments)}function FS(){return(FS=(0,Q.A)(function*(n){const e=yield PI(n),t=e.eventManager;return t.onListen=dne.bind(null,e.syncEngine),t.onUnlisten=fne.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=hne.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pne.bind(null,e.syncEngine),t})).apply(this,arguments)}function uj(n,e,t={}){const r=new Rr;return n.asyncQueue.enqueueAndForget((0,Q.A)(function*(){return function(s,o,a,u,l){const f=new RI({next:_=>{f.Za(),o.enqueueAndForget(()=>YD(s,m));const I=_.docs.has(a);!I&&_.fromCache?l.reject(new ue(J.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&_.fromCache&&u&&"server"===u.source?l.reject(new ue(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(_)},error:_=>l.reject(_)}),m=new eS(Lh(a.path),f,{includeMetadataChanges:!0,_a:!0});return KD(s,m)}(yield hf(n),n.asyncQueue,e,t,r)})),r.promise}function cj(n,e,t={}){const r=new Rr;return n.asyncQueue.enqueueAndForget((0,Q.A)(function*(){return function(s,o,a,u,l){const f=new RI({next:_=>{f.Za(),o.enqueueAndForget(()=>YD(s,m)),_.fromCache&&"server"===u.source?l.reject(new ue(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(_)},error:_=>l.reject(_)}),m=new eS(a,f,{includeMetadataChanges:!0,_a:!0});return KD(s,m)}(yield hf(n),n.asyncQueue,e,t,r)})),r.promise}function lj(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const dj=new Map;function VS(n,e,t){if(!t)throw new ue(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hj(n,e,t,r){if(!0===e&&!0===r)throw new ue(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fj(n){if(!Re.isDocumentKey(n))throw new ue(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function pj(n){if(Re.isDocumentKey(n))throw new ue(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Fe()}function Et(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xI(n);throw new ue(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function gj(n,e){if(e<=0)throw new ue(J.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class mj{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ue(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ue(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=lj(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mj({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ue(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mj(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new UZ;switch(r.type){case"firstParty":return new HZ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,Q.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=dj.get(t);r&&(ce("ComponentProvider","Removing Datastore"),dj.delete(t),r.terminate())}(this),Promise.resolve()}}class zr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class bn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new To(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bn(this.firestore,e,this._key)}}class To extends zr{constructor(e,t,r){super(e,t,Lh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bn(this.firestore,null,new Re(e))}withConverter(e){return new To(this.firestore,e,this._path)}}function yj(n,e,...t){if(n=(0,Ht.Ku)(n),VS("collection","path",e),n instanceof Mm){const r=bt.fromString(e,...t);return pj(r),new To(n,null,r)}{if(!(n instanceof bn||n instanceof To))throw new ue(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bt.fromString(e,...t));return pj(r),new To(n.firestore,null,r)}}function MI(n,e,...t){if(n=(0,Ht.Ku)(n),1===arguments.length&&(e=p2.newId()),VS("doc","path",e),n instanceof Mm){const r=bt.fromString(e,...t);return fj(r),new bn(n,null,new Re(r))}{if(!(n instanceof bn||n instanceof To))throw new ue(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bt.fromString(e,...t));return fj(r),new bn(n.firestore,n instanceof To?n.converter:null,new Re(r))}}function vj(n,e){return n=(0,Ht.Ku)(n),e=(0,Ht.Ku)(e),(n instanceof bn||n instanceof To)&&(e instanceof bn||e instanceof To)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LS(n,e){return n=(0,Ht.Ku)(n),e=(0,Ht.Ku)(e),n instanceof zr&&e instanceof zr&&n.firestore===e.firestore&&hm(n._query,e._query)&&n.converter===e.converter}class Ej{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new SD(this,"async_queue_retry"),this.Vu=()=>{const r=AI();r&&ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=AI();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=AI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Rr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,Q.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!fu(t))throw t;ce("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,sr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=WD.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Fe()}verifyOperationInProgress(){}wu(){var e=this;return(0,Q.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function US(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class Kne{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nn extends Mm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ej,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,Q.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new Ej(t),e._firestoreClient=void 0,yield t}})()}}function Nn(n){if(n._terminated)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ij(n),n._firestoreClient}function Ij(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Eee(n._databaseId,u,n._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,lj(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new kne(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function BS(){return(BS=(0,Q.A)(function*(n){is("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();wj(n,lf.provider,{build:t=>new nj(t,e.cacheSizeBytes)})})).apply(this,arguments)}function wj(n,e,t){if((n=Et(n,nn))._firestoreClient||n._terminated)throw new ue(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ue(J.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Ij(n)}class Ao{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ao(Kn.fromBase64String(e))}catch(t){throw new ue(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ao(Kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class wa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ue(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ul{constructor(e){this._methodName=e}}class NI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}class OI{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const sre=/^__.*__$/;class ore{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new va(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hh(e,this.data,t,this.fieldTransforms)}}class Cj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new va(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Tj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe()}}class kI{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new kI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return LI(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Tj(this.Cu)&&sre.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class are{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Pm(e)}Qu(e,t,r,i=!1){return new kI({Cu:e,methodName:t,qu:r,path:Tn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cl(n){const e=n._freezeSettings(),t=Pm(n._databaseId);return new are(n._databaseId,!!e.ignoreUndefinedProperties,t)}function FI(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);WS("Data must be an object, but it was:",o,r);const a=Dj(r,o);let u,l;if(s.merge)u=new ji(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const _=km(e,m,t);if(!o.contains(_))throw new ue(J.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Rj(f,_)||f.push(_)}u=new ji(f),l=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,l=o.fieldTransforms;return new ore(new Hr(a),u,l)}class Om extends ul{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Om}}function Aj(n,e,t){return new kI({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class jS extends ul{_toFieldTransform(e){return new mm(e.path,new jh)}isEqual(e){return e instanceof jS}}class $S extends ul{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Aj(this,e,!0),r=this.Ku.map(s=>ll(s,t)),i=new Zc(r);return new mm(e.path,i)}isEqual(e){return e instanceof $S&&(0,Ht.bD)(this.Ku,e.Ku)}}class HS extends ul{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Aj(this,e,!0),r=this.Ku.map(s=>ll(s,t)),i=new el(r);return new mm(e.path,i)}isEqual(e){return e instanceof HS&&(0,Ht.bD)(this.Ku,e.Ku)}}class zS extends ul{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new $h(e.serializer,dU(e.serializer,this.$u));return new mm(e.path,t)}isEqual(e){return e instanceof zS&&this.$u===e.$u}}function GS(n,e,t,r){const i=n.Qu(1,e,t);WS("Data must be an object, but it was:",i,r);const s=[],o=Hr.empty();pu(r,(u,l)=>{const f=VI(e,u,t);l=(0,Ht.Ku)(l);const m=i.Nu(f);if(l instanceof Om)s.push(f);else{const _=ll(l,m);null!=_&&(s.push(f),o.set(f,_))}});const a=new ji(s);return new Cj(o,a,i.fieldTransforms)}function qS(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[km(e,r,t)],u=[i];if(s.length%2!=0)throw new ue(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(km(e,s[_])),u.push(s[_+1]);const l=[],f=Hr.empty();for(let _=a.length-1;_>=0;--_)if(!Rj(l,a[_])){const I=a[_];let C=u[_];C=(0,Ht.Ku)(C);const S=o.Nu(I);if(C instanceof Om)l.push(I);else{const R=ll(C,S);null!=R&&(l.push(I),f.set(I,R))}}const m=new ji(l);return new Cj(f,m,o.fieldTransforms)}function bj(n,e,t,r=!1){return ll(t,n.Qu(r?4:3,e))}function ll(n,e){if(Sj(n=(0,Ht.Ku)(n)))return WS("Unsupported field value:",e,n),Dj(n,e);if(n instanceof ul)return function(r,i){if(!Tj(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=ll(a,i.Lu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,Ht.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return dU(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Pn.fromDate(r);return{timestampValue:Gh(i.serializer,s)}}if(r instanceof Pn){const s=new Pn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gh(i.serializer,s)}}if(r instanceof NI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ao)return{bytesValue:NU(i.serializer,r._byteString)};if(r instanceof bn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:nD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof OI)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.Bu("VectorValues must only contain numeric values.");return Q0(a.serializer,u)})}}}}};var a;throw i.Bu(`Unsupported field value: ${xI(r)}`)}(n,e)}function Dj(n,e){const t={};return x2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pu(n,(r,i)=>{const s=ll(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Sj(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Pn||n instanceof NI||n instanceof Ao||n instanceof bn||n instanceof ul||n instanceof OI)}function WS(n,e,t){if(!Sj(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=xI(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function km(n,e,t){if((e=(0,Ht.Ku)(e))instanceof wa)return e._internalPath;if("string"==typeof e)return VI(n,e);throw LI("Field path arguments must be of type string or ",n,!1,void 0,t)}const ure=new RegExp("[~\\*/\\[\\]]");function VI(n,e,t){if(e.search(ure)>=0)throw LI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wa(...e.split("."))._internalPath}catch{throw LI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function LI(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ue(J.INVALID_ARGUMENT,a+n+u)}function Rj(n,e){return n.some(t=>t.isEqual(e))}class Fm{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new bn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cre(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(UI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cre extends Fm{data(){return super.data()}}function UI(n,e){return"string"==typeof e?VI(n,e):e instanceof wa?e._internalPath:e._delegate._internalPath}function Pj(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ue(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KS{}class Vm extends KS{}function bu(n,e,...t){let r=[];e instanceof KS&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof ff).length,a=s.filter(u=>u instanceof Lm).length;if(o>1||o>0&&a>0)throw new ue(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Lm extends Vm{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Lm(e,t,r)}_apply(e){const t=this._parse(e);return Oj(e._query,t),new zr(e.firestore,e.converter,W0(e._query,t))}_parse(e){const t=cl(e.firestore);return function(s,o,a,u,l,f,m){let _;if(l.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new ue(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){Nj(m,f);const I=[];for(const C of m)I.push(Mj(u,s,C));_={arrayValue:{values:I}}}else _=Mj(u,s,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||Nj(m,f),_=bj(a,"where",m,"in"===f||"not-in"===f);return Dt.create(l,f,_)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ff extends KS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ff(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Yt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)Oj(o,u),o=W0(o,u)}(e._query,t),new zr(e.firestore,e.converter,W0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class QS extends Vm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new QS(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new ue(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ue(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lm(s,o)}(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new _a(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class BI extends Vm{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new BI(e,t,r)}_apply(e){return new zr(e.firestore,e.converter,iI(e._query,this._limit,this._limitType))}}class jI extends Vm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new jI(e,t,r)}_apply(e){const t=xj(e,this.type,this._docOrFields,this._inclusive);return new zr(e.firestore,e.converter,(s=t,new _a((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class $I extends Vm{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new $I(e,t,r)}_apply(e){const t=xj(e,this.type,this._docOrFields,this._inclusive);return new zr(e.firestore,e.converter,(s=t,new _a((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function xj(n,e,t,r){if(t[0]=(0,Ht.Ku)(t[0]),t[0]instanceof Fm)return function(s,o,a,u,l){if(!u)throw new ue(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of Uh(s))if(m.field.isKeyField())f.push(Jc(o,u.key));else{const _=u.data.field(m.field);if(YE(_))throw new ue(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const I=m.field.canonicalString();throw new ue(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}f.push(_)}return new vu(f,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=cl(n.firestore);return function(o,a,u,l,f,m){const _=o.explicitOrderBy;if(f.length>_.length)throw new ue(J.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let C=0;C<f.length;C++){const S=f[C];if(_[C].field.isKeyField()){if("string"!=typeof S)throw new ue(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof S}`);if(!q0(o)&&-1!==S.indexOf("/"))throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${S}' contains a slash.`);const R=o.path.child(bt.fromString(S));if(!Re.isDocumentKey(R))throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);const H=new Re(R);I.push(Jc(a,H))}else{const R=bj(u,l,S);I.push(R)}}return new vu(I,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Mj(n,e,t){if("string"==typeof(t=(0,Ht.Ku)(t))){if(""===t)throw new ue(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!q0(e)&&-1!==t.indexOf("/"))throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(bt.fromString(t));if(!Re.isDocumentKey(r))throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jc(n,new Re(r))}if(t instanceof bn)return Jc(n,t._key);throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xI(t)}.`)}function Nj(n,e){if(!Array.isArray(n)||0===n.length)throw new ue(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Oj(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ue(J.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class YS{convertValue(e,t="none"){switch(_u(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ma(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return pu(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>xn(o.doubleValue));return new OI(s)}convertGeoPoint(e){return new NI(xn(e.latitude),xn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=JE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(om(e));default:return null}}convertTimestamp(e){const t=ga(e);return new Pn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=bt.fromString(e);Le(GU(r));const i=new gu(r.get(1),r.get(3)),s=new Re(r.popFirst(5));return i.isEqual(t)||sr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function HI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class yre extends YS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ao(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,t)}}class dl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ca extends Fm{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Um(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(UI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Um extends Ca{data(e={}){return super.data(e)}}class Du{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new dl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Um(this._firestore,this._userDataWriter,r.key,r,new dl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Um(i._firestore,i._userDataWriter,a.doc.key,a.doc,new dl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new Um(i._firestore,i._userDataWriter,a.doc.key,a.doc,new dl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,f=-1;return 0!==a.type&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:Ere(a.type),doc:u,oldIndex:l,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ere(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe()}}function Fj(n,e){return n instanceof Ca&&e instanceof Ca?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Du&&e instanceof Du&&n._firestore===e._firestore&&LS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Su extends YS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ao(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,t)}}function Vj(n,e,t){n=Et(n,bn);const r=Et(n.firestore,nn),i=HI(n.converter,e,t);return pf(r,[FI(cl(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Mn.none())])}function Lj(n,e,t,...r){n=Et(n,bn);const i=Et(n.firestore,nn),s=cl(i);let o;return o="string"==typeof(e=(0,Ht.Ku)(e))||e instanceof wa?qS(s,"updateDoc",n._key,e,t,r):GS(s,"updateDoc",n._key,e),pf(i,[o.toMutation(n._key,Mn.exists(!0))])}function Uj(n,...e){var t,r,i;n=(0,Ht.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||US(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(US(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,l,f;if(n instanceof bn)l=Et(n.firestore,nn),f=Lh(n._key.path),u={next:m=>{e[o]&&e[o](JS(l,n,m))},error:e[o+1],complete:e[o+2]};else{const m=Et(n,zr);l=Et(m.firestore,nn),f=m._query;const _=new Su(l);u={next:I=>{e[o]&&e[o](new Du(l,_,m,I))},error:e[o+1],complete:e[o+2]},Pj(n._query)}return function(_,I,C,S){const R=new RI(S),H=new eS(I,R,C);return _.asyncQueue.enqueueAndForget((0,Q.A)(function*(){return KD(yield hf(_),H)})),()=>{R.Za(),_.asyncQueue.enqueueAndForget((0,Q.A)(function*(){return YD(yield hf(_),H)}))}}(Nn(l),f,a,u)}function pf(n,e){return function(r,i){const s=new Rr;return r.asyncQueue.enqueueAndForget((0,Q.A)(function*(){return function gne(n,e,t){return uS.apply(this,arguments)}(yield kS(r),i,s)})),s.promise}(Nn(n),e)}function JS(n,e,t){const r=t.docs.get(e._key),i=new Su(n);return new Ca(n,i,e._key,r,new dl(t.hasPendingWrites,t.fromCache),e.converter)}const Lre={maxAttempts:5};class Bj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cl(e)}set(e,t,r){this._verifyNotCommitted();const i=Ru(e,this._firestore),s=HI(i.converter,t,r),o=FI(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Mn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Ru(e,this._firestore);let o;return o="string"==typeof(t=(0,Ht.Ku)(t))||t instanceof wa?qS(this._dataReader,"WriteBatch.update",s._key,t,r,i):GS(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Mn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ru(e,this._firestore);return this._mutations=this._mutations.concat(new zh(t._key,Mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ue(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ru(n,e){if((n=(0,Ht.Ku)(n)).firestore!==e)throw new ue(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ure extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=cl(t)}get(t){const r=Ru(t,this._firestore),i=new yre(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Fe();const o=s[0];if(o.isFoundDocument())return new Fm(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Fm(this._firestore,i,r._key,null,r.converter);throw Fe()})}set(t,r,i){const s=Ru(t,this._firestore),o=HI(s.converter,r,i),a=FI(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Ru(t,this._firestore);let a;return a="string"==typeof(r=(0,Ht.Ku)(r))||r instanceof wa?qS(this._dataReader,"Transaction.update",o._key,r,i,s):GS(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Ru(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ru(e,this._firestore),r=new Su(this._firestore);return super.get(e).then(i=>new Ca(this._firestore,r,t._key,i._document,new dl(!1,!1),t.converter))}}function ZS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function zj(){if(typeof Uint8Array>"u")throw new ue("unimplemented","Uint8Arrays are not available in this environment.")}function Gj(){if(!function yee(){return typeof atob<"u"}())throw new ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Ph=Dh.SDK_VERSION,(0,Dh._registerComponent)(new n2.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new nn(new jZ(r.getProvider("auth-internal")),new zZ(r.getProvider("app-check-internal")),function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ue(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gu(l.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Dh.registerVersion)(d2,"4.7.3",e),(0,Dh.registerVersion)(d2,"4.7.3","esm2017")}();class Bm{constructor(e){this._delegate=e}static fromBase64String(e){return Gj(),new Bm(Ao.fromBase64String(e))}static fromUint8Array(e){return zj(),new Bm(Ao.fromUint8Array(e))}toBase64(){return Gj(),this._delegate.toBase64()}toUint8Array(){return zj(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eR(n){return function Qre(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Yre{enableIndexedDbPersistence(e,t){return function Yne(n,e){is("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return wj(n,lf.provider,{build:r=>new SS(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Jne(n){return BS.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function Xne(n){if(n._initialized&&!n._terminated)throw new ue(J.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Q.A)(function*(){try{yield(t=(0,Q.A)(function*(i){if(!vo.D())return Promise.resolve();const s=i+"main";yield vo.delete(s)}),function r(i){return t.apply(this,arguments)})(_D(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class qj{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof gu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&is("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function _j(n,e,t,r={}){var i;const s=(n=Et(n,Mm))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&is("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Sr.MOCK_USER;else{a=(0,Ht.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new ue(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Sr(l)}n._authCredentials=new BZ(new h2(a,u))}}(this._delegate,e,t,r)}enableNetwork(){return function ere(n){return function Fne(n){return n.asyncQueue.enqueue((0,Q.A)(function*(){const e=yield sj(n),t=yield oj(n);return e.setNetworkEnabled(!0),function(i){const s=Te(i);return s.L_.delete(0),xm(s)}(t)}))}(Nn(n=Et(n,nn)))}(this._delegate)}disableNetwork(){return function tre(n){return function Vne(n){return n.asyncQueue.enqueue((0,Q.A)(function*(){const e=yield sj(n),t=yield oj(n);return e.setNetworkEnabled(!1),(r=(0,Q.A)(function*(s){const o=Te(s);o.L_.add(0),yield Zh(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Nn(n=Et(n,nn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,hj("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Zne(n){return function(t){const r=new Rr;return t.asyncQueue.enqueueAndForget((0,Q.A)(function*(){return function vne(n,e){return fS.apply(this,arguments)}(yield kS(t),r)})),r.promise}(Nn(n=Et(n,nn)))}(this._delegate)}onSnapshotsInSync(e){return function Rre(n,e){return function jne(n,e){const t=new RI(e);return n.asyncQueue.enqueueAndForget((0,Q.A)(function*(){return i=yield hf(n),s=t,Te(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,Q.A)(function*(){return i=yield hf(n),s=t,void Te(i).Y_.delete(s);var i,s}))}}(Nn(n=Et(n,nn)),US(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gf(this,yj(this._delegate,e))}catch(t){throw bi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Cs(this,MI(this._delegate,e))}catch(t){throw bi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Di(this,function Wne(n,e){if(n=Et(n,Mm),VS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ue(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zr(n,null,(r=e,new _a(bt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw bi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Bre(n,e,t){n=Et(n,nn);const r=Object.assign(Object.assign({},Lre),t);return function(s){if(s.maxAttempts<1)throw new ue(J.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new Rr;return s.asyncQueue.enqueueAndForget((0,Q.A)(function*(){const l=yield function aj(n){return PI(n).then(e=>e.datastore)}(s);new One(s.asyncQueue,l,a,o,u).au()})),u.promise}(Nn(n),i=>e(new Ure(n,i)),r)}(this._delegate,t=>e(new Wj(this,t)))}batch(){return Nn(this._delegate),new Kj(new Bj(this._delegate,e=>pf(this._delegate,e)))}loadBundle(e){return function nre(n,e){const t=Nn(n=Et(n,nn)),r=new Kne;return function $ne(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?AU().encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return rj(f,m);if(f instanceof ArrayBuffer)return rj(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new Mne(f,a);var f}(t,Pm(e));n.asyncQueue.enqueueAndForget((0,Q.A)(function*(){!function Pne(n,e,t){const r=Te(n);var i;(i=(0,Q.A)(function*(o,a,u){try{const l=yield a.getMetadata();if(yield function(C,S){const R=Te(C),H=or(S.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",F=>R.Gr.getBundleMetadata(F,S.id)).then(F=>!!F&&F.createTime.compareTo(H)>=0)}(o.localStore,l))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(C=l).totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}),Promise.resolve(new Set);u._updateProgress(qB(l));const f=new ane(l,o.localStore,a.serializer);let m=yield a.Ua();for(;m;){const I=yield f.la(m);I&&u._updateProgress(I),m=yield a.Ua()}const _=yield f.complete();return yield Ia(o,_.Ia,void 0),yield function(C,S){const R=Te(C);return R.persistence.runTransaction("Save bundle","readwrite",H=>R.Gr.saveBundleMetadata(H,S))}(o.localStore,l),u._completeWith(_.progress),Promise.resolve(_.Pa)}catch(l){return is("SyncEngine",`Loading bundle failed with ${l}`),u._failWith(l),Promise.resolve(new Set)}var C}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield kS(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function rre(n,e){return function Hne(n,e){return n.asyncQueue.enqueue((0,Q.A)(function*(){return function(r,i){const s=Te(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield df(n),e)}))}(Nn(n=Et(n,nn)),e).then(t=>t?new zr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Di(this,t):null)}}class GI extends YS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bm(new Ao(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Cs.forKey(t,this.firestore,null)}}class Wj{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new GI(e)}get(e){const t=fl(e);return this._delegate.get(t).then(r=>new jm(this._firestore,new Ca(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=fl(e);return r?(ZS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=fl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=fl(e);return this._delegate.delete(t),this}}class Kj{constructor(e){this._delegate=e}set(e,t,r){const i=fl(e);return r?(ZS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=fl(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=fl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class hl{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Um(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $m(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=hl.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new hl(e,new GI(e),t),i.set(t,s)),s}}hl.INSTANCES=new WeakMap;class Cs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new GI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Cs(t,new bn(t._delegate,r,new Re(e)))}static forKey(e,t,r){return new Cs(t,new bn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new gf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gf(this.firestore,yj(this._delegate,e))}catch(t){throw bi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ht.Ku)(e))instanceof bn&&vj(this._delegate,e)}set(e,t){t=ZS("DocumentReference.set",t);try{return t?Vj(this._delegate,e,t):Vj(this._delegate,e)}catch(r){throw bi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Lj(this._delegate,e):Lj(this._delegate,e,t,...r)}catch(i){throw bi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Dre(n){return pf(Et(n.firestore,nn),[new zh(n._key,Mn.none())])}(this._delegate)}onSnapshot(...e){const t=Qj(e),r=Yj(e,i=>new jm(this.firestore,new Ca(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Uj(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function wre(n){n=Et(n,bn);const e=Et(n.firestore,nn),t=Nn(e),r=new Su(e);return function Lne(n,e){const t=new Rr;return n.asyncQueue.enqueueAndForget((0,Q.A)(function*(){return(r=(0,Q.A)(function*(s,o,a){try{const u=yield function(f,m){const _=Te(f);return _.persistence.runTransaction("read document","readonly",I=>_.localDocuments.getDocument(I,m))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ue(J.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const l=rf(u,`Failed to get document '${o} from cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield df(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Ca(e,r,n._key,i,new dl(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Cre(n){n=Et(n,bn);const e=Et(n.firestore,nn);return uj(Nn(e),n._key,{source:"server"}).then(t=>JS(e,n,t))}(this._delegate):function Ire(n){n=Et(n,bn);const e=Et(n.firestore,nn);return uj(Nn(e),n._key).then(t=>JS(e,n,t))}(this._delegate),t.then(r=>new jm(this.firestore,new Ca(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Cs(this.firestore,this._delegate.withConverter(e?hl.getInstance(this.firestore,e):null))}}function bi(n,e,t){return n.message=n.message.replace(e,t),n}function Qj(n){for(const e of n)if("object"==typeof e&&!eR(e))return e;return{}}function Yj(n,e){var t,r;let i;return i=eR(n[0])?n[0]:eR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class jm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Cs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Fj(this._delegate,e._delegate)}}class $m extends jm{data(e){const t=this._delegate.data(e);return this._delegate._converter||function LZ(n,e){n||Fe()}(void 0!==t),t}}class Di{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new GI(e)}where(e,t,r){try{return new Di(this.firestore,bu(this._delegate,function lre(n,e,t){const r=e,i=UI("where",n);return Lm._create(i,r,t)}(e,t,r)))}catch(i){throw bi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Di(this.firestore,bu(this._delegate,function dre(n,e="asc"){const t=e,r=UI("orderBy",n);return QS._create(r,t)}(e,t)))}catch(r){throw bi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Di(this.firestore,bu(this._delegate,function hre(n){return gj("limit",n),BI._create("limit",n,"F")}(e)))}catch(t){throw bi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Di(this.firestore,bu(this._delegate,function fre(n){return gj("limitToLast",n),BI._create("limitToLast",n,"L")}(e)))}catch(t){throw bi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Di(this.firestore,bu(this._delegate,function pre(...n){return jI._create("startAt",n,!0)}(...e)))}catch(t){throw bi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Di(this.firestore,bu(this._delegate,function gre(...n){return jI._create("startAfter",n,!1)}(...e)))}catch(t){throw bi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Di(this.firestore,bu(this._delegate,function mre(...n){return $I._create("endBefore",n,!1)}(...e)))}catch(t){throw bi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Di(this.firestore,bu(this._delegate,function _re(...n){return $I._create("endAt",n,!0)}(...e)))}catch(t){throw bi(t,"endAt()","Query.endAt()")}}isEqual(e){return LS(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Are(n){n=Et(n,zr);const e=Et(n.firestore,nn),t=Nn(e),r=new Su(e);return function Une(n,e){const t=new Rr;return n.asyncQueue.enqueueAndForget((0,Q.A)(function*(){return(r=(0,Q.A)(function*(s,o,a){try{const u=yield II(s,o,!0),l=new QB(o,u.Ts),f=l.ma(u.documents),m=l.applyChanges(f,!1);a.resolve(m.snapshot)}catch(u){const l=rf(u,`Failed to execute query '${o} against cache`);a.reject(l)}}),function i(s,o,a){return r.apply(this,arguments)})(yield df(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Du(e,r,n,i))}(this._delegate):"server"===e?.source?function bre(n){n=Et(n,zr);const e=Et(n.firestore,nn),t=Nn(e),r=new Su(e);return cj(t,n._query,{source:"server"}).then(i=>new Du(e,r,n,i))}(this._delegate):function Tre(n){n=Et(n,zr);const e=Et(n.firestore,nn),t=Nn(e),r=new Su(e);return Pj(n._query),cj(t,n._query).then(i=>new Du(e,r,n,i))}(this._delegate),t.then(r=>new tR(this.firestore,new Du(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Qj(e),r=Yj(e,i=>new tR(this.firestore,new Du(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Uj(this._delegate,t,r)}withConverter(e){return new Di(this.firestore,this._delegate.withConverter(e?hl.getInstance(this.firestore,e):null))}}class Xre{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $m(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Di(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $m(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Xre(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $m(this._firestore,r))})}isEqual(e){return Fj(this._delegate,e._delegate)}}class gf extends Di{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Cs(this.firestore,e):null}doc(e){try{return new Cs(this.firestore,void 0===e?MI(this._delegate):MI(this._delegate,e))}catch(t){throw bi(t,"doc()","CollectionReference.doc()")}}add(e){return function Sre(n,e){const t=Et(n.firestore,nn),r=MI(n),i=HI(n.converter,e);return pf(t,[FI(cl(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Mn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Cs(this.firestore,t))}isEqual(e){return vj(this._delegate,e._delegate)}withConverter(e){return new gf(this.firestore,this._delegate.withConverter(e?hl.getInstance(this.firestore,e):null))}}function fl(n){return Et(n,bn)}class nR{constructor(...e){this._delegate=new wa(...e)}static documentId(){return new nR(Tn.keyField().canonicalString())}isEqual(e){return(e=(0,Ht.Ku)(e))instanceof wa&&this._delegate._internalPath.isEqual(e._internalPath)}}class pl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function $re(){return new jS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new pl(e)}static delete(){const e=function jre(){return new Om("deleteField")}();return e._methodName="FieldValue.delete",new pl(e)}static arrayUnion(...e){const t=function Hre(...n){return new $S("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new pl(t)}static arrayRemove(...e){const t=function zre(...n){return new HS("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new pl(t)}static increment(e){const t=function Gre(n){return new zS("increment",n)}(e);return t._methodName="FieldValue.increment",new pl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Zre={Firestore:qj,GeoPoint:NI,Timestamp:Pn,Blob:Bm,Transaction:Wj,WriteBatch:Kj,DocumentReference:Cs,DocumentSnapshot:jm,Query:Di,QueryDocumentSnapshot:$m,QuerySnapshot:tR,CollectionReference:gf,FieldPath:nR,FieldValue:pl,setLogLevel:function Jre(n){!function VZ(n){du.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Jj(n,e){return function nie(n,e=UL){return new yt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function rR(n,e){return Jj(n,e).pipe(le(t=>({payload:t,type:"query"})))}!function tie(n){(function eie(n,e){n.INTERNAL.registerComponent(new n2.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Zre)))})(n,(e,t)=>new qj(e,t,new Yre)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(lu.A);class Xj{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=i$(r,t);return new t$(i,s,this.afs)}snapshotChanges(){return function rie(n,e){return Jj(n,e).pipe(CE(void 0),x0(),le(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(rs)}valueChanges(e={}){return this.snapshotChanges().pipe(le(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return A(this.ref.get(e)).pipe(rs)}}function qI(n,e){return rR(n,e).pipe(CE(void 0),x0(),le(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const l=s.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function Zj(n,e,t){return qI(n,t).pipe(AE((r,i)=>function iie(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function sie(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return iR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return iR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return iR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),zt(),le(r=>r.map(i=>({type:i.type,payload:i}))))}function iR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function e$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class t${ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=qI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(le(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(CE(void 0),x0(),Is(([r,i])=>i.length>0||!r),le(([,r])=>r),rs)}auditTrail(e){return this.stateChanges(e).pipe(AE((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=e$(e);return Zj(this.query,t,this.afs.schedulers.outsideAngular).pipe(rs)}valueChanges(e={}){return rR(this.query,this.afs.schedulers.outsideAngular).pipe(le(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),rs)}get(e){return A(this.query.get(e)).pipe(rs)}add(e){return this.ref.add(e)}doc(e){return new Xj(this.ref.doc(e),this.afs)}}class oie{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qI(this.query,this.afs.schedulers.outsideAngular).pipe(le(t=>t.filter(r=>e.indexOf(r.type)>-1)),Is(t=>t.length>0),rs):qI(this.query,this.afs.schedulers.outsideAngular).pipe(rs)}auditTrail(e){return this.stateChanges(e).pipe(AE((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=e$(e);return Zj(this.query,t,this.afs.schedulers.outsideAngular).pipe(rs)}valueChanges(e={}){return rR(this.query,this.afs.schedulers.outsideAngular).pipe(le(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),rs)}get(e){return A(this.query.get(e)).pipe(rs)}}const n$=new ve("angularfire2.enableFirestorePersistence"),r$=new ve("angularfire2.firestore.persistenceSettings"),aie=new ve("angularfire2.firestore.settings"),uie=new ve("angularfire2.firestore.use-emulator");function i$(n,e=(t=>t)){return{query:e(n),ref:n}}let cie=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,l,f,m,_,I,C,S,R,H,F){this.schedulers=u;const W=P0(t,a,r),oe=f;m&&e2(W,a,_,C,S,R,I,H),[this.firestore,this.persistenceEnabled$]=zL(`${W.name}.firestore`,"AngularFirestore",W.name,()=>{const Ie=a.runOutsideAngular(()=>W.firestore());if(s&&Ie.settings(s),oe&&Ie.useEmulator(...oe),i&&!yE(o)){const Be=()=>{try{return A(Ie.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(V){return typeof console<"u"&&console.warn(V),k(!1)}};return[Ie,a.runOutsideAngular(Be)]}return[Ie,k(!1)]},[s,oe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=i$(i,r),a=this.schedulers.ngZone.run(()=>s);return new t$(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new oie(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Xj(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(ye(HE),ye(zE,8),ye(n$,8),ye(aie,8),ye(uo),ye(qt),ye($L),ye(r$,8),ye(uie,8),ye(t2,8),ye(KL,8),ye(QL,8),ye(YL,8),ye(JL,8),ye(XL,8),ye(ZL,8),ye(BL,8))};static \u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),lie=(()=>{class n{constructor(){lu.A.registerVersion("angularfire",R0.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:n$,useValue:!0},{provide:r$,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=vi({type:n});static \u0275inj=Tr({providers:[cie]})}return n})();const s$_firebase={apiKey:"AIzaSyDWOb8hpZ7JQcpPzpcNw6SW53_pG0V5UE0",authDomain:"wedding-29b48.firebaseapp.com",projectId:"wedding-29b48",storageBucket:"wedding-29b48.firebasestorage.app",messagingSenderId:"807343676966",appId:"1:807343676966:web:1c21870a5ee2dfbae790e7",measurementId:"YOUR_MEASUREMENT_ID"};let o$=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(ge(ra),ge(Xi))}}static{this.\u0275dir=Je({type:n})}}return n})(),gl=(()=>{class n extends o${static{this.\u0275fac=function(){let t;return function(i){return(t||(t=rr(n)))(i||n)}}()}static{this.\u0275dir=Je({type:n,features:[Kt]})}}return n})();const bo=new ve("NgValueAccessor"),fie={provide:bo,useExisting:Ut(()=>WI),multi:!0},gie=new ve("CompositionEventMode");let WI=(()=>{class n extends o${constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pie(){const n=su()?su().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(ge(ra),ge(Xi),ge(gie,8))}}static{this.\u0275dir=Je({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&fn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Rn([fie]),Kt]})}}return n})();const ci=new ve("NgValidators"),xu=new ve("NgAsyncValidators");function _$(n){return null!=n}function y$(n){return Eg(n)?A(n):n}function v$(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function E$(n,e){return e.map(t=>t(n))}function I$(n){return n.map(e=>function _ie(n){return!n.validate}(e)?e:t=>e.validate(t))}function sR(n){return null!=n?function w$(n){if(!n)return null;const e=n.filter(_$);return 0==e.length?null:function(t){return v$(E$(t,e))}}(I$(n)):null}function oR(n){return null!=n?function C$(n){if(!n)return null;const e=n.filter(_$);return 0==e.length?null:function(t){return function die(...n){const e=Ds(n),{args:t,keys:r}=RV(n),i=new yt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,l=o;for(let f=0;f<o;f++){let m=!1;Zn(t[f]).subscribe(Y(s,_=>{m||(m=!0,l--),a[f]=_},()=>u--,void 0,()=>{(!u||!m)&&(l||s.next(r?xV(r,a):a),s.complete())}))}});return e?i.pipe(PV(e)):i}(E$(t,e).map(y$)).pipe(le(v$))}}(I$(n)):null}function T$(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function aR(n){return n?Array.isArray(n)?n:[n]:[]}function QI(n,e){return Array.isArray(n)?n.includes(e):n===e}function D$(n,e){const t=aR(e);return aR(n).forEach(i=>{QI(t,i)||t.push(i)}),t}function S$(n,e){return aR(e).filter(t=>!QI(n,t))}class R${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=sR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=oR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Si extends R${get formDirective(){return null}get path(){return null}}class Mu extends R${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class P${constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let x$=(()=>{class n extends P${constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ge(Mu,2))}}static{this.\u0275dir=Je({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&nu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Kt]})}}return n})(),M$=(()=>{class n extends P${constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ge(Si,10))}}static{this.\u0275dir=Je({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&nu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Kt]})}}return n})();const Hm="VALID",JI="INVALID",mf="PENDING",zm="DISABLED";function lR(n){return(XI(n)?n.validators:n)||null}function dR(n,e){return(XI(e)?e.asyncValidators:n)||null}function XI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class hR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Hm}get invalid(){return this.status===JI}get pending(){return this.status==mf}get disabled(){return this.status===zm}get enabled(){return this.status!==zm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(D$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(D$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(S$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(S$(e,this._rawAsyncValidators))}hasValidator(e){return QI(this._rawValidators,e)}hasAsyncValidator(e){return QI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=mf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zm,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Hm,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Hm||this.status===mf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zm:Hm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=mf,this._hasOwnPendingAsyncValidator=!0;const t=y$(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new qn,this.statusChanges=new qn}_calculateStatus(){return this._allControlsDisabled()?zm:this.errors?JI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mf)?mf:this._anyControlsHaveStatus(JI)?JI:Hm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){XI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Iie(n){return Array.isArray(n)?sR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function wie(n){return Array.isArray(n)?oR(n):n||null}(this._rawAsyncValidators)}}class fR extends hR{constructor(e,t,r){super(lR(t),dR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function k$(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new de(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function O$(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new de(1e3,"");if(!r[t])throw new de(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const _f=new ve("CallSetDisabledState",{providedIn:"root",factory:()=>ZI}),ZI="always";function Gm(n,e,t=ZI){pR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Aie(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&F$(n,e)})}(n,e),function Die(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function bie(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&F$(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Tie(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function nw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function pR(n,e){const t=function A$(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(T$(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function b$(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(T$(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();nw(e._rawValidators,i),nw(e._rawAsyncValidators,i)}function F$(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Mie={provide:Si,useExisting:Ut(()=>iw)},qm=(()=>Promise.resolve())();let iw=(()=>{class n extends Si{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new qn,this.form=new fR({},sR(t),oR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){qm.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Gm(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){qm.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){qm.then(()=>{const r=this._findContainer(t.path),i=new fR({});(function V$(n,e){pR(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){qm.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){qm.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function L$(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(ge(ci,10),ge(xu,10),ge(_f,8))}}static{this.\u0275dir=Je({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&fn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Rn([Mie]),Kt]})}}return n})();function U$(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function B$(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const j$=class extends hR{constructor(e=null,t,r){super(lR(t),dR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),XI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=B$(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){U$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){U$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){B$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},kie={provide:Mu,useExisting:Ut(()=>yR)},z$=(()=>Promise.resolve())();let yR=(()=>{class n extends Mu{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new j$,this._registered=!1,this.name="",this.update=new qn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function _R(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===WI?t=s:function Pie(n){return Object.getPrototypeOf(n.constructor)===gl}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function mR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Gm(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){z$.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&ph(r);z$.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function ew(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(ge(Si,9),ge(ci,10),ge(xu,10),ge(bo,10),ge(nE,8),ge(_f,8))}}static{this.\u0275dir=Je({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Rn([kie]),Kt,Fi]})}}return n})(),G$=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Je({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),W$=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vi({type:n})}static{this.\u0275inj=Tr({})}}return n})(),sse=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vi({type:n})}static{this.\u0275inj=Tr({imports:[W$]})}}return n})(),ase=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:_f,useValue:t.callSetDisabledState??ZI}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vi({type:n})}static{this.\u0275inj=Tr({imports:[sse]})}}return n})();class sw{}class ow{}class Bs{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Bs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Bs;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Bs?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class use{encodeKey(e){return dH(e)}encodeValue(e){return dH(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const lse=/%(\d[a-f0-9])/gi,dse={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function dH(n){return encodeURIComponent(n).replace(lse,(e,t)=>dse[t]??e)}function aw(n){return`${n}`}class Nu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new use,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function cse(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(aw):[aw(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Nu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(aw(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(aw(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class hse{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function hH(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function fH(n){return typeof Blob<"u"&&n instanceof Blob}function pH(n){return typeof FormData<"u"&&n instanceof FormData}class Wm{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function fse(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Bs),this.context||(this.context=new hse),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Nu,this.urlWithParams=t}serializeBody(){return null===this.body?null:hH(this.body)||fH(this.body)||pH(this.body)||function pse(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Nu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||pH(this.body)?null:fH(this.body)?this.body.type||null:hH(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Nu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,l=e.params||this.params;const f=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((m,_)=>m.set(_,e.setHeaders[_]),u)),e.setParams&&(l=Object.keys(e.setParams).reduce((m,_)=>m.set(_,e.setParams[_]),l)),new Wm(t,r,s,{params:l,headers:u,context:f,reportProgress:a,responseType:i,withCredentials:o})}}var yf=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(yf||{});class AR{constructor(e,t=200,r="OK"){this.headers=e.headers||new Bs,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class bR extends AR{constructor(e={}){super(e),this.type=yf.ResponseHeader}clone(e={}){return new bR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class vf extends AR{constructor(e={}){super(e),this.type=yf.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new vf({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class gH extends AR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function DR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let mH=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Wm)s=t;else{let u,l;u=i.headers instanceof Bs?i.headers:new Bs(i.headers),i.params&&(l=i.params instanceof Nu?i.params:new Nu({fromObject:i.params})),s=new Wm(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=k(s).pipe(_h(u=>this.handler.handle(u)));if(t instanceof Wm||"events"===i.observe)return o;const a=o.pipe(Is(u=>u instanceof vf));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(le(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(le(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(le(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(le(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Nu).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,DR(i,r))}post(t,r,i={}){return this.request("POST",t,DR(i,r))}put(t,r,i={}){return this.request("PUT",t,DR(i,r))}static{this.\u0275fac=function(r){return new(r||n)(ye(sw))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function vH(n,e){return e(n)}function mse(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const yse=new ve(""),Km=new ve(""),EH=new ve("");function vse(){let n=null;return(e,t)=>{null===n&&(n=(Me(yse,{optional:!0})??[]).reduceRight(mse,vH));const r=Me(Xv),i=r.add();return n(e,t).pipe(Vg(()=>r.remove(i)))}}let IH=(()=>{class n extends sw{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=Me(Xv)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Km),...this.injector.get(EH,[])]));this.chain=i.reduceRight((s,o)=>function _se(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),vH)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Vg(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(ye(ow),ye(Ji))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const Cse=/^\)\]\}',?\n/;let CH=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new de(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?A(r.\u0275loadImpl()):k(null)).pipe(Se(()=>new yt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((S,R)=>o.setRequestHeader(S,R.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const S=t.detectContentTypeHeader();null!==S&&o.setRequestHeader("Content-Type",S)}if(t.responseType){const S=t.responseType.toLowerCase();o.responseType="json"!==S?S:"text"}const a=t.serializeBody();let u=null;const l=()=>{if(null!==u)return u;const S=o.statusText||"OK",R=new Bs(o.getAllResponseHeaders()),H=function Tse(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return u=new bR({headers:R,status:o.status,statusText:S,url:H}),u},f=()=>{let{headers:S,status:R,statusText:H,url:F}=l(),W=null;204!==R&&(W=typeof o.response>"u"?o.responseText:o.response),0===R&&(R=W?200:0);let oe=R>=200&&R<300;if("json"===t.responseType&&"string"==typeof W){const Ie=W;W=W.replace(Cse,"");try{W=""!==W?JSON.parse(W):null}catch(Be){W=Ie,oe&&(oe=!1,W={error:Be,text:W})}}oe?(s.next(new vf({body:W,headers:S,status:R,statusText:H,url:F||void 0})),s.complete()):s.error(new gH({error:W,headers:S,status:R,statusText:H,url:F||void 0}))},m=S=>{const{url:R}=l(),H=new gH({error:S,status:o.status||0,statusText:o.statusText||"Unknown Error",url:R||void 0});s.error(H)};let _=!1;const I=S=>{_||(s.next(l()),_=!0);let R={type:yf.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(R.total=S.total),"text"===t.responseType&&o.responseText&&(R.partialText=o.responseText),s.next(R)},C=S=>{let R={type:yf.UploadProgress,loaded:S.loaded};S.lengthComputable&&(R.total=S.total),s.next(R)};return o.addEventListener("load",f),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),t.reportProgress&&(o.addEventListener("progress",I),null!==a&&o.upload&&o.upload.addEventListener("progress",C)),o.send(a),s.next({type:yf.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",f),o.removeEventListener("timeout",m),t.reportProgress&&(o.removeEventListener("progress",I),null!==a&&o.upload&&o.upload.removeEventListener("progress",C)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(ye(aV))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const SR=new ve("XSRF_ENABLED"),TH=new ve("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),AH=new ve("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class bH{}let Dse=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=JF(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(ye(ts),ye(uo),ye(TH))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function Sse(n,e){const t=n.url.toLowerCase();if(!Me(SR)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=Me(bH).getToken(),i=Me(AH);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Ou=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Ou||{});function _l(n,e){return{\u0275kind:n,\u0275providers:e}}function Rse(...n){const e=[mH,CH,IH,{provide:sw,useExisting:IH},{provide:ow,useExisting:CH},{provide:Km,useValue:Sse,multi:!0},{provide:SR,useValue:!0},{provide:bH,useClass:Dse}];for(const t of n)e.push(...t.\u0275providers);return function WT(n){return{\u0275providers:n}}(e)}const DH=new ve("LEGACY_INTERCEPTOR_FN");let xse=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vi({type:n})}static{this.\u0275inj=Tr({providers:[Rse(_l(Ou.LegacyInterceptors,[{provide:DH,useFactory:vse},{provide:Km,useExisting:DH,multi:!0}]))]})}}return n})();const Ee=function(n,e){if(!n)throw Ef(e)},Ef=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},SH=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},cw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0;let _=(15&a)<<2|l>>6,I=63&l;u||(I=64,o||(_=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[_],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(SH(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const l=i<n.length?t[n.charAt(i)]:64;++i;const m=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==l||null==m)throw new Lse;r.push(s<<2|a>>4),64!==l&&(r.push(a<<4&240|l>>2),64!==m&&r.push(l<<6&192|m))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Lse extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RH=function(n){const e=SH(n);return cw.encodeByteArray(e,!0)},lw=function(n){return RH(n).replace(/\./g,"")},PR=function(n){try{return cw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Use(n){return PH(void 0,n)}function PH(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Bse(t)||(n[t]=PH(n[t],e[t]));return n}function Bse(n){return"__proto__"!==n}function xH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const dw=()=>{try{return xH().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&PR(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},MH=()=>{var n;return null===(n=dw())||void 0===n?void 0:n.config};class ku{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function NH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(function hw(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}())}function xR(){try{return"object"==typeof indexedDB}catch{return!1}}class Qm extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Qm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,MR.prototype.create)}}class MR{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function Xse(n,e){return n.replace(Zse,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new Qm(i,`${this.serviceName}: ${o} (${i}).`,r)}}const Zse=/\{\$([^}]+)}/g;function Ym(n){return JSON.parse(n)}function wr(n){return JSON.stringify(n)}const fw=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=Ym(PR(s[0])||""),t=Ym(PR(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};function Do(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function If(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function OH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function pw(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function NR(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(kH(s)&&kH(o)){if(!NR(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function kH(n){return null!==n&&"object"==typeof n}class roe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let m=0;m<16;m++)r[m]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let m=0;m<16;m++)r[m]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let m=16;m<80;m++){const _=r[m-3]^r[m-8]^r[m-14]^r[m-16];r[m]=4294967295&(_<<1|_>>>31)}let l,f,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4];for(let m=0;m<80;m++){m<40?m<20?(l=a^s&(o^a),f=1518500249):(l=s^o^a,f=1859775393):m<60?(l=s&o|a&(s|o),f=2400959708):(l=s^o^a,f=3395469782);const _=(i<<5|i>>>27)+l+u+f+r[m]&4294967295;u=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=_}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function wf(n,e){return`${n} failed: ${e} argument `}const gw=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e},aoe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=16*Math.random()|0;return("x"===n?e:3&e|8).toString(16)})};function Cf(n){return n&&n._delegate?n._delegate:n}class yl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const vl="[DEFAULT]";class poe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ku;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function moe(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:vl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=vl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,Q.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=vl){return this.instances.has(e)}getOptions(e=vl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===vl?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=vl){return this.component?this.component.multipleInstances?e:vl:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _oe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new poe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const kR=[];var _n=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(_n||{});const FH={debug:_n.DEBUG,verbose:_n.VERBOSE,info:_n.INFO,warn:_n.WARN,error:_n.ERROR,silent:_n.SILENT},yoe=_n.INFO,voe={[_n.DEBUG]:"log",[_n.VERBOSE]:"log",[_n.INFO]:"info",[_n.WARN]:"warn",[_n.ERROR]:"error"},Eoe=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=voe[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class FR{constructor(e){this.name=e,this._logLevel=yoe,this._logHandler=Eoe,this._userLogHandler=null,kR.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _n))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?FH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_n.DEBUG,...e),this._logHandler(this,_n.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_n.VERBOSE,...e),this._logHandler(this,_n.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_n.INFO,...e),this._logHandler(this,_n.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_n.WARN,...e),this._logHandler(this,_n.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_n.ERROR,...e),this._logHandler(this,_n.ERROR,...e)}}var Ioe=Ze(749);class woe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function Coe(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const mw="@firebase/app",VR="0.10.17",Aa=new FR("@firebase/app"),_w="[DEFAULT]",Joe={[mw]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},El=new Map,Jm=new Map,Xm=new Map;function VH(n,e){try{n.container.addComponent(e)}catch(t){Aa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tf(n){const e=n.name;if(Xm.has(e))return Aa.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,n);for(const t of El.values())VH(t,n);for(const t of Jm.values())VH(t,n);return!0}function yw(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const Ts=new MR("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class LH{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}function UH(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:_w,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Ts.create("bad-app-name",{appName:String(i)});if(t||(t=MH()),!t)throw Ts.create("no-options");const s=El.get(i);if(s){if(NR(t,s.options)&&NR(r,s.config))return s;throw Ts.create("duplicate-app",{appName:i})}const o=new _oe(i);for(const u of Xm.values())o.addComponent(u);const a=new LH(t,r,o);return El.set(i,a),a}function BH(n=_w){const e=El.get(n);if(!e&&n===_w&&MH())return UH();if(!e)throw Ts.create("no-app",{appName:n});return e}function Fu(n,e,t){var r;let i=null!==(r=Joe[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Aa.warn(a.join(" "))}Tf(new yl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const rae="firebase-heartbeat-database",iae=1,Zm="firebase-heartbeat-store";let UR=null;function jH(){return UR||(UR=(0,Ioe.P2)(rae,iae,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(Zm)}catch(t){console.warn(t)}}}).catch(n=>{throw Ts.create("idb-open",{originalErrorMessage:n.message})})),UR}function BR(){return(BR=(0,Q.A)(function*(n){try{const t=(yield jH()).transaction(Zm),r=yield t.objectStore(Zm).get(HH(n));return yield t.done,r}catch(e){if(e instanceof Qm)Aa.warn(e.message);else{const t=Ts.create("idb-get",{originalErrorMessage:e?.message});Aa.warn(t.message)}}})).apply(this,arguments)}function $H(n,e){return jR.apply(this,arguments)}function jR(){return(jR=(0,Q.A)(function*(n,e){try{const r=(yield jH()).transaction(Zm,"readwrite");yield r.objectStore(Zm).put(e,HH(n)),yield r.done}catch(t){if(t instanceof Qm)Aa.warn(t.message);else{const r=Ts.create("idb-set",{originalErrorMessage:t?.message});Aa.warn(r.message)}}})).apply(this,arguments)}function HH(n){return`${n.name}!${n.options.appId}`}class uae{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new lae(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,Q.A)(function*(){var t,r;try{const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=zH();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===o||e._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(e._heartbeatsCache.heartbeats.push({date:o,agent:s}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){Aa.warn(i)}})()}getHeartbeatsHeader(){var e=this;return(0,Q.A)(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=zH(),{heartbeatsToSend:i,unsentEntries:s}=function cae(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),GH(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),GH(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=lw(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o}catch(r){return Aa.warn(r),""}})()}}function zH(){return(new Date).toISOString().substring(0,10)}class lae{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,Q.A)(function*(){return!!xR()&&function Yse(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,Q.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function sae(n){return BR.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,Q.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return $H(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,Q.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return $H(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function GH(n){return lw(JSON.stringify({version:2,heartbeats:n})).length}!function dae(n){Tf(new yl("platform-logger",e=>new woe(e),"PRIVATE")),Tf(new yl("heartbeat",e=>new uae(e),"PRIVATE")),Fu(mw,VR,n),Fu(mw,VR,"esm2017"),Fu("fire-js","")}(""),Fu("firebase","11.1.0","app");const $R=new Map,qH={activated:!1,tokenObservers:[]},pae={initialized:!1,enabled:!1};function Qn(n){return $R.get(n)||Object.assign({},qH)}function vw(){return pae}const HR="https://content-firebaseappcheck.googleapis.com/v1",yae="exchangeDebugToken",WH={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Eae{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Q.A)(function*(){t.stop();try{t.pending=new ku,t.pending.promise.catch(r=>{}),yield function Iae(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ku,t.pending.promise.catch(r=>{}),yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Gr=new MR("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ew(n=!1){var e;return n?null===(e=self.grecaptcha)||void 0===e?void 0:e.enterprise:self.grecaptcha}function zR(n){if(!Qn(n).activated)throw Gr.create("use-before-activation",{appName:n.name})}function GR(n){const e=Math.round(n/1e3),t=Math.floor(e/86400),r=Math.floor((e-3600*t*24)/3600),i=Math.floor((e-3600*t*24-3600*r)/60),s=e-3600*t*24-3600*r-60*i;let o="";return t&&(o+=Iw(t)+"d:"),r&&(o+=Iw(r)+"h:"),o+=Iw(i)+"m:"+Iw(s)+"s",o}function Iw(n){return 0===n?"00":n>=10?n.toString():"0"+n}function ww(n,e){return qR.apply(this,arguments)}function qR(){return(qR=(0,Q.A)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const m=yield i.getHeartbeatsHeader();m&&(r["X-Firebase-Client"]=m)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(n,s)}catch(m){throw Gr.create("fetch-network-error",{originalErrorMessage:m?.message})}if(200!==o.status)throw Gr.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(m){throw Gr.create("fetch-parse-error",{originalErrorMessage:m?.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Gr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=1e3*Number(u[1]),f=Date.now();return{token:a.token,expireTimeMillis:f+l,issuedAtTimeMillis:f}})).apply(this,arguments)}function KH(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${HR}/projects/${t}/apps/${r}:${yae}?key=${i}`,body:{debug_token:e}}}const Aae="firebase-app-check-database",bae=1,e_="firebase-app-check-store",QH="debug-token";let Cw=null;function YH(){return Cw||(Cw=new Promise((n,e)=>{try{const t=indexedDB.open(Aae,bae);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Gr.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(e_,{keyPath:"compositeKey"})}}catch(t){e(Gr.create("storage-open",{originalErrorMessage:t?.message}))}}),Cw)}function JH(n,e){return WR.apply(this,arguments)}function WR(){return(WR=(0,Q.A)(function*(n,e){const r=(yield YH()).transaction(e_,"readwrite"),s=r.objectStore(e_).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Gr.create("storage-set",{originalErrorMessage:null===(l=u.target.error)||void 0===l?void 0:l.message}))}})})).apply(this,arguments)}function XH(n){return KR.apply(this,arguments)}function KR(){return(KR=(0,Q.A)(function*(n){const t=(yield YH()).transaction(e_,"readonly"),i=t.objectStore(e_).get(n);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},t.onerror=a=>{var u;o(Gr.create("storage-get",{originalErrorMessage:null===(u=a.target.error)||void 0===u?void 0:u.message}))}})})).apply(this,arguments)}function ZH(n){return`${n.options.appId}-${n.name}`}const t_=new FR("@firebase/app-check");function QR(){return(QR=(0,Q.A)(function*(n){if(xR()){let e;try{e=yield function Dae(n){return XH(ZH(n))}(n)}catch(t){t_.warn(`Failed to read token from IndexedDB. Error: ${t}`)}return e}})).apply(this,arguments)}function YR(n,e){return xR()?function Sae(n,e){return JH(ZH(n),e)}(n,e).catch(t=>{t_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function JR(){return(JR=(0,Q.A)(function*(){let n;try{n=yield function Pae(){return XH(QH)}()}catch{}if(n)return n;{const e=aoe();return function Rae(n){return JH(QH,n)}(e).catch(t=>t_.warn(`Failed to persist debug token to IndexedDB. Error: ${t}`)),e}})).apply(this,arguments)}function XR(){return vw().enabled}function ZR(){return eP.apply(this,arguments)}function eP(){return(eP=(0,Q.A)(function*(){const n=vw();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Oae={error:"UNKNOWN_ERROR"};function kae(n){return cw.encodeString(JSON.stringify(n),!1)}function Tw(n){return tP.apply(this,arguments)}function tP(){return(tP=(0,Q.A)(function*(n,e=!1){const t=n.app;zR(t);const r=Qn(t);let s,i=r.token;if(i&&!Af(i)&&(r.token=void 0,i=void 0),!i){const u=yield r.cachedTokenPromise;u&&(Af(u)?i=u:yield YR(t,void 0))}if(!e&&i&&Af(i))return{token:i.token};let a,o=!1;if(XR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ww(KH(t,yield ZR()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=yield r.exchangeTokenPromise;return yield YR(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Qn(t).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?t_.warn(u.message):t_.error(u),s=u}return i?s?a=Af(i)?{token:i.token,internalError:s}:r4(s):(a={token:i.token},r.token=i,yield YR(t,i)):a=r4(s),o&&n4(t,a),a})).apply(this,arguments)}function e4(n){return nP.apply(this,arguments)}function nP(){return(nP=(0,Q.A)(function*(n){const e=n.app;zR(e);const{provider:t}=Qn(e);if(XR()){const r=yield ZR(),{token:i}=yield ww(KH(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function rP(n,e,t,r){const{app:i}=n,s=Qn(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&Af(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),t4(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>t4(n))}function iP(n,e){const t=Qn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function t4(n){const{app:e}=n,t=Qn(e);let r=t.tokenRefresher;r||(r=function Fae(n){const{app:e}=n;return new Eae((0,Q.A)(function*(){let r;if(r=Qn(e).token?yield Tw(n,!0):yield Tw(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Qn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},WH.RETRIAL_MIN_WAIT,WH.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function n4(n,e){const t=Qn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Af(n){return n.expireTimeMillis-Date.now()>0}function r4(n){return{token:kae(Oae),error:n}}class Vae{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Qn(this.app);for(const t of e)iP(this.app,t.next);return Promise.resolve()}}function zae(n,e){const t=new ku;Qn(n).reCAPTCHAState={initialized:t};const i=function i4(n){const e=`fire_app_check_${n.name}`,t=document.createElement("div");return t.id=e,t.style.display="none",document.body.appendChild(t),e}(n),s=Ew(!1);return s?Aw(n,e,s,i,t):function Wae(n){const e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js",e.onload=n,document.head.appendChild(e)}(()=>{const o=Ew(!1);if(!o)throw new Error("no recaptcha");Aw(n,e,o,i,t)}),t.promise}function Aw(n,e,t,r,i){t.ready(()=>{(function qae(n,e,t,r){const i=t.render(r,{sitekey:e,size:"invisible",callback:()=>{Qn(n).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Qn(n).reCAPTCHAState.succeeded=!1}}),s=Qn(n);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})})(n,e,t,r),i.resolve(t)})}function s4(n){return sP.apply(this,arguments)}function sP(){return(sP=(0,Q.A)(function*(n){zR(n);const t=yield Qn(n).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Qn(n).reCAPTCHAState;t.ready(()=>{r(t.execute(s.widgetId,{action:"fire_app_check"}))})})})).apply(this,arguments)}class oP{constructor(e){this._siteKey=e,this._throttleData=null}getToken(){var e=this;return(0,Q.A)(function*(){var t,r,i;!function c4(n){if(n&&Date.now()-n.allowRequestsAfter<=0)throw Gr.create("throttled",{time:GR(n.allowRequestsAfter-Date.now()),httpStatus:n.httpStatus})}(e._throttleData);const s=yield s4(e._app).catch(a=>{throw Gr.create("recaptcha-error")});if(null===(t=Qn(e._app).reCAPTCHAState)||void 0===t||!t.succeeded)throw Gr.create("recaptcha-error");let o;try{o=yield ww(function Cae(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${HR}/projects/${t}/apps/${r}:exchangeRecaptchaV3Token?key=${i}`,body:{recaptcha_v3_token:e}}}(e._app,s),e._heartbeatServiceProvider)}catch(a){throw null!==(r=a.code)&&void 0!==r&&r.includes("fetch-status-error")?(e._throttleData=function u4(n,e){if(404===n||403===n)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:n};{const t=e?e.backoffCount:0,r=function hoe(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}(t,1e3,2);return{backoffCount:t+1,allowRequestsAfter:Date.now()+r,httpStatus:n}}}(Number(null===(i=a.customData)||void 0===i?void 0:i.httpStatus),e._throttleData),Gr.create("throttled",{time:GR(e._throttleData.allowRequestsAfter-Date.now()),httpStatus:e._throttleData.httpStatus})):a}return e._throttleData=null,o})()}initialize(e){this._app=e,this._heartbeatServiceProvider=yw(e,"heartbeat"),zae(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof oP&&this._siteKey===e._siteKey}}function Qae(n=BH(),e){const t=yw(n=Cf(n),"app-check");if(vw().initialized||function Nae(){const n=xH(),e=vw();if(e.initialized=!0,"string"!=typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==n.FIREBASE_APPCHECK_DEBUG_TOKEN)return;e.enabled=!0;const t=new ku;e.token=t,t.resolve("string"==typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN?n.FIREBASE_APPCHECK_DEBUG_TOKEN:function Mae(){return JR.apply(this,arguments)}())}(),XR()&&ZR().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw Gr.create("already-initialized",{appName:n.name})}const r=t.initialize({options:e});return function Yae(n,e,t){const r=function gae(n,e){return $R.set(n,e),$R.get(n)}(n,Object.assign({},qH));r.activated=!0,r.provider=e,r.cachedTokenPromise=function xae(n){return QR.apply(this,arguments)}(n).then(i=>(i&&Af(i)&&(r.token=i,n4(n,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=void 0===t?n.automaticDataCollectionEnabled:t,r.provider.initialize(n)}(n,e.provider,e.isTokenAutoRefreshEnabled),Qn(n).isTokenAutoRefreshEnabled&&rP(r,"INTERNAL",()=>{}),r}function aP(){return(aP=(0,Q.A)(function*(n,e){const t=yield Tw(n,e);if(t.error)throw t.error;return{token:t.token}})).apply(this,arguments)}const l4="app-check-internal";!function Zae(){Tf(new yl("app-check",n=>function Lae(n,e){return new Vae(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(l4).initialize()})),Tf(new yl(l4,n=>function Uae(n){return{getToken:e=>Tw(n,e),getLimitedUseToken:()=>e4(n),addTokenListener:e=>rP(n,"INTERNAL",e),removeTokenListener:e=>iP(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Fu("@firebase/app-check","0.8.10")}();let eue=(()=>{class n{constructor(){this.target=new Date(2025,6,19,12,30),this.updateTimeDifference(),this.intervalId=setInterval(()=>{this.updateTimeDifference()},1e3)}updateTimeDifference(){const t=new Date(Date.now()),r=this.target.getTime()-t.getTime();r<=0?(clearInterval(this.intervalId),this.remDays=this.remHours=this.remMinutes=this.remSeconds=0):this.calculateDifference(r)}calculateDifference(t){try{this.remDays=Math.floor(t/864e5),t%=864e5,this.remHours=Math.floor(t/36e5),t%=36e5,this.remMinutes=Math.floor(t/6e4),t%=6e4,this.remSeconds=Math.floor(t/1e3)}catch(r){console.log("Error in calculateDifference",r)}}ngOnDestroy(){clearInterval(this.intervalId)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ei({type:n,selectors:[["app-timer"]],decls:3,vars:4,consts:[[1,"container"],[1,"clock"]],template:function(r,i){1&r&&(fe(0,"div",0)(1,"div",1),Ae(2),_e()()),2&r&&(Pt(2),HA("",i.remDays," days, ",i.remHours," hrs ",i.remMinutes," min ",i.remSeconds," sec."))},styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;height:70px;width:50vw;background-color:#96a498;color:#fff;font-size:26px;padding-left:2em}@media (max-width: 1000px){.container[_ngcontent-%COMP%]{height:60px;font-size:20px}}@media (max-width: 800px){.container[_ngcontent-%COMP%]{height:50px;font-size:18px}}@media (max-width: 600px){.container[_ngcontent-%COMP%]{height:40px;width:45vw;font-size:12px;padding-left:1.5em}}@media (max-width: 450px){.container[_ngcontent-%COMP%]{height:30px;font-size:10px;padding-left:1em}}@media (max-width: 400px){.container[_ngcontent-%COMP%]{height:25px;padding-left:1em}}"]})}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tue(n,e){if(1&n){const t=eu();fe(0,"div",35),fn("click",function(){return _r(t),Lr(vr().hideImage())}),fr(1,"img",36),_e()}if(2&n){const t=vr();Pt(1),hn("src",t.enlargedImageSrc,Za)}}let nue=(()=>{class n{constructor(){this.timer=new eue,this.isImageVisible=!1,this.enlargedImageSrc=""}showImage(t){this.enlargedImageSrc=t.src,this.isImageVisible=!0}hideImage(){this.isImageVisible=!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ei({type:n,selectors:[["app-home"]],decls:62,vars:2,consts:[[1,"container"],[1,"welcome-text"],[1,"time-and-place"],[1,"dot"],[1,"our-story"],[1,"our-story-headline"],[1,"our-story-text"],[1,"collage-container"],[1,"collage-item-1",3,"click"],["src","assets/images/ratio1-1/picture5-1_1.jpg"],["collageItem1",""],[1,"overlay-text-1_1"],[1,"collage-item-2",3,"click"],["src","assets/images/ratio1-1/picture12-1_1.jpg"],["collageItem2",""],[1,"collage-item-3",3,"click"],["src","assets/images/ratio9-16/picture10-9_16.jpg"],["collageItem3",""],[1,"overlay-text-9_16"],[1,"collage-item-4",3,"click"],["src","assets/images/ratio9-16/picture6-9_16.jpg"],["collageItem4",""],[1,"collage-item-5",3,"click"],["src","assets/images/ratio9-16/picture18-9_16.jpg"],["collageItem5",""],[1,"collage-item-6",3,"click"],["src","assets/images/ratio9-16/picture17-9_16.jpg"],["collageItem6",""],[1,"collage-item-7",3,"click"],["src","assets/images/ratio1-1/picture8-1_1.jpg"],["collageItem7",""],[1,"collage-item-8",3,"click"],["src","assets/images/ratio1-1/picture14-1_1.jpg"],["collageItem8",""],["class","image-overlay",3,"click",4,"ngIf"],[1,"image-overlay",3,"click"],[3,"src"]],template:function(r,i){if(1&r){const s=eu();fe(0,"div",0)(1,"div",1)(2,"div"),Ae(3,"We are delighted to welcome you to"),_e(),fe(4,"div"),Ae(5,"Patrik & Claudia's"),_e(),fe(6,"div"),Ae(7,"wedding!"),_e()(),fe(8,"div",2),Ae(9," July 19 2025 "),fr(10,"span",3),Ae(11," G\xf6teborg "),fr(12,"span",3),fe(13,"span"),Ae(14),_e()(),fe(15,"div",4)(16,"div",5),Ae(17,"OUR STORY"),_e(),fe(18,"p",6),Ae(19," A simple message on a dating app would travel across Kattegat and become the beginning of our beautiful love story. \u201cHello there on the other side of the water\u201d Patrik wrote, and with those simple words, a Swedish Pilot and a Danish accountant would begin their very own fairytale. Our story proves that love knows no borders. Between Patrik\u2019s flights touching down all over Europe and my world of endless numbers and spreadsheets we have created a beautiful relationship based on mutual respect, curiosity and many interests that with time have become mutual. Patrik has introduced me to the beauty of the Gothenburg Archipelago, and I have shared with him my love for all things Italian. In our relationship we delight in teaching each other. Patrik patiently sits evening after evening explaining to me the intricate systems of jet aircraft \u2013 just ask me what might happen if you get on the back side of the drag curve... While I introduce him to the profound simplicity of Hemingway\u2019s prose, as well as the differences between the different philosophical schools. When I was younger, and wanted as young people tend to do \u2013 everything all at once, I would get annoyed when people told me to be patient, and that whoever waits for something good never waits in vain. Today I understand that they were right. Patrik and I might have found each other later in life, but in each other we have found a true soul mate, and a love that is both patient and enduring of any outside circumstances. On that magical Christmas Eve in 2023 when Patrik dropped to one knee and asked me to be his wife in Rome\u2019s beautiful Borghese Gardens I have never been more sure of an answer in my whole life. Patrik and I are so excited to embark on this next chapter of our lives as husband and wife together with our beloved children, and one far too spoiled miniature dachshund. Welcome to our wedding website. We can\u2019t wait to celebrate with all of you and hope you will find the information on this site useful. "),_e()(),fe(20,"div",7)(21,"div",8),fn("click",function(){_r(s);const a=fo(23);return Lr(i.showImage(a))}),fr(22,"img",9,10),fe(24,"div",11),Ae(25,"Dec 2023"),_e()(),fe(26,"div",12),fn("click",function(){_r(s);const a=fo(28);return Lr(i.showImage(a))}),fr(27,"img",13,14),fe(29,"div",11),Ae(30,"May 2023"),_e()(),fe(31,"div",15),fn("click",function(){_r(s);const a=fo(33);return Lr(i.showImage(a))}),fr(32,"img",16,17),fe(34,"div",18),Ae(35,"Aug 2023"),_e()(),fe(36,"div",19),fn("click",function(){_r(s);const a=fo(38);return Lr(i.showImage(a))}),fr(37,"img",20,21),fe(39,"div",18),Ae(40,"Dec 2023"),_e()(),fe(41,"div",22),fn("click",function(){_r(s);const a=fo(43);return Lr(i.showImage(a))}),fr(42,"img",23,24),fe(44,"div",18),Ae(45,"Feb 2023"),_e()(),fe(46,"div",25),fn("click",function(){_r(s);const a=fo(48);return Lr(i.showImage(a))}),fr(47,"img",26,27),fe(49,"div",18),Ae(50,"Sept 2024"),_e()(),fe(51,"div",28),fn("click",function(){_r(s);const a=fo(53);return Lr(i.showImage(a))}),fr(52,"img",29,30),fe(54,"div",11),Ae(55,"July 2024"),_e()(),fe(56,"div",31),fn("click",function(){_r(s);const a=fo(58);return Lr(i.showImage(a))}),fr(57,"img",32,33),fe(59,"div",11),Ae(60,"Dec 2022"),_e()()(),Ns(61,tue,2,1,"div",34),_e()}2&r&&(Pt(14),ru("",i.timer.remDays," days to go"),Pt(47),hn("ngIf",i.isImageVisible))},dependencies:[_E],styles:[".welcome-text[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:30px;font-family:Waterfall,cursive;font-size:80px;align-items:center;text-align:center}.time-and-place[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:auto;background-color:#96a498;color:#fff;padding:.5em;font-size:22px}.dot[_ngcontent-%COMP%]{height:5px;width:5px;background-color:#fff;border-radius:50%;display:inline-block;margin-left:1.5em;margin-right:1.5em}.our-story-headline[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:center;font-size:26px}.our-story-text[_ngcontent-%COMP%]{margin:15px 2em 2em;font-size:14px;column-count:2;column-gap:20px;column-fill:balance;overflow-y:auto}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:36px;float:left;margin-right:.15em;line-height:1}.collage-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:auto auto auto auto;grid-column-gap:3%;grid-row-gap:3%;margin:3% 5% 5%}.collage-item-1[_ngcontent-%COMP%]{grid-column:1/1;grid-row:1/2;position:relative}.collage-item-2[_ngcontent-%COMP%]{grid-column:2/2;grid-row:1/2;position:relative}.collage-item-3[_ngcontent-%COMP%]{grid-column:3/4;grid-row:1/3;position:relative}.collage-item-4[_ngcontent-%COMP%]{grid-column:4/5;grid-row:1/3;position:relative}.collage-item-5[_ngcontent-%COMP%]{grid-column:1/2;grid-row:2/4;position:relative}.collage-item-6[_ngcontent-%COMP%]{grid-column:2/3;grid-row:2/4;position:relative}.collage-item-7[_ngcontent-%COMP%]{grid-column:3/4;grid-row:3/4;position:relative}.collage-item-8[_ngcontent-%COMP%]{grid-column:4/5;grid-row:3/4;position:relative}.collage-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:auto;object-fit:cover;border-radius:5px;filter:grayscale(100%);transition:filter .3s ease}.collage-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{filter:grayscale(0%)}.overlay-text-1_1[_ngcontent-%COMP%]{position:absolute;top:85%;left:10%;color:#fff;text-shadow:2px 2px 5px rgb(0,0,0);font-size:16px;font-weight:700}.overlay-text-9_16[_ngcontent-%COMP%]{position:absolute;top:90%;left:10%;color:#fff;text-shadow:2px 2px 5px rgb(0,0,0);font-size:16px;font-weight:700}.image-overlay[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;max-height:100%;max-width:auto;transform:translate(-35%,-50%);background-color:#000c;padding:40px;display:flex;justify-content:center;align-items:center;z-index:2}.image-overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:90vh;box-shadow:0 0 20px #00000080;border:2px solid white}@media (max-width: 1200px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:70px}.time-and-place[_ngcontent-%COMP%]{font-size:20px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 1000px){.welcome-text[_ngcontent-%COMP%]{margin-top:60px;font-size:65px}.time-and-place[_ngcontent-%COMP%]{font-size:18px}.dot[_ngcontent-%COMP%]{height:4px;width:4px}.our-story-text[_ngcontent-%COMP%]{font-size:12px;column-gap:18px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:30px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 800px){.welcome-text[_ngcontent-%COMP%]{margin-top:60px;font-size:52px}.time-and-place[_ngcontent-%COMP%]{font-size:16px}.our-story-headline[_ngcontent-%COMP%]{margin-top:20px;font-size:22px}.our-story-text[_ngcontent-%COMP%]{font-size:10px;column-gap:12px;margin-top:10px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:25px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:10px}.image-overlay[_ngcontent-%COMP%]{padding:30px;transform:translate(-30%,-50%)}}@media (max-width: 600px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:30px;font-size:38px}.time-and-place[_ngcontent-%COMP%]{font-size:12px}.dot[_ngcontent-%COMP%]{height:3px;width:3px}.our-story-headline[_ngcontent-%COMP%]{margin-top:15px;font-size:18px}.our-story-text[_ngcontent-%COMP%]{font-size:8px;column-gap:8px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:20px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:8px}}@media (max-width: 450px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:35px}.time-and-place[_ngcontent-%COMP%]{font-size:10px}.our-story-headline[_ngcontent-%COMP%]{font-size:14px}.our-story-text[_ngcontent-%COMP%]{font-size:7px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:18px;column-gap:6px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:6px}.image-overlay[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 400px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:28px}.timer[_ngcontent-%COMP%]{margin-top:20px}}"]})}}return n})(),rue=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ei({type:n,selectors:[["app-about"]],decls:2,vars:0,consts:[[1,"page-headline"]],template:function(r,i){1&r&&(fe(0,"div",0),Ae(1,"ABOUT"),_e())},styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{margin:2em;height:100vh}"]})}}return n})(),iue=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ei({type:n,selectors:[["app-schedule"]],decls:45,vars:1,consts:[[1,"page-headline"],[2,"margin","2em"],[1,"headline"],[1,"grid-system"],[1,"grid-item-1","left-column"],[1,"grid-item-2","right-column"],[1,"grid-item-3","left-column"],[1,"grid-item-4","right-column"],[1,"grid-item-5","left-column"],[1,"grid-item-6","right-column"],[1,"left-column"],[1,"right-column"],[3,"routerLink"]],template:function(r,i){1&r&&(fe(0,"div",0),Ae(1,"SCHEDULE"),_e(),fe(2,"div",1),Ae(3,"This schedule gives a general outline of the wedding day. Apart from when the ceremony starts, and when the venue of the wedding party closes, times are only approximate. Our wish is for everyone to enjoy a day free of stress, in good company with the wedding couple, family and friends."),_e(),fe(4,"div",2),Ae(5,"CHURCH"),_e(),fe(6,"div",3)(7,"div",4),Ae(8,"14:30"),_e(),fe(9,"div",5),Ae(10,"Wedding cermony starts in Domkyrkan."),_e(),fe(11,"div",6),Ae(12,"15:30"),_e(),fe(13,"div",7),Ae(14,"Walk from Domkyrkan to Residensbron to embark on S/S F\xe4rjan 4. The walk is approximately 700 m."),_e(),fe(15,"div",8),Ae(16,"15:45"),_e(),fe(17,"div",9),Ae(18,"S/S F\xe4rjan 4 leaves Residensbron for a 1.5 - 2 hour tour of G\xf6teborg harbour. Drinks and snacks will be provided onboard. "),fe(19,"p")(20,"b"),Ae(21,"Note:"),_e(),Ae(22," There is no toilet available onboard."),_e()()(),fe(23,"div",2),Ae(24,"WEDDING PARTY"),_e(),fe(25,"div",3)(26,"div",10),Ae(27,"17:30"),_e(),fe(28,"div",11),Ae(29,"Arrival at Restaurant River On The Pier. Welcome drinks and hang out on the docks."),_e(),fe(30,"div",10),Ae(31,"19:00"),_e(),fe(32,"div",11),Ae(33,"Three course dinner and wedding cake. Anyone keen on holding a speech? This is your moment. Reach out to the toastmaster, details in the "),fe(34,"a",12),Ae(35,"FAQ"),_e(),Ae(36,"."),_e(),fe(37,"div",10),Ae(38,"21:00"),_e(),fe(39,"div",11),Ae(40,"Music and live artists."),_e(),fe(41,"div",10),Ae(42,"02:00"),_e(),fe(43,"div",11),Ae(44,"The restaurant closes and we have to leave."),_e()()),2&r&&(Pt(34),hn("routerLink","/FAQ"))},dependencies:[Zg],styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.headline[_ngcontent-%COMP%]{display:flex;justify-content:center;background-color:#96a498;color:#fff;font-size:22px}.grid-system[_ngcontent-%COMP%]{display:grid;grid-template-columns:10% auto;grid-template-rows:auto;margin:2em}.left-column[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:2em}.right-column[_ngcontent-%COMP%]{padding-left:2em;margin-bottom:2em;margin-right:15%}.right-column[_ngcontent-%COMP%]:last-child{margin-bottom:0}a[_ngcontent-%COMP%]{text-decoration:none;color:#00f}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}}"]})}}return n})(),sue=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ei({type:n,selectors:[["app-contact"]],decls:2,vars:0,consts:[[1,"page-headline"]],template:function(r,i){1&r&&(fe(0,"div",0),Ae(1,"CONTACT"),_e())},styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{height:100vh;margin:2em}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}}"]})}}return n})(),oue=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ei({type:n,selectors:[["app-error"]],decls:5,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(fe(0,"div",0)(1,"h1"),Ae(2,"404: Page Not Found"),_e(),fe(3,"p"),Ae(4,"The page you are looking for cannot be found or you do not have access to this page."),_e()())},styles:[".container[_ngcontent-%COMP%]{text-align:center;margin:30px 0}"]})}}return n})();const d4="@firebase/database";let uP="";class aue{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),wr(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ym(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class uue{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Do(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const p4=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new aue(e)}}catch{}return new uue},Il=p4("localStorage"),cP=p4("sessionStorage"),bf=new FR("@firebase/database"),g4=function(){let n=1;return function(){return n++}}(),m4=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,Ee(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new roe;t.update(e);const r=t.digest();return cw.encodeByteArray(r)},n_=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=n_.apply(null,r):e+="object"==typeof r?wr(r):r,e+=" "}return e};let wl=null,_4=!0;const xr=function(...n){if(!0===_4&&(_4=!1,null===wl&&!0===cP.get("logging_enabled")&&function(n,e){Ee(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(bf.logLevel=_n.VERBOSE,wl=bf.log.bind(bf),e&&cP.set("logging_enabled",!0)):"function"==typeof n?wl=n:(wl=null,cP.remove("logging_enabled"))}(!0)),wl){const e=n_.apply(null,n);wl(e)}},r_=function(n){return function(...e){xr(n,...e)}},lP=function(...n){const e="FIREBASE INTERNAL ERROR: "+n_(...n);bf.error(e)},So=function(...n){const e=`FIREBASE FATAL ERROR: ${n_(...n)}`;throw bf.error(e),new Error(e)},li=function(...n){const e="FIREBASE WARNING: "+n_(...n);bf.warn(e)},bw=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Vu="[MIN_NAME]",ba="[MAX_NAME]",Cl=function(n,e){if(n===e)return 0;if(n===Vu||e===ba)return-1;if(e===Vu||n===ba)return 1;{const t=I4(n),r=I4(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},due=function(n,e){return n===e?0:n<e?-1:1},i_=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+wr(e))},dP=function(n){if("object"!=typeof n||null===n)return wr(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=wr(e[r]),t+=":",t+=dP(n[e[r]]);return t+="}",t},v4=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Mr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const E4=function(n){Ee(!bw(n),"Invalid JSON number");const r=1023;let i,s,o,a,u;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const l=[];for(u=52;u;u-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(u=11;u;u-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();const f=l.join("");let m="";for(u=0;u<64;u+=8){let _=parseInt(f.substr(u,8),2).toString(16);1===_.length&&(_="0"+_),m+=_}return m.toLowerCase()},gue=new RegExp("^-?(0*)\\d{1,10}$"),I4=function(n){if(gue.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Df=function(n){try{n()}catch(e){setTimeout(()=>{throw li("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},s_=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class vue{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){li(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Eue{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(xr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',li(e)}}let o_=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const b4=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,R4="websocket",P4="long_polling";class fP{constructor(e,t,r,i,s=!1,o="",a=!1,u=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Il.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Il.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function x4(n,e,t){let r;if(Ee("string"==typeof e,"typeof type must == string"),Ee("object"==typeof t,"typeof params must == object"),e===R4)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==P4)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Iue(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Mr(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class wue{constructor(){this.counters_={}}incrementCounter(e,t=1){Do(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Use(this.counters_)}}const pP={},gP={};function mP(n){const e=n.toString();return pP[e]||(pP[e]=new wue),pP[e]}class Tue{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Df(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Lu{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=r_(e),this.stats_=mP(t),this.urlFn=u=>(this.appCheckToken&&(u.ac=this.appCheckToken),x4(t,P4,u))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Tue(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _P((...s)=>{const[o,a,u,l,f]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=u;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&b4.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Lu.forceAllow_=!0}static forceDisallow(){Lu.forceDisallow_=!0}static isAvailable(){return!(!Lu.forceAllow_&&(Lu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=wr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=RH(t),i=v4(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=wr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class _P{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=g4(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=_P.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){xr("frame writing exception"),a.stack&&xr(a.stack),xr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||xr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{xr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Sw=null;typeof MozWebSocket<"u"?Sw=MozWebSocket:typeof WebSocket<"u"&&(Sw=WebSocket);let Sf=(()=>{class n{constructor(t,r,i,s,o,a,u){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=r_(this.connId),this.stats_=mP(r),this.connURL=n.connectionURL_(r,a,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&b4.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),x4(t,R4,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Il.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new Sw(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Sw&&!n.forceDisallow_}static previouslyFailed(){return Il.isInMemoryStorage||!0===Il.get("previous_websocket_failure")}markConnectionHealthy(){Il.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=Ym(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Ee(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=wr(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=v4(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),L4=(()=>{class n{static get ALL_TRANSPORTS(){return[Lu,Sf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const r=Sf&&Sf.isAvailable();let i=r&&!Sf.previouslyFailed();if(t.webSocketOnly&&(r||li("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Sf];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class G4{constructor(e,t,r,i,s,o,a,u,l,f){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=r_("c:"+this.id+":"),this.transportManager_=new L4(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=s_(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=i_("t",e),r=i_("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=i_("t",e),r=i_("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=i_("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?lP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&li("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),s_(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):s_(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Il.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class q4{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class W4{constructor(e){this.allowedEvents_=e,this.listeners_={},Ee(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){Ee(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Rw extends W4{static getInstance(){return new Rw}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!NH()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ee("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Wt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Vt(){return new Wt("")}function mt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Uu(n){return n.pieces_.length-n.pieceNum_}function rn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Wt(n.pieces_,e)}function vP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function a_(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Y4(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Wt(e,0)}function On(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Wt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Wt(t,0)}function _t(n){return n.pieceNum_>=n.pieces_.length}function Ri(n,e){const t=mt(n),r=mt(e);if(null===t)return e;if(t===r)return Ri(rn(n),rn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function EP(n,e){if(Uu(n)!==Uu(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function As(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Uu(n)>Uu(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Wue{constructor(e,t){this.errorPrefix_=t,this.parts_=a_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=gw(this.parts_[r]);J4(this)}}function J4(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Tl(n))}function Tl(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class IP extends W4{static getInstance(){return new IP}constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return Ee("visible"===e,"Unknown event type: "+e),[this.visible_]}}const u_=1e3;let xw,Al=(()=>{class n extends q4{constructor(t,r,i,s,o,a,u,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=r_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=u_,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");IP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Rw.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(wr(o)),Ee(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new ku,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const u=a.d;"ok"===a.s?r.resolve(u):r.reject(u)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),Ee(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ee(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,u=>{const l=u.d,f=u.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",u),"ok"!==f&&this.removeListen_(i,s),t.onComplete&&t.onComplete(f,l))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&Do(t,"w")){const i=If(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();li(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=fw(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=fw(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),Ee(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+wr(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):lP("Unrecognized action received from server: "+wr(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Ee(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=u_,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=u_,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=u_),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Q.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let u=!1,l=null;const f=function(){l?l.close():(u=!0,s())};t.realtime_={close:f,sendRequest:function(I){Ee(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(I)}};const _=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[I,C]=yield Promise.all([t.authTokenProvider_.getToken(_),t.appCheckTokenProvider_.getToken(_)]);u?xr("getToken() completed but was canceled"):(xr("getToken() completed. Creating connection."),t.authToken_=I&&I.accessToken,t.appCheckToken_=C&&C.token,l=new G4(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,S=>{li(S+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(I){t.log_("Failed to get token: "+I),u||(t.repoInfo_.nodeAdmin&&li(I),f())}}})()}interrupt(t){xr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){xr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],OH(this.interruptReasons_)&&(this.reconnectDelay_=u_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>dP(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Wt(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){xr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){xr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+uP.replace(/\./g,"-")]=1,NH()?t["framework.cordova"]=1:function Qse(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Rw.getInstance().currentlyOnline();return OH(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class It{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new It(e,t)}}class Pw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new It(Vu,e),i=new It(Vu,t);return 0!==this.compare(r,i)}minPost(){return It.MIN}}class ez extends Pw{static get __EMPTY_NODE(){return xw}static set __EMPTY_NODE(e){xw=e}compare(e,t){return Cl(e.name,t.name)}isDefinedOn(e){throw Ef("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return It.MIN}maxPost(){return new It(ba,xw)}makePost(e,t){return Ee("string"==typeof e,"KeyIndex indexValue must always be a string."),new It(e,xw)}toString(){return".key"}}const Ro=new ez;class Mw{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let CP,js=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Hi.EMPTY_NODE,this.right=o??Hi.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Hi.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Hi.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Hi{constructor(e,t=Hi.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Hi(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,js.BLACK,null,null))}remove(e){return new Hi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,js.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Mw(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Mw(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Mw(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Mw(this.root_,null,this.comparator_,!0,e)}}function tce(n,e){return Cl(n.name,e.name)}function wP(n,e){return Cl(n,e)}Hi.EMPTY_NODE=new class ece{copy(e,t,r,i,s){return this}insert(e,t,r){return new js(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const tz=function(n){return"number"==typeof n?"number:"+E4(n):"string:"+n},nz=function(n){if(n.isLeafNode()){const e=n.val();Ee("string"==typeof e||"number"==typeof e||"object"==typeof e&&Do(e,".sv"),"Priority must be a string or number.")}else Ee(n===CP||n.isEmpty(),"priority of unexpected type.");Ee(n===CP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let rz,iz,sz,Rf=(()=>{class n{static set __childrenNodeConstructor(t){rz=t}static get __childrenNodeConstructor(){return rz}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,Ee(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),nz(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return _t(t)?this:".priority"===mt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=mt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(Ee(".priority"!==i||1===Uu(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(rn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+tz(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?E4(this.value_):this.value_,this.lazyHash_=m4(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(Ee(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return Ee(s>=0,"Unknown leaf type: "+r),Ee(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const yn=new class sce extends Pw{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Cl(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return It.MIN}maxPost(){return new It(ba,new Rf("[PRIORITY-POST]",sz))}makePost(e,t){const r=iz(e);return new It(t,new Rf("[PRIORITY-POST]",r))}toString(){return".priority"}},oce=Math.log(2);class ace{constructor(e){this.count=parseInt(Math.log(e+1)/oce,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Nw=function(n,e,t,r){n.sort(e);const i=function(u,l){const f=l-u;let m,_;if(0===f)return null;if(1===f)return m=n[u],_=t?t(m):m,new js(_,m.node,js.BLACK,null,null);{const I=parseInt(f/2,10)+u,C=i(u,I),S=i(I+1,l);return m=n[I],_=t?t(m):m,new js(_,m.node,js.BLACK,C,S)}},a=function(u){let l=null,f=null,m=n.length;const _=function(C,S){const R=m-C,H=m;m-=C;const F=i(R+1,H),W=n[R],oe=t?t(W):W;I(new js(oe,W.node,S,null,F))},I=function(C){l?(l.left=C,l=C):(f=C,l=C)};for(let C=0;C<u.count;++C){const S=u.nextBitIsOne(),R=Math.pow(2,u.count-(C+1));S?_(R,js.BLACK):(_(R,js.BLACK),_(R,js.RED))}return f}(new ace(n.length));return new Hi(r||e,a)};let TP;const Pf={};class Da{static get Default(){return Ee(Pf&&yn,"ChildrenNode.ts has not been loaded"),TP=TP||new Da({".priority":Pf},{".priority":yn}),TP}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=If(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Hi?t:null}hasIndex(e){return Do(this.indexSet_,e.toString())}addIndex(e,t){Ee(e!==Ro,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(It.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?Nw(r,e.getCompare()):Pf;const u=e.toString(),l=Object.assign({},this.indexSet_);l[u]=e;const f=Object.assign({},this.indexes_);return f[u]=a,new Da(f,l)}addToIndexes(e,t){const r=pw(this.indexes_,(i,s)=>{const o=If(this.indexSet_,s);if(Ee(o,"Missing index implementation for "+s),i===Pf){if(o.isDefinedOn(e.node)){const a=[],u=t.getIterator(It.Wrap);let l=u.getNext();for(;l;)l.name!==e.name&&a.push(l),l=u.getNext();return a.push(e),Nw(a,o.getCompare())}return Pf}{const a=t.get(e.name);let u=i;return a&&(u=u.remove(new It(e.name,a))),u.insert(e,e.node)}});return new Da(r,this.indexSet_)}removeFromIndexes(e,t){const r=pw(this.indexes_,i=>{if(i===Pf)return i;{const s=t.get(e.name);return s?i.remove(new It(e.name,s)):i}});return new Da(r,this.indexSet_)}}let c_,ut=(()=>{class n{static get EMPTY_NODE(){return c_||(c_=new n(new Hi(wP),null,Da.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&nz(this.priorityNode_),this.children_.isEmpty()&&Ee(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||c_}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?c_:r}}getChild(t){const r=mt(t);return null===r?this:this.getImmediateChild(r).getChild(rn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(Ee(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new It(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?c_:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=mt(t);if(null===i)return r;{Ee(".priority"!==mt(t)||1===Uu(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(rn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(yn,(a,u)=>{r[a]=u.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const u in r)a[u]=r[u];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+tz(this.getPriority().val())+":"),this.forEachChild(yn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":m4(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new It(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new It(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new It(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,It.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,It.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===l_?-1:0}withIndex(t){if(t===Ro||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ro||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(yn),s=r.getIterator(yn);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===Ro?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const l_=new class uce extends ut{constructor(){super(new Hi(wP),ut.EMPTY_NODE,Da.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ut.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(It,{MIN:{value:new It(Vu,ut.EMPTY_NODE)},MAX:{value:new It(ba,l_)}}),ez.__EMPTY_NODE=ut.EMPTY_NODE,Rf.__childrenNodeConstructor=ut,function nce(n){CP=n}(l_),function ice(n){sz=n}(l_);const cce=!0;function Un(n,e=null){if(null===n)return ut.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),Ee(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Rf(n,Un(e));if(n instanceof Array||!cce){let t=ut.EMPTY_NODE;return Mr(n,(r,i)=>{if(Do(n,r)&&"."!==r.substring(0,1)){const s=Un(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Un(e))}{const t=[];let r=!1;if(Mr(n,(o,a)=>{if("."!==o.substring(0,1)){const u=Un(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),t.push(new It(o,u)))}}),0===t.length)return ut.EMPTY_NODE;const s=Nw(t,tce,o=>o.name,wP);if(r){const o=Nw(t,yn.getCompare());return new ut(s,Un(e),new Da({".priority":o},{".priority":yn}))}return new ut(s,Un(e),Da.Default)}}!function rce(n){iz=n}(Un);class AP extends Pw{constructor(e){super(),this.indexPath_=e,Ee(!_t(e)&&".priority"!==mt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Cl(e.name,t.name):s}makePost(e,t){const r=Un(e),i=ut.EMPTY_NODE.updateChild(this.indexPath_,r);return new It(t,i)}maxPost(){const e=ut.EMPTY_NODE.updateChild(this.indexPath_,l_);return new It(ba,e)}toString(){return a_(this.indexPath_,0).join("/")}}const bP=new class lce extends Pw{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Cl(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return It.MIN}maxPost(){return It.MAX}makePost(e,t){const r=Un(e);return new It(t,r)}toString(){return".value"}};function oz(n){return{type:"value",snapshotNode:n}}function xf(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function d_(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function h_(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class DP{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){Ee(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(d_(t,a)):Ee(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(xf(t,r)):o.trackChildChange(h_(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(yn,(i,s)=>{t.hasChild(i)||r.trackChildChange(d_(i,s))}),t.isLeafNode()||t.forEachChild(yn,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(h_(i,s,o))}else r.trackChildChange(xf(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ut.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class f_{constructor(e){this.indexedFilter_=new DP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=f_.getStartPost_(e),this.endPost_=f_.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new It(t,r))||(r=ut.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=ut.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(ut.EMPTY_NODE);const s=this;return t.forEachChild(yn,(o,a)=>{s.matches(new It(o,a))||(i=i.updateImmediateChild(o,ut.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class hce{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new f_(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new It(t,r))||(r=ut.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=ut.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=ut.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(ut.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,ut.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const m=this.index_.getCompare();o=(_,I)=>m(I,_)}else o=this.index_.getCompare();const a=e;Ee(a.numChildren()===this.limit_,"");const u=new It(t,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),f=this.rangedFilter_.matches(u);if(a.hasChild(t)){const m=a.getImmediateChild(t);let _=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=_&&(_.name===t||a.hasChild(_.name));)_=i.getChildAfterChild(this.index_,_,this.reverse_);const I=null==_?1:o(_,u);if(f&&!r.isEmpty()&&I>=0)return s?.trackChildChange(h_(t,r,m)),a.updateImmediateChild(t,r);{s?.trackChildChange(d_(t,m));const S=a.updateImmediateChild(t,ut.EMPTY_NODE);return null!=_&&this.rangedFilter_.matches(_)?(s?.trackChildChange(xf(_.name,_.node)),S.updateImmediateChild(_.name,_.node)):S}}return r.isEmpty()?e:f&&o(l,u)>=0?(null!=s&&(s.trackChildChange(d_(l.name,l.node)),s.trackChildChange(xf(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(l.name,ut.EMPTY_NODE)):e}}class SP{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ee(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ee(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vu}hasEnd(){return this.endSet_}getIndexEndValue(){return Ee(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ee(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ba}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ee(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yn}copy(){const e=new SP;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function az(n){const e={};if(n.isDefault())return e;let t;if(n.index_===yn?t="$priority":n.index_===bP?t="$value":n.index_===Ro?t="$key":(Ee(n.index_ instanceof AP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=wr(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=wr(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+wr(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=wr(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+wr(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function uz(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==yn&&(e.i=n.index_.toString()),e}class kw extends q4{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Ee(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=r_("p:rest:"),this.listens_={}}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=kw.getListenId_(e,r),a={};this.listens_[o]=a;const u=az(e._queryParams);this.restRequest_(s+".json",u,(l,f)=>{let m=f;if(404===l&&(m=null,l=null),null===l&&this.onDataUpdate_(s,m,!1,r),If(this.listens_,o)===a){let _;_=l?401===l?"permission_denied":"rest_error:"+l:"ok",i(_,null)}})}unlisten(e,t){const r=kw.getListenId_(e,t);delete this.listens_[r]}get(e){const t=az(e._queryParams),r=e._path.toString(),i=new ku;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function noe(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=Ym(a.responseText)}catch{li("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else 401!==a.status&&404!==a.status&&li("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class yce{constructor(){this.rootNode_=ut.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Fw(){return{value:null,children:new Map}}function Mf(n,e,t){if(_t(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=mt(e);n.children.has(r)||n.children.set(r,Fw()),Mf(n.children.get(r),e=rn(e),t)}}function MP(n,e,t){null!==n.value?t(e,n.value):function vce(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{MP(i,new Wt(e.toString()+"/"+r),t)})}class Ece{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Mr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Cce{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ece(e);const r=1e4+2e4*Math.random();s_(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Mr(e,(i,s)=>{s>0&&Do(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),s_(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Po=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Po||{});function kP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Vw{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Po.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(_t(this.path)){if(null!=this.affectedTree.value)return Ee(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Wt(e));return new Vw(Vt(),t,this.revert)}}return Ee(mt(this.path)===e,"operationForChild called for unrelated child."),new Vw(rn(this.path),this.affectedTree,this.revert)}}class p_{constructor(e,t){this.source=e,this.path=t,this.type=Po.LISTEN_COMPLETE}operationForChild(e){return _t(this.path)?new p_(this.source,Vt()):new p_(this.source,rn(this.path))}}class bl{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Po.OVERWRITE}operationForChild(e){return _t(this.path)?new bl(this.source,Vt(),this.snap.getImmediateChild(e)):new bl(this.source,rn(this.path),this.snap)}}class Nf{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Po.MERGE}operationForChild(e){if(_t(this.path)){const t=this.children.subtree(new Wt(e));return t.isEmpty()?null:t.value?new bl(this.source,Vt(),t.value):new Nf(this.source,Vt(),t)}return Ee(mt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Nf(this.source,rn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Bu{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(_t(e))return this.isFullyInitialized()&&!this.filtered_;const t=mt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Tce{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function g_(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,u)=>function Dce(n,e,t){if(null==e.childName||null==t.childName)throw Ef("Should only compare child_ events.");const r=new It(e.childName,e.snapshotNode),i=new It(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,u)),o.forEach(a=>{const u=function bce(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(u,n.query_))})})}function Lw(n,e){return{eventCache:n,serverCache:e}}function m_(n,e,t,r){return Lw(new Bu(e,t,r),n.serverCache)}function lz(n,e,t,r){return Lw(n.eventCache,new Bu(e,t,r))}function Uw(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Dl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let FP;class vn{static fromObject(e){let t=new vn(null);return Mr(e,(r,i)=>{t=t.set(new Wt(r),i)}),t}constructor(e,t=(()=>(FP||(FP=new Hi(due)),FP))()){this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Vt(),value:this.value};if(_t(e))return null;{const r=mt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(rn(e),t);return null!=s?{path:On(new Wt(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(_t(e))return this;{const t=mt(e),r=this.children.get(t);return null!==r?r.subtree(rn(e)):new vn(null)}}set(e,t){if(_t(e))return new vn(t,this.children);{const r=mt(e),s=(this.children.get(r)||new vn(null)).set(rn(e),t),o=this.children.insert(r,s);return new vn(this.value,o)}}remove(e){if(_t(e))return this.children.isEmpty()?new vn(null):new vn(null,this.children);{const t=mt(e),r=this.children.get(t);if(r){const i=r.remove(rn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new vn(null):new vn(this.value,s)}return this}}get(e){if(_t(e))return this.value;{const t=mt(e),r=this.children.get(t);return r?r.get(rn(e)):null}}setTree(e,t){if(_t(e))return t;{const r=mt(e),s=(this.children.get(r)||new vn(null)).setTree(rn(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new vn(this.value,o)}}fold(e){return this.fold_(Vt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(On(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Vt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(_t(e))return null;{const s=mt(e),o=this.children.get(s);return o?o.findOnPath_(rn(e),On(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Vt(),t)}foreachOnPath_(e,t,r){if(_t(e))return this;{this.value&&r(t,this.value);const i=mt(e),s=this.children.get(i);return s?s.foreachOnPath_(rn(e),On(t,i),r):new vn(null)}}foreach(e){this.foreach_(Vt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(On(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class $s{constructor(e){this.writeTree_=e}static empty(){return new $s(new vn(null))}}function __(n,e,t){if(_t(e))return new $s(new vn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Ri(i,e);return s=s.updateChild(o,t),new $s(n.writeTree_.set(i,s))}{const i=new vn(t),s=n.writeTree_.setTree(e,i);return new $s(s)}}}function VP(n,e,t){let r=n;return Mr(t,(i,s)=>{r=__(r,On(e,i),s)}),r}function dz(n,e){if(_t(e))return $s.empty();{const t=n.writeTree_.setTree(e,new vn(null));return new $s(t)}}function LP(n,e){return null!=Sl(n,e)}function Sl(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ri(t.path,e)):null}function hz(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(yn,(r,i)=>{e.push(new It(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new It(r,i.value))}),e}function ju(n,e){if(_t(e))return n;{const t=Sl(n,e);return new $s(null!=t?new vn(t):n.writeTree_.subtree(e))}}function UP(n){return n.writeTree_.isEmpty()}function Of(n,e){return fz(Vt(),n.writeTree_,e)}function fz(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(Ee(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=fz(On(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(On(n,".priority"),r)),t}}function Bw(n,e){return yz(e,n)}function Nce(n,e){if(n.snap)return As(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&As(On(n.path,t),e))return!0;return!1}function kce(n){return n.visible}function pz(n,e,t){let r=$s.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)As(t,o)?(a=Ri(t,o),r=__(r,a,s.snap)):As(o,t)&&(a=Ri(o,t),r=__(r,Vt(),s.snap.getChild(a)));else{if(!s.children)throw Ef("WriteRecord should have .snap or .children");if(As(t,o))a=Ri(t,o),r=VP(r,a,s.children);else if(As(o,t))if(a=Ri(o,t),_t(a))r=VP(r,Vt(),s.children);else{const u=If(s.children,mt(a));if(u){const l=u.getChild(rn(a));r=__(r,Vt(),l)}}}}}return r}function gz(n,e,t,r,i){if(r||i){const s=ju(n.visibleWrites,e);return!i&&UP(s)?t:i||null!=t||LP(s,Vt())?Of(pz(n.allWrites,function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(As(l.path,e)||As(e,l.path))},e),t||ut.EMPTY_NODE):null}{const s=Sl(n.visibleWrites,e);if(null!=s)return s;{const o=ju(n.visibleWrites,e);return UP(o)?t:null!=t||LP(o,Vt())?Of(o,t||ut.EMPTY_NODE):null}}}function jw(n,e,t,r){return gz(n.writeTree,n.treePath,e,t,r)}function BP(n,e){return function Fce(n,e,t){let r=ut.EMPTY_NODE;const i=Sl(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(yn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=ju(n.visibleWrites,e);return t.forEachChild(yn,(o,a)=>{const u=Of(ju(s,new Wt(o)),a);r=r.updateImmediateChild(o,u)}),hz(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return hz(ju(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function mz(n,e,t,r){return function Vce(n,e,t,r,i){Ee(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=On(e,t);if(LP(n.visibleWrites,s))return null;{const o=ju(n.visibleWrites,s);return UP(o)?i.getChild(t):Of(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function $w(n,e){return function Uce(n,e){return Sl(n.visibleWrites,e)}(n.writeTree,On(n.treePath,e))}function jP(n,e,t){return function Lce(n,e,t,r){const i=On(e,t),s=Sl(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Of(ju(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function _z(n,e){return yz(On(n.treePath,e),n.writeTree)}function yz(n,e){return{treePath:n,writeTree:e}}class Hce{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;Ee("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ee(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,h_(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,d_(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,xf(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw Ef("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,h_(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const vz=new class zce{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class $P{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Bu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Dl(this.viewCache_),s=function $ce(n,e,t,r,i,s){return function Bce(n,e,t,r,i,s,o){let a;const u=ju(n.visibleWrites,e),l=Sl(u,Vt());if(null!=l)a=l;else{if(null==t)return[];a=Of(u,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const f=[],m=o.getCompare(),_=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let I=_.getNext();for(;I&&f.length<i;)0!==m(I,r)&&f.push(I),I=_.getNext();return f}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function Ez(n,e,t,r,i,s){const o=e.eventCache;if(null!=$w(r,t))return e;{let a,u;if(_t(t))if(Ee(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Dl(e),m=BP(r,l instanceof ut?l:ut.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),m,s)}else{const l=jw(r,Dl(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{const l=mt(t);if(".priority"===l){Ee(1===Uu(t),"Can't have a priority with additional path components");const f=o.getNode();u=e.serverCache.getNode();const m=mz(r,t,f,u);a=null!=m?n.filter.updatePriority(f,m):o.getNode()}else{const f=rn(t);let m;if(o.isCompleteForChild(l)){u=e.serverCache.getNode();const _=mz(r,t,o.getNode(),u);m=null!=_?o.getNode().getImmediateChild(l).updateChild(f,_):o.getNode().getImmediateChild(l)}else m=jP(r,l,e.serverCache);a=null!=m?n.filter.updateChild(o.getNode(),l,m,f,i,s):o.getNode()}}return m_(e,a,o.isFullyInitialized()||_t(t),n.filter.filtersNodes())}}function Hw(n,e,t,r,i,s,o,a){const u=e.serverCache;let l;const f=o?n.filter:n.filter.getIndexedFilter();if(_t(t))l=f.updateFullNode(u.getNode(),r,null);else if(f.filtersNodes()&&!u.isFiltered()){const I=u.getNode().updateChild(t,r);l=f.updateFullNode(u.getNode(),I,null)}else{const I=mt(t);if(!u.isCompleteForPath(t)&&Uu(t)>1)return e;const C=rn(t),R=u.getNode().getImmediateChild(I).updateChild(C,r);l=".priority"===I?f.updatePriority(u.getNode(),R):f.updateChild(u.getNode(),I,R,C,vz,null)}const m=lz(e,l,u.isFullyInitialized()||_t(t),f.filtersNodes());return Ez(n,m,t,i,new $P(i,m,s),a)}function HP(n,e,t,r,i,s,o){const a=e.eventCache;let u,l;const f=new $P(i,e,s);if(_t(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),u=m_(e,l,!0,n.filter.filtersNodes());else{const m=mt(t);if(".priority"===m)l=n.filter.updatePriority(e.eventCache.getNode(),r),u=m_(e,l,a.isFullyInitialized(),a.isFiltered());else{const _=rn(t),I=a.getNode().getImmediateChild(m);let C;if(_t(_))C=r;else{const S=f.getCompleteChild(m);C=null!=S?".priority"===vP(_)&&S.getChild(Y4(_)).isEmpty()?S:S.updateChild(_,r):ut.EMPTY_NODE}u=I.equals(C)?e:m_(e,n.filter.updateChild(a.getNode(),m,C,_,f,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return u}function Iz(n,e){return n.eventCache.isCompleteForChild(e)}function wz(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function zP(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l,u=e;l=_t(t)?r:new vn(null).setTree(t,r);const f=e.serverCache.getNode();return l.children.inorderTraversal((m,_)=>{if(f.hasChild(m)){const C=wz(0,e.serverCache.getNode().getImmediateChild(m),_);u=Hw(n,u,new Wt(m),C,i,s,o,a)}}),l.children.inorderTraversal((m,_)=>{const I=!e.serverCache.isCompleteForChild(m)&&null===_.value;if(!f.hasChild(m)&&!I){const S=wz(0,e.serverCache.getNode().getImmediateChild(m),_);u=Hw(n,u,new Wt(m),S,i,s,o,a)}}),u}class Zce{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new DP(r.getIndex()),s=function fce(n){return n.loadsAllData()?new DP(n.getIndex()):n.hasLimit()?new hce(n):new f_(n)}(r);this.processor_=function Gce(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,u=i.updateFullNode(ut.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(ut.EMPTY_NODE,a.getNode(),null),f=new Bu(u,o.isFullyInitialized(),i.filtersNodes()),m=new Bu(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Lw(m,f),this.eventGenerator_=new Tce(this.query_)}get query(){return this.query_}}function nle(n,e){const t=Dl(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!_t(e)&&!t.getImmediateChild(mt(e)).isEmpty())?t.getChild(e):null}function Cz(n){return 0===n.eventRegistrations_.length}function Tz(n,e,t){const r=[];if(t){Ee(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Az(n,e,t,r){e.type===Po.MERGE&&null!==e.source.queryId&&(Ee(Dl(n.viewCache_),"We should always have a full cache before handling merges"),Ee(Uw(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function Wce(n,e,t,r,i){const s=new Hce;let o,a;if(t.type===Po.OVERWRITE){const l=t;l.source.fromUser?o=HP(n,e,l.path,l.snap,r,i,s):(Ee(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!_t(l.path),o=Hw(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===Po.MERGE){const l=t;l.source.fromUser?o=function Qce(n,e,t,r,i,s,o){let a=e;return r.foreach((u,l)=>{const f=On(t,u);Iz(e,mt(f))&&(a=HP(n,a,f,l,i,s,o))}),r.foreach((u,l)=>{const f=On(t,u);Iz(e,mt(f))||(a=HP(n,a,f,l,i,s,o))}),a}(n,e,l.path,l.children,r,i,s):(Ee(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=zP(n,e,l.path,l.children,r,i,a,s))}else if(t.type===Po.ACK_USER_WRITE){const l=t;o=l.revert?function Xce(n,e,t,r,i,s){let o;if(null!=$w(r,t))return e;{const a=new $P(r,e,i),u=e.eventCache.getNode();let l;if(_t(t)||".priority"===mt(t)){let f;if(e.serverCache.isFullyInitialized())f=jw(r,Dl(e));else{const m=e.serverCache.getNode();Ee(m instanceof ut,"serverChildren would be complete if leaf node"),f=BP(r,m)}l=n.filter.updateFullNode(u,f,s)}else{const f=mt(t);let m=jP(r,f,e.serverCache);null==m&&e.serverCache.isCompleteForChild(f)&&(m=u.getImmediateChild(f)),l=null!=m?n.filter.updateChild(u,f,m,rn(t),a,s):e.eventCache.getNode().hasChild(f)?n.filter.updateChild(u,f,ut.EMPTY_NODE,rn(t),a,s):u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=jw(r,Dl(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=$w(r,Vt()),m_(e,l,o,n.filter.filtersNodes())}}(n,e,l.path,r,i,s):function Yce(n,e,t,r,i,s,o){if(null!=$w(i,t))return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(_t(t)&&u.isFullyInitialized()||u.isCompleteForPath(t))return Hw(n,e,t,u.getNode().getChild(t),i,s,a,o);if(_t(t)){let l=new vn(null);return u.getNode().forEachChild(Ro,(f,m)=>{l=l.set(new Wt(f),m)}),zP(n,e,t,l,i,s,a,o)}return e}{let l=new vn(null);return r.foreach((f,m)=>{const _=On(t,f);u.isCompleteForPath(_)&&(l=l.set(f,u.getNode().getChild(_)))}),zP(n,e,t,l,i,s,a,o)}}(n,e,l.path,l.affectedTree,r,i,s)}else{if(t.type!==Po.LISTEN_COMPLETE)throw Ef("Unknown operation type: "+t.type);o=function Jce(n,e,t,r,i){const s=e.serverCache;return Ez(n,lz(e,s.getNode(),s.isFullyInitialized()||_t(t),s.isFiltered()),t,r,vz,i)}(n,e,t.path,r,s)}const u=s.getChanges();return function Kce(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Uw(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(oz(Uw(e)))}}(e,o,u),{viewCache:o,changes:u}}(n.processor_,i,e,t,r);return function qce(n,e){Ee(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Ee(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),Ee(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,bz(n,s.changes,s.viewCache.eventCache.getNode(),null)}function bz(n,e,t,r){return function Ace(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function dce(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),g_(n,i,"child_removed",e,r,t),g_(n,i,"child_added",e,r,t),g_(n,i,"child_moved",s,r,t),g_(n,i,"child_changed",e,r,t),g_(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let zw,qw;class Dz{constructor(){this.views=new Map}}function GP(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return Ee(null!=s,"SyncTree gave us an op for an invalid query."),Az(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(Az(o,e,t,r));return s}}function Sz(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=jw(t,i?r:null),u=!1;a?u=!0:r instanceof ut?(a=BP(t,r),u=!1):(a=ut.EMPTY_NODE,u=!1);const l=Lw(new Bu(a,u,!1),new Bu(r,i,!1));return new Zce(e,l)}return o}function Rz(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function $u(n,e){let t=null;for(const r of n.views.values())t=t||nle(r,e);return t}function Pz(n,e){return e._queryParams.loadsAllData()?Gw(n):n.views.get(e._queryIdentifier)}function xz(n,e){return null!=Pz(n,e)}function Hu(n){return null!=Gw(n)}function Gw(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let hle=1;class Mz{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vn(null),this.pendingWriteTree_=function jce(){return{visibleWrites:$s.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qP(n,e,t,r,i){return function Rce(n,e,t,r,i){Ee(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=__(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?kf(n,new bl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function zu(n,e,t=!1){const r=function xce(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Mce(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);Ee(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Nce(a,r.path)?i=!1:As(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function Oce(n){n.visibleWrites=pz(n.allWrites,kce,Vt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=dz(n.visibleWrites,r.path):Mr(r.children,u=>{n.visibleWrites=dz(n.visibleWrites,On(r.path,u))}),!0))}(n.pendingWriteTree_,e)){let s=new vn(null);return null!=r.snap?s=s.set(Vt(),!0):Mr(r.children,o=>{s=s.set(new Wt(o),!0)}),kf(n,new Vw(r.path,s,t))}return[]}function y_(n,e,t){return kf(n,new bl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Ww(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||xz(o,e))){const u=function cle(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=Hu(n);if("default"===i)for(const[u,l]of n.views.entries())o=o.concat(Tz(l,t,r)),Cz(l)&&(n.views.delete(u),l.query._queryParams.loadsAllData()||s.push(l.query));else{const u=n.views.get(i);u&&(o=o.concat(Tz(u,t,r)),Cz(u)&&(n.views.delete(i),u.query._queryParams.loadsAllData()||s.push(u.query)))}return a&&!Hu(n)&&s.push(new(function ole(){return Ee(zw,"Reference.ts has not been loaded"),zw}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function ale(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const l=u.removed;if(a=u.events,!i){const f=-1!==l.findIndex(_=>_._queryParams.loadsAllData()),m=n.syncPointTree_.findOnPath(s,(_,I)=>Hu(I));if(f&&!m){const _=n.syncPointTree_.subtree(s);if(!_.isEmpty()){const I=function vle(n){return n.fold((e,t,r)=>{if(t&&Hu(t))return[Gw(t)];{let i=[];return t&&(i=Rz(t)),Mr(r,(s,o)=>{i=i.concat(o)}),i}})}(_);for(let C=0;C<I.length;++C){const S=I[C],R=S.query,H=Fz(n,S);n.listenProvider_.startListening(E_(R),v_(n,R),H.hashFn,H.onComplete)}}}!m&&l.length>0&&!r&&(f?n.listenProvider_.stopListening(E_(e),null):l.forEach(_=>{const I=n.queryToTagMap.get(Qw(_));n.listenProvider_.stopListening(E_(_),I)}))}!function Ele(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=Qw(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,l)}return a}function Nz(n,e,t,r){const i=KP(n,r);if(null!=i){const s=QP(i),o=s.path,a=s.queryId,u=Ri(o,e);return YP(n,o,new bl(kP(a),u,t))}return[]}function WP(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(_,I)=>{const C=Ri(_,i);s=s||$u(I,C),o=o||Hu(I)});let u,a=n.syncPointTree_.get(i);a?(o=o||Hu(a),s=s||$u(a,Vt())):(a=new Dz,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?u=!0:(u=!1,s=ut.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((I,C)=>{const S=$u(C,Vt());S&&(s=s.updateImmediateChild(I,S))}));const l=xz(a,e);if(!l&&!e._queryParams.loadsAllData()){const _=Qw(e);Ee(!n.queryToTagMap.has(_),"View does not exist, but we have a tag");const I=function Ile(){return hle++}();n.queryToTagMap.set(_,I),n.tagToQueryMap.set(I,_)}let m=function ule(n,e,t,r,i,s){const o=Sz(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function rle(n,e){n.eventRegistrations_.push(e)}(o,t),function ile(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(yn,(s,o)=>{r.push(xf(s,o))}),t.isFullyInitialized()&&r.push(oz(t.getNode())),bz(n,r,t.getNode(),e)}(o,t)}(a,e,t,Bw(n.pendingWriteTree_,i),s,u);if(!l&&!o&&!r){const _=Pz(a,e);m=m.concat(function wle(n,e,t){const r=e._path,i=v_(n,e),s=Fz(n,t),o=n.listenProvider_.startListening(E_(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)Ee(!Hu(a.value),"If we're adding a query, it shouldn't be shadowed");else{const u=a.fold((l,f,m)=>{if(!_t(l)&&f&&Hu(f))return[Gw(f).query];{let _=[];return f&&(_=_.concat(Rz(f).map(I=>I.query))),Mr(m,(I,C)=>{_=_.concat(C)}),_}});for(let l=0;l<u.length;++l){const f=u[l];n.listenProvider_.stopListening(E_(f),v_(n,f))}}return o}(n,e,_))}return m}function Kw(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const l=$u(a,Ri(o,e));if(l)return l});return gz(i,e,s,t,!0)}function kf(n,e){return Oz(e,n.syncPointTree_,null,Bw(n.pendingWriteTree_,Vt()))}function Oz(n,e,t,r){if(_t(n.path))return kz(n,e,t,r);{const i=e.get(Vt());null==t&&null!=i&&(t=$u(i,Vt()));let s=[];const o=mt(n.path),a=n.operationForChild(o),u=e.children.get(o);if(u&&a){const l=t?t.getImmediateChild(o):null,f=_z(r,o);s=s.concat(Oz(a,u,l,f))}return i&&(s=s.concat(GP(i,n,r,t))),s}}function kz(n,e,t,r){const i=e.get(Vt());null==t&&null!=i&&(t=$u(i,Vt()));let s=[];return e.children.inorderTraversal((o,a)=>{const u=t?t.getImmediateChild(o):null,l=_z(r,o),f=n.operationForChild(o);f&&(s=s.concat(kz(f,a,u,l)))}),i&&(s=s.concat(GP(i,n,r,t))),s}function Fz(n,e){const t=e.query,r=v_(n,t);return{hashFn:()=>(function ele(n){return n.viewCache_.serverCache.getNode()}(e)||ut.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function mle(n,e,t){const r=KP(n,t);if(r){const i=QP(r),s=i.path,o=i.queryId,a=Ri(s,e);return YP(n,s,new p_(kP(o),a))}return[]}(n,t._path,r):function gle(n,e){return kf(n,new p_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function pue(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Ww(n,t,null,s)}}}}function v_(n,e){const t=Qw(e);return n.queryToTagMap.get(t)}function Qw(n){return n._path.toString()+"$"+n._queryIdentifier}function KP(n,e){return n.tagToQueryMap.get(e)}function QP(n){const e=n.indexOf("$");return Ee(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Wt(n.substr(0,e))}}function YP(n,e,t){const r=n.syncPointTree_.get(e);return Ee(r,"Missing sync point for query tag that we're tracking"),GP(r,t,Bw(n.pendingWriteTree_,e),null)}function E_(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function dle(){return Ee(qw,"Reference.ts has not been loaded"),qw}())(n._repo,n._path):n}class JP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new JP(t)}node(){return this.node_}}class XP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=On(this.path_,e);return new XP(this.syncTree_,t)}node(){return Kw(this.syncTree_,this.path_)}}const Cle=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},Vz=function(n,e,t){return n&&"object"==typeof n?(Ee(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Tle(n[".sv"],e,t):"object"==typeof n[".sv"]?Ale(n[".sv"],e):void Ee(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Tle=function(n,e,t){if("timestamp"===n)return t.timestamp;Ee(!1,"Unexpected server value: "+n)},Ale=function(n,e,t){n.hasOwnProperty("increment")||Ee(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&Ee(!1,"Unexpected increment value: "+r);const i=e.node();if(Ee(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},Lz=function(n,e,t,r){return ex(e,new XP(t,n),r)},ZP=function(n,e,t){return ex(n,new JP(e),t)};function ex(n,e,t){const r=n.getPriority().val(),i=Vz(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=Vz(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Rf(a,Un(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Rf(i))),o.forEachChild(yn,(a,u)=>{const l=ex(u,e.getImmediateChild(a),t);l!==u&&(s=s.updateImmediateChild(a,l))}),s}}class tx{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Yw(n,e){let t=e instanceof Wt?e:new Wt(e),r=n,i=mt(t);for(;null!==i;){const s=If(r.node.children,i)||{children:{},childCount:0};r=new tx(i,r,s),t=rn(t),i=mt(t)}return r}function Rl(n){return n.node.value}function nx(n,e){n.node.value=e,rx(n)}function Uz(n){return n.node.childCount>0}function Jw(n,e){Mr(n.node.children,(t,r)=>{e(new tx(t,n,r))})}function Bz(n,e,t,r){t&&!r&&e(n),Jw(n,i=>{Bz(i,e,!0,r)}),t&&r&&e(n)}function I_(n){return new Wt(null===n.parent?n.name:I_(n.parent)+"/"+n.name)}function rx(n){null!==n.parent&&function Sle(n,e,t){const r=function ble(n){return void 0===Rl(n)&&!Uz(n)}(t),i=Do(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,rx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,rx(n))}(n.parent,n.name,n)}const Rle=/[\[\].#$\/\u0000-\u001F\u007F]/,Ple=/[\[\].#$\u0000-\u001F\u007F]/,ix=10485760,Xw=function(n){return"string"==typeof n&&0!==n.length&&!Rle.test(n)},jz=function(n){return"string"==typeof n&&0!==n.length&&!Ple.test(n)},C_=function(n,e,t){const r=t instanceof Wt?new Wue(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Tl(r));if("function"==typeof e)throw new Error(n+"contains a function "+Tl(r)+" with contents = "+e.toString());if(bw(e))throw new Error(n+"contains "+e.toString()+" "+Tl(r));if("string"==typeof e&&e.length>ix/3&&gw(e)>ix)throw new Error(n+"contains a string greater than "+ix+" utf8 bytes "+Tl(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Mr(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!Xw(o)))throw new Error(n+" contains an invalid key ("+o+") "+Tl(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Kue(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=gw(e),J4(n)})(r,o),C_(n,a,r),function Que(n){const e=n.parts_.pop();n.byteLength_-=gw(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Tl(r)+" in addition to actual children.")}},ox=function(n,e,t,r){if(!(r&&void 0===t||jz(t)))throw new Error(wf(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Nle=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ox(n,e,t,r)};class Ole{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function as(n,e,t){(function Zw(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!EP(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function Gz(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(kle(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>As(r,e)||As(e,r))}function kle(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();wl&&xr("event: "+t.toString()),Df(r)}}}const Fle=25;class Vle{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ole,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fw(),this.transactionQueueTree_=new tx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Wz(n){const t=n.infoData_.getNode(new Wt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function A_(n){return Cle({timestamp:Wz(n)})}function Kz(n,e,t,r,i){n.dataUpdateCount++;const s=new Wt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const u=pw(t,l=>Un(l));o=function _le(n,e,t,r){const i=KP(n,r);if(i){const s=QP(i),o=s.path,a=s.queryId,u=Ri(o,e),l=vn.fromObject(t);return YP(n,o,new Nf(kP(a),u,l))}return[]}(n.serverSyncTree_,s,u,i)}else{const u=Un(t);o=Nz(n.serverSyncTree_,s,u,i)}else if(r){const u=pw(t,l=>Un(l));o=function ple(n,e,t){const r=vn.fromObject(t);return kf(n,new Nf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,u)}else{const u=Un(t);o=y_(n.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=Vf(n,s)),as(n.eventQueue_,a,o)}function Qz(n,e){ax(n,"connected",e),!1===e&&function $le(n){Ff(n,"onDisconnectEvents");const e=A_(n),t=Fw();MP(n.onDisconnect_,Vt(),(i,s)=>{const o=Lz(i,s,n.serverSyncTree_,e);Mf(t,i,o)});let r=[];MP(t,Vt(),(i,s)=>{r=r.concat(y_(n.serverSyncTree_,i,s));const o=function dx(n,e){const t=I_(Xz(n,e)),r=Yw(n.transactionQueueTree_,e);return function Dle(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{hx(n,i)}),hx(n,r),Bz(r,i=>{hx(n,i)}),t}(n,i);Vf(n,o)}),n.onDisconnect_=Fw(),as(n.eventQueue_,Vt(),r)}(n)}function ax(n,e,t){const r=new Wt("/.info/"+e),i=Un(t);n.infoData_.updateSnapshot(r,i);const s=y_(n.infoSyncTree_,r,i);as(n.eventQueue_,r,s)}function eC(n){return n.nextWriteId_++}function Ff(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),xr(t,...e)}function lx(n,e,t){return Kw(n.serverSyncTree_,e,t)||ut.EMPTY_NODE}function tC(n,e=n.transactionQueueTree_){if(e||nC(n,e),Rl(e)){const t=Zz(n,e);Ee(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Qle(n,e,t){const r=t.map(l=>l.currentWriteId),i=lx(n,e,r);let s=i;const o=i.hash();for(let l=0;l<t.length;l++){const f=t[l];Ee(0===f.status,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const m=Ri(e,f.path);s=s.updateChild(m,f.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;n.server_.put(u.toString(),a,l=>{Ff(n,"transaction put response",{path:u.toString(),status:l});let f=[];if("ok"===l){const m=[];for(let _=0;_<t.length;_++)t[_].status=2,f=f.concat(zu(n.serverSyncTree_,t[_].currentWriteId)),t[_].onComplete&&m.push(()=>t[_].onComplete(null,!0,t[_].currentOutputSnapshotResolved)),t[_].unwatcher();nC(n,Yw(n.transactionQueueTree_,e)),tC(n,n.transactionQueueTree_),as(n.eventQueue_,e,f);for(let _=0;_<m.length;_++)Df(m[_])}else{if("datastale"===l)for(let m=0;m<t.length;m++)t[m].status=3===t[m].status?4:0;else{li("transaction at "+u.toString()+" failed: "+l);for(let m=0;m<t.length;m++)t[m].status=4,t[m].abortReason=l}Vf(n,e)}},o)}(n,I_(e),t)}else Uz(e)&&Jw(e,t=>{tC(n,t)})}function Vf(n,e){const t=Xz(n,e),r=I_(t);return function Yle(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],l=Ri(t,u.path);let m,f=!1;if(Ee(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)f=!0,m=u.abortReason,i=i.concat(zu(n.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=Fle)f=!0,m="maxretry",i=i.concat(zu(n.serverSyncTree_,u.currentWriteId,!0));else{const _=lx(n,u.path,o);u.currentInputSnapshot=_;const I=e[a].update(_.val());if(void 0!==I){C_("transaction failed: Data returned ",I,u.path);let C=Un(I);"object"==typeof I&&null!=I&&Do(I,".priority")||(C=C.updatePriority(_.getPriority()));const R=u.currentWriteId,H=A_(n),F=ZP(C,_,H);u.currentOutputSnapshotRaw=C,u.currentOutputSnapshotResolved=F,u.currentWriteId=eC(n),o.splice(o.indexOf(R),1),i=i.concat(qP(n.serverSyncTree_,u.path,F,u.currentWriteId,u.applyLocally)),i=i.concat(zu(n.serverSyncTree_,R,!0))}else f=!0,m="nodata",i=i.concat(zu(n.serverSyncTree_,u.currentWriteId,!0))}as(n.eventQueue_,t,i),i=[],f&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===m?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(m),!1,null)))}nC(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Df(r[a]);tC(n,n.transactionQueueTree_)}(n,Zz(n,t),r),r}function Xz(n,e){let t,r=n.transactionQueueTree_;for(t=mt(e);null!==t&&void 0===Rl(r);)r=Yw(r,t),t=mt(e=rn(e));return r}function Zz(n,e){const t=[];return eG(n,e,t),t.sort((r,i)=>r.order-i.order),t}function eG(n,e,t){const r=Rl(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Jw(e,i=>{eG(n,i,t)})}function nC(n,e){const t=Rl(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,nx(e,t.length>0?t:void 0)}Jw(e,r=>{nC(n,r)})}function hx(n,e){const t=Rl(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(Ee(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(Ee(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(zu(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?nx(e,void 0):t.length=s+1,as(n.eventQueue_,I_(e),i);for(let o=0;o<r.length;o++)Df(r[o])}}const fx=function(n,e){const t=Zle(n),r=t.namespace;return"firebase.com"===t.domain&&So(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&So("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&li("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new fP(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Wt(t.pathString)}},Zle=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",u=443;if("string"==typeof n){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let f=n.indexOf("/");-1===f&&(f=n.length);let m=n.indexOf("?");-1===m&&(m=n.length),e=n.substring(0,Math.min(f,m)),f<m&&(i=function Jle(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(f,m)));const _=function Xle(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):li(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,m)));l=e.indexOf(":"),l>=0?(o="https"===a||"wss"===a,u=parseInt(e.substring(l+1),10)):l=e.length;const I=e.slice(0,l);if("localhost"===I.toLowerCase())t="localhost";else if(I.split(".").length<=2)t=I;else{const C=e.indexOf(".");r=e.substring(0,C).toLowerCase(),t=e.substring(C+1),s=r}"ns"in _&&(s=_.ns)}return{host:e,port:u,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class nG{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+wr(this.snapshot.exportVal())}}class rG{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class px{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ee(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class us{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return _t(this._path)?null:vP(this._path)}get ref(){return new Hs(this._repo,this._path)}get _queryIdentifier(){const e=uz(this._queryParams),t=dP(e);return"{}"===t?"default":t}get _queryObject(){return uz(this._queryParams)}isEqual(e){if(!((e=Cf(e))instanceof us))return!1;const t=this._repo===e._repo,r=EP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Gue(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Hs extends us{constructor(e,t){super(e,t,new SP,!1)}get parent(){const e=Y4(this._path);return null===e?null:new Hs(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Pl{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Wt(e),r=Lf(this.ref,e);return new Pl(this._node.getChild(t),r,yn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Pl(i,Lf(this.ref,r),yn)))}hasChild(e){const t=new Wt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Lf(n,e){return null===mt((n=Cf(n))._path)?Nle("child","path",e,!1):ox("child","path",e,!1),new Hs(n._repo,On(n._path,e))}function nde(n){n=Cf(n);const e=new px(()=>{}),t=new b_(e);return function Ble(n,e,t){const r=function yle(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(l,f)=>{const m=Ri(l,t);r=r||$u(f,m)});let i=n.syncPointTree_.get(t);i?r=r||$u(i,Vt()):(i=new Dz,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new Bu(r,!0,!1):null;return function tle(n){return Uw(n.viewCache_)}(Sz(i,e,Bw(n.pendingWriteTree_,e._path),s?o.getNode():ut.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Un(i).withIndex(e._queryParams.getIndex());let o;if(WP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=y_(n.serverSyncTree_,e._path,s);else{const a=v_(n.serverSyncTree_,e);o=Nz(n.serverSyncTree_,e._path,s,a)}return as(n.eventQueue_,e._path,o),Ww(n.serverSyncTree_,e,t,null,!0),s},i=>(Ff(n,"get for query "+wr(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Pl(r,new Hs(n._repo,n._path),n._queryParams.getIndex()))}class b_{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new nG("value",this,new Pl(e.snapshotNode,new Hs(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new rG(this,e,t):null}matches(e){return e instanceof b_&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}(function sle(n){Ee(!zw,"__referenceConstructor has already been defined"),zw=n})(Hs),function lle(n){Ee(!qw,"__referenceConstructor has already been defined"),qw=n}(Hs);const gx={};function cG(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||So("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u,l,o=fx(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(u=!0,s=`http://${l}?ns=${a.namespace}`,o=fx(s,i),a=o.repoInfo):u=!o.repoInfo.secure;const f=i&&u?new o_(o_.OWNER):new Eue(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Xw(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jz(n)}(t))throw new Error(wf(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),_t(o.path)||So("Database URL must point to the root of a Firebase Database (not including a child path).");const m=function mde(n,e,t,r){let i=gx[e.name];i||(i={},gx[e.name]=i);let s=i[n.toURLString()];return s&&So("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Vle(n,false,t,r),i[n.toURLString()]=s,s}(a,n,f,new vue(n.name,t));return new yde(m,n)}class yde{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Lle(n,e,t){if(n.stats_=mP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new kw(n.repoInfo_,(r,i,s,o)=>{Kz(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Qz(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wr(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Al(n.repoInfo_,e,(r,i,s,o)=>{Kz(n,r,i,s,o)},r=>{Qz(n,r)},r=>{!function Ule(n,e){Mr(e,(t,r)=>{ax(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Cue(n,e){const t=n.toString();return gP[t]||(gP[t]=e()),gP[t]}(n.repoInfo_,()=>new Cce(n.stats_,n.server_)),n.infoData_=new yce,n.infoSyncTree_=new Mz({startListening:(r,i,s,o)=>{let a=[];const u=n.infoData_.getNode(r._path);return u.isEmpty()||(a=y_(n.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),ax(n,"connected",!1),n.serverSyncTree_=new Mz({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,u)=>{const l=o(a,u);as(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hs(this._repo,Vt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function gde(n,e){const t=gx[e];(!t||t[n.key]!==n)&&So(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function Jz(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&So("Cannot call "+e+" on a deleted database.")}}function vde(n=BH(),e){const t=yw(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(n=>{const e=(n=>{var e,t;return null===(t=null===(e=dw())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]})(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})("database");r&&function Ede(n,e,t,r={}){(n=Cf(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&So("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&So('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new o_(o_.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:function qse(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[lw(JSON.stringify({alg:"none",type:"JWT"})),lw(JSON.stringify(o)),""].join(".")}(r.mockUserToken,n.app.options.projectId);s=new o_(o)}!function pde(n,e,t,r){n.repoInfo_=new fP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(t,...r)}return t}Al.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Al.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Ide(n){(function f4(n){uP=n})("11.1.0"),Tf(new yl("database",(e,{instanceIdentifier:t})=>cG(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),Fu(d4,"1.0.10",n),Fu(d4,"1.0.10","esm2017")}();let dG=(()=>{class n{constructor(t){this.http=t,this.appCheckToken=null,this.appCheckToken=localStorage.getItem("firebaseAppCheckToken"),console.log("Token received in service: "+this.appCheckToken)}fetchGiftsFirebaseSDK(){nde(function iG(n,e){return(n=Cf(n))._checkNotDeleted("ref"),void 0!==e?Lf(n._root,e):n._root}(vde(),"gifts")).then(i=>{i.exists()?console.log(i.val()):console.log("No data available")}).catch(i=>{console.error("Error reading data:",i)})}fetchGifts(){const r=new Bs({"X-Firebase-AppCheck":this.appCheckToken||""});return this.http.get("https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app/gifts.json",{headers:r}).pipe(le(i=>{const s=[];for(const o in i)s.push({...i[o]});return s}))}updateClaim(t,r){return this.http.patch("https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app//"+t+".json",r)}addGuest(t){return this.http.post("https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app/guests.json",t)}static{this.\u0275fac=function(r){return new(r||n)(ye(mH))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Tde(n,e){1&n&&(fe(0,"div",11),Ae(1,"Name missing"),_e())}let Ade=(()=>{class n{constructor(t){this.firebaseService=t,this.validName=!0}addGuest(t,r){try{this.validateName(t.name),this.firebaseService.addGuest(t).subscribe(),this.validName=!0,r.reset()}catch(i){this.validName=!1,console.error("Adding a Guest failed: "+i)}}validateName(t){if(t.length<1)throw Error}static{this.\u0275fac=function(r){return new(r||n)(ge(dG))}}static{this.\u0275cmp=ei({type:n,selectors:[["app-rsvp"]],decls:20,vars:1,consts:[[1,"page-headline"],[1,"container"],[1,"text-container"],[1,"form-container"],[1,"form",3,"ngSubmit"],["guestForm","ngForm"],["type","text","name","name","ngModel","",1,"input-field"],["class","error-message",4,"ngIf"],["type","text","name","plusOne","ngModel","",1,"input-field"],["name","additional","rows","5","ngModel","",1,"input-field"],["type","submit","value","Send",1,"submit-button"],[1,"error-message"]],template:function(r,i){if(1&r){const s=eu();fe(0,"div",0),Ae(1,"RSVP"),_e(),fe(2,"div",1)(3,"div",2)(4,"p"),Ae(5,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ipsam natus deleniti ex delectus at libero consequatur est sequi numquam eveniet! "),_e()(),fe(6,"div",3)(7,"form",4,5),fn("ngSubmit",function(){_r(s);const a=fo(8);return Lr(i.addGuest(a.value,a))}),fe(9,"label"),Ae(10,"Name"),_e(),fr(11,"input",6),Ns(12,Tde,2,0,"div",7),fe(13,"label"),Ae(14,"Plus one (if any)"),_e(),fr(15,"input",8),fe(16,"label"),Ae(17,"Additional info"),_e(),fr(18,"textarea",9)(19,"input",10),_e()()()}2&r&&(Pt(12),hn("ngIf",!i.validName))},dependencies:[_E,G$,WI,x$,M$,yR,iw],styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{height:100vh;margin:2em}.text-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.form-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:400px;height:auto;background-color:#96a498;color:#fff;border-radius:10px;padding:1em}label[_ngcontent-%COMP%]{font-size:18px;margin-top:1em}.input-field[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:.5em;width:300px}.submit-button[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:2em;width:50px}.error-message[_ngcontent-%COMP%]{color:#fff}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}label[_ngcontent-%COMP%]{font-size:16px}.form[_ngcontent-%COMP%]{width:300px;height:auto}.input-field[_ngcontent-%COMP%]{width:200px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}label[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}.form[_ngcontent-%COMP%]{width:200px;height:auto}.input-field[_ngcontent-%COMP%]{width:150px}label[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}.form[_ngcontent-%COMP%]{width:150px;height:auto}.input-field[_ngcontent-%COMP%]{width:120px}label[_ngcontent-%COMP%]{font-size:12px}}"]})}}return n})();function bde(n,e){if(1&n){const t=eu();fe(0,"button",9),fn("click",function(){_r(t);const i=vr().$implicit;return Lr(vr().updateGiftStatus(i))}),_e()}2&n&&nu("ticked",vr().$implicit.claimed)}function Dde(n,e){if(1&n&&(fe(0,"tr")(1,"td",5),Ns(2,bde,1,2,"button",6),_e(),fe(3,"td",7)(4,"a",8),Ae(5),_e()()()),2&n){const t=e.$implicit,r=vr();Pt(2),hn("ngIf","single"===t.quantity),Pt(1),hn("ngStyle",r.getGiftStyle(t)),Pt(1),ah("href",t.link,Za),Pt(1),ru(" ",t.name,"")}}function Sde(n,e){if(1&n){const t=eu();fe(0,"button",9),fn("click",function(){_r(t);const i=vr().$implicit;return Lr(vr().updateGiftStatus(i))}),_e()}2&n&&nu("ticked",vr().$implicit.claimed)}function Rde(n,e){if(1&n&&(fe(0,"tr")(1,"td",5),Ns(2,Sde,1,2,"button",6),_e(),fe(3,"td",7)(4,"a",8),Ae(5),_e()()()),2&n){const t=e.$implicit,r=vr();Pt(2),hn("ngIf","single"===t.quantity),Pt(1),hn("ngStyle",r.getGiftStyle(t)),Pt(1),ah("href",t.link,Za),Pt(1),ru(" ",t.name,"")}}function Pde(n,e){if(1&n){const t=eu();fe(0,"button",9),fn("click",function(){_r(t);const i=vr().$implicit;return Lr(vr().updateGiftStatus(i))}),_e()}2&n&&nu("ticked",vr().$implicit.claimed)}function xde(n,e){if(1&n&&(fe(0,"tr")(1,"td",5),Ns(2,Pde,1,2,"button",6),_e(),fe(3,"td",7)(4,"a",8),Ae(5),_e()()()),2&n){const t=e.$implicit,r=vr();Pt(2),hn("ngIf","single"===t.quantity),Pt(1),hn("ngStyle",r.getGiftStyle(t)),Pt(1),ah("href",t.link,Za),Pt(1),ru(" ",t.name,"")}}function Mde(n,e){if(1&n){const t=eu();fe(0,"button",9),fn("click",function(){_r(t);const i=vr().$implicit;return Lr(vr().updateGiftStatus(i))}),_e()}2&n&&nu("ticked",vr().$implicit.claimed)}function Nde(n,e){if(1&n&&(fe(0,"tr")(1,"td",5),Ns(2,Mde,1,2,"button",6),_e(),fe(3,"td",7)(4,"a",8),Ae(5),_e()()()),2&n){const t=e.$implicit,r=vr();Pt(2),hn("ngIf","single"===t.quantity),Pt(1),hn("ngStyle",r.getGiftStyle(t)),Pt(1),ah("href",t.link,Za),Pt(1),ru(" ",t.name,"")}}let Ode=(()=>{class n{constructor(t){this.firebaseService=t,this.giftList=[]}ngOnInit(){this.fetchGifts()}fetchGifts(){this.firebaseService.fetchGifts().subscribe(t=>{this.giftList=t,console.log(this.giftList)})}sortGifts(t){let r=[];return this.giftList.forEach(i=>{i.category===t&&r.push(i)}),r}updateGiftStatus(t){const r=`gifts/gift_${t.id}`;this.firebaseService.updateClaim(r,{claimed:!t.claimed}).subscribe(()=>{try{console.log("Update: "+r+" successful"),this.ngOnInit()}catch(s){console.error("Update failed",s)}})}getGiftStyle(t){return{"text-decoration":t.claimed?"line-through":"none",color:t.claimed?"gray":"black"}}static{this.\u0275fac=function(r){return new(r||n)(ge(dG))}}static{this.\u0275cmp=ei({type:n,selectors:[["app-registry"]],decls:24,vars:4,consts:[[1,"page-headline"],[1,"container"],[1,"columns"],[1,"headline"],[4,"ngFor","ngForOf"],[1,"td-button"],["class","button",3,"ticked","click",4,"ngIf"],[3,"ngStyle"],["target","_blank",3,"href"],[1,"button",3,"click"]],template:function(r,i){1&r&&(fe(0,"div",0),Ae(1,"REGISTRY"),_e(),fe(2,"div",1)(3,"div",2)(4,"div",3),Ae(5,"Kitchen"),_e(),fe(6,"table")(7,"tbody"),Ns(8,Dde,6,4,"tr",4),_e()(),fe(9,"div",3),Ae(10,"Living Room"),_e(),fe(11,"table")(12,"tbody"),Ns(13,Rde,6,4,"tr",4),_e()(),fe(14,"div",3),Ae(15,"Bathroom"),_e(),fe(16,"table")(17,"tbody"),Ns(18,xde,6,4,"tr",4),_e()(),fe(19,"div",3),Ae(20,"Experience"),_e(),fe(21,"table")(22,"tbody"),Ns(23,Nde,6,4,"tr",4),_e()()()()),2&r&&(Pt(8),hn("ngForOf",i.sortGifts("kitchen")),Pt(5),hn("ngForOf",i.sortGifts("living-room")),Pt(5),hn("ngForOf",i.sortGifts("bathroom")),Pt(5),hn("ngForOf",i.sortGifts("experience")))},dependencies:[eV,_E,iV],styles:['.page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{height:100vh;margin:2em}.columns[_ngcontent-%COMP%]{column-count:2;column-gap:20px;height:80vh;overflow-y:auto;column-fill:auto}table[_ngcontent-%COMP%]{width:100%;border-spacing:0 10px}.headline[_ngcontent-%COMP%]{display:flex;justify-content:center;background-color:#96a498;color:#fff;margin-top:10px;margin-bottom:10px;border-radius:5px;padding:3px;font-size:18px}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f2f2f2}.td-button[_ngcontent-%COMP%]{width:20px}td[_ngcontent-%COMP%]{padding-left:30px;font-size:16px}.button[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:0%;border:1px solid;box-shadow:2px 2px 5px #0009;padding:0;margin:0;display:flex;justify-content:center;cursor:pointer}.button[_ngcontent-%COMP%]:after{content:"";margin-left:20px;margin-top:4px;position:absolute;width:18px;height:6px;border-left:2px solid black;border-bottom:2px solid black;transform:rotate(-45deg) scale(0);transform-origin:bottom left;opacity:0}.button.ticked[_ngcontent-%COMP%]:after{transform:rotate(-45deg) scale(1);opacity:1}.button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:inherit;text-decoration:none}@media (max-width: 1200px){.headline[_ngcontent-%COMP%]{font-size:17px}td[_ngcontent-%COMP%]{padding-left:25px}}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}td[_ngcontent-%COMP%]{padding-left:20px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}.columns[_ngcontent-%COMP%]{column-gap:15px}.headline[_ngcontent-%COMP%]{font-size:16px}.button[_ngcontent-%COMP%]{width:15px;height:15px}td[_ngcontent-%COMP%]{padding-left:15px;font-size:15px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}.columns[_ngcontent-%COMP%]{column-count:1}.headline[_ngcontent-%COMP%]{font-size:14px}.button[_ngcontent-%COMP%]{width:13px;height:13px}td[_ngcontent-%COMP%]{padding-left:10px;font-size:13px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}td[_ngcontent-%COMP%]{padding-left:10px}}']})}}return n})(),kde=(()=>{class n{constructor(){this.emailUser="pc",this.emailDomain="reithe.se"}getEmail(){return`${this.emailUser}@${this.emailDomain}`}getEmailLink(){return`mailto:${this.getEmail()}`}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ei({type:n,selectors:[["app-email-display"]],decls:2,vars:2,consts:[[3,"href"]],template:function(r,i){1&r&&(fe(0,"a",0),Ae(1),_e()),2&r&&(hn("href",i.getEmailLink(),Za),Pt(1),$A(i.getEmail()))}})}}return n})();const Fde=[{path:"",redirectTo:"Home",pathMatch:"full"},{path:"Home",component:nue},{path:"About",component:rue},{path:"Schedule",component:iue},{path:"Registry",component:Ode},{path:"FAQ",component:(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ei({type:n,selectors:[["app-faq"]],decls:28,vars:0,consts:[[1,"page-headline"],[1,"container"],[1,"question"],[1,"answer"],["href","https://www.google.com/maps/search/Hotels+near+Restaurant+River+on+The+Pier+Gothenburg","target","_blank"],[2,"margin-top","1em"]],template:function(r,i){1&r&&(fe(0,"div",0),Ae(1,"FAQ"),_e(),fe(2,"div",1)(3,"p"),Ae(4,"We know that many of you have gone to great lengths to make it to our wedding, travelling in from various parts around the world. For this we are truly grateful. In order to ease the stress we've put together this FAQ that will hopefully shine light on some practical aspects of your journey."),_e(),fe(5,"div",2),Ae(6,"What suitable accomodation is available?"),_e(),fe(7,"div",3),Ae(8,'We recommend "Quality Hotel 11" located right next to the venue of the wedding party. The price is ca: 2000 SEK / 1300 DKK / 175 EUR per night for a double room including breakfast. Booking is made by contacting the hotel directly on +46 31 7791111. Use discount code '),fe(9,"i"),Ae(10,"RIVER"),_e(),Ae(11,' to obtain 15 % discount on previously mentioned prices. Another option is "Hotel Villan", also very near the venue of the party. For other hotel options near Eriksberg click '),fe(12,"a",4),Ae(13,"here."),_e(),fe(14,"div",5)(15,"b"),Ae(16,"Note:"),_e(),Ae(17," Due to the fact the finals of Gothia Cup, the largest youth football tournament in the world, are being played on our wedding weekend Quality Hotell 11 is not available until the 19th."),_e()(),fe(18,"div",2),Ae(19,"How do I transport myself to, from and around the wedding?"),_e(),fe(20,"div",3),Ae(21,'Public transportation is pretty good in Gothenburg, once you get the hang of it. Download the app "V\xe4sttrafik ToGo" and buy tickets directly using your bank card. There is no need to sign up for an account. The same ticket is valid on all V\xe4sttrafik buses, trams and ferries. The app language should pop up as English as long as your phone\'s language is not set to Swedish. The ceremony, held at Domkyrkan in the city center of Gothenburg, is right next to a bus stop with the same name, "Domkyrkan". Between the church and the wedding party transportation is arranged as we have chartered a boat that will take us on a scenic tour along the harbour of Gothenburg before dropping us off at Restaurant River on The Pier in Eriksberg. The restaurant closes at 02:00, if you are in need of transportation home or to your hotel, buses run every 10-15 min through the night from bus stop "Eriksbergtorget", some 200 meters from the restaurant, to the city center. If you prefer taxi, Taxi G\xf6teborg is a trustworthy and well established taxi operator that can be booked on +46 31 650000. '),_e(),fe(22,"div",2),Ae(23,"I would like to hold a speech, who do I contact?"),_e(),fe(24,"div",3),Ae(25,"Please be in touch with toastmaster, Per-Christian Reithe, on XXX or XXX "),fr(26,"app-email-display"),Ae(27,". "),_e()())},dependencies:[kde],styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{margin:2em}.question[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.answer[_ngcontent-%COMP%]{font-size:14px;margin-bottom:2em}a[_ngcontent-%COMP%]{text-decoration:none;color:#00f}"]})}}return n})()},{path:"Contact",component:sue},{path:"Rsvp",component:Ade},{path:"**",component:oue}];let Vde=(()=>{class n{constructor(){const t=UH(s$_firebase);console.log("Initializing App Check...");try{const r=Qae(t,{provider:new oP("6LeVw6YqAAAAAMSHu5q94FNCOdQgnV48JjOidVRE"),isTokenAutoRefreshEnabled:!0});console.log("AppCheck init OK"),function Jae(n,e){return aP.apply(this,arguments)}(r,!0).then(i=>{localStorage.setItem("firebaseAppCheckToken",i.token),console.log("AppCheck Token:",i)}).catch(i=>{console.error("AppCheck Error:",i)})}catch(r){console.log("AppCheck init failed,"+r)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=vi({type:n,bootstrap:[dZ]})}static{this.\u0275inj=Tr({imports:[bY,ase,lZ,D0.forRoot(Fde),xZ.initializeApp(s$_firebase),lie,xse]})}}return n})();TY().bootstrapModule(Vde).catch(n=>console.error(n))},574:(ls,ar,Ze)=>{Ze.d(ar,{A:()=>Jn});var D=Ze(401),He=Ze(779),Ne=Ze(631),ee=Ze(398);class Ct{constructor(We,Ke){this._delegate=We,this.firebase=Ke,(0,Ne._addComponent)(We,new He.uA("app-compat",()=>this,"PUBLIC")),this.container=We.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(We){this._delegate.automaticDataCollectionEnabled=We}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(We=>{this._delegate.checkDestroyed(),We()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Ne.deleteApp)(this._delegate)))}_getService(We,Ke=Ne._DEFAULT_ENTRY_NAME){var kn;this._delegate.checkDestroyed();const Xn=this._delegate.container.getProvider(We);return!Xn.isInitialized()&&"EXPLICIT"===(null===(kn=Xn.getComponent())||void 0===kn?void 0:kn.instantiationMode)&&Xn.initialize(),Xn.getImmediate({identifier:Ke})}_removeServiceInstance(We,Ke=Ne._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(We).clearInstance(Ke)}_addComponent(We){(0,Ne._addComponent)(this._delegate,We)}_addOrOverwriteComponent(We){(0,Ne._addOrOverwriteComponent)(this._delegate,We)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Zt=new D.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ie=function it(){const Tt=function en(Tt){const We={},Ke={__esModule:!0,initializeApp:function ur($e,me={}){const De=Ne.initializeApp($e,me);if((0,D.gR)(We,De.name))return We[De.name];const X=new Tt(De,Ke);return We[De.name]=X,X},app:Xn,registerVersion:Ne.registerVersion,setLogLevel:Ne.setLogLevel,onLog:Ne.onLog,apps:null,SDK_VERSION:Ne.SDK_VERSION,INTERNAL:{registerComponent:function Ft($e){const me=$e.name,De=me.replace("-compat","");if(Ne._registerComponent($e)&&"PUBLIC"===$e.type){const X=(ot=Xn())=>{if("function"!=typeof ot[De])throw Zt.create("invalid-app-argument",{appName:me});return ot[De]()};void 0!==$e.serviceProps&&(0,D.zw)(X,$e.serviceProps),Ke[De]=X,Tt.prototype[De]=function(...ot){return this._getService.bind(this,me).apply(this,$e.multipleInstances?ot:[])}}return"PUBLIC"===$e.type?Ke[De]:null},removeApp:function kn($e){delete We[$e]},useAsService:function Bn($e,me){return"serverAuth"===me?null:me},modularAPIs:Ne}};function Xn($e){if(!(0,D.gR)(We,$e=$e||Ne._DEFAULT_ENTRY_NAME))throw Zt.create("no-app",{appName:$e});return We[$e]}return Ke.default=Ke,Object.defineProperty(Ke,"apps",{get:function Nt(){return Object.keys(We).map($e=>We[$e])}}),Xn.App=Tt,Ke}(Ct);return Tt.INTERNAL=Object.assign(Object.assign({},Tt.INTERNAL),{createFirebaseNamespace:it,extendNamespace:function We(Ke){(0,D.zw)(Tt,Ke)},createSubscribe:D.tD,ErrorFactory:D.FA,deepExtend:D.zw}),Tt}(),pe=new ee.Vy("@firebase/app-compat");try{const Tt=(0,D.mS)();if(void 0!==Tt.firebase){pe.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const We=Tt.firebase.SDK_VERSION;We&&We.indexOf("LITE")>=0&&pe.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Jn=ie;!function wt(Tt){(0,Ne.registerVersion)("@firebase/app-compat","0.2.43",Tt)}()},631:(ls,ar,Ze)=>{Ze.r(ar),Ze.d(ar,{FirebaseError:()=>ee.g,SDK_VERSION:()=>Kr,_DEFAULT_ENTRY_NAME:()=>z,_addComponent:()=>he,_addOrOverwriteComponent:()=>le,_apps:()=>te,_clearComponents:()=>zi,_components:()=>Y,_getProvider:()=>xt,_isFirebaseApp:()=>St,_isFirebaseServerApp:()=>Sn,_registerComponent:()=>st,_removeServiceInstance:()=>Ge,_serverApps:()=>B,deleteApp:()=>Ks,getApp:()=>Ws,getApps:()=>kl,initializeApp:()=>Zn,initializeServerApp:()=>No,onLog:()=>Ju,registerVersion:()=>Gi,setLogLevel:()=>Nr});var D=Ze(467),He=Ze(779),Ne=Ze(398),ee=Ze(401),Ct=Ze(749);class on{constructor(se){this.container=se}getPlatformInfoString(){return this.container.getProviders().map(A=>{if(function Zt(Pe){const se=Pe.getComponent();return"VERSION"===se?.type}(A)){const b=A.getImmediate();return`${b.library}/${b.version}`}return null}).filter(A=>A).join(" ")}}const en="@firebase/app",it="0.10.13",ie=new Ne.Vy("@firebase/app"),z="[DEFAULT]",Z={[en]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},te=new Map,B=new Map,Y=new Map;function he(Pe,se){try{Pe.container.addComponent(se)}catch(A){ie.debug(`Component ${se.name} failed to register with FirebaseApp ${Pe.name}`,A)}}function le(Pe,se){Pe.container.addOrOverwriteComponent(se)}function st(Pe){const se=Pe.name;if(Y.has(se))return ie.debug(`There were multiple attempts to register component ${se}.`),!1;Y.set(se,Pe);for(const A of te.values())he(A,Pe);for(const A of B.values())he(A,Pe);return!0}function xt(Pe,se){const A=Pe.container.getProvider("heartbeat").getImmediate({optional:!0});return A&&A.triggerHeartbeat(),Pe.container.getProvider(se)}function Ge(Pe,se,A=z){xt(Pe,se).clearInstance(A)}function St(Pe){return void 0!==Pe.options}function Sn(Pe){return void 0!==Pe.settings}function zi(){Y.clear()}const Ot=new ee.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class jn{constructor(se,A,b){this._isDeleted=!1,this._options=Object.assign({},se),this._config=Object.assign({},A),this._name=A.name,this._automaticDataCollectionEnabled=A.automaticDataCollectionEnabled,this._container=b,this.container.addComponent(new He.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(se){this.checkDestroyed(),this._automaticDataCollectionEnabled=se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(se){this._isDeleted=se}checkDestroyed(){if(this.isDeleted)throw Ot.create("app-deleted",{appName:this._name})}}class Cr extends jn{constructor(se,A,b,M){const k=void 0!==A.automaticDataCollectionEnabled&&A.automaticDataCollectionEnabled,U={name:b,automaticDataCollectionEnabled:k};super(void 0!==se.apiKey?se:se.options,U,M),this._serverConfig=Object.assign({automaticDataCollectionEnabled:k},A),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,A.releaseOnDeref=void 0,Gi(en,it,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(se){this.isDeleted||(this._refCount++,void 0!==se&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(se,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ks(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ot.create("server-app-deleted")}}const Kr="10.14.1";function Zn(Pe,se={}){let A=Pe;"object"!=typeof se&&(se={name:se});const b=Object.assign({name:z,automaticDataCollectionEnabled:!1},se),M=b.name;if("string"!=typeof M||!M)throw Ot.create("bad-app-name",{appName:String(M)});if(A||(A=(0,ee.T9)()),!A)throw Ot.create("no-options");const k=te.get(M);if(k){if((0,ee.bD)(A,k.options)&&(0,ee.bD)(b,k.config))return k;throw Ot.create("duplicate-app",{appName:M})}const U=new He.h1(M);for(const Se of Y.values())U.addComponent(Se);const Ce=new jn(A,b,U);return te.set(M,Ce),Ce}function No(Pe,se){if((0,ee.Bd)()&&!(0,ee.p7)())throw Ot.create("invalid-server-app-environment");let A;void 0===se.automaticDataCollectionEnabled&&(se.automaticDataCollectionEnabled=!1),A=St(Pe)?Pe.options:Pe;const b=Object.assign(Object.assign({},se),A);if(void 0!==b.releaseOnDeref&&delete b.releaseOnDeref,void 0!==se.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Ot.create("finalization-registry-not-supported",{});const k=""+(zt=JSON.stringify(b),[...zt].reduce((Hn,ze)=>Math.imul(31,Hn)+ze.charCodeAt(0)|0,0)),U=B.get(k);var zt;if(U)return U.incRefCount(se.releaseOnDeref),U;const Ce=new He.h1(k);for(const zt of Y.values())Ce.addComponent(zt);const Se=new Cr(A,se,k,Ce);return B.set(k,Se),Se}function Ws(Pe=z){const se=te.get(Pe);if(!se&&Pe===z&&(0,ee.T9)())return Zn();if(!se)throw Ot.create("no-app",{appName:Pe});return se}function kl(){return Array.from(te.values())}function Ks(Pe){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,D.A)(function*(Pe){let se=!1;const A=Pe.name;te.has(A)?(se=!0,te.delete(A)):B.has(A)&&Pe.decRefCount()<=0&&(B.delete(A),se=!0),se&&(yield Promise.all(Pe.container.getProviders().map(b=>b.delete())),Pe.isDeleted=!0)})).apply(this,arguments)}function Gi(Pe,se,A){var b;let M=null!==(b=Z[Pe])&&void 0!==b?b:Pe;A&&(M+=`-${A}`);const k=M.match(/\s|\//),U=se.match(/\s|\//);if(k||U){const Ce=[`Unable to register library "${M}" with version "${se}":`];return k&&Ce.push(`library name "${M}" contains illegal characters (whitespace or "/")`),k&&U&&Ce.push("and"),U&&Ce.push(`version name "${se}" contains illegal characters (whitespace or "/")`),void ie.warn(Ce.join(" "))}st(new He.uA(`${M}-version`,()=>({library:M,version:se}),"VERSION"))}function Ju(Pe,se){if(null!==Pe&&"function"!=typeof Pe)throw Ot.create("invalid-log-argument");(0,Ne.Ey)(Pe,se)}function Nr(Pe){(0,Ne.He)(Pe)}const bs="firebase-heartbeat-database",er=1,Qr="firebase-heartbeat-store";let $n=null;function xa(){return $n||($n=(0,Ct.P2)(bs,er,{upgrade:(Pe,se)=>{if(0===se)try{Pe.createObjectStore(Qr)}catch(A){console.warn(A)}}}).catch(Pe=>{throw Ot.create("idb-open",{originalErrorMessage:Pe.message})})),$n}function Oo(){return(Oo=(0,D.A)(function*(Pe){try{const A=(yield xa()).transaction(Qr),b=yield A.objectStore(Qr).get(Ss(Pe));return yield A.done,b}catch(se){if(se instanceof ee.g)ie.warn(se.message);else{const A=Ot.create("idb-get",{originalErrorMessage:se?.message});ie.warn(A.message)}}})).apply(this,arguments)}function Or(Pe,se){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,D.A)(function*(Pe,se){try{const b=(yield xa()).transaction(Qr,"readwrite");yield b.objectStore(Qr).put(se,Ss(Pe)),yield b.done}catch(A){if(A instanceof ee.g)ie.warn(A.message);else{const b=Ot.create("idb-set",{originalErrorMessage:A?.message});ie.warn(b.message)}}})).apply(this,arguments)}function Ss(Pe){return`${Pe.name}!${Pe.options.appId}`}class Yr{constructor(se){this.container=se,this._heartbeatsCache=null;const A=this.container.getProvider("app").getImmediate();this._storage=new ko(A),this._heartbeatsCachePromise=this._storage.read().then(b=>(this._heartbeatsCache=b,b))}triggerHeartbeat(){var se=this;return(0,D.A)(function*(){var A,b;try{const k=se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),U=Ys();return null==(null===(A=se._heartbeatsCache)||void 0===A?void 0:A.heartbeats)&&(se._heartbeatsCache=yield se._heartbeatsCachePromise,null==(null===(b=se._heartbeatsCache)||void 0===b?void 0:b.heartbeats))||se._heartbeatsCache.lastSentHeartbeatDate===U||se._heartbeatsCache.heartbeats.some(Ce=>Ce.date===U)?void 0:(se._heartbeatsCache.heartbeats.push({date:U,agent:k}),se._heartbeatsCache.heartbeats=se._heartbeatsCache.heartbeats.filter(Ce=>{const Se=new Date(Ce.date).valueOf();return Date.now()-Se<=2592e6}),se._storage.overwrite(se._heartbeatsCache))}catch(M){ie.warn(M)}})()}getHeartbeatsHeader(){var se=this;return(0,D.A)(function*(){var A;try{if(null===se._heartbeatsCache&&(yield se._heartbeatsCachePromise),null==(null===(A=se._heartbeatsCache)||void 0===A?void 0:A.heartbeats)||0===se._heartbeatsCache.heartbeats.length)return"";const b=Ys(),{heartbeatsToSend:M,unsentEntries:k}=function Xu(Pe,se=1024){const A=[];let b=Pe.slice();for(const M of Pe){const k=A.find(U=>U.agent===M.agent);if(k){if(k.dates.push(M.date),Zu(A)>se){k.dates.pop();break}}else if(A.push({agent:M.agent,dates:[M.date]}),Zu(A)>se){A.pop();break}b=b.slice(1)}return{heartbeatsToSend:A,unsentEntries:b}}(se._heartbeatsCache.heartbeats),U=(0,ee.Uj)(JSON.stringify({version:2,heartbeats:M}));return se._heartbeatsCache.lastSentHeartbeatDate=b,k.length>0?(se._heartbeatsCache.heartbeats=k,yield se._storage.overwrite(se._heartbeatsCache)):(se._heartbeatsCache.heartbeats=[],se._storage.overwrite(se._heartbeatsCache)),U}catch(b){return ie.warn(b),""}})()}}function Ys(){return(new Date).toISOString().substring(0,10)}class ko{constructor(se){this.app=se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.A)(function*(){return!!(0,ee.zW)()&&(0,ee.eX)().then(()=>!0).catch(()=>!1)})()}read(){var se=this;return(0,D.A)(function*(){if(yield se._canUseIndexedDBPromise){const b=yield function ds(Pe){return Oo.apply(this,arguments)}(se.app);return b?.heartbeats?b:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(se){var A=this;return(0,D.A)(function*(){var b;if(yield A._canUseIndexedDBPromise){const k=yield A.read();return Or(A.app,{lastSentHeartbeatDate:null!==(b=se.lastSentHeartbeatDate)&&void 0!==b?b:k.lastSentHeartbeatDate,heartbeats:se.heartbeats})}})()}add(se){var A=this;return(0,D.A)(function*(){var b;if(yield A._canUseIndexedDBPromise){const k=yield A.read();return Or(A.app,{lastSentHeartbeatDate:null!==(b=se.lastSentHeartbeatDate)&&void 0!==b?b:k.lastSentHeartbeatDate,heartbeats:[...k.heartbeats,...se.heartbeats]})}})()}}function Zu(Pe){return(0,ee.Uj)(JSON.stringify({version:2,heartbeats:Pe})).length}!function Ma(Pe){st(new He.uA("platform-logger",se=>new on(se),"PRIVATE")),st(new He.uA("heartbeat",se=>new Yr(se),"PRIVATE")),Gi(en,it,Pe),Gi(en,it,"esm2017"),Gi("fire-js","")}("")},779:(ls,ar,Ze)=>{Ze.d(ar,{h1:()=>en,uA:()=>Ne});var D=Ze(467),He=Ze(401);class Ne{constructor(ie,pe,Ve){this.name=ie,this.instanceFactory=pe,this.type=Ve,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ie){return this.instantiationMode=ie,this}setMultipleInstances(ie){return this.multipleInstances=ie,this}setServiceProps(ie){return this.serviceProps=ie,this}setInstanceCreatedCallback(ie){return this.onInstanceCreated=ie,this}}const ee="[DEFAULT]";class Ct{constructor(ie,pe){this.name=ie,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ie){const pe=this.normalizeInstanceIdentifier(ie);if(!this.instancesDeferred.has(pe)){const Ve=new He.cY;if(this.instancesDeferred.set(pe,Ve),this.isInitialized(pe)||this.shouldAutoInitialize())try{const ht=this.getOrInitializeService({instanceIdentifier:pe});ht&&Ve.resolve(ht)}catch{}}return this.instancesDeferred.get(pe).promise}getImmediate(ie){var pe;const Ve=this.normalizeInstanceIdentifier(ie?.identifier),ht=null!==(pe=ie?.optional)&&void 0!==pe&&pe;if(!this.isInitialized(Ve)&&!this.shouldAutoInitialize()){if(ht)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ve})}catch(wt){if(ht)return null;throw wt}}getComponent(){return this.component}setComponent(ie){if(ie.name!==this.name)throw Error(`Mismatching Component ${ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ie,this.shouldAutoInitialize()){if(function Zt(it){return"EAGER"===it.instantiationMode}(ie))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[pe,Ve]of this.instancesDeferred.entries()){const ht=this.normalizeInstanceIdentifier(pe);try{const wt=this.getOrInitializeService({instanceIdentifier:ht});Ve.resolve(wt)}catch{}}}}clearInstance(ie=ee){this.instancesDeferred.delete(ie),this.instancesOptions.delete(ie),this.instances.delete(ie)}delete(){var ie=this;return(0,D.A)(function*(){const pe=Array.from(ie.instances.values());yield Promise.all([...pe.filter(Ve=>"INTERNAL"in Ve).map(Ve=>Ve.INTERNAL.delete()),...pe.filter(Ve=>"_delete"in Ve).map(Ve=>Ve._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ie=ee){return this.instances.has(ie)}getOptions(ie=ee){return this.instancesOptions.get(ie)||{}}initialize(ie={}){const{options:pe={}}=ie,Ve=this.normalizeInstanceIdentifier(ie.instanceIdentifier);if(this.isInitialized(Ve))throw Error(`${this.name}(${Ve}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ht=this.getOrInitializeService({instanceIdentifier:Ve,options:pe});for(const[wt,Jn]of this.instancesDeferred.entries())Ve===this.normalizeInstanceIdentifier(wt)&&Jn.resolve(ht);return ht}onInit(ie,pe){var Ve;const ht=this.normalizeInstanceIdentifier(pe),wt=null!==(Ve=this.onInitCallbacks.get(ht))&&void 0!==Ve?Ve:new Set;wt.add(ie),this.onInitCallbacks.set(ht,wt);const Jn=this.instances.get(ht);return Jn&&ie(Jn,ht),()=>{wt.delete(ie)}}invokeOnInitCallbacks(ie,pe){const Ve=this.onInitCallbacks.get(pe);if(Ve)for(const ht of Ve)try{ht(ie,pe)}catch{}}getOrInitializeService({instanceIdentifier:ie,options:pe={}}){let Ve=this.instances.get(ie);if(!Ve&&this.component&&(Ve=this.component.instanceFactory(this.container,{instanceIdentifier:(it=ie,it===ee?void 0:it),options:pe}),this.instances.set(ie,Ve),this.instancesOptions.set(ie,pe),this.invokeOnInitCallbacks(Ve,ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ie,Ve)}catch{}var it;return Ve||null}normalizeInstanceIdentifier(ie=ee){return this.component?this.component.multipleInstances?ie:ee:ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class en{constructor(ie){this.name=ie,this.providers=new Map}addComponent(ie){const pe=this.getProvider(ie.name);if(pe.isComponentSet())throw new Error(`Component ${ie.name} has already been registered with ${this.name}`);pe.setComponent(ie)}addOrOverwriteComponent(ie){this.getProvider(ie.name).isComponentSet()&&this.providers.delete(ie.name),this.addComponent(ie)}getProvider(ie){if(this.providers.has(ie))return this.providers.get(ie);const pe=new Ct(ie,this);return this.providers.set(ie,pe),pe}getProviders(){return Array.from(this.providers.values())}}},398:(ls,ar,Ze)=>{Ze.d(ar,{$b:()=>He,Ey:()=>it,He:()=>en,Vy:()=>Zt});const D=[];var He=function(ie){return ie[ie.DEBUG=0]="DEBUG",ie[ie.VERBOSE=1]="VERBOSE",ie[ie.INFO=2]="INFO",ie[ie.WARN=3]="WARN",ie[ie.ERROR=4]="ERROR",ie[ie.SILENT=5]="SILENT",ie}(He||{});const Ne={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},ee=He.INFO,Ct={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},on=(ie,pe,...Ve)=>{if(pe<ie.logLevel)return;const ht=(new Date).toISOString(),wt=Ct[pe];if(!wt)throw new Error(`Attempted to log a message with an invalid logType (value: ${pe})`);console[wt](`[${ht}]  ${ie.name}:`,...Ve)};class Zt{constructor(pe){this.name=pe,this._logLevel=ee,this._logHandler=on,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(pe){if(!(pe in He))throw new TypeError(`Invalid value "${pe}" assigned to \`logLevel\``);this._logLevel=pe}setLogLevel(pe){this._logLevel="string"==typeof pe?Ne[pe]:pe}get logHandler(){return this._logHandler}set logHandler(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(pe){this._userLogHandler=pe}debug(...pe){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...pe),this._logHandler(this,He.DEBUG,...pe)}log(...pe){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...pe),this._logHandler(this,He.VERBOSE,...pe)}info(...pe){this._userLogHandler&&this._userLogHandler(this,He.INFO,...pe),this._logHandler(this,He.INFO,...pe)}warn(...pe){this._userLogHandler&&this._userLogHandler(this,He.WARN,...pe),this._logHandler(this,He.WARN,...pe)}error(...pe){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...pe),this._logHandler(this,He.ERROR,...pe)}}function en(ie){D.forEach(pe=>{pe.setLogLevel(ie)})}function it(ie,pe){for(const Ve of D){let ht=null;pe&&pe.level&&(ht=Ne[pe.level]),Ve.userLogHandler=null===ie?null:(wt,Jn,...Tt)=>{const We=Tt.map(Ke=>{if(null==Ke)return null;if("string"==typeof Ke)return Ke;if("number"==typeof Ke||"boolean"==typeof Ke)return Ke.toString();if(Ke instanceof Error)return Ke.message;try{return JSON.stringify(Ke)}catch{return null}}).filter(Ke=>Ke).join(" ");Jn>=(ht??wt.logLevel)&&ie({level:He[Jn].toLowerCase(),message:We,args:Tt,type:wt.name})}}}},324:(ls,ar,Ze)=>{var D=Ze(467),He=Ze(574),Ne=Ze(631),ee=Ze(401),Ct=Ze(398),on=Ze(635),Zt=Ze(779);const it={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Jn=function ht(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Tt=function wt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},We=new ee.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),kn=new Ct.Vy("@firebase/auth");function ur(p,...c){kn.logLevel<=Ct.$b.ERROR&&kn.error(`Auth (${Ne.SDK_VERSION}): ${p}`,...c)}function Nt(p,...c){throw De(p,...c)}function Ft(p,...c){return De(p,...c)}function Bn(p,c,d){const g=Object.assign(Object.assign({},Tt()),{[c]:d});return new ee.FA("auth","Firebase",g).create(c,{appName:p.name})}function $e(p){return Bn(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function me(p,c,d){if(!(c instanceof d))throw d.name!==c.constructor.name&&Nt(p,"argument-error"),Bn(p,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function De(p,...c){if("string"!=typeof p){const d=c[0],g=[...c.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return We.create(p,...c)}function X(p,c,...d){if(!p)throw De(c,...d)}function ot(p){const c="INTERNAL ASSERTION FAILED: "+p;throw ur(c),new Error(c)}function ft(p,c){p||ot(c)}function En(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function Jt(){return"http:"===yt()||"https:"===yt()}function yt(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class Wr{constructor(c,d){this.shortDelay=c,this.longDelay=d,ft(d>c,"Short delay should be less than long delay!"),this.isMobile=(0,ee.jZ)()||(0,ee.lV)()}get(){return function In(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Jt()||(0,ee.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qs(p,c){ft(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return c?`${d}${c.startsWith("/")?c.slice(1):c}`:d}class z{static initialize(c,d,g){this.fetchImpl=c,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Z={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},te=new Wr(3e4,6e4);function B(p,c){return p.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:p.tenantId}):c}function Y(p,c,d,g){return he.apply(this,arguments)}function he(){return(he=(0,D.A)(function*(p,c,d,g,v={}){return le(p,v,(0,D.A)(function*(){let w={},x={};g&&("GET"===c?x=g:w={body:JSON.stringify(g)});const j=(0,ee.Am)(Object.assign({key:p.config.apiKey},x)).slice(1),re=yield p._getAdditionalHeaders();re["Content-Type"]="application/json",p.languageCode&&(re["X-Firebase-Locale"]=p.languageCode);const we=Object.assign({method:c,headers:re},w);return(0,ee.c1)()||(we.referrerPolicy="no-referrer"),z.fetch()(St(p,p.config.apiHost,d,j),we)}))})).apply(this,arguments)}function le(p,c,d){return st.apply(this,arguments)}function st(){return(st=(0,D.A)(function*(p,c,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},Z),c);try{const v=new zi(p),w=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const x=yield w.json();if("needConfirmation"in x)throw Rt(p,"account-exists-with-different-credential",x);if(w.ok&&!("errorMessage"in x))return x;{const j=w.ok?x.errorMessage:x.error.message,[re,we]=j.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===re)throw Rt(p,"credential-already-in-use",x);if("EMAIL_EXISTS"===re)throw Rt(p,"email-already-in-use",x);if("USER_DISABLED"===re)throw Rt(p,"user-disabled",x);const ke=g[re]||re.toLowerCase().replace(/[_\s]+/g,"-");if(we)throw Bn(p,ke,we);Nt(p,ke)}}catch(v){if(v instanceof ee.g)throw v;Nt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function xt(p,c,d,g){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,D.A)(function*(p,c,d,g,v={}){const w=yield Y(p,c,d,g,v);return"mfaPendingCredential"in w&&Nt(p,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function St(p,c,d,g){const v=`${c}${d}?${g}`;return p.config.emulator?qs(p.config,v):`${p.config.apiScheme}://${v}`}function Sn(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zi{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(Ft(this.auth,"network-request-failed")),te.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rt(p,c,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const v=Ft(p,c,g);return v.customData._tokenResponse=d,v}function Ot(p){return void 0!==p&&void 0!==p.getResponse}function jn(p){return void 0!==p&&void 0!==p.enterprise}class Cr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===c)return Sn(d.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function Zn(){return(Zn=(0,D.A)(function*(p){return(yield Y(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function No(p,c){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,D.A)(function*(p,c){return Y(p,"GET","/v2/recaptchaConfig",B(p,c))})).apply(this,arguments)}function Ks(){return(Ks=(0,D.A)(function*(p,c){return Y(p,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Gi(){return(Gi=(0,D.A)(function*(p,c){return Y(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Ju(p,c){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,D.A)(function*(p,c){return Y(p,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function bs(p){if(p)try{const c=new Date(Number(p));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function $n(){return($n=(0,D.A)(function*(p,c=!1){const d=(0,ee.Ku)(p),g=yield d.getIdToken(c),v=ds(g);X(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const w="object"==typeof v.firebase?v.firebase:void 0,x=w?.sign_in_provider;return{claims:v,token:g,authTime:bs(xa(v.auth_time)),issuedAtTime:bs(xa(v.iat)),expirationTime:bs(xa(v.exp)),signInProvider:x||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function xa(p){return 1e3*Number(p)}function ds(p){const[c,d,g]=p.split(".");if(void 0===c||void 0===d||void 0===g)return ur("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,ee.u)(d);return v?JSON.parse(v):(ur("Failed to decode base64 JWT payload"),null)}catch(v){return ur("Caught error parsing JWT payload as JSON",v?.toString()),null}}function Oo(p){const c=ds(p);return X(c,"internal-error"),X(typeof c.exp<"u","internal-error"),X(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function Or(p,c){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,D.A)(function*(p,c,d=!1){if(d)return c;try{return yield c}catch(g){throw g instanceof ee.g&&function Ss({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class Fl{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var d;if(c){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(c=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(c);this.timerId=setTimeout((0,D.A)(function*(){yield d.iteration()}),g)}iteration(){var c=this;return(0,D.A)(function*(){try{yield c.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&c.schedule(!0))}c.schedule()})()}}class Mi{constructor(c,d){this.createdAt=c,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=bs(this.lastLoginAt),this.creationTime=bs(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yr(p){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,D.A)(function*(p){var c;const d=p.auth,g=yield p.getIdToken(),v=yield Or(p,Ju(d,{idToken:g}));X(v?.users.length,d,"internal-error");const w=v.users[0];p._notifyReloadListener(w);const x=null!==(c=w.providerUserInfo)&&void 0!==c&&c.length?Ma(w.providerUserInfo):[],j=function Zu(p,c){return[...p.filter(g=>!c.some(v=>v.providerId===g.providerId)),...c]}(p.providerData,x),ke=!!p.isAnonymous&&!(p.email&&w.passwordHash||j?.length),Oe={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:j,metadata:new Mi(w.createdAt,w.lastLoginAt),isAnonymous:ke};Object.assign(p,Oe)})).apply(this,arguments)}function ko(){return(ko=(0,D.A)(function*(p){const c=(0,ee.Ku)(p);yield Yr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Ma(p){return p.map(c=>{var{providerId:d}=c,g=(0,on.Tt)(c,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function se(){return(se=(0,D.A)(function*(p,c){const d=yield le(p,{},(0,D.A)(function*(){const g=(0,ee.Am)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:v,apiKey:w}=p.config,x=St(p,v,"/v1/token",`key=${w}`),j=yield p._getAdditionalHeaders();return j["Content-Type"]="application/x-www-form-urlencoded",z.fetch()(x,{method:"POST",headers:j,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function b(){return(b=(0,D.A)(function*(p,c){return Y(p,"POST","/v2/accounts:revokeToken",B(p,c))})).apply(this,arguments)}class M{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){X(c.idToken,"internal-error"),X(typeof c.idToken<"u","internal-error"),X(typeof c.refreshToken<"u","internal-error");const d="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):Oo(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,d)}updateFromIdToken(c){X(0!==c.length,"internal-error");const d=Oo(c);this.updateTokensAndExpiration(c,null,d)}getToken(c,d=!1){var g=this;return(0,D.A)(function*(){return d||!g.accessToken||g.isExpired?(X(g.refreshToken,c,"user-token-expired"),g.refreshToken?(yield g.refresh(c,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,d){var g=this;return(0,D.A)(function*(){const{accessToken:v,refreshToken:w,expiresIn:x}=yield function Pe(p,c){return se.apply(this,arguments)}(c,d);g.updateTokensAndExpiration(v,w,Number(x))})()}updateTokensAndExpiration(c,d,g){this.refreshToken=d||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(c,d){const{refreshToken:g,accessToken:v,expirationTime:w}=d,x=new M;return g&&(X("string"==typeof g,"internal-error",{appName:c}),x.refreshToken=g),v&&(X("string"==typeof v,"internal-error",{appName:c}),x.accessToken=v),w&&(X("number"==typeof w,"internal-error",{appName:c}),x.expirationTime=w),x}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new M,this.toJSON())}_performRefresh(){return ot("not implemented")}}function k(p,c){X("string"==typeof p||typeof p>"u","internal-error",{appName:c})}class U{constructor(c){var{uid:d,auth:g,stsTokenManager:v}=c,w=(0,on.Tt)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new Mi(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(c){var d=this;return(0,D.A)(function*(){const g=yield Or(d,d.stsTokenManager.getToken(d.auth,c));return X(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(c){return function Qr(p){return $n.apply(this,arguments)}(this,c)}reload(){return function Xu(p){return ko.apply(this,arguments)}(this)}_assign(c){this!==c&&(X(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(d=>Object.assign({},d)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const d=new U(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(c){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,d=!1){var g=this;return(0,D.A)(function*(){let v=!1;c.idToken&&c.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(c),v=!0),d&&(yield Yr(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var c=this;return(0,D.A)(function*(){if((0,Ne._isFirebaseServerApp)(c.auth.app))return Promise.reject($e(c.auth));const d=yield c.getIdToken();return yield Or(c,function kl(p,c){return Ks.apply(this,arguments)}(c.auth,{idToken:d})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,d){var g,v,w,x,j,re,we,ke;const Oe=null!==(g=d.displayName)&&void 0!==g?g:void 0,Cn=null!==(v=d.email)&&void 0!==v?v:void 0,Yi=null!==(w=d.phoneNumber)&&void 0!==w?w:void 0,ta=null!==(x=d.photoURL)&&void 0!==x?x:void 0,Yp=null!==(j=d.tenantId)&&void 0!==j?j:void 0,Jp=null!==(re=d._redirectEventId)&&void 0!==re?re:void 0,Xp=null!==(we=d.createdAt)&&void 0!==we?we:void 0,AT=null!==(ke=d.lastLoginAt)&&void 0!==ke?ke:void 0,{uid:Fd,emailVerified:bT,isAnonymous:sv,providerData:Zp,stsTokenManager:Vd}=d;X(Fd&&Vd,c,"internal-error");const wM=M.fromJSON(this.name,Vd);X("string"==typeof Fd,c,"internal-error"),k(Oe,c.name),k(Cn,c.name),X("boolean"==typeof bT,c,"internal-error"),X("boolean"==typeof sv,c,"internal-error"),k(Yi,c.name),k(ta,c.name),k(Yp,c.name),k(Jp,c.name),k(Xp,c.name),k(AT,c.name);const ov=new U({uid:Fd,auth:c,email:Cn,emailVerified:bT,displayName:Oe,isAnonymous:sv,photoURL:ta,phoneNumber:Yi,tenantId:Yp,stsTokenManager:wM,createdAt:Xp,lastLoginAt:AT});return Zp&&Array.isArray(Zp)&&(ov.providerData=Zp.map(eg=>Object.assign({},eg))),Jp&&(ov._redirectEventId=Jp),ov}static _fromIdTokenResponse(c,d,g=!1){return(0,D.A)(function*(){const v=new M;v.updateFromServerResponse(d);const w=new U({uid:d.localId,auth:c,stsTokenManager:v,isAnonymous:g});return yield Yr(w),w})()}static _fromGetAccountInfoResponse(c,d,g){return(0,D.A)(function*(){const v=d.users[0];X(void 0!==v.localId,"internal-error");const w=void 0!==v.providerUserInfo?Ma(v.providerUserInfo):[],x=!(v.email&&v.passwordHash||w?.length),j=new M;j.updateFromIdToken(g);const re=new U({uid:v.localId,auth:c,stsTokenManager:j,isAnonymous:x}),we={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:w,metadata:new Mi(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||w?.length)};return Object.assign(re,we),re})()}}const Ce=new Map;function Se(p){ft(p instanceof Function,"Expected a class definition");let c=Ce.get(p);return c?(ft(c instanceof p,"Instance stored in cache mismatched with class"),c):(c=new p,Ce.set(p,c),c)}const Hn=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.A)(function*(){return!0})()}_set(d,g){var v=this;return(0,D.A)(function*(){v.storage[d]=g})()}_get(d){var g=this;return(0,D.A)(function*(){const v=g.storage[d];return void 0===v?null:v})()}_remove(d){var g=this;return(0,D.A)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function ze(p,c,d){return`firebase:${p}:${c}:${d}`}class cr{constructor(c,d,g){this.persistence=c,this.auth=d,this.userKey=g;const{config:v,name:w}=this.auth;this.fullUserKey=ze(this.userKey,v.apiKey,w),this.fullPersistenceKey=ze("persistence",v.apiKey,w),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,D.A)(function*(){const d=yield c.persistence._get(c.fullUserKey);return d?U._fromJSON(c.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var d=this;return(0,D.A)(function*(){if(d.persistence===c)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=c,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,d,g="authUser"){return(0,D.A)(function*(){if(!d.length)return new cr(Se(Hn),c,g);const v=(yield Promise.all(d.map(function(){var we=(0,D.A)(function*(ke){if(yield ke._isAvailable())return ke});return function(ke){return we.apply(this,arguments)}}()))).filter(we=>we);let w=v[0]||Se(Hn);const x=ze(g,c.config.apiKey,c.name);let j=null;for(const we of d)try{const ke=yield we._get(x);if(ke){const Oe=U._fromJSON(c,ke);we!==w&&(j=Oe),w=we;break}}catch{}const re=v.filter(we=>we._shouldAllowMigration);return w._shouldAllowMigration&&re.length?(w=re[0],j&&(yield w._set(x,j.toJSON())),yield Promise.all(d.map(function(){var we=(0,D.A)(function*(ke){if(ke!==w)try{yield ke._remove(x)}catch{}});return function(ke){return we.apply(this,arguments)}}())),new cr(w,c,g)):new cr(w,c,g)})()}}function Qe(p){const c=p.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Xe(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Jr(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(Vl(c))return"Blackberry";if(CC(c))return"Webos";if(Fo(c))return"Safari";if((c.includes("chrome/")||Ut(c))&&!c.includes("edge/"))return"Chrome";if(Vo(c))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function Jr(p=(0,ee.ZQ)()){return/firefox\//i.test(p)}function Fo(p=(0,ee.ZQ)()){const c=p.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Ut(p=(0,ee.ZQ)()){return/crios\//i.test(p)}function Xe(p=(0,ee.ZQ)()){return/iemobile/i.test(p)}function Vo(p=(0,ee.ZQ)()){return/android/i.test(p)}function Vl(p=(0,ee.ZQ)()){return/blackberry/i.test(p)}function CC(p=(0,ee.ZQ)()){return/webos/i.test(p)}function Na(p=(0,ee.ZQ)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function kt(p=(0,ee.ZQ)()){return Na(p)||Vo(p)||CC(p)||Vl(p)||/windows phone/i.test(p)||Xe(p)}function W_(p,c=[]){let d;switch(p){case"Browser":d=Qe((0,ee.ZQ)());break;case"Worker":d=`${Qe((0,ee.ZQ)())}-${p}`;break;default:d=p}const g=c.length?c.join(","):"FirebaseCore-web";return`${d}/JsCore/${Ne.SDK_VERSION}/${g}`}class jx{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,d){const g=w=>new Promise((x,j)=>{try{x(c(w))}catch(re){j(re)}});g.onAbort=d,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(c){var d=this;return(0,D.A)(function*(){if(d.auth.currentUser===c)return;const g=[];try{for(const v of d.queue)yield v(c),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const w of g)try{w()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function ec(){return(ec=(0,D.A)(function*(p,c={}){return Y(p,"GET","/v2/passwordPolicy",B(p,c))})).apply(this,arguments)}class $x{constructor(c){var d,g,v,w;const x=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=x.minPasswordLength)&&void 0!==d?d:6,x.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=x.maxPasswordLength),void 0!==x.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=x.containsLowercaseCharacter),void 0!==x.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=x.containsUppercaseCharacter),void 0!==x.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=x.containsNumericCharacter),void 0!==x.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=x.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=c.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(w=c.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=c.schemaVersion}validatePassword(c){var d,g,v,w,x,j;const re={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,re),this.validatePasswordCharacterOptions(c,re),re.isValid&&(re.isValid=null===(d=re.meetsMinPasswordLength)||void 0===d||d),re.isValid&&(re.isValid=null===(g=re.meetsMaxPasswordLength)||void 0===g||g),re.isValid&&(re.isValid=null===(v=re.containsLowercaseLetter)||void 0===v||v),re.isValid&&(re.isValid=null===(w=re.containsUppercaseLetter)||void 0===w||w),re.isValid&&(re.isValid=null===(x=re.containsNumericCharacter)||void 0===x||x),re.isValid&&(re.isValid=null===(j=re.containsNonAlphanumericCharacter)||void 0===j||j),re}validatePasswordLengthOptions(c,d){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=c.length>=g),v&&(d.meetsMaxPasswordLength=c.length<=v)}validatePasswordCharacterOptions(c,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<c.length;v++)g=c.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(c,d,g,v,w){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=w))}}class AC{constructor(c,d,g,v){this.app=c,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Js(this),this.idTokenSubscription=new Js(this),this.beforeStateQueue=new jx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=We,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(c,d){var g=this;return d&&(this._popupRedirectResolver=Se(d)),this._initializationPromise=this.queue((0,D.A)(function*(){var v,w;if(!g._deleted&&(g.persistenceManager=yield cr.create(g,c),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(w=g.currentUser)||void 0===w?void 0:w.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,D.A)(function*(){if(c._deleted)return;const d=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||d){if(c.currentUser&&d&&c.currentUser.uid===d.uid)return c._currentUser._assign(d),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(c){var d=this;return(0,D.A)(function*(){try{const g=yield Ju(d,{idToken:c}),v=yield U._fromGetAccountInfoResponse(d,g,c);yield d.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var d=this;return(0,D.A)(function*(){var g;if((0,Ne._isFirebaseServerApp)(d.app)){const j=d.app.settings.authIdToken;return j?new Promise(re=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(j).then(re,re))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let w=v,x=!1;if(c&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const j=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,re=w?._redirectEventId,we=yield d.tryRedirectSignIn(c);(!j||j===re)&&we?.user&&(w=we.user,x=!0)}if(!w)return d.directlySetCurrentUser(null);if(!w._redirectEventId){if(x)try{yield d.beforeStateQueue.runMiddleware(w)}catch(j){w=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(j))}return w?d.reloadAndSetCurrentUserOrClear(w):d.directlySetCurrentUser(null)}return X(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===w._redirectEventId?d.directlySetCurrentUser(w):d.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(c){var d=this;return(0,D.A)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,c,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(c){var d=this;return(0,D.A)(function*(){try{yield Yr(c)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function gi(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var c=this;return(0,D.A)(function*(){c._deleted=!0})()}updateCurrentUser(c){var d=this;return(0,D.A)(function*(){if((0,Ne._isFirebaseServerApp)(d.app))return Promise.reject($e(d));const g=c?(0,ee.Ku)(c):null;return g&&X(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(c,d=!1){var g=this;return(0,D.A)(function*(){if(!g._deleted)return c&&X(g.tenantId===c.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(c)),g.queue((0,D.A)(function*(){yield g.directlySetCurrentUser(c),g.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,D.A)(function*(){return(0,Ne._isFirebaseServerApp)(c.app)?Promise.reject($e(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var d=this;return(0,Ne._isFirebaseServerApp)(this.app)?Promise.reject($e(this)):this.queue((0,D.A)(function*(){yield d.assertedPersistence.setPersistence(Se(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var d=this;return(0,D.A)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,D.A)(function*(){const d=yield function TC(p){return ec.apply(this,arguments)}(c),g=new $x(d);null===c.tenantId?c._projectPasswordPolicy=g:c._tenantPasswordPolicies[c.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new ee.FA("auth","Firebase",c())}onAuthStateChanged(c,d,g){return this.registerStateListener(this.authStateSubscription,c,d,g)}beforeAuthStateChanged(c,d){return this.beforeStateQueue.pushCallback(c,d)}onIdTokenChanged(c,d,g){return this.registerStateListener(this.idTokenSubscription,c,d,g)}authStateReady(){return new Promise((c,d)=>{if(this.currentUser)c();else{const g=this.onAuthStateChanged(()=>{g(),c()},d)}})}revokeAccessToken(c){var d=this;return(0,D.A)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:g};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function A(p,c){return b.apply(this,arguments)}(d,v)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,d){var g=this;return(0,D.A)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(d);return null===c?v.removeCurrentUser():v.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var d=this;return(0,D.A)(function*(){if(!d.redirectPersistenceManager){const g=c&&Se(c)||d._popupRedirectResolver;X(g,d,"argument-error"),d.redirectPersistenceManager=yield cr.create(d,[Se(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(c){var d=this;return(0,D.A)(function*(){var g,v;return d._isInitialized&&(yield d.queue((0,D.A)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===c?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===c?d.redirectUser:null})()}_persistUserIfCurrent(c){var d=this;return(0,D.A)(function*(){if(c===d.currentUser)return d.queue((0,D.A)(function*(){return d.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,d,g,v){if(this._deleted)return()=>{};const w="function"==typeof d?d:d.next.bind(d);let x=!1;const j=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(j,this,"internal-error"),j.then(()=>{x||w(this.currentUser)}),"function"==typeof d){const re=c.addObserver(d,g,v);return()=>{x=!0,re()}}{const re=c.addObserver(d);return()=>{x=!0,re()}}}directlySetCurrentUser(c){var d=this;return(0,D.A)(function*(){d.currentUser&&d.currentUser!==c&&d._currentUser._stopProactiveRefresh(),c&&d.isProactiveRefreshEnabled&&c._startProactiveRefresh(),d.currentUser=c,c?yield d.assertedPersistence.setCurrentUser(c):yield d.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=W_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,D.A)(function*(){var d;const g={"X-Client-Version":c.clientVersion};c.app.options.appId&&(g["X-Firebase-gmpid"]=c.app.options.appId);const v=yield null===(d=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const w=yield c._getAppCheckToken();return w&&(g["X-Firebase-AppCheck"]=w),g})()}_getAppCheckToken(){var c=this;return(0,D.A)(function*(){var d;const g=yield null===(d=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function Xn(p,...c){kn.logLevel<=Ct.$b.WARN&&kn.warn(`Auth (${Ne.SDK_VERSION}): ${p}`,...c)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function an(p){return(0,ee.Ku)(p)}class Js{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,ee.tD)(d=>this.observer=d)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ul={loadJS:()=>(0,D.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function K_(p){return Ul.loadJS(p)}function Q_(p){return`__${p}${Math.floor(1e6*Math.random())}`}class Ye{constructor(c){this.type="recaptcha-enterprise",this.auth=an(c)}verify(c="verify",d=!1){var g=this;return(0,D.A)(function*(){function w(){return w=(0,D.A)(function*(j){if(!d){if(null==j.tenantId&&null!=j._agentRecaptchaConfig)return j._agentRecaptchaConfig.siteKey;if(null!=j.tenantId&&void 0!==j._tenantRecaptchaConfigs[j.tenantId])return j._tenantRecaptchaConfigs[j.tenantId].siteKey}return new Promise(function(){var re=(0,D.A)(function*(we,ke){No(j,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Oe=>{if(void 0!==Oe.recaptchaKey){const Cn=new Cr(Oe);return null==j.tenantId?j._agentRecaptchaConfig=Cn:j._tenantRecaptchaConfigs[j.tenantId]=Cn,we(Cn.siteKey)}ke(new Error("recaptcha Enterprise site key undefined"))}).catch(Oe=>{ke(Oe)})});return function(we,ke){return re.apply(this,arguments)}}())}),w.apply(this,arguments)}function x(j,re,we){const ke=window.grecaptcha;jn(ke)?ke.enterprise.ready(()=>{ke.enterprise.execute(j,{action:c}).then(Oe=>{re(Oe)}).catch(()=>{re("NO_RECAPTCHA")})}):we(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((j,re)=>{(function v(j){return w.apply(this,arguments)})(g.auth).then(we=>{if(!d&&jn(window.grecaptcha))x(we,j,re);else{if(typeof window>"u")return void re(new Error("RecaptchaVerifier is only supported in browser"));let ke=function bC(){return Ul.recaptchaEnterpriseScript}();0!==ke.length&&(ke+=we),K_(ke).then(()=>{x(we,j,re)}).catch(Oe=>{re(Oe)})}}).catch(we=>{re(we)})})})()}}function DC(p,c,d){return Y_.apply(this,arguments)}function Y_(){return(Y_=(0,D.A)(function*(p,c,d,g=!1){const v=new Ye(p);let w;try{w=yield v.verify(d)}catch{w=yield v.verify(d,!0)}const x=Object.assign({},c);return Object.assign(x,g?{captchaResp:w}:{captchaResponse:w}),Object.assign(x,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(x,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),x})).apply(this,arguments)}function Bl(p,c,d,g){return Ue.apply(this,arguments)}function Ue(){return Ue=(0,D.A)(function*(p,c,d,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const w=yield DC(p,c,d,"getOobCode"===d);return g(p,w)}return g(p,c).catch(function(){var w=(0,D.A)(function*(x){if("auth/missing-recaptcha-token"===x.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const j=yield DC(p,c,d,"getOobCode"===d);return g(p,j)}return Promise.reject(x)});return function(x){return w.apply(this,arguments)}}())}),Ue.apply(this,arguments)}function J_(p){const c=p.indexOf(":");return c<0?"":p.substr(0,c+1)}function tc(p){if(!p)return null;const c=Number(p);return isNaN(c)?null:c}class Lo{constructor(c,d){this.providerId=c,this.signInMethod=d}toJSON(){return ot("not implemented")}_getIdTokenResponse(c){return ot("not implemented")}_linkToIdToken(c,d){return ot("not implemented")}_getReauthenticationResolver(c){return ot("not implemented")}}function X_(p,c){return dt.apply(this,arguments)}function dt(){return(dt=(0,D.A)(function*(p,c){return Y(p,"POST","/v1/accounts:resetPassword",B(p,c))})).apply(this,arguments)}function Hl(){return(Hl=(0,D.A)(function*(p,c){return Y(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Xr(p,c){return zl.apply(this,arguments)}function zl(){return(zl=(0,D.A)(function*(p,c){return Y(p,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Gt(){return(Gt=(0,D.A)(function*(p,c){return Y(p,"POST","/v1/accounts:update",B(p,c))})).apply(this,arguments)}function Qx(p,c){return Z_.apply(this,arguments)}function Z_(){return(Z_=(0,D.A)(function*(p,c){return xt(p,"POST","/v1/accounts:signInWithPassword",B(p,c))})).apply(this,arguments)}function ve(p,c){return nc.apply(this,arguments)}function nc(){return(nc=(0,D.A)(function*(p,c){return Y(p,"POST","/v1/accounts:sendOobCode",B(p,c))})).apply(this,arguments)}function Gl(){return(Gl=(0,D.A)(function*(p,c){return ve(p,c)})).apply(this,arguments)}function Wf(p,c){return Kf.apply(this,arguments)}function Kf(){return(Kf=(0,D.A)(function*(p,c){return ve(p,c)})).apply(this,arguments)}function Qf(p,c){return ey.apply(this,arguments)}function ey(){return(ey=(0,D.A)(function*(p,c){return ve(p,c)})).apply(this,arguments)}function ty(){return(ty=(0,D.A)(function*(p,c){return ve(p,c)})).apply(this,arguments)}function ny(){return(ny=(0,D.A)(function*(p,c){return xt(p,"POST","/v1/accounts:signInWithEmailLink",B(p,c))})).apply(this,arguments)}function ic(){return(ic=(0,D.A)(function*(p,c){return xt(p,"POST","/v1/accounts:signInWithEmailLink",B(p,c))})).apply(this,arguments)}class Xs extends Lo{constructor(c,d,g,v=null){super("password",g),this._email=c,this._password=d,this._tenantId=v}static _fromEmailAndPassword(c,d){return new Xs(c,d,"password")}static _fromEmailAndCode(c,d,g=null){return new Xs(c,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(c){var d=this;return(0,D.A)(function*(){switch(d.signInMethod){case"password":return Bl(c,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Qx);case"emailLink":return function Jx(p,c){return ny.apply(this,arguments)}(c,{email:d._email,oobCode:d._password});default:Nt(c,"internal-error")}})()}_linkToIdToken(c,d){var g=this;return(0,D.A)(function*(){switch(g.signInMethod){case"password":return Bl(c,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xr);case"emailLink":return function rc(p,c){return ic.apply(this,arguments)}(c,{idToken:d,email:g._email,oobCode:g._password});default:Nt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Rs(p,c){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,D.A)(function*(p,c){return xt(p,"POST","/v1/accounts:signInWithIdp",B(p,c))})).apply(this,arguments)}class qi extends Lo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const d=new qi(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(d.idToken=c.idToken),c.accessToken&&(d.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(d.nonce=c.nonce),c.pendingToken&&(d.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(d.accessToken=c.oauthToken,d.secret=c.oauthTokenSecret):Nt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:v}=d,w=(0,on.Tt)(d,["providerId","signInMethod"]);if(!g||!v)return null;const x=new qi(g,v);return x.idToken=w.idToken||void 0,x.accessToken=w.accessToken||void 0,x.secret=w.secret,x.nonce=w.nonce,x.pendingToken=w.pendingToken||null,x}_getIdTokenResponse(c){return Rs(c,this.buildRequest())}_linkToIdToken(c,d){const g=this.buildRequest();return g.idToken=d,Rs(c,g)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,Rs(c,d)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),c.postBody=(0,ee.Am)(d)}return c}}function Jf(){return(Jf=(0,D.A)(function*(p,c){return Y(p,"POST","/v1/accounts:sendVerificationCode",B(p,c))})).apply(this,arguments)}function Xf(){return(Xf=(0,D.A)(function*(p,c){return xt(p,"POST","/v1/accounts:signInWithPhoneNumber",B(p,c))})).apply(this,arguments)}function ql(){return(ql=(0,D.A)(function*(p,c){const d=yield xt(p,"POST","/v1/accounts:signInWithPhoneNumber",B(p,c));if(d.temporaryProof)throw Rt(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Me={USER_NOT_FOUND:"user-not-found"};function sc(){return(sc=(0,D.A)(function*(p,c){return xt(p,"POST","/v1/accounts:signInWithPhoneNumber",B(p,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Me)})).apply(this,arguments)}class Wi extends Lo{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,d){return new Wi({verificationId:c,verificationCode:d})}static _fromTokenResponse(c,d){return new Wi({phoneNumber:c,temporaryProof:d})}_getIdTokenResponse(c){return function Zs(p,c){return Xf.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,d){return function ye(p,c){return ql.apply(this,arguments)}(c,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Wl(p,c){return sc.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:d,verificationId:g,verificationCode:v}=this.params;return c&&d?{temporaryProof:c,phoneNumber:d}:{sessionInfo:g,code:v}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:w}=c;return g||d||v||w?new Wi({verificationId:d,verificationCode:g,phoneNumber:v,temporaryProof:w}):null}}class oc{constructor(c){var d,g,v,w,x,j;const re=(0,ee.I9)((0,ee.hp)(c)),we=null!==(d=re.apiKey)&&void 0!==d?d:null,ke=null!==(g=re.oobCode)&&void 0!==g?g:null,Oe=function PC(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=re.mode)&&void 0!==v?v:null);X(we&&ke&&Oe,"argument-error"),this.apiKey=we,this.operation=Oe,this.code=ke,this.continueUrl=null!==(w=re.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(x=re.languageCode)&&void 0!==x?x:null,this.tenantId=null!==(j=re.tenantId)&&void 0!==j?j:null}static parseLink(c){const d=function xC(p){const c=(0,ee.I9)((0,ee.hp)(p)).link,d=c?(0,ee.I9)((0,ee.hp)(c)).deep_link_id:null,g=(0,ee.I9)((0,ee.hp)(p)).deep_link_id;return(g?(0,ee.I9)((0,ee.hp)(g)).link:null)||g||d||c||p}(c);try{return new oc(d)}catch{return null}}}let ka=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return Xs._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const v=oc.parseLink(g);return X(v,"argument-error"),Xs._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class tr{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class kr extends tr{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class pt extends kr{static credentialFromJSON(c){const d="string"==typeof c?JSON.parse(c):c;return X("providerId"in d&&"signInMethod"in d,"argument-error"),qi._fromParams(d)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return X(c.idToken||c.accessToken,"argument-error"),qi._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return pt.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return pt.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:w,nonce:x,providerId:j}=c;if(!g&&!v&&!d&&!w||!j)return null;try{return new pt(j)._credential({idToken:d,accessToken:g,nonce:x,pendingToken:w})}catch{return null}}}let ac=(()=>{class p extends kr{constructor(){super("facebook.com")}static credential(d){return qi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),Kl=(()=>{class p extends kr{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return qi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:v}=d;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Ql=(()=>{class p extends kr{constructor(){super("github.com")}static credential(d){return qi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class Zr extends Lo{constructor(c,d){super(c,c),this.pendingToken=d}_getIdTokenResponse(c){return Rs(c,this.buildRequest())}_linkToIdToken(c,d){const g=this.buildRequest();return g.idToken=d,Rs(c,g)}_getReauthenticationResolver(c){const d=this.buildRequest();return d.autoCreate=!1,Rs(c,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const d="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:v,pendingToken:w}=d;return g&&v&&w&&g===v?new Zr(g,w):null}static _create(c,d){return new Zr(c,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class cc extends tr{constructor(c){X(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return cc.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return cc.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const d=Zr.fromJSON(c);return X(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:d,providerId:g}=c;if(!d||!g)return null;try{return Zr._create(g,d)}catch{return null}}}let Zf=(()=>{class p extends kr{constructor(){super("twitter.com")}static credential(d,g){return qi._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=d;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Yl(p,c){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,D.A)(function*(p,c){return xt(p,"POST","/v1/accounts:signUp",B(p,c))})).apply(this,arguments)}class _i{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,d,g,v=!1){return(0,D.A)(function*(){const w=yield U._fromIdTokenResponse(c,g,v),x=Fa(g);return new _i({user:w,providerId:x,_tokenResponse:g,operationType:d})})()}static _forOperation(c,d,g){return(0,D.A)(function*(){yield c._updateTokensIfNecessary(g,!0);const v=Fa(g);return new _i({user:c,providerId:v,_tokenResponse:g,operationType:d})})()}}function Fa(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function Xl(){return(Xl=(0,D.A)(function*(p){var c;if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject($e(p));const d=an(p);if(yield d._initializationPromise,null!==(c=d.currentUser)&&void 0!==c&&c.isAnonymous)return new _i({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield Yl(d,{returnSecureToken:!0}),v=yield _i._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class Zl extends ee.g{constructor(c,d,g,v){var w;super(d.code,d.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,Zl.prototype),this.customData={appName:c.name,tenantId:null!==(w=c.tenantId)&&void 0!==w?w:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(c,d,g,v){return new Zl(c,d,g,v)}}function ep(p,c,d,g){return("reauthenticate"===c?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?Zl._fromErrorAndOperation(p,w,c,g):w})}function sy(p){return new Set(p.map(({providerId:c})=>c).filter(c=>!!c))}function yi(){return yi=(0,D.A)(function*(p,c){const d=(0,ee.Ku)(p);yield td(!0,d,c);const{providerUserInfo:g}=yield function Qs(p,c){return Gi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[c]}),v=sy(g||[]);return d.providerData=d.providerData.filter(w=>v.has(w.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),yi.apply(this,arguments)}function tp(p,c){return ed.apply(this,arguments)}function ed(){return(ed=(0,D.A)(function*(p,c,d=!1){const g=yield Or(p,c._linkToIdToken(p.auth,yield p.getIdToken()),d);return _i._forOperation(p,"link",g)})).apply(this,arguments)}function td(p,c,d){return np.apply(this,arguments)}function np(){return(np=(0,D.A)(function*(p,c,d){yield Yr(c);const v=!1===p?"provider-already-linked":"no-such-provider";X(sy(c.providerData).has(d)===p,c.auth,v)})).apply(this,arguments)}function oy(p,c){return rp.apply(this,arguments)}function rp(){return(rp=(0,D.A)(function*(p,c,d=!1){const{auth:g}=p;if((0,Ne._isFirebaseServerApp)(g.app))return Promise.reject($e(g));const v="reauthenticate";try{const w=yield Or(p,ep(g,v,c,p),d);X(w.idToken,g,"internal-error");const x=ds(w.idToken);X(x,g,"internal-error");const{sub:j}=x;return X(p.uid===j,g,"user-mismatch"),_i._forOperation(p,v,w)}catch(w){throw"auth/user-not-found"===w?.code&&Nt(g,"user-mismatch"),w}})).apply(this,arguments)}function ip(p,c){return sp.apply(this,arguments)}function sp(){return(sp=(0,D.A)(function*(p,c,d=!1){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject($e(p));const g="signIn",v=yield ep(p,g,c),w=yield _i._fromIdTokenResponse(p,g,v);return d||(yield p._updateCurrentUser(w.user)),w})).apply(this,arguments)}function nd(p,c){return op.apply(this,arguments)}function op(){return(op=(0,D.A)(function*(p,c){return ip(an(p),c)})).apply(this,arguments)}function ei(p,c){return ap.apply(this,arguments)}function ap(){return(ap=(0,D.A)(function*(p,c){const d=(0,ee.Ku)(p);return yield td(!1,d,c.providerId),tp(d,c)})).apply(this,arguments)}function ay(p,c){return up.apply(this,arguments)}function up(){return(up=(0,D.A)(function*(p,c){return oy((0,ee.Ku)(p),c)})).apply(this,arguments)}function cp(){return(cp=(0,D.A)(function*(p,c){return xt(p,"POST","/v1/accounts:signInWithCustomToken",B(p,c))})).apply(this,arguments)}function Je(){return Je=(0,D.A)(function*(p,c){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject($e(p));const d=an(p),g=yield function vi(p,c){return cp.apply(this,arguments)}(d,{token:c,returnSecureToken:!0}),v=yield _i._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(v.user),v}),Je.apply(this,arguments)}class lr{constructor(c,d){this.factorId=c,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(c,d){return"phoneInfo"in d?vt._fromServerResponse(c,d):"totpInfo"in d?nr._fromServerResponse(c,d):Nt(c,"internal-error")}}class vt extends lr{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,d){return new vt(d)}}class nr extends lr{constructor(c){super("totp",c)}static _fromServerResponse(c,d){return new nr(d)}}function dr(p,c,d){var g;X((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),X(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),c.continueUrl=d.url,c.dynamicLinkDomain=d.dynamicLinkDomain,c.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(X(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),c.iOSBundleId=d.iOS.bundleId),d.android&&(X(d.android.packageName.length>0,p,"missing-android-pkg-name"),c.androidInstallApp=d.android.installApp,c.androidMinimumVersionCode=d.android.minimumVersion,c.androidPackageName=d.android.packageName)}function to(p){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,D.A)(function*(p){const c=an(p);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function rd(){return(rd=(0,D.A)(function*(p,c,d){const g=an(p),v={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};d&&dr(g,v,d),yield Bl(g,v,"getOobCode",Wf)})).apply(this,arguments)}function lp(){return lp=(0,D.A)(function*(p,c,d){yield X_((0,ee.Ku)(p),{oobCode:c,newPassword:d}).catch(function(){var g=(0,D.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&to(p),v});return function(v){return g.apply(this,arguments)}}())}),lp.apply(this,arguments)}function un(){return un=(0,D.A)(function*(p,c){yield function Kx(p,c){return Gt.apply(this,arguments)}((0,ee.Ku)(p),{oobCode:c})}),un.apply(this,arguments)}function xe(p,c){return tt.apply(this,arguments)}function tt(){return(tt=(0,D.A)(function*(p,c){const d=(0,ee.Ku)(p),g=yield X_(d,{oobCode:c}),v=g.requestType;switch(X(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(g.mfaInfo,d,"internal-error");default:X(g.email,d,"internal-error")}let w=null;return g.mfaInfo&&(w=lr._fromServerResponse(an(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:w},operation:v}})).apply(this,arguments)}function Ei(){return(Ei=(0,D.A)(function*(p,c){const{data:d}=yield xe((0,ee.Ku)(p),c);return d.email})).apply(this,arguments)}function hr(){return(hr=(0,D.A)(function*(p,c,d){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject($e(p));const g=an(p),x=yield Bl(g,{returnSecureToken:!0,email:c,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Yl).catch(re=>{throw"auth/password-does-not-meet-requirements"===re.code&&to(p),re}),j=yield _i._fromIdTokenResponse(g,"signIn",x);return yield g._updateCurrentUser(j.user),j})).apply(this,arguments)}function hs(){return(hs=(0,D.A)(function*(p,c,d){const g=an(p),v={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function w(x,j){X(j.handleCodeInApp,g,"argument-error"),j&&dr(g,x,j)})(v,d),yield Bl(g,v,"getOobCode",Qf)})).apply(this,arguments)}function Uo(){return(Uo=(0,D.A)(function*(p,c,d){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject($e(p));const g=(0,ee.Ku)(p),v=ka.credentialWithLink(c,d||En());return X(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),nd(g,v)})).apply(this,arguments)}function no(){return(no=(0,D.A)(function*(p,c){return Y(p,"POST","/v1/accounts:createAuthUri",B(p,c))})).apply(this,arguments)}function Bo(){return Bo=(0,D.A)(function*(p,c){const g={identifier:c,continueUri:Jt()?En():"http://localhost"},{signinMethods:v}=yield function ly(p,c){return no.apply(this,arguments)}((0,ee.Ku)(p),g);return v||[]}),Bo.apply(this,arguments)}function Oi(){return Oi=(0,D.A)(function*(p,c){const d=(0,ee.Ku)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};c&&dr(d.auth,v,c);const{email:w}=yield function qf(p,c){return Gl.apply(this,arguments)}(d.auth,v);w!==p.email&&(yield p.reload())}),Oi.apply(this,arguments)}function sd(){return sd=(0,D.A)(function*(p,c,d){const g=(0,ee.Ku)(p),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:c};d&&dr(g.auth,w,d);const{email:x}=yield function Yx(p,c){return ty.apply(this,arguments)}(g.auth,w);x!==p.email&&(yield p.reload())}),sd.apply(this,arguments)}function Ki(){return(Ki=(0,D.A)(function*(p,c){return Y(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function jo(){return jo=(0,D.A)(function*(p,{displayName:c,photoURL:d}){if(void 0===c&&void 0===d)return;const g=(0,ee.Ku)(p),w={idToken:yield g.getIdToken(),displayName:c,photoUrl:d,returnSecureToken:!0},x=yield Or(g,function ro(p,c){return Ki.apply(this,arguments)}(g.auth,w));g.displayName=x.displayName||null,g.photoURL=x.photoUrl||null;const j=g.providerData.find(({providerId:re})=>"password"===re);j&&(j.displayName=g.displayName,j.photoURL=g.photoURL),yield g._updateTokensIfNecessary(x)}),jo.apply(this,arguments)}function od(p,c,d){return ad.apply(this,arguments)}function ad(){return ad=(0,D.A)(function*(p,c,d){const{auth:g}=p,w={idToken:yield p.getIdToken(),returnSecureToken:!0};c&&(w.email=c),d&&(w.password=d);const x=yield Or(p,function Gf(p,c){return Hl.apply(this,arguments)}(g,w));yield p._updateTokensIfNecessary(x,!0)}),ad.apply(this,arguments)}class Ps{constructor(c,d,g={}){this.isNewUser=c,this.providerId=d,this.profile=g}}class $o extends Ps{constructor(c,d,g,v){super(c,d,g),this.username=v}}class fc extends Ps{constructor(c,d){super(c,"facebook.com",d)}}class mr extends $o{constructor(c,d){super(c,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class Zx extends Ps{constructor(c,d){super(c,"google.com",d)}}class ti extends $o{constructor(c,d,g){super(c,"twitter.com",d,g)}}function Vr(p){const{user:c,_tokenResponse:d}=p;return c.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function fs(p){var c,d;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},w=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const x=null===(d=null===(c=ds(p.idToken))||void 0===c?void 0:c.firebase)||void 0===d?void 0:d.sign_in_provider;if(x)return new Ps(w,"anonymous"!==x&&"custom"!==x?x:null)}if(!g)return null;switch(g){case"facebook.com":return new fc(w,v);case"github.com":return new mr(w,v);case"google.com":return new Zx(w,v);case"twitter.com":return new ti(w,v,p.screenName||null);case"custom":case"anonymous":return new Ps(w,null);default:return new Ps(w,g,v)}}(d)}class ja{constructor(c,d,g){this.type=c,this.credential=d,this.user=g}static _fromIdtoken(c,d){return new ja("enroll",c,d)}static _fromMfaPendingCredential(c){return new ja("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var d,g;if(c?.multiFactorSession){if(null!==(d=c.multiFactorSession)&&void 0!==d&&d.pendingCredential)return ja._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(g=c.multiFactorSession)&&void 0!==g&&g.idToken)return ja._fromIdtoken(c.multiFactorSession.idToken)}return null}}class fy{constructor(c,d,g){this.session=c,this.hints=d,this.signInResolver=g}static _fromError(c,d){const g=an(c),v=d.customData._serverResponse,w=(v.mfaInfo||[]).map(j=>lr._fromServerResponse(g,j));X(v.mfaPendingCredential,g,"internal-error");const x=ja._fromMfaPendingCredential(v.mfaPendingCredential);return new fy(x,w,function(){var j=(0,D.A)(function*(re){const we=yield re._process(g,x);delete v.mfaInfo,delete v.mfaPendingCredential;const ke=Object.assign(Object.assign({},v),{idToken:we.idToken,refreshToken:we.refreshToken});switch(d.operationType){case"signIn":const Oe=yield _i._fromIdTokenResponse(g,d.operationType,ke);return yield g._updateCurrentUser(Oe.user),Oe;case"reauthenticate":return X(d.user,g,"internal-error"),_i._forOperation(d.user,d.operationType,ke);default:Nt(g,"internal-error")}});return function(re){return j.apply(this,arguments)}}())}resolveSignIn(c){var d=this;return(0,D.A)(function*(){return d.signInResolver(c)})()}}class py{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>lr._fromServerResponse(c.auth,g)))})}static _fromUser(c){return new py(c)}getSession(){var c=this;return(0,D.A)(function*(){return ja._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,d){var g=this;return(0,D.A)(function*(){const v=c,w=yield g.getSession(),x=yield Or(g.user,v._process(g.user.auth,w,d));return yield g.user._updateTokensIfNecessary(x),g.user.reload()})()}unenroll(c){var d=this;return(0,D.A)(function*(){const g="string"==typeof c?c:c.uid,v=yield d.user.getIdToken();try{const w=yield Or(d.user,function aM(p,c){return Y(p,"POST","/v2/accounts/mfaEnrollment:withdraw",B(p,c))}(d.user.auth,{idToken:v,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:x})=>x!==g),yield d.user._updateTokensIfNecessary(w),yield d.user.reload()}catch(w){throw w}})()}}const ud=new WeakMap,fp="__sak";class kC{constructor(c,d){this.storageRetriever=c,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(fp,"1"),this.storage.removeItem(fp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,d){return this.storage.setItem(c,JSON.stringify(d)),Promise.resolve()}_get(c){const d=this.storage.getItem(c);return Promise.resolve(d?JSON.parse(d):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const pp=(()=>{class p extends kC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kt(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),w=this.localCache[g];v!==w&&d(g,w,v)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((j,re,we)=>{this.notifyListeners(j,we)});const v=d.key;g?this.detachListener():this.stopPolling();const w=()=>{const j=this.storage.getItem(v);!g&&this.localCache[v]===j||this.notifyListeners(v,j)},x=this.storage.getItem(v);!function et(){return(0,ee.lT)()&&10===document.documentMode}()||x===d.newValue||d.newValue===d.oldValue?w():setTimeout(w,10)}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const w of Array.from(v))w(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var v=()=>super._set,w=this;return(0,D.A)(function*(){yield v().call(w,d,g),w.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,v=this;return(0,D.A)(function*(){const w=yield g().call(v,d);return v.localCache[d]=JSON.stringify(w),w})()}_remove(d){var g=()=>super._remove,v=this;return(0,D.A)(function*(){yield g().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),ln=(()=>{class p extends kC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let ki=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(w=>w.isListeningto(d));if(g)return g;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,D.A)(function*(){const v=d,{eventId:w,eventType:x,data:j}=v.data,re=g.handlersMap[x];if(!re?.size)return;v.ports[0].postMessage({status:"ack",eventId:w,eventType:x});const we=Array.from(re).map(function(){var Oe=(0,D.A)(function*(Cn){return Cn(v.origin,j)});return function(Cn){return Oe.apply(this,arguments)}}()),ke=yield function cd(p){return Promise.all(p.map(function(){var c=(0,D.A)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return c.apply(this,arguments)}}()))}(we);v.ports[0].postMessage({status:"done",eventId:w,eventType:x,response:ke})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function $a(p="",c=10){let d="";for(let g=0;g<c;g++)d+=Math.floor(10*Math.random());return p+d}class my{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,d,g=50){var v=this;return(0,D.A)(function*(){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let x,j;return new Promise((re,we)=>{const ke=$a("",20);w.port1.start();const Oe=setTimeout(()=>{we(new Error("unsupported_event"))},g);j={messageChannel:w,onMessage(Cn){const Yi=Cn;if(Yi.data.eventId===ke)switch(Yi.data.status){case"ack":clearTimeout(Oe),x=setTimeout(()=>{we(new Error("timeout"))},3e3);break;case"done":clearTimeout(x),re(Yi.data.response);break;default:clearTimeout(Oe),clearTimeout(x),we(new Error("invalid_response"))}}},v.handlers.add(j),w.port1.addEventListener("message",j.onMessage),v.target.postMessage({eventType:c,eventId:ke,data:d},[w.port2])}).finally(()=>{j&&v.removeMessageHandler(j)})})()}}function Ln(){return window}function pc(){return typeof Ln().WorkerGlobalScope<"u"&&"function"==typeof Ln().importScripts}function gc(){return(gc=(0,D.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const mp="firebaseLocalStorageDb",Go="firebaseLocalStorage",Ha="fbase_key";class ps{constructor(c){this.request=c}toPromise(){return new Promise((c,d)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function mc(p,c){return p.transaction([Go],c?"readwrite":"readonly").objectStore(Go)}function Iy(){const p=indexedDB.open(mp,1);return new Promise((c,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(Go,{keyPath:Ha})}catch(v){d(v)}}),p.addEventListener("success",(0,D.A)(function*(){const g=p.result;g.objectStoreNames.contains(Go)?c(g):(g.close(),yield function cM(){const p=indexedDB.deleteDatabase(mp);return new ps(p).toPromise()}(),c(yield Iy()))}))})}function FC(p,c,d){return _p.apply(this,arguments)}function _p(){return(_p=(0,D.A)(function*(p,c,d){const g=mc(p,!0).put({[Ha]:c,value:d});return new ps(g).toPromise()})).apply(this,arguments)}function wy(){return(wy=(0,D.A)(function*(p,c){const d=mc(p,!1).get(c),g=yield new ps(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function yp(p,c){const d=mc(p,!0).delete(c);return new ps(d).toPromise()}const _c=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,D.A)(function*(){return d.db||(d.db=yield Iy()),d.db})()}_withRetries(d){var g=this;return(0,D.A)(function*(){let v=0;for(;;)try{const w=yield g._openDb();return yield d(w)}catch(w){if(v++>3)throw w;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,D.A)(function*(){return pc()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,D.A)(function*(){d.receiver=ki._getInstance(function vy(){return pc()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,D.A)(function*(v,w){return{keyProcessed:(yield d._poll()).includes(w.key)}});return function(v,w){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,D.A)(function*(v,w){return["keyChanged"]});return function(v,w){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,D.A)(function*(){var g,v;if(d.activeServiceWorker=yield function yy(){return gc.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new my(d.activeServiceWorker);const w=yield d.sender._send("ping",{},800);w&&null!==(g=w[0])&&void 0!==g&&g.fulfilled&&null!==(v=w[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,D.A)(function*(){if(g.sender&&g.activeServiceWorker&&function gp(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.A)(function*(){try{if(!indexedDB)return!1;const d=yield Iy();return yield FC(d,fp,"1"),yield yp(d,fp),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,D.A)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var v=this;return(0,D.A)(function*(){return v._withPendingWrite((0,D.A)(function*(){return yield v._withRetries(w=>FC(w,d,g)),v.localCache[d]=g,v.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,D.A)(function*(){const v=yield g._withRetries(w=>function VC(p,c){return wy.apply(this,arguments)}(w,d));return g.localCache[d]=v,v})()}_remove(d){var g=this;return(0,D.A)(function*(){return g._withPendingWrite((0,D.A)(function*(){return yield g._withRetries(v=>yp(v,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,D.A)(function*(){const g=yield d._withRetries(x=>{const j=mc(x,!1).getAll();return new ps(j).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const v=[],w=new Set;if(0!==g.length)for(const{fbase_key:x,value:j}of g)w.add(x),JSON.stringify(d.localCache[x])!==JSON.stringify(j)&&(d.notifyListeners(x,j),v.push(x));for(const x of Object.keys(d.localCache))d.localCache[x]&&!w.has(x)&&(d.notifyListeners(x,null),v.push(x));return v})()}notifyListeners(d,g){this.localCache[d]=g;const v=this.listeners[d];if(v)for(const w of Array.from(v))w(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,D.A)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),ld=1e12;class jC{constructor(c){this.auth=c,this.counter=ld,this._widgets=new Map}render(c,d){const g=this.counter;return this._widgets.set(g,new by(c,this.auth.name,d||{})),this.counter++,g}reset(c){var d;const g=c||ld;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(c){var d;return(null===(d=this._widgets.get(c||ld))||void 0===d?void 0:d.getResponse())||""}execute(c){var d=this;return(0,D.A)(function*(){var g;return null===(g=d._widgets.get(c||ld))||void 0===g||g.execute(),""})()}}class by{constructor(c,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof c?document.getElementById(c):c;X(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function $C(p){const c=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)c.push(d.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":d}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const dd=Q_("rcb"),HC=new Wr(3e4,6e4);class dM{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Ln().grecaptcha)||void 0===c||!c.render)}load(c,d=""){return X(function zC(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),c,"argument-error"),this.shouldResolveImmediately(d)&&Ot(Ln().grecaptcha)?Promise.resolve(Ln().grecaptcha):new Promise((g,v)=>{const w=Ln().setTimeout(()=>{v(Ft(c,"network-request-failed"))},HC.get());Ln()[dd]=()=>{Ln().clearTimeout(w),delete Ln()[dd];const j=Ln().grecaptcha;if(!j||!Ot(j))return void v(Ft(c,"internal-error"));const re=j.render;j.render=(we,ke)=>{const Oe=re(we,ke);return this.counter++,Oe},this.hostLanguage=d,g(j)},K_(`${function zx(){return Ul.recaptchaV2Script}()}?${(0,ee.Am)({onload:dd,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(w),v(Ft(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var d;return!(null===(d=Ln().grecaptcha)||void 0===d||!d.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Fi{load(c){return(0,D.A)(function*(){return new jC(c)})()}clearedOneInstance(){}}const Ep="recaptcha",GC={theme:"light",type:"image"};class qC{constructor(c,d,g=Object.assign({},GC)){this.parameters=g,this.type=Ep,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=an(c),this.isInvisible="invisible"===this.parameters.size,X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;X(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Fi:new dM,this.validateStartingState()}verify(){var c=this;return(0,D.A)(function*(){c.assertNotDestroyed();const d=yield c.render(),g=c.getAssertedRecaptcha();return g.getResponse(d)||new Promise(w=>{const x=j=>{j&&(c.tokenChangeListeners.delete(x),w(j))};c.tokenChangeListeners.add(x),c.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof c)c(d);else if("string"==typeof c){const g=Ln()[c];"function"==typeof g&&g(d)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,D.A)(function*(){if(yield c.init(),!c.widgetId){let d=c.container;if(!c.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}c.widgetId=c.getAssertedRecaptcha().render(d,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,D.A)(function*(){X(Jt()&&!pc(),c.auth,"internal-error"),yield function Dy(){let p=null;return new Promise(c=>{"complete"!==document.readyState?(p=()=>c(),window.addEventListener("load",p)):c()}).catch(c=>{throw p&&window.removeEventListener("load",p),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const d=yield function Kr(p){return Zn.apply(this,arguments)}(c.auth);X(d,c.auth,"internal-error"),c.parameters.sitekey=d})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class hd{constructor(c,d){this.verificationId=c,this.onConfirmation=d}confirm(c){const d=Wi._fromVerification(this.verificationId,c);return this.onConfirmation(d)}}function yc(){return(yc=(0,D.A)(function*(p,c,d){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject($e(p));const g=an(p),v=yield Bt(g,c,(0,ee.Ku)(d));return new hd(v,w=>nd(g,w))})).apply(this,arguments)}function Vi(){return(Vi=(0,D.A)(function*(p,c,d){const g=(0,ee.Ku)(p);yield td(!1,g,"phone");const v=yield Bt(g.auth,c,(0,ee.Ku)(d));return new hd(v,w=>ei(g,w))})).apply(this,arguments)}function fd(){return(fd=(0,D.A)(function*(p,c,d){const g=(0,ee.Ku)(p);if((0,Ne._isFirebaseServerApp)(g.auth.app))return Promise.reject($e(g.auth));const v=yield Bt(g.auth,c,(0,ee.Ku)(d));return new hd(v,w=>ay(g,w))})).apply(this,arguments)}function Bt(p,c,d){return vc.apply(this,arguments)}function vc(){return vc=(0,D.A)(function*(p,c,d){var g;const v=yield d.verify();try{let w;if(X("string"==typeof v,p,"argument-error"),X(d.type===Ep,p,"argument-error"),w="string"==typeof c?{phoneNumber:c}:c,"session"in w){const x=w.session;if("phoneNumber"in w)return X("enroll"===x.type,p,"internal-error"),(yield function iM(p,c){return Y(p,"POST","/v2/accounts/mfaEnrollment:start",B(p,c))}(p,{idToken:x.credential,phoneEnrollmentInfo:{phoneNumber:w.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{X("signin"===x.type,p,"internal-error");const j=(null===(g=w.multiFactorHint)||void 0===g?void 0:g.uid)||w.multiFactorUid;return X(j,p,"missing-multi-factor-info"),(yield function lM(p,c){return Y(p,"POST","/v2/accounts/mfaSignIn:start",B(p,c))}(p,{mfaPendingCredential:x.credential,mfaEnrollmentId:j,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:x}=yield function Oa(p,c){return Jf.apply(this,arguments)}(p,{phoneNumber:w.phoneNumber,recaptchaToken:v});return x}}finally{d._reset()}}),vc.apply(this,arguments)}function Ar(){return(Ar=(0,D.A)(function*(p,c){const d=(0,ee.Ku)(p);if((0,Ne._isFirebaseServerApp)(d.auth.app))return Promise.reject($e(d.auth));yield tp(d,c)})).apply(this,arguments)}let Ec=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=an(d)}verifyPhoneNumber(d,g){return Bt(this.auth,d,(0,ee.Ku)(g))}static credential(d,g){return Wi._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:v}=d;return g&&v?Wi._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function io(p,c){return c?Se(c):(X(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class so extends Lo{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Rs(c,this._buildIdpRequest())}_linkToIdToken(c,d){return Rs(c,this._buildIdpRequest(d))}_getReauthenticationResolver(c){return Rs(c,this._buildIdpRequest())}_buildIdpRequest(c){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(d.idToken=c),d}}function wi(p){return ip(p.auth,new so(p),p.bypassAuthState)}function QC(p){const{auth:c,user:d}=p;return X(d,c,"internal-error"),oy(d,new so(p),p.bypassAuthState)}function YC(p){return Ip.apply(this,arguments)}function Ip(){return(Ip=(0,D.A)(function*(p){const{auth:c,user:d}=p;return X(d,c,"internal-error"),tp(d,new so(p),p.bypassAuthState)})).apply(this,arguments)}class xs{constructor(c,d,g,v,w=!1){this.auth=c,this.resolver=g,this.user=v,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var c=this;return new Promise(function(){var d=(0,D.A)(function*(g,v){c.pendingPromise={resolve:g,reject:v};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(w){c.reject(w)}});return function(g,v){return d.apply(this,arguments)}}())}onAuthEvent(c){var d=this;return(0,D.A)(function*(){const{urlResponse:g,sessionId:v,postBody:w,tenantId:x,error:j,type:re}=c;if(j)return void d.reject(j);const we={auth:d.auth,requestUri:g,sessionId:v,tenantId:x||void 0,postBody:w||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(re)(we))}catch(ke){d.reject(ke)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return wi;case"linkViaPopup":case"linkViaRedirect":return YC;case"reauthViaPopup":case"reauthViaRedirect":return QC;default:Nt(this.auth,"internal-error")}}resolve(c){ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){ft(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ry=new Wr(2e3,1e4);function gd(){return(gd=(0,D.A)(function*(p,c,d){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject(Ft(p,"operation-not-supported-in-this-environment"));const g=an(p);me(p,c,tr);const v=io(g,d);return new _d(g,"signInViaPopup",c,v).executeNotNull()})).apply(this,arguments)}function md(){return(md=(0,D.A)(function*(p,c,d){const g=(0,ee.Ku)(p);if((0,Ne._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ft(g.auth,"operation-not-supported-in-this-environment"));me(g.auth,c,tr);const v=io(g.auth,d);return new _d(g.auth,"reauthViaPopup",c,v,g).executeNotNull()})).apply(this,arguments)}function qe(){return(qe=(0,D.A)(function*(p,c,d){const g=(0,ee.Ku)(p);me(g.auth,c,tr);const v=io(g.auth,d);return new _d(g.auth,"linkViaPopup",c,v,g).executeNotNull()})).apply(this,arguments)}let _d=(()=>{class p extends xs{constructor(d,g,v,w,x){super(d,g,w,x),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,D.A)(function*(){const g=yield d.execute();return X(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,D.A)(function*(){ft(1===d.filter.length,"Popup operations only handle one event");const g=$a();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(Ft(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ft(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Ry.get())};d()}}return p.currentPopupAction=null,p})();const hM="pendingRedirect",Ic=new Map;class ZC extends xs{constructor(c,d,g=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var c=()=>super.execute,d=this;return(0,D.A)(function*(){let g=Ic.get(d.auth._key());if(!g){try{const w=(yield function eT(p,c){return yd.apply(this,arguments)}(d.resolver,d.auth))?yield c().call(d):null;g=()=>Promise.resolve(w)}catch(v){g=()=>Promise.reject(v)}Ic.set(d.auth._key(),g)}return d.bypassAuthState||Ic.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(c){var d=()=>super.onAuthEvent,g=this;return(0,D.A)(function*(){if("signInViaRedirect"===c.type)return d().call(g,c);if("unknown"!==c.type){if(c.eventId){const v=yield g.auth._redirectUserForId(c.eventId);if(v)return g.user=v,d().call(g,c);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,D.A)(function*(){})()}cleanUp(){}}function yd(){return(yd=(0,D.A)(function*(p,c){const d=My(c),g=xy(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(d));return yield g._remove(d),v})).apply(this,arguments)}function oo(p,c){return wp.apply(this,arguments)}function wp(){return(wp=(0,D.A)(function*(p,c){return xy(p)._set(My(c),"true")})).apply(this,arguments)}function Cp(p,c){Ic.set(p._key(),c)}function xy(p){return Se(p._redirectPersistence)}function My(p){return ze(hM,p.config.apiKey,p.name)}function ae(p,c,d){return function At(p,c,d){return _r.apply(this,arguments)}(p,c,d)}function _r(){return(_r=(0,D.A)(function*(p,c,d){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject($e(p));const g=an(p);me(p,c,tr),yield g._initializationPromise;const v=io(g,d);return yield oo(v,g),v._openRedirect(g,c,"signInViaRedirect")})).apply(this,arguments)}function Lr(p,c,d){return function yr(p,c,d){return vd.apply(this,arguments)}(p,c,d)}function vd(){return(vd=(0,D.A)(function*(p,c,d){const g=(0,ee.Ku)(p);if(me(g.auth,c,tr),(0,Ne._isFirebaseServerApp)(g.auth.app))return Promise.reject($e(g.auth));yield g.auth._initializationPromise;const v=io(g.auth,d);yield oo(v,g.auth);const w=yield br(g);return v._openRedirect(g.auth,c,"reauthViaRedirect",w)})).apply(this,arguments)}function wc(p,c,d){return function gs(p,c,d){return Cc.apply(this,arguments)}(p,c,d)}function Cc(){return(Cc=(0,D.A)(function*(p,c,d){const g=(0,ee.Ku)(p);me(g.auth,c,tr),yield g.auth._initializationPromise;const v=io(g.auth,d);yield td(!1,g,c.providerId),yield oo(v,g.auth);const w=yield br(g);return v._openRedirect(g.auth,c,"linkViaRedirect",w)})).apply(this,arguments)}function Ap(){return(Ap=(0,D.A)(function*(p,c){return yield an(p)._initializationPromise,bp(p,c,!1)})).apply(this,arguments)}function bp(p,c){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,D.A)(function*(p,c,d=!1){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject($e(p));const g=an(p),v=io(g,c),x=yield new ZC(g,v,d).execute();return x&&!d&&(delete x.user._redirectEventId,yield g._persistUserIfCurrent(x.user),yield g._setRedirectUser(null,c)),x})).apply(this,arguments)}function br(p){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,D.A)(function*(p){const c=$a(`${p.uid}:::`);return p._redirectEventId=c,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),c})).apply(this,arguments)}class qo{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(c,g)&&(d=!0,this.sendToConsumer(c,g),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function ky(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Oy(p);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=c,d=!0)),d}sendToConsumer(c,d){var g;if(c.error&&!Oy(c)){const v=(null===(g=c.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(Ft(this.auth,v))}else d.onAuthEvent(c)}isEventForConsumer(c,d){const g=null===d.eventId||!!c.eventId&&c.eventId===d.eventId;return d.filter.includes(c.type)&&g}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ms(c))}saveEventToCache(c){this.cachedEventUids.add(ms(c)),this.lastProcessedEventTime=Date.now()}}function ms(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(c=>c).join("-")}function Oy({type:p,error:c}){return"unknown"===p&&"auth/no-auth-event"===c?.code}function Fy(p){return Dp.apply(this,arguments)}function Dp(){return(Dp=(0,D.A)(function*(p,c={}){return Y(p,"GET","/v1/projects",c)})).apply(this,arguments)}const Sp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rp=/^https?/;function Tc(){return(Tc=(0,D.A)(function*(p){if(p.config.emulator)return;const{authorizedDomains:c}=yield Fy(p);for(const d of c)try{if(nT(d))return}catch{}Nt(p,"unauthorized-domain")})).apply(this,arguments)}function nT(p){const c=En(),{protocol:d,hostname:g}=new URL(c);if(p.startsWith("chrome-extension://")){const x=new URL(p);return""===x.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===d&&x.hostname===g}if(!Rp.test(d))return!1;if(Sp.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const Ly=new Wr(3e4,6e4);function Id(){const p=Ln().___jsl;if(p?.H)for(const c of Object.keys(p.H))if(p.H[c].r=p.H[c].r||[],p.H[c].L=p.H[c].L||[],p.H[c].r=[...p.H[c].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let Ac=null;const jy=new Wr(5e3,15e3),Pp="__/auth/iframe",rT="emulator/auth/iframe",iT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ur=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wo(p){const c=p.config;X(c.authDomain,p,"auth-domain-config-required");const d=c.emulator?qs(c,rT):`https://${p.config.authDomain}/${Pp}`,g={apiKey:c.apiKey,appName:p.name,v:Ne.SDK_VERSION},v=Ur.get(p.config.apiHost);v&&(g.eid=v);const w=p._getFrameworks();return w.length&&(g.fw=w.join(",")),`${d}?${(0,ee.Am)(g).slice(1)}`}function xp(){return xp=(0,D.A)(function*(p){const c=yield function By(p){return Ac=Ac||function Uy(p){return new Promise((c,d)=>{var g,v,w;function x(){Id(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Id(),d(Ft(p,"network-request-failed"))},timeout:Ly.get()})}if(null!==(v=null===(g=Ln().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)c(gapi.iframes.getContext());else{if(null===(w=Ln().gapi)||void 0===w||!w.load){const j=Q_("iframefcb");return Ln()[j]=()=>{gapi.load?x():d(Ft(p,"network-request-failed"))},K_(`${function Gx(){return Ul.gapiScript}()}?onload=${j}`).catch(re=>d(re))}x()}}).catch(c=>{throw Ac=null,c})}(p),Ac}(p),d=Ln().gapi;return X(d,p,"internal-error"),c.open({where:document.body,url:Wo(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iT,dontclear:!0},g=>new Promise(function(){var v=(0,D.A)(function*(w,x){yield g.restyle({setHideOnLeave:!1});const j=Ft(p,"network-request-failed"),re=Ln().setTimeout(()=>{x(j)},jy.get());function we(){Ln().clearTimeout(re),w(g)}g.ping(we).then(we,()=>{x(j)})});return function(w,x){return v.apply(this,arguments)}}()))}),xp.apply(this,arguments)}const sT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bc{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const wd="__/auth/handler",Cd="emulator/auth/handler",Td=encodeURIComponent("fac");function Dc(p,c,d,g,v,w){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,D.A)(function*(p,c,d,g,v,w){X(p.config.authDomain,p,"auth-domain-config-required"),X(p.config.apiKey,p,"invalid-api-key");const x={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:Ne.SDK_VERSION,eventId:v};if(c instanceof tr){c.setDefaultLanguage(p.languageCode),x.providerId=c.providerId||"",(0,ee.Im)(c.getCustomParameters())||(x.customParameters=JSON.stringify(c.getCustomParameters()));for(const[ke,Oe]of Object.entries(w||{}))x[ke]=Oe}if(c instanceof kr){const ke=c.getScopes().filter(Oe=>""!==Oe);ke.length>0&&(x.scopes=ke.join(","))}p.tenantId&&(x.tid=p.tenantId);const j=x;for(const ke of Object.keys(j))void 0===j[ke]&&delete j[ke];const re=yield p._getAppCheckToken(),we=re?`#${Td}=${encodeURIComponent(re)}`:"";return`${function zy({config:p}){return p.emulator?qs(p,Cd):`https://${p.authDomain}/${wd}`}(p)}?${(0,ee.Am)(j).slice(1)}${we}`})).apply(this,arguments)}const Mp="webStorageSupport",Ga=class za{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ln,this._completeRedirectFn=bp,this._overrideRedirectResult=Cp}_openPopup(c,d,g,v){var w=this;return(0,D.A)(function*(){var x;ft(null===(x=w.eventManagers[c._key()])||void 0===x?void 0:x.manager,"_initialize() not called before _openPopup()");const j=yield Dc(c,d,g,En(),v);return function ao(p,c,d,g=500,v=600){const w=Math.max((window.screen.availHeight-v)/2,0).toString(),x=Math.max((window.screen.availWidth-g)/2,0).toString();let j="";const re=Object.assign(Object.assign({},sT),{width:g.toString(),height:v.toString(),top:w,left:x}),we=(0,ee.ZQ)().toLowerCase();d&&(j=Ut(we)?"_blank":d),Jr(we)&&(c=c||"http://localhost",re.scrollbars="yes");const ke=Object.entries(re).reduce((Cn,[Yi,ta])=>`${Cn}${Yi}=${ta},`,"");if(function Ll(p=(0,ee.ZQ)()){var c;return Na(p)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(we)&&"_self"!==j)return function uT(p,c){const d=document.createElement("a");d.href=p,d.target=c;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(c||"",j),new bc(null);const Oe=window.open(c||"",j,ke);X(Oe,p,"popup-blocked");try{Oe.focus()}catch{}return new bc(Oe)}(c,j,$a())})()}_openRedirect(c,d,g,v){var w=this;return(0,D.A)(function*(){return yield w._originValidation(c),function _y(p){Ln().location.href=p}(yield Dc(c,d,g,En(),v)),new Promise(()=>{})})()}_initialize(c){const d=c._key();if(this.eventManagers[d]){const{manager:v,promise:w}=this.eventManagers[d];return v?Promise.resolve(v):(ft(w,"If manager is not set, promise should be"),w)}const g=this.initAndGetManager(c);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(c){var d=this;return(0,D.A)(function*(){const g=yield function wn(p){return xp.apply(this,arguments)}(c),v=new qo(c);return g.register("authEvent",w=>(X(w?.authEvent,c,"invalid-auth-event"),{status:v.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[c._key()]={manager:v},d.iframes[c._key()]=g,v})()}_isIframeWebStorageSupported(c,d){this.iframes[c._key()].send(Mp,{type:Mp},v=>{var w;const x=null===(w=v?.[0])||void 0===w?void 0:w[Mp];void 0!==x&&d(!!x),Nt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Vy(p){return Tc.apply(this,arguments)}(c)),this.originValidationPromises[d]}get _shouldInitProactively(){return kt()||Fo()||Na()}};class Gy{constructor(c){this.factorId=c}_process(c,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(c,d.credential,g);case"signin":return this._finalizeSignIn(c,d.credential);default:return ot("unexpected MultiFactorSessionType")}}}class qy extends Gy{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new qy(c)}_finalizeEnroll(c,d,g){return function sM(p,c){return Y(p,"POST","/v2/accounts/mfaEnrollment:finalize",B(p,c))}(c,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,d){return function UC(p,c){return Y(p,"POST","/v2/accounts/mfaSignIn:finalize",B(p,c))}(c,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Np=(()=>{class p{constructor(){}static assertion(d){return qy._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var cT="@firebase/auth";class Sc{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var d=this;return(0,D.A)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const d=this.auth.onIdTokenChanged(g=>{c(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,d),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const d=this.internalListeners.get(c);d&&(this.internalListeners.delete(c),d(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Dr(){return window}(0,ee.XA)("authIdTokenMaxAge"),function Hx(p){Ul=p}({loadJS:p=>new Promise((c,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=c,g.onerror=v=>{const w=Ft("internal-error");w.customData=v,d(w)},g.type="text/javascript",g.charset="UTF-8",function fT(){var p,c;return null!==(c=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==c?c:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Rc(p){(0,Ne._registerComponent)(new Zt.uA("auth",(c,{options:d})=>{const g=c.getProvider("app").getImmediate(),v=c.getProvider("heartbeat"),w=c.getProvider("app-check-internal"),{apiKey:x,authDomain:j}=g.options;X(x&&!x.includes(":"),"invalid-api-key",{appName:g.name});const re={apiKey:x,authDomain:j,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W_(p)},we=new AC(g,v,w,re);return function SC(p,c){const d=c?.persistence||[],g=(Array.isArray(d)?d:[d]).map(Se);c?.errorMap&&p._updateErrorMap(c.errorMap),p._initializeWithPersistence(g,c?.popupRedirectResolver)}(we,d),we},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,d,g)=>{c.getProvider("auth-internal").initialize()})),(0,Ne._registerComponent)(new Zt.uA("auth-internal",c=>{const d=an(c.getProvider("auth").getImmediate());return new Sc(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)(cT,"1.7.9",function lT(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,Ne.registerVersion)(cT,"1.7.9","esm2017")}("Browser");function Pc(){return Pc=(0,D.A)(function*(p,c,d){var g;const{BuildInfo:v}=Dr();ft(c.sessionId,"AuthEvent did not contain a session ID");const w=yield function Jy(p){return Pd.apply(this,arguments)}(c.sessionId),x={};return Na()?x.ibi=v.packageName:Vo()?x.apn=v.packageName:Nt(p,"operation-not-supported-in-this-environment"),v.displayName&&(x.appDisplayName=v.displayName),x.sessionId=w,Dc(p,d,c.type,void 0,null!==(g=c.eventId)&&void 0!==g?g:void 0,x)}),Pc.apply(this,arguments)}function qa(){return(qa=(0,D.A)(function*(p){const{BuildInfo:c}=Dr(),d={};Na()?d.iosBundleId=c.packageName:Vo()?d.androidPackageName=c.packageName:Nt(p,"operation-not-supported-in-this-environment"),yield Fy(p,d)})).apply(this,arguments)}function Rd(){return(Rd=(0,D.A)(function*(p,c,d){const{cordova:g}=Dr();let v=()=>{};try{yield new Promise((w,x)=>{let j=null;function re(){var Oe;w();const Cn=null===(Oe=g.plugins.browsertab)||void 0===Oe?void 0:Oe.close;"function"==typeof Cn&&Cn(),"function"==typeof d?.close&&d.close()}function we(){j||(j=window.setTimeout(()=>{x(Ft(p,"redirect-cancelled-by-user"))},2e3))}function ke(){"visible"===document?.visibilityState&&we()}c.addPassiveListener(re),document.addEventListener("resume",we,!1),Vo()&&document.addEventListener("visibilitychange",ke,!1),v=()=>{c.removePassiveListener(re),document.removeEventListener("resume",we,!1),document.removeEventListener("visibilitychange",ke,!1),j&&window.clearTimeout(j)}})}finally{v()}})).apply(this,arguments)}function Pd(){return(Pd=(0,D.A)(function*(p){const c=function mT(p){if(ft(/[0-9a-zA-Z]+/.test(p),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(p);const c=new ArrayBuffer(p.length),d=new Uint8Array(c);for(let g=0;g<p.length;g++)d[g]=p.charCodeAt(g);return d}(p),d=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(d)).map(v=>v.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ko extends qo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInitialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInitialized(),this.passiveListeners.forEach(d=>d(c)),super.onEvent(c)}initialized(){var c=this;return(0,D.A)(function*(){yield c.initPromise})()}}function Lp(p){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,D.A)(function*(p){const c=yield Up()._get(rr(p));return c&&(yield Up()._remove(rr(p))),c})).apply(this,arguments)}function Br(){const p=[];for(let d=0;d<20;d++){const g=Math.floor(62*Math.random());p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(g))}return p.join("")}function Up(){return Se(pp)}function rr(p){return ze("authEvent",p.config.apiKey,p.name)}function xc(p){if(!p?.includes("?"))return{};const[c,...d]=p.split("?");return(0,ee.I9)(d.join("?"))}const Ka=class Wa{constructor(){this._redirectPersistence=ln,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bp,this._overrideRedirectResult=Cp}_initialize(c){var d=this;return(0,D.A)(function*(){const g=c._key();let v=d.eventManagers.get(g);return v||(v=new Ko(c),d.eventManagers.set(g,v),d.attachCallbackListeners(c,v)),v})()}_openPopup(c){Nt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,d,g,v){var w=this;return(0,D.A)(function*(){!function Yy(p){var c,d,g,v,w,x,j,re,we,ke;const Oe=Dr();X("function"==typeof(null===(c=Oe?.universalLinks)||void 0===c?void 0:c.subscribe),p,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),X(typeof(null===(d=Oe?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),X("function"==typeof(null===(w=null===(v=null===(g=Oe?.cordova)||void 0===g?void 0:g.plugins)||void 0===v?void 0:v.browsertab)||void 0===w?void 0:w.openUrl),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(re=null===(j=null===(x=Oe?.cordova)||void 0===x?void 0:x.plugins)||void 0===j?void 0:j.browsertab)||void 0===re?void 0:re.isAvailable),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(ke=null===(we=Oe?.cordova)||void 0===we?void 0:we.InAppBrowser)||void 0===ke?void 0:ke.open),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const x=yield w._initialize(c);yield x.initialized(),x.resetRedirect(),function tT(){Ic.clear()}(),yield w._originValidation(c);const j=function _T(p,c,d=null){return{type:c,eventId:d,urlResponse:null,sessionId:Br(),postBody:null,tenantId:p.tenantId,error:Ft(p,"no-auth-event")}}(c,g,v);yield function Xy(p,c){return Up()._set(rr(p),c)}(c,j);const re=yield function Sd(p,c,d){return Pc.apply(this,arguments)}(c,j,d),we=yield function Vp(p){const{cordova:c}=Dr();return new Promise(d=>{c.plugins.browsertab.isAvailable(g=>{let v=null;g?c.plugins.browsertab.openUrl(p):v=c.InAppBrowser.open(p,function de(p=(0,ee.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}()?"_blank":"_system","location=yes"),d(v)})})}(re);return function gT(p,c,d){return Rd.apply(this,arguments)}(c,x,we)})()}_isIframeWebStorageSupported(c,d){throw new Error("Method not implemented.")}_originValidation(c){const d=c._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Qy(p){return qa.apply(this,arguments)}(c)),this.originValidationPromises[d]}attachCallbackListeners(c,d){const{universalLinks:g,handleOpenURL:v,BuildInfo:w}=Dr(),x=setTimeout((0,D.A)(function*(){yield Lp(c),d.onEvent(Yo())}),500),j=function(){var ke=(0,D.A)(function*(Oe){clearTimeout(x);const Cn=yield Lp(c);let Yi=null;Cn&&Oe?.url&&(Yi=function yT(p,c){var d,g;const v=function vT(p){const c=xc(p),d=c.link?decodeURIComponent(c.link):void 0,g=xc(d).link,v=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return xc(v).link||v||g||d||p}(c);if(v.includes("/__/auth/callback")){const w=xc(v),x=w.firebaseError?function Bp(p){try{return JSON.parse(p)}catch{return null}}(decodeURIComponent(w.firebaseError)):null,j=null===(g=null===(d=x?.code)||void 0===d?void 0:d.split("auth/"))||void 0===g?void 0:g[1],re=j?Ft(j):null;return re?{type:p.type,eventId:p.eventId,tenantId:p.tenantId,error:re,urlResponse:null,sessionId:null,postBody:null}:{type:p.type,eventId:p.eventId,tenantId:p.tenantId,sessionId:p.sessionId,urlResponse:v,postBody:null}}return null}(Cn,Oe.url)),d.onEvent(Yi||Yo())});return function(Cn){return ke.apply(this,arguments)}}();typeof g<"u"&&"function"==typeof g.subscribe&&g.subscribe(null,j);const re=v,we=`${w.packageName.toLowerCase()}://`;Dr().handleOpenURL=function(){var ke=(0,D.A)(function*(Oe){if(Oe.toLowerCase().startsWith(we)&&j({url:Oe}),"function"==typeof re)try{re(Oe)}catch(Cn){console.error(Cn)}});return function(Oe){return ke.apply(this,arguments)}}()}};function Yo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ft("no-auth-event")}}function Mc(){var p;return(null===(p=self?.location)||void 0===p?void 0:p.protocol)||null}function ET(p=(0,ee.ZQ)()){return!("file:"!==Mc()&&"ionic:"!==Mc()&&"capacitor:"!==Mc()||!p.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jo(){try{const p=self.localStorage,c=$a();if(p)return p.setItem(c,"1"),p.removeItem(c),!function yM(p=(0,ee.ZQ)()){return function mM(){return(0,ee.lT)()&&11===document?.documentMode}()||function _M(p=(0,ee.ZQ)()){return/Edge\/\d+/.test(p)}(p)}()||(0,ee.zW)()}catch{return $p()&&(0,ee.zW)()}return!1}function $p(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hp(){return(function pM(){return"http:"===Mc()||"https:"===Mc()}()||(0,ee.sr)()||ET())&&!function gM(){return(0,ee.lV)()||(0,ee.Ll)()}()&&Jo()&&!$p()}function zn(){return ET()&&typeof document<"u"}function Xo(){return(Xo=(0,D.A)(function*(){return!!zn()&&new Promise(p=>{const c=setTimeout(()=>{p(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),p(!0)})})})).apply(this,arguments)}const dn={LOCAL:"local",NONE:"none",SESSION:"session"},_s=X,zp="persistence";function Zo(p){return Gp.apply(this,arguments)}function Gp(){return(Gp=(0,D.A)(function*(p){yield p._initializationPromise;const c=ev(),d=ze(zp,p.config.apiKey,p.name);c&&c.setItem(d,p._getPersistence())})).apply(this,arguments)}function ev(){var p;try{return(null===(p=function wT(){return typeof window<"u"?window:null}())||void 0===p?void 0:p.sessionStorage)||null}catch{return null}}const EM=X;class Gn{constructor(){this.browserResolver=Se(Ga),this.cordovaResolver=Se(Ka),this.underlyingResolver=null,this._redirectPersistence=ln,this._completeRedirectFn=bp,this._overrideRedirectResult=Cp}_initialize(c){var d=this;return(0,D.A)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,d,g,v){var w=this;return(0,D.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openPopup(c,d,g,v)})()}_openRedirect(c,d,g,v){var w=this;return(0,D.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openRedirect(c,d,g,v)})()}_isIframeWebStorageSupported(c,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,d)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return zn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return EM(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,D.A)(function*(){if(c.underlyingResolver)return;const d=yield function IT(){return Xo.apply(this,arguments)}();c.underlyingResolver=d?c.cordovaResolver:c.browserResolver})()}}function Od(p){return p.unwrap()}function IM(p){return nv(p)}function nv(p){const{_tokenResponse:c}=p instanceof ee.g?p.customData:p;if(!c)return null;if(!(p instanceof ee.g)&&"temporaryProof"in c&&"phoneNumber"in c)return Ec.credentialFromResult(p);const d=c.providerId;if(!d||d===it.PASSWORD)return null;let g;switch(d){case it.GOOGLE:g=Kl;break;case it.FACEBOOK:g=ac;break;case it.GITHUB:g=Ql;break;case it.TWITTER:g=Zf;break;default:const{oauthIdToken:v,oauthAccessToken:w,oauthTokenSecret:x,pendingToken:j,nonce:re}=c;return w||x||v||j?j?d.startsWith("saml.")?Zr._create(d,j):qi._fromParams({providerId:d,signInMethod:d,pendingToken:j,idToken:v,accessToken:w}):new pt(d).credential({idToken:v,accessToken:w,rawNonce:re}):null}return p instanceof ee.g?g.credentialFromError(p):g.credentialFromResult(p)}function ni(p,c){return c.catch(d=>{throw d instanceof ee.g&&function tv(p,c){var d;const g=null===(d=c.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new CT(p,function rM(p,c){var d;const g=(0,ee.Ku)(p),v=c;return X(c.customData.operationType,g,"argument-error"),X(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),fy._fromError(g,v)}(p,c));else if(g){const v=nv(c),w=c;v&&(w.credential=v,w.tenantId=g.tenantId||void 0,w.email=g.email||void 0,w.phoneNumber=g.phoneNumber||void 0)}}(p,d),d}).then(d=>{const v=d.user;return{operationType:d.operationType,credential:IM(d),additionalUserInfo:Vr(d),user:Ms.getOrCreate(v)}})}function qp(p,c){return Wp.apply(this,arguments)}function Wp(){return(Wp=(0,D.A)(function*(p,c){const d=yield c;return{verificationId:d.verificationId,confirm:g=>ni(p,d.confirm(g))}})).apply(this,arguments)}class CT{constructor(c,d){this.resolver=d,this.auth=function Ya(p){return p.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return ni(Od(this.auth),this.resolver.resolveSignIn(c))}}class Ms{constructor(c){this._delegate=c,this.multiFactor=function gy(p){const c=(0,ee.Ku)(p);return ud.has(c)||ud.set(c,py._fromUser(c)),ud.get(c)}(c)}static getOrCreate(c){return Ms.USER_MAP.has(c)||Ms.USER_MAP.set(c,new Ms(c)),Ms.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var d=this;return(0,D.A)(function*(){return ni(d.auth,ei(d._delegate,c))})()}linkWithPhoneNumber(c,d){var g=this;return(0,D.A)(function*(){return qp(g.auth,function KC(p,c,d){return Vi.apply(this,arguments)}(g._delegate,c,d))})()}linkWithPopup(c){var d=this;return(0,D.A)(function*(){return ni(d.auth,function XC(p,c,d){return qe.apply(this,arguments)}(d._delegate,c,Gn))})()}linkWithRedirect(c){var d=this;return(0,D.A)(function*(){return yield Zo(an(d.auth)),wc(d._delegate,c,Gn)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var d=this;return(0,D.A)(function*(){return ni(d.auth,ay(d._delegate,c))})()}reauthenticateWithPhoneNumber(c,d){return qp(this.auth,function Sy(p,c,d){return fd.apply(this,arguments)}(this._delegate,c,d))}reauthenticateWithPopup(c){return ni(this.auth,function Py(p,c,d){return md.apply(this,arguments)}(this._delegate,c,Gn))}reauthenticateWithRedirect(c){var d=this;return(0,D.A)(function*(){return yield Zo(an(d.auth)),Lr(d._delegate,c,Gn)})()}sendEmailVerification(c){return function Ua(p,c){return Oi.apply(this,arguments)}(this._delegate,c)}unlink(c){var d=this;return(0,D.A)(function*(){return yield function MC(p,c){return yi.apply(this,arguments)}(d._delegate,c),d})()}updateEmail(c){return function gt(p,c){const d=(0,ee.Ku)(p);return(0,Ne._isFirebaseServerApp)(d.auth.app)?Promise.reject($e(d.auth)):od(d,c,null)}(this._delegate,c)}updatePassword(c){return function Xx(p,c){return od((0,ee.Ku)(p),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function pd(p,c){return Ar.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function hc(p,c){return jo.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,d){return function dc(p,c,d){return sd.apply(this,arguments)}(this._delegate,c,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ms.USER_MAP=new WeakMap;const ea=X;let Nc=(()=>{class p{constructor(d,g){if(this.app=d,g.isInitialized())return this._delegate=g.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:v}=d.options;ea(v,"invalid-api-key",{appName:d.name}),ea(v,"invalid-api-key",{appName:d.name});const w=typeof window<"u"?Gn:void 0;this._delegate=g.initialize({options:{persistence:Oc(v,d.name),popupRedirectResolver:w}}),this._delegate._updateErrorMap(Jn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ms.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,g){!function Hf(p,c,d){const g=an(p);X(g._canInitEmulator,g,"emulator-config-failed"),X(/^https?:\/\//.test(c),g,"invalid-emulator-scheme");const v=!!d?.disableWarnings,w=J_(c),{host:x,port:j}=function $l(p){const c=J_(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(c.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const w=v[1];return{host:w,port:tc(g.substr(w.length+1))}}{const[w,x]=g.split(":");return{host:w,port:tc(x)}}}(c);g.config.emulator={url:`${w}//${x}${null===j?"":`:${j}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:x,port:j,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function zf(){function p(){const c=document.createElement("p"),d=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}(this._delegate,d,g)}applyActionCode(d){return function NC(p,c){return un.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return xe(this._delegate,d)}confirmPasswordReset(d,g){return function id(p,c,d){return lp.apply(this,arguments)}(this._delegate,d,g)}createUserWithEmailAndPassword(d,g){var v=this;return(0,D.A)(function*(){return ni(v._delegate,function lc(p,c,d){return hr.apply(this,arguments)}(v._delegate,d,g))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function Vn(p,c){return Bo.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function La(p,c){const d=oc.parseLink(c);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,D.A)(function*(){ea(Hp(),d._delegate,"operation-not-supported-in-this-environment");const g=yield function Tp(p,c){return Ap.apply(this,arguments)}(d._delegate,Gn);return g?ni(d._delegate,Promise.resolve(g)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function Zy(p,c){an(p)._logFramework(c)}(this._delegate,d)}onAuthStateChanged(d,g,v){const{next:w,error:x,complete:j}=rv(d,g,v);return this._delegate.onAuthStateChanged(w,x,j)}onIdTokenChanged(d,g,v){const{next:w,error:x,complete:j}=rv(d,g,v);return this._delegate.onIdTokenChanged(w,x,j)}sendSignInLinkToEmail(d,g){return function Fn(p,c,d){return hs.apply(this,arguments)}(this._delegate,d,g)}sendPasswordResetEmail(d,g){return function cy(p,c,d){return rd.apply(this,arguments)}(this._delegate,d,g||void 0)}setPersistence(d){var g=this;return(0,D.A)(function*(){let v;switch(function Nd(p,c){_s(Object.values(dn).includes(c),p,"invalid-persistence-type"),(0,ee.lV)()?_s(c!==dn.SESSION,p,"unsupported-persistence-type"):(0,ee.Ll)()?_s(c===dn.NONE,p,"unsupported-persistence-type"):$p()?_s(c===dn.NONE||c===dn.LOCAL&&(0,ee.zW)(),p,"unsupported-persistence-type"):_s(c===dn.NONE||Jo(),p,"unsupported-persistence-type")}(g._delegate,d),d){case dn.SESSION:v=ln;break;case dn.LOCAL:v=(yield Se(_c)._isAvailable())?_c:pp;break;case dn.NONE:v=Hn;break;default:return Nt("argument-error",{appName:g._delegate.name})}return g._delegate.setPersistence(v)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return ni(this._delegate,function iy(p){return Xl.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return ni(this._delegate,nd(this._delegate,d))}signInWithCustomToken(d){return ni(this._delegate,function uy(p,c){return Je.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,g){return ni(this._delegate,function Va(p,c,d){return(0,Ne._isFirebaseServerApp)(p.app)?Promise.reject($e(p)):nd((0,ee.Ku)(p),ka.credential(c,d)).catch(function(){var g=(0,D.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&to(p),v});return function(v){return g.apply(this,arguments)}}())}(this._delegate,d,g))}signInWithEmailLink(d,g){return ni(this._delegate,function nt(p,c,d){return Uo.apply(this,arguments)}(this._delegate,d,g))}signInWithPhoneNumber(d,g){return qp(this._delegate,function WC(p,c,d){return yc.apply(this,arguments)}(this._delegate,d,g))}signInWithPopup(d){var g=this;return(0,D.A)(function*(){return ea(Hp(),g._delegate,"operation-not-supported-in-this-environment"),ni(g._delegate,function JC(p,c,d){return gd.apply(this,arguments)}(g._delegate,d,Gn))})()}signInWithRedirect(d){var g=this;return(0,D.A)(function*(){return ea(Hp(),g._delegate,"operation-not-supported-in-this-environment"),yield Zo(g._delegate),ae(g._delegate,d,Gn)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function cn(p,c){return Ei.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return p.Persistence=dn,p})();function rv(p,c,d){let g=p;"function"!=typeof p&&({next:g,error:c,complete:d}=p);const v=g;return{next:x=>v(x&&Ms.getOrCreate(x)),error:c,complete:d}}function Oc(p,c){const d=function vM(p,c){const d=ev();if(!d)return[];const g=ze(zp,p,c);switch(d.getItem(g)){case dn.NONE:return[Hn];case dn.LOCAL:return[_c,ln];case dn.SESSION:return[ln];default:return[]}}(p,c);if(typeof self<"u"&&!d.includes(_c)&&d.push(_c),typeof window<"u")for(const g of[pp,ln])d.includes(g)||d.push(g);return d.includes(Hn)||d.push(Hn),d}class Kp{constructor(){this.providerId="phone",this._delegate=new Ec(Od(He.A.auth()))}static credential(c,d){return Ec.credential(c,d)}verifyPhoneNumber(c,d){return this._delegate.verifyPhoneNumber(c,d)}unwrap(){return this._delegate}}Kp.PHONE_SIGN_IN_METHOD=Ec.PHONE_SIGN_IN_METHOD,Kp.PROVIDER_ID=Ec.PROVIDER_ID;const kd=X;class TT{constructor(c,d,g=He.A.app()){var v;kd(null===(v=g.options)||void 0===v?void 0:v.apiKey,"invalid-api-key",{appName:g.name}),this._delegate=new qC(g.auth(),c,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Qp(p){p.INTERNAL.registerComponent(new Zt.uA("auth-compat",c=>{const d=c.getProvider("app-compat").getImmediate(),g=c.getProvider("auth");return new Nc(d,g)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ka,FacebookAuthProvider:ac,GithubAuthProvider:Ql,GoogleAuthProvider:Kl,OAuthProvider:pt,SAMLAuthProvider:cc,PhoneAuthProvider:Kp,PhoneMultiFactorGenerator:Np,RecaptchaVerifier:TT,TwitterAuthProvider:Zf,Auth:Nc,AuthCredential:Lo,Error:ee.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),p.registerVersion("@firebase/auth-compat","0.5.14")}(He.A)},749:(ls,ar,Ze)=>{Ze.d(ar,{P2:()=>Xn});var D=Ze(467);const He=(me,De)=>De.some(X=>me instanceof X);let Ne,ee;const Zt=new WeakMap,en=new WeakMap,it=new WeakMap,ie=new WeakMap,pe=new WeakMap;let wt={get(me,De,X){if(me instanceof IDBTransaction){if("done"===De)return en.get(me);if("objectStoreNames"===De)return me.objectStoreNames||it.get(me);if("store"===De)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return Ke(me[De])},set:(me,De,X)=>(me[De]=X,!0),has:(me,De)=>me instanceof IDBTransaction&&("done"===De||"store"===De)||De in me};function We(me){return"function"==typeof me?function Tt(me){return me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function on(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(me)?function(...De){return me.apply(kn(this),De),Ke(Zt.get(this))}:function(...De){return Ke(me.apply(kn(this),De))}:function(De,...X){const ot=me.call(kn(this),De,...X);return it.set(ot,De.sort?De.sort():[De]),Ke(ot)}}(me):(me instanceof IDBTransaction&&function ht(me){if(en.has(me))return;const De=new Promise((X,ot)=>{const ft=()=>{me.removeEventListener("complete",En),me.removeEventListener("error",Jt),me.removeEventListener("abort",Jt)},En=()=>{X(),ft()},Jt=()=>{ot(me.error||new DOMException("AbortError","AbortError")),ft()};me.addEventListener("complete",En),me.addEventListener("error",Jt),me.addEventListener("abort",Jt)});en.set(me,De)}(me),He(me,function Ct(){return Ne||(Ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(me,wt):me)}function Ke(me){if(me instanceof IDBRequest)return function Ve(me){const De=new Promise((X,ot)=>{const ft=()=>{me.removeEventListener("success",En),me.removeEventListener("error",Jt)},En=()=>{X(Ke(me.result)),ft()},Jt=()=>{ot(me.error),ft()};me.addEventListener("success",En),me.addEventListener("error",Jt)});return De.then(X=>{X instanceof IDBCursor&&Zt.set(X,me)}).catch(()=>{}),pe.set(De,me),De}(me);if(ie.has(me))return ie.get(me);const De=We(me);return De!==me&&(ie.set(me,De),pe.set(De,me)),De}const kn=me=>pe.get(me);function Xn(me,De,{blocked:X,upgrade:ot,blocking:ft,terminated:En}={}){const Jt=indexedDB.open(me,De),yt=Ke(Jt);return ot&&Jt.addEventListener("upgradeneeded",In=>{ot(Ke(Jt.result),In.oldVersion,In.newVersion,Ke(Jt.transaction),In)}),X&&Jt.addEventListener("blocked",In=>X(In.oldVersion,In.newVersion,In)),yt.then(In=>{En&&In.addEventListener("close",()=>En()),ft&&In.addEventListener("versionchange",gi=>ft(gi.oldVersion,gi.newVersion,gi))}).catch(()=>{}),yt}const Nt=["get","getKey","getAll","getAllKeys","count"],Ft=["put","add","delete","clear"],Bn=new Map;function $e(me,De){if(!(me instanceof IDBDatabase)||De in me||"string"!=typeof De)return;if(Bn.get(De))return Bn.get(De);const X=De.replace(/FromIndex$/,""),ot=De!==X,ft=Ft.includes(X);if(!(X in(ot?IDBIndex:IDBObjectStore).prototype)||!ft&&!Nt.includes(X))return;const En=function(){var Jt=(0,D.A)(function*(yt,...In){const gi=this.transaction(yt,ft?"readwrite":"readonly");let Wr=gi.store;return ot&&(Wr=Wr.index(In.shift())),(yield Promise.all([Wr[X](...In),ft&&gi.done]))[0]});return function(In){return Jt.apply(this,arguments)}}();return Bn.set(De,En),En}!function Jn(me){wt=me(wt)}(me=>({...me,get:(De,X,ot)=>$e(De,X)||me.get(De,X,ot),has:(De,X)=>!!$e(De,X)||me.has(De,X)}))},467:(ls,ar,Ze)=>{function D(Ne,ee,Ct,on,Zt,en,it){try{var ie=Ne[en](it),pe=ie.value}catch(Ve){return void Ct(Ve)}ie.done?ee(pe):Promise.resolve(pe).then(on,Zt)}function He(Ne){return function(){var ee=this,Ct=arguments;return new Promise(function(on,Zt){var en=Ne.apply(ee,Ct);function it(pe){D(en,on,Zt,it,ie,"next",pe)}function ie(pe){D(en,on,Zt,it,ie,"throw",pe)}it(void 0)})}}Ze.d(ar,{A:()=>He})},635:(ls,ar,Ze)=>{function ee(z,Z){var te={};for(var B in z)Object.prototype.hasOwnProperty.call(z,B)&&Z.indexOf(B)<0&&(te[B]=z[B]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var Y=0;for(B=Object.getOwnPropertySymbols(z);Y<B.length;Y++)Z.indexOf(B[Y])<0&&Object.prototype.propertyIsEnumerable.call(z,B[Y])&&(te[B[Y]]=z[B[Y]])}return te}function Ve(z,Z,te,B){return new(te||(te=Promise))(function(he,le){function st(St){try{Ge(B.next(St))}catch(Sn){le(Sn)}}function xt(St){try{Ge(B.throw(St))}catch(Sn){le(Sn)}}function Ge(St){St.done?he(St.value):function Y(he){return he instanceof te?he:new te(function(le){le(he)})}(St.value).then(st,xt)}Ge((B=B.apply(z,Z||[])).next())})}function ur(z){return this instanceof ur?(this.v=z,this):new ur(z)}function Nt(z,Z,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y,B=te.apply(z,Z||[]),he=[];return Y=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),st("next"),st("throw"),st("return",function le(Rt){return function(Ot){return Promise.resolve(Ot).then(Rt,Sn)}}),Y[Symbol.asyncIterator]=function(){return this},Y;function st(Rt,Ot){B[Rt]&&(Y[Rt]=function(jn){return new Promise(function(Cr,Kr){he.push([Rt,jn,Cr,Kr])>1||xt(Rt,jn)})},Ot&&(Y[Rt]=Ot(Y[Rt])))}function xt(Rt,Ot){try{!function Ge(Rt){Rt.value instanceof ur?Promise.resolve(Rt.value.v).then(St,Sn):zi(he[0][2],Rt)}(B[Rt](Ot))}catch(jn){zi(he[0][3],jn)}}function St(Rt){xt("next",Rt)}function Sn(Rt){xt("throw",Rt)}function zi(Rt,Ot){Rt(Ot),he.shift(),he.length&&xt(he[0][0],he[0][1])}}function Bn(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,Z=z[Symbol.asyncIterator];return Z?Z.call(z):(z=function Tt(z){var Z="function"==typeof Symbol&&Symbol.iterator,te=Z&&z[Z],B=0;if(te)return te.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&B>=z.length&&(z=void 0),{value:z&&z[B++],done:!z}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),te={},B("next"),B("throw"),B("return"),te[Symbol.asyncIterator]=function(){return this},te);function B(he){te[he]=z[he]&&function(le){return new Promise(function(st,xt){!function Y(he,le,st,xt){Promise.resolve(xt).then(function(Ge){he({value:Ge,done:st})},le)}(st,xt,(le=z[he](le)).done,le.value)})}}}Ze.d(ar,{AQ:()=>Nt,N3:()=>ur,Tt:()=>ee,sH:()=>Ve,xN:()=>Bn}),"function"==typeof SuppressedError&&SuppressedError}},ls=>{ls(ls.s=813)}]);
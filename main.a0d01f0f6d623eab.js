"use strict";(self.webpackChunkwedding_app=self.webpackChunkwedding_app||[]).push([[792],{401:(ns,rr,nt)=>{nt.d(rr,{Am:()=>Qs,Bd:()=>le,FA:()=>ht,Fy:()=>fr,I9:()=>Ui,Im:()=>Go,Ku:()=>rs,Ll:()=>$t,T9:()=>Qt,Uj:()=>dt,XA:()=>bt,ZQ:()=>$e,bD:()=>Ks,c1:()=>qt,cY:()=>Vt,eX:()=>se,g:()=>fe,gR:()=>Gr,hp:()=>Ys,jZ:()=>In,lT:()=>_s,lV:()=>ci,mS:()=>At,nr:()=>Z,p7:()=>Yt,sr:()=>Cr,tD:()=>bn,u:()=>oe,zW:()=>te,zw:()=>Ne});const ee=function(S){const P=[];let k=0;for(let B=0;B<S.length;B++){let q=S.charCodeAt(B);q<128?P[k++]=q:q<2048?(P[k++]=q>>6|192,P[k++]=63&q|128):55296==(64512&q)&&B+1<S.length&&56320==(64512&S.charCodeAt(B+1))?(q=65536+((1023&q)<<10)+(1023&S.charCodeAt(++B)),P[k++]=q>>18|240,P[k++]=q>>12&63|128,P[k++]=q>>6&63|128,P[k++]=63&q|128):(P[k++]=q>>12|224,P[k++]=q>>6&63|128,P[k++]=63&q|128)}return P},on={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(S,P){if(!Array.isArray(S))throw Error("encodeByteArray takes an array as a parameter");this.init_();const k=P?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let q=0;q<S.length;q+=3){const Se=S[q],Ce=q+1<S.length,Ht=Ce?S[q+1]:0,Sn=q+2<S.length,Be=Sn?S[q+2]:0;let Zn=(15&Ht)<<2|Be>>6,is=63&Be;Sn||(is=64,Ce||(Zn=64)),B.push(k[Se>>2],k[(3&Se)<<4|Ht>>4],k[Zn],k[is])}return B.join("")},encodeString(S,P){return this.HAS_NATIVE_SUPPORT&&!P?btoa(S):this.encodeByteArray(ee(S),P)},decodeString(S,P){return this.HAS_NATIVE_SUPPORT&&!P?atob(S):function(S){const P=[];let k=0,B=0;for(;k<S.length;){const q=S[k++];if(q<128)P[B++]=String.fromCharCode(q);else if(q>191&&q<224){const Se=S[k++];P[B++]=String.fromCharCode((31&q)<<6|63&Se)}else if(q>239&&q<365){const Sn=((7&q)<<18|(63&S[k++])<<12|(63&S[k++])<<6|63&S[k++])-65536;P[B++]=String.fromCharCode(55296+(Sn>>10)),P[B++]=String.fromCharCode(56320+(1023&Sn))}else{const Se=S[k++],Ce=S[k++];P[B++]=String.fromCharCode((15&q)<<12|(63&Se)<<6|63&Ce)}}return P.join("")}(this.decodeStringToByteArray(S,P))},decodeStringToByteArray(S,P){this.init_();const k=P?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let q=0;q<S.length;){const Se=k[S.charAt(q++)],Ht=q<S.length?k[S.charAt(q)]:0;++q;const Be=q<S.length?k[S.charAt(q)]:64;++q;const je=q<S.length?k[S.charAt(q)]:64;if(++q,null==Se||null==Ht||null==Be||null==je)throw new pn;B.push(Se<<2|Ht>>4),64!==Be&&(B.push(Ht<<4&240|Be>>2),64!==je&&B.push(Be<<6&192|je))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let S=0;S<this.ENCODED_VALS.length;S++)this.byteToCharMap_[S]=this.ENCODED_VALS.charAt(S),this.charToByteMap_[this.byteToCharMap_[S]]=S,this.byteToCharMapWebSafe_[S]=this.ENCODED_VALS_WEBSAFE.charAt(S),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[S]]=S,S>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(S)]=S,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(S)]=S)}}};class pn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dt=function(S){return function(S){const P=ee(S);return on.encodeByteArray(P,!0)}(S).replace(/\./g,"")},oe=function(S){try{return on.decodeString(S,!0)}catch(P){console.error("base64Decode failed: ",P)}return null};function Ne(S,P){if(!(P instanceof Object))return P;switch(P.constructor){case Date:return new Date(P.getTime());case Object:void 0===S&&(S={});break;case Array:S=[];break;default:return P}for(const k in P)!P.hasOwnProperty(k)||!ct(k)||(S[k]=Ne(S[k],P[k]));return S}function ct(S){return"__proto__"!==S}function At(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const it=()=>{try{return At().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const S=process.env.__FIREBASE_DEFAULTS__;return S?JSON.parse(S):void 0})()||(()=>{if(typeof document>"u")return;let S;try{S=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const P=S&&oe(S[1]);return P&&JSON.parse(P)})()}catch(S){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${S}`)}},Qt=()=>{var S;return null===(S=it())||void 0===S?void 0:S.config},bt=S=>{var P;return null===(P=it())||void 0===P?void 0:P[`_${S}`]};class Vt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((P,k)=>{this.resolve=P,this.reject=k})}wrapCallback(P){return(k,B)=>{k?this.reject(k):this.resolve(B),"function"==typeof P&&(this.promise.catch(()=>{}),1===P.length?P(k):P(k,B))}}}function fr(S,P){if(S.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=P||"demo-project",q=S.iat||0,Se=S.sub||S.user_id;if(!Se)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ce=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:q,exp:q+3600,auth_time:q,sub:Se,user_id:Se,firebase:{sign_in_provider:"custom",identities:{}}},S);return[dt(JSON.stringify({alg:"none",type:"JWT"})),dt(JSON.stringify(Ce)),""].join(".")}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function In(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function $t(){var S;const P=null===(S=it())||void 0===S?void 0:S.forceEnvironment;if("node"===P)return!0;if("browser"===P)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function le(){return typeof window<"u"||Yt()}function Yt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function qt(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Cr(){const S="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof S&&void 0!==S.id}function ci(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _s(){const S=$e();return S.indexOf("MSIE ")>=0||S.indexOf("Trident/")>=0}function Z(){return!$t()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function te(){try{return"object"==typeof indexedDB}catch{return!1}}function se(){return new Promise((S,P)=>{try{let k=!0;const B="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(B);q.onsuccess=()=>{q.result.close(),k||self.indexedDB.deleteDatabase(B),S(!0)},q.onupgradeneeded=()=>{k=!1},q.onerror=()=>{var Se;P((null===(Se=q.error)||void 0===Se?void 0:Se.message)||"")}}catch(k){P(k)}})}class fe extends Error{constructor(P,k,B){super(k),this.code=P,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ht.prototype.create)}}class ht{constructor(P,k,B){this.service=P,this.serviceName=k,this.errors=B}create(P,...k){const B=k[0]||{},q=`${this.service}/${P}`,Se=this.errors[P],Ce=Se?function Oe(S,P){return S.replace(Ue,(k,B)=>{const q=P[B];return null!=q?String(q):`<${B}?>`})}(Se,B):"Error";return new fe(q,`${this.serviceName}: ${Ce} (${q}).`,B)}}const Ue=/\{\$([^}]+)}/g;function Gr(S,P){return Object.prototype.hasOwnProperty.call(S,P)}function Go(S){for(const P in S)if(Object.prototype.hasOwnProperty.call(S,P))return!1;return!0}function Ks(S,P){if(S===P)return!0;const k=Object.keys(S),B=Object.keys(P);for(const q of k){if(!B.includes(q))return!1;const Se=S[q],Ce=P[q];if(ys(Se)&&ys(Ce)){if(!Ks(Se,Ce))return!1}else if(Se!==Ce)return!1}for(const q of B)if(!k.includes(q))return!1;return!0}function ys(S){return null!==S&&"object"==typeof S}function Qs(S){const P=[];for(const[k,B]of Object.entries(S))Array.isArray(B)?B.forEach(q=>{P.push(encodeURIComponent(k)+"="+encodeURIComponent(q))}):P.push(encodeURIComponent(k)+"="+encodeURIComponent(B));return P.length?"&"+P.join("&"):""}function Ui(S){const P={};return S.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[q,Se]=B.split("=");P[decodeURIComponent(q)]=decodeURIComponent(Se)}}),P}function Ys(S){const P=S.indexOf("?");if(!P)return"";const k=S.indexOf("#",P);return S.substring(P,k>0?k:void 0)}function bn(S,P){const k=new Sr(S,P);return k.subscribe.bind(k)}class Sr{constructor(P,k){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=k,this.task.then(()=>{P(this)}).catch(B=>{this.error(B)})}next(P){this.forEachObserver(k=>{k.next(P)})}error(P){this.forEachObserver(k=>{k.error(P)}),this.close(P)}complete(){this.forEachObserver(P=>{P.complete()}),this.close()}subscribe(P,k,B){let q;if(void 0===P&&void 0===k&&void 0===B)throw new Error("Missing Observer.");q=function Bi(S,P){if("object"!=typeof S||null===S)return!1;for(const k of P)if(k in S&&"function"==typeof S[k])return!0;return!1}(P,["next","error","complete"])?P:{next:P,error:k,complete:B},void 0===q.next&&(q.next=wn),void 0===q.error&&(q.error=wn),void 0===q.complete&&(q.complete=wn);const Se=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),Se}unsubscribeOne(P){void 0===this.observers||void 0===this.observers[P]||(delete this.observers[P],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(P){if(!this.finalized)for(let k=0;k<this.observers.length;k++)this.sendOne(k,P)}sendOne(P,k){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[P])try{k(this.observers[P])}catch(B){typeof console<"u"&&console.error&&console.error(B)}})}close(P){this.finalized||(this.finalized=!0,void 0!==P&&(this.finalError=P),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wn(){}function rs(S){return S&&S._delegate?S._delegate:S}},618:(ns,rr,nt)=>{function C(n){return"function"==typeof n}function qe(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Pe=qe(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ee(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Tt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(C(r))try{r()}catch(s){e=s instanceof Pe?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Wn(s)}catch(o){e=e??[],o instanceof Pe?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Pe(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Wn(e);else{if(e instanceof Tt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ee(t,e)}remove(e){const{_finalizers:t}=this;t&&ee(t,e),e instanceof Tt&&e._removeParent(this)}}Tt.EMPTY=(()=>{const n=new Tt;return n.closed=!0,n})();const on=Tt.EMPTY;function pn(n){return n instanceof Tt||n&&"closed"in n&&C(n.remove)&&C(n.add)&&C(n.unsubscribe)}function Wn(n){C(n)?n():n.unsubscribe()}const dt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},oe={setTimeout(n,e,...t){const{delegate:r}=oe;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=oe;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ge(n){oe.setTimeout(()=>{const{onUnhandledError:e}=dt;if(!e)throw n;e(n)})}function Ne(){}const ct=Ct("C",void 0,void 0);function Ct(n,e,t){return{kind:n,value:e,error:t}}let Ge=null;function it(n){if(dt.useDeprecatedSynchronousErrorHandling){const e=!Ge;if(e&&(Ge={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Ge;if(Ge=null,t)throw r}}else n()}class Yn extends Tt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,pn(e)&&e.add(this)):this.destination=le}static create(e,t,r){return new fr(e,t,r)}next(e){this.isStopped?$t(function Kn(n){return Ct("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?$t(function At(n){return Ct("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?$t(ct,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qt=Function.prototype.bind;function bt(n,e){return Qt.call(n,e)}class Vt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){$e(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){$e(r)}else $e(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){$e(t)}}}class fr extends Yn{constructor(e,t,r){let i;if(super(),C(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&dt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bt(e.next,s),error:e.error&&bt(e.error,s),complete:e.complete&&bt(e.complete,s)}):i=e}this.destination=new Vt(i)}}function $e(n){dt.useDeprecatedSynchronousErrorHandling?function Qn(n){dt.useDeprecatedSynchronousErrorHandling&&Ge&&(Ge.errorThrown=!0,Ge.error=n)}(n):ge(n)}function $t(n,e){const{onStoppedNotification:t}=dt;t&&oe.setTimeout(()=>t(n,e))}const le={closed:!0,next:Ne,error:function In(n){throw n},complete:Ne},Yt="function"==typeof Symbol&&Symbol.observable||"@@observable";function qt(n){return n}function ci(n){return 0===n.length?qt:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let lt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Y(n){return n&&n instanceof Yn||function tu(n){return n&&C(n.next)&&C(n.error)&&C(n.complete)}(n)&&pn(n)}(t)?t:new fr(t,r,i);return it(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=_s(r))((i,s)=>{const o=new fr({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Yt](){return this}pipe(...t){return ci(t)(this)}toPromise(t){return new(t=_s(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function _s(n){var e;return null!==(e=n??dt.Promise)&&void 0!==e?e:Promise}const Z=qe(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let te=(()=>{class n extends lt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new se(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Z}next(t){it(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){it(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){it(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?on:(this.currentObservers=null,s.push(t),new Tt(()=>{this.currentObservers=null,ee(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new lt;return t.source=this,t}}return n.create=(e,t)=>new se(e,t),n})();class se extends te{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:on}}function Ie(n){return C(n?.lift)}function ne(n){return e=>{if(Ie(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(n,e,t,r,i){return new ht(n,e,t,r,i)}class ht extends Yn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Oe(n,e){return ne((t,r)=>{let i=0;t.subscribe(fe(r,s=>{r.next(n.call(e,s,i++))}))})}var Ue=nt(635);const ft=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Jt(n){return C(n?.then)}function Rt(n){return C(n[Yt])}function ir(n){return Symbol.asyncIterator&&C(n?.[Symbol.asyncIterator])}function Dr(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const br=function Jn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Gr(n){return C(n?.[br])}function qo(n){return(0,Ue.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Ue.N3)(t.read());if(i)return yield(0,Ue.N3)(void 0);yield yield(0,Ue.N3)(r)}}finally{t.releaseLock()}})}function Go(n){return C(n?.getReader)}function jn(n){if(n instanceof lt)return n;if(null!=n){if(Rt(n))return function Ks(n){return new lt(e=>{const t=n[Yt]();if(C(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(ft(n))return function ys(n){return new lt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Jt(n))return function Ac(n){return new lt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ge)})}(n);if(ir(n))return Ui(n);if(Gr(n))return function Qs(n){return new lt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Go(n))return function Ys(n){return Ui(qo(n))}(n)}throw Dr(n)}function Ui(n){return new lt(e=>{(function li(n,e){var t,r,i,s;return(0,Ue.sH)(this,void 0,void 0,function*(){try{for(t=(0,Ue.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function bn(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function En(n,e,t=1/0){return C(e)?En((r,i)=>Oe((s,o)=>e(r,s,i,o))(jn(n(r,i))),t):("number"==typeof e&&(t=e),ne((r,i)=>function Sr(n,e,t,r,i,s,o,a){const u=[];let d=0,g=0,m=!1;const v=()=>{m&&!u.length&&!d&&e.complete()},w=D=>d<r?T(D):u.push(D),T=D=>{s&&e.next(D),d++;let M=!1;jn(t(D,g++)).subscribe(fe(e,z=>{i?.(z),s?w(z):e.next(z)},()=>{M=!0},void 0,()=>{if(M)try{for(d--;u.length&&d<r;){const z=u.shift();o?bn(e,o,()=>T(z)):T(z)}v()}catch(z){e.error(z)}}))};return n.subscribe(fe(e,w,()=>{m=!0,v()})),()=>{a?.()}}(r,i,n,t)))}function Bi(n=1/0){return En(qt,n)}const wn=new lt(n=>n.complete());function Rr(n){return n[n.length-1]}function Js(n){return C(Rr(n))?n.pop():void 0}function vs(n){return function Ko(n){return n&&C(n.schedule)}(Rr(n))?n.pop():void 0}function Wr(n,e=0){return ne((t,r)=>{t.subscribe(fe(r,i=>bn(r,n,()=>r.next(i),e),()=>bn(r,n,()=>r.complete(),e),i=>bn(r,n,()=>r.error(i),e)))})}function Pr(n,e=0){return ne((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Yo(n,e){if(!n)throw new Error("Iterable cannot be null");return new lt(t=>{bn(t,e,()=>{const r=n[Symbol.asyncIterator]();bn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function S(n,e){return e?function rs(n,e){if(null!=n){if(Rt(n))return function Zs(n,e){return jn(n).pipe(Pr(e),Wr(e))}(n,e);if(ft(n))return function Xs(n,e){return new lt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Jt(n))return function Qo(n,e){return jn(n).pipe(Pr(e),Wr(e))}(n,e);if(ir(n))return Yo(n,e);if(Gr(n))return function Tc(n,e){return new lt(t=>{let r;return bn(t,e,()=>{r=n[br](),bn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>C(r?.return)&&r.return()})}(n,e);if(Go(n))return function Jo(n,e){return Yo(qo(n),e)}(n,e)}throw Dr(n)}(n,e):jn(n)}function P(...n){const e=vs(n),t=function pr(n,e){return"number"==typeof Rr(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?jn(r[0]):Bi(t)(S(r,e)):wn}class k extends te{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function B(...n){return S(n,vs(n))}function q(n={}){const{connector:e=(()=>new te),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,d=0,g=!1,m=!1;const v=()=>{a?.unsubscribe(),a=void 0},w=()=>{v(),o=u=void 0,g=m=!1},T=()=>{const D=o;w(),D?.unsubscribe()};return ne((D,M)=>{d++,!m&&!g&&v();const z=u=u??e();M.add(()=>{d--,0===d&&!m&&!g&&(a=Se(T,i))}),z.subscribe(M),!o&&d>0&&(o=new fr({next:F=>z.next(F),error:F=>{m=!0,v(),a=Se(w,t,F),z.error(F)},complete:()=>{g=!0,v(),a=Se(w,r),z.complete()}}),jn(D).subscribe(o))})(s)}}function Se(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new fr({next:()=>{r.unsubscribe(),n()}});return jn(e(...t)).subscribe(r)}function Ce(n,e){return ne((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(fe(r,u=>{i?.unsubscribe();let d=0;const g=s++;jn(n(u,g)).subscribe(i=fe(r,m=>r.next(e?e(u,m,g,d++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ht(n,e=qt){return n=n??Sn,ne((t,r)=>{let i,s=!0;t.subscribe(fe(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Sn(n,e){return n===e}function Be(n){for(let e in n)if(n[e]===Be)return e;throw Error("Could not find renamed property on target object.")}function An(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function je(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(je).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Zn(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const is=Be({__forward_ref__:Be});function St(n){return n.__forward_ref__=St,n.toString=function(){return je(this())},n}function He(n){return $i(n)?n():n}function $i(n){return"function"==typeof n&&n.hasOwnProperty(is)&&n.__forward_ref__===St}function Zo(n){return n&&!!n.\u0275providers}const ss="https://g.co/ng/security#xss";class de extends Error{constructor(e,t){super(function Q(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function x(n){return"string"==typeof n?n:null==n?"":String(n)}function tt(n,e){throw new de(-201,!1)}function di(n,e){null==n&&function We(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Ve(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function sr(n){return{providers:n.providers||[],imports:n.imports||[]}}function bc(n){return ch(n,nu)||ch(n,eo)}function ch(n,e){return n.hasOwnProperty(e)?n[e]:null}function Sc(n){return n&&(n.hasOwnProperty(lh)||n.hasOwnProperty(Ug))?n[lh]:null}const nu=Be({\u0275prov:Be}),lh=Be({\u0275inj:Be}),eo=Be({ngInjectableDef:Be}),Ug=Be({ngInjectorDef:Be});var ut=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ut||{});let dh;function Mr(n){const e=dh;return dh=n,e}function Pc(n,e,t){const r=bc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ut.Optional?null:void 0!==e?e:void tt(je(n))}const Ft=globalThis;class _e{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ve({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const iu={},su="__NG_DI_FLAG__",Is="ngTempTokenPath",mh=/\n/gm,Ei="__source";let Xo;function Es(n){const e=Xo;return Xo=n,e}function yh(n,e=ut.Default){if(void 0===Xo)throw new de(-203,!1);return null===Xo?Pc(n,void 0,e):Xo.get(n,e&ut.Optional?null:void 0,e)}function me(n,e=ut.Default){return(function Rc(){return dh}()||yh)(He(n),e)}function be(n,e=ut.Default){return me(n,Nc(e))}function Nc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ou(n){const e=[];for(let t=0;t<n.length;t++){const r=He(n[t]);if(Array.isArray(r)){if(0===r.length)throw new de(900,!1);let i,s=ut.Default;for(let o=0;o<r.length;o++){const a=r[o],u=vI(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(me(i,s))}else e.push(me(r))}return e}function wi(n,e){return n[su]=e,n.prototype[su]=e,n}function vI(n){return n[su]}function ws(n){return{toString:n}.toString()}var ea=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ea||{}),kn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(kn||{});const gr={},pt=[],uu=Be({\u0275cmp:Be}),Oc=Be({\u0275dir:Be}),kc=Be({\u0275pipe:Be}),zg=Be({\u0275mod:Be}),xr=Be({\u0275fac:Be}),cu=Be({__NG_ELEMENT_ID__:Be}),lu=Be({__NG_ENV_ID__:Be});function vh(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Vc(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Qr(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Fc(n){return 3===n||4===n||6===n}function Qr(n){return 64===n.charCodeAt(0)}function ta(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||qg(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function qg(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Lc="ng-template";function Uc(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==vh(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Ih(n){return 4===n.type&&n.value!==Lc}function Gg(n,e,t){return e===(4!==n.type||t?n.value:Lc)}function EI(n,e,t){let r=4;const i=n.attrs||[],s=function wh(n){for(let e=0;e<n.length;e++)if(Fc(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Gg(n,u,t)||""===u&&1===e.length){if(Yr(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!Uc(n.attrs,d,t)){if(Yr(r))return!1;o=!0}continue}const m=Eh(8&r?"class":u,i,Ih(n),t);if(-1===m){if(Yr(r))return!1;o=!0;continue}if(""!==d){let v;v=m>s?"":i[m+1].toLowerCase();const w=8&r?v:null;if(w&&-1!==vh(w,d,0)||2&r&&d!==v){if(Yr(r))return!1;o=!0}}}}else{if(!o&&!Yr(r)&&!Yr(u))return!1;if(o&&Yr(u))continue;o=!1,r=u|1&r}}return Yr(r)||o}function Yr(n){return 0==(1&n)}function Eh(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Wg(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Bc(n,e,t=!1){for(let r=0;r<e.length;r++)if(EI(n,e[r],t))return!0;return!1}function Th(n,e){return n?":not("+e.trim()+")":e}function Ch(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Yr(o)&&(e+=Th(s,i),i=""),r=o,s=s||!Yr(r);t++}return""!==i&&(e+=Th(s,i)),e}function Ai(n){return ws(()=>{const e=Yg(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ea.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||kn.Emulated,styles:n.styles||pt,_:null,schemas:n.schemas||null,tView:null,id:""};Hc(t);const r=n.dependencies;return t.directiveDefs=zc(r,!1),t.pipeDefs=zc(r,!0),t.id=function wI(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Kg(n){return _t(n)||Vn(n)}function Sh(n){return null!==n}function Jr(n){return ws(()=>({type:n.type,bootstrap:n.bootstrap||pt,declarations:n.declarations||pt,imports:n.imports||pt,exports:n.exports||pt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Qg(n,e){if(null==n)return gr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Ke(n){return ws(()=>{const e=Yg(n);return Hc(e),e})}function _t(n){return n[uu]||null}function Vn(n){return n[Oc]||null}function Hn(n){return n[kc]||null}function mr(n,e){const t=n[zg]||null;if(!t&&!0===e)throw new Error(`Type ${je(n)} does not have '\u0275mod' property.`);return t}function Yg(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||gr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||pt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Qg(n.inputs,e),outputs:Qg(n.outputs)}}function Hc(n){n.features?.forEach(e=>e(n))}function zc(n,e){if(!n)return null;const t=e?Hn:Kg;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Sh)}const Zt=0,De=1,Je=2,Xt=3,Zr=4,du=5,zn=6,na=7,Tn=8,zi=9,ra=10,Ze=11,to=12,Jg=13,Ts=14,Cn=15,no=16,ia=17,hi=18,hu=19,qc=20,Cs=21,Ti=22,fu=23,ro=24,gt=25,Gc=1,Wc=2,qi=7,io=9,Xn=11;function Nr(n){return Array.isArray(n)&&"object"==typeof n[Gc]}function _r(n){return Array.isArray(n)&&!0===n[Gc]}function Zg(n){return 0!=(4&n.flags)}function sa(n){return n.componentOffset>-1}function Mh(n){return 1==(1&n.flags)}function Xr(n){return!!n.template}function xh(n){return 0!=(512&n[Je])}function so(n,e){return n.hasOwnProperty(xr)?n[xr]:null}let en=null,Qc=!1;function fi(n){const e=en;return en=n,e}const aa={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Dn(n){if(!ua(n)||n.dirty){if(!n.producerMustRecompute(n)&&!om(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function sm(n){n.dirty=!0,function im(n){if(void 0===n.liveConsumerNode)return;const e=Qc;Qc=!0;try{for(const t of n.liveConsumerNode)t.dirty||sm(t)}finally{Qc=e}}(n),n.consumerMarkedDirty?.(n)}function mu(n){return n&&(n.nextProducerIndex=0),fi(n)}function kh(n,e){if(fi(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(ua(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ao(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function om(n){Gi(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Dn(t),r!==t.version))return!0}return!1}function Vh(n){if(Gi(n),ua(n))for(let e=0;e<n.producerNode.length;e++)ao(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function ao(n,e){if(function _u(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Gi(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)ao(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Gi(i),i.producerIndexOfThis[r]=e}}function ua(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Gi(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Lh=null;const Jc=()=>{},xI=(()=>({...aa,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:Jc}))();class NI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function pi(){return Bh}function Bh(n){return n.type.prototype.ngOnChanges&&(n.setInput=kI),OI}function OI(){const n=Zc(this),e=n?.current;if(e){const t=n.previous;if(t===gr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function kI(n,e,t,r){const i=this.declaredInputs[t],s=Zc(n)||function VI(n,e){return n[pm]=e}(n,{previous:gr,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new NI(u&&u.currentValue,e,a===gr),n[r]=e}pi.ngInherit=!0;const pm="__ngSimpleChanges__";function Zc(n){return n[pm]||null}const gi=function(n,e,t){};function xt(n){for(;Array.isArray(n);)n=n[Zt];return n}function or(n,e){return xt(e[n.index])}function Ds(n,e){return n.data[e]}function ei(n,e){const t=e[n];return Nr(t)?t:t[Zt]}function us(n,e){return null==e?null:n[e]}function mm(n){n[ia]=0}function BI(n){1024&n[Je]||(n[Je]|=1024,_m(n,1))}function tl(n){1024&n[Je]&&(n[Je]&=-1025,_m(n,-1))}function _m(n,e){let t=n[Xt];if(null===t)return;t[du]+=e;let r=t;for(t=t[Xt];null!==t&&(1===e&&1===r[du]||-1===e&&0===r[du]);)t[du]+=e,r=t,t=t[Xt]}const ze={lFrame:Du(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function il(){return ze.bindingsEnabled}function ue(){return ze.lFrame.lView}function It(){return ze.lFrame.tView}function er(){let n=ol();for(;null!==n&&64===n.type;)n=n.parent;return n}function ol(){return ze.lFrame.currentTNode}function Wi(n,e){const t=ze.lFrame;t.currentTNode=n,t.isParent=e}function Tu(){return ze.lFrame.isParent}function uo(){return ze.lFrame.bindingIndex++}function Tm(n,e){const t=ze.lFrame;t.bindingIndex=t.bindingRootIndex=n,Kh(e)}function Kh(n){ze.lFrame.currentDirectiveIndex=n}function Cu(n){ze.lFrame.currentQueryIndex=n}function qI(n){const e=n[De];return 2===e.type?e.declTNode:1===e.type?n[zn]:null}function Dm(n,e,t){if(t&ut.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&ut.Host||(i=qI(s),null===i||(s=s[Ts],10&i.type))););if(null===i)return!1;e=i,n=s}const r=ze.lFrame=bm();return r.currentTNode=e,r.lView=n,!0}function ul(n){const e=bm(),t=n[De];ze.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function bm(){const n=ze.lFrame,e=null===n?null:n.child;return null===e?Du(n):e}function Du(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Sm(){const n=ze.lFrame;return ze.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Rm=Sm;function Yh(){const n=Sm();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function yr(){return ze.lFrame.selectedIndex}function co(n){ze.lFrame.selectedIndex=n}function un(){const n=ze.lFrame;return Ds(n.tView,n.selectedIndex)}let Mm=!0;function bu(){return Mm}function Rs(n){Mm=n}function cl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:g}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),null!=g&&(n.destroyHooks??=[]).push(t,g)}}function ll(n,e,t){hl(n,e,3,t)}function dl(n,e,t,r){(3&n[Je])===t&&hl(n,e,t,r)}function Su(n,e){let t=n[Je];(3&t)===e&&(t&=8191,t+=1,n[Je]=t)}function hl(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[ia]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[ia]+=65536),(a<s||-1==s)&&(Zh(n,t,e,u),n[ia]=(4294901760&n[ia])+u+2),u++}function xm(n,e){gi(4,n,e);const t=fi(null);try{e.call(n)}finally{fi(t),gi(5,n,e)}}function Zh(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[Je]>>13<n[ia]>>16&&(3&n[Je])===e&&(n[Je]+=8192,xm(a,s)):xm(a,s)}const ca=-1;class la{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function fl(n){return n!==ca}function Ru(n){return 32767&n}function Pu(n,e){let t=function XI(n){return n>>16}(n),r=e;for(;t>0;)r=r[Ts],t--;return r}let nf=!0;function pl(n){const e=nf;return nf=n,e}const Vm=255,tE=5;let nE=0;const ur={};function gl(n,e){const t=Fm(n,e);if(-1!==t)return t;const r=e[De];r.firstCreatePass&&(n.injectorIndex=e.length,Mu(r.data,n),Mu(e,null),Mu(r.blueprint,null));const i=da(n,e),s=n.injectorIndex;if(fl(i)){const o=Ru(i),a=Pu(i,e),u=a[De].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function Mu(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Fm(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function da(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=xu(i),null===r)return ca;if(t++,i=i[Ts],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return ca}function rf(n,e,t){!function rE(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(cu)&&(r=t[cu]),null==r&&(r=t[cu]=nE++);const i=r&Vm;e.data[n+(i>>tE)]|=1<<i}(n,e,t)}function ml(n,e,t){if(t&ut.Optional||void 0!==n)return n;tt()}function Lm(n,e,t,r){if(t&ut.Optional&&void 0===r&&(r=null),!(t&(ut.Self|ut.Host))){const i=n[zi],s=Mr(void 0);try{return i?i.get(e,r,t&ut.Optional):Pc(e,r,t&ut.Optional)}finally{Mr(s)}}return ml(r,0,t)}function Um(n,e,t,r=ut.Default,i){if(null!==n){if(2048&e[Je]&&!(r&ut.Self)){const o=function uE(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Je]&&!(512&o[Je]);){const a=_l(s,o,t,r|ut.Self,ur);if(a!==ur)return a;let u=s.parent;if(!u){const d=o[qc];if(d){const g=d.get(t,ur,r);if(g!==ur)return g}u=xu(o),o=o[Ts]}s=u}return i}(n,e,t,r,ur);if(o!==ur)return o}const s=_l(n,e,t,r,ur);if(s!==ur)return s}return Lm(e,t,r,i)}function _l(n,e,t,r,i){const s=function oE(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(cu)?n[cu]:void 0;return"number"==typeof e?e>=0?e&Vm:af:e}(t);if("function"==typeof s){if(!Dm(e,n,r))return r&ut.Host?ml(i,0,r):Lm(e,t,r,i);try{let o;if(o=s(r),null!=o||r&ut.Optional)return o;tt()}finally{Rm()}}else if("number"==typeof s){let o=null,a=Fm(n,e),u=ca,d=r&ut.Host?e[Cn][zn]:null;for((-1===a||r&ut.SkipSelf)&&(u=-1===a?da(n,e):e[a+8],u!==ca&&sf(r,!1)?(o=e[De],a=Ru(u),e=Pu(u,e)):a=-1);-1!==a;){const g=e[De];if(Bm(s,a,g.data)){const m=sE(a,e,t,o,r,d);if(m!==ur)return m}u=e[a+8],u!==ca&&sf(r,e[De].data[a+8]===d)&&Bm(s,a,e)?(o=g,a=Ru(u),e=Pu(u,e)):a=-1}}return i}function sE(n,e,t,r,i,s){const o=e[De],a=o.data[n+8],g=function yl(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,g=s>>20,v=i?a+g:n.directiveEnd;for(let w=r?a:a+g;w<v;w++){const T=o[w];if(w<u&&t===T||w>=u&&T.type===t)return w}if(i){const w=o[u];if(w&&Xr(w)&&w.type===t)return u}return null}(a,o,t,null==r?sa(a)&&nf:r!=o&&0!=(3&a.type),i&ut.Host&&s===a);return null!==g?lo(e,o,g,a):ur}function lo(n,e,t,r){let i=n[t];const s=e.data;if(function Nm(n){return n instanceof la}(i)){const o=i;o.resolving&&function Ae(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new de(-200,`Circular dependency in DI detected for ${n}${t}`)}(function K(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():x(n)}(s[t]));const a=pl(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Mr(o.injectImpl):null;Dm(n,r,ut.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function JI(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Bh(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==d&&Mr(d),pl(a),o.resolving=!1,Rm()}}return i}function Bm(n,e,t){return!!(t[e+(n>>tE)]&1<<n)}function sf(n,e){return!(n&ut.Self||n&ut.Host&&e)}class vr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Um(this._tNode,this._lView,e,Nc(r),t)}}function af(){return new vr(er(),ue())}function Fn(n){return ws(()=>{const e=n.prototype.constructor,t=e[xr]||uf(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[xr]||uf(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function uf(n){return $i(n)?()=>{const e=uf(He(n));return e&&e()}:so(n)}function xu(n){const e=n[De],t=e.type;return 2===t?e.declTNode:1===t?n[zn]:null}const fa="__parameters__";function pa(n,e,t){return ws(()=>{const r=function cf(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,g){const m=u.hasOwnProperty(fa)?u[fa]:Object.defineProperty(u,fa,{value:[]})[fa];for(;m.length<=g;)m.push(null);return(m[g]=m[g]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Qi(n,e){n.forEach(t=>Array.isArray(t)?Qi(t,e):e(t))}function hf(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Il(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Pn(n,e,t){let r=ga(n,e);return r>=0?n[1|r]=t:(r=~r,function $m(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function El(n,e){const t=ga(n,e);if(t>=0)return n[1|t]}function ga(n,e){return function Hm(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const ku=wi(pa("Optional"),8),wl=wi(pa("SkipSelf"),4);function Jm(n){return 128==(128&n.flags)}var ma=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ma||{});const mE=new Map;let HU=0;const yE="__ngContext__";function kr(n,e){Nr(e)?(n[yE]=e[hu],function qU(n){mE.set(n[hu],n)}(e)):n[yE]=e}let vE;function IE(n,e){return vE(n,e)}function Tf(n){const e=n[Xt];return _r(e)?e[Xt]:e}function kb(n){return Fb(n[to])}function Vb(n){return Fb(n[Zr])}function Fb(n){for(;null!==n&&!_r(n);)n=n[Zr];return n}function Dl(n,e,t,r,i){if(null!=r){let s,o=!1;_r(r)?s=r:Nr(r)&&(o=!0,r=r[Zt]);const a=xt(r);0===n&&null!==t?null==i?jb(e,t,a):Vu(e,t,a,i||null,!0):1===n&&null!==t?Vu(e,t,a,i||null,!0):2===n?function i_(n,e,t){const r=n_(n,e);r&&function lB(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function fB(n,e,t,r,i){const s=t[qi];s!==xt(t)&&Dl(e,n,r,s,i);for(let a=Xn;a<t.length;a++){const u=t[a];Df(u[De],u,n,e,r,s)}}(e,n,s,t,i)}}function e_(n,e,t){return n.createElement(e,t)}function Ub(n,e){const t=n[io],r=t.indexOf(e);tl(e),t.splice(r,1)}function t_(n,e){if(n.length<=Xn)return;const t=Xn+e,r=n[t];if(r){const i=r[no];null!==i&&i!==n&&Ub(i,r),e>0&&(n[t-1][Zr]=r[Zr]);const s=Il(n,Xn+e);!function nB(n,e){Df(n,e,e[Ze],2,null,null),e[Zt]=null,e[zn]=null}(r[De],r);const o=s[hi];null!==o&&o.detachView(s[De]),r[Xt]=null,r[Zr]=null,r[Je]&=-129}return r}function wE(n,e){if(!(256&e[Je])){const t=e[Ze];e[fu]&&Vh(e[fu]),e[ro]&&Vh(e[ro]),t.destroyNode&&Df(n,e,t,3,null,null),function sB(n){let e=n[to];if(!e)return AE(n[De],n);for(;e;){let t=null;if(Nr(e))t=e[to];else{const r=e[Xn];r&&(t=r)}if(!t){for(;e&&!e[Zr]&&e!==n;)Nr(e)&&AE(e[De],e),e=e[Xt];null===e&&(e=n),Nr(e)&&AE(e[De],e),t=e&&e[Zr]}e=t}}(e)}}function AE(n,e){if(!(256&e[Je])){e[Je]&=-129,e[Je]|=256,function cB(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof la)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];gi(4,a,u);try{u.call(a)}finally{gi(5,a,u)}}else{gi(4,i,s);try{s.call(i)}finally{gi(5,i,s)}}}}}(n,e),function uB(n,e){const t=n.cleanup,r=e[na];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[na]=null);const i=e[Cs];if(null!==i){e[Cs]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[De].type&&e[Ze].destroy();const t=e[no];if(null!==t&&_r(e[Xt])){t!==e[Xt]&&Ub(t,e);const r=e[hi];null!==r&&r.detachView(n)}!function GU(n){mE.delete(n[hu])}(e)}}function TE(n,e,t){return function Bb(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Zt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===kn.None||s===kn.Emulated)return null}return or(r,t)}}(n,e.parent,t)}function Vu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function jb(n,e,t){n.appendChild(e,t)}function $b(n,e,t,r,i){null!==r?Vu(n,e,t,r,i):jb(n,e,t)}function n_(n,e){return n.parentNode(e)}let CE,RE,o_,qb=function zb(n,e,t){return 40&n.type?or(n,t):null};function r_(n,e,t,r){const i=TE(n,r,e),s=e[Ze],a=function Hb(n,e,t){return qb(n,e,t)}(r.parent||e[zn],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)$b(s,i,t[u],a,!1);else $b(s,i,t,a,!1);void 0!==CE&&CE(s,r,e,t,i)}function Cf(n,e){if(null!==e){const t=e.type;if(3&t)return or(e,n);if(4&t)return DE(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Cf(n,r);{const i=n[e.index];return _r(i)?DE(-1,i):xt(i)}}if(32&t)return IE(e,n)()||xt(n[e.index]);{const r=Wb(n,e);return null!==r?Array.isArray(r)?r[0]:Cf(Tf(n[Cn]),r):Cf(n,e.next)}}return null}function Wb(n,e){return null!==e?n[Cn][zn].projection[e.projection]:null}function DE(n,e){const t=Xn+n+1;if(t<e.length){const r=e[t],i=r[De].firstChild;if(null!==i)return Cf(r,i)}return e[qi]}function bE(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&kr(xt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)bE(n,e,t.child,r,i,s,!1),Dl(e,n,i,a,s);else if(32&u){const d=IE(t,r);let g;for(;g=d();)Dl(e,n,i,g,s);Dl(e,n,i,a,s)}else 16&u?Qb(n,e,r,t,i,s):Dl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Df(n,e,t,r,i,s){bE(t,r,n.firstChild,e,i,s,!1)}function Qb(n,e,t,r,i,s){const o=t[Cn],u=o[zn].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Dl(e,n,i,u[d],s);else{let d=u;const g=o[Xt];Jm(r)&&(d.flags|=128),bE(n,e,d,g,i,s,!0)}}function Yb(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Jb(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Vc(n,e,r),null!==i&&Yb(n,e,i),null!==s&&function gB(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function eS(n){return function PE(){if(void 0===o_&&(o_=null,Ft.trustedTypes))try{o_=Ft.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return o_}()?.createScriptURL(n)||n}class tS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ss})`}}function _a(n){return n instanceof tS?n.changingThisBreaksApplicationSecurity:n}function bf(n,e){const t=function CB(n){return n instanceof tS&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ss})`)}return t===e}const RB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Rl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Rl||{});function uS(n){const e=Rf();return e?e.sanitize(Rl.URL,n)||"":bf(n,"URL")?_a(n):function ME(n){return(n=String(n)).match(RB)?n:"unsafe:"+n}(x(n))}function cS(n){const e=Rf();if(e)return eS(e.sanitize(Rl.RESOURCE_URL,n)||"");if(bf(n,"ResourceURL"))return eS(_a(n));throw new de(904,!1)}function Rf(){const n=ue();return n&&n[ra].sanitizer}const Pf=new _e("ENVIRONMENT_INITIALIZER"),dS=new _e("INJECTOR",-1),hS=new _e("INJECTOR_DEF_TYPES");class kE{get(e,t=iu){if(t===iu){const r=new Error(`NullInjectorError: No provider for ${je(e)}!`);throw r.name="NullInjectorError",r}return t}}function $B(...n){return{\u0275providers:fS(0,n),\u0275fromNgModule:!0}}function fS(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Qi(e,o=>{const a=o;u_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&pS(i,s),t}function pS(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];FE(i,s=>{e(s,r)})}}function u_(n,e,t,r){if(!(n=He(n)))return!1;let i=null,s=Sc(n);const o=!s&&_t(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=Sc(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)u_(d,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{Qi(s.imports,g=>{u_(g,e,t,r)&&(d||=[],d.push(g))})}finally{}void 0!==d&&pS(d,e)}if(!a){const d=so(i)||(()=>new i);e({provide:i,useFactory:d,deps:pt},i),e({provide:hS,useValue:i,multi:!0},i),e({provide:Pf,useValue:()=>me(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=n;FE(u,g=>{e(g,d)})}}}return i!==n&&void 0!==n.providers}function FE(n,e){for(let t of n)Zo(t)&&(t=t.\u0275providers),Array.isArray(t)?FE(t,e):e(t)}const HB=Be({provide:String,useValue:Be});function LE(n){return null!==n&&"object"==typeof n&&HB in n}function Fu(n){return"function"==typeof n}const UE=new _e("Set Injector scope."),c_={},qB={};let BE;function l_(){return void 0===BE&&(BE=new kE),BE}class bi{}class Pl extends bi{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$E(e,o=>this.processProvider(o)),this.records.set(dS,Ml(void 0,this)),i.has("environment")&&this.records.set(bi,Ml(void 0,this));const s=this.records.get(UE);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(hS.multi,pt,ut.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Es(this),r=Mr(void 0);try{return e()}finally{Es(t),Mr(r)}}get(e,t=iu,r=ut.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(lu))return e[lu](this);r=Nc(r);const s=Es(this),o=Mr(void 0);try{if(!(r&ut.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function YB(n){return"function"==typeof n||"object"==typeof n&&n instanceof _e}(e)&&bc(e);u=d&&this.injectableDefInScope(d)?Ml(jE(e),c_):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&ut.Self?l_():this.parent).get(e,t=r&ut.Optional&&t===iu?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Is]=a[Is]||[]).unshift(je(e)),s)throw a;return function II(n,e,t,r){const i=n[Is];throw e[Ei]&&i.unshift(e[Ei]),n.message=function au(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=je(e);if(Array.isArray(e))i=e.map(je).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):je(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(mh,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Is]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Mr(o),Es(s)}}resolveInjectorInitializers(){const e=Es(this),t=Mr(void 0);try{const i=this.get(Pf.multi,pt,ut.Self);for(const s of i)s()}finally{Es(e),Mr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(je(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(e){let t=Fu(e=He(e))?e:He(e&&e.provide);const r=function WB(n){return LE(n)?Ml(void 0,n.useValue):Ml(_S(n),c_)}(e);if(Fu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Ml(void 0,c_,!0),i.factory=()=>ou(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===c_&&(t.value=qB,t.value=t.factory()),"object"==typeof t.value&&t.value&&function QB(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=He(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function jE(n){const e=bc(n),t=null!==e?e.factory:so(n);if(null!==t)return t;if(n instanceof _e)throw new de(204,!1);if(n instanceof Function)return function GB(n){const e=n.length;if(e>0)throw function mo(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new de(204,!1);const t=function Lg(n){return n&&(n[nu]||n[eo])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new de(204,!1)}function _S(n,e,t){let r;if(Fu(n)){const i=He(n);return so(i)||jE(i)}if(LE(n))r=()=>He(n.useValue);else if(function mS(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...ou(n.deps||[]));else if(function gS(n){return!(!n||!n.useExisting)}(n))r=()=>me(He(n.useExisting));else{const i=He(n&&(n.useClass||n.provide));if(!function KB(n){return!!n.deps}(n))return so(i)||jE(i);r=()=>new i(...ou(n.deps))}return r}function Ml(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function $E(n,e){for(const t of n)Array.isArray(t)?$E(t,e):t&&Zo(t)?$E(t.\u0275providers,e):e(t)}const d_=new _e("AppId",{providedIn:"root",factory:()=>JB}),JB="ng",yS=new _e("Platform Initializer"),Ps=new _e("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vS=new _e("CSP nonce",{providedIn:"root",factory:()=>function Sl(){if(void 0!==RE)return RE;if(typeof document<"u")return document;throw new de(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let IS=(n,e,t)=>null;function YE(n,e,t=!1){return IS(n,e,t)}class aj{}class AS{}class cj{resolveComponentFactory(e){throw function uj(n){const e=Error(`No component factory found for ${je(n)}.`);return e.ngComponent=n,e}(e)}}let __=(()=>{class n{static{this.NULL=new cj}}return n})();function lj(){return Ol(er(),ue())}function Ol(n,e){return new Si(or(n,e))}let Si=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=lj}}return n})();class CS{}let Io=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function hj(){const n=ue(),t=ei(er().index,n);return(Nr(t)?t:n)[Ze]}()}}return n})(),fj=(()=>{class n{static{this.\u0275prov=Ve({token:n,providedIn:"root",factory:()=>null})}}return n})();class kl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const DS=new kl("16.2.12"),XE={};function PS(n,e=null,t=null,r){const i=MS(n,e,t,r);return i.resolveInjectorInitializers(),i}function MS(n,e=null,t=null,r,i=new Set){const s=[t||pt,$B(n)];return r=r||("object"==typeof n?void 0:je(n)),new Pl(s,e||l_(),r||null,i)}let Ri=(()=>{class n{static{this.THROW_IF_NOT_FOUND=iu}static{this.NULL=new kE}static create(t,r){if(Array.isArray(t))return PS({name:""},r,t,"");{const i=t.name??"";return PS({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Ve({token:n,providedIn:"any",factory:()=>me(dS)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function tw(n){return n.ngOriginalError}class Eo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&tw(e);for(;t&&tw(t);)t=tw(t);return t||null}}function nw(n){return e=>{setTimeout(n,void 0,e)}}const Mn=class Ej extends te{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=nw(s),i&&(i=nw(i)),o&&(o=nw(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Tt&&e.add(a),a}};function NS(...n){}class Lt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mn(!1),this.onMicrotaskEmpty=new Mn(!1),this.onStable=new Mn(!1),this.onError=new Mn(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function wj(){const n="function"==typeof Ft.requestAnimationFrame;let e=Ft[n?"requestAnimationFrame":"setTimeout"],t=Ft[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Cj(n){const e=()=>{!function Tj(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ft,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,iw(n),n.isCheckStableRunning=!0,rw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),iw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function bj(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return OS(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),kS(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return OS(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),kS(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,iw(n),rw(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Lt.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(Lt.isInAngularZone())throw new de(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Aj,NS,NS);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Aj={};function rw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function iw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function OS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kS(n){n._nesting--,rw(n)}class Dj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mn,this.onMicrotaskEmpty=new Mn,this.onStable=new Mn,this.onError=new Mn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const VS=new _e("",{providedIn:"root",factory:FS});function FS(){const n=be(Lt);let e=!0;return P(new lt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new lt(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Lt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Lt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(q()))}function wo(n){return n instanceof Function?n():n}let sw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Ve({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Nf(n){for(;n;){n[Je]|=64;const e=Tf(n);if(xh(n)&&!e)return n;n=e}return null}const $S=new _e("",{providedIn:"root",factory:()=>!1});let I_=null;function GS(n,e){return n[e]??QS()}function WS(n,e){const t=QS();t.producerNode?.length&&(n[e]=I_,t.lView=n,I_=KS())}const Fj={...aa,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Nf(n.lView)},lView:null};function KS(){return Object.create(Fj)}function QS(){return I_??=KS(),I_}const rt={};function ya(n){YS(It(),ue(),yr()+n,!1)}function YS(n,e,t,r){if(!r)if(3==(3&e[Je])){const s=n.preOrderCheckHooks;null!==s&&ll(e,s,t)}else{const s=n.preOrderHooks;null!==s&&dl(e,s,0,t)}co(t)}function pe(n,e=ut.Default){const t=ue();return null===t?me(n,e):Um(er(),t,He(n),e)}function E_(n,e,t,r,i,s,o,a,u,d,g){const m=e.blueprint.slice();return m[Zt]=i,m[Je]=140|r,(null!==d||n&&2048&n[Je])&&(m[Je]|=2048),mm(m),m[Xt]=m[Ts]=n,m[Tn]=t,m[ra]=o||n&&n[ra],m[Ze]=a||n&&n[Ze],m[zi]=u||n&&n[zi]||null,m[zn]=s,m[hu]=function zU(){return HU++}(),m[Ti]=g,m[qc]=d,m[Cn]=2==e.type?n[Cn]:m,m}function Ll(n,e,t,r,i){let s=n.data[e];if(null===s)s=function ow(n,e,t,r,i){const s=ol(),o=Tu(),u=n.data[e]=function qj(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Ss(){return null!==ze.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function wm(){return ze.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Au(){const n=ze.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Wi(s,!0),s}function Of(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ZS(n,e,t,r,i){const s=GS(e,fu),o=yr(),a=2&r;try{co(-1),a&&e.length>gt&&YS(n,e,gt,!1),gi(a?2:0,i);const d=a?s:null,g=mu(d);try{null!==d&&(d.dirty=!1),t(r,i)}finally{kh(d,g)}}finally{a&&null===e[fu]&&WS(e,fu),co(o),gi(a?3:1,i)}}function aw(n,e,t){if(Zg(e)){const r=fi(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{fi(r)}}}function uw(n,e,t){il()&&(function Zj(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;sa(t)&&function s$(n,e,t){const r=or(e,n),i=XS(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=w_(n,E_(n,i,null,o,r,e,null,n[ra].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||gl(t,e),kr(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],d=lo(e,n,a,t);kr(d,e),null!==o&&o$(0,a-i,d,u,0,o),Xr(u)&&(ei(t.index,e)[Tn]=lo(e,n,a,t))}}(n,e,t,or(t,e)),64==(64&t.flags)&&iR(n,e,t))}function cw(n,e,t=or){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function XS(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=lw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function lw(n,e,t,r,i,s,o,a,u,d,g){const m=gt+r,v=m+i,w=function Uj(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:rt);return t}(m,v),T="function"==typeof d?d():d;return w[De]={type:n,blueprint:w,template:t,queries:null,viewQuery:a,declTNode:e,data:w.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:g}}let eR=n=>null;function tR(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?nR(t,e,i,s):r.hasOwnProperty(i)&&nR(t,e,r[i],s)}return t}function nR(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function dw(n,e,t,r){if(il()){const i=null===r?null:{"":-1},s=function e$(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Bc(e,o.selectors,!1))if(r||(r=[]),Xr(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),hw(n,e,a.length)}else r.unshift(o),hw(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&rR(n,e,t,o,i,a),i&&function t$(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new de(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=ta(t.mergedAttrs,t.attrs)}function rR(n,e,t,r,i,s){for(let d=0;d<r.length;d++)rf(gl(t,e),n,r[d].type);!function r$(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let d=0;d<r.length;d++){const g=r[d];g.providersResolver&&g.providersResolver(g)}let o=!1,a=!1,u=Of(n,e,r.length,null);for(let d=0;d<r.length;d++){const g=r[d];t.mergedAttrs=ta(t.mergedAttrs,g.hostAttrs),i$(n,t,e,u,g),n$(u,g,i),null!==g.contentQueries&&(t.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(t.flags|=64);const m=g.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function Gj(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,d=null;for(let g=e.directiveStart;g<i;g++){const m=s[g],v=t?t.get(m):null,T=v?v.outputs:null;u=tR(m.inputs,g,u,v?v.inputs:null),d=tR(m.outputs,g,d,T);const D=null===u||null===o||Ih(e)?null:a$(u,g,o);a.push(D)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(n,t,s)}function iR(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function Wh(){return ze.lFrame.currentDirectiveIndex}();try{co(s);for(let a=r;a<i;a++){const u=n.data[a],d=e[a];Kh(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Xj(u,d)}}finally{co(-1),Kh(o)}}function Xj(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function hw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function n$(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Xr(e)&&(t[""]=n)}}function i$(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=so(i.type)),o=new la(s,Xr(i),pe);n.blueprint[r]=o,t[r]=o,function Yj(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function Jj(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Of(n,t,i.hostVars,rt),i)}function Ms(n,e,t,r,i,s){const o=or(n,e);!function fw(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?x(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[Ze],o,s,n.value,t,r,i)}function o$(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)sR(r,t,o[a++],o[a++],o[a++])}function sR(n,e,t,r,i){const s=fi(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{fi(s)}}function a$(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function oR(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function aR(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Cu(t[r]),o.contentQueries(2,e[s],s)}}}function w_(n,e){return n[to]?n[Jg][Zr]=e:n[to]=e,n[Jg]=e,e}function pw(n,e,t){Cu(0);const r=fi(null);try{e(n,t)}finally{fi(r)}}function dR(n,e){const t=n[zi],r=t?t.get(Eo,null):null;r&&r.handleError(e)}function gw(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];sR(n.data[o],e[o],r,a,i)}}function u$(n,e){const t=ei(e,n),r=t[De];!function c$(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Zt];null!==i&&null===t[Ti]&&(t[Ti]=YE(i,t[zi])),mw(r,t,t[Tn])}function mw(n,e,t){ul(e);try{const r=n.viewQuery;null!==r&&pw(1,r,t);const i=n.template;null!==i&&ZS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&aR(n,e),n.staticViewQueries&&pw(2,n.viewQuery,t);const s=n.components;null!==s&&function l$(n,e){for(let t=0;t<e.length;t++)u$(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Je]&=-5,Yh()}}let hR=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function MI(n,e,t){const r=Object.create(xI);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>sm(r),run:()=>{if(r.dirty=!1,r.hasRun&&!om(r))return;r.hasRun=!0;const o=mu(r);try{r.cleanupFn(),r.cleanupFn=Jc,r.fn(i)}finally{kh(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Ve({token:n,providedIn:"root",factory:()=>new n})}}return n})();function A_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Zn(i,a):2==s&&(r=Zn(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function kf(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(xt(s)),_r(s)&&fR(s,r);const o=t.type;if(8&o)kf(n,e,t.child,r);else if(32&o){const a=IE(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=Wb(e,t);if(Array.isArray(a))r.push(...a);else{const u=Tf(e[Cn]);kf(u[De],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function fR(n,e){for(let t=Xn;t<n.length;t++){const r=n[t],i=r[De].firstChild;null!==i&&kf(r[De],r,i,e)}n[qi]!==n[Zt]&&e.push(n[qi])}function T_(n,e,t,r=!0){const i=e[ra],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{pR(n,e,n.template,t)}catch(u){throw r&&dR(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function pR(n,e,t,r){const i=e[Je];if(256!=(256&i)){e[ra].effectManager?.flush(),ul(e);try{mm(e),function Em(n){return ze.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&ZS(n,e,t,2,r);const o=3==(3&i);if(o){const d=n.preOrderCheckHooks;null!==d&&ll(e,d,null)}else{const d=n.preOrderHooks;null!==d&&dl(e,d,0,null),Su(e,0)}if(function f$(n){for(let e=kb(n);null!==e;e=Vb(e)){if(!e[Wc])continue;const t=e[io];for(let r=0;r<t.length;r++){BI(t[r])}}}(e),gR(e,2),null!==n.contentQueries&&aR(n,e),o){const d=n.contentCheckHooks;null!==d&&ll(e,d)}else{const d=n.contentHooks;null!==d&&dl(e,d,1),Su(e,1)}!function Lj(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=GS(e,ro);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)co(~s);else{const o=s,a=t[++i],u=t[++i];Tm(a,o),r.dirty=!1;const d=mu(r);try{u(2,e[o])}finally{kh(r,d)}}}}finally{null===e[ro]&&WS(e,ro),co(-1)}}(n,e);const a=n.components;null!==a&&_R(e,a,0);const u=n.viewQuery;if(null!==u&&pw(2,u,r),o){const d=n.viewCheckHooks;null!==d&&ll(e,d)}else{const d=n.viewHooks;null!==d&&dl(e,d,2),Su(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Je]&=-73,tl(e)}finally{Yh()}}}function gR(n,e){for(let t=kb(n);null!==t;t=Vb(t))for(let r=Xn;r<t.length;r++)mR(t[r],e)}function p$(n,e,t){mR(ei(e,n),t)}function mR(n,e){if(!function UI(n){return 128==(128&n[Je])}(n))return;const t=n[De],r=n[Je];if(80&r&&0===e||1024&r||2===e)pR(t,n,t.template,n[Tn]);else if(n[du]>0){gR(n,1);const i=t.components;null!==i&&_R(n,i,1)}}function _R(n,e,t){for(let r=0;r<e.length;r++)p$(n,e[r],t)}class Vf{get rootNodes(){const e=this._lView,t=e[De];return kf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Tn]}set context(e){this._lView[Tn]=e}get destroyed(){return 256==(256&this._lView[Je])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Xt];if(_r(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(t_(e,r),Il(t,r))}this._attachedToViewContainer=!1}wE(this._lView[De],this._lView)}onDestroy(e){!function nl(n,e){if(256==(256&n[Je]))throw new de(911,!1);null===n[Cs]&&(n[Cs]=[]),n[Cs].push(e)}(this._lView,e)}markForCheck(){Nf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Je]&=-129}reattach(){this._lView[Je]|=128}detectChanges(){T_(this._lView[De],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function iB(n,e){Df(n,e,e[Ze],2,null,null)}(this._lView[De],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=e}}class g$ extends Vf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;T_(e[De],e,e[Tn],!1)}checkNoChanges(){}get context(){return null}}class yR extends __{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=_t(e);return new Ff(t,this.ngModule)}}function vR(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class _${constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Nc(r);const i=this.injector.get(e,XE,r);return i!==XE||t===XE?i:this.parentInjector.get(e,t,r)}}class Ff extends AS{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=vR(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return vR(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function $c(n){return n.map(Ch).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof bi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new _$(e,s):e,a=o.get(CS,null);if(null===a)throw new de(407,!1);const m={rendererFactory:a,sanitizer:o.get(fj,null),effectManager:o.get(hR,null),afterRenderEventManager:o.get(sw,null)},v=a.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",T=r?function Bj(n,e,t,r){const s=r.get($S,!1)||t===kn.ShadowDom,o=n.selectRootElement(e,s);return function jj(n){eR(n)}(o),o}(v,r,this.componentDef.encapsulation,o):e_(v,w,function m$(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(w)),z=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let F=null;null!==T&&(F=YE(T,o,!0));const G=lw(0,null,null,1,0,null,null,null,null,null,null),ae=E_(null,G,null,z,null,null,m,v,o,null,F);let ye,Fe;ul(ae);try{const V=this.componentDef;let b,O=null;V.findHostDirectiveDefs?(b=[],O=new Map,V.findHostDirectiveDefs(V,b,O),b.push(V)):b=[V];const L=function v$(n,e){const t=n[De],r=gt;return n[r]=e,Ll(t,r,2,"#host",null)}(ae,T),j=function I$(n,e,t,r,i,s,o){const a=i[De];!function E$(n,e,t,r){for(const i of n)e.mergedAttrs=ta(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(A_(e,e.mergedAttrs,!0),null!==t&&Jb(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=YE(e,i[zi]));const d=s.rendererFactory.createRenderer(e,t);let g=16;t.signals?g=4096:t.onPush&&(g=64);const m=E_(i,XS(t),null,g,i[n.index],n,s,d,null,null,u);return a.firstCreatePass&&hw(a,n,r.length-1),w_(i,m),i[n.index]=m}(L,T,V,b,ae,m,v);Fe=Ds(G,gt),T&&function A$(n,e,t,r){if(r)Vc(n,t,["ng-version",DS.full]);else{const{attrs:i,classes:s}=function Dh(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Yr(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Vc(n,t,i),s&&s.length>0&&Yb(n,t,s.join(" "))}}(v,V,T,r),void 0!==t&&function T$(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Fe,this.ngContentSelectors,t),ye=function w$(n,e,t,r,i,s){const o=er(),a=i[De],u=or(o,i);rR(a,i,o,t,null,r);for(let g=0;g<t.length;g++)kr(lo(i,a,o.directiveStart+g,o),i);iR(a,i,o),u&&kr(u,i);const d=lo(i,a,o.directiveStart+o.componentOffset,o);if(n[Tn]=i[Tn]=d,null!==s)for(const g of s)g(d,e);return aw(a,o,n),d}(j,V,b,O,ae,[C$]),mw(G,ae,null)}finally{Yh()}return new y$(this.componentType,ye,Ol(Fe,ae),ae,Fe)}}class y$ extends aj{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new g$(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;gw(s[De],s,i,e,t),this.previousInputValues.set(e,t),Nf(ei(this._tNode.index,s))}}get injector(){return new vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function C$(){const n=er();cl(ue()[De],n)}function Ut(n){let e=function IR(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Xr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new de(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=C_(n.inputs),o.inputTransforms=C_(n.inputTransforms),o.declaredInputs=C_(n.declaredInputs),o.outputs=C_(n.outputs);const a=i.hostBindings;a&&R$(n,a);const u=i.viewQuery,d=i.contentQueries;if(u&&b$(n,u),d&&S$(n,d),An(n.inputs,i.inputs),An(n.declaredInputs,i.declaredInputs),An(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),An(o.inputTransforms,i.inputTransforms)),Xr(i)&&i.data.animation){const g=n.data;g.animation=(g.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Ut&&(t=!1)}}e=Object.getPrototypeOf(e)}!function D$(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ta(i.hostAttrs,t=ta(t,i.hostAttrs))}}(r)}function C_(n){return n===gr?{}:n===pt?[]:n}function b$(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function S$(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function R$(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function TR(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function Vr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Ns(n,e,t,r){const i=ue();return Vr(i,uo(),e)&&(It(),Ms(un(),i,n,e,t,r)),Ns}let LR=function UR(n,e,t,r){return Rs(!0),e[Ze].createComment("")};function To(n,e,t){const r=ue();return Vr(r,uo(),e)&&function Pi(n,e,t,r,i,s,o,a){const u=or(e,t);let g,d=e.inputs;!a&&null!=d&&(g=d[r])?(gw(n,t,g,r,i),sa(e)&&function Kj(n,e){const t=ei(e,n);16&t[Je]||(t[Je]|=64)}(t,e.index)):3&e.type&&(r=function Wj(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(It(),un(),r,n,e,r[Ze],t,!1),To}function Aw(n,e,t,r,i){const o=i?"class":"style";gw(n,t,e.inputs[o],o,r)}function Qe(n,e,t,r){const i=ue(),s=It(),o=gt+n,a=i[Ze],u=s.firstCreatePass?function iH(n,e,t,r,i,s){const o=e.consts,u=Ll(e,n,2,r,us(o,i));return dw(e,t,u,us(o,s)),null!==u.attrs&&A_(u,u.attrs,!1),null!==u.mergedAttrs&&A_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],d=jR(s,i,u,a,e,n);i[o]=d;const g=Mh(u);return Wi(u,!0),Jb(a,d,u),32!=(32&u.flags)&&bu()&&r_(s,i,d,u),0===function wu(){return ze.lFrame.elementDepthCount}()&&kr(d,i),function $I(){ze.lFrame.elementDepthCount++}(),g&&(uw(s,i,u),aw(s,u,i)),null!==r&&cw(i,u),Qe}function st(){let n=er();Tu()?function zh(){ze.lFrame.isParent=!1}():(n=n.parent,Wi(n,!1));const e=n;(function $h(n){return ze.skipHydrationRootTNode===n})(e)&&function vm(){ze.skipHydrationRootTNode=null}(),function HI(){ze.lFrame.elementDepthCount--}();const t=It();return t.firstCreatePass&&(cl(t,n),Zg(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function ef(n){return 0!=(8&n.flags)}(e)&&Aw(t,e,ue(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function km(n){return 0!=(16&n.flags)}(e)&&Aw(t,e,ue(),e.stylesWithoutHost,!1),st}function cr(n,e,t,r){return Qe(n,e,t,r),st(),cr}let jR=(n,e,t,r,i,s)=>(Rs(!0),e_(r,i,function Pm(){return ze.lFrame.currentNamespace}()));function $f(n){return!!n&&"function"==typeof n.then}function qR(n){return!!n&&"function"==typeof n.subscribe}function Mi(n,e,t,r){const i=ue(),s=It(),o=er();return function WR(n,e,t,r,i,s,o){const a=Mh(r),d=n.firstCreatePass&&function cR(n){return n.cleanup||(n.cleanup=[])}(n),g=e[Tn],m=function uR(n){return n[na]||(n[na]=[])}(e);let v=!0;if(3&r.type||o){const D=or(r,e),M=o?o(D):D,z=m.length,F=o?ae=>o(xt(ae[r.index])):r.index;let G=null;if(!o&&a&&(G=function lH(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[na],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==G)(G.__ngLastListenerFn__||G).__ngNextListenerFn__=s,G.__ngLastListenerFn__=s,v=!1;else{s=QR(r,e,g,s,!1);const ae=t.listen(M,i,s);m.push(s,ae),d&&d.push(i,F,z,z+1)}}else s=QR(r,e,g,s,!1);const w=r.outputs;let T;if(v&&null!==w&&(T=w[i])){const D=T.length;if(D)for(let M=0;M<D;M+=2){const ye=e[T[M]][T[M+1]].subscribe(s),Fe=m.length;m.push(s,ye),d&&d.push(i,r.index,Fe,-(Fe+1))}}}(s,i,i[Ze],o,n,e,r),Mi}function KR(n,e,t,r){try{return gi(6,e,t),!1!==t(r)}catch(i){return dR(n,i),!1}finally{gi(7,e,t)}}function QR(n,e,t,r,i){return function s(o){if(o===Function)return r;Nf(n.componentOffset>-1?ei(n.index,e):e);let u=KR(e,t,r,o),d=s.__ngNextListenerFn__;for(;d;)u=KR(e,t,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function M_(n,e){return n<<17|e<<2}function va(n){return n>>17&32767}function bw(n){return 2|n}function Uu(n){return(131068&n)>>2}function Sw(n,e){return-131069&n|e<<2}function Rw(n){return 1|n}function sP(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?va(s):Uu(s),u=!1;for(;0!==a&&(!1===u||o);){const g=n[a+1];IH(n[a],e)&&(u=!0,n[a+1]=r?Rw(g):bw(g)),a=r?va(g):Uu(g)}u&&(n[t+1]=r?bw(s):Rw(s))}function IH(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ga(n,e)>=0}function x_(n,e){return function ls(n,e,t,r){const i=ue(),s=It(),o=function Ki(n){const e=ze.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function pP(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[yr()],o=function fP(n,e){return e>=n.expandoStartIndex}(n,t);(function yP(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function RH(n,e,t,r){const i=function Qh(n){const e=ze.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Hf(t=Pw(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Pw(i,n,e,t,r),null===s){let u=function PH(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Uu(r))return n[va(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=Pw(null,n,e,u[1],r),u=Hf(u,e.attrs,r),function MH(n,e,t,r){n[va(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function xH(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Hf(r,n[s].hostAttrs,t);return Hf(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function yH(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=va(o),u=Uu(o);n[r]=t;let g,d=!1;if(Array.isArray(t)?(g=t[1],(null===g||ga(t,g)>0)&&(d=!0)):g=t,i)if(0!==u){const v=va(n[a+1]);n[r+1]=M_(v,a),0!==v&&(n[v+1]=Sw(n[v+1],r)),n[a+1]=function mH(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=M_(a,0),0!==a&&(n[a+1]=Sw(n[a+1],r)),a=r;else n[r+1]=M_(u,0),0===a?a=r:n[u+1]=Sw(n[u+1],r),u=r;d&&(n[r+1]=bw(n[r+1])),sP(n,g,r,!0),sP(n,g,r,!1),function vH(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ga(s,e)>=0&&(t[r+1]=Rw(t[r+1]))}(e,g,n,r,s),o=M_(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==rt&&Vr(i,o,e)&&function mP(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,d=u[a+1],g=function _H(n){return 1==(1&n)}(d)?_P(u,e,t,i,Uu(d),o):void 0;N_(g)||(N_(s)||function gH(n){return 2==(2&n)}(d)&&(s=_P(u,null,t,i,a,o)),function pB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:ma.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ma.Important),n.setStyle(t,r,i,s))}}(r,o,function el(n,e){return xt(e[n])}(yr(),t),i,s))}(s,s.data[yr()],i,i[Ze],n,i[o+1]=function VH(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=je(_a(n)))),n}(e,t),r,o)}(n,e,null,!0),x_}function Pw(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Hf(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Hf(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Pn(n,o,!!t||e[++s]))}return void 0===n?null:n}function _P(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],d=Array.isArray(u),g=d?u[1]:u,m=null===g;let v=t[i+1];v===rt&&(v=m?pt:void 0);let w=m?El(v,r):g===r?v:void 0;if(d&&!N_(w)&&(w=El(u,r)),N_(w)&&(a=w,o))return a;const T=n[i+1];i=o?va(T):Uu(T)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=El(u,r))}return a}function N_(n){return void 0!==n}function yt(n,e=""){const t=ue(),r=It(),i=n+gt,s=r.firstCreatePass?Ll(r,i,1,e,null):r.data[i],o=vP(r,t,s,e,n);t[i]=o,bu()&&r_(r,t,o,s),Wi(s,!1)}let vP=(n,e,t,r,i)=>(Rs(!0),function Xm(n,e){return n.createText(e)}(e[Ze],r));const Yl="en-US";let $P=Yl;function Ow(n,e,t,r,i){if(n=He(n),Array.isArray(n))for(let s=0;s<n.length;s++)Ow(n[s],e,t,r,i);else{const s=It(),o=ue(),a=er();let u=Fu(n)?n:He(n.provide);const d=_S(n),g=1048575&a.providerIndexes,m=a.directiveStart,v=a.providerIndexes>>20;if(Fu(n)||!n.multi){const w=new la(d,i,pe),T=Vw(u,e,i?g:g+v,m);-1===T?(rf(gl(a,o),s,u),kw(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(w),o.push(w)):(t[T]=w,o[T]=w)}else{const w=Vw(u,e,g+v,m),T=Vw(u,e,g,g+v),M=T>=0&&t[T];if(i&&!M||!i&&!(w>=0&&t[w])){rf(gl(a,o),s,u);const z=function rz(n,e,t,r,i){const s=new la(n,t,pe);return s.multi=[],s.index=e,s.componentProviders=0,fM(s,i,r&&!t),s}(i?nz:tz,t.length,i,r,d);!i&&M&&(t[T].providerFactory=z),kw(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(z),o.push(z)}else kw(s,n,w>-1?w:T,fM(t[i?T:w],d,!i&&r));!i&&r&&M&&t[T].componentProviders++}}}function kw(n,e,t,r){const i=Fu(e),s=function zB(n){return!!n.useClass}(e);if(i||s){const u=(s?He(e.useClass):e).prototype.ngOnDestroy;if(u){const d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const g=d.indexOf(t);-1===g?d.push(t,[r,u]):d[g+1].push(r,u)}else d.push(t,u)}}}function fM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Vw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function tz(n,e,t,r){return Fw(this.multi,[])}function nz(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=lo(t,t[De],this.providerFactory.index,r);s=a.slice(0,o),Fw(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Fw(i,s);return s}function Fw(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function gn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function ez(n,e,t){const r=It();if(r.firstCreatePass){const i=Xr(n);Ow(t,r.data,r.blueprint,i,!0),Ow(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class ju{}class pM{}class Lw extends ju{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yR(this);const i=mr(e);this._bootstrapComponents=wo(i.bootstrap),this._r3Injector=MS(e,t,[{provide:ju,useValue:this},{provide:__,useValue:this.componentFactoryResolver},...r],je(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Uw extends pM{constructor(e){super(),this.moduleType=e}create(e){return new Lw(this.moduleType,e,[])}}class gM extends ju{constructor(e){super(),this.componentFactoryResolver=new yR(this),this.instance=null;const t=new Pl([...e.providers,{provide:ju,useValue:this},{provide:__,useValue:this.componentFactoryResolver}],e.parent||l_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Bw(n,e,t=null){return new gM({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let oz=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=fS(0,t.type),i=r.length>0?Bw([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ve({token:n,providedIn:"environment",factory:()=>new n(me(bi))})}}return n})();function mM(n){n.getStandaloneInjector=e=>e.get(oz).getOrCreateStandaloneInjector(n)}function Oz(n,e,t,r=!0){const i=e[De];if(function oB(n,e,t,r){const i=Xn+r,s=t.length;r>0&&(t[i-1][Zr]=e),r<s-Xn?(e[Zr]=t[i],hf(t,Xn+r,e)):(t.push(e),e[Zr]=null),e[Xt]=t;const o=e[no];null!==o&&t!==o&&function aB(n,e){const t=n[io];e[Cn]!==e[Xt][Xt][Cn]&&(n[Wc]=!0),null===t?n[io]=[e]:t.push(e)}(o,e);const a=e[hi];null!==a&&a.insertView(n),e[Je]|=128}(i,e,n,t),r){const s=DE(t,n),o=e[Ze],a=n_(o,n[qi]);null!==a&&function rB(n,e,t,r,i,s){r[Zt]=i,r[zn]=e,Df(n,r,t,1,i,s)}(i,n[zn],o,e,a,s)}}let Co=(()=>{class n{static{this.__NG_ELEMENT_ID__=Fz}}return n})();const kz=Co,Vz=class extends kz{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function Nz(n,e,t,r){const i=e.tView,a=E_(n,i,t,4096&n[Je]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[no]=n[e.index];const d=n[hi];return null!==d&&(a[hi]=d.createEmbeddedView(i)),mw(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Vf(i)}};function Fz(){return function L_(n,e){return 4&n.type?new Vz(e,n,Ol(n,e)):null}(er(),ue())}let hs=(()=>{class n{static{this.__NG_ELEMENT_ID__=Hz}}return n})();function Hz(){return function OM(n,e){let t;const r=e[n.index];return _r(r)?t=r:(t=oR(r,e,null,n),e[n.index]=t,w_(e,t)),kM(t,e,n,r),new xM(t,n,e)}(er(),ue())}const zz=hs,xM=class extends zz{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ol(this._hostTNode,this._hostLView)}get injector(){return new vr(this._hostTNode,this._hostLView)}get parentInjector(){const e=da(this._hostTNode,this._hostLView);if(fl(e)){const t=Pu(e,this._hostLView),r=Ru(e);return new vr(t[De].data[r+8],t)}return new vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=NM(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Xn}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function go(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,s=D.environmentInjector||D.ngModuleRef}const u=o?e:new Ff(_t(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const M=(o?d:this.parentInjector).get(bi,null);M&&(s=M)}_t(u.componentType??{});const w=u.create(d,i,null,s);return this.insertImpl(w.hostView,a,false),w}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function jh(n){return _r(n[Xt])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[Xt],g=new xM(d,d[zn],d[Xt]);g.detach(g.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return Oz(a,i,o,!r),e.attachToViewContainerRef(),hf(Hw(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=NM(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=t_(this._lContainer,t);r&&(Il(Hw(this._lContainer),t),wE(r[De],r))}detach(e){const t=this._adjustIndex(e,-1),r=t_(this._lContainer,t);return r&&null!=Il(Hw(this._lContainer),t)?new Vf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function NM(n){return n[8]}function Hw(n){return n[8]||(n[8]=[])}let kM=function VM(n,e,t,r){if(n[qi])return;let i;i=8&t.type?xt(r):function qz(n,e){const t=n[Ze],r=t.createComment(""),i=or(e,n);return Vu(t,n_(t,i),r,function dB(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[qi]=i};const eA=new _e("Application Initializer");let tA=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=be(eA,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if($f(s))t.push(s);else if(qR(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ax=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const Do=new _e("LocaleId",{providedIn:"root",factory:()=>be(Do,ut.Optional|ut.SkipSelf)||function wq(){return typeof $localize<"u"&&$localize.locale||Yl}()});let j_=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new k(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class Cq{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let ux=(()=>{class n{compileModuleSync(t){return new Uw(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=wo(mr(t).declarations).reduce((o,a)=>{const u=_t(a);return u&&o.push(new Ff(u)),o},[]);return new Cq(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const hx=new _e(""),H_=new _e("");let oA,iA=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,oA||(function Wq(n){oA=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Lt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(me(Lt),me(sA),me(H_))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})(),sA=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return oA?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Ia=null;const fx=new _e("AllowMultipleToken"),aA=new _e("PlatformDestroyListeners"),uA=new _e("appBootstrapListener");class gx{constructor(e,t){this.name=e,this.token=t}}function _x(n,e,t=[]){const r=`Platform: ${e}`,i=new _e(r);return(s=[])=>{let o=cA();if(!o||o.injector.get(fx,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function Yq(n){if(Ia&&!Ia.get(fx,!1))throw new de(400,!1);(function px(){!function bI(n){Lh=n}(()=>{throw new de(600,!1)})})(),Ia=n;const e=n.get(vx);(function mx(n){n.get(yS,null)?.forEach(t=>t())})(n)}(function yx(n=[],e){return Ri.create({name:e,providers:[{provide:UE,useValue:"platform"},{provide:aA,useValue:new Set([()=>Ia=null])},...n]})}(a,r))}return function Zq(n){const e=cA();if(!e)throw new de(401,!1);return e}()}}function cA(){return Ia?.get(vx)??null}let vx=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function Xq(n="zone.js",e){return"noop"===n?new Dj:"zone.js"===n?new Lt(e):n}(r?.ngZone,function Ix(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function sz(n,e,t){return new Lw(n,e,t)}(t.moduleType,this.injector,function Cx(n){return[{provide:Lt,useFactory:n},{provide:Pf,multi:!0,useFactory:()=>{const e=be(tG,{optional:!0});return()=>e.initialize()}},{provide:Tx,useFactory:eG},{provide:VS,useFactory:FS}]}(()=>i)),o=s.injector.get(Eo,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{z_(this._modules,s),a.unsubscribe()})}),function Ex(n,e,t){try{const r=t();return $f(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(tA);return a.runInitializers(),a.donePromise.then(()=>(function HP(n){di(n,"Expected localeId to be defined"),"string"==typeof n&&($P=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Do,Yl)||Yl),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=wx({},r);return function Kq(n,e,t){const r=new Uw(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Xl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new de(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(aA,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(me(Ri))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function wx(n,e){return Array.isArray(e)?e.reduce(wx,n):{...n,...e}}let Xl=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=be(Tx),this.zoneIsStable=be(VS),this.componentTypes=[],this.components=[],this.isStable=be(j_).hasPendingTasks.pipe(Ce(t=>t?B(!1):this.zoneIsStable),Ht(),q()),this._injector=be(bi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof AS;if(!this._injector.get(tA).done)throw!i&&function As(n){const e=_t(n)||Vn(n)||Hn(n);return null!==e&&e.standalone}(t),new de(405,!1);let o;o=i?t:this._injector.get(__).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Qq(n){return n.isBoundToModule}(o)?void 0:this._injector.get(ju),d=o.create(Ri.NULL,[],r||o.selector,a),g=d.location.nativeElement,m=d.injector.get(hx,null);return m?.registerApplication(g),d.onDestroy(()=>{this.detachView(d.hostView),z_(this.components,d),m?.unregisterApplication(g)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;z_(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(uA,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>z_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new de(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function z_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Tx=new _e("",{providedIn:"root",factory:()=>be(Eo).handleError.bind(void 0)});function eG(){const n=be(Lt),e=be(Eo);return t=>n.runOutsideAngular(()=>e.handleError(t))}let tG=(()=>{class n{constructor(){this.zone=be(Lt),this.applicationRef=be(Xl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let q_=(()=>{class n{static{this.__NG_ELEMENT_ID__=rG}}return n})();function rG(n){return function iG(n,e,t){if(sa(n)&&!t){const r=ei(n.index,e);return new Vf(r,r)}return 47&n.type?new Vf(e[Cn],e):null}(er(),ue(),16==(16&n))}const mG=_x(null,"core",[]);let _G=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(me(Xl))}}static{this.\u0275mod=Jr({type:n})}static{this.\u0275inj=sr({})}}return n})();function ed(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let gA=null;function Ea(){return gA}class MG{}const xi=new _e("DocumentToken");let mA=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:function(){return be(NG)},providedIn:"platform"})}}return n})();const xG=new _e("Location Initialized");let NG=(()=>{class n extends mA{constructor(){super(),this._doc=be(xi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ea().getBaseHref(this._doc)}onPopState(t){const r=Ea().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Ea().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function _A(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function qx(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function bo(n){return n&&"?"!==n[0]?"?"+n:n}let Hu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:function(){return be(Wx)},providedIn:"root"})}}return n})();const Gx=new _e("appBaseHref");let Wx=(()=>{class n extends Hu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??be(xi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return _A(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+bo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+bo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+bo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(me(mA),me(Gx,8))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),OG=(()=>{class n extends Hu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=_A(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+bo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+bo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(me(mA),me(Gx,8))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})(),yA=(()=>{class n{constructor(t){this._subject=new Mn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function FG(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(qx(Kx(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+bo(r))}normalize(t){return n.stripTrailingSlash(function VG(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Kx(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+bo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=bo}static{this.joinWithSlash=_A}static{this.stripTrailingSlash=qx}static{this.\u0275fac=function(r){return new(r||n)(me(Hu))}}static{this.\u0275prov=Ve({token:n,factory:function(){return function kG(){return new yA(me(Hu))}()},providedIn:"root"})}}return n})();function Kx(n){return n.replace(/\/index.html$/,"")}function rN(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}let aN=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new C3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){uN("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){uN("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(pe(hs),pe(Co))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class C3{constructor(){this.$implicit=null,this.ngIf=null}}function uN(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${je(e)}'.`)}let Y3=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jr({type:n})}static{this.\u0275inj=sr({})}}return n})();function oy(n){return"server"===n}let e9=(()=>{class n{static{this.\u0275prov=Ve({token:n,providedIn:"root",factory:()=>new t9(me(xi),window)})}}return n})();class t9{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function n9(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class hN{}class C9 extends MG{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class kA extends C9{static makeCurrent(){!function PG(n){gA||(gA=n)}(new kA)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function D9(){return rp=rp||document.querySelector("base"),rp?rp.getAttribute("href"):null}();return null==t?null:function b9(n){cy=cy||document.createElement("a"),cy.setAttribute("href",n);const e=cy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rN(document.cookie,e)}}let cy,rp=null,R9=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();const VA=new _e("EventManagerPlugins");let _N=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new de(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(me(VA),me(Lt))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();class yN{constructor(e){this._doc=e}}const FA="ng-app-id";let vN=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=oy(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${FA}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(FA),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(FA,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(me(xi),me(d_),me(vS,8),me(Ps))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();const LA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},UA=/%COMP%/g,N9=new _e("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function EN(n,e){return e.map(t=>t.replace(UA,n))}let wN=(()=>{class n{constructor(t,r,i,s,o,a,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=oy(a),this.defaultRenderer=new BA(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===kn.ShadowDom&&(r={...r,encapsulation:kn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof TN?i.applyToHost(t):i instanceof jA&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case kn.Emulated:s=new TN(u,d,r,this.appId,g,o,a,m);break;case kn.ShadowDom:return new F9(u,d,t,r,o,a,this.nonce,m);default:s=new jA(u,d,r,g,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(me(_N),me(vN),me(d_),me(N9),me(xi),me(Ps),me(Lt),me(vS))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();class BA{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(LA[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(AN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(AN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new de(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=LA[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=LA[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ma.DashCase|ma.Important)?e.style.setProperty(t,r,i&ma.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ma.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Ea().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function AN(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class F9 extends BA{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=EN(i.id,i.styles);for(const g of d){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=g,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class jA extends BA{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?EN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class TN extends jA{constructor(e,t,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,t,r,s,o,a,u,d),this.contentAttr=function O9(n){return"_ngcontent-%COMP%".replace(UA,n)}(d),this.hostAttr=function k9(n){return"_nghost-%COMP%".replace(UA,n)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let L9=(()=>{class n extends yN{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(me(xi))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();const CN=["alt","control","meta","shift"],U9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},B9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let j9=(()=>{class n extends yN{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ea().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),CN.forEach(d=>{const g=r.indexOf(d);g>-1&&(r.splice(g,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=U9[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),CN.forEach(o=>{o!==i&&(0,B9[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(me(xi))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();const q9=_x(mG,"browser",[{provide:Ps,useValue:"browser"},{provide:yS,useValue:function $9(){kA.makeCurrent()},multi:!0},{provide:xi,useFactory:function z9(){return function vB(n){RE=n}(document),document},deps:[]}]),G9=new _e(""),SN=[{provide:H_,useClass:class S9{addToWindow(e){Ft.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new de(5103,!1);return s},Ft.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ft.getAllAngularRootElements=()=>e.getAllRootElements(),Ft.frameworkStabilizers||(Ft.frameworkStabilizers=[]),Ft.frameworkStabilizers.push(r=>{const i=Ft.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Ea().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:hx,useClass:iA,deps:[Lt,sA,H_]},{provide:iA,useClass:iA,deps:[Lt,sA,H_]}],RN=[{provide:UE,useValue:"root"},{provide:Eo,useFactory:function H9(){return new Eo},deps:[]},{provide:VA,useClass:L9,multi:!0,deps:[xi,Lt,Ps]},{provide:VA,useClass:j9,multi:!0,deps:[xi]},wN,vN,_N,{provide:CS,useExisting:wN},{provide:hN,useClass:R9,deps:[]},[]];let W9=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d_,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(me(G9,12))}}static{this.\u0275mod=Jr({type:n})}static{this.\u0275inj=sr({providers:[...RN,...SN],imports:[Y3,_G]})}}return n})(),PN=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(me(xi))}}static{this.\u0275prov=Ve({token:n,factory:function(r){let i=null;return i=r?new r:function Q9(){return new PN(me(xi))}(),i},providedIn:"root"})}}return n})();typeof window<"u"&&window;const{isArray:t6}=Array,{getPrototypeOf:n6,prototype:r6,keys:i6}=Object;function ON(n){if(1===n.length){const e=n[0];if(t6(e))return{args:e,keys:null};if(function s6(n){return n&&"object"==typeof n&&n6(n)===r6}(e)){const t=i6(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:o6}=Array;function kN(n){return Oe(e=>function a6(n,e){return o6(e)?n(...e):n(e)}(n,e))}function VN(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function HA(...n){const e=vs(n),t=Js(n),{args:r,keys:i}=ON(n);if(0===r.length)return S([],e);const s=new lt(function u6(n,e,t=qt){return r=>{FN(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)FN(e,()=>{const d=S(n[u],e);let g=!1;d.subscribe(fe(r,m=>{s[u]=m,g||(g=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>VN(i,o):qt));return t?s.pipe(kN(t)):s}function FN(n,e,t){n?bn(t,n,e):e()}const ly=qe(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function zA(...n){return function c6(){return Bi(1)}()(S(n,vs(n)))}function LN(n){return new lt(e=>{jn(n()).subscribe(e)})}function ip(n,e){const t=C(n)?n:()=>n,r=i=>i.error(t());return new lt(e?i=>e.schedule(r,0,i):r)}function qA(){return ne((n,e)=>{let t=null;n._refCount++;const r=fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class UN extends lt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ie(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Tt;const t=this.getSubject();e.add(this.source.subscribe(fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Tt.EMPTY)}return e}refCount(){return qA()(this)}}function nd(n){return n<=0?()=>wn:ne((e,t)=>{let r=0;e.subscribe(fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function dy(...n){const e=vs(n);return ne((t,r)=>{(e?zA(n,t,e):zA(n,t)).subscribe(r)})}function Xi(n,e){return ne((t,r)=>{let i=0;t.subscribe(fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function hy(n){return ne((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function BN(n=l6){return ne((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function l6(){return new ly}function Aa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xi((i,s)=>n(i,s,r)):qt,nd(1),t?hy(e):BN(()=>new ly))}function rd(n,e){return C(e)?En(n,e,1):En(n,1)}function Ir(n,e,t){const r=C(n)||e||t?{next:n,error:e,complete:t}:n;return r?ne((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(fe(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):qt}function zu(n){return ne((e,t)=>{let s,r=null,i=!1;r=e.subscribe(fe(t,void 0,void 0,o=>{s=jn(n(o,zu(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function fy(n,e){return ne(function d6(n,e,t,r,i){return(s,o)=>{let a=t,u=e,d=0;s.subscribe(fe(o,g=>{const m=d++;u=a?n(u,g,m):(a=!0,g),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function GA(n){return n<=0?()=>wn:ne((e,t)=>{let r=[];e.subscribe(fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function sp(n){return ne((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ot="primary",op=Symbol("RouteTitle");class g6{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function id(n){return new g6(n)}function m6(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Vs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!jN(n[i],e[i]))return!1;return!0}function jN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function $N(n){return n.length>0?n[n.length-1]:null}function Ta(n){return function e6(n){return!!n&&(n instanceof lt||C(n.lift)&&C(n.subscribe))}(n)?n:$f(n)?S(Promise.resolve(n)):B(n)}const y6={exact:function qN(n,e,t){if(!qu(n.segments,e.segments)||!py(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!qN(n.children[r],e.children[r],t))return!1;return!0},subset:GN},HN={exact:function v6(n,e){return Vs(n,e)},subset:function I6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>jN(n[t],e[t]))},ignored:()=>!0};function zN(n,e,t){return y6[t.paths](n.root,e.root,t.matrixParams)&&HN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function GN(n,e,t){return WN(n,e,e.segments,t)}function WN(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!qu(i,t)||e.hasChildren()||!py(i,t,r))}if(n.segments.length===t.length){if(!qu(n.segments,t)||!py(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!GN(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(qu(n.segments,i)&&py(n.segments,i,r)&&n.children[ot])&&WN(n.children[ot],e,s,r)}}function py(n,e,t){return e.every((r,i)=>HN[t](n[i].parameters,r.parameters))}class sd{constructor(e=new Bt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=id(this.queryParams)),this._queryParamMap}toString(){return A6.serialize(this)}}class Bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gy(this)}}class ap{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=id(this.parameters)),this._parameterMap}toString(){return YN(this)}}function qu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let up=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:function(){return new WA},providedIn:"root"})}}return n})();class WA{parse(e){const t=new O6(e);return new sd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${cp(e.root,!0)}`,r=function D6(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${my(t)}=${my(i)}`).join("&"):`${my(t)}=${my(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function T6(n){return encodeURI(n)}(e.fragment)}`:""}`}}const A6=new WA;function gy(n){return n.segments.map(e=>YN(e)).join("/")}function cp(n,e){if(!n.hasChildren())return gy(n);if(e){const t=n.children[ot]?cp(n.children[ot],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ot&&r.push(`${i}:${cp(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function w6(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ot&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ot&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===ot?[cp(n.children[ot],!1)]:[`${i}:${cp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ot]?`${gy(n)}/${t[0]}`:`${gy(n)}/(${t.join("//")})`}}function KN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function my(n){return KN(n).replace(/%3B/gi,";")}function KA(n){return KN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _y(n){return decodeURIComponent(n)}function QN(n){return _y(n.replace(/\+/g,"%20"))}function YN(n){return`${KA(n.path)}${function C6(n){return Object.keys(n).map(e=>`;${KA(e)}=${KA(n[e])}`).join("")}(n.parameters)}`}const b6=/^[^\/()?;#]+/;function QA(n){const e=n.match(b6);return e?e[0]:""}const S6=/^[^\/()?;=#]+/,P6=/^[^=?&#]+/,x6=/^[^&#]+/;class O6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ot]=new Bt(e,t)),r}parseSegment(){const e=QA(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(e),new ap(_y(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function R6(n){const e=n.match(S6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=QA(this.remaining);i&&(r=i,this.capture(r))}e[_y(t)]=_y(r)}parseQueryParam(e){const t=function M6(n){const e=n.match(P6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function N6(n){const e=n.match(x6);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=QN(t),s=QN(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=QA(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new de(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ot);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[ot]:new Bt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new de(4011,!1)}}function JN(n){return n.segments.length>0?new Bt([],{[ot]:n}):n}function ZN(n){const e={};for(const r of Object.keys(n.children)){const s=ZN(n.children[r]);if(r===ot&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function k6(n){if(1===n.numberOfChildren&&n.children[ot]){const e=n.children[ot];return new Bt(n.segments.concat(e.segments),e.children)}return n}(new Bt(n.segments,e))}function Gu(n){return n instanceof sd}function XN(n){let e;const i=JN(function t(s){const o={};for(const u of s.children){const d=t(u);o[u.outlet]=d}const a=new Bt(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function eO(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return YA(i,i,i,t,r);const s=function F6(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new nO(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new nO(t,e,r)}(e);if(s.toRoot())return YA(i,i,new Bt([],{}),t,r);const o=function L6(n,e,t){if(n.isAbsolute)return new vy(e,!0,0);if(!t)return new vy(e,!1,NaN);if(null===t.parent)return new vy(t,!0,0);const r=yy(n.commands[0])?0:1;return function U6(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new de(4005,!1);i=r.segments.length}return new vy(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?dp(o.segmentGroup,o.index,s.commands):rO(o.segmentGroup,o.index,s.commands);return YA(i,o.segmentGroup,a,t,r)}function yy(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function lp(n){return"object"==typeof n&&null!=n&&n.outlets}function YA(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(g=>`${g}`):`${d}`}),o=n===e?t:tO(n,e,t);const a=JN(ZN(o));return new sd(a,s,i)}function tO(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:tO(s,e,t)}),new Bt(n.segments,r)}class nO{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yy(r[0]))throw new de(4003,!1);const i=r.find(lp);if(i&&i!==$N(r))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function rO(n,e,t){if(n||(n=new Bt([],{})),0===n.segments.length&&n.hasChildren())return dp(n,e,t);const r=function j6(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(lp(a))break;const u=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!sO(u,d,o))return s;r+=2}else{if(!sO(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Bt(n.segments.slice(0,r.pathIndex),{});return s.children[ot]=new Bt(n.segments.slice(r.pathIndex),n.children),dp(s,0,i)}return r.match&&0===i.length?new Bt(n.segments,{}):r.match&&!n.hasChildren()?JA(n,e,t):r.match?dp(n,0,i):JA(n,e,t)}function dp(n,e,t){if(0===t.length)return new Bt(n.segments,{});{const r=function B6(n){return lp(n[0])?n[0].outlets:{[ot]:n}}(t),i={};if(Object.keys(r).some(s=>s!==ot)&&n.children[ot]&&1===n.numberOfChildren&&0===n.children[ot].segments.length){const s=dp(n.children[ot],e,t);return new Bt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=rO(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Bt(n.segments,i)}}function JA(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(lp(s)){const u=$6(s.outlets);return new Bt(r,u)}if(0===i&&yy(t[0])){r.push(new ap(n.segments[e].path,iO(t[0]))),i++;continue}const o=lp(s)?s.outlets[ot]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&yy(a)?(r.push(new ap(o,iO(a))),i+=2):(r.push(new ap(o,{})),i++)}return new Bt(r,{})}function $6(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=JA(new Bt([],{}),0,r))}),e}function iO(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function sO(n,e,t){return n==t.path&&Vs(e,t.parameters)}const hp="imperative";class Fs{constructor(e,t){this.id=e,this.url=t}}class Iy extends Fs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ca extends Fs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fp extends Fs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class od extends Fs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Ey extends Fs{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class oO extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H6 extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class z6 extends Fs{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class q6 extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G6 extends Fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W6{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class K6{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Q6{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Y6{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class J6{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z6{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aO{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ZA{}class XA{constructor(e){this.url=e}}class X6{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new pp,this.attachRef=null}}let pp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new X6,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class uO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=eT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=eT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=tT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return tT(e,this._root).map(t=>t.value)}}function eT(n,e){if(n===e.value)return e;for(const t of e.children){const r=eT(n,t);if(r)return r}return null}function tT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=tT(n,t);if(r.length)return r.unshift(e),r}return[]}class Po{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ad(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class cO extends uO{constructor(e,t){super(e),this.snapshot=t,nT(this,e)}toString(){return this.snapshot.toString()}}function lO(n,e){const t=function e5(n,e){const o=new wy([],{},{},"",{},ot,e,null,{});return new hO("",new Po(o,[]))}(0,e),r=new k([new ap("",{})]),i=new k({}),s=new k({}),o=new k({}),a=new k(""),u=new ud(r,i,o,a,s,ot,e,t.root);return u.snapshot=t.root,new cO(new Po(u,[]),t)}class ud{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Oe(d=>d[op]))??B(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Oe(e=>id(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Oe(e=>id(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function dO(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function t5(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class wy{get title(){return this.data?.[op]}constructor(e,t,r,i,s,o,a,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=id(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=id(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hO extends uO{constructor(e,t){super(t),this.url=e,nT(this,t)}toString(){return fO(this._root)}}function nT(n,e){e.value._routerState=n,e.children.forEach(t=>nT(n,t))}function fO(n){const e=n.children.length>0?` { ${n.children.map(fO).join(", ")} } `:"";return`${n.value}${e}`}function rT(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vs(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Vs(e.params,t.params)||n.paramsSubject.next(t.params),function _6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Vs(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function iT(n,e){const t=Vs(n.params,e.params)&&function E6(n,e){return qu(n,e)&&n.every((t,r)=>Vs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||iT(n.parent,e.parent))}let sT=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ot,this.activateEvents=new Mn,this.deactivateEvents=new Mn,this.attachEvents=new Mn,this.detachEvents=new Mn,this.parentContexts=be(pp),this.location=be(hs),this.changeDetector=be(q_),this.environmentInjector=be(bi),this.inputBinder=be(Ay,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new n5(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[pi]})}}return n})();class n5{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ud?this.route:e===pp?this.childContexts:this.parent.get(e,t)}}const Ay=new _e("");let pO=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=HA([r.queryParams,r.params,r.data]).pipe(Ce(([s,o,a],u)=>(a={...s,...o,...a},0===u?B(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function RG(n){const e=_t(n);if(!e)return null;const t=new Ff(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();function gp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function i5(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return gp(n,r,i);return gp(n,r)})}(n,e,t);return new Po(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>gp(n,a)),o}}const r=function s5(n){return new ud(new k(n.url),new k(n.params),new k(n.queryParams),new k(n.fragment),new k(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>gp(n,s));return new Po(r,i)}}const oT="ngNavigationCancelingError";function gO(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Gu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mO(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function mO(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[oT]=!0,r.cancellationCode=e,t&&(r.url=t),r}function _O(n){return n&&n[oT]}let yO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ai({type:n,selectors:[["ng-component"]],standalone:!0,features:[mM],decls:1,vars:0,template:function(r,i){1&r&&cr(0,"router-outlet")},dependencies:[sT],encapsulation:2})}}return n})();function aT(n){const e=n.children&&n.children.map(aT),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ot&&(t.component=yO),t}function gs(n){return n.outlet||ot}function mp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class f5{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rT(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ad(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ad(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ad(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=ad(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Z6(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Y6(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(rT(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),rT(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=mp(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class vO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ty{constructor(e,t){this.component=e,this.route=t}}function p5(n,e,t){const r=n._root;return _p(r,e?e._root:null,t,[r.value])}function cd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function _I(n){return null!==bc(n)}(n)?e.get(n):n:r}function _p(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=ad(e);return n.children.forEach(o=>{(function m5(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function _5(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!qu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qu(n.url,e.url)||!Vs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!iT(n,e)||!Vs(n.queryParams,e.queryParams);default:return!iT(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new vO(r)):(s.data=o.data,s._resolvedData=o._resolvedData),_p(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ty(a.outlet.component,o))}else o&&yp(e,a,i),i.canActivateChecks.push(new vO(r)),_p(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>yp(a,t.getContext(o),i)),i}function yp(n,e,t){const r=ad(n),i=n.value;Object.entries(r).forEach(([s,o])=>{yp(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Ty(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function vp(n){return"function"==typeof n}function IO(n){return n instanceof ly||"EmptyError"===n?.name}const Cy=Symbol("INITIAL_VALUE");function ld(){return Ce(n=>HA(n.map(e=>e.pipe(nd(1),dy(Cy)))).pipe(Oe(e=>{for(const t of e)if(!0!==t){if(t===Cy)return Cy;if(!1===t||t instanceof sd)return t}return!0}),Xi(e=>e!==Cy),nd(1)))}function EO(n){return function Cr(...n){return ci(n)}(Ir(e=>{if(Gu(e))throw gO(0,e)}),Oe(e=>!0===e))}class Dy{constructor(e){this.segmentGroup=e||null}}class wO{constructor(e){this.urlTree=e}}function dd(n){return ip(new Dy(n))}function AO(n){return ip(new wO(n))}class F5{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new de(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return B(r);if(i.numberOfChildren>1||!i.children[ot])return ip(new de(4e3,!1));i=i.children[ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new sd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Bt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new de(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const uT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function L5(n,e,t,r,i){const s=cT(n,e,t);return s.matched?(r=function a5(n,e){return n.providers&&!n._injector&&(n._injector=Bw(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function O5(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?B(i.map(o=>{const a=cd(o,n);return Ta(function A5(n){return n&&vp(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(ld(),EO()):B(!0)}(r,e,t).pipe(Oe(o=>!0===o?s:{...uT}))):B(s)}function cT(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...uT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||m6)(t,n,e);if(!i)return{...uT};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function TO(n,e,t,r){return t.length>0&&function j5(n,e,t){return t.some(r=>by(n,e,r)&&gs(r)!==ot)}(n,t,r)?{segmentGroup:new Bt(e,B5(r,new Bt(t,n.children))),slicedSegments:[]}:0===t.length&&function $5(n,e,t){return t.some(r=>by(n,e,r))}(n,t,r)?{segmentGroup:new Bt(n.segments,U5(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Bt(n.segments,n.children),slicedSegments:t}}function U5(n,e,t,r,i){const s={};for(const o of r)if(by(n,t,o)&&!i[gs(o)]){const a=new Bt([],{});s[gs(o)]=a}return{...i,...s}}function B5(n,e){const t={};t[ot]=e;for(const r of n)if(""===r.path&&gs(r)!==ot){const i=new Bt([],{});t[gs(r)]=i}return t}function by(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class G5{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new F5(this.urlSerializer,this.urlTree)}noMatchError(e){return new de(4002,!1)}recognize(){const e=TO(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ot).pipe(zu(t=>{if(t instanceof wO)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Dy?this.noMatchError(t):t}),Oe(t=>{const r=new wy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ot,this.rootComponentType,null,{}),i=new Po(r,t),s=new hO("",i),o=function V6(n,e,t=null,r=null){return eO(XN(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,ot).pipe(zu(r=>{throw r instanceof Dy?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=dO(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return S(i).pipe(rd(s=>{const o=r.children[s],a=function d5(n,e){const t=n.filter(r=>gs(r)===e);return t.push(...n.filter(r=>gs(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),fy((s,o)=>(s.push(...o),s)),hy(null),function h6(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xi((i,s)=>n(i,s,r)):qt,GA(1),t?hy(e):BN(()=>new ly))}(),En(s=>{if(null===s)return dd(r);const o=CO(s);return function W5(n){n.sort((e,t)=>e.value.outlet===ot?-1:t.value.outlet===ot?1:e.value.outlet.localeCompare(t.value.outlet))}(o),B(o)}))}processSegment(e,t,r,i,s,o){return S(t).pipe(rd(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(zu(u=>{if(u instanceof Dy)return B(null);throw u}))),Aa(a=>!!a),zu(a=>{if(IO(a))return function z5(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?B([]):dd(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function H5(n,e,t,r){return!!(gs(n)===r||r!==ot&&by(e,t,n))&&("**"===n.path||cT(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):dd(i):dd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?AO(s):this.applyRedirects.lineralizeSegments(r,s).pipe(En(o=>{const a=new Bt(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:g}=cT(t,i,s);if(!a)return dd(t);const m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,g);return i.redirectTo.startsWith("/")?AO(m):this.applyRedirects.lineralizeSegments(i,m).pipe(En(v=>this.processSegment(e,r,t,v.concat(d),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?$N(i).parameters:{};a=B({snapshot:new wy(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,DO(r),gs(r),r.component??r._loadedComponent??null,r,bO(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=L5(t,r,i,e).pipe(Oe(({matched:u,consumedSegments:d,remainingSegments:g,parameters:m})=>u?{snapshot:new wy(d,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,DO(r),gs(r),r.component??r._loadedComponent??null,r,bO(r)),consumedSegments:d,remainingSegments:g}:null));return a.pipe(Ce(u=>null===u?dd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Ce(({routes:d})=>{const g=r._loadedInjector??e,{snapshot:m,consumedSegments:v,remainingSegments:w}=u,{segmentGroup:T,slicedSegments:D}=TO(t,v,w,d);if(0===D.length&&T.hasChildren())return this.processChildren(g,d,T).pipe(Oe(z=>null===z?null:[new Po(m,z)]));if(0===d.length&&0===D.length)return B([new Po(m,[])]);const M=gs(r)===s;return this.processSegment(g,d,T,D,M?ot:s,!0).pipe(Oe(z=>[new Po(m,z)]))}))))}getChildConfig(e,t,r){return t.children?B({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?B({routes:t._loadedRoutes,injector:t._loadedInjector}):function N5(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?B(!0):B(i.map(o=>{const a=cd(o,n);return Ta(function v5(n){return n&&vp(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(ld(),EO())}(e,t,r).pipe(En(i=>i?this.configLoader.loadChildren(e,t).pipe(Ir(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function V5(n){return ip(mO(!1,3))}())):B({routes:[],injector:e})}}function K5(n){const e=n.value.routeConfig;return e&&""===e.path}function CO(n){const e=[],t=new Set;for(const r of n){if(!K5(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=CO(r.children);e.push(new Po(r.value,i))}return e.filter(r=>!t.has(r))}function DO(n){return n.data||{}}function bO(n){return n.resolve||{}}function SO(n){return"string"==typeof n.title||null===n.title}function lT(n){return Ce(e=>{const t=n(e);return t?S(t).pipe(Oe(()=>e)):B(e)})}const hd=new _e("ROUTES");let dT=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=be(ux)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return B(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ta(t.loadComponent()).pipe(Oe(RO),Ir(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),sp(()=>{this.componentLoaders.delete(t)})),i=new UN(r,()=>new te).pipe(qA());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return B({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function tW(n,e,t,r){return Ta(n.loadChildren()).pipe(Oe(RO),En(i=>i instanceof pM||Array.isArray(i)?B(i):S(e.compileModuleAsync(i))),Oe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(hd,[],{optional:!0,self:!0}).flat()),{routes:o.map(aT),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(sp(()=>{this.childrenLoaders.delete(r)})),o=new UN(s,()=>new te).pipe(qA());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RO(n){return function nW(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Sy=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new te,this.transitionAbortSubject=new te,this.configLoader=be(dT),this.environmentInjector=be(bi),this.urlSerializer=be(up),this.rootContexts=be(pp),this.inputBindingEnabled=null!==be(Ay,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>B(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new K6(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new W6(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new k({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:hp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xi(s=>0!==s.id),Oe(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Ce(s=>{this.currentTransition=s;let o=!1,a=!1;return B(s).pipe(Ir(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ce(u=>{const d=u.currentBrowserUrl.toString(),g=!t.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!g&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const v="";return this.events.next(new od(u.id,this.urlSerializer.serialize(u.rawUrl),v,0)),u.resolve(null),wn}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return B(u).pipe(Ce(v=>{const w=this.transitions?.getValue();return this.events.next(new Iy(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),w!==this.transitions?.getValue()?wn:Promise.resolve(v)}),function Q5(n,e,t,r,i,s){return En(o=>function q5(n,e,t,r,i,s,o="emptyOnly"){return new G5(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Oe(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Ir(v=>{s.targetSnapshot=v.targetSnapshot,s.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:v.urlAfterRedirects};const w=new oO(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(w)}));if(g&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:v,extractedUrl:w,source:T,restoredState:D,extras:M}=u,z=new Iy(v,this.urlSerializer.serialize(w),T,D);this.events.next(z);const F=lO(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:F,urlAfterRedirects:w,extras:{...M,skipLocationChange:!1,replaceUrl:!1}},B(s)}{const v="";return this.events.next(new od(u.id,this.urlSerializer.serialize(u.extractedUrl),v,1)),u.resolve(null),wn}}),Ir(u=>{const d=new H6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Oe(u=>(this.currentTransition=s={...u,guards:p5(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function C5(n,e){return En(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?B({...t,guardsResult:!0}):function D5(n,e,t,r){return S(n).pipe(En(i=>function x5(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?B(s.map(a=>{const u=mp(e)??i,d=cd(a,u);return Ta(function w5(n){return n&&vp(n.canDeactivate)}(d)?d.canDeactivate(n,e,t,r):u.runInContext(()=>d(n,e,t,r))).pipe(Aa())})).pipe(ld()):B(!0)}(i.component,i.route,t,e,r)),Aa(i=>!0!==i,!0))}(o,r,i,n).pipe(En(a=>a&&function y5(n){return"boolean"==typeof n}(a)?function b5(n,e,t,r){return S(e).pipe(rd(i=>zA(function R5(n,e){return null!==n&&e&&e(new Q6(n)),B(!0)}(i.route.parent,r),function S5(n,e){return null!==n&&e&&e(new J6(n)),B(!0)}(i.route,r),function M5(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function g5(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>LN(()=>B(o.guards.map(u=>{const d=mp(o.node)??t,g=cd(u,d);return Ta(function E5(n){return n&&vp(n.canActivateChild)}(g)?g.canActivateChild(r,n):d.runInContext(()=>g(r,n))).pipe(Aa())})).pipe(ld())));return B(s).pipe(ld())}(n,i.path,t),function P5(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return B(!0);const i=r.map(s=>LN(()=>{const o=mp(e)??t,a=cd(s,o);return Ta(function I5(n){return n&&vp(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Aa())}));return B(i).pipe(ld())}(n,i.route,t))),Aa(i=>!0!==i,!0))}(r,s,n,e):B(a)),Oe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Ir(u=>{if(s.guardsResult=u.guardsResult,Gu(u.guardsResult))throw gO(0,u.guardsResult);const d=new z6(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),Xi(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),lT(u=>{if(u.guards.canActivateChecks.length)return B(u).pipe(Ir(d=>{const g=new q6(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}),Ce(d=>{let g=!1;return B(d).pipe(function Y5(n,e){return En(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return B(t);let s=0;return S(i).pipe(rd(o=>function J5(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!SO(i)&&(s[op]=i.title),function Z5(n,e,t,r){const i=function X5(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return B({});const s={};return S(i).pipe(En(o=>function eW(n,e,t,r){const i=mp(e)??r,s=cd(n,i);return Ta(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Aa(),Ir(a=>{s[o]=a}))),GA(1),function f6(n){return Oe(()=>n)}(s),zu(o=>IO(o)?wn:ip(o)))}(s,n,e,r).pipe(Oe(o=>(n._resolvedData=o,n.data=dO(n,t).resolve,i&&SO(i)&&(n.data[op]=i.title),null)))}(o.route,r,n,e)),Ir(()=>s++),GA(1),En(o=>s===i.length?B(t):wn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Ir({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(d,"",2)}}))}),Ir(d=>{const g=new G6(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}))}),lT(u=>{const d=g=>{const m=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(g.routeConfig).pipe(Ir(v=>{g.component=v}),Oe(()=>{})));for(const v of g.children)m.push(...d(v));return m};return HA(d(u.targetSnapshot.root)).pipe(hy(),nd(1))}),lT(()=>this.afterPreactivation()),Oe(u=>{const d=function r5(n,e,t){const r=gp(n,e._root,t?t._root:void 0);return new cO(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:d},s}),Ir(()=>{this.events.next(new ZA)}),((n,e,t,r)=>Oe(i=>(new f5(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),nd(1),Ir({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ca(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function p6(n){return ne((e,t)=>{jn(n).subscribe(fe(t,()=>t.complete(),Ne)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Ir(u=>{throw u}))),sp(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),zu(u=>{if(a=!0,_O(u))this.events.next(new fp(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function o5(n){return _O(n)&&Gu(n.url)}(u)?this.events.next(new XA(u.url)):s.resolve(!1);else{this.events.next(new Ey(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(d){s.reject(d)}}return wn}))}))}cancelNavigationTransition(t,r,i){const s=new fp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function PO(n){return n!==hp}let MO=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ot);return r}getResolvedTitleForRoute(t){return t.data[op]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:function(){return be(rW)},providedIn:"root"})}}return n})(),rW=(()=>{class n extends MO{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(me(PN))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:function(){return be(oW)},providedIn:"root"})}}return n})();class sW{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let oW=(()=>{class n extends sW{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Fn(n)))(i||n)}}()}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Ry=new _e("",{providedIn:"root",factory:()=>({})});let aW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:function(){return be(uW)},providedIn:"root"})}}return n})(),uW=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ip=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ip||{});function xO(n,e){n.events.pipe(Xi(t=>t instanceof Ca||t instanceof fp||t instanceof Ey||t instanceof od),Oe(t=>t instanceof Ca||t instanceof od?Ip.COMPLETE:t instanceof fp&&(0===t.code||1===t.code)?Ip.REDIRECTING:Ip.FAILED),Xi(t=>t!==Ip.REDIRECTING),nd(1)).subscribe(()=>{e()})}function cW(n){throw n}function lW(n,e,t){return e.parse("/")}const dW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let es=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=be(ax),this.isNgZoneEnabled=!1,this._events=new te,this.options=be(Ry,{optional:!0})||{},this.pendingTasks=be(j_),this.errorHandler=this.options.errorHandler||cW,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||lW,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=be(aW),this.routeReuseStrategy=be(iW),this.titleStrategy=be(MO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=be(hd,{optional:!0})?.flat()??[],this.navigationTransitions=be(Sy),this.urlSerializer=be(up),this.location=be(yA),this.componentInputBindingEnabled=!!be(Ay,{optional:!0}),this.eventsSubscription=new Tt,this.isNgZoneEnabled=be(Lt)instanceof Lt&&Lt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new sd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=lO(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(NO(r)&&this._events.next(r));if(r instanceof Iy)PO(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof od)this.rawUrlTree=i.rawUrl;else if(r instanceof oO){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof ZA)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof fp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof XA){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||PO(i.source)};this.scheduleNavigation(s,hp,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Ey&&this.restoreHistory(i,!0),r instanceof Ca&&(this.navigated=!0),NO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),hp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(aT),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let m,g=null;switch(a){case"merge":g={...this.currentUrlTree.queryParams,...s};break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=s||null}null!==g&&(g=this.removeEmptyProps(g));try{m=XN(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return eO(m,t,g,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Gu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,hp,null,r)}navigate(t,r={skipLocationChange:!1}){return function fW(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new de(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...dW}:!1===r?{...hW}:r,Gu(t))return zN(this.currentUrlTree,t,i);const s=this.parseUrl(t);return zN(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((m,v)=>{a=m,u=v});const g=this.pendingTasks.add();return xO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function NO(n){return!(n instanceof ZA||n instanceof XA)}let Py=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new te,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof Ca&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function lS(n,e,t){return function jB(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?cS:uS}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(pe(es),pe(ud),function vl(n){return function iE(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Fc(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(er(),n)}("tabindex"),pe(Io),pe(Si),pe(Hu))}}static{this.\u0275dir=Ke({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Mi("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Ns("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",ed],skipLocationChange:["skipLocationChange","skipLocationChange",ed],replaceUrl:["replaceUrl","replaceUrl",ed],routerLink:"routerLink"},standalone:!0,features:[TR,pi]})}}return n})();class OO{}let mW=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Xi(t=>t instanceof Ca),rd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Bw(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return S(i).pipe(Bi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):B(null);const s=i.pipe(En(o=>null===o?B(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?S([s,this.loader.loadComponent(r)]).pipe(Bi()):s})}static{this.\u0275fac=function(r){return new(r||n)(me(es),me(ux),me(bi),me(OO),me(dT))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const hT=new _e("");let kO=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Iy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ca?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof od&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof aO&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new aO(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function JS(){throw new Error("invalid")}()}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();function Mo(n,e){return{\u0275kind:n,\u0275providers:e}}function FO(){const n=be(Ri);return e=>{const t=n.get(Xl);if(e!==t.components[0])return;const r=n.get(es),i=n.get(LO);1===n.get(fT)&&r.initialNavigation(),n.get(UO,null,ut.Optional)?.setUpPreloading(),n.get(hT,null,ut.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const LO=new _e("",{factory:()=>new te}),fT=new _e("",{providedIn:"root",factory:()=>1}),UO=new _e("");function IW(n){return Mo(0,[{provide:UO,useExisting:mW},{provide:OO,useExisting:n}])}const BO=new _e("ROUTER_FORROOT_GUARD"),wW=[yA,{provide:up,useClass:WA},es,pp,{provide:ud,useFactory:function VO(n){return n.routerState.root},deps:[es]},dT,[]];function AW(){return new gx("Router",es)}let pT=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[wW,[],{provide:hd,multi:!0,useValue:t},{provide:BO,useFactory:bW,deps:[[es,new ku,new wl]]},{provide:Ry,useValue:r||{}},r?.useHash?{provide:Hu,useClass:OG}:{provide:Hu,useClass:Wx},{provide:hT,useFactory:()=>{const n=be(e9),e=be(Lt),t=be(Ry),r=be(Sy),i=be(up);return t.scrollOffset&&n.setOffset(t.scrollOffset),new kO(i,r,n,e,t)}},r?.preloadingStrategy?IW(r.preloadingStrategy).\u0275providers:[],{provide:gx,multi:!0,useFactory:AW},r?.initialNavigation?SW(r):[],r?.bindToComponentInputs?Mo(8,[pO,{provide:Ay,useExisting:pO}]).\u0275providers:[],[{provide:jO,useFactory:FO},{provide:uA,multi:!0,useExisting:jO}]]}}static forChild(t){return{ngModule:n,providers:[{provide:hd,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(me(BO,8))}}static{this.\u0275mod=Jr({type:n})}static{this.\u0275inj=sr({})}}return n})();function bW(n){return"guarded"}function SW(n){return["disabled"===n.initialNavigation?Mo(3,[{provide:eA,multi:!0,useFactory:()=>{const e=be(es);return()=>{e.setUpLocationChangeListener()}}},{provide:fT,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Mo(2,[{provide:fT,useValue:0},{provide:eA,multi:!0,deps:[Ri],useFactory:e=>{const t=e.get(xG,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(es),s=e.get(LO);xO(i,()=>{r(!0)}),e.get(Sy).afterPreactivation=()=>(r(!0),s.closed?B(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const jO=new _e(""),PW=[];let MW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jr({type:n})}static{this.\u0275inj=sr({imports:[pT.forRoot(PW),pT]})}}return n})(),xW=(()=>{class n{constructor(){this.title="wedding-app"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ai({type:n,selectors:[["app-root"]],decls:26,vars:6,consts:[[1,"grid-container"],[1,"grid-item1"],[1,"avatar-container"],[1,"circular-frame"],["src","assets/images/ratio1-1/picture3-1_1.jpg"],[3,"routerLink"],[1,"grid-item2"]],template:function(r,i){1&r&&(Qe(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),cr(4,"img",4),st()(),Qe(5,"ul")(6,"li")(7,"a",5),yt(8,"HOME"),st()(),Qe(9,"li")(10,"a",5),yt(11,"ABOUT"),st()(),Qe(12,"li")(13,"a",5),yt(14,"SCHEDULE"),st()(),Qe(15,"li")(16,"a",5),yt(17,"REGISTRY"),st()(),Qe(18,"li")(19,"a",5),yt(20,"CONTACT"),st()(),Qe(21,"li")(22,"a",5),yt(23,"RSVP"),st()()()(),Qe(24,"div",6),cr(25,"router-outlet"),st()()),2&r&&(ya(7),To("routerLink","Home"),ya(3),To("routerLink","About"),ya(3),To("routerLink","Schedule"),ya(3),To("routerLink","Registry"),ya(3),To("routerLink","Contact"),ya(3),To("routerLink","Rsvp"))},dependencies:[sT,Py],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:16% auto}.grid-item1[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;font-family:Lora,cursive;background-color:#96a498;color:#fff;min-height:100vh}.grid-item2[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;background-color:#fcfbf4;font-family:Lora,cursive}.avatar-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.circular-frame[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:20px;width:180px;height:180px;border-radius:50%;overflow:hidden}.circular-frame[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:26px;list-style-type:none;margin-top:1em}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:inherit;text-decoration:none}@media (max-width: 1200px){.circular-frame[_ngcontent-%COMP%]{width:140px;height:140px}ul[_ngcontent-%COMP%]{padding-left:2em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 1000px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:18% auto}.circular-frame[_ngcontent-%COMP%]{width:120px;height:120px}ul[_ngcontent-%COMP%]{padding-left:1.5em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 800px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:22% auto}.circular-frame[_ngcontent-%COMP%]{width:110px;height:110px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 600px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:25% auto}.circular-frame[_ngcontent-%COMP%]{width:90px;height:90px}ul[_ngcontent-%COMP%]{padding-left:1em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 450px){.circular-frame[_ngcontent-%COMP%]{width:80px;height:80px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 450px){.circular-frame[_ngcontent-%COMP%]{width:70px;height:70px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px}}"]})}}return n})();var fd=nt(979);(0,fd.registerVersion)("firebase","10.14.1","app");class kW extends Tt{constructor(e,t){super()}schedule(e,t=0){return this}}const My={setInterval(n,e,...t){const{delegate:r}=My;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=My;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class $O extends kW{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return My.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&My.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ee(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const gT={now:()=>(gT.delegate||Date).now(),delegate:void 0};class Ep{constructor(e,t=Ep.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Ep.now=gT.now;class HO extends Ep{constructor(e,t=Ep.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const LW=new class FW extends HO{}(class VW extends $O{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),zO=new HO($O),mT=new kl("ANGULARFIRE2_VERSION");class qO{constructor(){return((n,e)=>{const t=(0,fd.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(BW)}}const BW="app-check";function pd(){}class GO{zone;delegate;constructor(e,t=LW){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class jW{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pd,{},pd,pd)),t.pipe(Ir({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let WO=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new GO(Zone.current)),this.insideAngular=t.run(()=>new GO(Zone.current,zO)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(me(Lt))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Oi(n){return function HW(n){return function(t){return(t=t.lift(new jW(n.ngZone))).pipe(Pr(n.outsideAngular),Wr(n.insideAngular))}}(function gd(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Da=nt(574);Da.A.registerVersion("firebase","10.14.1","app-compat");const WW=["ngOnDestroy"];class KO{constructor(e){return e}}const xy=new _e("angularfire2.app.options"),Ny=new _e("angularfire2.app.name");function _T(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Da.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Da.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;YW("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new KO(o)}const YW=(n,...e)=>{},JW={provide:KO,useFactory:_T,deps:[xy,Lt,[new ku,Ny]]};let ZW=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:xy,useValue:t},{provide:Ny,useValue:r}]}}constructor(t){Da.A.registerVersion("angularfire",mT.full,"core"),Da.A.registerVersion("angularfire",mT.full,"app-compat"),Da.A.registerVersion("angular",DS.full,t.toString())}static \u0275fac=function(r){return new(r||n)(me(Ps))};static \u0275mod=Jr({type:n});static \u0275inj=sr({providers:[JW]})}return n})();function QO(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function XW(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(YO("error",`${e} was already initialized on the ${t} Firebase App with different settings.${e8?" You may need to reload as Firebase is not HMR aware.":""}`),YO("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const e8=typeof module<"u"&&!!module.hot,YO=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],nt(324);class t8 extends te{constructor(e=1/0,t=1/0,r=gT){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function JO(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,q({connector:()=>new t8(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ZO(n,e){return C(e)?Ce(()=>n,e):Ce(()=>n)}const XO=new _e("angularfire2.auth.use-emulator"),e1=new _e("angularfire2.auth.settings"),t1=new _e("angularfire2.auth.tenant-id"),n1=new _e("angularfire2.auth.langugage-code"),r1=new _e("angularfire2.auth.use-device-language"),i1=new _e("angularfire.auth.persistence"),s1=(n,e,t,r,i,s,o,a)=>QO(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,g]of Object.entries(o))u.settings[d]=g;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let o1=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,d,g,m,v,w){const T=new te,D=B(void 0).pipe(Wr(o.outsideAngular),Ce(()=>s.runOutsideAngular(()=>Promise.resolve().then(nt.bind(nt,324)))),Oe(()=>_T(t,s,r)),Oe(M=>s1(M,s,a,d,g,m,u,v)),JO({bufferSize:1,refCount:!1}));if(oy(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=B(null);else{D.pipe(Aa()).subscribe();const M=D.pipe(Ce(G=>G.getRedirectResult().then(ae=>ae,()=>null)),Oi,JO({bufferSize:1,refCount:!1})),z=D.pipe(Ce(G=>new lt(ae=>({unsubscribe:s.runOutsideAngular(()=>G.onAuthStateChanged(ye=>ae.next(ye),ye=>ae.error(ye),()=>ae.complete()))})))),F=D.pipe(Ce(G=>new lt(ae=>({unsubscribe:s.runOutsideAngular(()=>G.onIdTokenChanged(ye=>ae.next(ye),ye=>ae.error(ye),()=>ae.complete()))}))));this.authState=M.pipe(ZO(z),Pr(o.outsideAngular),Wr(o.insideAngular)),this.user=M.pipe(ZO(F),Pr(o.outsideAngular),Wr(o.insideAngular)),this.idToken=this.user.pipe(Ce(G=>G?S(G.getIdToken()):B(null))),this.idTokenResult=this.user.pipe(Ce(G=>G?S(G.getIdTokenResult()):B(null))),this.credential=P(M,T,this.authState.pipe(Xi(G=>!G))).pipe(Oe(G=>G?.user?G:null),Pr(o.outsideAngular),Wr(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(WW.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>t.run(()=>d)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(g=>{const m=g?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,m),m})})})}))(this,D,s,{spy:{apply:(M,z,F)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&F.then(G=>T.next(G))}}})}static \u0275fac=function(r){return new(r||n)(me(xy),me(Ny,8),me(Ps),me(Lt),me(WO),me(XO,8),me(e1,8),me(t1,8),me(n1,8),me(r1,8),me(i1,8),me(qO,8))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function yT(){return ne((n,e)=>{let t,r=!1;n.subscribe(fe(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Ku,l1,ie=nt(467),a1=nt(779),Ls=nt(398),kt=nt(401),u1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c1={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(V,b,O){O||(O=0);var L=Array(16);if("string"==typeof b)for(var j=0;16>j;++j)L[j]=b.charCodeAt(O++)|b.charCodeAt(O++)<<8|b.charCodeAt(O++)<<16|b.charCodeAt(O++)<<24;else for(j=0;16>j;++j)L[j]=b[O++]|b[O++]<<8|b[O++]<<16|b[O++]<<24;var W=V.g[3],N=(b=V.g[0])+(W^(O=V.g[1])&((j=V.g[2])^W))+L[0]+3614090360&4294967295;N=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=O+(N<<7&4294967295|N>>>25))+((N=W+(j^b&(O^j))+L[1]+3905402710&4294967295)<<12&4294967295|N>>>20))+((N=j+(O^W&(b^O))+L[2]+606105819&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^j&(W^b))+L[3]+3250441966&4294967295)<<22&4294967295|N>>>10))+((N=b+(W^O&(j^W))+L[4]+4118548399&4294967295)<<7&4294967295|N>>>25))+((N=W+(j^b&(O^j))+L[5]+1200080426&4294967295)<<12&4294967295|N>>>20))+((N=j+(O^W&(b^O))+L[6]+2821735955&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^j&(W^b))+L[7]+4249261313&4294967295)<<22&4294967295|N>>>10))+((N=b+(W^O&(j^W))+L[8]+1770035416&4294967295)<<7&4294967295|N>>>25))+((N=W+(j^b&(O^j))+L[9]+2336552879&4294967295)<<12&4294967295|N>>>20))+((N=j+(O^W&(b^O))+L[10]+4294925233&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^j&(W^b))+L[11]+2304563134&4294967295)<<22&4294967295|N>>>10))+((N=b+(W^O&(j^W))+L[12]+1804603682&4294967295)<<7&4294967295|N>>>25))+((N=W+(j^b&(O^j))+L[13]+4254626195&4294967295)<<12&4294967295|N>>>20))+((N=j+(O^W&(b^O))+L[14]+2792965006&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^j&(W^b))+L[15]+1236535329&4294967295)<<22&4294967295|N>>>10))+((N=b+(j^W&(O^j))+L[1]+4129170786&4294967295)<<5&4294967295|N>>>27))+((N=W+(O^j&(b^O))+L[6]+3225465664&4294967295)<<9&4294967295|N>>>23))+((N=j+(b^O&(W^b))+L[11]+643717713&4294967295)<<14&4294967295|N>>>18))+((N=O+(W^b&(j^W))+L[0]+3921069994&4294967295)<<20&4294967295|N>>>12))+((N=b+(j^W&(O^j))+L[5]+3593408605&4294967295)<<5&4294967295|N>>>27))+((N=W+(O^j&(b^O))+L[10]+38016083&4294967295)<<9&4294967295|N>>>23))+((N=j+(b^O&(W^b))+L[15]+3634488961&4294967295)<<14&4294967295|N>>>18))+((N=O+(W^b&(j^W))+L[4]+3889429448&4294967295)<<20&4294967295|N>>>12))+((N=b+(j^W&(O^j))+L[9]+568446438&4294967295)<<5&4294967295|N>>>27))+((N=W+(O^j&(b^O))+L[14]+3275163606&4294967295)<<9&4294967295|N>>>23))+((N=j+(b^O&(W^b))+L[3]+4107603335&4294967295)<<14&4294967295|N>>>18))+((N=O+(W^b&(j^W))+L[8]+1163531501&4294967295)<<20&4294967295|N>>>12))+((N=b+(j^W&(O^j))+L[13]+2850285829&4294967295)<<5&4294967295|N>>>27))+((N=W+(O^j&(b^O))+L[2]+4243563512&4294967295)<<9&4294967295|N>>>23))+((N=j+(b^O&(W^b))+L[7]+1735328473&4294967295)<<14&4294967295|N>>>18))+((N=O+(W^b&(j^W))+L[12]+2368359562&4294967295)<<20&4294967295|N>>>12))+((N=b+(O^j^W)+L[5]+4294588738&4294967295)<<4&4294967295|N>>>28))+((N=W+(b^O^j)+L[8]+2272392833&4294967295)<<11&4294967295|N>>>21))+((N=j+(W^b^O)+L[11]+1839030562&4294967295)<<16&4294967295|N>>>16))+((N=O+(j^W^b)+L[14]+4259657740&4294967295)<<23&4294967295|N>>>9))+((N=b+(O^j^W)+L[1]+2763975236&4294967295)<<4&4294967295|N>>>28))+((N=W+(b^O^j)+L[4]+1272893353&4294967295)<<11&4294967295|N>>>21))+((N=j+(W^b^O)+L[7]+4139469664&4294967295)<<16&4294967295|N>>>16))+((N=O+(j^W^b)+L[10]+3200236656&4294967295)<<23&4294967295|N>>>9))+((N=b+(O^j^W)+L[13]+681279174&4294967295)<<4&4294967295|N>>>28))+((N=W+(b^O^j)+L[0]+3936430074&4294967295)<<11&4294967295|N>>>21))+((N=j+(W^b^O)+L[3]+3572445317&4294967295)<<16&4294967295|N>>>16))+((N=O+(j^W^b)+L[6]+76029189&4294967295)<<23&4294967295|N>>>9))+((N=b+(O^j^W)+L[9]+3654602809&4294967295)<<4&4294967295|N>>>28))+((N=W+(b^O^j)+L[12]+3873151461&4294967295)<<11&4294967295|N>>>21))+((N=j+(W^b^O)+L[15]+530742520&4294967295)<<16&4294967295|N>>>16))+((N=O+(j^W^b)+L[2]+3299628645&4294967295)<<23&4294967295|N>>>9))+((N=b+(j^(O|~W))+L[0]+4096336452&4294967295)<<6&4294967295|N>>>26))+((N=W+(O^(b|~j))+L[7]+1126891415&4294967295)<<10&4294967295|N>>>22))+((N=j+(b^(W|~O))+L[14]+2878612391&4294967295)<<15&4294967295|N>>>17))+((N=O+(W^(j|~b))+L[5]+4237533241&4294967295)<<21&4294967295|N>>>11))+((N=b+(j^(O|~W))+L[12]+1700485571&4294967295)<<6&4294967295|N>>>26))+((N=W+(O^(b|~j))+L[3]+2399980690&4294967295)<<10&4294967295|N>>>22))+((N=j+(b^(W|~O))+L[10]+4293915773&4294967295)<<15&4294967295|N>>>17))+((N=O+(W^(j|~b))+L[1]+2240044497&4294967295)<<21&4294967295|N>>>11))+((N=b+(j^(O|~W))+L[8]+1873313359&4294967295)<<6&4294967295|N>>>26))+((N=W+(O^(b|~j))+L[15]+4264355552&4294967295)<<10&4294967295|N>>>22))+((N=j+(b^(W|~O))+L[6]+2734768916&4294967295)<<15&4294967295|N>>>17))+((N=O+(W^(j|~b))+L[13]+1309151649&4294967295)<<21&4294967295|N>>>11))+((W=(b=O+((N=b+(j^(O|~W))+L[4]+4149444226&4294967295)<<6&4294967295|N>>>26))+((N=W+(O^(b|~j))+L[11]+3174756917&4294967295)<<10&4294967295|N>>>22))^((j=W+((N=j+(b^(W|~O))+L[2]+718787259&4294967295)<<15&4294967295|N>>>17))|~b))+L[9]+3951481745&4294967295,V.g[0]=V.g[0]+b&4294967295,V.g[1]=V.g[1]+(j+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+j&4294967295,V.g[3]=V.g[3]+W&4294967295}function o(V,b){this.h=b;for(var O=[],L=!0,j=V.length-1;0<=j;j--){var W=0|V[j];L&&W==b||(O[j]=W,L=!1)}this.g=O}(function e(V,b){function O(){}O.prototype=b.prototype,V.D=b.prototype,V.prototype=new O,V.prototype.constructor=V,V.C=function(L,j,W){for(var N=Array(arguments.length-2),$o=2;$o<arguments.length;$o++)N[$o-2]=arguments[$o];return b.prototype[j].apply(L,N)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(V,b){void 0===b&&(b=V.length);for(var O=b-this.blockSize,L=this.B,j=this.h,W=0;W<b;){if(0==j)for(;W<=O;)i(this,V,W),W+=this.blockSize;if("string"==typeof V){for(;W<b;)if(L[j++]=V.charCodeAt(W++),j==this.blockSize){i(this,L),j=0;break}}else for(;W<b;)if(L[j++]=V[W++],j==this.blockSize){i(this,L),j=0;break}}this.h=j,this.o+=b},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var b=1;b<V.length-8;++b)V[b]=0;var O=8*this.o;for(b=V.length-8;b<V.length;++b)V[b]=255&O,O/=256;for(this.u(V),V=Array(16),b=O=0;4>b;++b)for(var L=0;32>L;L+=8)V[O++]=this.g[b]>>>L&255;return V};var a={};function u(V){return-128<=V&&128>V?function s(V,b){var O=a;return Object.prototype.hasOwnProperty.call(O,V)?O[V]:O[V]=b(V)}(V,function(b){return new o([0|b],0>b?-1:0)}):new o([0|V],0>V?-1:0)}function d(V){if(isNaN(V)||!isFinite(V))return m;if(0>V)return M(d(-V));for(var b=[],O=1,L=0;V>=O;L++)b[L]=V/O|0,O*=4294967296;return new o(b,0)}var m=u(0),v=u(1),w=u(16777216);function T(V){if(0!=V.h)return!1;for(var b=0;b<V.g.length;b++)if(0!=V.g[b])return!1;return!0}function D(V){return-1==V.h}function M(V){for(var b=V.g.length,O=[],L=0;L<b;L++)O[L]=~V.g[L];return new o(O,~V.h).add(v)}function z(V,b){return V.add(M(b))}function F(V,b){for(;(65535&V[b])!=V[b];)V[b+1]+=V[b]>>>16,V[b]&=65535,b++}function G(V,b){this.g=V,this.h=b}function ae(V,b){if(T(b))throw Error("division by zero");if(T(V))return new G(m,m);if(D(V))return b=ae(M(V),b),new G(M(b.g),M(b.h));if(D(b))return b=ae(V,M(b)),new G(M(b.g),b.h);if(30<V.g.length){if(D(V)||D(b))throw Error("slowDivide_ only works with positive integers.");for(var O=v,L=b;0>=L.l(V);)O=ye(O),L=ye(L);var j=Fe(O,1),W=Fe(L,1);for(L=Fe(L,2),O=Fe(O,2);!T(L);){var N=W.add(L);0>=N.l(V)&&(j=j.add(O),W=N),L=Fe(L,1),O=Fe(O,1)}return b=z(V,j.j(b)),new G(j,b)}for(j=m;0<=V.l(b);){for(O=Math.max(1,Math.floor(V.m()/b.m())),L=48>=(L=Math.ceil(Math.log(O)/Math.LN2))?1:Math.pow(2,L-48),N=(W=d(O)).j(b);D(N)||0<N.l(V);)N=(W=d(O-=L)).j(b);T(W)&&(W=v),j=j.add(W),V=z(V,N)}return new G(j,V)}function ye(V){for(var b=V.g.length+1,O=[],L=0;L<b;L++)O[L]=V.i(L)<<1|V.i(L-1)>>>31;return new o(O,V.h)}function Fe(V,b){var O=b>>5;b%=32;for(var L=V.g.length-O,j=[],W=0;W<L;W++)j[W]=0<b?V.i(W+O)>>>b|V.i(W+O+1)<<32-b:V.i(W+O);return new o(j,V.h)}(n=o.prototype).m=function(){if(D(this))return-M(this).m();for(var V=0,b=1,O=0;O<this.g.length;O++){var L=this.i(O);V+=(0<=L?L:4294967296+L)*b,b*=4294967296}return V},n.toString=function(V){if(2>(V=V||10)||36<V)throw Error("radix out of range: "+V);if(T(this))return"0";if(D(this))return"-"+M(this).toString(V);for(var b=d(Math.pow(V,6)),O=this,L="";;){var j=ae(O,b).g,W=((0<(O=z(O,j.j(b))).g.length?O.g[0]:O.h)>>>0).toString(V);if(T(O=j))return W+L;for(;6>W.length;)W="0"+W;L=W+L}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h},n.l=function(V){return D(V=z(this,V))?-1:T(V)?0:1},n.abs=function(){return D(this)?M(this):this},n.add=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0,j=0;j<=b;j++){var W=L+(65535&this.i(j))+(65535&V.i(j)),N=(W>>>16)+(this.i(j)>>>16)+(V.i(j)>>>16);L=N>>>16,O[j]=(N&=65535)<<16|(W&=65535)}return new o(O,-2147483648&O[O.length-1]?-1:0)},n.j=function(V){if(T(this)||T(V))return m;if(D(this))return D(V)?M(this).j(M(V)):M(M(this).j(V));if(D(V))return M(this.j(M(V)));if(0>this.l(w)&&0>V.l(w))return d(this.m()*V.m());for(var b=this.g.length+V.g.length,O=[],L=0;L<2*b;L++)O[L]=0;for(L=0;L<this.g.length;L++)for(var j=0;j<V.g.length;j++){var W=this.i(L)>>>16,N=65535&this.i(L),$o=V.i(j)>>>16,mg=65535&V.i(j);O[2*L+2*j]+=N*mg,F(O,2*L+2*j),O[2*L+2*j+1]+=W*mg,F(O,2*L+2*j+1),O[2*L+2*j+1]+=N*$o,F(O,2*L+2*j+1),O[2*L+2*j+2]+=W*$o,F(O,2*L+2*j+2)}for(L=0;L<b;L++)O[L]=O[2*L+1]<<16|O[2*L];for(L=b;L<2*b;L++)O[L]=0;return new o(O,0)},n.A=function(V){return ae(this,V).h},n.and=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0;L<b;L++)O[L]=this.i(L)&V.i(L);return new o(O,this.h&V.h)},n.or=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0;L<b;L++)O[L]=this.i(L)|V.i(L);return new o(O,this.h|V.h)},n.xor=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0;L<b;L++)O[L]=this.i(L)^V.i(L);return new o(O,this.h^V.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,l1=c1.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=function g(V,b){if(0==V.length)throw Error("number format error: empty string");if(2>(b=b||10)||36<b)throw Error("radix out of range: "+b);if("-"==V.charAt(0))return M(g(V.substring(1),b));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=d(Math.pow(b,8)),L=m,j=0;j<V.length;j+=8){var W=Math.min(8,V.length-j),N=parseInt(V.substring(j,j+W),b);8>W?(W=d(Math.pow(b,W)),L=L.j(W).add(d(N))):L=(L=L.j(O)).add(d(N))}return L},Ku=c1.Integer=o}).apply(typeof u1<"u"?u1:typeof self<"u"?self:typeof window<"u"?window:{});var d1,wp,h1,ky,vT,f1,p1,g1,Oy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xo={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,I){return h==Array.prototype||h==Object.prototype||(h[_]=I.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Oy&&Oy];for(var _=0;_<h.length;++_){var I=h[_];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var I=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var $=h[A];if(!($ in I))break e;I=I[$]}(_=_(A=I[h=h[h.length-1]]))!=A&&null!=_&&e(I,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var I=0,A=!1,$={next:function(){if(!A&&I<h.length){var X=I++;return{value:_(X,h[X]),done:!1}}return A=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}(this,function(_,I){return I})}});var o=o||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function d(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function g(h,_,I){return h.call.apply(h.bind,arguments)}function m(h,_,I){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,A),h.apply(_,$)}}return function(){return h.apply(_,arguments)}}function v(h,_,I){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function w(h,_){var I=Array.prototype.slice.call(arguments,1);return function(){var A=I.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function T(h,_){function I(){}I.prototype=_.prototype,h.aa=_.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(A,$,X){for(var we=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)we[Kt-2]=arguments[Kt];return _.prototype[$].apply(A,we)}}function D(h){const _=h.length;if(0<_){const I=Array(_);for(let A=0;A<_;A++)I[A]=h[A];return I}return[]}function M(h,_){for(let I=1;I<arguments.length;I++){const A=arguments[I];if(u(A)){const $=h.length||0,X=A.length||0;h.length=$+X;for(let we=0;we<X;we++)h[$+we]=A[we]}else h.push(A)}}function F(h){return/^[\s\xa0]*$/.test(h)}function G(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function ae(h){return ae[" "](h),h}ae[" "]=function(){};var ye=!(-1==G().indexOf("Gecko")||-1!=G().toLowerCase().indexOf("webkit")&&-1==G().indexOf("Edge")||-1!=G().indexOf("Trident")||-1!=G().indexOf("MSIE")||-1!=G().indexOf("Edge"));function Fe(h,_,I){for(const A in h)_.call(I,h[A],A,h)}function b(h){const _={};for(const I in h)_[I]=h[I];return _}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,_){let I,A;for(let $=1;$<arguments.length;$++){for(I in A=arguments[$],A)h[I]=A[I];for(let X=0;X<O.length;X++)I=O[X],Object.prototype.hasOwnProperty.call(A,I)&&(h[I]=A[I])}}function j(h){var _=1;h=h.split(":");const I=[];for(;0<_&&h.length;)I.push(h.shift()),_--;return h.length&&I.push(h.join(":")),I}function W(h){a.setTimeout(()=>{throw h},0)}function N(){var h=_0;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var mg=new class z{constructor(_,I){this.i=_,this.j=I,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new fZ,h=>h.reset());class fZ{constructor(){this.next=this.g=this.h=null}set(_,I){this.h=_,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let _g,yg=!1,_0=new class $o{constructor(){this.h=this.g=null}add(_,I){const A=mg.get();A.set(_,I),this.h?this.h.next=A:this.g=A,this.h=A}},x2=()=>{const h=a.Promise.resolve(void 0);_g=()=>{h.then(pZ)}};var pZ=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(I){W(I)}var _=mg;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}yg=!1};function Ja(){this.s=this.s,this.C=this.C}function $r(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}Ja.prototype.s=!1,Ja.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ja.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},$r.prototype.h=function(){this.defaultPrevented=!0};var gZ=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};a.addEventListener("test",I,_),a.removeEventListener("test",I,_)}catch{}return h}();function vg(h,_){if($r.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ye){e:{try{ae(_.nodeName);var $=!0;break e}catch{}$=!1}$||(_=null)}}else"mouseover"==I?_=h.fromElement:"mouseout"==I&&(_=h.toElement);this.relatedTarget=_,A?(this.clientX=void 0!==A.clientX?A.clientX:A.pageX,this.clientY=void 0!==A.clientY?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:mZ[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&vg.aa.h.call(this)}}T(vg,$r);var mZ={2:"touch",3:"pen",4:"mouse"};vg.prototype.h=function(){vg.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ig="closure_listenable_"+(1e6*Math.random()|0),_Z=0;function yZ(h,_,I,A,$){this.listener=h,this.proxy=null,this.src=_,this.type=I,this.capture=!!A,this.ha=$,this.key=++_Z,this.da=this.fa=!1}function Zv(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Xv(h){this.src=h,this.g={},this.h=0}function y0(h,_){var I=_.type;if(I in h.g){var X,A=h.g[I],$=Array.prototype.indexOf.call(A,_,void 0);(X=0<=$)&&Array.prototype.splice.call(A,$,1),X&&(Zv(_),0==h.g[I].length&&(delete h.g[I],h.h--))}}function v0(h,_,I,A){for(var $=0;$<h.length;++$){var X=h[$];if(!X.da&&X.listener==_&&X.capture==!!I&&X.ha==A)return $}return-1}Xv.prototype.add=function(h,_,I,A,$){var X=h.toString();(h=this.g[X])||(h=this.g[X]=[],this.h++);var we=v0(h,_,A,$);return-1<we?(_=h[we],I||(_.fa=!1)):((_=new yZ(_,this.src,X,!!A,$)).fa=I,h.push(_)),_};var I0="closure_lm_"+(1e6*Math.random()|0),E0={};function N2(h,_,I,A,$){if(A&&A.once)return k2(h,_,I,A,$);if(Array.isArray(_)){for(var X=0;X<_.length;X++)N2(h,_[X],I,A,$);return null}return I=C0(I),h&&h[Ig]?h.K(_,I,d(A)?!!A.capture:!!A,$):O2(h,_,I,!1,A,$)}function O2(h,_,I,A,$,X){if(!_)throw Error("Invalid event type");var we=d($)?!!$.capture:!!$,Kt=A0(h);if(Kt||(h[I0]=Kt=new Xv(h)),(I=Kt.add(_,I,A,we,X)).proxy)return I;if(A=function vZ(){const _=IZ;return function h(I){return _.call(h.src,h.listener,I)}}(),I.proxy=A,A.src=h,A.listener=I,h.addEventListener)gZ||($=we),void 0===$&&($=!1),h.addEventListener(_.toString(),A,$);else if(h.attachEvent)h.attachEvent(F2(_.toString()),A);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(A)}return I}function k2(h,_,I,A,$){if(Array.isArray(_)){for(var X=0;X<_.length;X++)k2(h,_[X],I,A,$);return null}return I=C0(I),h&&h[Ig]?h.L(_,I,d(A)?!!A.capture:!!A,$):O2(h,_,I,!0,A,$)}function V2(h,_,I,A,$){if(Array.isArray(_))for(var X=0;X<_.length;X++)V2(h,_[X],I,A,$);else A=d(A)?!!A.capture:!!A,I=C0(I),h&&h[Ig]?(h=h.i,(_=String(_).toString())in h.g&&-1<(I=v0(X=h.g[_],I,A,$))&&(Zv(X[I]),Array.prototype.splice.call(X,I,1),0==X.length&&(delete h.g[_],h.h--))):h&&(h=A0(h))&&(_=h.g[_.toString()],h=-1,_&&(h=v0(_,I,A,$)),(I=-1<h?_[h]:null)&&w0(I))}function w0(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[Ig])y0(_.i,h);else{var I=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(I,A,h.capture):_.detachEvent?_.detachEvent(F2(I),A):_.addListener&&_.removeListener&&_.removeListener(A),(I=A0(_))?(y0(I,h),0==I.h&&(I.src=null,_[I0]=null)):Zv(h)}}}function F2(h){return h in E0?E0[h]:E0[h]="on"+h}function IZ(h,_){if(h.da)h=!0;else{_=new vg(_,this);var I=h.listener,A=h.ha||h.src;h.fa&&w0(h),h=I.call(A,_)}return h}function A0(h){return(h=h[I0])instanceof Xv?h:null}var T0="__closure_events_fn_"+(1e9*Math.random()>>>0);function C0(h){return"function"==typeof h?h:(h[T0]||(h[T0]=function(_){return h.handleEvent(_)}),h[T0])}function Hr(){Ja.call(this),this.i=new Xv(this),this.M=this,this.F=null}function ai(h,_){var I,A=h.F;if(A)for(I=[];A;A=A.F)I.push(A);if(h=h.M,A=_.type||_,"string"==typeof _)_=new $r(_,h);else if(_ instanceof $r)_.target=_.target||h;else{var $=_;L(_=new $r(A,h),$)}if($=!0,I)for(var X=I.length-1;0<=X;X--){var we=_.g=I[X];$=eI(we,A,!0,_)&&$}if($=eI(we=_.g=h,A,!0,_)&&$,$=eI(we,A,!1,_)&&$,I)for(X=0;X<I.length;X++)$=eI(we=_.g=I[X],A,!1,_)&&$}function eI(h,_,I,A){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var $=!0,X=0;X<_.length;++X){var we=_[X];if(we&&!we.da&&we.capture==I){var Kt=we.listener,Tr=we.ha||we.src;we.fa&&y0(h.i,we),$=!1!==Kt.call(Tr,A)&&$}}return $&&!A.defaultPrevented}function L2(h,_,I){if("function"==typeof h)I&&(h=v(h,I));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=v(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function U2(h){h.g=L2(()=>{h.g=null,h.i&&(h.i=!1,U2(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}T(Hr,Ja),Hr.prototype[Ig]=!0,Hr.prototype.removeEventListener=function(h,_,I,A){V2(this,h,_,I,A)},Hr.prototype.N=function(){if(Hr.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var I=h.g[_],A=0;A<I.length;A++)Zv(I[A]);delete h.g[_],h.h--}}this.F=null},Hr.prototype.K=function(h,_,I,A){return this.i.add(String(h),_,!1,I,A)},Hr.prototype.L=function(h,_,I,A){return this.i.add(String(h),_,!0,I,A)};class EZ extends Ja{constructor(_,I){super(),this.m=_,this.l=I,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:U2(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Eg(h){Ja.call(this),this.h=h,this.g={}}T(Eg,Ja);var B2=[];function j2(h){Fe(h.g,function(_,I){this.g.hasOwnProperty(I)&&w0(_)},h),h.g={}}Eg.prototype.N=function(){Eg.aa.N.call(this),j2(this)},Eg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var D0=a.JSON.stringify,wZ=a.JSON.parse,AZ=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function b0(){}function H2(){}b0.prototype.h=null;var wg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function S0(){$r.call(this,"d")}function R0(){$r.call(this,"c")}T(S0,$r),T(R0,$r);var vc={},z2=null;function tI(){return z2=z2||new Hr}function q2(h){$r.call(this,vc.La,h)}function Ag(h){const _=tI();ai(_,new q2(_))}function G2(h,_){$r.call(this,vc.STAT_EVENT,h),this.stat=_}function ui(h){const _=tI();ai(_,new G2(_,h))}function W2(h,_){$r.call(this,vc.Ma,h),this.size=_}function Tg(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Cg(){this.g=!0}function ih(h,_,I,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function bZ(h,_){if(!h.g)return _;if(!_)return null;try{var I=JSON.parse(_);if(I)for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var A=I[h];if(!(2>A.length)){var $=A[1];if(Array.isArray($)&&!(1>$.length)){var X=$[0];if("noop"!=X&&"stop"!=X&&"close"!=X)for(var we=1;we<$.length;we++)$[we]=""}}}return D0(I)}catch{return _}}(h,I)+(A?" "+A:"")})}vc.La="serverreachability",T(q2,$r),vc.STAT_EVENT="statevent",T(G2,$r),vc.Ma="timingevent",T(W2,$r),Cg.prototype.xa=function(){this.g=!1},Cg.prototype.info=function(){};var P0,nI={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},K2={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function rI(){}function Za(h,_,I,A){this.j=h,this.i=_,this.l=I,this.R=A||1,this.U=new Eg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Q2}function Q2(){this.i=null,this.g="",this.h=!1}T(rI,b0),rI.prototype.g=function(){return new XMLHttpRequest},rI.prototype.i=function(){return{}},P0=new rI;var Y2={},M0={};function x0(h,_,I){h.L=1,h.v=aI(Ho(_)),h.m=I,h.P=!0,J2(h,null)}function J2(h,_){h.F=Date.now(),iI(h),h.A=Ho(h.v);var I=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),dU(I.i,"t",A),h.C=0,I=h.j.J,h.h=new Q2,h.g=RU(h.j,I?_:null,!h.m),0<h.O&&(h.M=new EZ(v(h.Y,h,h.g),h.O)),_=h.U,I=h.g,A=h.ca;var $="readystatechange";Array.isArray($)||($&&(B2[0]=$.toString()),$=B2);for(var X=0;X<$.length;X++){var we=N2(I,$[X],A||_.handleEvent,!1,_.h||_);if(!we)break;_.g[we.key]=we}_=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Ag(),function TZ(h,_,I,A,$,X){h.info(function(){if(h.g)if(X)for(var we="",Kt=X.split("&"),Tr=0;Tr<Kt.length;Tr++){var Mt=Kt[Tr].split("=");if(1<Mt.length){var zr=Mt[0];Mt=Mt[1];var qr=zr.split("_");we=2<=qr.length&&"type"==qr[1]?we+(zr+"=")+Mt+"&":we+(zr+"=redacted&")}}else we=null;else we=X;return"XMLHTTP REQ ("+A+") [attempt "+$+"]: "+_+"\n"+I+"\n"+we})}(h.i,h.u,h.A,h.l,h.R,h.m)}function Z2(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function SZ(h,_){var I=h.C,A=_.indexOf("\n",I);return-1==A?M0:(I=Number(_.substring(I,A)),isNaN(I)?Y2:(A+=1)+I>_.length?M0:(_=_.slice(A,A+I),h.C=A+I,_))}function iI(h){h.S=Date.now()+h.I,X2(h,h.I)}function X2(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Tg(v(h.ba,h),_)}function N0(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function Dg(h){0==h.j.G||h.J||CU(h.j,h)}function Ic(h){N0(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,j2(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function O0(h,_){try{var I=h.j;if(0!=I.G&&(I.g==h||k0(I.h,h)))if(!h.K&&k0(I.h,h)&&3==I.G){try{var A=I.Da.g.parse(_)}catch{A=null}if(Array.isArray(A)&&3==A.length){var $=A;if(0==$[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<h.F))break e;hI(I),lI(I)}U0(I),ui(18)}}else I.za=$[1],0<I.za-I.T&&37500>$[2]&&I.F&&0==I.v&&!I.C&&(I.C=Tg(v(I.Za,I),6e3));if(1>=nU(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else wc(I,11)}else if((h.K||I.g==h)&&hI(I),!F(_))for($=I.Da.g.parse(_),_=0;_<$.length;_++){let Mt=$[_];if(I.T=Mt[0],Mt=Mt[1],2==I.G)if("c"==Mt[0]){I.K=Mt[1],I.ia=Mt[2];const zr=Mt[3];null!=zr&&(I.la=zr,I.j.info("VER="+I.la));const qr=Mt[4];null!=qr&&(I.Aa=qr,I.j.info("SVER="+I.Aa));const ah=Mt[5];null!=ah&&"number"==typeof ah&&0<ah&&(I.L=A=1.5*ah,I.j.info("backChannelRequestTimeoutMs_="+A)),A=I;const ms=h.g;if(ms){const pI=ms.g?ms.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pI){var X=A.h;X.g||-1==pI.indexOf("spdy")&&-1==pI.indexOf("quic")&&-1==pI.indexOf("h2")||(X.j=X.l,X.g=new Set,X.h&&(V0(X,X.h),X.h=null))}if(A.D){const j0=ms.g?ms.g.getResponseHeader("X-HTTP-Session-Id"):null;j0&&(A.ya=j0,fn(A.I,A.D,j0))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms"));var we=h;if((A=I).qa=SU(A,A.J?A.ia:null,A.W),we.K){rU(A.h,we);var Kt=we,Tr=A.L;Tr&&(Kt.I=Tr),Kt.B&&(N0(Kt),iI(Kt)),A.g=we}else AU(A);0<I.i.length&&dI(I)}else"stop"!=Mt[0]&&"close"!=Mt[0]||wc(I,7);else 3==I.G&&("stop"==Mt[0]||"close"==Mt[0]?"stop"==Mt[0]?wc(I,7):L0(I):"noop"!=Mt[0]&&I.l&&I.l.ta(Mt),I.v=0)}Ag()}catch{}}function eU(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tU(h){return!!h.h||!!h.g&&h.g.size>=h.j}function nU(h){return h.h?1:h.g?h.g.size:0}function k0(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function V0(h,_){h.g?h.g.add(_):h.h=_}function rU(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function iU(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const I of h.g.values())_=_.concat(I.D);return _}return D(h.i)}function sU(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var I=function MZ(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var I=0;I<h;I++)_.push(I);return _}_=[],I=0;for(const A in h)_[I++]=A;return _}}}(h),A=function PZ(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],I=h.length,A=0;A<I;A++)_.push(h[A]);return _}for(A in _=[],I=0,h)_[I++]=h[A];return _}(h),$=A.length,X=0;X<$;X++)_.call(void 0,A[X],I&&I[X],h)}Za.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==zo(h)?_.j():this.Y(h)},Za.prototype.Y=function(h){try{if(h==this.g)e:{const qr=zo(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>qr)&&(3!=qr||this.g&&(this.h.h||this.g.oa()||yU(this.g)))){this.J||4!=qr||7==_||Ag(),N0(this);var I=this.g.Z();this.X=I;t:if(Z2(this)){var A=yU(this.g);h="";var $=A.length,X=4==zo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ic(this),Dg(this);var we="";break t}this.h.i=new a.TextDecoder}for(_=0;_<$;_++)this.h.h=!0,h+=this.h.i.decode(A[_],{stream:!(X&&_==$-1)});A.length=0,this.h.g+=h,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=200==I,function CZ(h,_,I,A,$,X,we){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+$+"]: "+_+"\n"+I+"\n"+X+" "+we})}(this.i,this.u,this.A,this.l,this.R,qr,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Kt,Tr=this.g;if((Kt=Tr.g?Tr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Kt)){var Mt=Kt;break t}}Mt=null}if(!(I=Mt)){this.o=!1,this.s=3,ui(12),Ic(this),Dg(this);break e}ih(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,O0(this,I)}if(this.P){let ms;for(I=!0;!this.J&&this.C<we.length;){if(ms=SZ(this,we),ms==M0){4==qr&&(this.s=4,ui(14),I=!1),ih(this.i,this.l,null,"[Incomplete Response]");break}if(ms==Y2){this.s=4,ui(15),ih(this.i,this.l,we,"[Invalid Chunk]"),I=!1;break}ih(this.i,this.l,ms,null),O0(this,ms)}if(Z2(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=qr||0!=we.length||this.h.h||(this.s=1,ui(16),I=!1),this.o=this.o&&I,I){if(0<we.length&&!this.W){this.W=!0;var zr=this.j;zr.g==this&&zr.ba&&!zr.M&&(zr.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),B0(zr),zr.M=!0,ui(11))}}else ih(this.i,this.l,we,"[Invalid Chunked Response]"),Ic(this),Dg(this)}else ih(this.i,this.l,we,null),O0(this,we);4==qr&&Ic(this),this.o&&!this.J&&(4==qr?CU(this.j,this):(this.o=!1,iI(this)))}else(function qZ(h){const _={};h=(h.g&&2<=zo(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let A=0;A<h.length;A++){if(F(h[A]))continue;var I=j(h[A]);const $=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const X=_[$]||[];_[$]=X,X.push(I)}!function V(h,_){for(const I in h)_.call(void 0,h[I],I,h)}(_,function(A){return A.join(", ")})})(this.g),400==I&&0<we.indexOf("Unknown SID")?(this.s=3,ui(12)):(this.s=0,ui(13)),Ic(this),Dg(this)}}}catch{}},Za.prototype.cancel=function(){this.J=!0,Ic(this)},Za.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function DZ(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(Ag(),ui(17)),Ic(this),this.s=2,Dg(this)):X2(this,this.S-h)},eU.prototype.cancel=function(){if(this.i=iU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var oU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ec(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ec){this.h=h.h,sI(this,h.j),this.o=h.o,this.g=h.g,oI(this,h.s),this.l=h.l;var _=h.i,I=new Rg;I.i=_.i,_.g&&(I.g=new Map(_.g),I.h=_.h),aU(this,I),this.m=h.m}else h&&(_=String(h).match(oU))?(this.h=!1,sI(this,_[1]||"",!0),this.o=bg(_[2]||""),this.g=bg(_[3]||"",!0),oI(this,_[4]),this.l=bg(_[5]||"",!0),aU(this,_[6]||"",!0),this.m=bg(_[7]||"")):(this.h=!1,this.i=new Rg(null,this.h))}function Ho(h){return new Ec(h)}function sI(h,_,I){h.j=I?bg(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function oI(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function aU(h,_,I){_ instanceof Rg?(h.i=_,function LZ(h,_){_&&!h.j&&(Xa(h),h.i=null,h.g.forEach(function(I,A){var $=A.toLowerCase();A!=$&&(cU(this,A),dU(this,$,I))},h)),h.j=_}(h.i,h.h)):(I||(_=Sg(_,VZ)),h.i=new Rg(_,h.h))}function fn(h,_,I){h.i.set(_,I)}function aI(h){return fn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function bg(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Sg(h,_,I){return"string"==typeof h?(h=encodeURI(h).replace(_,NZ),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function NZ(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}Ec.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Sg(_,uU,!0),":");var I=this.g;return(I||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(Sg(_,uU,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&h.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&h.push("/"),h.push(Sg(I,"/"==I.charAt(0)?kZ:OZ,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",Sg(I,FZ)),h.join("")};var h,uU=/[#\/\?@]/g,OZ=/[#\?:]/g,kZ=/[#\?]/g,VZ=/[#\?@]/g,FZ=/#/g;function Rg(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Xa(h){h.g||(h.g=new Map,h.h=0,h.i&&function xZ(h,_){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var A=h[I].indexOf("="),$=null;if(0<=A){var X=h[I].substring(0,A);$=h[I].substring(A+1)}else X=h[I];_(X,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}(h.i,function(_,I){h.add(decodeURIComponent(_.replace(/\+/g," ")),I)}))}function cU(h,_){Xa(h),_=sh(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function lU(h,_){return Xa(h),_=sh(h,_),h.g.has(_)}function dU(h,_,I){cU(h,_),0<I.length&&(h.i=null,h.g.set(sh(h,_),D(I)),h.h+=I.length)}function sh(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function eu(h,_,I,A,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),A(I)}catch{}}function jZ(){this.g=new AZ}function $Z(h,_,I){const A=I||"";try{sU(h,function($,X){let we=$;d($)&&(we=D0($)),_.push(A+X+"="+encodeURIComponent(we))})}catch($){throw _.push(A+"type="+encodeURIComponent("_badmap")),$}}function Pg(h){this.l=h.Ub||null,this.j=h.eb||!1}function uI(h,_){Hr.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function hU(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Mg(h){h.readyState=4,h.l=null,h.j=null,h.v=null,xg(h)}function xg(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function fU(h){let _="";return Fe(h,function(I,A){_+=A,_+=":",_+=I,_+="\r\n"}),_}function F0(h,_,I){e:{for(A in I){var A=!1;break e}A=!0}A||(I=fU(I),"string"==typeof h?null!=I&&encodeURIComponent(String(I)):fn(h,_,I))}function On(h){Hr.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Rg.prototype).add=function(h,_){Xa(this),this.i=null,h=sh(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(_),this.h+=1,this},n.forEach=function(h,_){Xa(this),this.g.forEach(function(I,A){I.forEach(function($){h.call(_,$,A,this)},this)},this)},n.na=function(){Xa(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),I=[];for(let A=0;A<_.length;A++){const $=h[A];for(let X=0;X<$.length;X++)I.push(_[A])}return I},n.V=function(h){Xa(this);let _=[];if("string"==typeof h)lU(this,h)&&(_=_.concat(this.g.get(sh(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)_=_.concat(h[I])}return _},n.set=function(h,_){return Xa(this),this.i=null,lU(this,h=sh(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var I=0;I<_.length;I++){var A=_[I];const X=encodeURIComponent(String(A)),we=this.V(A);for(A=0;A<we.length;A++){var $=X;""!==we[A]&&($+="="+encodeURIComponent(String(we[A]))),h.push($)}}return this.i=h.join("&")},T(Pg,b0),Pg.prototype.g=function(){return new uI(this.l,this.j)},Pg.prototype.i=(h={},function(){return h}),T(uI,Hr),(n=uI.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,xg(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mg(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,xg(this)),this.g&&(this.readyState=3,xg(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hU(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Mg(this):xg(this),3==this.readyState&&hU(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Mg(this))},n.Qa=function(h){this.g&&(this.response=h,Mg(this))},n.ga=function(){this.g&&Mg(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var I=_.next();!I.done;)h.push((I=I.value)[0]+": "+I[1]),I=_.next();return h.join("\r\n")},Object.defineProperty(uI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),T(On,Hr);var HZ=/^https?$/i,zZ=["POST","PUT"];function pU(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,gU(h),cI(h)}function gU(h){h.A||(h.A=!0,ai(h,"complete"),ai(h,"error"))}function mU(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=zo(h)||2!=h.Z()))if(h.u&&4==zo(h))L2(h.Ea,0,h);else if(ai(h,"readystatechange"),4==zo(h)){h.h=!1;try{const we=h.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var I;if(!(I=_)){var A;if(A=0===we){var $=String(h.D).match(oU)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),A=!HZ.test($?$.toLowerCase():"")}I=A}if(I)ai(h,"complete"),ai(h,"success");else{h.m=6;try{var X=2<zo(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",gU(h)}}finally{cI(h)}}}function cI(h,_){if(h.g){_U(h);const I=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||ai(h,"ready");try{I.onreadystatechange=A}catch{}}}function _U(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function zo(h){return h.g?h.g.readyState:0}function yU(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ng(h,_,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||_}function vU(h){this.Aa=0,this.i=[],this.j=new Cg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ng("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ng("baseRetryDelayMs",5e3,h),this.cb=Ng("retryDelaySeedMs",1e4,h),this.Wa=Ng("forwardChannelMaxRetries",2,h),this.wa=Ng("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new eU(h&&h.concurrentRequestLimit),this.Da=new jZ,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function L0(h){if(IU(h),3==h.G){var _=h.U++,I=Ho(h.I);if(fn(I,"SID",h.K),fn(I,"RID",_),fn(I,"TYPE","terminate"),Og(h,I),(_=new Za(h,h.j,_)).L=2,_.v=aI(Ho(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=_.v,I=!0),I||(_.g=RU(_.j,null),_.g.ea(_.v)),_.F=Date.now(),iI(_)}bU(h)}function lI(h){h.g&&(B0(h),h.g.cancel(),h.g=null)}function IU(h){lI(h),h.u&&(a.clearTimeout(h.u),h.u=null),hI(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function dI(h){if(!tU(h.h)&&!h.s){h.s=!0;var _=h.Ga;_g||x2(),yg||(_g(),yg=!0),_0.add(_,h),h.B=0}}function EU(h,_){var I;I=_?_.l:h.U++;const A=Ho(h.I);fn(A,"SID",h.K),fn(A,"RID",I),fn(A,"AID",h.T),Og(h,A),h.m&&h.o&&F0(A,h.m,h.o),I=new Za(h,h.j,I,h.B+1),null===h.m&&(I.H=h.o),_&&(h.i=_.D.concat(h.i)),_=wU(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),V0(h.h,I),x0(I,A,_)}function Og(h,_){h.H&&Fe(h.H,function(I,A){fn(_,A,I)}),h.l&&sU({},function(I,A){fn(_,A,I)})}function wU(h,_,I){I=Math.min(h.i.length,I);var A=h.l?v(h.l.Na,h.l,h):null;e:{var $=h.i;let X=-1;for(;;){const we=["count="+I];-1==X?0<I?(X=$[0].g,we.push("ofs="+X)):X=0:we.push("ofs="+X);let Kt=!0;for(let Tr=0;Tr<I;Tr++){let Mt=$[Tr].g;const zr=$[Tr].map;if(Mt-=X,0>Mt)X=Math.max(0,$[Tr].g-100),Kt=!1;else try{$Z(zr,we,"req"+Mt+"_")}catch{A&&A(zr)}}if(Kt){A=we.join("&");break e}}}return h=h.i.splice(0,I),_.D=h,A}function AU(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;_g||x2(),yg||(_g(),yg=!0),_0.add(_,h),h.v=0}}function U0(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Tg(v(h.Fa,h),DU(h,h.v)),h.v++,0))}function B0(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function TU(h){h.g=new Za(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=Ho(h.qa);fn(_,"RID","rpc"),fn(_,"SID",h.K),fn(_,"AID",h.T),fn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&fn(_,"TO",h.ja),fn(_,"TYPE","xmlhttp"),Og(h,_),h.m&&h.o&&F0(_,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=aI(Ho(_)),I.m=null,I.P=!0,J2(I,h)}function hI(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function CU(h,_){var I=null;if(h.g==_){hI(h),B0(h),h.g=null;var A=2}else{if(!k0(h.h,_))return;I=_.D,rU(h.h,_),A=1}if(0!=h.G)if(_.o)if(1==A){I=_.m?_.m.length:0,_=Date.now()-_.F;var $=h.B;ai(A=tI(),new W2(A,I)),dI(h)}else AU(h);else if(3==($=_.s)||0==$&&0<_.X||!(1==A&&function GZ(h,_){return!(nU(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Tg(v(h.Ga,h,_),DU(h,h.B)),h.B++,0)))}(h,_)||2==A&&U0(h)))switch(I&&0<I.length&&(_=h.h,_.i=_.i.concat(I)),$){case 1:wc(h,5);break;case 4:wc(h,10);break;case 3:wc(h,6);break;default:wc(h,2)}}function DU(h,_){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*_}function wc(h,_){if(h.j.info("Error code "+_),2==_){var I=v(h.fb,h),A=h.Xa;const $=!A;A=new Ec(A||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||sI(A,"https"),aI(A),$?function UZ(h,_){const I=new Cg;if(a.Image){const A=new Image;A.onload=w(eu,I,"TestLoadImage: loaded",!0,_,A),A.onerror=w(eu,I,"TestLoadImage: error",!1,_,A),A.onabort=w(eu,I,"TestLoadImage: abort",!1,_,A),A.ontimeout=w(eu,I,"TestLoadImage: timeout",!1,_,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}(A.toString(),I):function BZ(h,_){new Cg;const A=new AbortController,$=setTimeout(()=>{A.abort(),eu(0,0,!1,_)},1e4);fetch(h,{signal:A.signal}).then(X=>{clearTimeout($),eu(0,0,!!X.ok,_)}).catch(()=>{clearTimeout($),eu(0,0,!1,_)})}(A.toString(),I)}else ui(2);h.G=0,h.l&&h.l.sa(_),bU(h),IU(h)}function bU(h){if(h.G=0,h.ka=[],h.l){const _=iU(h.h);(0!=_.length||0!=h.i.length)&&(M(h.ka,_),M(h.ka,h.i),h.h.i.length=0,D(h.i),h.i.length=0),h.l.ra()}}function SU(h,_,I){var A=I instanceof Ec?Ho(I):new Ec(I);if(""!=A.g)_&&(A.g=_+"."+A.g),oI(A,A.s);else{var $=a.location;A=$.protocol,_=_?_+"."+$.hostname:$.hostname,$=+$.port;var X=new Ec(null);A&&sI(X,A),_&&(X.g=_),$&&oI(X,$),I&&(X.l=I),A=X}return _=h.ya,(I=h.D)&&_&&fn(A,I,_),fn(A,"VER",h.la),Og(h,A),A}function RU(h,_,I){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new On(h.Ca&&!h.pa?new Pg({eb:I}):h.pa)).Ha(h.J),_}function PU(){}function fI(){}function Li(h,_){Hr.call(this),this.g=new vU(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!F(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!F(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new oh(this)}function MU(h){S0.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const I in _){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function xU(){R0.call(this),this.status=1}function oh(h){this.g=h}(n=On.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,I,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():P0.g(),this.v=function $2(h){return h.h||(h.h=h.i())}(this.o?this.o:P0),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(X){return void pU(this,X)}if(h=I||"",I=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var $ in A)I.set($,A[$]);else{if("function"!=typeof A.keys||"function"!=typeof A.get)throw Error("Unknown input type for opt_headers: "+String(A));for(const X of A.keys())I.set(X,A.get(X))}A=Array.from(I.keys()).find(X=>"content-type"==X.toLowerCase()),$=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(zZ,_,void 0))||A||$||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,we]of I)this.g.setRequestHeader(X,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_U(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){pU(this,X)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,ai(this,"complete"),ai(this,"abort"),cI(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cI(this,!0)),On.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?mU(this):this.bb())},n.bb=function(){mU(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<zo(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),wZ(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=vU.prototype).la=8,n.G=1,n.connect=function(h,_,I,A){ui(0),this.W=h,this.H=_||{},I&&void 0!==A&&(this.H.OSID=I,this.H.OAID=A),this.F=this.X,this.I=SU(this,null,this.W),dI(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const $=new Za(this,this.j,h);let X=this.o;if(this.S&&(X?(X=b(X),L(X,this.S)):X=this.S),null!==this.m||this.O||($.H=X,X=null),this.P)e:{for(var _=0,I=0;I<this.i.length;I++){var A=this.i[I];if(void 0===(A="__data__"in A.map&&"string"==typeof(A=A.map.__data__)?A.length:void 0))break;if(4096<(_+=A)){_=I;break e}if(4096===_||I===this.i.length-1){_=I+1;break e}}_=1e3}else _=1e3;_=wU(this,$,_),fn(I=Ho(this.I),"RID",h),fn(I,"CVER",22),this.D&&fn(I,"X-HTTP-Session-Id",this.D),Og(this,I),X&&(this.O?_="headers="+encodeURIComponent(String(fU(X)))+"&"+_:this.m&&F0(I,this.m,X)),V0(this.h,$),this.Ua&&fn(I,"TYPE","init"),this.P?(fn(I,"$req",_),fn(I,"SID","null"),$.T=!0,x0($,I,null)):x0($,I,_),this.G=2}}else 3==this.G&&(h?EU(this,h):0==this.i.length||tU(this.h)||EU(this))},n.Fa=function(){if(this.u=null,TU(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Tg(v(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ui(10),lI(this),TU(this))},n.Za=function(){null!=this.C&&(this.C=null,lI(this),U0(this),ui(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ui(2)):(this.j.info("Failed to ping google.com"),ui(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=PU.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},fI.prototype.g=function(h,_){return new Li(h,_)},T(Li,Hr),Li.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Li.prototype.close=function(){L0(this.g)},Li.prototype.o=function(h){var _=this.g;if("string"==typeof h){var I={};I.__data__=h,h=I}else this.u&&((I={}).__data__=D0(h),h=I);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&dI(_)},Li.prototype.N=function(){this.g.l=null,delete this.j,L0(this.g),delete this.g,Li.aa.N.call(this)},T(MU,S0),T(xU,R0),T(oh,PU),oh.prototype.ua=function(){ai(this.g,"a")},oh.prototype.ta=function(h){ai(this.g,new MU(h))},oh.prototype.sa=function(h){ai(this.g,new xU)},oh.prototype.ra=function(){ai(this.g,"b")},fI.prototype.createWebChannel=fI.prototype.g,Li.prototype.send=Li.prototype.o,Li.prototype.open=Li.prototype.m,Li.prototype.close=Li.prototype.close,g1=xo.createWebChannelTransport=function(){return new fI},p1=xo.getStatEventTarget=function(){return tI()},f1=xo.Event=vc,vT=xo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nI.NO_ERROR=0,nI.TIMEOUT=8,nI.HTTP_ERROR=6,ky=xo.ErrorCode=nI,K2.COMPLETE="complete",h1=xo.EventType=K2,H2.EventType=wg,wg.OPEN="a",wg.CLOSE="b",wg.ERROR="c",wg.MESSAGE="d",Hr.prototype.listen=Hr.prototype.K,wp=xo.WebChannel=H2,xo.FetchXmlHttpFactory=Pg,On.prototype.listenOnce=On.prototype.L,On.prototype.getLastError=On.prototype.Ka,On.prototype.getLastErrorCode=On.prototype.Ba,On.prototype.getStatus=On.prototype.Z,On.prototype.getResponseJson=On.prototype.Oa,On.prototype.getResponseText=On.prototype.oa,On.prototype.send=On.prototype.ea,On.prototype.setWithCredentials=On.prototype.Ha,d1=xo.XhrIo=On}).apply(typeof Oy<"u"?Oy:typeof self<"u"?self:typeof window<"u"?window:{});const m1="@firebase/firestore";class lr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lr.UNAUTHENTICATED=new lr(null),lr.GOOGLE_CREDENTIALS=new lr("google-credentials-uid"),lr.FIRST_PARTY=new lr("first-party-uid"),lr.MOCK_USER=new lr("mock-user");let md="10.14.0";const ba=new Ls.Vy("@firebase/firestore");function _d(){return ba.logLevel}function he(n,...e){if(ba.logLevel<=Ls.$b.DEBUG){const t=e.map(IT);ba.debug(`Firestore (${md}): ${n}`,...t)}}function Un(n,...e){if(ba.logLevel<=Ls.$b.ERROR){const t=e.map(IT);ba.error(`Firestore (${md}): ${n}`,...t)}}function ki(n,...e){if(ba.logLevel<=Ls.$b.WARN){const t=e.map(IT);ba.warn(`Firestore (${md}): ${n}`,...t)}}function IT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function xe(n="Unexpected state"){const e=`FIRESTORE (${md}) INTERNAL ASSERTION FAILED: `+n;throw Un(e),new Error(e)}function ke(n,e){n||xe()}function Ee(n,e){return n}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends kt.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(lr.UNAUTHENTICATED))}shutdown(){}}class a8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class u8{constructor(e){this.t=e,this.currentUser=lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;ke(void 0===this.o);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new dr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,ie.A)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new dr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke("string"==typeof r.accessToken),new _1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(null===e||"string"==typeof e),new lr(e)}}class c8{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=lr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class l8{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new c8(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class y1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d8{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ke(void 0===this.o);const r=s=>{null!=s.error&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ke("string"==typeof t.token),this.R=t.token,new y1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function h8(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class v1{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=h8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Xe(n,e){return n<e?-1:n>e?1:0}function yd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function I1(n){return n+"\0"}class mn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mn.fromMillis(Date.now())}static fromDate(e){return mn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new mn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Le(e)}static min(){return new Le(new mn(0,0))}static max(){return new Le(new mn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ap{constructor(e,t,r){void 0===t?t=0:t>e.length&&xe(),void 0===r?r=e.length-t:r>e.length-t&&xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ap.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ap?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Et extends Ap{construct(e,t,r){return new Et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Et(t)}static emptyPath(){return new Et([])}}const f8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Ap{construct(e,t,r){return new ln(e,t,r)}static isValidIdentifier(e){return f8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ln(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(Et.fromString(e))}static fromName(e){return new Te(Et.fromString(e).popFirst(5))}static empty(){return new Te(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Et.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new Et(e.slice()))}}class vd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function ET(n){return n.fields.find(e=>2===e.kind)}function Qu(n){return n.fields.filter(e=>2!==e.kind)}vd.UNKNOWN_ID=-1;class Yu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Id{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Id(0,Vi.min())}}function E1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Le.fromTimestamp(1e9===r?new mn(t+1,0):new mn(t,r));return new Vi(i,Te.empty(),e)}function w1(n){return new Vi(n.readTime,n.key,-1)}class Vi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vi(Le.min(),Te.empty(),-1)}static max(){return new Vi(Le.max(),Te.empty(),-1)}}function wT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Te.comparator(n.documentKey,e.documentKey),0!==t?t:Xe(n.largestBatchId,e.largestBatchId))}const A1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class T1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Sa(n){return AT.apply(this,arguments)}function AT(){return(AT=(0,ie.A)(function*(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==A1)throw n;he("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):H.reject(t)}static resolve(e){return new H((t,r)=>{t(e)})}static reject(e){return new H((t,r)=>{r(e)})}static waitFor(e){return new H((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=H.resolve(!1);for(const r of e)t=t.next(i=>i?H.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new H((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;t(e[d]).next(g=>{o[d]=g,++a,a===s&&r(o)},g=>i(g))}})}static doWhile(e,t){return new H((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class Vy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new dr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Tp(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=TT(r.target.error);this.V.reject(new Tp(e,i))}}static open(e,t,r,i){try{return new Vy(t,e.transaction(i,r))}catch(s){throw new Tp(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(he("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _8(t)}}class Us{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Us.S((0,kt.ZQ)())&&Un("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return he("SimpleDb","Removing database:",e),Ju(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,kt.zW)())return!1;if(Us.v())return!0;const e=(0,kt.ZQ)(),t=Us.S(e),r=0<t&&t<10,i=C1(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ie.A)(function*(){return t.db||(he("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Tp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new ce(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ce(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Tp(e,a))},s.onupgradeneeded=o=>{he("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{he("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ie.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=Vy.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(g=>(u.g(),g)).catch(g=>(u.abort(g),H.reject(g))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,g="FirebaseError"!==d.name&&a<3;if(he("SimpleDb","Transaction failed with error:",d.message,"Retrying:",g),s.close(),!g)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function C1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class m8{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ju(this.B.delete())}}class Tp extends ce{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ra(n){return"IndexedDbTransactionError"===n.name}class _8{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(he("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(he("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ju(r)}add(e){return he("SimpleDb","ADD",this.store.name,e,e),Ju(this.store.add(e))}get(e){return Ju(this.store.get(e)).next(t=>(void 0===t&&(t=null),he("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return he("SimpleDb","DELETE",this.store.name,e),Ju(this.store.delete(e))}count(){return he("SimpleDb","COUNT",this.store.name),Ju(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new H((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new H((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){he("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new H((r,i)=>{t.onerror=s=>{const o=TT(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new H((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new m8(a),d=t(a.primaryKey,a.value,u);if(d instanceof H){const g=d.catch(m=>(u.done(),H.reject(m)));r.push(g)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>H.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ju(n){return new H((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=TT(r.target.error);t(i)}})}let D1=!1;function TT(n){const e=Us.S((0,kt.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return D1||(D1=!0,setTimeout(()=>{throw r},0)),r}}return n}class y8{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;he("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ie.A)(function*(){t.task=null;try{he("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Ra(r)?he("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Sa(r)}yield t.X(6e4)}))}}class v8{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ie.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return H.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return he("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(he("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=w1(s);wT(o,r)>0&&(r=o)}),new Vi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Fi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Cp(n){return null==n}function Dp(n){return 0===n&&1/n==-1/0}function b1(n){return"number"==typeof n&&Number.isInteger(n)&&!Dp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Fr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=S1(e)),e=I8(n.get(t),e);return S1(e)}function I8(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function S1(n){return n+"\x01\x01"}function Bs(n){const e=n.length;if(ke(e>=2),2===e)return ke("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Et.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&xe(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:xe()}s=o+2}return new Et(r)}const R1=["userId","batchId"];function Fy(n,e){return[n,Fr(e)]}function P1(n,e,t){return[n,Fr(e),t]}const E8={},w8=["prefixPath","collectionGroup","readTime","documentId"],A8=["prefixPath","collectionGroup","documentId"],T8=["collectionGroup","readTime","prefixPath","documentId"],C8=["canonicalId","targetId"],D8=["targetId","path"],b8=["path","targetId"],S8=["collectionId","parent"],R8=["indexId","uid"],P8=["uid","sequenceNumber"],M8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],x8=["indexId","uid","orderedDocumentKey"],N8=["userId","collectionPath","documentId"],O8=["userId","collectionPath","largestBatchId"],k8=["userId","collectionGroup","largestBatchId"],M1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],V8=[...M1,"documentOverlays"],x1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],N1=x1,CT=[...N1,"indexConfiguration","indexState","indexEntries"],F8=CT,L8=[...CT,"globals"];class DT extends T1{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function nr(n,e){const t=Ee(n);return Us.F(t._e,e)}function O1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function V1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class sn{constructor(e,t){this.comparator=e,this.root=t||Er.EMPTY}insert(e,t){return new sn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Er.BLACK,null,null))}remove(e){return new sn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Er.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ly(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ly(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ly(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ly(this.root,e,this.comparator,!0)}}class Ly{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Er{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Er.RED,this.left=i??Er.EMPTY,this.right=s??Er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Er(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Er.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();const e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}}Er.EMPTY=null,Er.RED=!0,Er.BLACK=!1,Er.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Er(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zt{constructor(e){this.comparator=e,this.data=new sn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new F1(this.data.getIterator())}getIteratorFrom(e){return new F1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zt(this.comparator);return t.data=e,t}}class F1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ed(n){return n.hasNext()?n.getNext():void 0}class vi{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new vi([])}unionWith(e){let t=new zt(ln.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new vi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class L1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new L1("Invalid base64 string: "+s):s}}(e);return new Nn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nn.EMPTY_BYTE_STRING=new Nn("");const B8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function No(n){if(ke(!!n),"string"==typeof n){let e=0;const t=B8.exec(n);if(ke(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_n(n.seconds),nanos:_n(n.nanos)}}function _n(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Oo(n){return"string"==typeof n?Nn.fromBase64String(n):Nn.fromUint8Array(n)}function Uy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function By(n){const e=n.mapValue.fields.__previous_value__;return Uy(e)?By(e):e}function bp(n){const e=No(n.mapValue.fields.__local_write_time__.timestampValue);return new mn(e.seconds,e.nanos)}class j8{constructor(e,t,r,i,s,o,a,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class Ma{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ma("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ma&&e.projectId===this.projectId&&e.database===this.database}}const xa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jy={nullValue:"NULL_VALUE"};function Na(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Uy(n)?4:H1(n)?9007199254740991:zy(n)?10:11:xe()}function js(n,e){if(n===e)return!0;const t=Na(n);if(t!==Na(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bp(n).isEqual(bp(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=No(i.timestampValue),a=No(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Oo(n.bytesValue).isEqual(Oo(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return _n(i.geoPointValue.latitude)===_n(s.geoPointValue.latitude)&&_n(i.geoPointValue.longitude)===_n(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _n(i.integerValue)===_n(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=_n(i.doubleValue),a=_n(s.doubleValue);return o===a?Dp(o)===Dp(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return yd(n.arrayValue.values||[],e.arrayValue.values||[],js);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(O1(o)!==O1(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!js(o[u],a[u])))return!1;return!0}(n,e);default:return xe()}var s}function Sp(n,e){return void 0!==(n.values||[]).find(t=>js(t,e))}function Oa(n,e){if(n===e)return 0;const t=Na(n),r=Na(e);if(t!==r)return Xe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=_n(s.integerValue||s.doubleValue),u=_n(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return U1(n.timestampValue,e.timestampValue);case 4:return U1(bp(n),bp(e));case 5:return Xe(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Oo(s),u=Oo(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const g=Xe(a[d],u[d]);if(0!==g)return g}return Xe(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Xe(_n(s.latitude),_n(o.latitude));return 0!==a?a:Xe(_n(s.longitude),_n(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return B1(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,d,g;const w=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,T=null===(u=(o.fields||{}).value)||void 0===u?void 0:u.arrayValue,D=Xe((null===(d=w?.values)||void 0===d?void 0:d.length)||0,(null===(g=T?.values)||void 0===g?void 0:g.length)||0);return 0!==D?D:B1(w,T)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===xa.mapValue&&o===xa.mapValue)return 0;if(s===xa.mapValue)return 1;if(o===xa.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},g=Object.keys(d);u.sort(),g.sort();for(let m=0;m<u.length&&m<g.length;++m){const v=Xe(u[m],g[m]);if(0!==v)return v;const w=Oa(a[u[m]],d[g[m]]);if(0!==w)return w}return Xe(u.length,g.length)}(n.mapValue,e.mapValue);default:throw xe()}}function U1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Xe(n,e);const t=No(n),r=No(e),i=Xe(t.seconds,r.seconds);return 0!==i?i:Xe(t.nanos,r.nanos)}function B1(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Oa(t[i],r[i]);if(s)return s}return Xe(t.length,r.length)}function wd(n){return bT(n)}function bT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=No(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Oo(n.bytesValue).toBase64():"referenceValue"in n?Te.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=bT(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${bT(t.fields[o])}`;return i+"}"}(n.mapValue):xe()}function Zu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ST(n){return!!n&&"integerValue"in n}function Rp(n){return!!n&&"arrayValue"in n}function j1(n){return!!n&&"nullValue"in n}function $1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hy(n){return!!n&&"mapValue"in n}function zy(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Pp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Pa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function H1(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const z1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function $8(n){return"nullValue"in n?jy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Zu(Ma.empty(),Te.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?zy(n)?z1:{mapValue:{}}:xe()}function H8(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Zu(Ma.empty(),Te.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?z1:"mapValue"in n?zy(n)?{mapValue:{}}:xa:xe()}function q1(n,e){const t=Oa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function G1(n,e){const t=Oa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pp(t)}setAll(e){let t=ln.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Pp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Hy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return js(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Hy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Pa(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new wr(Pp(this.value))}}function W1(n){const e=[];return Pa(n.fields,(t,r)=>{const i=new ln([t]);if(Hy(r)){const s=W1(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new vi(e)}class dn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new dn(e,0,Le.min(),Le.min(),Le.min(),wr.empty(),0)}static newFoundDocument(e,t,r,i){return new dn(e,1,t,Le.min(),r,i,0)}static newNoDocument(e,t){return new dn(e,2,t,Le.min(),Le.min(),wr.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,Le.min(),Le.min(),wr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ka{constructor(e,t){this.position=e,this.inclusive=t}}function K1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Te.comparator(Te.fromName(o.referenceValue),t.key):Oa(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Q1(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!js(n.position[t],e.position[t]))return!1;return!0}class Mp{constructor(e,t="asc"){this.field=e,this.dir=t}}function z8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Y1{}class wt extends Y1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new q8(e,t,r):"array-contains"===t?new K8(e,r):"in"===t?new nk(e,r):"not-in"===t?new Q8(e,r):"array-contains-any"===t?new Y8(e,r):new wt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new G8(e,r):new W8(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Oa(t,this.value)):null!==t&&Na(this.value)===Na(t)&&this.matchesComparison(Oa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jt extends Y1{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new jt(e,t)}matches(e){return Ad(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ad(n){return"and"===n.op}function RT(n){return"or"===n.op}function PT(n){return J1(n)&&Ad(n)}function J1(n){for(const e of n.filters)if(e instanceof jt)return!1;return!0}function MT(n){if(n instanceof wt)return n.field.canonicalString()+n.op.toString()+wd(n.value);if(PT(n))return n.filters.map(e=>MT(e)).join(",");{const e=n.filters.map(t=>MT(t)).join(",");return`${n.op}(${e})`}}function Z1(n,e){return n instanceof wt?(r=n,(i=e)instanceof wt&&r.op===i.op&&r.field.isEqual(i.field)&&js(r.value,i.value)):n instanceof jt?function(r,i){return i instanceof jt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&Z1(o,i.filters[a]),!0)}(n,e):void xe();var r,i}function X1(n,e){const t=n.filters.concat(e);return jt.create(t,n.op)}function ek(n){return n instanceof wt?`${(t=n).field.canonicalString()} ${t.op} ${wd(t.value)}`:n instanceof jt?function(t){return t.op.toString()+" {"+t.getFilters().map(ek).join(" ,")+"}"}(n):"Filter";var t}class q8 extends wt{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class G8 extends wt{constructor(e,t){super(e,"in",t),this.keys=tk(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class W8 extends wt{constructor(e,t){super(e,"not-in",t),this.keys=tk(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function tk(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Te.fromName(r.referenceValue))}class K8 extends wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rp(t)&&Sp(t.arrayValue,this.value)}}class nk extends wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Sp(this.value.arrayValue,t)}}class Q8 extends wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Sp(this.value.arrayValue,t)}}class Y8 extends wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Sp(this.value.arrayValue,r))}}class J8{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function xT(n,e=null,t=[],r=[],i=null,s=null,o=null){return new J8(n,e,t,r,i,s,o)}function Xu(n){const e=Ee(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>MT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Cp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wd(r)).join(",")),e.ue=t}return e.ue}function xp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!z8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Z1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Q1(n.startAt,e.startAt)&&Q1(n.endAt,e.endAt)}function qy(n){return Te.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Gy(n,e){return n.filters.filter(t=>t instanceof wt&&t.field.isEqual(e))}function rk(n,e,t){let r=jy,i=!0;for(const s of Gy(n,e)){let o=jy,a=!0;switch(s.op){case"<":case"<=":o=$8(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=jy}q1({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];q1({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function ik(n,e,t){let r=xa,i=!0;for(const s of Gy(n,e)){let o=xa,a=!0;switch(s.op){case">=":case">":o=H8(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=xa}G1({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];G1({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class ko{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function sk(n,e,t,r,i,s,o,a){return new ko(n,e,t,r,i,s,o,a)}function Td(n){return new ko(n)}function ok(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function NT(n){return null!==n.collectionGroup}function Cd(n){const e=Ee(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new zt(ln.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Mp(s,r))}),t.has(ln.keyField().canonicalString())||e.ce.push(new Mp(ln.keyField(),r))}return e.ce}function Lr(n){const e=Ee(n);return e.le||(e.le=function uk(n,e){if("F"===n.limitType)return xT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Mp(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new ka(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ka(n.startAt.position,n.startAt.inclusive):null;return xT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Cd(n))),e.le}function OT(n,e){const t=n.filters.concat([e]);return new ko(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Wy(n,e,t){return new ko(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Np(n,e){return xp(Lr(n),Lr(e))&&n.limitType===e.limitType}function ck(n){return`${Xu(Lr(n))}|lt:${n.limitType}`}function Dd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ek(i)).join(", ")}]`),Cp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>wd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>wd(i)).join(",")),`Target(${r})`}(Lr(n))}; limitType=${n.limitType})`}function Op(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Cd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const d=K1(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,Cd(r),i)||r.endAt&&!function(o,a,u){const d=K1(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,Cd(r),i)));var r,i}function lk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dk(n){return(e,t)=>{let r=!1;for(const i of Cd(n)){const s=Z8(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Z8(n,e,t){const r=n.field.isKeyField()?Te.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?Oa(u,d):xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return xe()}}class Vo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return V1(this.inner)}size(){return this.innerSize}}const X8=new sn(Te.comparator);function Ii(){return X8}const hk=new sn(Te.comparator);function kp(...n){let e=hk;for(const t of n)e=e.insert(t.key,t);return e}function fk(n){let e=hk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $s(){return Vp()}function pk(){return Vp()}function Vp(){return new Vo(n=>n.toString(),(n,e)=>n.isEqual(e))}const eK=new sn(Te.comparator),tK=new zt(Te.comparator);function at(...n){let e=tK;for(const t of n)e=e.add(t);return e}const nK=new zt(Xe);function kT(){return nK}function VT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dp(e)?"-0":e}}function gk(n){return{integerValue:""+n}}function mk(n,e){return b1(e)?gk(e):VT(n,e)}class Ky{constructor(){this._=void 0}}function rK(n,e,t){return n instanceof bd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Uy(s)&&(s=By(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof ec?yk(n,e):n instanceof tc?vk(n,e):function(i,s){const o=_k(i,s),a=Ik(o)+Ik(i.Pe);return ST(o)&&ST(i.Pe)?gk(a):VT(i.serializer,a)}(n,e)}function iK(n,e,t){return n instanceof ec?yk(n,e):n instanceof tc?vk(n,e):t}function _k(n,e){return n instanceof Sd?ST(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class bd extends Ky{}class ec extends Ky{constructor(e){super(),this.elements=e}}function yk(n,e){const t=Ek(e);for(const r of n.elements)t.some(i=>js(i,r))||t.push(r);return{arrayValue:{values:t}}}class tc extends Ky{constructor(e){super(),this.elements=e}}function vk(n,e){let t=Ek(e);for(const r of n.elements)t=t.filter(i=>!js(i,r));return{arrayValue:{values:t}}}class Sd extends Ky{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ik(n){return _n(n.integerValue||n.doubleValue)}function Ek(n){return Rp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Fp{constructor(e,t){this.field=e,this.transform=t}}class oK{constructor(e,t){this.version=e,this.transformResults=t}}class yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yn}static exists(e){return new yn(void 0,e)}static updateTime(e){return new yn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Yy{}function wk(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Pd(n.key,yn.none()):new Rd(n.key,n.data,yn.none());{const t=n.data,r=wr.empty();let i=new zt(ln.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Fo(n.key,r,new vi(i.toArray()),yn.none())}}function aK(n,e,t){n instanceof Rd?function(i,s,o){const a=i.value.clone(),u=Ck(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Fo?function(i,s,o){if(!Qy(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Ck(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Tk(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Lp(n,e,t,r){return n instanceof Rd?function(s,o,a,u){if(!Qy(s.precondition,o))return a;const d=s.value.clone(),g=Dk(s.fieldTransforms,u,o);return d.setAll(g),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Fo?function(s,o,a,u){if(!Qy(s.precondition,o))return a;const d=Dk(s.fieldTransforms,u,o),g=o.data;return g.setAll(Tk(s)),g.setAll(d),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,Qy(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function uK(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=_k(r.transform,i||null);null!=s&&(null===t&&(t=wr.empty()),t.set(r.field,s))}return t||null}function Ak(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&yd(r,i,(s,o)=>function sK(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof ec&&i instanceof ec||r instanceof tc&&i instanceof tc?yd(r.elements,i.elements,js):r instanceof Sd&&i instanceof Sd?js(r.Pe,i.Pe):r instanceof bd&&i instanceof bd);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Rd extends Yy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fo extends Yy{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Tk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Ck(n,e,t){const r=new Map;ke(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,iK(o,a,t[i]))}return r}function Dk(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,rK(s,o,e))}return r}class Pd extends Yy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FT extends Yy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class LT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&aK(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Lp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Lp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=pk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=wk(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),at())}isEqual(e){return this.batchId===e.batchId&&yd(this.mutations,e.mutations,(t,r)=>Ak(t,r))&&yd(this.baseMutations,e.baseMutations,(t,r)=>Ak(t,r))}}class UT{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ke(e.mutations.length===r.length);let i=eK;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new UT(e,t,r,i)}}class BT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cK{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gn,Dt;function Sk(n){switch(n){default:return xe();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function Rk(n){if(void 0===n)return Un("GRPC error has no .code"),J.UNKNOWN;switch(n){case Gn.OK:return J.OK;case Gn.CANCELLED:return J.CANCELLED;case Gn.UNKNOWN:return J.UNKNOWN;case Gn.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Gn.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Gn.INTERNAL:return J.INTERNAL;case Gn.UNAVAILABLE:return J.UNAVAILABLE;case Gn.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Gn.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Gn.NOT_FOUND:return J.NOT_FOUND;case Gn.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Gn.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Gn.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Gn.ABORTED:return J.ABORTED;case Gn.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Gn.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Gn.DATA_LOSS:return J.DATA_LOSS;default:return xe()}}(Dt=Gn||(Gn={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";function Pk(){return new TextEncoder}const lK=new Ku([4294967295,4294967295],0);function Mk(n){const e=Pk().encode(n),t=new l1;return t.update(e),new Uint8Array(t.digest())}function xk(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ku([t,r],0),new Ku([i,s],0)]}class jT{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Up(`Invalid padding: ${t}`);if(r<0)throw new Up(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Up(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Up(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ku.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ku.fromNumber(r)));return 1===i.compare(lK)&&(i=new Ku([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Mk(e),[r,i]=xk(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new jT(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=Mk(e),[r,i]=xk(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Up extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,jp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Bp(Le.min(),i,new sn(Xe),Ii(),at())}}class jp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new jp(r,t,at(),at(),at())}}class Zy{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Nk{constructor(e,t){this.targetId=e,this.me=t}}class Ok{constructor(e,t,r=Nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class kk{constructor(){this.fe=0,this.ge=Fk(),this.pe=Nn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=at(),t=at(),r=at();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:xe()}}),new jp(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Fk()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dK{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ii(),this.qe=Vk(),this.Qe=new sn(Xe)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(qy(s))if(0===r){const o=new Te(s.path);this.Ue(t,o,dn.newNoDocument(o,Le.min()))}else ke(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Oo(r).toUint8Array()}catch(u){if(u instanceof L1)return ki("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new jT(o,i,s)}catch(u){return ki(u instanceof Up?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&qy(a.target)){const u=new Te(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,dn.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=at();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Bp(e,t,this.Qe,this.ke,r);return this.ke=Ii(),this.qe=Vk(),this.Qe=new sn(Xe),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new kk,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new zt(Xe),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||he("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new kk),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Vk(){return new sn(Te.comparator)}function Fk(){return new sn(Te.comparator)}const hK={asc:"ASCENDING",desc:"DESCENDING"},fK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pK={and:"AND",or:"OR"};class gK{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $T(n,e){return n.useProto3Json||Cp(e)?e:{value:e}}function Md(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mK(n,e){return Md(n,e.toTimestamp())}function Bn(n){return ke(!!n),Le.fromTimestamp(function(t){const r=No(t);return new mn(r.seconds,r.nanos)}(n))}function HT(n,e){return zT(n,e).canonicalString()}function zT(n,e){const t=(i=n,new Et(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function Uk(n){const e=Et.fromString(n);return ke(Yk(e)),e}function $p(n,e){return HT(n.databaseId,e.path)}function Hs(n,e){const t=Uk(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te($k(t))}function Bk(n,e){return HT(n.databaseId,e)}function jk(n){const e=Uk(n);return 4===e.length?Et.emptyPath():$k(e)}function qT(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $k(n){return ke(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Hk(n,e,t){return{name:$p(n,e),fields:t.value.mapValue.fields}}function zk(n,e,t){const r=Hs(n,e.name),i=Bn(e.updateTime),s=e.createTime?Bn(e.createTime):Le.min(),o=new wr({mapValue:{fields:e.fields}}),a=dn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Hp(n,e){let t;if(e instanceof Rd)t={update:Hk(n,e.key,e.value)};else if(e instanceof Pd)t={delete:$p(n,e.key)};else if(e instanceof Fo)t={update:Hk(n,e.key,e.data),updateMask:TK(e.fieldMask)};else{if(!(e instanceof FT))return xe();t={verify:$p(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof bd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ec)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof tc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:mK(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:xe()),t;var s}function GT(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?yn.updateTime(Bn(s.updateTime)):void 0!==s.exists?yn.exists(s.exists):yn.none():yn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(ke("REQUEST_TIME"===a.setToServerValue),u=new bd):"appendMissingElements"in a?u=new ec(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new tc(a.removeAllFromArray.values||[]):"increment"in a?u=new Sd(o,a.increment):xe();const d=ln.fromServerFormat(a.fieldPath);return new Fp(d,u)}(n,i)):[];var s;if(e.update){const i=Hs(n,e.update.name),s=new wr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new vi((e.updateMask.fieldPaths||[]).map(g=>ln.fromServerFormat(g)));return new Fo(i,s,o,t,r)}return new Rd(i,s,t,r)}if(e.delete){const i=Hs(n,e.delete);return new Pd(i,t)}if(e.verify){const i=Hs(n,e.verify);return new FT(i,t)}return xe()}function qk(n,e){return{documents:[Bk(n,e.path)]}}function Xy(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Bk(n,i);const s=function(d){if(0!==d.length)return Qk(jt.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(d){if(0!==d.length)return d.map(g=>{return{field:Va((v=g).field),direction:EK(v.dir)};var v})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=$T(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i};var d}function Wk(n){let e=jk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ke(1===r);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=function(m){const v=Kk(m);return v instanceof jt&&PT(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(v=>{return new Mp(xd((T=v).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let a=null;t.limit&&(a=function(m){let v;return v="object"==typeof m?m.value:m,Cp(v)?null:v}(t.limit));let u=null;var m;t.startAt&&(u=new ka((m=t.startAt).values||[],!!m.before));let d=null;return t.endAt&&(d=function(m){return new ka(m.values||[],!m.before)}(t.endAt)),sk(e,i,o,s,a,"F",u,d)}function Kk(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=xd(t.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xd(t.unaryFilter.field);return wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xd(t.unaryFilter.field);return wt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xd(t.unaryFilter.field);return wt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(n):void 0!==n.fieldFilter?wt.create(xd((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return jt.create(t.compositeFilter.filters.map(r=>Kk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xe()}}(t.compositeFilter.op))}(n):xe();var t}function EK(n){return hK[n]}function wK(n){return fK[n]}function AK(n){return pK[n]}function Va(n){return{fieldPath:n.canonicalString()}}function xd(n){return ln.fromServerFormat(n.fieldPath)}function Qk(n){return n instanceof wt?function(t){if("=="===t.op){if($1(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NAN"}};if(j1(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NULL"}}}else if("!="===t.op){if($1(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NAN"}};if(j1(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Va(t.field),op:wK(t.op),value:t.value}}}(n):n instanceof jt?function(t){const r=t.getFilters().map(i=>Qk(i));return 1===r.length?r[0]:{compositeFilter:{op:AK(t.op),filters:r}}}(n):xe()}function TK(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Yk(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Lo{constructor(e,t,r,i,s=Le.min(),o=Le.min(),a=Nn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Lo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Lo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Lo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Jk{constructor(e){this.ct=e}}function Zk(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ev(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:$p(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Md(s,o.version.toTimestamp()),createTime:Md(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:nc(e.version)};else{if(!e.isUnknownDocument())return xe();r.unknownDocument={path:t.path.toArray(),version:nc(e.version)}}var s,o;return r}function ev(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function nc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function rc(n){const e=new mn(n.seconds,n.nanoseconds);return Le.fromTimestamp(e)}function ic(n,e){const t=(e.baseMutations||[]).map(s=>GT(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>GT(n.ct,s)),i=mn.fromMillis(e.localWriteTimeMs);return new LT(e.batchId,i,t,r)}function zp(n){const e=rc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?rc(n.lastLimboFreeSnapshotVersion):Le.min();let r;return r=void 0!==n.query.documents?(ke(1===(s=n.query).documents.length),Lr(Td(jk(s.documents[0])))):function(s){return Lr(Wk(s))}(n.query),new Lo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Nn.fromBase64String(n.resumeToken));var s}function Xk(n,e){const t=nc(e.snapshotVersion),r=nc(e.lastLimboFreeSnapshotVersion);let i;i=qy(e.target)?qk(n.ct,e.target):Xy(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function WT(n){const e=Wk({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Wy(e,e.limit,"L"):e}function KT(n,e){return new BT(e.largestBatchId,GT(n.ct,e.overlayMutation))}function eV(n,e){const t=e.path.lastSegment();return[n,Fr(e.path.popLast()),t]}function tV(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:nc(r.readTime),documentKey:Fr(r.documentKey.path),largestBatchId:r.largestBatchId}}class DK{getBundleMetadata(e,t){return nV(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:rc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return nV(e).put({bundleId:(i=t).id,createTime:nc(Bn(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return rV(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:WT(s.bundledQuery),readTime:rc(s.readTime)};var s})}saveNamedQuery(e,t){return rV(e).put({name:(i=t).name,readTime:nc(Bn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function nV(n){return nr(n,"bundles")}function rV(n){return nr(n,"namedQueries")}class tv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new tv(e,t.uid||"")}getOverlay(e,t){return qp(e).get(eV(this.userId,t)).next(r=>r?KT(this.serializer,r):null)}getOverlays(e,t){const r=$s();return H.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new BT(t,o);i.push(this.ht(e,a))}),H.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Fr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(qp(e).j("collectionPathOverlayIndex",a))}),H.waitFor(s)}getOverlaysForCollection(e,t,r){const i=$s(),s=Fr(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return qp(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=KT(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=$s();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qp(e).J({index:"collectionGroupOverlayIndex",range:a},(u,d,g)=>{const m=KT(this.serializer,d);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):g.done()}).next(()=>s)}ht(e,t){return qp(e).put(function(i,s,o){const[a,u,d]=eV(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Hp(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function qp(n){return nr(n,"documentOverlays")}class bK{Pt(e){return nr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?Nn.fromUint8Array(r):Nn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class sc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(_n(e.integerValue));else if("doubleValue"in e){const r=_n(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Dp(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=No(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Oo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?H1(e)?this.dt(t,Number.MAX_SAFE_INTEGER):zy(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):xe()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(_n(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Te.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function SK(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function iV(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=SK(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}sc.vt=new sc;class RK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=iV(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=iV(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class PK{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class MK{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Gp{constructor(){this.jt=new RK,this.Ht=new PK(this.jt),this.Jt=new MK(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class oc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new oc(this.indexId,this.documentKey,this.arrayValue,r)}}function Fa(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=sV(n.arrayValue,e.arrayValue),0!==t?t:(t=sV(n.directionalValue,e.directionalValue),0!==t?t:Te.comparator(n.documentKey,e.documentKey)))}function sV(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class oV{constructor(e){this.Xt=new zt((t,r)=>ln.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ke(e.collectionGroup===this.collectionId),this.nn)return!1;const t=ET(e);if(void 0!==t&&!this.sn(t))return!1;const r=Qu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new zt(ln.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Yu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Yu(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Yu(r.field,"asc"===r.dir?0:1)));return new vd(vd.UNKNOWN_ID,this.collectionId,t,Id.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function aV(n){var e,t;if(ke(n instanceof wt||n instanceof jt),n instanceof wt){if(n instanceof nk){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>wt.create(n.field,"==",s)))||[];return jt.create(i,"or")}return n}const r=n.filters.map(i=>aV(i));return jt.create(r,n.op)}function xK(n){if(0===n.getFilters().length)return[];const e=JT(aV(n));return ke(uV(e)),QT(e)||YT(e)?[e]:e.getFilters()}function QT(n){return n instanceof wt}function YT(n){return n instanceof jt&&PT(n)}function uV(n){return QT(n)||YT(n)||function(t){if(t instanceof jt&&RT(t)){for(const r of t.getFilters())if(!QT(r)&&!YT(r))return!1;return!0}return!1}(n)}function JT(n){if(ke(n instanceof wt||n instanceof jt),n instanceof wt)return n;if(1===n.filters.length)return JT(n.filters[0]);const e=n.filters.map(r=>JT(r));let t=jt.create(e,n.op);return t=nv(t),uV(t)?t:(ke(t instanceof jt),ke(Ad(t)),ke(t.filters.length>1),t.filters.reduce((r,i)=>ZT(r,i)))}function ZT(n,e){let t;return ke(n instanceof wt||n instanceof jt),ke(e instanceof wt||e instanceof jt),t=n instanceof wt?e instanceof wt?jt.create([n,e],"and"):cV(n,e):e instanceof wt?cV(e,n):function(i,s){if(ke(i.filters.length>0&&s.filters.length>0),Ad(i)&&Ad(s))return X1(i,s.getFilters());const o=RT(i)?i:s,a=RT(i)?s:i,u=o.filters.map(d=>ZT(d,a));return jt.create(u,"or")}(n,e),nv(t)}function cV(n,e){if(Ad(e))return X1(e,n.getFilters());{const t=e.filters.map(r=>ZT(n,r));return jt.create(t,"or")}}function nv(n){if(ke(n instanceof wt||n instanceof jt),n instanceof wt)return n;const e=n.getFilters();if(1===e.length)return nv(e[0]);if(J1(n))return n;const t=e.map(i=>nv(i)),r=[];return t.forEach(i=>{i instanceof wt?r.push(i):i instanceof jt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:jt.create(r,n.op)}class NK{constructor(){this.un=new XT}addToCollectionParentIndex(e,t){return this.un.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(Vi.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(Vi.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class XT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new zt(Et.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zt(Et.comparator)).toArray()}}const rv=new Uint8Array(0);class OK{constructor(e,t){this.databaseId=t,this.cn=new XT,this.ln=new Vo(r=>Xu(r),(r,i)=>xp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Fr(i)};return lV(e).put(s)}return H.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[I1(t),""],!1,!0);return lV(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Bs(o.parent))}return r})}addFieldIndex(e,t){const r=Wp(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Od(e);return s.next(a=>{o.put(tV(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Wp(e),i=Od(e),s=Nd(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Wp(e),r=Nd(e),i=Od(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return H.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new oV(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Nd(e);let i=!0;const s=new Map;return H.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=at();const a=[];return H.forEach(s,(u,d)=>{var G;he("IndexedDbIndexManager",`Using index ${G=u,`id=${G.indexId}|cg=${G.collectionGroup}|f=${G.fields.map(ae=>`${ae.fieldPath}:${ae.kind}`).join(",")}`} to execute ${Xu(t)}`);const g=function(G,ae){const ye=ET(ae);if(void 0===ye)return null;for(const Fe of Gy(G,ye.fieldPath))switch(Fe.op){case"array-contains-any":return Fe.value.arrayValue.values||[];case"array-contains":return[Fe.value]}return null}(d,u),m=function(G,ae){const ye=new Map;for(const Fe of Qu(ae))for(const V of Gy(G,Fe.fieldPath))switch(V.op){case"==":case"in":ye.set(Fe.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return ye.set(Fe.fieldPath.canonicalString(),V.value),Array.from(ye.values())}return null}(d,u),v=function(G,ae){const ye=[];let Fe=!0;for(const V of Qu(ae)){const b=0===V.kind?rk(G,V.fieldPath,G.startAt):ik(G,V.fieldPath,G.startAt);ye.push(b.value),Fe&&(Fe=b.inclusive)}return new ka(ye,Fe)}(d,u),w=function(G,ae){const ye=[];let Fe=!0;for(const V of Qu(ae)){const b=0===V.kind?ik(G,V.fieldPath,G.endAt):rk(G,V.fieldPath,G.endAt);ye.push(b.value),Fe&&(Fe=b.inclusive)}return new ka(ye,Fe)}(d,u),T=this.In(u,d,v),D=this.In(u,d,w),M=this.Tn(u,d,m),z=this.En(u.indexId,g,T,v.inclusive,D,w.inclusive,M);return H.forEach(z,F=>r.G(F,t.limit).next(G=>{G.forEach(ae=>{const ye=Te.fromSegments(ae.documentKey);o.has(ye)||(o=o.add(ye),a.push(ye))})}))}).next(()=>a)}return H.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:xK(jt.create(e.filters,"and")).map(r=>xT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),d=u/(null!=t?t.length:1),g=[];for(let m=0;m<u;++m){const v=t?this.dn(t[m/d]):rv,w=this.An(e,v,r[m%d],i),T=this.Rn(e,v,s[m%d],o),D=a.map(M=>this.An(e,v,M,!0));g.push(...this.createRange(w,T,D))}return g}An(e,t,r,i){const s=new oc(e,Te.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new oc(e,Te.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new oV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return H.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new zt(ln.comparator),g=!1;for(const m of u.filters)for(const v of m.getFlattenedFilters())v.field.isKeyField()||("array-contains"===v.op||"array-contains-any"===v.op?g=!0:d=d.add(v.field));for(const m of u.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(g?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new Gp;for(const i of Qu(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);sc.vt.It(s,o)}return r.zt()}dn(e){const t=new Gp;return sc.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Gp;return sc.vt.It(Zu(this.databaseId,t),r.Yt(function(s){const o=Qu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new Gp);let s=0;for(const o of Qu(e)){const a=r[s++];for(const u of i)if(this.fn(t,o.fieldPath)&&Rp(a))i=this.gn(i,o,a);else{const d=u.Yt(o.kind);sc.vt.It(a,d)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Gp;u.seed(a.zt()),sc.vt.It(o,u.Yt(t.kind)),s.push(u)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof wt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Wp(e),i=Od(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return H.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(g,m){const v=m?new Id(m.sequenceNumber,new Vi(rc(m.readTime),new Te(Bs(m.documentKey)),m.largestBatchId)):Id.empty(),w=g.fields.map(([T,D])=>new Yu(ln.fromServerFormat(T),D));return new vd(g.indexId,g.collectionGroup,w,v)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Xe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Wp(e),s=Od(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>H.forEach(a,u=>s.put(tV(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return H.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?H.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),H.forEach(a,u=>this.wn(e,i,u).next(d=>{const g=this.Sn(s,u);return d.isEqual(g)?H.resolve():this.bn(e,s,u,d,g)}))))})}Dn(e,t,r,i){return Nd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Nd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Nd(e);let s=new zt(Fa);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new oc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new zt(Fa);const i=this.Vn(t,e);if(null==i)return r;const s=ET(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Rp(o))for(const a of o.arrayValue.values||[])r=r.add(new oc(t.indexId,e.key,this.dn(a),i))}else r=r.add(new oc(t.indexId,e.key,rv,i));return r}bn(e,t,r,i,s){he("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,d,g,m,v){const w=u.getIterator(),T=d.getIterator();let D=Ed(w),M=Ed(T);for(;D||M;){let z=!1,F=!1;if(D&&M){const G=g(D,M);G<0?F=!0:G>0&&(z=!0)}else null!=D?F=!0:z=!0;z?(m(M),M=Ed(T)):F?(v(D),D=Ed(w)):(D=Ed(w),M=Ed(T))}}(i,s,Fa,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),H.waitFor(o)}yn(e){let t=1;return Od(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Fa(o,a)).filter((o,a,u)=>!a||0!==Fa(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Fa(o,e),u=Fa(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,rv,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,rv,[]]))}return s}Cn(e,t){return Fa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dV)}getMinOffset(e,t){return H.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||xe())).next(dV)}}function lV(n){return nr(n,"collectionParents")}function Nd(n){return nr(n,"indexEntries")}function Wp(n){return nr(n,"indexConfiguration")}function Od(n){return nr(n,"indexState")}function dV(n){ke(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;wT(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Vi(e.readTime,e.documentKey,t)}const hV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ur{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ur(e,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fV(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:o},(g,m,v)=>(a++,v.delete()));s.push(u.next(()=>{ke(1===a)}));const d=[];for(const g of t.mutations){const m=P1(e,g.key.path,t.batchId);s.push(i.delete(m)),d.push(g.key)}return H.waitFor(s).next(()=>d)}function iv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw xe();e=n.noDocument}return JSON.stringify(e).length}Ur.DEFAULT_COLLECTION_PERCENTILE=10,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ur.DEFAULT=new Ur(41943040,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ur.DISABLED=new Ur(-1,0,0);class sv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){ke(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new sv(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return La(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=kd(e),o=La(e);return o.add({}).next(a=>{ke("number"==typeof a);const u=new LT(a,t,r,i),d=function(w,T,D){const M=D.baseMutations.map(F=>Hp(w.ct,F)),z=D.mutations.map(F=>Hp(w.ct,F));return{userId:T,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:M,mutations:z}}(this.serializer,this.userId,u),g=[];let m=new zt((v,w)=>Xe(v.canonicalString(),w.canonicalString()));for(const v of i){const w=P1(this.userId,v.key.path,a);m=m.add(v.key.path.popLast()),g.push(o.put(d)),g.push(s.put(w,E8))}return m.forEach(v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),H.waitFor(g).next(()=>u)})}lookupMutationBatch(e,t){return La(e).get(t).next(r=>r?(ke(r.userId===this.userId),ic(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?H.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return La(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(ke(a.batchId>=r),s=ic(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return La(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return La(e).U("userMutationsIndex",t).next(r=>r.map(i=>ic(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Fy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return kd(e).J({range:i},(o,a,u)=>{const[d,g,m]=o,v=Bs(g);if(d===this.userId&&t.path.isEqual(v))return La(e).get(m).next(w=>{if(!w)throw xe();ke(w.userId===this.userId),s.push(ic(this.serializer,w))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zt(Xe);const i=[];return t.forEach(s=>{const o=Fy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=kd(e).J({range:a},(d,g,m)=>{const[v,w,T]=d,D=Bs(w);v===this.userId&&s.path.isEqual(D)?r=r.add(T):m.done()});i.push(u)}),H.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Fy(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new zt(Xe);return kd(e).J({range:o},(u,d,g)=>{const[m,v,w]=u,T=Bs(v);m===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(w)):g.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(La(e).get(s).next(o=>{if(null===o)throw xe();ke(o.userId===this.userId),r.push(ic(this.serializer,o))}))}),H.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return fV(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),H.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return H.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return kd(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Bs(s[1]);i.push(u)}else a.done()}).next(()=>{ke(0===i.length)})})}containsKey(e,t){return pV(e,this.userId,t)}Nn(e){return gV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pV(n,e,t){const r=Fy(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return kd(n).J({range:s,H:!0},(a,u,d)=>{const[g,m,v]=a;g===e&&m===i&&(o=!0),d.done()}).next(()=>o)}function La(n){return nr(n,"mutations")}function kd(n){return nr(n,"documentMutations")}function gV(n){return nr(n,"mutationQueues")}class ac{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ac(0)}static kn(){return new ac(-1)}}class kK{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new ac(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Le.fromTimestamp(new mn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Vd(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(ke(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Vd(e).J((o,a)=>{const u=zp(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>H.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Vd(e).J((r,i)=>{const s=zp(i);t(s)})}qn(e){return mV(e).get("targetGlobalKey").next(t=>(ke(null!==t),t))}Qn(e,t){return mV(e).put("targetGlobalKey",t)}Kn(e,t){return Vd(e).put(Xk(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Xu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Vd(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=zp(a);xp(t,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Ua(e);return t.forEach(o=>{const a=Fr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),H.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ua(e);return H.forEach(t,s=>{const o=Fr(s.path);return H.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Ua(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ua(e);let s=at();return i.J({range:r,H:!0},(o,a,u)=>{const d=Bs(o[1]),g=new Te(d);s=s.add(g)}).next(()=>s)}containsKey(e,t){const r=Fr(t.path),i=IDBKeyRange.bound([r],[I1(r)],!1,!0);let s=0;return Ua(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}ot(e,t){return Vd(e).get(t).next(r=>r?zp(r):null)}}function Vd(n){return nr(n,"targets")}function mV(n){return nr(n,"targetGlobal")}function Ua(n){return nr(n,"targetDocuments")}function _V([n,e],[t,r]){const i=Xe(n,t);return 0===i?Xe(e,r):i}class VK{constructor(e){this.Un=e,this.buffer=new zt(_V),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();_V(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;he("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ie.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ra(r)?he("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Sa(r)}yield t.Hn(3e5)}))}}class FK{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return H.resolve(Fi.oe);const r=new VK(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(hV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hV):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,u,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),_d()<=Ls.$b.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-g}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(d-u)+`ms\nTotal Duration: ${d-g}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class LK{constructor(e,t){this.db=e,this.garbageCollector=function vV(n,e){return new FK(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return ov(e,r)}removeReference(e,t,r){return ov(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ov(e,t)}nr(e,t){return function(i,s){let o=!1;return gV(i).Y(a=>pV(i,a,s).next(u=>(u&&(o=!0),H.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const u=this.nr(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Le.min()),Ua(e).delete([0,Fr(o.path)])))});i.push(u)}}).next(()=>H.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ov(e,t)}tr(e,t){const r=Ua(e);let i,s=Fi.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==Fi.oe&&t(new Te(Bs(i)),s),s=d,i=u):s=Fi.oe}).next(()=>{s!==Fi.oe&&t(new Te(Bs(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ov(n,e){return Ua(n).put((i=n.currentSequenceNumber,{targetId:0,path:Fr(e.path),sequenceNumber:i}));var i}class IV{constructor(){this.changes=new Vo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class UK{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return uc(e).put(r)}removeEntry(e,t,r){return uc(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ev(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=dn.newInvalidDocument(t);return uc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Kp(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:dn.newInvalidDocument(t)};return uc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Kp(t))},(i,s)=>{r={document:this.ir(t,s),size:iv(s)}}).next(()=>r)}getEntries(e,t){let r=Ii();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Ii(),i=new sn(Te.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,iv(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return H.resolve();let i=new zt(TV);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Kp(i.first()),Kp(i.last())),o=i.getIterator();let a=o.getNext();return uc(e).J({index:"documentKeyIndex",range:s},(u,d,g)=>{const m=Te.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&TV(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?g.$(Kp(a)):g.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),ev(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return uc(e).U(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let g=Ii();for(const m of d){const v=this.ir(Te.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);v.isFoundDocument()&&(Op(t,v)||i.has(v.key))&&(g=g.insert(v.key,v))}return g})}getAllFromCollectionGroup(e,t,r,i){let s=Ii();const o=AV(t,r),a=AV(t,Vi.max());return uc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,g)=>{const m=this.ir(Te.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(m.key,m),s.size===i&&g.done()}).next(()=>s)}newChangeBuffer(e){return new BK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wV(e).get("remoteDocumentGlobalKey").next(t=>(ke(!!t),t))}rr(e,t){return wV(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function CK(n,e){let t;if(e.document)t=zk(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Te.fromSegments(e.noDocument.path),i=rc(e.noDocument.readTime);t=dn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xe();{const r=Te.fromSegments(e.unknownDocument.path),i=rc(e.unknownDocument.version);t=dn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new mn(i[0],i[1]);return Le.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Le.min()))return r}return dn.newInvalidDocument(e)}}function EV(n){return new UK(n)}class BK extends IV{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Vo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new zt((s,o)=>Xe(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=Zk(this.cr.serializer,o);i=i.add(s.path.popLast());const d=iv(u);r+=d-a.size,t.push(this.cr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=Zk(this.cr.serializer,o.convertToNoDocument(Le.min()));t.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),H.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function wV(n){return nr(n,"remoteDocumentGlobal")}function uc(n){return nr(n,"remoteDocumentsV14")}function Kp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function AV(n,e){const t=e.documentKey.path.toArray();return[n,ev(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function TV(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Xe(t[s],r[s]),i)return i;return i=Xe(t.length,r.length),i||(i=Xe(t[t.length-2],r[r.length-2]),i||Xe(t[t.length-1],r[r.length-1]))}class jK{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class CV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Lp(r.mutation,i,vi.empty(),mn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,at()).next(()=>r))}getLocalViewOfDocuments(e,t,r=at()){const i=$s();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=kp();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=$s();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,at()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ii();const o=Vp(),a=Vp();return t.forEach((u,d)=>{const g=r.get(d.key);i.has(d.key)&&(void 0===g||g.mutation instanceof Fo)?s=s.insert(d.key,d):void 0!==g?(o.set(d.key,g.mutation.getFieldMask()),Lp(g.mutation,d,g.mutation.getFieldMask(),mn.now())):o.set(d.key,vi.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,g)=>o.set(d,g)),t.forEach((d,g)=>{var m;return a.set(d,new jK(g,null!==(m=o.get(d))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Vp();let i=new sn((o,a)=>o-a),s=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=t.get(u);if(null===d)return;let g=r.get(u)||vi.empty();g=a.applyToLocalView(d,g),r.set(u,g);const m=(i.get(a.batchId)||at()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,g=u.value,m=pk();g.forEach(v=>{if(!s.has(v)){const w=wk(t.get(v),r.get(v));null!==w&&m.set(v,w),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Te.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):NT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):H.resolve($s());let a=-1,u=s;return o.next(d=>H.forEach(d,(g,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(g)?H.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{u=u.insert(g,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,at())).next(g=>({batchId:a,changes:fk(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(r=>{let i=kp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=kp();return this.indexManager.getCollectionParents(e,s).next(a=>H.forEach(a,u=>{const d=(m=t,v=u.child(s),new ko(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,v;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(g=>{g.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,d)=>{const g=d.getKey();null===o.get(g)&&(o=o.insert(g,dn.newInvalidDocument(g)))});let a=kp();return o.forEach((u,d)=>{const g=s.get(u);void 0!==g&&Lp(g.mutation,d,vi.empty(),mn.now()),Op(t,d)&&(a=a.insert(u,d))}),a})}}class $K{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return H.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Bn(i.createTime)}),H.resolve();var i}getNamedQuery(e,t){return H.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:WT(i.bundledQuery),readTime:Bn(i.readTime)}),H.resolve();var i}}class HK{constructor(){this.overlays=new sn(Te.comparator),this.Ir=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$s();return H.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),H.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){const i=$s(),s=t.length+1,o=new Te(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return H.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new sn((d,g)=>d-g);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let g=s.get(d.largestBatchId);null===g&&(g=$s(),s=s.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const a=$s(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,g)=>a.set(d,g)),!(a.size()>=i)););return H.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new BT(t,r));let s=this.Ir.get(t);void 0===s&&(s=at(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class zK{constructor(){this.sessionToken=Nn.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}class eC{constructor(){this.Tr=new zt(hr.Er),this.dr=new zt(hr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new hr(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new hr(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Te(new Et([])),r=new hr(t,e),i=new hr(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Te(new Et([])),r=new hr(t,e),i=new hr(t,e+1);let s=at();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new hr(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class hr{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Te.comparator(e.key,t.key)||Xe(e.wr,t.wr)}static Ar(e,t){return Xe(e.wr,t.wr)||Te.comparator(e.key,t.key)}}class qK{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new zt(hr.Er)}checkEmpty(e){return H.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new LT(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new hr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,t){return H.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new hr(t,0),i=new hr(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zt(Xe);return t.forEach(i=>{const s=new hr(i,0),o=new hr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Te.isDocumentKey(s)||(s=s.child(""));const o=new hr(new Te(s),0);let a=new zt(Xe);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.wr)),!0)},o),H.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ke(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return H.forEach(t.mutations,i=>{const s=new hr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new hr(t,0),i=this.br.firstAfterOrEqual(r);return H.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return H.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class GK{constructor(e){this.Mr=e,this.docs=new sn(Te.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=Ii();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():dn.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ii();const o=t.path,a=new Te(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:g}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||wT(w1(g),r)<=0||(i.has(g.key)||Op(t,g))&&(s=s.insert(g.key,g.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,t,r,i){xe()}Or(e,t){return H.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new WK(this)}getSize(e){return H.resolve(this.size)}}class WK extends IV{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),H.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class KK{constructor(e){this.persistence=e,this.Nr=new Vo(t=>Xu(t),xp),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new eC,this.targetCount=0,this.kr=ac.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),H.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new ac(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Kn(t),H.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(s).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),H.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this.Br.containsKey(t))}}class tC{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Fi(0),this.Kr=!1,this.Kr=!0,this.$r=new zK,this.referenceDelegate=e(this),this.Ur=new KK(this),this.indexManager=new NK,this.remoteDocumentCache=new GK(r=>this.referenceDelegate.Wr(r)),this.serializer=new Jk(t),this.Gr=new $K(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HK,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new qK(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const i=new QK(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class QK extends T1{constructor(e){super(),this.currentSequenceNumber=e}}class av{constructor(e){this.persistence=e,this.Jr=new eC,this.Yr=null}static Zr(e){return new av(e)}get Xr(){if(this.Yr)return this.Yr;throw xe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),H.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const i=Te.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Le.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return H.or([()=>H.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class YK{constructor(e){this.serializer=e}O(e,t,r,i){const s=new Vy("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",R1,{unique:!0}),u.createObjectStore("documentMutations"),DV(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=H.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),DV(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Le.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",g)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").U().next(g=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",R1,{unique:!0});const m=d.store("mutations"),v=g.map(w=>m.put(w));return H.waitFor(v)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:N8});d.createIndex("collectionPathOverlayIndex",O8,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",k8,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:w8});d.createIndex("documentKeyIndex",A8),d.createIndex("collectionGroupIndex",T8)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:R8}).createIndex("sequenceNumberIndex",P8,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:M8}).createIndex("documentKeyIndex",x8,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(u){u.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=iv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>H.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>H.forEach(a,u=>{ke(u.userId===s.userId);const d=ic(this.serializer,u);return fV(e,s.userId,d).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new Et(o),d=[0,Fr(u)];s.push(t.get(d).next(g=>g?H.resolve():t.put({targetId:0,path:Fr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>H.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:S8});const r=t.store("collectionParents"),i=new XT,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Fr(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new Et(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],d)=>{const g=Bs(a);return s(g.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=zp(i),o=Xk(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(m=o,m.document?new Te(Et.fromString(m.document.name).popFirst(5)):m.noDocument?Te.fromSegments(m.noDocument.path):m.unknownDocument?Te.fromSegments(m.unknownDocument.path):xe()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(d))}).next(()=>H.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=EV(this.serializer),s=new tC(av.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var d;let g=null!==(d=a.get(u.userId))&&void 0!==d?d:at();ic(this.serializer,u).keys().forEach(m=>g=g.add(m)),a.set(u.userId,g)}),H.forEach(a,(u,d)=>{const g=new lr(d),m=tv.lt(this.serializer,g),v=s.getIndexManager(g),w=sv.lt(g,this.serializer,v,s.referenceDelegate);return new CV(i,w,m,v).recalculateAndSaveOverlaysForDocumentKeys(new DT(t,Fi.oe),u).next()})})}}function DV(n){n.createObjectStore("targetDocuments",{keyPath:D8}).createIndex("documentTargetsIndex",b8,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",C8,{unique:!0}),n.createObjectStore("targetGlobal")}const nC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rC{constructor(e,t,r,i,s,o,a,u,d,g,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=d,this.li=g,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!rC.D())throw new ce(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LK(this,i),this.Ai=t+"main",this.serializer=new Jk(u),this.Ri=new Us(this.Ai,this.hi,new YK(this.serializer)),this.$r=new bK,this.Ur=new kK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=EV(this.serializer),this.Gr=new DK,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===g&&Un("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(J.FAILED_PRECONDITION,nC);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Fi(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,ie.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,ie.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,ie.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Ra(e))return he("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return he("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Qp(e).get("owner").next(t=>H.resolve(this.vi(t)))}Ci(e){return cv(e).delete(this.clientId)}Fi(){var e=this;return(0,ie.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=nr(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return H.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?H.resolve(!0):Qp(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ce(J.FAILED_PRECONDITION,nC);return!1}}return!(!this.networkEnabled||!this.inForeground)||cv(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&he("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ie.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new DT(t,Fi.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>cv(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return sv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new OK(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return tv.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){he("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(u=this.hi)?L8:16===u?F8:15===u?CT:14===u?N1:13===u?x1:12===u?V8:11===u?M1:void xe();var u;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new DT(a,this.Qr?this.Qr.next():Fi.oe),"readwrite-primary"===t?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw Un(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ce(J.FAILED_PRECONDITION,A1);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Qp(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ce(J.FAILED_PRECONDITION,nC)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qp(e).put("owner",t)}static D(){return Us.D()}bi(e){const t=Qp(e);return t.get("owner").next(r=>this.vi(r)?(he("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):H.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Un(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,kt.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return he("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Un("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Un("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qp(n){return nr(n,"owner")}function cv(n){return nr(n,"clientMetadata")}function iC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class sC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=at(),i=at();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new sC(e,t.fromCache,r,i)}}class JK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class bV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,kt.nr)()?8:C1((0,kt.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new JK;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(_d()<=Ls.$b.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Dd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(_d()<=Ls.$b.DEBUG&&he("QueryEngine","Query:",Dd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(_d()<=Ls.$b.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Dd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lr(t))):H.resolve())}Yi(e,t){if(ok(t))return H.resolve(null);let r=Lr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Wy(t,null,"F"),r=Lr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=at(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(t,a);return this.ns(t,d,o,u.readTime)?this.Yi(e,Wy(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return ok(t)||i.isEqual(Le.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?H.resolve(null):(_d()<=Ls.$b.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Dd(t)),this.rs(e,o,t,E1(i,-1)).next(a=>a))})}ts(e,t){let r=new zt(dk(e));return t.forEach((i,s)=>{Op(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return _d()<=Ls.$b.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Dd(t)),this.Ji.getDocumentsMatchingQuery(e,t,Vi.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class ZK{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new sn(Xe),this._s=new Vo(s=>Xu(s),xp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function SV(n,e,t,r){return new ZK(n,e,t,r)}function RV(n,e){return oC.apply(this,arguments)}function oC(){return(oC=(0,ie.A)(function*(n,e){const t=Ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=at();for(const d of i){o.push(d.batchId);for(const g of d.mutations)u=u.add(g.key)}for(const d of s){a.push(d.batchId);for(const g of d.mutations)u=u.add(g.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function PV(n){const e=Ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function MV(n,e,t){let r=at(),i=at();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ii();return t.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Le.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):he("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function t7(n,e){const t=Ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Fd(n,e){const t=Ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,H.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Lo(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Ld(n,e,t){return aC.apply(this,arguments)}function aC(){return(aC=(0,ie.A)(function*(n,e,t){const r=Ee(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ra(o))throw o;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function lv(n,e,t){const r=Ee(n);let i=Le.min(),s=at();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,g){const m=Ee(u),v=m._s.get(g);return void 0!==v?H.resolve(m.os.get(v)):m.Ur.getTargetData(d,g)}(r,o,Lr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Le.min(),t?s:at())).next(a=>(OV(r,lk(e),a),{documents:a,Ts:s})))}function xV(n,e){const t=Ee(n),r=Ee(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function NV(n,e){const t=Ee(n),r=t.us.get(e)||Le.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,E1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(OV(t,e,i),i))}function OV(n,e,t){let r=n.us.get(e)||Le.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function uC(){return(uC=(0,ie.A)(function*(n,e,t,r){const i=Ee(n);let s=at(),o=Ii();for(const d of t){const g=e.Es(d.metadata.name);d.document&&(s=s.add(g));const m=e.ds(d);m.setReadTime(e.As(d.metadata.readTime)),o=o.insert(g,m)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Fd(i,(g=r,Lr(Td(Et.fromString(`__bundle__/docs/${g}`)))));var g;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>MV(d,a,o).next(g=>(a.apply(d),g)).next(g=>i.Ur.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.Ur.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,g.Ps,g.Is)).next(()=>g.Ps)))})).apply(this,arguments)}function r7(n,e){return cC.apply(this,arguments)}function cC(){return(cC=(0,ie.A)(function*(n,e,t=at()){const r=yield Fd(n,Lr(WT(e.bundledQuery))),i=Ee(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Bn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Nn.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function kV(n,e){return`firestore_clients_${n}_${e}`}function VV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function lC(n,e){return`firestore_targets_${n}_${e}`}class dv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new ce(i.error.code,i.error.message))),o?new dv(e,t,i.state,s):(Un("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ce(r.error.code,r.error.message))),s?new Yp(e,r.state,i):(Un("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=kT();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=b1(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new hv(e,s):(Un("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class dC{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new dC(t.clientId,t.onlineState):(Un("SharedClientState",`Failed to parse online state: ${e}`),null)}}class hC{constructor(){this.activeTargetIds=kT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fC{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new sn(Xe),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=kV(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new hC),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ie.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(kV(e.persistenceKey,i));if(s){const o=hv.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(lC(this.persistenceKey,e));if(i){const s=Yp.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(lC(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return he("SharedClientState","READ",e,t),t}setItem(e,t){he("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){he("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(he("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void Un("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,ie.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=Fi.oe;if(null!=o)try{const u=JSON.parse(o);ke("number"==typeof u),a=u}catch(u){Un("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==Fi.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new dv(this.currentUser,e,t,r),s=VV(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=VV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=lC(this.persistenceKey,e),s=new Yp(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return hv.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return dv.Rs(new lr(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return Yp.Rs(i,t)}Ls(e){return dC.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,ie.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);he("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=kT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class FV{constructor(){this.so=new hC,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new hC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class i7{_o(e){}shutdown(){}}class LV{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let fv=null;function pC(){return null===fv?fv=268435456+Math.round(2147483648*Math.random()):fv++,"0x"+fv.toString(16)}const s7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class o7{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Br="WebChannelConnection";class a7 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=pC(),u=this.xo(t,r.toUriEncodedString());he("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,u,d,i).then(g=>(he("RestConnection",`Received RPC '${t}' ${a}: `,g),g),g=>{throw ki("RestConnection",`RPC '${t}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+md,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${s7[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=pC();return new Promise((o,a)=>{const u=new d1;u.setWithCredentials(!0),u.listenOnce(h1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ky.NO_ERROR:const g=u.getResponseJson();he(Br,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),o(g);break;case ky.TIMEOUT:he(Br,`RPC '${e}' ${s} timed out`),a(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case ky.HTTP_ERROR:const m=u.getStatus();if(he(Br,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const w=v?.error;if(w&&w.status&&w.message){const T=function(M){const z=M.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(z)>=0?z:J.UNKNOWN}(w.status);a(new ce(T,w.message))}else a(new ce(J.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ce(J.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{he(Br,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);he(Br,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){const i=pC(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=g1(),a=p1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const g=s.join("");he(Br,`Creating RPC '${e}' stream ${i}: ${g}`,u);const m=o.createWebChannel(g,u);let v=!1,w=!1;const T=new o7({Io:M=>{w?he(Br,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(v||(he(Br,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),he(Br,`RPC '${e}' stream ${i} sending:`,M),m.send(M))},To:()=>m.close()}),D=(M,z,F)=>{M.listen(z,G=>{try{F(G)}catch(ae){setTimeout(()=>{throw ae},0)}})};return D(m,wp.EventType.OPEN,()=>{w||(he(Br,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),D(m,wp.EventType.CLOSE,()=>{w||(w=!0,he(Br,`RPC '${e}' stream ${i} transport closed`),T.So())}),D(m,wp.EventType.ERROR,M=>{w||(w=!0,ki(Br,`RPC '${e}' stream ${i} transport errored:`,M),T.So(new ce(J.UNAVAILABLE,"The operation could not be completed")))}),D(m,wp.EventType.MESSAGE,M=>{var z;if(!w){const F=M.data[0];ke(!!F);const ae=F.error||(null===(z=F[0])||void 0===z?void 0:z.error);if(ae){he(Br,`RPC '${e}' stream ${i} received error:`,ae);const ye=ae.status;let Fe=function(O){const L=Gn[O];if(void 0!==L)return Rk(L)}(ye),V=ae.message;void 0===Fe&&(Fe=J.INTERNAL,V="Unknown error status: "+ye+" with message "+ae.message),w=!0,T.So(new ce(Fe,V)),m.close()}else he(Br,`RPC '${e}' stream ${i} received:`,F),T.bo(F)}}),D(a,f1.STAT_EVENT,M=>{M.stat===vT.PROXY?he(Br,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===vT.NOPROXY&&he(Br,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function UV(){return typeof window<"u"?window:null}function pv(){return typeof document<"u"?document:null}function Jp(n){return new gK(n,!0)}class gC{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class BV{constructor(e,t,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gC(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,ie.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,ie.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,ie.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Un(t.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===J.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ce(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,ie.A)(function*(){e.state=0,e.start()}))}I_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class u7 extends BV{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function yK(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:xe(),i=e.targetChange.targetIds||[],s=function(d,g){return d.useProto3Json?(ke(void 0===g||"string"==typeof g),Nn.fromBase64String(g||"")):(ke(void 0===g||g instanceof Buffer||g instanceof Uint8Array),Nn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const g=void 0===d.code?J.UNKNOWN:Rk(d.code);return new ce(g,d.message||"")}(o);t=new Ok(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Hs(n,r.document.name),s=Bn(r.document.updateTime),o=r.document.createTime?Bn(r.document.createTime):Le.min(),a=new wr({mapValue:{fields:r.document.fields}}),u=dn.newFoundDocument(i,s,o,a);t=new Zy(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Hs(n,r.document),s=r.readTime?Bn(r.readTime):Le.min(),o=dn.newNoDocument(i,s);t=new Zy([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Hs(n,r.document);t=new Zy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return xe();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new cK(i,s);t=new Nk(r.targetId,o)}}var d;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Le.min():o.readTime?Bn(o.readTime):Le.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=qT(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=qy(u)?{documents:qk(s,u)}:{query:Xy(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Lk(s,o.resumeToken);const d=$T(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Le.min())>0){a.readTime=Md(s,o.snapshotVersion.toTimestamp());const d=$T(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function IK(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=qT(this.serializer),t.removeTarget=e,this.a_(t)}}class c7 extends BV{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ke(!!e.streamToken),this.lastStreamToken=e.streamToken,ke(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function vK(n,e){return n&&n.length>0?(ke(void 0!==e),n.map(t=>function(i,s){let o=Bn(i.updateTime?i.updateTime:s);return o.isEqual(Le.min())&&(o=Bn(s)),new oK(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=qT(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Hp(this.serializer,r))};this.a_(t)}}class l7 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,zT(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ce(J.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,zT(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(J.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class d7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Un(t),this.D_=!1):he("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class h7{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,ie.A)(function*(){var u;Ba(o)&&(he("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,ie.A)(function*(g){const m=Ee(g);m.L_.add(4),yield Ud(m),m.q_.set("Unknown"),m.L_.delete(4),yield Zp(m)}),function d(g){return u.apply(this,arguments)})(o))}))}),this.q_=new d7(r,i)}}function Zp(n){return mC.apply(this,arguments)}function mC(){return(mC=(0,ie.A)(function*(n){if(Ba(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function Ud(n){return _C.apply(this,arguments)}function _C(){return(_C=(0,ie.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function gv(n,e){const t=Ee(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),IC(t)?vC(t):$d(t).r_()&&yC(t,e))}function Bd(n,e){const t=Ee(n),r=$d(t);t.N_.delete(e),r.r_()&&jV(t,e),0===t.N_.size&&(r.r_()?r.o_():Ba(t)&&t.q_.set("Unknown"))}function yC(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$d(n).A_(e)}function jV(n,e){n.Q_.xe(e),$d(n).R_(e)}function vC(n){n.Q_=new dK({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),$d(n).start(),n.q_.v_()}function IC(n){return Ba(n)&&!$d(n).n_()&&n.N_.size>0}function Ba(n){return 0===Ee(n).L_.size}function $V(n){n.Q_=void 0}function f7(n){return EC.apply(this,arguments)}function EC(){return(EC=(0,ie.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function p7(n){return wC.apply(this,arguments)}function wC(){return(wC=(0,ie.A)(function*(n){n.N_.forEach((e,t)=>{yC(n,e)})})).apply(this,arguments)}function g7(n,e){return AC.apply(this,arguments)}function AC(){return(AC=(0,ie.A)(function*(n,e){$V(n),IC(n)?(n.q_.M_(e),vC(n)):n.q_.set("Unknown")})).apply(this,arguments)}function m7(n,e,t){return TC.apply(this,arguments)}function TC(){return TC=(0,ie.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof Ok&&2===e.state&&e.cause)try{yield(r=(0,ie.A)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.N_.delete(u),s.Q_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield mv(n,r)}else if(e instanceof Zy?n.Q_.Ke(e):e instanceof Nk?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Le.min()))try{const r=yield PV(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const g=s.N_.get(d);g&&s.N_.set(d,g.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const g=s.N_.get(u);if(!g)return;s.N_.set(u,g.withResumeToken(Nn.EMPTY_BYTE_STRING,g.snapshotVersion)),jV(s,u);const m=new Lo(g.target,u,d,g.sequenceNumber);yC(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){he("RemoteStore","Failed to raise snapshot:",r),yield mv(n,r)}var r}),TC.apply(this,arguments)}function mv(n,e,t){return CC.apply(this,arguments)}function CC(){return(CC=(0,ie.A)(function*(n,e,t){if(!Ra(e))throw e;n.L_.add(1),yield Ud(n),n.q_.set("Offline"),t||(t=()=>PV(n.localStore)),n.asyncQueue.enqueueRetryable((0,ie.A)(function*(){he("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Zp(n)}))})).apply(this,arguments)}function HV(n,e){return e().catch(t=>mv(n,t,e))}function jd(n){return DC.apply(this,arguments)}function DC(){return(DC=(0,ie.A)(function*(n){const e=Ee(n),t=ja(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_7(e);)try{const i=yield t7(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,y7(e,i)}catch(i){yield mv(e,i)}zV(e)&&qV(e)})).apply(this,arguments)}function _7(n){return Ba(n)&&n.O_.length<10}function y7(n,e){n.O_.push(e);const t=ja(n);t.r_()&&t.V_&&t.m_(e.mutations)}function zV(n){return Ba(n)&&!ja(n).n_()&&n.O_.length>0}function qV(n){ja(n).start()}function v7(n){return bC.apply(this,arguments)}function bC(){return(bC=(0,ie.A)(function*(n){ja(n).p_()})).apply(this,arguments)}function I7(n){return SC.apply(this,arguments)}function SC(){return(SC=(0,ie.A)(function*(n){const e=ja(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function E7(n,e,t){return RC.apply(this,arguments)}function RC(){return(RC=(0,ie.A)(function*(n,e,t){const r=n.O_.shift(),i=UT.from(r,e,t);yield HV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield jd(n)})).apply(this,arguments)}function w7(n,e){return PC.apply(this,arguments)}function PC(){return PC=(0,ie.A)(function*(n,e){var t;e&&ja(n).V_&&(yield(t=(0,ie.A)(function*(i,s){if(Sk(a=s.code)&&a!==J.ABORTED){const o=i.O_.shift();ja(i).s_(),yield HV(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield jd(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),zV(n)&&qV(n)}),PC.apply(this,arguments)}function GV(n,e){return MC.apply(this,arguments)}function MC(){return(MC=(0,ie.A)(function*(n,e){const t=Ee(n);t.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const r=Ba(t);t.L_.add(3),yield Ud(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Zp(t)})).apply(this,arguments)}function xC(n,e){return NC.apply(this,arguments)}function NC(){return(NC=(0,ie.A)(function*(n,e){const t=Ee(n);e?(t.L_.delete(2),yield Zp(t)):e||(t.L_.add(2),yield Ud(t),t.q_.set("Unknown"))})).apply(this,arguments)}function $d(n){return n.K_||(n.K_=function(t,r,i){const s=Ee(t);return s.w_(),new u7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:f7.bind(null,n),Ro:p7.bind(null,n),mo:g7.bind(null,n),d_:m7.bind(null,n)}),n.B_.push(function(){var e=(0,ie.A)(function*(t){t?(n.K_.s_(),IC(n)?vC(n):n.q_.set("Unknown")):(yield n.K_.stop(),$V(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function ja(n){return n.U_||(n.U_=function(t,r,i){const s=Ee(t);return s.w_(),new c7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:v7.bind(null,n),mo:w7.bind(null,n),f_:I7.bind(null,n),g_:E7.bind(null,n)}),n.B_.push(function(){var e=(0,ie.A)(function*(t){t?(n.U_.s_(),yield jd(n)):(yield n.U_.stop(),n.O_.length>0&&(he("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class OC{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new OC(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hd(n,e){if(Un("AsyncQueue",`${e}: ${n}`),Ra(n))return new ce(J.UNAVAILABLE,`${e}: ${n}`);throw n}class zd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=kp(),this.sortedSet=new sn(this.comparator)}static emptySet(e){return new zd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new zd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class WV{constructor(){this.W_=new sn(Te.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):xe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class qd{constructor(e,t,r,i,s,o,a,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new qd(e,t,zd.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class A7{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class T7{constructor(){this.queries=KV(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Ee(t),s=i.queries;i.queries=KV(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})}(this,new ce(J.ABORTED,"Firestore shutting down"))}}function KV(){return new Vo(n=>ck(n),Np)}function kC(n,e){return VC.apply(this,arguments)}function VC(){return(VC=(0,ie.A)(function*(n,e){const t=Ee(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new A7,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Hd(o,`Initialization of query '${Dd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&UC(t)})).apply(this,arguments)}function FC(n,e){return LC.apply(this,arguments)}function LC(){return(LC=(0,ie.A)(function*(n,e){const t=Ee(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function C7(n,e){const t=Ee(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&UC(t)}function D7(n,e,t){const r=Ee(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function UC(n){n.Y_.forEach(e=>{e.next()})}var BC,QV;(QV=BC||(BC={})).ea="default",QV.Cache="cache";class jC{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new qd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=qd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==BC.Cache}}class b7{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class YV{constructor(e){this.serializer=e}Es(e){return Hs(this.serializer,e)}ds(e){return e.metadata.exists?zk(this.serializer,e.document,!1):dn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Bn(e)}}class S7{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=JV(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=Et.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new YV(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||at()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,ie.A)(function*(){const t=yield function n7(n,e,t,r){return uC.apply(this,arguments)}(e.localStore,new YV(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield r7(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function JV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class ZV{constructor(e){this.key=e}}class XV{constructor(e){this.key=e}}class eF{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=at(),this.mutatedKeys=at(),this.Aa=dk(e),this.Ra=new zd(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new WV,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,m)=>{const v=i.get(g),w=Op(this.query,m)?m:null,T=!!v&&this.mutatedKeys.has(v.key),D=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;v&&w?v.data.isEqual(w.data)?T!==D&&(r.track({type:3,doc:w}),M=!0):this.ga(v,w)||(r.track({type:2,doc:w}),M=!0,(u&&this.Aa(w,u)>0||d&&this.Aa(w,d)<0)&&(a=!0)):!v&&w?(r.track({type:0,doc:w}),M=!0):v&&!w&&(r.track({type:1,doc:v}),M=!0,(u||d)&&(a=!0)),M&&(w?(o=o.add(w),s=D?s.add(g):s.delete(g)):(o=o.delete(g),s=s.delete(g)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const g="F"===this.query.limitType?o.last():o.first();o=o.delete(g.key),s=s.delete(g.key),r.track({type:1,doc:g})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((g,m)=>function(w,T){const D=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return D(w)-D(T)}(g.type,m.type)||this.Aa(g.doc,m.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],u=0===this.da.size&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,0!==o.length||d?{snapshot:new qd(this.query,e.Ra,s,o,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new WV,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=at(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new XV(r))}),this.da.forEach(r=>{e.has(r)||t.push(new ZV(r))}),t}ba(e){this.Ta=e.Ts,this.da=at();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return qd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class R7{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class P7{constructor(e){this.key=e,this.va=!1}}class M7{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Vo(a=>ck(a),Np),this.Ma=new Map,this.xa=new Set,this.Oa=new sn(Te.comparator),this.Na=new Map,this.La=new eC,this.Ba={},this.ka=new Map,this.qa=ac.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function x7(n,e){return $C.apply(this,arguments)}function $C(){return($C=(0,ie.A)(function*(n,e,t=!0){const r=_v(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield tF(r,e,t,!0),i})).apply(this,arguments)}function N7(n,e){return HC.apply(this,arguments)}function HC(){return(HC=(0,ie.A)(function*(n,e){const t=_v(n);yield tF(t,e,!0,!1)})).apply(this,arguments)}function tF(n,e,t,r){return zC.apply(this,arguments)}function zC(){return(zC=(0,ie.A)(function*(n,e,t,r){const i=yield Fd(n.localStore,Lr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield qC(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&gv(n.remoteStore,i),a})).apply(this,arguments)}function qC(n,e,t,r,i){return GC.apply(this,arguments)}function GC(){return GC=(0,ie.A)(function*(n,e,t,r,i){n.Ka=(m,v,w)=>{return(T=(0,ie.A)(function*(M,z,F,G){let ae=z.view.ma(F);ae.ns&&(ae=yield lv(M.localStore,z.query,!1).then(({documents:b})=>z.view.ma(b,ae)));const ye=G&&G.targetChanges.get(z.targetId),Fe=G&&null!=G.targetMismatches.get(z.targetId),V=z.view.applyChanges(ae,M.isPrimaryClient,ye,Fe);return rD(M,z.targetId,V.wa),V.snapshot}),function D(M,z,F,G){return T.apply(this,arguments)})(n,m,v,w);var T};const s=yield lv(n.localStore,e,!0),o=new eF(e,s.Ts),a=o.ma(s.documents),u=jp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),d=o.applyChanges(a,n.isPrimaryClient,u);rD(n,t,d.wa);const g=new R7(e,t,o);return n.Fa.set(e,g),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot}),GC.apply(this,arguments)}function O7(n,e,t){return WC.apply(this,arguments)}function WC(){return(WC=(0,ie.A)(function*(n,e,t){const r=Ee(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Np(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ld(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Bd(r.remoteStore,i.targetId),Gd(r,i.targetId)}).catch(Sa))):(Gd(r,i.targetId),yield Ld(r.localStore,i.targetId,!0))})).apply(this,arguments)}function k7(n,e){return KC.apply(this,arguments)}function KC(){return(KC=(0,ie.A)(function*(n,e){const t=Ee(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Bd(t.remoteStore,r.targetId))})).apply(this,arguments)}function QC(){return(QC=(0,ie.A)(function*(n,e,t){const r=pD(n);try{const i=yield function(o,a){const u=Ee(o),d=mn.now(),g=a.reduce((w,T)=>w.add(T.key),at());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let T=Ii(),D=at();return u.cs.getEntries(w,g).next(M=>{T=M,T.forEach((z,F)=>{F.isValidDocument()||(D=D.add(z))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,T)).next(M=>{m=M;const z=[];for(const F of a){const G=uK(F,m.get(F.key).overlayedDocument);null!=G&&z.push(new Fo(F.key,G,W1(G.value.mapValue),yn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,z,a)}).next(M=>{v=M;const z=M.applyToLocalDocumentSet(m,D);return u.documentOverlayCache.saveOverlays(w,M.batchId,z)})}).then(()=>({batchId:v.batchId,changes:fk(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new sn(Xe)),d=d.insert(a,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,t),yield Uo(r,i.changes),yield jd(r.remoteStore)}catch(i){const s=Hd(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function nF(n,e){return YC.apply(this,arguments)}function YC(){return(YC=(0,ie.A)(function*(n,e){const t=Ee(n);try{const r=yield function e7(n,e){const t=Ee(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((g,m)=>{const v=i.get(m);if(!v)return;a.push(t.Ur.removeMatchingKeys(s,g.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(s,g.addedDocuments,m)));let w=v.withSequenceNumber(s.currentSequenceNumber);var D,M,z;null!==e.targetMismatches.get(m)?w=w.withResumeToken(Nn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,r)),i=i.insert(m,w),M=w,z=g,(0===(D=v).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8||z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,w))});let u=Ii(),d=at();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))}),a.push(MV(s,o,e.documentUpdates).next(g=>{u=g.Ps,d=g.Is})),!r.isEqual(Le.min())){const g=t.Ur.getLastRemoteSnapshotVersion(s).next(m=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(g)}return H.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ke(o.va):i.removedDocuments.size>0&&(ke(o.va),o.va=!1))}),yield Uo(t,r,e)}catch(r){yield Sa(r)}})).apply(this,arguments)}function rF(n,e,t){const r=Ee(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Ee(o);u.onlineState=a;let d=!1;u.queries.forEach((g,m)=>{for(const v of m.j_)v.Z_(a)&&(d=!0)}),d&&UC(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function F7(n,e,t){return JC.apply(this,arguments)}function JC(){return(JC=(0,ie.A)(function*(n,e,t){const r=Ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new sn(Te.comparator);o=o.insert(s,dn.newNoDocument(s,Le.min()));const a=at().add(s),u=new Bp(Le.min(),new Map,new sn(Xe),o,a);yield nF(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),iD(r)}else yield Ld(r.localStore,e,!1).then(()=>Gd(r,e,t)).catch(Sa)})).apply(this,arguments)}function L7(n,e){return ZC.apply(this,arguments)}function ZC(){return(ZC=(0,ie.A)(function*(n,e){const t=Ee(n),r=e.batch.batchId;try{const i=yield function XK(n,e){const t=Ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,d,g){const m=d.batch,v=m.keys();let w=H.resolve();return v.forEach(T=>{w=w.next(()=>g.getEntry(u,T)).next(D=>{const M=d.docVersions.get(T);ke(null!==M),D.version.compareTo(M)<0&&(m.applyToRemoteDocument(D,d),D.isValidDocument()&&(D.setReadTime(d.commitVersion),g.addEntry(D)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=at();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);nD(t,r,null),tD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Uo(t,i)}catch(i){yield Sa(i)}})).apply(this,arguments)}function U7(n,e,t){return XC.apply(this,arguments)}function XC(){return(XC=(0,ie.A)(function*(n,e,t){const r=Ee(n);try{const i=yield function(o,a){const u=Ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return u.mutationQueue.lookupMutationBatch(d,a).next(m=>(ke(null!==m),g=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,g,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>u.localDocuments.getDocuments(d,g))})}(r.localStore,e);nD(r,e,t),tD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Uo(r,i)}catch(i){yield Sa(i)}})).apply(this,arguments)}function eD(){return(eD=(0,ie.A)(function*(n,e){const t=Ee(n);Ba(t.remoteStore)||he("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ee(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=Hd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function tD(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function nD(n,e,t){const r=Ee(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Gd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||iF(n,r)})}function iF(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(Bd(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),iD(n))}function rD(n,e,t){for(const r of t)r instanceof ZV?(n.La.addReference(r.key,e),j7(n,r)):r instanceof XV?(he("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||iF(n,r.key)):xe()}function j7(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(he("SyncEngine","New document in limbo: "+t),n.xa.add(r),iD(n))}function iD(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Te(Et.fromString(e)),r=n.qa.next();n.Na.set(r,new P7(t)),n.Oa=n.Oa.insert(t,r),gv(n.remoteStore,new Lo(Lr(Td(t.path)),r,"TargetPurposeLimboResolution",Fi.oe))}}function Uo(n,e,t){return sD.apply(this,arguments)}function sD(){return sD=(0,ie.A)(function*(n,e,t){const r=Ee(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,t).then(d=>{var g;if((d||t)&&r.isPrimaryClient){const m=d?!d.fromCache:null===(g=t?.targetChanges.get(u.targetId))||void 0===g?void 0:g.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=sC.Wi(u.targetId,d);s.push(m)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,ie.A)(function*(d,g){const m=Ee(d);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>H.forEach(g,w=>H.forEach(w.$i,T=>m.persistence.referenceDelegate.addReference(v,w.targetId,T)).next(()=>H.forEach(w.Ui,T=>m.persistence.referenceDelegate.removeReference(v,w.targetId,T)))))}catch(v){if(!Ra(v))throw v;he("LocalStore","Failed to update sequence numbers: "+v)}for(const v of g){const w=v.targetId;if(!v.fromCache){const T=m.os.get(w),M=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);m.os=m.os.insert(w,M)}}}),function u(d,g){return a.apply(this,arguments)})(r.localStore,s))}),sD.apply(this,arguments)}function $7(n,e){return oD.apply(this,arguments)}function oD(){return(oD=(0,ie.A)(function*(n,e){const t=Ee(n);if(!t.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const r=yield RV(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(u=>{u.reject(new ce(J.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Uo(t,r.hs)}var s})).apply(this,arguments)}function H7(n,e){const t=Ee(n),r=t.Na.get(e);if(r&&r.va)return at().add(r.key);{let i=at();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function z7(n,e){return aD.apply(this,arguments)}function aD(){return(aD=(0,ie.A)(function*(n,e){const t=Ee(n),r=yield lv(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&rD(t,e.targetId,i.wa),i})).apply(this,arguments)}function q7(n,e){return uD.apply(this,arguments)}function uD(){return(uD=(0,ie.A)(function*(n,e){const t=Ee(n);return NV(t.localStore,e).then(r=>Uo(t,r))})).apply(this,arguments)}function G7(n,e,t,r){return cD.apply(this,arguments)}function cD(){return(cD=(0,ie.A)(function*(n,e,t,r){const i=Ee(n),s=yield function(a,u){const d=Ee(a),g=Ee(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",m=>g.Mn(m,u).next(v=>v?d.localDocuments.getDocuments(m,v):H.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield jd(i.remoteStore):"acknowledged"===t||"rejected"===t?(nD(i,e,r||null),tD(i,e),u=e,Ee(Ee(i.localStore).mutationQueue).On(u)):xe(),yield Uo(i,s)):he("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function lD(){return(lD=(0,ie.A)(function*(n,e){const t=Ee(n);if(_v(t),pD(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield sF(t,r.toArray());t.Qa=!0,yield xC(t.remoteStore,!0);for(const s of i)gv(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Gd(t,o),Ld(t.localStore,o,!0))),Bd(t.remoteStore,o)}),yield i,yield sF(t,r),function(o){const a=Ee(o);a.Na.forEach((u,d)=>{Bd(a.remoteStore,d)}),a.La.pr(),a.Na=new Map,a.Oa=new sn(Te.comparator)}(t),t.Qa=!1,yield xC(t.remoteStore,!1)}})).apply(this,arguments)}function sF(n,e,t){return dD.apply(this,arguments)}function dD(){return(dD=(0,ie.A)(function*(n,e,t){const r=Ee(n),i=[],s=[];for(const o of e){let a;const u=r.Ma.get(o);if(u&&0!==u.length){a=yield Fd(r.localStore,Lr(u[0]));for(const d of u){const g=r.Fa.get(d),m=yield z7(r,g);m.snapshot&&s.push(m.snapshot)}}else{const d=yield xV(r.localStore,o);a=yield Fd(r.localStore,d),yield qC(r,oF(d),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function oF(n){return sk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function K7(n){return t=Ee(n).localStore,Ee(Ee(t).persistence).Qi();var t}function Q7(n,e,t,r){return hD.apply(this,arguments)}function hD(){return(hD=(0,ie.A)(function*(n,e,t,r){const i=Ee(n);if(i.Qa)return void he("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield NV(i.localStore,lk(s[0])),a=Bp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Nn.EMPTY_BYTE_STRING);yield Uo(i,o,a);break}case"rejected":yield Ld(i.localStore,e,!0),Gd(i,e,r);break;default:xe()}})).apply(this,arguments)}function Y7(n,e,t){return fD.apply(this,arguments)}function fD(){return(fD=(0,ie.A)(function*(n,e,t){const r=_v(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){he("SyncEngine","Adding an already active target "+i);continue}const s=yield xV(r.localStore,i),o=yield Fd(r.localStore,s);yield qC(r,oF(s),o.targetId,!1,o.resumeToken),gv(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield Ld(r.localStore,i,!1).then(()=>{Bd(r.remoteStore,i),Gd(r,i)}).catch(Sa))}})).apply(this,arguments)}function _v(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=H7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F7.bind(null,e),e.Ca.d_=C7.bind(null,e.eventManager),e.Ca.$a=D7.bind(null,e.eventManager),e}function pD(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=U7.bind(null,e),e}let Wd=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,ie.A)(function*(){r.serializer=Jp(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return SV(this.persistence,new bV,t.initialUser,this.serializer)}Ga(t){return new tC(av.Zr,this.serializer)}Wa(t){return new FV}terminate(){var t=this;return(0,ie.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class gD extends Wd{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ie.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield pD(r.Ja.syncEngine),yield jd(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return SV(this.persistence,new bV,e.initialUser,this.serializer)}ja(e,t){return new yV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new v8(t,this.persistence);return new y8(e.asyncQueue,r)}Ga(e){const t=iC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ur.withCacheSize(this.cacheSizeBytes):Ur.DEFAULT;return new rC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,UV(),pv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new FV}}class aF extends gD{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ie.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof fC&&(r.sharedClientState.syncEngine={no:G7.bind(null,i),ro:Q7.bind(null,i),io:Y7.bind(null,i),Qi:K7.bind(null,i),eo:q7.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,ie.A)(function*(o){yield function W7(n,e){return lD.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=UV();if(!fC.D(t))throw new ce(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=iC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let Kd=(()=>{class n{initialize(t,r){var i=this;return(0,ie.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>rF(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=$7.bind(null,i.syncEngine),yield xC(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new T7}createDatastore(t){const r=Jp(t.databaseInfo.databaseId),i=new a7(t.databaseInfo);return new l7(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>rF(this.syncEngine,r,0),u=LV.D()?new LV:new i7,new h7(i,s,o,a,u);var i,s,o,a,u}createSyncEngine(t,r){return function(s,o,a,u,d,g,m){const v=new M7(s,o,a,u,d,g);return m&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,ie.A)(function*(){var r,i,s;yield(s=(0,ie.A)(function*(a){const u=Ee(a);he("RemoteStore","RemoteStore shutting down."),u.L_.add(5),yield Ud(u),u.k_.shutdown(),u.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function uF(n,e=10240){let t=0;return{read:()=>(0,ie.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ie.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class yv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class X7{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new dr,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,ie.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,ie.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,ie.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new b7(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,ie.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,ie.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,ie.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class eQ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ie.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ce(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ie.A)(function*(o,a){const u=Ee(o),d={documents:a.map(w=>$p(u.serializer,w))},g=yield u.Lo("BatchGetDocuments",u.serializer.databaseId,Et.emptyPath(),d,a.length),m=new Map;g.forEach(w=>{const T=function _K(n,e){return"found"in e?function(r,i){ke(!!i.found);const s=Hs(r,i.found.name),o=Bn(i.found.updateTime),a=i.found.createTime?Bn(i.found.createTime):Le.min(),u=new wr({mapValue:{fields:i.found.fields}});return dn.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){ke(!!i.missing),ke(!!i.readTime);const s=Hs(r,i.missing),o=Bn(i.readTime);return dn.newNoDocument(s,o)}(n,e):xe()}(u.serializer,w);m.set(T.key.toString(),T)});const v=[];return a.forEach(w=>{const T=m.get(w.toString());ke(!!T),v.push(T)}),v}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ie.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Te.fromPath(i);e.mutations.push(new FT(s,e.precondition(s)))}),yield(r=(0,ie.A)(function*(s,o){const a=Ee(s),u={writes:o.map(d=>Hp(a.serializer,d))};yield a.Mo("Commit",a.serializer.databaseId,Et.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xe();t=Le.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ce(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Le.min())?yn.exists(!1):yn.updateTime(t):yn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Le.min()))throw new ce(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yn.updateTime(t)}return yn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class tQ{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new gC(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,ie.A)(function*(){const t=new eQ(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!Cp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Sk(t)}return!1}}class nQ{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=lr.UNAUTHENTICATED,this.clientId=v1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,ie.A)(function*(u){he("FirestoreClient","Received user=",u.uid),yield o.authCredentialListener(u),o.user=u});return function(u){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(he("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ie.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Hd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function mD(n,e){return _D.apply(this,arguments)}function _D(){return _D=(0,ie.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ie.A)(function*(s){r.isEqual(s)||(yield RV(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),_D.apply(this,arguments)}function cF(n,e){return yD.apply(this,arguments)}function yD(){return(yD=(0,ie.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield vD(n);he("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>GV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>GV(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function vD(n){return ID.apply(this,arguments)}function ID(){return(ID=(0,ie.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{yield mD(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;ki("Error using user provided cache. Falling back to memory cache: "+e),yield mD(n,new Wd)}}else he("FirestoreClient","Using default OfflineComponentProvider"),yield mD(n,new Wd);var i;return n._offlineComponents})).apply(this,arguments)}function vv(n){return ED.apply(this,arguments)}function ED(){return(ED=(0,ie.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),yield cF(n,n._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),yield cF(n,new Kd))),n._onlineComponents})).apply(this,arguments)}function lF(n){return vD(n).then(e=>e.persistence)}function Qd(n){return vD(n).then(e=>e.localStore)}function dF(n){return vv(n).then(e=>e.remoteStore)}function wD(n){return vv(n).then(e=>e.syncEngine)}function Yd(n){return AD.apply(this,arguments)}function AD(){return(AD=(0,ie.A)(function*(n){const e=yield vv(n),t=e.eventManager;return t.onListen=x7.bind(null,e.syncEngine),t.onUnlisten=O7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=N7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=k7.bind(null,e.syncEngine),t})).apply(this,arguments)}function fF(n,e,t={}){const r=new dr;return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function(s,o,a,u,d){const g=new yv({next:v=>{g.Za(),o.enqueueAndForget(()=>FC(s,m));const w=v.docs.has(a);!w&&v.fromCache?d.reject(new ce(J.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&u&&"server"===u.source?d.reject(new ce(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new jC(Td(a.path),g,{includeMetadataChanges:!0,_a:!0});return kC(s,m)}(yield Yd(n),n.asyncQueue,e,t,r)})),r.promise}function pF(n,e,t={}){const r=new dr;return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function(s,o,a,u,d){const g=new yv({next:v=>{g.Za(),o.enqueueAndForget(()=>FC(s,m)),v.fromCache&&"server"===u.source?d.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new jC(a,g,{includeMetadataChanges:!0,_a:!0});return kC(s,m)}(yield Yd(n),n.asyncQueue,e,t,r)})),r.promise}function gF(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const mF=new Map;function TD(n,e,t){if(!t)throw new ce(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _F(n,e,t,r){if(!0===e&&!0===r)throw new ce(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yF(n){if(!Te.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vF(n){if(Te.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Iv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":xe()}function vt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Iv(n);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function IF(n,e){if(e<=0)throw new ce(J.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class EF{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_F("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=gF(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EF({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EF(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new o8;switch(r.type){case"firstParty":return new l8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,ie.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=mF.get(t);r&&(he("ComponentProvider","Removing Datastore"),mF.delete(t),r.terminate())}(this),Promise.resolve()}}class Ar{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ar(this.firestore,e,this._query)}}class hn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hn(this.firestore,e,this._key)}}class zs extends Ar{constructor(e,t,r){super(e,t,Td(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new Te(e))}withConverter(e){return new zs(this.firestore,e,this._path)}}function AF(n,e,...t){if(n=(0,kt.Ku)(n),TD("collection","path",e),n instanceof Xp){const r=Et.fromString(e,...t);return vF(r),new zs(n,null,r)}{if(!(n instanceof hn||n instanceof zs))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return vF(r),new zs(n.firestore,null,r)}}function Ev(n,e,...t){if(n=(0,kt.Ku)(n),1===arguments.length&&(e=v1.newId()),TD("doc","path",e),n instanceof Xp){const r=Et.fromString(e,...t);return yF(r),new hn(n,null,new Te(r))}{if(!(n instanceof hn||n instanceof zs))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return yF(r),new hn(n.firestore,n instanceof zs?n.converter:null,new Te(r))}}function TF(n,e){return n=(0,kt.Ku)(n),e=(0,kt.Ku)(e),(n instanceof hn||n instanceof zs)&&(e instanceof hn||e instanceof zs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function CD(n,e){return n=(0,kt.Ku)(n),e=(0,kt.Ku)(e),n instanceof Ar&&e instanceof Ar&&n.firestore===e.firestore&&Np(n._query,e._query)&&n.converter===e.converter}class CF{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gC(this,"async_queue_retry"),this.Vu=()=>{const r=pv();r&&he("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=pv();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=pv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new dr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,ie.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!Ra(t))throw t;he("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,Un("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=OC.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&xe()}verifyOperationInProgress(){}wu(){var e=this;return(0,ie.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function DD(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class gQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wt extends Xp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new CF,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,ie.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new CF(t),e._firestoreClient=void 0,yield t}})()}}function vn(n){if(n._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||DF(n),n._firestoreClient}function DF(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new j8(n._databaseId,u,n._persistenceKey,(g=i).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,gF(g.experimentalLongPollingOptions),g.useFetchStreams));var u,g;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new nQ(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function bD(){return(bD=(0,ie.A)(function*(n){ki("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();bF(n,Kd.provider,{build:t=>new aF(t,e.cacheSizeBytes)})})).apply(this,arguments)}function bF(n,e,t){if((n=vt(n,Wt))._firestoreClient||n._terminated)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ce(J.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},DF(n)}class qs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qs(Nn.fromBase64String(e))}catch(t){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qs(Nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cc{constructor(e){this._methodName=e}}class wv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}}class Av{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const DQ=/^__.*__$/;class bQ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Fo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rd(e,this.data,t,this.fieldTransforms)}}class SF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function RF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}class Tv{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Tv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(RF(this.Cu)&&DQ.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class SQ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Jp(e)}Qu(e,t,r,i=!1){return new Tv({Cu:e,methodName:t,qu:r,path:ln.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lc(n){const e=n._freezeSettings(),t=Jp(n._databaseId);return new SQ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Cv(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);OD("Data must be an object, but it was:",o,r);const a=xF(r,o);let u,d;if(s.merge)u=new vi(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const g=[];for(const m of s.mergeFields){const v=ng(e,m,t);if(!o.contains(v))throw new ce(J.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);OF(g,v)||g.push(v)}u=new vi(g),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new bQ(new wr(a),u,d)}class tg extends cc{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tg}}function PF(n,e,t){return new Tv({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class SD extends cc{_toFieldTransform(e){return new Fp(e.path,new bd)}isEqual(e){return e instanceof SD}}class RD extends cc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=PF(this,e,!0),r=this.Ku.map(s=>dc(s,t)),i=new ec(r);return new Fp(e.path,i)}isEqual(e){return e instanceof RD&&(0,kt.bD)(this.Ku,e.Ku)}}class PD extends cc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=PF(this,e,!0),r=this.Ku.map(s=>dc(s,t)),i=new tc(r);return new Fp(e.path,i)}isEqual(e){return e instanceof PD&&(0,kt.bD)(this.Ku,e.Ku)}}class MD extends cc{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Sd(e.serializer,mk(e.serializer,this.$u));return new Fp(e.path,t)}isEqual(e){return e instanceof MD&&this.$u===e.$u}}function xD(n,e,t,r){const i=n.Qu(1,e,t);OD("Data must be an object, but it was:",i,r);const s=[],o=wr.empty();Pa(r,(u,d)=>{const g=Dv(e,u,t);d=(0,kt.Ku)(d);const m=i.Nu(g);if(d instanceof tg)s.push(g);else{const v=dc(d,m);null!=v&&(s.push(g),o.set(g,v))}});const a=new vi(s);return new SF(o,a,i.fieldTransforms)}function ND(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[ng(e,r,t)],u=[i];if(s.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(ng(e,s[v])),u.push(s[v+1]);const d=[],g=wr.empty();for(let v=a.length-1;v>=0;--v)if(!OF(d,a[v])){const w=a[v];let T=u[v];T=(0,kt.Ku)(T);const D=o.Nu(w);if(T instanceof tg)d.push(w);else{const M=dc(T,D);null!=M&&(d.push(w),g.set(w,M))}}const m=new vi(d);return new SF(g,m,o.fieldTransforms)}function MF(n,e,t,r=!1){return dc(t,n.Qu(r?4:3,e))}function dc(n,e){if(NF(n=(0,kt.Ku)(n)))return OD("Unsupported field value:",e,n),xF(n,e);if(n instanceof cc)return function(r,i){if(!RF(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=dc(a,i.Lu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,kt.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return mk(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=mn.fromDate(r);return{timestampValue:Md(i.serializer,s)}}if(r instanceof mn){const s=new mn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Md(i.serializer,s)}}if(r instanceof wv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qs)return{bytesValue:Lk(i.serializer,r._byteString)};if(r instanceof hn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:HT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Av)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.Bu("VectorValues must only contain numeric values.");return VT(a.serializer,u)})}}}}};var a;throw i.Bu(`Unsupported field value: ${Iv(r)}`)}(n,e)}function xF(n,e){const t={};return V1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pa(n,(r,i)=>{const s=dc(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function NF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof mn||n instanceof wv||n instanceof qs||n instanceof hn||n instanceof cc||n instanceof Av)}function OD(n,e,t){if(!NF(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Iv(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function ng(n,e,t){if((e=(0,kt.Ku)(e))instanceof Bo)return e._internalPath;if("string"==typeof e)return Dv(n,e);throw bv("Field path arguments must be of type string or ",n,!1,void 0,t)}const RQ=new RegExp("[~\\*/\\[\\]]");function Dv(n,e,t){if(e.search(RQ)>=0)throw bv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bo(...e.split("."))._internalPath}catch{throw bv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bv(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ce(J.INVALID_ARGUMENT,a+n+u)}function OF(n,e){return n.some(t=>t.isEqual(e))}class rg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new PQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class PQ extends rg{data(){return super.data()}}function Sv(n,e){return"string"==typeof e?Dv(n,e):e instanceof Bo?e._internalPath:e._delegate._internalPath}function kF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kD{}class ig extends kD{}function $a(n,e,...t){let r=[];e instanceof kD&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof Jd).length,a=s.filter(u=>u instanceof sg).length;if(o>1||o>0&&a>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class sg extends ig{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new sg(e,t,r)}_apply(e){const t=this._parse(e);return UF(e._query,t),new Ar(e.firestore,e.converter,OT(e._query,t))}_parse(e){const t=lc(e.firestore);return function(s,o,a,u,d,g,m){let v;if(d.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){LF(m,g);const w=[];for(const T of m)w.push(FF(u,s,T));v={arrayValue:{values:w}}}else v=FF(u,s,m)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||LF(m,g),v=MF(a,"where",m,"in"===g||"not-in"===g);return wt.create(d,g,v)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Jd extends kD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jd(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:jt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)UF(o,u),o=OT(o,u)}(e._query,t),new Ar(e.firestore,e.converter,OT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class VD extends ig{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new VD(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mp(s,o)}(e._query,this._field,this._direction);return new Ar(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ko(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Rv extends ig{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Rv(e,t,r)}_apply(e){return new Ar(e.firestore,e.converter,Wy(e._query,this._limit,this._limitType))}}class Pv extends ig{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Pv(e,t,r)}_apply(e){const t=VF(e,this.type,this._docOrFields,this._inclusive);return new Ar(e.firestore,e.converter,(s=t,new ko((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Mv extends ig{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Mv(e,t,r)}_apply(e){const t=VF(e,this.type,this._docOrFields,this._inclusive);return new Ar(e.firestore,e.converter,(s=t,new ko((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function VF(n,e,t,r){if(t[0]=(0,kt.Ku)(t[0]),t[0]instanceof rg)return function(s,o,a,u,d){if(!u)throw new ce(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const g=[];for(const m of Cd(s))if(m.field.isKeyField())g.push(Zu(o,u.key));else{const v=u.data.field(m.field);if(Uy(v))throw new ce(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===v){const w=m.field.canonicalString();throw new ce(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}g.push(v)}return new ka(g,d)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=lc(n.firestore);return function(o,a,u,d,g,m){const v=o.explicitOrderBy;if(g.length>v.length)throw new ce(J.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let T=0;T<g.length;T++){const D=g[T];if(v[T].field.isKeyField()){if("string"!=typeof D)throw new ce(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof D}`);if(!NT(o)&&-1!==D.indexOf("/"))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${D}' contains a slash.`);const M=o.path.child(Et.fromString(D));if(!Te.isDocumentKey(M))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const z=new Te(M);w.push(Zu(a,z))}else{const M=MF(u,d,D);w.push(M)}}return new ka(w,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function FF(n,e,t){if("string"==typeof(t=(0,kt.Ku)(t))){if(""===t)throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NT(e)&&-1!==t.indexOf("/"))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Et.fromString(t));if(!Te.isDocumentKey(r))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zu(n,new Te(r))}if(t instanceof hn)return Zu(n,t._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iv(t)}.`)}function LF(n,e){if(!Array.isArray(n)||0===n.length)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UF(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ce(J.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class FD{convertValue(e,t="none"){switch(Na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Pa(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>_n(o.doubleValue));return new Av(s)}convertGeoPoint(e){return new wv(_n(e.latitude),_n(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=By(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(bp(e));default:return null}}convertTimestamp(e){const t=No(e);return new mn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Et.fromString(e);ke(Yk(r));const i=new Ma(r.get(1),r.get(3)),s=new Te(r.popFirst(5));return i.isEqual(t)||Un(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function xv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class UQ extends FD{constructor(e){super(),this.firestore=e}convertBytes(e){return new qs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,t)}}class hc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jo extends rg{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new og(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Sv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class og extends jo{data(e={}){return super.data(e)}}class Ha{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new hc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new og(this._firestore,this._userDataWriter,r.key,r,new hc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new og(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new og(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,g=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),g=o.indexOf(a.doc.key)),{type:jQ(a.type),doc:u,oldIndex:d,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function jQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}function jF(n,e){return n instanceof jo&&e instanceof jo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ha&&e instanceof Ha&&n._firestore===e._firestore&&CD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class za extends FD{constructor(e){super(),this.firestore=e}convertBytes(e){return new qs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,t)}}function $F(n,e,t){n=vt(n,hn);const r=vt(n.firestore,Wt),i=xv(n.converter,e,t);return Zd(r,[Cv(lc(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,yn.none())])}function HF(n,e,t,...r){n=vt(n,hn);const i=vt(n.firestore,Wt),s=lc(i);let o;return o="string"==typeof(e=(0,kt.Ku)(e))||e instanceof Bo?ND(s,"updateDoc",n._key,e,t,r):xD(s,"updateDoc",n._key,e),Zd(i,[o.toMutation(n._key,yn.exists(!0))])}function zF(n,...e){var t,r,i;n=(0,kt.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||DD(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(DD(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,d,g;if(n instanceof hn)d=vt(n.firestore,Wt),g=Td(n._key.path),u={next:m=>{e[o]&&e[o](LD(d,n,m))},error:e[o+1],complete:e[o+2]};else{const m=vt(n,Ar);d=vt(m.firestore,Wt),g=m._query;const v=new za(d);u={next:w=>{e[o]&&e[o](new Ha(d,v,m,w))},error:e[o+1],complete:e[o+2]},kF(n._query)}return function(v,w,T,D){const M=new yv(D),z=new jC(w,M,T);return v.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return kC(yield Yd(v),z)})),()=>{M.Za(),v.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return FC(yield Yd(v),z)}))}}(vn(d),g,a,u)}function Zd(n,e){return function(r,i){const s=new dr;return r.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function V7(n,e,t){return QC.apply(this,arguments)}(yield wD(r),i,s)})),s.promise}(vn(n),e)}function LD(n,e,t){const r=t.docs.get(e._key),i=new za(n);return new jo(n,i,e._key,r,new hc(t.hasPendingWrites,t.fromCache),e.converter)}const sY={maxAttempts:5};class qF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lc(e)}set(e,t,r){this._verifyNotCommitted();const i=qa(e,this._firestore),s=xv(i.converter,t,r),o=Cv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,yn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=qa(e,this._firestore);let o;return o="string"==typeof(t=(0,kt.Ku)(t))||t instanceof Bo?ND(this._dataReader,"WriteBatch.update",s._key,t,r,i):xD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qa(e,this._firestore);return this._mutations=this._mutations.concat(new Pd(t._key,yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qa(n,e){if((n=(0,kt.Ku)(n)).firestore!==e)throw new ce(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class oY extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=lc(t)}get(t){const r=qa(t,this._firestore),i=new UQ(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return xe();const o=s[0];if(o.isFoundDocument())return new rg(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new rg(this._firestore,i,r._key,null,r.converter);throw xe()})}set(t,r,i){const s=qa(t,this._firestore),o=xv(s.converter,r,i),a=Cv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=qa(t,this._firestore);let a;return a="string"==typeof(r=(0,kt.Ku)(r))||r instanceof Bo?ND(this._dataReader,"Transaction.update",o._key,r,i,s):xD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=qa(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=qa(e,this._firestore),r=new za(this._firestore);return super.get(e).then(i=>new jo(this._firestore,r,t._key,i._document,new hc(!1,!1),t.converter))}}function BD(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function QF(){if(typeof Uint8Array>"u")throw new ce("unimplemented","Uint8Arrays are not available in this environment.")}function YF(){if(!function U8(){return typeof atob<"u"}())throw new ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){md=fd.SDK_VERSION,(0,fd._registerComponent)(new a1.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Wt(new u8(r.getProvider("auth-internal")),new d8(r.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ma(d.options.projectId,g)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,fd.registerVersion)(m1,"4.7.3",e),(0,fd.registerVersion)(m1,"4.7.3","esm2017")}();class ag{constructor(e){this._delegate=e}static fromBase64String(e){return YF(),new ag(qs.fromBase64String(e))}static fromUint8Array(e){return QF(),new ag(qs.fromUint8Array(e))}toBase64(){return YF(),this._delegate.toBase64()}toUint8Array(){return QF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jD(n){return function mY(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class _Y{enableIndexedDbPersistence(e,t){return function _Q(n,e){ki("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return bF(n,Kd.provider,{build:r=>new gD(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function yQ(n){return bD.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function vQ(n){if(n._initialized&&!n._terminated)throw new ce(J.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new dr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ie.A)(function*(){try{yield(t=(0,ie.A)(function*(i){if(!Us.D())return Promise.resolve();const s=i+"main";yield Us.delete(s)}),function r(i){return t.apply(this,arguments)})(iC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class JF{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ma||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ki("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function wF(n,e,t,r={}){var i;const s=(n=vt(n,Xp))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=lr.MOCK_USER;else{a=(0,kt.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new lr(d)}n._authCredentials=new a8(new _1(a,u))}}(this._delegate,e,t,r)}enableNetwork(){return function EQ(n){return function rQ(n){return n.asyncQueue.enqueue((0,ie.A)(function*(){const e=yield lF(n),t=yield dF(n);return e.setNetworkEnabled(!0),function(i){const s=Ee(i);return s.L_.delete(0),Zp(s)}(t)}))}(vn(n=vt(n,Wt)))}(this._delegate)}disableNetwork(){return function wQ(n){return function iQ(n){return n.asyncQueue.enqueue((0,ie.A)(function*(){const e=yield lF(n),t=yield dF(n);return e.setNetworkEnabled(!1),(r=(0,ie.A)(function*(s){const o=Ee(s);o.L_.add(0),yield Ud(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(vn(n=vt(n,Wt)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_F("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function IQ(n){return function(t){const r=new dr;return t.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function B7(n,e){return eD.apply(this,arguments)}(yield wD(t),r)})),r.promise}(vn(n=vt(n,Wt)))}(this._delegate)}onSnapshotsInSync(e){return function YQ(n,e){return function uQ(n,e){const t=new yv(e);return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return i=yield Yd(n),s=t,Ee(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return i=yield Yd(n),s=t,void Ee(i).Y_.delete(s);var i,s}))}}(vn(n=vt(n,Wt)),DD(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xd(this,AF(this._delegate,e))}catch(t){throw ii(t,"collection()","Firestore.collection()")}}doc(e){try{return new ts(this,Ev(this._delegate,e))}catch(t){throw ii(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new si(this,function pQ(n,e){if(n=vt(n,Xp),TD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ar(n,null,(r=e,new ko(Et.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw ii(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function aY(n,e,t){n=vt(n,Wt);const r=Object.assign(Object.assign({},sY),t);return function(s){if(s.maxAttempts<1)throw new ce(J.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new dr;return s.asyncQueue.enqueueAndForget((0,ie.A)(function*(){const d=yield function hF(n){return vv(n).then(e=>e.datastore)}(s);new tQ(s.asyncQueue,d,a,o,u).au()})),u.promise}(vn(n),i=>e(new oY(n,i)),r)}(this._delegate,t=>e(new ZF(this,t)))}batch(){return vn(this._delegate),new XF(new qF(this._delegate,e=>Zd(this._delegate,e)))}loadBundle(e){return function AQ(n,e){const t=vn(n=vt(n,Wt)),r=new gQ;return function cQ(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?Pk().encode(o):o,g=function(g,m){if(g instanceof Uint8Array)return uF(g,m);if(g instanceof ArrayBuffer)return uF(new Uint8Array(g),m);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new X7(g,a);var g}(t,Jp(e));n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){!function J7(n,e,t){const r=Ee(n);var i;(i=(0,ie.A)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(T,D){const M=Ee(T),z=Bn(D.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",F=>M.Gr.getBundleMetadata(F,D.id)).then(F=>!!F&&F.createTime.compareTo(z)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(T=d).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);u._updateProgress(JV(d));const g=new S7(d,o.localStore,a.serializer);let m=yield a.Ua();for(;m;){const w=yield g.la(m);w&&u._updateProgress(w),m=yield a.Ua()}const v=yield g.complete();return yield Uo(o,v.Ia,void 0),yield function(T,D){const M=Ee(T);return M.persistence.runTransaction("Save bundle","readwrite",z=>M.Gr.saveBundleMetadata(z,D))}(o.localStore,d),u._completeWith(v.progress),Promise.resolve(v.Pa)}catch(d){return ki("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var T}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield wD(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function TQ(n,e){return function lQ(n,e){return n.asyncQueue.enqueue((0,ie.A)(function*(){return function(r,i){const s=Ee(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield Qd(n),e)}))}(vn(n=vt(n,Wt)),e).then(t=>t?new Ar(n,null,t.query):null)}(this._delegate,e).then(t=>t?new si(this,t):null)}}class Ov extends FD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ag(new qs(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ts.forKey(t,this.firestore,null)}}class ZF{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ov(e)}get(e){const t=pc(e);return this._delegate.get(t).then(r=>new ug(this._firestore,new jo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=pc(e);return r?(BD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=pc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=pc(e);return this._delegate.delete(t),this}}class XF{constructor(e){this._delegate=e}set(e,t,r){const i=pc(e);return r?(BD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=pc(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=pc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class fc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new og(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cg(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=fc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new fc(e,new Ov(e),t),i.set(t,s)),s}}fc.INSTANCES=new WeakMap;class ts{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ov(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ts(t,new hn(t._delegate,r,new Te(e)))}static forKey(e,t,r){return new ts(t,new hn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Xd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xd(this.firestore,AF(this._delegate,e))}catch(t){throw ii(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,kt.Ku)(e))instanceof hn&&TF(this._delegate,e)}set(e,t){t=BD("DocumentReference.set",t);try{return t?$F(this._delegate,e,t):$F(this._delegate,e)}catch(r){throw ii(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?HF(this._delegate,e):HF(this._delegate,e,t,...r)}catch(i){throw ii(i,"updateDoc()","DocumentReference.update()")}}delete(){return function KQ(n){return Zd(vt(n.firestore,Wt),[new Pd(n._key,yn.none())])}(this._delegate)}onSnapshot(...e){const t=eL(e),r=tL(e,i=>new ug(this.firestore,new jo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return zF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function HQ(n){n=vt(n,hn);const e=vt(n.firestore,Wt),t=vn(e),r=new za(e);return function sQ(n,e){const t=new dr;return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return(r=(0,ie.A)(function*(s,o,a){try{const u=yield function(g,m){const v=Ee(g);return v.persistence.runTransaction("read document","readonly",w=>v.localDocuments.getDocument(w,m))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ce(J.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=Hd(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Qd(n),e,t);var r})),t.promise}(t,n._key).then(i=>new jo(e,r,n._key,i,new hc(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function zQ(n){n=vt(n,hn);const e=vt(n.firestore,Wt);return fF(vn(e),n._key,{source:"server"}).then(t=>LD(e,n,t))}(this._delegate):function $Q(n){n=vt(n,hn);const e=vt(n.firestore,Wt);return fF(vn(e),n._key).then(t=>LD(e,n,t))}(this._delegate),t.then(r=>new ug(this.firestore,new jo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ts(this.firestore,this._delegate.withConverter(e?fc.getInstance(this.firestore,e):null))}}function ii(n,e,t){return n.message=n.message.replace(e,t),n}function eL(n){for(const e of n)if("object"==typeof e&&!jD(e))return e;return{}}function tL(n,e){var t,r;let i;return i=jD(n[0])?n[0]:jD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ug{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ts(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return jF(this._delegate,e._delegate)}}class cg extends ug{data(e){const t=this._delegate.data(e);return this._delegate._converter||function s8(n,e){n||xe()}(void 0!==t),t}}class si{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ov(e)}where(e,t,r){try{return new si(this.firestore,$a(this._delegate,function MQ(n,e,t){const r=e,i=Sv("where",n);return sg._create(i,r,t)}(e,t,r)))}catch(i){throw ii(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new si(this.firestore,$a(this._delegate,function xQ(n,e="asc"){const t=e,r=Sv("orderBy",n);return VD._create(r,t)}(e,t)))}catch(r){throw ii(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new si(this.firestore,$a(this._delegate,function NQ(n){return IF("limit",n),Rv._create("limit",n,"F")}(e)))}catch(t){throw ii(t,"limit()","Query.limit()")}}limitToLast(e){try{return new si(this.firestore,$a(this._delegate,function OQ(n){return IF("limitToLast",n),Rv._create("limitToLast",n,"L")}(e)))}catch(t){throw ii(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new si(this.firestore,$a(this._delegate,function kQ(...n){return Pv._create("startAt",n,!0)}(...e)))}catch(t){throw ii(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new si(this.firestore,$a(this._delegate,function VQ(...n){return Pv._create("startAfter",n,!1)}(...e)))}catch(t){throw ii(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new si(this.firestore,$a(this._delegate,function FQ(...n){return Mv._create("endBefore",n,!1)}(...e)))}catch(t){throw ii(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new si(this.firestore,$a(this._delegate,function LQ(...n){return Mv._create("endAt",n,!0)}(...e)))}catch(t){throw ii(t,"endAt()","Query.endAt()")}}isEqual(e){return CD(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function GQ(n){n=vt(n,Ar);const e=vt(n.firestore,Wt),t=vn(e),r=new za(e);return function oQ(n,e){const t=new dr;return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return(r=(0,ie.A)(function*(s,o,a){try{const u=yield lv(s,o,!0),d=new eF(o,u.Ts),g=d.ma(u.documents),m=d.applyChanges(g,!1);a.resolve(m.snapshot)}catch(u){const d=Hd(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Qd(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ha(e,r,n,i))}(this._delegate):"server"===e?.source?function WQ(n){n=vt(n,Ar);const e=vt(n.firestore,Wt),t=vn(e),r=new za(e);return pF(t,n._query,{source:"server"}).then(i=>new Ha(e,r,n,i))}(this._delegate):function qQ(n){n=vt(n,Ar);const e=vt(n.firestore,Wt),t=vn(e),r=new za(e);return kF(n._query),pF(t,n._query).then(i=>new Ha(e,r,n,i))}(this._delegate),t.then(r=>new $D(this.firestore,new Ha(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=eL(e),r=tL(e,i=>new $D(this.firestore,new Ha(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return zF(this._delegate,t,r)}withConverter(e){return new si(this.firestore,this._delegate.withConverter(e?fc.getInstance(this.firestore,e):null))}}class vY{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new cg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $D{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new si(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new cg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new vY(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new cg(this._firestore,r))})}isEqual(e){return jF(this._delegate,e._delegate)}}class Xd extends si{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ts(this.firestore,e):null}doc(e){try{return new ts(this.firestore,void 0===e?Ev(this._delegate):Ev(this._delegate,e))}catch(t){throw ii(t,"doc()","CollectionReference.doc()")}}add(e){return function QQ(n,e){const t=vt(n.firestore,Wt),r=Ev(n),i=xv(n.converter,e);return Zd(t,[Cv(lc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,yn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ts(this.firestore,t))}isEqual(e){return TF(this._delegate,e._delegate)}withConverter(e){return new Xd(this.firestore,this._delegate.withConverter(e?fc.getInstance(this.firestore,e):null))}}function pc(n){return vt(n,hn)}class HD{constructor(...e){this._delegate=new Bo(...e)}static documentId(){return new HD(ln.keyField().canonicalString())}isEqual(e){return(e=(0,kt.Ku)(e))instanceof Bo&&this._delegate._internalPath.isEqual(e._internalPath)}}class gc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function cY(){return new SD("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gc(e)}static delete(){const e=function uY(){return new tg("deleteField")}();return e._methodName="FieldValue.delete",new gc(e)}static arrayUnion(...e){const t=function lY(...n){return new RD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new gc(t)}static arrayRemove(...e){const t=function dY(...n){return new PD("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new gc(t)}static increment(e){const t=function hY(n){return new MD("increment",n)}(e);return t._methodName="FieldValue.increment",new gc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const IY={Firestore:JF,GeoPoint:wv,Timestamp:mn,Blob:ag,Transaction:ZF,WriteBatch:XF,DocumentReference:ts,DocumentSnapshot:ug,Query:si,QueryDocumentSnapshot:cg,QuerySnapshot:$D,CollectionReference:Xd,FieldPath:HD,FieldValue:gc,setLogLevel:function yY(n){!function i8(n){ba.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function nL(n,e){return function AY(n,e=zO){return new lt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function zD(n,e){return nL(n,e).pipe(Oe(t=>({payload:t,type:"query"})))}!function wY(n){(function EY(n,e){n.INTERNAL.registerComponent(new a1.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},IY)))})(n,(e,t)=>new JF(e,t,new _Y)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Da.A);class rL{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=cL(r,t);return new oL(i,s,this.afs)}snapshotChanges(){return function TY(n,e){return nL(n,e).pipe(dy(void 0),yT(),Oe(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Oi)}valueChanges(e={}){return this.snapshotChanges().pipe(Oe(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return S(this.ref.get(e)).pipe(Oi)}}function kv(n,e){return zD(n,e).pipe(dy(void 0),yT(),Oe(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(m=>m.doc.ref.isEqual(a.ref)),g=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&g&&JSON.stringify(g.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function iL(n,e,t){return kv(n,t).pipe(fy((r,i)=>function CY(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function DY(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return qD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return qD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Ht(),Oe(r=>r.map(i=>({type:i.type,payload:i}))))}function qD(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function sL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class oL{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=kv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Oe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(dy(void 0),yT(),Xi(([r,i])=>i.length>0||!r),Oe(([,r])=>r),Oi)}auditTrail(e){return this.stateChanges(e).pipe(fy((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sL(e);return iL(this.query,t,this.afs.schedulers.outsideAngular).pipe(Oi)}valueChanges(e={}){return zD(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Oi)}get(e){return S(this.query.get(e)).pipe(Oi)}add(e){return this.ref.add(e)}doc(e){return new rL(this.ref.doc(e),this.afs)}}class bY{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?kv(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(t=>t.filter(r=>e.indexOf(r.type)>-1)),Xi(t=>t.length>0),Oi):kv(this.query,this.afs.schedulers.outsideAngular).pipe(Oi)}auditTrail(e){return this.stateChanges(e).pipe(fy((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sL(e);return iL(this.query,t,this.afs.schedulers.outsideAngular).pipe(Oi)}valueChanges(e={}){return zD(this.query,this.afs.schedulers.outsideAngular).pipe(Oe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Oi)}get(e){return S(this.query.get(e)).pipe(Oi)}}const aL=new _e("angularfire2.enableFirestorePersistence"),uL=new _e("angularfire2.firestore.persistenceSettings"),SY=new _e("angularfire2.firestore.settings"),RY=new _e("angularfire2.firestore.use-emulator");function cL(n,e=(t=>t)){return{query:e(n),ref:n}}let PY=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,d,g,m,v,w,T,D,M,z,F){this.schedulers=u;const G=_T(t,a,r),ae=g;m&&s1(G,a,v,T,D,M,w,z),[this.firestore,this.persistenceEnabled$]=QO(`${G.name}.firestore`,"AngularFirestore",G.name,()=>{const ye=a.runOutsideAngular(()=>G.firestore());if(s&&ye.settings(s),ae&&ye.useEmulator(...ae),i&&!oy(o)){const Fe=()=>{try{return S(ye.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(V){return typeof console<"u"&&console.warn(V),B(!1)}};return[ye,a.runOutsideAngular(Fe)]}return[ye,B(!1)]},[s,ae,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=cL(i,r),a=this.schedulers.ngZone.run(()=>s);return new oL(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new bY(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new rL(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(me(xy),me(Ny,8),me(aL,8),me(SY,8),me(Ps),me(Lt),me(WO),me(uL,8),me(RY,8),me(o1,8),me(XO,8),me(e1,8),me(t1,8),me(n1,8),me(r1,8),me(i1,8),me(qO,8))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),MY=(()=>{class n{constructor(){Da.A.registerVersion("angularfire",mT.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:aL,useValue:!0},{provide:uL,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Jr({type:n});static \u0275inj=sr({providers:[PY]})}return n})();const xY_firebase={apiKey:"AIzaSyDWOb8hpZ7JQcpPzpcNw6SW53_pG0V5UE0",authDomain:"wedding-29b48.firebaseapp.com",projectId:"wedding-29b48",storageBucket:"wedding-29b48.firebasestorage.app",messagingSenderId:"807343676966",appId:"1:807343676966:web:1c21870a5ee2dfbae790e7",measurementId:"YOUR_MEASUREMENT_ID"};let lL=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(pe(Io),pe(Si))}}static{this.\u0275dir=Ke({type:n})}}return n})(),mc=(()=>{class n extends lL{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Fn(n)))(i||n)}}()}static{this.\u0275dir=Ke({type:n,features:[Ut]})}}return n})();const Gs=new _e("NgValueAccessor"),kY={provide:Gs,useExisting:St(()=>Vv),multi:!0},FY=new _e("CompositionEventMode");let Vv=(()=>{class n extends lL{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function VY(){const n=Ea()?Ea().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(pe(Io),pe(Si),pe(FY,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Mi("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[gn([kY]),Ut]})}}return n})();const jr=new _e("NgValidators"),Wa=new _e("NgAsyncValidators");function EL(n){return null!=n}function wL(n){return $f(n)?S(n):n}function AL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function TL(n,e){return e.map(t=>t(n))}function CL(n){return n.map(e=>function UY(n){return!n.validate}(e)?e:t=>e.validate(t))}function GD(n){return null!=n?function DL(n){if(!n)return null;const e=n.filter(EL);return 0==e.length?null:function(t){return AL(TL(t,e))}}(CL(n)):null}function WD(n){return null!=n?function bL(n){if(!n)return null;const e=n.filter(EL);return 0==e.length?null:function(t){return function NY(...n){const e=Js(n),{args:t,keys:r}=ON(n),i=new lt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,d=o;for(let g=0;g<o;g++){let m=!1;jn(t[g]).subscribe(fe(s,v=>{m||(m=!0,d--),a[g]=v},()=>u--,void 0,()=>{(!u||!m)&&(d||s.next(r?VN(r,a):a),s.complete())}))}});return e?i.pipe(kN(e)):i}(TL(t,e).map(wL)).pipe(Oe(AL))}}(CL(n)):null}function SL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function KD(n){return n?Array.isArray(n)?n:[n]:[]}function Lv(n,e){return Array.isArray(n)?n.includes(e):n===e}function ML(n,e){const t=KD(e);return KD(n).forEach(i=>{Lv(t,i)||t.push(i)}),t}function xL(n,e){return KD(e).filter(t=>!Lv(n,t))}class NL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=GD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=WD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class oi extends NL{get formDirective(){return null}get path(){return null}}class Ka extends NL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class OL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let kL=(()=>{class n extends OL{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(pe(Ka,2))}}static{this.\u0275dir=Ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&x_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Ut]})}}return n})(),VL=(()=>{class n extends OL{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(pe(oi,10))}}static{this.\u0275dir=Ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&x_("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Ut]})}}return n})();const lg="VALID",Bv="INVALID",eh="PENDING",dg="DISABLED";function JD(n){return(jv(n)?n.validators:n)||null}function ZD(n,e){return(jv(e)?e.asyncValidators:n)||null}function jv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class XD{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===lg}get invalid(){return this.status===Bv}get pending(){return this.status==eh}get disabled(){return this.status===dg}get enabled(){return this.status!==dg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ML(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ML(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xL(e,this._rawAsyncValidators))}hasValidator(e){return Lv(this._rawValidators,e)}hasAsyncValidator(e){return Lv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=eh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lg||this.status===eh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dg:lg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=eh,this._hasOwnPendingAsyncValidator=!0;const t=wL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Mn,this.statusChanges=new Mn}_calculateStatus(){return this._allControlsDisabled()?dg:this.errors?Bv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(eh)?eh:this._anyControlsHaveStatus(Bv)?Bv:lg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function HY(n){return Array.isArray(n)?GD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function zY(n){return Array.isArray(n)?WD(n):n||null}(this._rawAsyncValidators)}}class e0 extends XD{constructor(e,t,r){super(JD(t),ZD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function UL(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new de(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function LL(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new de(1e3,"");if(!r[t])throw new de(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const th=new _e("CallSetDisabledState",{providedIn:"root",factory:()=>$v}),$v="always";function hg(n,e,t=$v){t0(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function WY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&BL(n,e)})}(n,e),function QY(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function KY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&BL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function GY(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function qv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function t0(n,e){const t=function RL(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(SL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function PL(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(SL(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();qv(e._rawValidators,i),qv(e._rawAsyncValidators,i)}function BL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const eJ={provide:oi,useExisting:St(()=>Wv)},fg=(()=>Promise.resolve())();let Wv=(()=>{class n extends oi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Mn,this.form=new e0({},GD(t),WD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){fg.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),hg(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){fg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){fg.then(()=>{const r=this._findContainer(t.path),i=new e0({});(function jL(n,e){t0(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){fg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){fg.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function $L(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(pe(jr,10),pe(Wa,10),pe(th,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Mi("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[gn([eJ]),Ut]})}}return n})();function HL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function zL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const qL=class extends XD{constructor(e=null,t,r){super(JD(t),ZD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=zL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){HL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){HL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){zL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},rJ={provide:Ka,useExisting:St(()=>o0)},KL=(()=>Promise.resolve())();let o0=(()=>{class n extends Ka{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new qL,this._registered=!1,this.name="",this.update=new Mn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function s0(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Vv?t=s:function ZY(n){return Object.getPrototypeOf(n.constructor)===mc}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function r0(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){hg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){KL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&ed(r);KL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Hv(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(pe(oi,9),pe(jr,10),pe(Wa,10),pe(Gs,10),pe(q_,8),pe(th,8))}}static{this.\u0275dir=Ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[gn([rJ]),Ut,pi]})}}return n})(),QL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),JL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jr({type:n})}static{this.\u0275inj=sr({})}}return n})(),bJ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jr({type:n})}static{this.\u0275inj=sr({imports:[JL]})}}return n})(),RJ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:th,useValue:t.callSetDisabledState??$v}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jr({type:n})}static{this.\u0275inj=sr({imports:[bJ]})}}return n})();class Kv{}class Qv{}class Ws{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ws?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ws;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ws?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class PJ{encodeKey(e){return g2(e)}encodeValue(e){return g2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const xJ=/%(\d[a-f0-9])/gi,NJ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function g2(n){return encodeURIComponent(n).replace(xJ,(e,t)=>NJ[t]??e)}function Yv(n){return`${n}`}class Qa{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new PJ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function MJ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Yv):[Yv(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Qa({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Yv(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Yv(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class OJ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function m2(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function _2(n){return typeof Blob<"u"&&n instanceof Blob}function y2(n){return typeof FormData<"u"&&n instanceof FormData}class pg{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function kJ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ws),this.context||(this.context=new OJ),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Qa,this.urlWithParams=t}serializeBody(){return null===this.body?null:m2(this.body)||_2(this.body)||y2(this.body)||function VJ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qa?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||y2(this.body)?null:_2(this.body)?this.body.type||null:m2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qa?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,d=e.params||this.params;const g=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),d)),new pg(t,r,s,{params:d,headers:u,context:g,reportProgress:a,responseType:i,withCredentials:o})}}var nh=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(nh||{});class f0{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ws,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class p0 extends f0{constructor(e={}){super(e),this.type=nh.ResponseHeader}clone(e={}){return new p0({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class rh extends f0{constructor(e={}){super(e),this.type=nh.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new rh({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class v2 extends f0{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function g0(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let I2=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof pg)s=t;else{let u,d;u=i.headers instanceof Ws?i.headers:new Ws(i.headers),i.params&&(d=i.params instanceof Qa?i.params:new Qa({fromObject:i.params})),s=new pg(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=B(s).pipe(rd(u=>this.handler.handle(u)));if(t instanceof pg||"events"===i.observe)return o;const a=o.pipe(Xi(u=>u instanceof rh));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Oe(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(Oe(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(Oe(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(Oe(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Qa).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,g0(i,r))}post(t,r,i={}){return this.request("POST",t,g0(i,r))}put(t,r,i={}){return this.request("PUT",t,g0(i,r))}static{this.\u0275fac=function(r){return new(r||n)(me(Kv))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();function A2(n,e){return e(n)}function LJ(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const BJ=new _e(""),gg=new _e(""),T2=new _e("");function jJ(){let n=null;return(e,t)=>{null===n&&(n=(be(BJ,{optional:!0})??[]).reduceRight(LJ,A2));const r=be(j_),i=r.add();return n(e,t).pipe(sp(()=>r.remove(i)))}}let C2=(()=>{class n extends Kv{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=be(j_)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(gg),...this.injector.get(T2,[])]));this.chain=i.reduceRight((s,o)=>function UJ(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),A2)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(sp(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(me(Qv),me(bi))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();const qJ=/^\)\]\}',?\n/;let b2=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new de(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?S(r.\u0275loadImpl()):B(null)).pipe(Ce(()=>new lt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((D,M)=>o.setRequestHeader(D,M.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const D=t.detectContentTypeHeader();null!==D&&o.setRequestHeader("Content-Type",D)}if(t.responseType){const D=t.responseType.toLowerCase();o.responseType="json"!==D?D:"text"}const a=t.serializeBody();let u=null;const d=()=>{if(null!==u)return u;const D=o.statusText||"OK",M=new Ws(o.getAllResponseHeaders()),z=function GJ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return u=new p0({headers:M,status:o.status,statusText:D,url:z}),u},g=()=>{let{headers:D,status:M,statusText:z,url:F}=d(),G=null;204!==M&&(G=typeof o.response>"u"?o.responseText:o.response),0===M&&(M=G?200:0);let ae=M>=200&&M<300;if("json"===t.responseType&&"string"==typeof G){const ye=G;G=G.replace(qJ,"");try{G=""!==G?JSON.parse(G):null}catch(Fe){G=ye,ae&&(ae=!1,G={error:Fe,text:G})}}ae?(s.next(new rh({body:G,headers:D,status:M,statusText:z,url:F||void 0})),s.complete()):s.error(new v2({error:G,headers:D,status:M,statusText:z,url:F||void 0}))},m=D=>{const{url:M}=d(),z=new v2({error:D,status:o.status||0,statusText:o.statusText||"Unknown Error",url:M||void 0});s.error(z)};let v=!1;const w=D=>{v||(s.next(d()),v=!0);let M={type:nh.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(M.total=D.total),"text"===t.responseType&&o.responseText&&(M.partialText=o.responseText),s.next(M)},T=D=>{let M={type:nh.UploadProgress,loaded:D.loaded};D.lengthComputable&&(M.total=D.total),s.next(M)};return o.addEventListener("load",g),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),t.reportProgress&&(o.addEventListener("progress",w),null!==a&&o.upload&&o.upload.addEventListener("progress",T)),o.send(a),s.next({type:nh.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",g),o.removeEventListener("timeout",m),t.reportProgress&&(o.removeEventListener("progress",w),null!==a&&o.upload&&o.upload.removeEventListener("progress",T)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(me(hN))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();const m0=new _e("XSRF_ENABLED"),S2=new _e("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),R2=new _e("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class P2{}let QJ=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=rN(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(me(xi),me(Ps),me(S2))}}static{this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}}return n})();function YJ(n,e){const t=n.url.toLowerCase();if(!be(m0)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=be(P2).getToken(),i=be(R2);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var Ya=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Ya||{});function yc(n,e){return{\u0275kind:n,\u0275providers:e}}function JJ(...n){const e=[I2,b2,C2,{provide:Kv,useExisting:C2},{provide:Qv,useExisting:b2},{provide:gg,useValue:YJ,multi:!0},{provide:m0,useValue:!0},{provide:P2,useClass:QJ}];for(const t of n)e.push(...t.\u0275providers);return function VE(n){return{\u0275providers:n}}(e)}const M2=new _e("LEGACY_INTERCEPTOR_FN");let XJ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jr({type:n})}static{this.\u0275inj=sr({providers:[JJ(yc(Ya.LegacyInterceptors,[{provide:M2,useFactory:jJ},{provide:gg,useExisting:M2,multi:!0}]))]})}}return n})(),sZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ai({type:n,selectors:[["app-home"]],decls:50,vars:0,consts:[[1,"container"],[1,"welcome-text"],[1,"time-and-place"],[1,"dot"],[1,"our-story"],[1,"our-story-headline"],[1,"our-story-text"],[1,"collage-container"],[1,"collage-item-1"],["src","assets/images/ratio1-1/picture14-1_1.jpg"],[1,"overlay-text-1_1"],[1,"collage-item-2"],["src","assets/images/ratio1-1/picture12-1_1.jpg"],[1,"collage-item-3"],["src","assets/images/ratio9-16/picture10-9_16.jpg"],[1,"overlay-text-9_16"],[1,"collage-item-4"],["src","assets/images/ratio9-16/picture6-9_16.jpg"],[1,"collage-item-5"],["src","assets/images/ratio9-16/picture21-9_16.jpg"],[1,"collage-item-6"],[1,"collage-item-7"],["src","assets/images/ratio1-1/picture8-1_1.jpg"],[1,"collage-item-8"],["src","assets/images/ratio1-1/picture16-1_1.jpg"]],template:function(r,i){1&r&&(Qe(0,"div",0)(1,"div",1)(2,"div"),yt(3,"We are delighted to welcome you to"),st(),Qe(4,"div"),yt(5,"Patrik & Claudia's"),st(),Qe(6,"div"),yt(7,"wedding!"),st()(),Qe(8,"div",2),yt(9," July 19 2025 "),cr(10,"span",3),yt(11," G\xf6teborg "),cr(12,"span",3),yt(13," 224 days to go "),st(),Qe(14,"div",4)(15,"div",5),yt(16,"OUR STORY"),st(),Qe(17,"p",6),yt(18,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempore id reprehenderit culpa veniam, totam aliquid perferendis doloribus alias vel sapiente quibusdam ipsum accusamus ullam deleniti sunt explicabo excepturi ips cum corporis incidunt atque eveniet? Ducimus, dicta consectetur? Accusantium atque similique magni blanditiis, excepturi non maiores ab necessitatibus fugiat, tempora sed et voluptates reiciendis eius minima fugit ducimus porro facilis totam quidem. Modi nihil, assumenda consequatur magnam itaque, dolor, deserunt ut qui necessitatibus consectetur enim. Cum eum exercitationem ut dolor obcaecati qui dicta, officia voluptatum! Modi, beatae consectetur, sint quasi dolorum enim repudiandae necessitatibus quibusdam in ipsum doloremque maxime quae nobis."),st()(),Qe(19,"div",7)(20,"div",8),cr(21,"img",9),Qe(22,"div",10),yt(23,"Dec 2022"),st()(),Qe(24,"div",11),cr(25,"img",12),Qe(26,"div",10),yt(27,"May 2023"),st()(),Qe(28,"div",13),cr(29,"img",14),Qe(30,"div",15),yt(31,"Aug 2023"),st()(),Qe(32,"div",16),cr(33,"img",17),Qe(34,"div",15),yt(35,"Dec 2023"),st()(),Qe(36,"div",18),cr(37,"img",19),Qe(38,"div",15),yt(39,"Dec 2023"),st()(),Qe(40,"div",20),cr(41,"img",19),st(),Qe(42,"div",21),cr(43,"img",22),Qe(44,"div",10),yt(45,"July 2024"),st()(),Qe(46,"div",23),cr(47,"img",24),Qe(48,"div",10),yt(49,"Sep 2024"),st()()()())},styles:[".container[_ngcontent-%COMP%]{align-items:center;text-align:center}.welcome-text[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:30px;font-family:Waterfall,cursive;font-size:80px;z-index:1}.time-and-place[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:auto;background-color:#96a498;color:#fff;padding:.5em;font-size:22px}.dot[_ngcontent-%COMP%]{height:5px;width:5px;background-color:#fff;border-radius:50%;display:inline-block;margin-left:1.5em;margin-right:1.5em}.timer[_ngcontent-%COMP%]{z-index:1;margin-top:35px;align-self:flex-end;margin-bottom:20px}.our-story-headline[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:center;font-size:26px}.our-story-text[_ngcontent-%COMP%]{font-size:14px;margin-top:5px}.collage-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:auto auto auto auto;grid-column-gap:3%;grid-row-gap:3%;margin:5%}.collage-item-1[_ngcontent-%COMP%]{grid-column:1/1;grid-row:1/2;position:relative}.collage-item-2[_ngcontent-%COMP%]{grid-column:2/2;grid-row:1/2;position:relative}.collage-item-3[_ngcontent-%COMP%]{grid-column:3/4;grid-row:1/3;position:relative}.collage-item-4[_ngcontent-%COMP%]{grid-column:4/5;grid-row:1/3;position:relative}.collage-item-5[_ngcontent-%COMP%]{grid-column:1/2;grid-row:2/4;position:relative}.collage-item-6[_ngcontent-%COMP%]{grid-column:2/3;grid-row:2/4}.collage-item-7[_ngcontent-%COMP%]{grid-column:3/4;grid-row:3/4;position:relative}.collage-item-8[_ngcontent-%COMP%]{grid-column:4/5;grid-row:3/4;position:relative}img[_ngcontent-%COMP%]{display:block;width:100%;height:auto;object-fit:cover;border-radius:5px;filter:grayscale(100%);transition:filter .3s ease}img[_ngcontent-%COMP%]:hover{filter:grayscale(0%)}.overlay-text-1_1[_ngcontent-%COMP%]{position:absolute;top:85%;left:10%;color:#fff;text-shadow:2px 2px 5px rgb(0,0,0);font-size:16px;font-weight:700}.overlay-text-9_16[_ngcontent-%COMP%]{position:absolute;top:90%;left:10%;color:#fff;text-shadow:2px 2px 5px rgb(0,0,0);font-size:16px;font-weight:700}@media (max-width: 1200px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:70px}.time-and-place[_ngcontent-%COMP%]{font-size:20px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 1000px){.welcome-text[_ngcontent-%COMP%]{margin-top:60px;font-size:65px}.time-and-place[_ngcontent-%COMP%]{font-size:18px}.dot[_ngcontent-%COMP%]{height:4px;width:4px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 800px){.welcome-text[_ngcontent-%COMP%]{margin-top:60px;font-size:52px}.time-and-place[_ngcontent-%COMP%]{font-size:16px}.our-story-headline[_ngcontent-%COMP%]{margin-top:20px;font-size:22px}.our-story-text[_ngcontent-%COMP%]{font-size:12px;margin-top:4px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:10px}}@media (max-width: 600px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:30px;font-size:38px}.time-and-place[_ngcontent-%COMP%]{font-size:12px}.dot[_ngcontent-%COMP%]{height:3px;width:3px}.our-story-text[_ngcontent-%COMP%]{font-size:10px}.our-story-headline[_ngcontent-%COMP%]{margin-top:15px;font-size:18px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:8px}}@media (max-width: 450px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:35px}.time-and-place[_ngcontent-%COMP%]{font-size:10px}.our-story[_ngcontent-%COMP%]{font-size:8px}.our-story-headline[_ngcontent-%COMP%]{font-size:14px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:6px}}@media (max-width: 400px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:28px}.timer[_ngcontent-%COMP%]{margin-top:20px}}"]})}}return n})(),oZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ai({type:n,selectors:[["app-about"]],decls:12,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(Qe(0,"div",0)(1,"ul")(2,"li"),yt(3,"Home"),st(),Qe(4,"li"),yt(5,"The Wedding: Here goes information about the wedding, place & time. This could be expanded into a finer schedule later on."),st(),Qe(6,"li"),yt(7,"Registry: A list of wedding gifts."),st(),Qe(8,"li"),yt(9,"FAQ: Accomodation, transportation, clothes, gifts, contact info, allergies etc."),st(),Qe(10,"li"),yt(11,"RSVP"),st()()())},styles:[".container[_ngcontent-%COMP%]{margin:2em;height:100vh}"]})}}return n})(),aZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ai({type:n,selectors:[["app-schedule"]],decls:2,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(Qe(0,"div",0),yt(1,"Schedule View"),st())},styles:[".container[_ngcontent-%COMP%]{margin:2em;height:100vh}"]})}}return n})(),uZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ai({type:n,selectors:[["app-contact"]],decls:2,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(Qe(0,"div",0),yt(1,"Contact View works"),st())},styles:[".container[_ngcontent-%COMP%]{height:100vh;margin:2em}"]})}}return n})(),cZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ai({type:n,selectors:[["app-error"]],decls:5,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(Qe(0,"div",0)(1,"h1"),yt(2,"404: Page Not Found"),st(),Qe(3,"p"),yt(4,"The page you are looking for cannot be found or you do not have access to this page."),st()())},styles:[".container[_ngcontent-%COMP%]{text-align:center;margin:30px 0}"]})}}return n})();function lZ(n,e){1&n&&(Qe(0,"div",10),yt(1,"Name missing"),st())}const dZ=[{path:"",redirectTo:"Home",pathMatch:"full"},{path:"Home",component:sZ},{path:"About",component:oZ},{path:"Schedule",component:aZ},{path:"Registry",component:(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ai({type:n,selectors:[["app-registry"]],decls:2,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(Qe(0,"div",0),yt(1," registry works!\n"),st())},styles:[".container[_ngcontent-%COMP%]{height:100vh;margin:2em}"]})}}return n})()},{path:"Contact",component:uZ},{path:"Rsvp",component:(()=>{class n{constructor(t){this.http=t,this.validName=!0}addGuest(t,r){console.log(t);try{this.validateName(t.name),this.http.post("https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app/guests.json",t).subscribe(s=>{console.log(s)}),this.validName=!0,r.reset()}catch{this.validName=!1,console.log("Invalid name")}}validateName(t){if(t.length<1)throw Error}static{this.\u0275fac=function(r){return new(r||n)(pe(I2))}}static{this.\u0275cmp=Ai({type:n,selectors:[["app-rsvp"]],decls:20,vars:1,consts:[[1,"container"],[1,"text-container"],[1,"form-container"],[1,"form",3,"ngSubmit"],["guestForm","ngForm"],["type","text","name","name","ngModel","",1,"input-field"],["class","error-message",4,"ngIf"],["type","text","name","plusOne","ngModel","",1,"input-field"],["name","additional","rows","5","ngModel","",1,"input-field"],["type","submit","value","Send",1,"submit-button"],[1,"error-message"]],template:function(r,i){if(1&r){const s=function zR(){return ue()}();Qe(0,"div",0)(1,"div",1)(2,"h2"),yt(3,"Respondez, s'il vous plait"),st(),Qe(4,"p"),yt(5,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ipsam natus deleniti ex delectus at libero consequatur est sequi numquam eveniet! "),st()(),Qe(6,"div",2)(7,"form",3,4),Mi("ngSubmit",function(){!function sl(n){return ze.lFrame.contextLView=n,n[Tn]}(s);const a=function BR(n){return function bs(n,e){return n[e]}(function qh(){return ze.lFrame.contextLView}(),gt+n)}(8);return function Im(n){return ze.lFrame.contextLView=null,n}(i.addGuest(a.value,a))}),Qe(9,"label"),yt(10,"Name"),st(),cr(11,"input",5),function FR(n,e,t,r,i,s,o,a){const u=ue(),d=It(),g=n+gt,m=d.firstCreatePass?function eH(n,e,t,r,i,s,o,a,u){const d=e.consts,g=Ll(e,n,4,o||null,us(d,a));dw(e,t,g,us(d,u)),cl(e,g);const m=g.tView=lw(2,g,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,g),m.queries=e.queries.embeddedTView(g)),g}(g,d,u,e,t,r,i,s,o):d.data[g];Wi(m,!1);const v=LR(d,u,m,n);bu()&&r_(d,u,v,m),kr(v,u),w_(u,u[g]=oR(v,u,v,m)),Mh(m)&&uw(d,u,m),null!=o&&cw(u,m,a)}(12,lZ,2,0,"div",6),Qe(13,"label"),yt(14,"Plus one (if any)"),st(),cr(15,"input",7),Qe(16,"label"),yt(17,"Additional info"),st(),cr(18,"textarea",8)(19,"input",9),st()()()}2&r&&(ya(12),To("ngIf",!i.validName))},dependencies:[aN,QL,Vv,kL,VL,o0,Wv],styles:[".container[_ngcontent-%COMP%]{height:100vh;margin:2em}.text-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.form-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:400px;height:auto;background-color:#96a498;color:#fff;border-radius:10px;padding:1em}label[_ngcontent-%COMP%]{font-size:18px;margin-top:1em}.input-field[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:.5em;width:300px}.submit-button[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:2em;width:50px}.error-message[_ngcontent-%COMP%]{color:#fff}@media (max-width: 1000px){.form[_ngcontent-%COMP%]{width:300px;height:auto}.input-field[_ngcontent-%COMP%]{width:200px}}@media (max-width: 600px){.form[_ngcontent-%COMP%]{width:200px;height:auto}.input-field[_ngcontent-%COMP%]{width:150px}label[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 450px){.form[_ngcontent-%COMP%]{width:150px;height:auto}.input-field[_ngcontent-%COMP%]{width:120px}label[_ngcontent-%COMP%]{font-size:12px}}"]})}}return n})()},{path:"**",component:cZ}];let hZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Jr({type:n,bootstrap:[xW]})}static{this.\u0275inj=sr({imports:[W9,RJ,MW,pT.forRoot(dZ),ZW.initializeApp(xY_firebase),MY,XJ]})}}return n})();q9().bootstrapModule(hZ).catch(n=>console.error(n))},574:(ns,rr,nt)=>{nt.d(rr,{A:()=>Kn});var C=nt(401),qe=nt(779),Pe=nt(979),ee=nt(398);class Tt{constructor(Ge,it){this._delegate=Ge,this.firebase=it,(0,Pe._addComponent)(Ge,new qe.uA("app-compat",()=>this,"PUBLIC")),this.container=Ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ge){this._delegate.automaticDataCollectionEnabled=Ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ge=>{this._delegate.checkDestroyed(),Ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Pe.deleteApp)(this._delegate)))}_getService(Ge,it=Pe._DEFAULT_ENTRY_NAME){var Qn;this._delegate.checkDestroyed();const Yn=this._delegate.container.getProvider(Ge);return!Yn.isInitialized()&&"EXPLICIT"===(null===(Qn=Yn.getComponent())||void 0===Qn?void 0:Qn.instantiationMode)&&Yn.initialize(),Yn.getImmediate({identifier:it})}_removeServiceInstance(Ge,it=Pe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ge).clearInstance(it)}_addComponent(Ge){(0,Pe._addComponent)(this._delegate,Ge)}_addOrOverwriteComponent(Ge){(0,Pe._addOrOverwriteComponent)(this._delegate,Ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pn=new C.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function dt(){const Ct=function Wn(Ct){const Ge={},it={__esModule:!0,initializeApp:function Qt($e,In={}){const $t=Pe.initializeApp($e,In);if((0,C.gR)(Ge,$t.name))return Ge[$t.name];const le=new Ct($t,it);return Ge[$t.name]=le,le},app:Yn,registerVersion:Pe.registerVersion,setLogLevel:Pe.setLogLevel,onLog:Pe.onLog,apps:null,SDK_VERSION:Pe.SDK_VERSION,INTERNAL:{registerComponent:function Vt($e){const In=$e.name,$t=In.replace("-compat","");if(Pe._registerComponent($e)&&"PUBLIC"===$e.type){const le=(Yt=Yn())=>{if("function"!=typeof Yt[$t])throw pn.create("invalid-app-argument",{appName:In});return Yt[$t]()};void 0!==$e.serviceProps&&(0,C.zw)(le,$e.serviceProps),it[$t]=le,Ct.prototype[$t]=function(...Yt){return this._getService.bind(this,In).apply(this,$e.multipleInstances?Yt:[])}}return"PUBLIC"===$e.type?it[$t]:null},removeApp:function Qn($e){delete Ge[$e]},useAsService:function fr($e,In){return"serverAuth"===In?null:In},modularAPIs:Pe}};function Yn($e){if(!(0,C.gR)(Ge,$e=$e||Pe._DEFAULT_ENTRY_NAME))throw pn.create("no-app",{appName:$e});return Ge[$e]}return it.default=it,Object.defineProperty(it,"apps",{get:function bt(){return Object.keys(Ge).map($e=>Ge[$e])}}),Yn.App=Ct,it}(Tt);return Ct.INTERNAL=Object.assign(Object.assign({},Ct.INTERNAL),{createFirebaseNamespace:dt,extendNamespace:function Ge(it){(0,C.zw)(Ct,it)},createSubscribe:C.tD,ErrorFactory:C.FA,deepExtend:C.zw}),Ct}(),ge=new ee.Vy("@firebase/app-compat");try{const Ct=(0,C.mS)();if(void 0!==Ct.firebase){ge.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const Ge=Ct.firebase.SDK_VERSION;Ge&&Ge.indexOf("LITE")>=0&&ge.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Kn=oe;!function At(Ct){(0,Pe.registerVersion)("@firebase/app-compat","0.2.43",Ct)}()},979:(ns,rr,nt)=>{nt.r(rr),nt.d(rr,{FirebaseError:()=>ee.g,SDK_VERSION:()=>Zs,_DEFAULT_ENTRY_NAME:()=>Ui,_addComponent:()=>En,_addOrOverwriteComponent:()=>Bi,_apps:()=>li,_clearComponents:()=>Js,_components:()=>Sr,_getProvider:()=>Wo,_isFirebaseApp:()=>Ko,_isFirebaseServerApp:()=>Rr,_registerComponent:()=>wn,_removeServiceInstance:()=>ji,_serverApps:()=>bn,deleteApp:()=>Jo,getApp:()=>Tc,getApps:()=>Yo,initializeApp:()=>Qo,initializeServerApp:()=>Xs,onLog:()=>P,registerVersion:()=>S,setLogLevel:()=>k});var C=nt(467),qe=nt(779),Pe=nt(398),ee=nt(401);const Tt=(Q,x)=>x.some(K=>Q instanceof K);let on,pn;const oe=new WeakMap,ge=new WeakMap,Ne=new WeakMap,ct=new WeakMap,At=new WeakMap;let Ge={get(Q,x,K){if(Q instanceof IDBTransaction){if("done"===x)return ge.get(Q);if("objectStoreNames"===x)return Q.objectStoreNames||Ne.get(Q);if("store"===x)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return Qt(Q[x])},set:(Q,x,K)=>(Q[x]=K,!0),has:(Q,x)=>Q instanceof IDBTransaction&&("done"===x||"store"===x)||x in Q};function Yn(Q){return"function"==typeof Q?function Qn(Q){return Q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function dt(){return pn||(pn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Q)?function(...x){return Q.apply(bt(this),x),Qt(oe.get(this))}:function(...x){return Qt(Q.apply(bt(this),x))}:function(x,...K){const Ae=Q.call(bt(this),x,...K);return Ne.set(Ae,x.sort?x.sort():[x]),Qt(Ae)}}(Q):(Q instanceof IDBTransaction&&function Ct(Q){if(ge.has(Q))return;const x=new Promise((K,Ae)=>{const Ye=()=>{Q.removeEventListener("complete",et),Q.removeEventListener("error",tt),Q.removeEventListener("abort",tt)},et=()=>{K(),Ye()},tt=()=>{Ae(Q.error||new DOMException("AbortError","AbortError")),Ye()};Q.addEventListener("complete",et),Q.addEventListener("error",tt),Q.addEventListener("abort",tt)});ge.set(Q,x)}(Q),Tt(Q,function Wn(){return on||(on=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Q,Ge):Q)}function Qt(Q){if(Q instanceof IDBRequest)return function Kn(Q){const x=new Promise((K,Ae)=>{const Ye=()=>{Q.removeEventListener("success",et),Q.removeEventListener("error",tt)},et=()=>{K(Qt(Q.result)),Ye()},tt=()=>{Ae(Q.error),Ye()};Q.addEventListener("success",et),Q.addEventListener("error",tt)});return x.then(K=>{K instanceof IDBCursor&&oe.set(K,Q)}).catch(()=>{}),At.set(x,Q),x}(Q);if(ct.has(Q))return ct.get(Q);const x=Yn(Q);return x!==Q&&(ct.set(Q,x),At.set(x,Q)),x}const bt=Q=>At.get(Q),$e=["get","getKey","getAll","getAllKeys","count"],In=["put","add","delete","clear"],$t=new Map;function le(Q,x){if(!(Q instanceof IDBDatabase)||x in Q||"string"!=typeof x)return;if($t.get(x))return $t.get(x);const K=x.replace(/FromIndex$/,""),Ae=x!==K,Ye=In.includes(K);if(!(K in(Ae?IDBIndex:IDBObjectStore).prototype)||!Ye&&!$e.includes(K))return;const et=function(){var tt=(0,C.A)(function*(mt,...an){const Kr=this.transaction(mt,Ye?"readwrite":"readonly");let Pt=Kr.store;return Ae&&(Pt=Pt.index(an.shift())),(yield Promise.all([Pt[K](...an),Ye&&Kr.done]))[0]});return function(an){return tt.apply(this,arguments)}}();return $t.set(x,et),et}!function it(Q){Ge=Q(Ge)}(Q=>({...Q,get:(x,K,Ae)=>le(x,K)||Q.get(x,K,Ae),has:(x,K)=>!!le(x,K)||Q.has(x,K)}));class Yt{constructor(x){this.container=x}getPlatformInfoString(){return this.container.getProviders().map(K=>{if(function qt(Q){const x=Q.getComponent();return"VERSION"===x?.type}(K)){const Ae=K.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(K=>K).join(" ")}}const Cr="@firebase/app",ci="0.10.13",lt=new Pe.Vy("@firebase/app"),Ui="[DEFAULT]",Ys={[Cr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},li=new Map,bn=new Map,Sr=new Map;function En(Q,x){try{Q.container.addComponent(x)}catch(K){lt.debug(`Component ${x.name} failed to register with FirebaseApp ${Q.name}`,K)}}function Bi(Q,x){Q.container.addOrOverwriteComponent(x)}function wn(Q){const x=Q.name;if(Sr.has(x))return lt.debug(`There were multiple attempts to register component ${x}.`),!1;Sr.set(x,Q);for(const K of li.values())En(K,Q);for(const K of bn.values())En(K,Q);return!0}function Wo(Q,x){const K=Q.container.getProvider("heartbeat").getImmediate({optional:!0});return K&&K.triggerHeartbeat(),Q.container.getProvider(x)}function ji(Q,x,K=Ui){Wo(Q,x).clearInstance(K)}function Ko(Q){return void 0!==Q.options}function Rr(Q){return void 0!==Q.settings}function Js(){Sr.clear()}const pr=new ee.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Wr{constructor(x,K,Ae){this._isDeleted=!1,this._options=Object.assign({},x),this._config=Object.assign({},K),this._name=K.name,this._automaticDataCollectionEnabled=K.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new qe.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(x){this.checkDestroyed(),this._automaticDataCollectionEnabled=x}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(x){this._isDeleted=x}checkDestroyed(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}class Pr extends Wr{constructor(x,K,Ae,Ye){const et=void 0!==K.automaticDataCollectionEnabled&&K.automaticDataCollectionEnabled,tt={name:Ae,automaticDataCollectionEnabled:et};super(void 0!==x.apiKey?x:x.options,tt,Ye),this._serverConfig=Object.assign({automaticDataCollectionEnabled:et},K),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,K.releaseOnDeref=void 0,S(Cr,ci,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(x){this.isDeleted||(this._refCount++,void 0!==x&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(x,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Jo(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw pr.create("server-app-deleted")}}const Zs="10.14.1";function Qo(Q,x={}){let K=Q;"object"!=typeof x&&(x={name:x});const Ae=Object.assign({name:Ui,automaticDataCollectionEnabled:!1},x),Ye=Ae.name;if("string"!=typeof Ye||!Ye)throw pr.create("bad-app-name",{appName:String(Ye)});if(K||(K=(0,ee.T9)()),!K)throw pr.create("no-options");const et=li.get(Ye);if(et){if((0,ee.bD)(K,et.options)&&(0,ee.bD)(Ae,et.config))return et;throw pr.create("duplicate-app",{appName:Ye})}const tt=new qe.h1(Ye);for(const an of Sr.values())tt.addComponent(an);const mt=new Wr(K,Ae,tt);return li.set(Ye,mt),mt}function Xs(Q,x){if((0,ee.Bd)()&&!(0,ee.p7)())throw pr.create("invalid-server-app-environment");let K;void 0===x.automaticDataCollectionEnabled&&(x.automaticDataCollectionEnabled=!1),K=Ko(Q)?Q.options:Q;const Ae=Object.assign(Object.assign({},x),K);if(void 0!==Ae.releaseOnDeref&&delete Ae.releaseOnDeref,void 0!==x.releaseOnDeref&&typeof FinalizationRegistry>"u")throw pr.create("finalization-registry-not-supported",{});const et=""+(Kr=JSON.stringify(Ae),[...Kr].reduce((Pt,Hi)=>Math.imul(31,Pt)+Hi.charCodeAt(0)|0,0)),tt=bn.get(et);var Kr;if(tt)return tt.incRefCount(x.releaseOnDeref),tt;const mt=new qe.h1(et);for(const Kr of Sr.values())mt.addComponent(Kr);const an=new Pr(K,x,et,mt);return bn.set(et,an),an}function Tc(Q=Ui){const x=li.get(Q);if(!x&&Q===Ui&&(0,ee.T9)())return Qo();if(!x)throw pr.create("no-app",{appName:Q});return x}function Yo(){return Array.from(li.values())}function Jo(Q){return rs.apply(this,arguments)}function rs(){return(rs=(0,C.A)(function*(Q){let x=!1;const K=Q.name;li.has(K)?(x=!0,li.delete(K)):bn.has(K)&&Q.decRefCount()<=0&&(bn.delete(K),x=!0),x&&(yield Promise.all(Q.container.getProviders().map(Ae=>Ae.delete())),Q.isDeleted=!0)})).apply(this,arguments)}function S(Q,x,K){var Ae;let Ye=null!==(Ae=Ys[Q])&&void 0!==Ae?Ae:Q;K&&(Ye+=`-${K}`);const et=Ye.match(/\s|\//),tt=x.match(/\s|\//);if(et||tt){const mt=[`Unable to register library "${Ye}" with version "${x}":`];return et&&mt.push(`library name "${Ye}" contains illegal characters (whitespace or "/")`),et&&tt&&mt.push("and"),tt&&mt.push(`version name "${x}" contains illegal characters (whitespace or "/")`),void lt.warn(mt.join(" "))}wn(new qe.uA(`${Ye}-version`,()=>({library:Ye,version:x}),"VERSION"))}function P(Q,x){if(null!==Q&&"function"!=typeof Q)throw pr.create("invalid-log-argument");(0,Pe.Ey)(Q,x)}function k(Q){(0,Pe.He)(Q)}const B="firebase-heartbeat-database",q=1,Se="firebase-heartbeat-store";let Ce=null;function Ht(){return Ce||(Ce=function Vt(Q,x,{blocked:K,upgrade:Ae,blocking:Ye,terminated:et}={}){const tt=indexedDB.open(Q,x),mt=Qt(tt);return Ae&&tt.addEventListener("upgradeneeded",an=>{Ae(Qt(tt.result),an.oldVersion,an.newVersion,Qt(tt.transaction),an)}),K&&tt.addEventListener("blocked",an=>K(an.oldVersion,an.newVersion,an)),mt.then(an=>{et&&an.addEventListener("close",()=>et()),Ye&&an.addEventListener("versionchange",Kr=>Ye(Kr.oldVersion,Kr.newVersion,Kr))}).catch(()=>{}),mt}(B,q,{upgrade:(Q,x)=>{if(0===x)try{Q.createObjectStore(Se)}catch(K){console.warn(K)}}}).catch(Q=>{throw pr.create("idb-open",{originalErrorMessage:Q.message})})),Ce}function Be(){return(Be=(0,C.A)(function*(Q){try{const K=(yield Ht()).transaction(Se),Ae=yield K.objectStore(Se).get(Zn(Q));return yield K.done,Ae}catch(x){if(x instanceof ee.g)lt.warn(x.message);else{const K=pr.create("idb-get",{originalErrorMessage:x?.message});lt.warn(K.message)}}})).apply(this,arguments)}function An(Q,x){return je.apply(this,arguments)}function je(){return(je=(0,C.A)(function*(Q,x){try{const Ae=(yield Ht()).transaction(Se,"readwrite");yield Ae.objectStore(Se).put(x,Zn(Q)),yield Ae.done}catch(K){if(K instanceof ee.g)lt.warn(K.message);else{const Ae=pr.create("idb-set",{originalErrorMessage:K?.message});lt.warn(Ae.message)}}})).apply(this,arguments)}function Zn(Q){return`${Q.name}!${Q.options.appId}`}class He{constructor(x){this.container=x,this._heartbeatsCache=null;const K=this.container.getProvider("app").getImmediate();this._storage=new uh(K),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var x=this;return(0,C.A)(function*(){var K,Ae;try{const et=x.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),tt=$i();return null==(null===(K=x._heartbeatsCache)||void 0===K?void 0:K.heartbeats)&&(x._heartbeatsCache=yield x._heartbeatsCachePromise,null==(null===(Ae=x._heartbeatsCache)||void 0===Ae?void 0:Ae.heartbeats))||x._heartbeatsCache.lastSentHeartbeatDate===tt||x._heartbeatsCache.heartbeats.some(mt=>mt.date===tt)?void 0:(x._heartbeatsCache.heartbeats.push({date:tt,agent:et}),x._heartbeatsCache.heartbeats=x._heartbeatsCache.heartbeats.filter(mt=>{const an=new Date(mt.date).valueOf();return Date.now()-an<=2592e6}),x._storage.overwrite(x._heartbeatsCache))}catch(Ye){lt.warn(Ye)}})()}getHeartbeatsHeader(){var x=this;return(0,C.A)(function*(){var K;try{if(null===x._heartbeatsCache&&(yield x._heartbeatsCachePromise),null==(null===(K=x._heartbeatsCache)||void 0===K?void 0:K.heartbeats)||0===x._heartbeatsCache.heartbeats.length)return"";const Ae=$i(),{heartbeatsToSend:Ye,unsentEntries:et}=function Zo(Q,x=1024){const K=[];let Ae=Q.slice();for(const Ye of Q){const et=K.find(tt=>tt.agent===Ye.agent);if(et){if(et.dates.push(Ye.date),ss(K)>x){et.dates.pop();break}}else if(K.push({agent:Ye.agent,dates:[Ye.date]}),ss(K)>x){K.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:K,unsentEntries:Ae}}(x._heartbeatsCache.heartbeats),tt=(0,ee.Uj)(JSON.stringify({version:2,heartbeats:Ye}));return x._heartbeatsCache.lastSentHeartbeatDate=Ae,et.length>0?(x._heartbeatsCache.heartbeats=et,yield x._storage.overwrite(x._heartbeatsCache)):(x._heartbeatsCache.heartbeats=[],x._storage.overwrite(x._heartbeatsCache)),tt}catch(Ae){return lt.warn(Ae),""}})()}}function $i(){return(new Date).toISOString().substring(0,10)}class uh{constructor(x){this.app=x,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,C.A)(function*(){return!!(0,ee.zW)()&&(0,ee.eX)().then(()=>!0).catch(()=>!1)})()}read(){var x=this;return(0,C.A)(function*(){if(yield x._canUseIndexedDBPromise){const Ae=yield function Sn(Q){return Be.apply(this,arguments)}(x.app);return Ae?.heartbeats?Ae:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(x){var K=this;return(0,C.A)(function*(){var Ae;if(yield K._canUseIndexedDBPromise){const et=yield K.read();return An(K.app,{lastSentHeartbeatDate:null!==(Ae=x.lastSentHeartbeatDate)&&void 0!==Ae?Ae:et.lastSentHeartbeatDate,heartbeats:x.heartbeats})}})()}add(x){var K=this;return(0,C.A)(function*(){var Ae;if(yield K._canUseIndexedDBPromise){const et=yield K.read();return An(K.app,{lastSentHeartbeatDate:null!==(Ae=x.lastSentHeartbeatDate)&&void 0!==Ae?Ae:et.lastSentHeartbeatDate,heartbeats:[...et.heartbeats,...x.heartbeats]})}})()}}function ss(Q){return(0,ee.Uj)(JSON.stringify({version:2,heartbeats:Q})).length}!function de(Q){wn(new qe.uA("platform-logger",x=>new Yt(x),"PRIVATE")),wn(new qe.uA("heartbeat",x=>new He(x),"PRIVATE")),S(Cr,ci,Q),S(Cr,ci,"esm2017"),S("fire-js","")}("")},779:(ns,rr,nt)=>{nt.d(rr,{h1:()=>Wn,uA:()=>Pe});var C=nt(467),qe=nt(401);class Pe{constructor(oe,ge,Ne){this.name=oe,this.instanceFactory=ge,this.type=Ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const ee="[DEFAULT]";class Tt{constructor(oe,ge){this.name=oe,this.container=ge,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const ge=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(ge)){const Ne=new qe.cY;if(this.instancesDeferred.set(ge,Ne),this.isInitialized(ge)||this.shouldAutoInitialize())try{const ct=this.getOrInitializeService({instanceIdentifier:ge});ct&&Ne.resolve(ct)}catch{}}return this.instancesDeferred.get(ge).promise}getImmediate(oe){var ge;const Ne=this.normalizeInstanceIdentifier(oe?.identifier),ct=null!==(ge=oe?.optional)&&void 0!==ge&&ge;if(!this.isInitialized(Ne)&&!this.shouldAutoInitialize()){if(ct)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ne})}catch(At){if(ct)return null;throw At}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function pn(dt){return"EAGER"===dt.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[ge,Ne]of this.instancesDeferred.entries()){const ct=this.normalizeInstanceIdentifier(ge);try{const At=this.getOrInitializeService({instanceIdentifier:ct});Ne.resolve(At)}catch{}}}}clearInstance(oe=ee){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,C.A)(function*(){const ge=Array.from(oe.instances.values());yield Promise.all([...ge.filter(Ne=>"INTERNAL"in Ne).map(Ne=>Ne.INTERNAL.delete()),...ge.filter(Ne=>"_delete"in Ne).map(Ne=>Ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=ee){return this.instances.has(oe)}getOptions(oe=ee){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:ge={}}=oe,Ne=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(Ne))throw Error(`${this.name}(${Ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ct=this.getOrInitializeService({instanceIdentifier:Ne,options:ge});for(const[At,Kn]of this.instancesDeferred.entries())Ne===this.normalizeInstanceIdentifier(At)&&Kn.resolve(ct);return ct}onInit(oe,ge){var Ne;const ct=this.normalizeInstanceIdentifier(ge),At=null!==(Ne=this.onInitCallbacks.get(ct))&&void 0!==Ne?Ne:new Set;At.add(oe),this.onInitCallbacks.set(ct,At);const Kn=this.instances.get(ct);return Kn&&oe(Kn,ct),()=>{At.delete(oe)}}invokeOnInitCallbacks(oe,ge){const Ne=this.onInitCallbacks.get(ge);if(Ne)for(const ct of Ne)try{ct(oe,ge)}catch{}}getOrInitializeService({instanceIdentifier:oe,options:ge={}}){let Ne=this.instances.get(oe);if(!Ne&&this.component&&(Ne=this.component.instanceFactory(this.container,{instanceIdentifier:(dt=oe,dt===ee?void 0:dt),options:ge}),this.instances.set(oe,Ne),this.instancesOptions.set(oe,ge),this.invokeOnInitCallbacks(Ne,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,Ne)}catch{}var dt;return Ne||null}normalizeInstanceIdentifier(oe=ee){return this.component?this.component.multipleInstances?oe:ee:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Wn{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const ge=this.getProvider(oe.name);if(ge.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);ge.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const ge=new Tt(oe,this);return this.providers.set(oe,ge),ge}getProviders(){return Array.from(this.providers.values())}}},398:(ns,rr,nt)=>{nt.d(rr,{$b:()=>qe,Ey:()=>dt,He:()=>Wn,Vy:()=>pn});const C=[];var qe=function(oe){return oe[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",oe}(qe||{});const Pe={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},ee=qe.INFO,Tt={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},on=(oe,ge,...Ne)=>{if(ge<oe.logLevel)return;const ct=(new Date).toISOString(),At=Tt[ge];if(!At)throw new Error(`Attempted to log a message with an invalid logType (value: ${ge})`);console[At](`[${ct}]  ${oe.name}:`,...Ne)};class pn{constructor(ge){this.name=ge,this._logLevel=ee,this._logHandler=on,this._userLogHandler=null,C.push(this)}get logLevel(){return this._logLevel}set logLevel(ge){if(!(ge in qe))throw new TypeError(`Invalid value "${ge}" assigned to \`logLevel\``);this._logLevel=ge}setLogLevel(ge){this._logLevel="string"==typeof ge?Pe[ge]:ge}get logHandler(){return this._logHandler}set logHandler(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge}get userLogHandler(){return this._userLogHandler}set userLogHandler(ge){this._userLogHandler=ge}debug(...ge){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...ge),this._logHandler(this,qe.DEBUG,...ge)}log(...ge){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...ge),this._logHandler(this,qe.VERBOSE,...ge)}info(...ge){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...ge),this._logHandler(this,qe.INFO,...ge)}warn(...ge){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...ge),this._logHandler(this,qe.WARN,...ge)}error(...ge){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...ge),this._logHandler(this,qe.ERROR,...ge)}}function Wn(oe){C.forEach(ge=>{ge.setLogLevel(oe)})}function dt(oe,ge){for(const Ne of C){let ct=null;ge&&ge.level&&(ct=Pe[ge.level]),Ne.userLogHandler=null===oe?null:(At,Kn,...Ct)=>{const Ge=Ct.map(it=>{if(null==it)return null;if("string"==typeof it)return it;if("number"==typeof it||"boolean"==typeof it)return it.toString();if(it instanceof Error)return it.message;try{return JSON.stringify(it)}catch{return null}}).filter(it=>it).join(" ");Kn>=(ct??At.logLevel)&&oe({level:qe[Kn].toLowerCase(),message:Ge,args:Ct,type:At.name})}}}},324:(ns,rr,nt)=>{var C=nt(467),qe=nt(574),Pe=nt(979),ee=nt(401),Tt=nt(398),on=nt(635),pn=nt(779);const dt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Kn=function ct(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Ct=function At(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ge=new ee.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Qn=new Tt.Vy("@firebase/auth");function Qt(f,...c){Qn.logLevel<=Tt.$b.ERROR&&Qn.error(`Auth (${Pe.SDK_VERSION}): ${f}`,...c)}function bt(f,...c){throw $t(f,...c)}function Vt(f,...c){return $t(f,...c)}function fr(f,c,l){const p=Object.assign(Object.assign({},Ct()),{[c]:l});return new ee.FA("auth","Firebase",p).create(c,{appName:f.name})}function $e(f){return fr(f,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function In(f,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&bt(f,"argument-error"),fr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $t(f,...c){if("string"!=typeof f){const l=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(l,...p)}return Ge.create(f,...c)}function le(f,c,...l){if(!f)throw $t(c,...l)}function Yt(f){const c="INTERNAL ASSERTION FAILED: "+f;throw Qt(c),new Error(c)}function qt(f,c){f||Yt(c)}function Cr(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function ci(){return"http:"===lt()||"https:"===lt()}function lt(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Y{constructor(c,l){this.shortDelay=c,this.longDelay=l,qt(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,ee.jZ)()||(0,ee.lV)()}get(){return function _s(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ci()||(0,ee.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Z(f,c){qt(f.emulator,"Emulator should always be set here");const{url:l}=f.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class te{static initialize(c,l,p){this.fetchImpl=c,l&&(this.headersImpl=l),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Yt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Yt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Yt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const se={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ie=new Y(3e4,6e4);function ne(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function fe(f,c,l,p){return ht.apply(this,arguments)}function ht(){return(ht=(0,C.A)(function*(f,c,l,p,y={}){return Oe(f,y,(0,C.A)(function*(){let E={},R={};p&&("GET"===c?R=p:E={body:JSON.stringify(p)});const U=(0,ee.Am)(Object.assign({key:f.config.apiKey},R)).slice(1),re=yield f._getAdditionalHeaders();re["Content-Type"]="application/json",f.languageCode&&(re["X-Firebase-Locale"]=f.languageCode);const ve=Object.assign({method:c,headers:re},E);return(0,ee.c1)()||(ve.referrerPolicy="no-referrer"),te.fetch()(Rt(f,f.config.apiHost,l,U),ve)}))})).apply(this,arguments)}function Oe(f,c,l){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,C.A)(function*(f,c,l){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},se),c);try{const y=new Dr(f),E=yield Promise.race([l(),y.promise]);y.clearNetworkTimeout();const R=yield E.json();if("needConfirmation"in R)throw Jn(f,"account-exists-with-different-credential",R);if(E.ok&&!("errorMessage"in R))return R;{const U=E.ok?R.errorMessage:R.error.message,[re,ve]=U.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===re)throw Jn(f,"credential-already-in-use",R);if("EMAIL_EXISTS"===re)throw Jn(f,"email-already-in-use",R);if("USER_DISABLED"===re)throw Jn(f,"user-disabled",R);const Me=p[re]||re.toLowerCase().replace(/[_\s]+/g,"-");if(ve)throw fr(f,Me,ve);bt(f,Me)}}catch(y){if(y instanceof ee.g)throw y;bt(f,"network-request-failed",{message:String(y)})}})).apply(this,arguments)}function ft(f,c,l,p){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,C.A)(function*(f,c,l,p,y={}){const E=yield fe(f,c,l,p,y);return"mfaPendingCredential"in E&&bt(f,"multi-factor-auth-required",{_serverResponse:E}),E})).apply(this,arguments)}function Rt(f,c,l,p){const y=`${c}${l}?${p}`;return f.config.emulator?Z(f.config,y):`${f.config.apiScheme}://${y}`}function ir(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dr{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,p)=>{this.timer=setTimeout(()=>p(Vt(this.auth,"network-request-failed")),Ie.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jn(f,c,l){const p={appName:f.name};l.email&&(p.email=l.email),l.phoneNumber&&(p.phoneNumber=l.phoneNumber);const y=Vt(f,c,p);return y.customData._tokenResponse=l,y}function br(f){return void 0!==f&&void 0!==f.getResponse}function Gr(f){return void 0!==f&&void 0!==f.enterprise}class qo{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return ir(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function jn(){return(jn=(0,C.A)(function*(f){return(yield fe(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ks(f,c){return ys.apply(this,arguments)}function ys(){return(ys=(0,C.A)(function*(f,c){return fe(f,"GET","/v2/recaptchaConfig",ne(f,c))})).apply(this,arguments)}function Qs(){return(Qs=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Ys(){return(Ys=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function li(f,c){return bn.apply(this,arguments)}function bn(){return(bn=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Sr(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function wn(){return(wn=(0,C.A)(function*(f,c=!1){const l=(0,ee.Ku)(f),p=yield l.getIdToken(c),y=ji(p);le(y&&y.exp&&y.auth_time&&y.iat,l.auth,"internal-error");const E="object"==typeof y.firebase?y.firebase:void 0,R=E?.sign_in_provider;return{claims:y,token:p,authTime:Sr(Wo(y.auth_time)),issuedAtTime:Sr(Wo(y.iat)),expirationTime:Sr(Wo(y.exp)),signInProvider:R||null,signInSecondFactor:E?.sign_in_second_factor||null}})).apply(this,arguments)}function Wo(f){return 1e3*Number(f)}function ji(f){const[c,l,p]=f.split(".");if(void 0===c||void 0===l||void 0===p)return Qt("JWT malformed, contained fewer than 3 sections"),null;try{const y=(0,ee.u)(l);return y?JSON.parse(y):(Qt("Failed to decode base64 JWT payload"),null)}catch(y){return Qt("Caught error parsing JWT payload as JSON",y?.toString()),null}}function Ko(f){const c=ji(f);return le(c,"internal-error"),le(typeof c.exp<"u","internal-error"),le(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function Rr(f,c){return Js.apply(this,arguments)}function Js(){return(Js=(0,C.A)(function*(f,c,l=!1){if(l)return c;try{return yield c}catch(p){throw p instanceof ee.g&&function vs({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class pr{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const y=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,y)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,C.A)(function*(){yield l.iteration()}),p)}iteration(){var c=this;return(0,C.A)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class Wr{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sr(this.lastLoginAt),this.creationTime=Sr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Pr(f){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,C.A)(function*(f){var c;const l=f.auth,p=yield f.getIdToken(),y=yield Rr(f,li(l,{idToken:p}));le(y?.users.length,l,"internal-error");const E=y.users[0];f._notifyReloadListener(E);const R=null!==(c=E.providerUserInfo)&&void 0!==c&&c.length?Yo(E.providerUserInfo):[],U=function Tc(f,c){return[...f.filter(p=>!c.some(y=>y.providerId===p.providerId)),...c]}(f.providerData,R),Me=!!f.isAnonymous&&!(f.email&&E.passwordHash||U?.length),Re={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:U,metadata:new Wr(E.createdAt,E.lastLoginAt),isAnonymous:Me};Object.assign(f,Re)})).apply(this,arguments)}function Xs(){return(Xs=(0,C.A)(function*(f){const c=(0,ee.Ku)(f);yield Pr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Yo(f){return f.map(c=>{var{providerId:l}=c,p=(0,on.Tt)(c,["providerId"]);return{providerId:l,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}function rs(){return(rs=(0,C.A)(function*(f,c){const l=yield Oe(f,{},(0,C.A)(function*(){const p=(0,ee.Am)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:y,apiKey:E}=f.config,R=Rt(f,y,"/v1/token",`key=${E}`),U=yield f._getAdditionalHeaders();return U["Content-Type"]="application/x-www-form-urlencoded",te.fetch()(R,{method:"POST",headers:U,body:p})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function P(){return(P=(0,C.A)(function*(f,c){return fe(f,"POST","/v2/accounts:revokeToken",ne(f,c))})).apply(this,arguments)}class k{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){le(c.idToken,"internal-error"),le(typeof c.idToken<"u","internal-error"),le(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):Ko(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}updateFromIdToken(c){le(0!==c.length,"internal-error");const l=Ko(c);this.updateTokensAndExpiration(c,null,l)}getToken(c,l=!1){var p=this;return(0,C.A)(function*(){return l||!p.accessToken||p.isExpired?(le(p.refreshToken,c,"user-token-expired"),p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null):p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var p=this;return(0,C.A)(function*(){const{accessToken:y,refreshToken:E,expiresIn:R}=yield function Jo(f,c){return rs.apply(this,arguments)}(c,l);p.updateTokensAndExpiration(y,E,Number(R))})()}updateTokensAndExpiration(c,l,p){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,l){const{refreshToken:p,accessToken:y,expirationTime:E}=l,R=new k;return p&&(le("string"==typeof p,"internal-error",{appName:c}),R.refreshToken=p),y&&(le("string"==typeof y,"internal-error",{appName:c}),R.accessToken=y),E&&(le("number"==typeof E,"internal-error",{appName:c}),R.expirationTime=E),R}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new k,this.toJSON())}_performRefresh(){return Yt("not implemented")}}function B(f,c){le("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class q{constructor(c){var{uid:l,auth:p,stsTokenManager:y}=c,E=(0,on.Tt)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=p,this.stsTokenManager=y,this.accessToken=y.accessToken,this.displayName=E.displayName||null,this.email=E.email||null,this.emailVerified=E.emailVerified||!1,this.phoneNumber=E.phoneNumber||null,this.photoURL=E.photoURL||null,this.isAnonymous=E.isAnonymous||!1,this.tenantId=E.tenantId||null,this.providerData=E.providerData?[...E.providerData]:[],this.metadata=new Wr(E.createdAt||void 0,E.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,C.A)(function*(){const p=yield Rr(l,l.stsTokenManager.getToken(l.auth,c));return le(p,l.auth,"internal-error"),l.accessToken!==p&&(l.accessToken=p,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),p})()}getIdTokenResult(c){return function Bi(f){return wn.apply(this,arguments)}(this,c)}reload(){return function Qo(f){return Xs.apply(this,arguments)}(this)}_assign(c){this!==c&&(le(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new q(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var p=this;return(0,C.A)(function*(){let y=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),y=!0),l&&(yield Pr(p)),yield p.auth._persistUserIfCurrent(p),y&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,C.A)(function*(){if((0,Pe._isFirebaseServerApp)(c.auth.app))return Promise.reject($e(c.auth));const l=yield c.getIdToken();return yield Rr(c,function Ac(f,c){return Qs.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var p,y,E,R,U,re,ve,Me;const Re=null!==(p=l.displayName)&&void 0!==p?p:void 0,cn=null!==(y=l.email)&&void 0!==y?y:void 0,Di=null!==(E=l.phoneNumber)&&void 0!==E?E:void 0,yo=null!==(R=l.photoURL)&&void 0!==R?R:void 0,yf=null!==(U=l.tenantId)&&void 0!==U?U:void 0,vf=null!==(re=l._redirectEventId)&&void 0!==re?re:void 0,If=null!==(ve=l.createdAt)&&void 0!==ve?ve:void 0,pE=null!==(Me=l.lastLoginAt)&&void 0!==Me?Me:void 0,{uid:Al,emailVerified:gE,isAnonymous:Wm,providerData:Ef,stsTokenManager:Tl}=l;le(Al&&Tl,c,"internal-error");const Eb=k.fromJSON(this.name,Tl);le("string"==typeof Al,c,"internal-error"),B(Re,c.name),B(cn,c.name),le("boolean"==typeof gE,c,"internal-error"),le("boolean"==typeof Wm,c,"internal-error"),B(Di,c.name),B(yo,c.name),B(yf,c.name),B(vf,c.name),B(If,c.name),B(pE,c.name);const Km=new q({uid:Al,auth:c,email:cn,emailVerified:gE,displayName:Re,isAnonymous:Wm,photoURL:yo,phoneNumber:Di,tenantId:yf,stsTokenManager:Eb,createdAt:If,lastLoginAt:pE});return Ef&&Array.isArray(Ef)&&(Km.providerData=Ef.map(wf=>Object.assign({},wf))),vf&&(Km._redirectEventId=vf),Km}static _fromIdTokenResponse(c,l,p=!1){return(0,C.A)(function*(){const y=new k;y.updateFromServerResponse(l);const E=new q({uid:l.localId,auth:c,stsTokenManager:y,isAnonymous:p});return yield Pr(E),E})()}static _fromGetAccountInfoResponse(c,l,p){return(0,C.A)(function*(){const y=l.users[0];le(void 0!==y.localId,"internal-error");const E=void 0!==y.providerUserInfo?Yo(y.providerUserInfo):[],R=!(y.email&&y.passwordHash||E?.length),U=new k;U.updateFromIdToken(p);const re=new q({uid:y.localId,auth:c,stsTokenManager:U,isAnonymous:R}),ve={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:E,metadata:new Wr(y.createdAt,y.lastLoginAt),isAnonymous:!(y.email&&y.passwordHash||E?.length)};return Object.assign(re,ve),re})()}}const Se=new Map;function Ce(f){qt(f instanceof Function,"Expected a class definition");let c=Se.get(f);return c?(qt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,Se.set(f,c),c)}const Sn=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,C.A)(function*(){return!0})()}_set(l,p){var y=this;return(0,C.A)(function*(){y.storage[l]=p})()}_get(l){var p=this;return(0,C.A)(function*(){const y=p.storage[l];return void 0===y?null:y})()}_remove(l){var p=this;return(0,C.A)(function*(){delete p.storage[l]})()}_addListener(l,p){}_removeListener(l,p){}}return f.type="NONE",f})();function Be(f,c,l){return`firebase:${f}:${c}:${l}`}class An{constructor(c,l,p){this.persistence=c,this.auth=l,this.userKey=p;const{config:y,name:E}=this.auth;this.fullUserKey=Be(this.userKey,y.apiKey,E),this.fullPersistenceKey=Be("persistence",y.apiKey,E),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,C.A)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?q._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,C.A)(function*(){if(l.persistence===c)return;const p=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,p?l.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,p="authUser"){return(0,C.A)(function*(){if(!l.length)return new An(Ce(Sn),c,p);const y=(yield Promise.all(l.map(function(){var ve=(0,C.A)(function*(Me){if(yield Me._isAvailable())return Me});return function(Me){return ve.apply(this,arguments)}}()))).filter(ve=>ve);let E=y[0]||Ce(Sn);const R=Be(p,c.config.apiKey,c.name);let U=null;for(const ve of l)try{const Me=yield ve._get(R);if(Me){const Re=q._fromJSON(c,Me);ve!==E&&(U=Re),E=ve;break}}catch{}const re=y.filter(ve=>ve._shouldAllowMigration);return E._shouldAllowMigration&&re.length?(E=re[0],U&&(yield E._set(R,U.toJSON())),yield Promise.all(l.map(function(){var ve=(0,C.A)(function*(Me){if(Me!==E)try{yield Me._remove(R)}catch{}});return function(Me){return ve.apply(this,arguments)}}())),new An(E,c,p)):new An(E,c,p)})()}}function je(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(He(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Zn(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(Zo(c))return"Blackberry";if(uh(c))return"Webos";if(is(c))return"Safari";if((c.includes("chrome/")||St(c))&&!c.includes("edge/"))return"Chrome";if($i(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Zn(f=(0,ee.ZQ)()){return/firefox\//i.test(f)}function is(f=(0,ee.ZQ)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function St(f=(0,ee.ZQ)()){return/crios\//i.test(f)}function He(f=(0,ee.ZQ)()){return/iemobile/i.test(f)}function $i(f=(0,ee.ZQ)()){return/android/i.test(f)}function Zo(f=(0,ee.ZQ)()){return/blackberry/i.test(f)}function uh(f=(0,ee.ZQ)()){return/webos/i.test(f)}function ss(f=(0,ee.ZQ)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function K(f=(0,ee.ZQ)()){return ss(f)||$i(f)||uh(f)||Zo(f)||/windows phone/i.test(f)||He(f)}function Ae(f,c=[]){let l;switch(f){case"Browser":l=je((0,ee.ZQ)());break;case"Worker":l=`${je((0,ee.ZQ)())}-${f}`;break;default:l=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Pe.SDK_VERSION}/${p}`}class Ye{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const p=E=>new Promise((R,U)=>{try{R(c(E))}catch(re){U(re)}});p.onAbort=l,this.queue.push(p);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,C.A)(function*(){if(l.auth.currentUser===c)return;const p=[];try{for(const y of l.queue)yield y(c),y.onAbort&&p.push(y.onAbort)}catch(y){p.reverse();for(const E of p)try{E()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:y?.message})}})()}}function tt(){return(tt=(0,C.A)(function*(f,c={}){return fe(f,"GET","/v2/passwordPolicy",ne(f,c))})).apply(this,arguments)}class an{constructor(c){var l,p,y,E;const R=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=R.minPasswordLength)&&void 0!==l?l:6,R.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=R.maxPasswordLength),void 0!==R.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=R.containsLowercaseCharacter),void 0!==R.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=R.containsUppercaseCharacter),void 0!==R.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=R.containsNumericCharacter),void 0!==R.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=R.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(y=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==y?y:"",this.forceUpgradeOnSignin=null!==(E=c.forceUpgradeOnSignin)&&void 0!==E&&E,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,p,y,E,R,U;const re={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,re),this.validatePasswordCharacterOptions(c,re),re.isValid&&(re.isValid=null===(l=re.meetsMinPasswordLength)||void 0===l||l),re.isValid&&(re.isValid=null===(p=re.meetsMaxPasswordLength)||void 0===p||p),re.isValid&&(re.isValid=null===(y=re.containsLowercaseLetter)||void 0===y||y),re.isValid&&(re.isValid=null===(E=re.containsUppercaseLetter)||void 0===E||E),re.isValid&&(re.isValid=null===(R=re.containsNumericCharacter)||void 0===R||R),re.isValid&&(re.isValid=null===(U=re.containsNonAlphanumericCharacter)||void 0===U||U),re}validatePasswordLengthOptions(c,l){const p=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;p&&(l.meetsMinPasswordLength=c.length>=p),y&&(l.meetsMaxPasswordLength=c.length<=y)}validatePasswordCharacterOptions(c,l){let p;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let y=0;y<c.length;y++)p=c.charAt(y),this.updatePasswordCharacterOptionsStatuses(l,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,l,p,y,E){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=E))}}class Kr{constructor(c,l,p,y){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=p,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hi(this),this.idTokenSubscription=new Hi(this),this.beforeStateQueue=new Ye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ge,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(c,l){var p=this;return l&&(this._popupRedirectResolver=Ce(l)),this._initializationPromise=this.queue((0,C.A)(function*(){var y,E;if(!p._deleted&&(p.persistenceManager=yield An.create(p,c),!p._deleted)){if(null!==(y=p._popupRedirectResolver)&&void 0!==y&&y._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(l),p.lastNotifiedUid=(null===(E=p.currentUser)||void 0===E?void 0:E.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,C.A)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUserFromIdToken(c){var l=this;return(0,C.A)(function*(){try{const p=yield li(l,{idToken:c}),y=yield q._fromGetAccountInfoResponse(l,p,c);yield l.directlySetCurrentUser(y)}catch(p){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",p),yield l.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var l=this;return(0,C.A)(function*(){var p;if((0,Pe._isFirebaseServerApp)(l.app)){const U=l.app.settings.authIdToken;return U?new Promise(re=>{setTimeout(()=>l.initializeCurrentUserFromIdToken(U).then(re,re))}):l.directlySetCurrentUser(null)}const y=yield l.assertedPersistence.getCurrentUser();let E=y,R=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const U=null===(p=l.redirectUser)||void 0===p?void 0:p._redirectEventId,re=E?._redirectEventId,ve=yield l.tryRedirectSignIn(c);(!U||U===re)&&ve?.user&&(E=ve.user,R=!0)}if(!E)return l.directlySetCurrentUser(null);if(!E._redirectEventId){if(R)try{yield l.beforeStateQueue.runMiddleware(E)}catch(U){E=y,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(U))}return E?l.reloadAndSetCurrentUserOrClear(E):l.directlySetCurrentUser(null)}return le(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===E._redirectEventId?l.directlySetCurrentUser(E):l.reloadAndSetCurrentUserOrClear(E)})()}tryRedirectSignIn(c){var l=this;return(0,C.A)(function*(){let p=null;try{p=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,C.A)(function*(){try{yield Pr(c)}catch(p){if("auth/network-request-failed"!==p?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function tu(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,C.A)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,C.A)(function*(){if((0,Pe._isFirebaseServerApp)(l.app))return Promise.reject($e(l));const p=c?(0,ee.Ku)(c):null;return p&&le(p.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(p&&p._clone(l))})()}_updateCurrentUser(c,l=!1){var p=this;return(0,C.A)(function*(){if(!p._deleted)return c&&le(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),l||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,C.A)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,C.A)(function*(){return(0,Pe._isFirebaseServerApp)(c.app)?Promise.reject($e(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var l=this;return(0,Pe._isFirebaseServerApp)(this.app)?Promise.reject($e(this)):this.queue((0,C.A)(function*(){yield l.assertedPersistence.setPersistence(Ce(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,C.A)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const p=l._getPasswordPolicyInternal();return p.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,C.A)(function*(){const l=yield function et(f){return tt.apply(this,arguments)}(c),p=new an(l);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new ee.FA("auth","Firebase",c())}onAuthStateChanged(c,l,p){return this.registerStateListener(this.authStateSubscription,c,l,p)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,p){return this.registerStateListener(this.idTokenSubscription,c,l,p)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,C.A)(function*(){if(l.currentUser){const p=yield l.currentUser.getIdToken(),y={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=l.tenantId&&(y.tenantId=l.tenantId),yield function S(f,c){return P.apply(this,arguments)}(l,y)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var p=this;return(0,C.A)(function*(){const y=yield p.getOrInitRedirectPersistenceManager(l);return null===c?y.removeCurrentUser():y.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,C.A)(function*(){if(!l.redirectPersistenceManager){const p=c&&Ce(c)||l._popupRedirectResolver;le(p,l,"argument-error"),l.redirectPersistenceManager=yield An.create(l,[Ce(p._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,C.A)(function*(){var p,y;return l._isInitialized&&(yield l.queue((0,C.A)(function*(){}))),(null===(p=l._currentUser)||void 0===p?void 0:p._redirectEventId)===c?l._currentUser:(null===(y=l.redirectUser)||void 0===y?void 0:y._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,C.A)(function*(){if(c===l.currentUser)return l.queue((0,C.A)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,p,y){if(this._deleted)return()=>{};const E="function"==typeof l?l:l.next.bind(l);let R=!1;const U=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(U,this,"internal-error"),U.then(()=>{R||E(this.currentUser)}),"function"==typeof l){const re=c.addObserver(l,p,y);return()=>{R=!0,re()}}{const re=c.addObserver(l);return()=>{R=!0,re()}}}directlySetCurrentUser(c){var l=this;return(0,C.A)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Ae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,C.A)(function*(){var l;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const y=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();y&&(p["X-Firebase-Client"]=y);const E=yield c._getAppCheckToken();return E&&(p["X-Firebase-AppCheck"]=E),p})()}_getAppCheckToken(){var c=this;return(0,C.A)(function*(){var l;const p=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return p?.error&&function Yn(f,...c){Qn.logLevel<=Tt.$b.WARN&&Qn.warn(`Auth (${Pe.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Pt(f){return(0,ee.Ku)(f)}class Hi{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,ee.tD)(l=>this.observer=l)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Cc={loadJS:()=>(0,C.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kg(f){return Cc.loadJS(f)}function Vg(f){return`__${f}${Math.floor(1e6*Math.random())}`}class We{constructor(c){this.type="recaptcha-enterprise",this.auth=Pt(c)}verify(c="verify",l=!1){var p=this;return(0,C.A)(function*(){function E(){return E=(0,C.A)(function*(U){if(!l){if(null==U.tenantId&&null!=U._agentRecaptchaConfig)return U._agentRecaptchaConfig.siteKey;if(null!=U.tenantId&&void 0!==U._tenantRecaptchaConfigs[U.tenantId])return U._tenantRecaptchaConfigs[U.tenantId].siteKey}return new Promise(function(){var re=(0,C.A)(function*(ve,Me){Ks(U,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Re=>{if(void 0!==Re.recaptchaKey){const cn=new qo(Re);return null==U.tenantId?U._agentRecaptchaConfig=cn:U._tenantRecaptchaConfigs[U.tenantId]=cn,ve(cn.siteKey)}Me(new Error("recaptcha Enterprise site key undefined"))}).catch(Re=>{Me(Re)})});return function(ve,Me){return re.apply(this,arguments)}}())}),E.apply(this,arguments)}function R(U,re,ve){const Me=window.grecaptcha;Gr(Me)?Me.enterprise.ready(()=>{Me.enterprise.execute(U,{action:c}).then(Re=>{re(Re)}).catch(()=>{re("NO_RECAPTCHA")})}):ve(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((U,re)=>{(function y(U){return E.apply(this,arguments)})(p.auth).then(ve=>{if(!l&&Gr(window.grecaptcha))R(ve,U,re);else{if(typeof window>"u")return void re(new Error("RecaptchaVerifier is only supported in browser"));let Me=function gI(){return Cc.recaptchaEnterpriseScript}();0!==Me.length&&(Me+=ve),kg(Me).then(()=>{R(ve,U,re)}).catch(Re=>{re(Re)})}}).catch(ve=>{re(ve)})})})()}}function mI(f,c,l){return Fg.apply(this,arguments)}function Fg(){return(Fg=(0,C.A)(function*(f,c,l,p=!1){const y=new We(f);let E;try{E=yield y.verify(l)}catch{E=yield y.verify(l,!0)}const R=Object.assign({},c);return Object.assign(R,p?{captchaResp:E}:{captchaResponse:E}),Object.assign(R,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(R,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),R})).apply(this,arguments)}function Dc(f,c,l,p){return Ve.apply(this,arguments)}function Ve(){return Ve=(0,C.A)(function*(f,c,l,p){var y;if(null!==(y=f._getRecaptchaConfig())&&void 0!==y&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const E=yield mI(f,c,l,"getOobCode"===l);return p(f,E)}return p(f,c).catch(function(){var E=(0,C.A)(function*(R){if("auth/missing-recaptcha-token"===R.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const U=yield mI(f,c,l,"getOobCode"===l);return p(f,U)}return Promise.reject(R)});return function(R){return E.apply(this,arguments)}}())}),Ve.apply(this,arguments)}function Lg(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function nu(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class eo{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return Yt("not implemented")}_getIdTokenResponse(c){return Yt("not implemented")}_linkToIdToken(c,l){return Yt("not implemented")}_getReauthenticationResolver(c){return Yt("not implemented")}}function Ug(f,c){return ut.apply(this,arguments)}function ut(){return(ut=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:resetPassword",ne(f,c))})).apply(this,arguments)}function Rc(){return(Rc=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Mr(f,c){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Ft(){return(Ft=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:update",ne(f,c))})).apply(this,arguments)}function K0(f,c){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,C.A)(function*(f,c){return ft(f,"POST","/v1/accounts:signInWithPassword",ne(f,c))})).apply(this,arguments)}function _e(f,c){return ru.apply(this,arguments)}function ru(){return(ru=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:sendOobCode",ne(f,c))})).apply(this,arguments)}function Mc(){return(Mc=(0,C.A)(function*(f,c){return _e(f,c)})).apply(this,arguments)}function fh(f,c){return ph.apply(this,arguments)}function ph(){return(ph=(0,C.A)(function*(f,c){return _e(f,c)})).apply(this,arguments)}function gh(f,c){return jg.apply(this,arguments)}function jg(){return(jg=(0,C.A)(function*(f,c){return _e(f,c)})).apply(this,arguments)}function $g(){return($g=(0,C.A)(function*(f,c){return _e(f,c)})).apply(this,arguments)}function Hg(){return(Hg=(0,C.A)(function*(f,c){return ft(f,"POST","/v1/accounts:signInWithEmailLink",ne(f,c))})).apply(this,arguments)}function su(){return(su=(0,C.A)(function*(f,c){return ft(f,"POST","/v1/accounts:signInWithEmailLink",ne(f,c))})).apply(this,arguments)}class Is extends eo{constructor(c,l,p,y=null){super("password",p),this._email=c,this._password=l,this._tenantId=y}static _fromEmailAndPassword(c,l){return new Is(c,l,"password")}static _fromEmailAndCode(c,l,p=null){return new Is(c,l,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,C.A)(function*(){switch(l.signInMethod){case"password":return Dc(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",K0);case"emailLink":return function Y0(f,c){return Hg.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:bt(c,"internal-error")}})()}_linkToIdToken(c,l){var p=this;return(0,C.A)(function*(){switch(p.signInMethod){case"password":return Dc(c,{idToken:l,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Mr);case"emailLink":return function iu(f,c){return su.apply(this,arguments)}(c,{idToken:l,email:p._email,oobCode:p._password});default:bt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function os(f,c){return mh.apply(this,arguments)}function mh(){return(mh=(0,C.A)(function*(f,c){return ft(f,"POST","/v1/accounts:signInWithIdp",ne(f,c))})).apply(this,arguments)}class Ei extends eo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Ei(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):bt("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:y}=l,E=(0,on.Tt)(l,["providerId","signInMethod"]);if(!p||!y)return null;const R=new Ei(p,y);return R.idToken=E.idToken||void 0,R.accessToken=E.accessToken||void 0,R.secret=E.secret,R.nonce=E.nonce,R.pendingToken=E.pendingToken||null,R}_getIdTokenResponse(c){return os(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,os(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,os(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,ee.Am)(l)}return c}}function _h(){return(_h=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:sendVerificationCode",ne(f,c))})).apply(this,arguments)}function yh(){return(yh=(0,C.A)(function*(f,c){return ft(f,"POST","/v1/accounts:signInWithPhoneNumber",ne(f,c))})).apply(this,arguments)}function xc(){return(xc=(0,C.A)(function*(f,c){const l=yield ft(f,"POST","/v1/accounts:signInWithPhoneNumber",ne(f,c));if(l.temporaryProof)throw Jn(f,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const be={USER_NOT_FOUND:"user-not-found"};function ou(){return(ou=(0,C.A)(function*(f,c){return ft(f,"POST","/v1/accounts:signInWithPhoneNumber",ne(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),be)})).apply(this,arguments)}class wi extends eo{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new wi({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new wi({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function Es(f,c){return yh.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function me(f,c){return xc.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function Nc(f,c){return ou.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:p,verificationCode:y}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:p,code:y}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:p,phoneNumber:y,temporaryProof:E}=c;return p||l||y||E?new wi({verificationId:l,verificationCode:p,phoneNumber:y,temporaryProof:E}):null}}class au{constructor(c){var l,p,y,E,R,U;const re=(0,ee.I9)((0,ee.hp)(c)),ve=null!==(l=re.apiKey)&&void 0!==l?l:null,Me=null!==(p=re.oobCode)&&void 0!==p?p:null,Re=function vI(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(y=re.mode)&&void 0!==y?y:null);le(ve&&Me&&Re,"argument-error"),this.apiKey=ve,this.operation=Re,this.code=Me,this.continueUrl=null!==(E=re.continueUrl)&&void 0!==E?E:null,this.languageCode=null!==(R=re.languageCode)&&void 0!==R?R:null,this.tenantId=null!==(U=re.tenantId)&&void 0!==U?U:null}static parseLink(c){const l=function II(f){const c=(0,ee.I9)((0,ee.hp)(f)).link,l=c?(0,ee.I9)((0,ee.hp)(c)).deep_link_id:null,p=(0,ee.I9)((0,ee.hp)(f)).deep_link_id;return(p?(0,ee.I9)((0,ee.hp)(p)).link:null)||p||l||c||f}(c);try{return new au(l)}catch{return null}}}let ea=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(l,p){return Is._fromEmailAndPassword(l,p)}static credentialWithLink(l,p){const y=au.parseLink(p);return le(y,"argument-error"),Is._fromEmailAndCode(l,y.code,y.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class kn{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class gr extends kn{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class pt extends gr{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return le("providerId"in l&&"signInMethod"in l,"argument-error"),Ei._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return le(c.idToken||c.accessToken,"argument-error"),Ei._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return pt.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return pt.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:p,oauthTokenSecret:y,pendingToken:E,nonce:R,providerId:U}=c;if(!p&&!y&&!l&&!E||!U)return null;try{return new pt(U)._credential({idToken:l,accessToken:p,nonce:R,pendingToken:E})}catch{return null}}}let uu=(()=>{class f extends gr{constructor(){super("facebook.com")}static credential(l){return Ei._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),Oc=(()=>{class f extends gr{constructor(){super("google.com"),this.addScope("profile")}static credential(l,p){return Ei._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:p})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:p,oauthAccessToken:y}=l;if(!p&&!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),kc=(()=>{class f extends gr{constructor(){super("github.com")}static credential(l){return Ei._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class xr extends eo{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return os(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,os(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,os(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:y,pendingToken:E}=l;return p&&y&&E&&p===y?new xr(p,E):null}static _create(c,l){return new xr(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class lu extends kn{constructor(c){le(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return lu.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return lu.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=xr.fromJSON(c);return le(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:p}=c;if(!l||!p)return null;try{return xr._create(p,l)}catch{return null}}}let vh=(()=>{class f extends gr{constructor(){super("twitter.com")}static credential(l,p){return Ei._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:p})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:p,oauthTokenSecret:y}=l;if(!p||!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Vc(f,c){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,C.A)(function*(f,c){return ft(f,"POST","/v1/accounts:signUp",ne(f,c))})).apply(this,arguments)}class Qr{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,p,y=!1){return(0,C.A)(function*(){const E=yield q._fromIdTokenResponse(c,p,y),R=ta(p);return new Qr({user:E,providerId:R,_tokenResponse:p,operationType:l})})()}static _forOperation(c,l,p){return(0,C.A)(function*(){yield c._updateTokensIfNecessary(p,!0);const y=ta(p);return new Qr({user:c,providerId:y,_tokenResponse:p,operationType:l})})()}}function ta(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function Lc(){return(Lc=(0,C.A)(function*(f){var c;if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject($e(f));const l=Pt(f);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new Qr({user:l.currentUser,providerId:null,operationType:"signIn"});const p=yield Vc(l,{returnSecureToken:!0}),y=yield Qr._fromIdTokenResponse(l,"signIn",p,!0);return yield l._updateCurrentUser(y.user),y})).apply(this,arguments)}class Uc extends ee.g{constructor(c,l,p,y){var E;super(l.code,l.message),this.operationType=p,this.user=y,Object.setPrototypeOf(this,Uc.prototype),this.customData={appName:c.name,tenantId:null!==(E=c.tenantId)&&void 0!==E?E:void 0,_serverResponse:l.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,l,p,y){return new Uc(c,l,p,y)}}function Ih(f,c,l,p){return("reauthenticate"===c?l._getReauthenticationResolver(f):l._getIdTokenResponse(f)).catch(E=>{throw"auth/multi-factor-auth-required"===E.code?Uc._fromErrorAndOperation(f,E,c,p):E})}function Gg(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function Yr(){return Yr=(0,C.A)(function*(f,c){const l=(0,ee.Ku)(f);yield jc(!0,l,c);const{providerUserInfo:p}=yield function Ui(f,c){return Ys.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),y=Gg(p||[]);return l.providerData=l.providerData.filter(E=>y.has(E.providerId)),y.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),Yr.apply(this,arguments)}function Eh(f,c){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,C.A)(function*(f,c,l=!1){const p=yield Rr(f,c._linkToIdToken(f.auth,yield f.getIdToken()),l);return Qr._forOperation(f,"link",p)})).apply(this,arguments)}function jc(f,c,l){return wh.apply(this,arguments)}function wh(){return(wh=(0,C.A)(function*(f,c,l){yield Pr(c);const y=!1===f?"provider-already-linked":"no-such-provider";le(Gg(c.providerData).has(l)===f,c.auth,y)})).apply(this,arguments)}function Wg(f,c){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,C.A)(function*(f,c,l=!1){const{auth:p}=f;if((0,Pe._isFirebaseServerApp)(p.app))return Promise.reject($e(p));const y="reauthenticate";try{const E=yield Rr(f,Ih(p,y,c,f),l);le(E.idToken,p,"internal-error");const R=ji(E.idToken);le(R,p,"internal-error");const{sub:U}=R;return le(f.uid===U,p,"user-mismatch"),Qr._forOperation(f,y,E)}catch(E){throw"auth/user-not-found"===E?.code&&bt(p,"user-mismatch"),E}})).apply(this,arguments)}function Th(f,c){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,C.A)(function*(f,c,l=!1){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject($e(f));const p="signIn",y=yield Ih(f,p,c),E=yield Qr._fromIdTokenResponse(f,p,y);return l||(yield f._updateCurrentUser(E.user)),E})).apply(this,arguments)}function $c(f,c){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,C.A)(function*(f,c){return Th(Pt(f),c)})).apply(this,arguments)}function Ai(f,c){return bh.apply(this,arguments)}function bh(){return(bh=(0,C.A)(function*(f,c){const l=(0,ee.Ku)(f);return yield jc(!1,l,c.providerId),Eh(l,c)})).apply(this,arguments)}function Kg(f,c){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,C.A)(function*(f,c){return Wg((0,ee.Ku)(f),c)})).apply(this,arguments)}function Rh(){return(Rh=(0,C.A)(function*(f,c){return ft(f,"POST","/v1/accounts:signInWithCustomToken",ne(f,c))})).apply(this,arguments)}function Ke(){return Ke=(0,C.A)(function*(f,c){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject($e(f));const l=Pt(f),p=yield function Jr(f,c){return Rh.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),y=yield Qr._fromIdTokenResponse(l,"signIn",p);return yield l._updateCurrentUser(y.user),y}),Ke.apply(this,arguments)}class $n{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?_t._fromServerResponse(c,l):"totpInfo"in l?Vn._fromServerResponse(c,l):bt(c,"internal-error")}}class _t extends $n{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new _t(l)}}class Vn extends $n{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new Vn(l)}}function Hn(f,c,l){var p;le((null===(p=l.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),le(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(le(l.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(le(l.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function As(f){return mr.apply(this,arguments)}function mr(){return(mr=(0,C.A)(function*(f){const c=Pt(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Hc(){return(Hc=(0,C.A)(function*(f,c,l){const p=Pt(f),y={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&Hn(p,y,l),yield Dc(p,y,"getOobCode",fh)})).apply(this,arguments)}function Ph(){return Ph=(0,C.A)(function*(f,c,l){yield Ug((0,ee.Ku)(f),{oobCode:c,newPassword:l}).catch(function(){var p=(0,C.A)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&As(f),y});return function(y){return p.apply(this,arguments)}}())}),Ph.apply(this,arguments)}function Zt(){return Zt=(0,C.A)(function*(f,c){yield function W0(f,c){return Ft.apply(this,arguments)}((0,ee.Ku)(f),{oobCode:c})}),Zt.apply(this,arguments)}function De(f,c){return Je.apply(this,arguments)}function Je(){return(Je=(0,C.A)(function*(f,c){const l=(0,ee.Ku)(f),p=yield Ug(l,{oobCode:c}),y=p.requestType;switch(le(y,l,"internal-error"),y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(p.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(p.mfaInfo,l,"internal-error");default:le(p.email,l,"internal-error")}let E=null;return p.mfaInfo&&(E=$n._fromServerResponse(Pt(l),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:E},operation:y}})).apply(this,arguments)}function Zr(){return(Zr=(0,C.A)(function*(f,c){const{data:l}=yield De((0,ee.Ku)(f),c);return l.email})).apply(this,arguments)}function zn(){return(zn=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject($e(f));const p=Pt(f),R=yield Dc(p,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vc).catch(re=>{throw"auth/password-does-not-meet-requirements"===re.code&&As(f),re}),U=yield Qr._fromIdTokenResponse(p,"signIn",R);return yield p._updateCurrentUser(U.user),U})).apply(this,arguments)}function zi(){return(zi=(0,C.A)(function*(f,c,l){const p=Pt(f),y={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function E(R,U){le(U.handleCodeInApp,p,"argument-error"),U&&Hn(p,R,U)})(y,l),yield Dc(p,y,"getOobCode",gh)})).apply(this,arguments)}function to(){return(to=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject($e(f));const p=(0,ee.Ku)(f),y=ea.credentialWithLink(c,l||Cr());return le(y._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),$c(p,y)})).apply(this,arguments)}function Ts(){return(Ts=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:createAuthUri",ne(f,c))})).apply(this,arguments)}function no(){return no=(0,C.A)(function*(f,c){const p={identifier:c,continueUri:ci()?Cr():"http://localhost"},{signinMethods:y}=yield function Jg(f,c){return Ts.apply(this,arguments)}((0,ee.Ku)(f),p);return y||[]}),no.apply(this,arguments)}function hi(){return hi=(0,C.A)(function*(f,c){const l=(0,ee.Ku)(f),y={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&Hn(l.auth,y,c);const{email:E}=yield function hh(f,c){return Mc.apply(this,arguments)}(l.auth,y);E!==f.email&&(yield f.reload())}),hi.apply(this,arguments)}function qc(){return qc=(0,C.A)(function*(f,c,l){const p=(0,ee.Ku)(f),E={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};l&&Hn(p.auth,E,l);const{email:R}=yield function Q0(f,c){return $g.apply(this,arguments)}(p.auth,E);R!==f.email&&(yield f.reload())}),qc.apply(this,arguments)}function Ti(){return(Ti=(0,C.A)(function*(f,c){return fe(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function ro(){return ro=(0,C.A)(function*(f,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const p=(0,ee.Ku)(f),E={idToken:yield p.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},R=yield Rr(p,function Cs(f,c){return Ti.apply(this,arguments)}(p.auth,E));p.displayName=R.displayName||null,p.photoURL=R.photoUrl||null;const U=p.providerData.find(({providerId:re})=>"password"===re);U&&(U.displayName=p.displayName,U.photoURL=p.photoURL),yield p._updateTokensIfNecessary(R)}),ro.apply(this,arguments)}function Gc(f,c,l){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,C.A)(function*(f,c,l){const{auth:p}=f,E={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(E.email=c),l&&(E.password=l);const R=yield Rr(f,function dh(f,c){return Rc.apply(this,arguments)}(p,E));yield f._updateTokensIfNecessary(R,!0)}),Wc.apply(this,arguments)}class as{constructor(c,l,p={}){this.isNewUser=c,this.providerId=l,this.profile=p}}class io extends as{constructor(c,l,p,y){super(c,l,p),this.username=y}}class pu extends as{constructor(c,l){super(c,"facebook.com",l)}}class Xn extends io{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class Z0 extends as{constructor(c,l){super(c,"google.com",l)}}class Nr extends io{constructor(c,l,p){super(c,"twitter.com",l,p)}}function _r(f){const{user:c,_tokenResponse:l}=f;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function qi(f){var c,l;if(!f)return null;const{providerId:p}=f,y=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},E=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const R=null===(l=null===(c=ji(f.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(R)return new as(E,"anonymous"!==R&&"custom"!==R?R:null)}if(!p)return null;switch(p){case"facebook.com":return new pu(E,y);case"github.com":return new Xn(E,y);case"google.com":return new Z0(E,y);case"twitter.com":return new Nr(E,y,f.screenName||null);case"custom":case"anonymous":return new as(E,null);default:return new as(E,p,y)}}(l)}class oa{constructor(c,l,p){this.type=c,this.credential=l,this.user=p}static _fromIdtoken(c,l){return new oa("enroll",c,l)}static _fromMfaPendingCredential(c){return new oa("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,p;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return oa._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return oa._fromIdtoken(c.multiFactorSession.idToken)}return null}}class em{constructor(c,l,p){this.session=c,this.hints=l,this.signInResolver=p}static _fromError(c,l){const p=Pt(c),y=l.customData._serverResponse,E=(y.mfaInfo||[]).map(U=>$n._fromServerResponse(p,U));le(y.mfaPendingCredential,p,"internal-error");const R=oa._fromMfaPendingCredential(y.mfaPendingCredential);return new em(R,E,function(){var U=(0,C.A)(function*(re){const ve=yield re._process(p,R);delete y.mfaInfo,delete y.mfaPendingCredential;const Me=Object.assign(Object.assign({},y),{idToken:ve.idToken,refreshToken:ve.refreshToken});switch(l.operationType){case"signIn":const Re=yield Qr._fromIdTokenResponse(p,l.operationType,Me);return yield p._updateCurrentUser(Re.user),Re;case"reauthenticate":return le(l.user,p,"internal-error"),Qr._forOperation(l.user,l.operationType,Me);default:bt(p,"internal-error")}});return function(re){return U.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,C.A)(function*(){return l.signInResolver(c)})()}}class tm{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(p=>$n._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new tm(c)}getSession(){var c=this;return(0,C.A)(function*(){return oa._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var p=this;return(0,C.A)(function*(){const y=c,E=yield p.getSession(),R=yield Rr(p.user,y._process(p.user.auth,E,l));return yield p.user._updateTokensIfNecessary(R),p.user.reload()})()}unenroll(c){var l=this;return(0,C.A)(function*(){const p="string"==typeof c?c:c.uid,y=yield l.user.getIdToken();try{const E=yield Rr(l.user,function ob(f,c){return fe(f,"POST","/v2/accounts/mfaEnrollment:withdraw",ne(f,c))}(l.user.auth,{idToken:y,mfaEnrollmentId:p}));l.enrolledFactors=l.enrolledFactors.filter(({uid:R})=>R!==p),yield l.user._updateTokensIfNecessary(E),yield l.user.reload()}catch(E){throw E}})()}}const Kc=new WeakMap,Nh="__sak";class TI{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Oh=(()=>{class f extends TI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,p)=>this.onStorageEvent(l,p),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=K(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const p of Object.keys(this.listeners)){const y=this.storage.getItem(p),E=this.localCache[p];y!==E&&l(p,E,y)}}onStorageEvent(l,p=!1){if(!l.key)return void this.forAllChangedKeys((U,re,ve)=>{this.notifyListeners(U,ve)});const y=l.key;p?this.detachListener():this.stopPolling();const E=()=>{const U=this.storage.getItem(y);!p&&this.localCache[y]===U||this.notifyListeners(y,U)},R=this.storage.getItem(y);!function x(){return(0,ee.lT)()&&10===document.documentMode}()||R===l.newValue||l.newValue===l.oldValue?E():setTimeout(E,10)}notifyListeners(l,p){this.localCache[l]=p;const y=this.listeners[l];if(y)for(const E of Array.from(y))E(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,p,y)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:p,newValue:y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,p){var y=()=>super._set,E=this;return(0,C.A)(function*(){yield y().call(E,l,p),E.localCache[l]=JSON.stringify(p)})()}_get(l){var p=()=>super._get,y=this;return(0,C.A)(function*(){const E=yield p().call(y,l);return y.localCache[l]=JSON.stringify(E),E})()}_remove(l){var p=()=>super._remove,y=this;return(0,C.A)(function*(){yield p().call(y,l),delete y.localCache[l]})()}}return f.type="LOCAL",f})(),en=(()=>{class f extends TI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,p){}_removeListener(l,p){}}return f.type="SESSION",f})();let fi=(()=>{class f{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const p=this.receivers.find(E=>E.isListeningto(l));if(p)return p;const y=new f(l);return this.receivers.push(y),y}isListeningto(l){return this.eventTarget===l}handleEvent(l){var p=this;return(0,C.A)(function*(){const y=l,{eventId:E,eventType:R,data:U}=y.data,re=p.handlersMap[R];if(!re?.size)return;y.ports[0].postMessage({status:"ack",eventId:E,eventType:R});const ve=Array.from(re).map(function(){var Re=(0,C.A)(function*(cn){return cn(y.origin,U)});return function(cn){return Re.apply(this,arguments)}}()),Me=yield function Qc(f){return Promise.all(f.map(function(){var c=(0,C.A)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(p){return{fulfilled:!1,reason:p}}});return function(l){return c.apply(this,arguments)}}()))}(ve);y.ports[0].postMessage({status:"done",eventId:E,eventType:R,response:Me})})()}_subscribe(l,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(p)}_unsubscribe(l,p){this.handlersMap[l]&&p&&this.handlersMap[l].delete(p),(!p||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function aa(f="",c=10){let l="";for(let p=0;p<c;p++)l+=Math.floor(10*Math.random());return f+l}class rm{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,p=50){var y=this;return(0,C.A)(function*(){const E=typeof MessageChannel<"u"?new MessageChannel:null;if(!E)throw new Error("connection_unavailable");let R,U;return new Promise((re,ve)=>{const Me=aa("",20);E.port1.start();const Re=setTimeout(()=>{ve(new Error("unsupported_event"))},p);U={messageChannel:E,onMessage(cn){const Di=cn;if(Di.data.eventId===Me)switch(Di.data.status){case"ack":clearTimeout(Re),R=setTimeout(()=>{ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(R),re(Di.data.response);break;default:clearTimeout(Re),clearTimeout(R),ve(new Error("invalid_response"))}}},y.handlers.add(U),E.port1.addEventListener("message",U.onMessage),y.target.postMessage({eventType:c,eventId:Me,data:l},[E.port2])}).finally(()=>{U&&y.removeMessageHandler(U)})})()}}function Dn(){return window}function gu(){return typeof Dn().WorkerGlobalScope<"u"&&"function"==typeof Dn().importScripts}function mu(){return(mu=(0,C.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Vh="firebaseLocalStorageDb",ao="firebaseLocalStorage",ua="fbase_key";class Gi{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function _u(f,c){return f.transaction([ao],c?"readwrite":"readonly").objectStore(ao)}function um(){const f=indexedDB.open(Vh,1);return new Promise((c,l)=>{f.addEventListener("error",()=>{l(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(ao,{keyPath:ua})}catch(y){l(y)}}),f.addEventListener("success",(0,C.A)(function*(){const p=f.result;p.objectStoreNames.contains(ao)?c(p):(p.close(),yield function ub(){const f=indexedDB.deleteDatabase(Vh);return new Gi(f).toPromise()}(),c(yield um()))}))})}function CI(f,c,l){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,C.A)(function*(f,c,l){const p=_u(f,!0).put({[ua]:c,value:l});return new Gi(p).toPromise()})).apply(this,arguments)}function cm(){return(cm=(0,C.A)(function*(f,c){const l=_u(f,!1).get(c),p=yield new Gi(l).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Lh(f,c){const l=_u(f,!0).delete(c);return new Gi(l).toPromise()}const yu=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,C.A)(function*(){return l.db||(l.db=yield um()),l.db})()}_withRetries(l){var p=this;return(0,C.A)(function*(){let y=0;for(;;)try{const E=yield p._openDb();return yield l(E)}catch(E){if(y++>3)throw E;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,C.A)(function*(){return gu()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,C.A)(function*(){l.receiver=fi._getInstance(function om(){return gu()?self:null}()),l.receiver._subscribe("keyChanged",function(){var p=(0,C.A)(function*(y,E){return{keyProcessed:(yield l._poll()).includes(E.key)}});return function(y,E){return p.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var p=(0,C.A)(function*(y,E){return["keyChanged"]});return function(y,E){return p.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,C.A)(function*(){var p,y;if(l.activeServiceWorker=yield function sm(){return mu.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new rm(l.activeServiceWorker);const E=yield l.sender._send("ping",{},800);E&&null!==(p=E[0])&&void 0!==p&&p.fulfilled&&null!==(y=E[0])&&void 0!==y&&y.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var p=this;return(0,C.A)(function*(){if(p.sender&&p.activeServiceWorker&&function kh(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:l},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,C.A)(function*(){try{if(!indexedDB)return!1;const l=yield um();return yield CI(l,Nh,"1"),yield Lh(l,Nh),!0}catch{}return!1})()}_withPendingWrite(l){var p=this;return(0,C.A)(function*(){p.pendingWrites++;try{yield l()}finally{p.pendingWrites--}})()}_set(l,p){var y=this;return(0,C.A)(function*(){return y._withPendingWrite((0,C.A)(function*(){return yield y._withRetries(E=>CI(E,l,p)),y.localCache[l]=p,y.notifyServiceWorker(l)}))})()}_get(l){var p=this;return(0,C.A)(function*(){const y=yield p._withRetries(E=>function DI(f,c){return cm.apply(this,arguments)}(E,l));return p.localCache[l]=y,y})()}_remove(l){var p=this;return(0,C.A)(function*(){return p._withPendingWrite((0,C.A)(function*(){return yield p._withRetries(y=>Lh(y,l)),delete p.localCache[l],p.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,C.A)(function*(){const p=yield l._withRetries(R=>{const U=_u(R,!1).getAll();return new Gi(U).toPromise()});if(!p)return[];if(0!==l.pendingWrites)return[];const y=[],E=new Set;if(0!==p.length)for(const{fbase_key:R,value:U}of p)E.add(R),JSON.stringify(l.localCache[R])!==JSON.stringify(U)&&(l.notifyListeners(R,U),y.push(R));for(const R of Object.keys(l.localCache))l.localCache[R]&&!E.has(R)&&(l.notifyListeners(R,null),y.push(R));return y})()}notifyListeners(l,p){this.localCache[l]=p;const y=this.listeners[l];if(y)for(const E of Array.from(y))E(p)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,C.A)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),Yc=1e12;class PI{constructor(c){this.auth=c,this.counter=Yc,this._widgets=new Map}render(c,l){const p=this.counter;return this._widgets.set(p,new fm(c,this.auth.name,l||{})),this.counter++,p}reset(c){var l;const p=c||Yc;null===(l=this._widgets.get(p))||void 0===l||l.delete(),this._widgets.delete(p)}getResponse(c){var l;return(null===(l=this._widgets.get(c||Yc))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,C.A)(function*(){var p;return null===(p=l._widgets.get(c||Yc))||void 0===p||p.execute(),""})()}}class fm{constructor(c,l,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const y="string"==typeof c?document.getElementById(c):c;le(y,"argument-error",{appName:l}),this.container=y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function MI(f){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jc=Vg("rcb"),xI=new Y(3e4,6e4);class lb{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Dn().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return le(function NI(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&br(Dn().grecaptcha)?Promise.resolve(Dn().grecaptcha):new Promise((p,y)=>{const E=Dn().setTimeout(()=>{y(Vt(c,"network-request-failed"))},xI.get());Dn()[Jc]=()=>{Dn().clearTimeout(E),delete Dn()[Jc];const U=Dn().grecaptcha;if(!U||!br(U))return void y(Vt(c,"internal-error"));const re=U.render;U.render=(ve,Me)=>{const Re=re(ve,Me);return this.counter++,Re},this.hostLanguage=l,p(U)},kg(`${function H0(){return Cc.recaptchaV2Script}()}?${(0,ee.Am)({onload:Jc,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(E),y(Vt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=Dn().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class pi{load(c){return(0,C.A)(function*(){return new PI(c)})()}clearedOneInstance(){}}const Bh="recaptcha",OI={theme:"light",type:"image"};class kI{constructor(c,l,p=Object.assign({},OI)){this.parameters=p,this.type=Bh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pt(c),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const y="string"==typeof l?document.getElementById(l):l;le(y,this.auth,"argument-error"),this.container=y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new pi:new lb,this.validateStartingState()}verify(){var c=this;return(0,C.A)(function*(){c.assertNotDestroyed();const l=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(l)||new Promise(E=>{const R=U=>{U&&(c.tokenChangeListeners.delete(R),E(U))};c.tokenChangeListeners.add(R),c.isInvisible&&p.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(p=>p(l)),"function"==typeof c)c(l);else if("string"==typeof c){const p=Dn()[c];"function"==typeof p&&p(l)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,C.A)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const p=document.createElement("div");l.appendChild(p),l=p}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,C.A)(function*(){le(ci()&&!gu(),c.auth,"internal-error"),yield function pm(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function Go(f){return jn.apply(this,arguments)}(c.auth);le(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zc{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=wi._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function vu(){return(vu=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject($e(f));const p=Pt(f),y=yield xt(p,c,(0,ee.Ku)(l));return new Zc(y,E=>$c(p,E))})).apply(this,arguments)}function gi(){return(gi=(0,C.A)(function*(f,c,l){const p=(0,ee.Ku)(f);yield jc(!1,p,"phone");const y=yield xt(p.auth,c,(0,ee.Ku)(l));return new Zc(y,E=>Ai(p,E))})).apply(this,arguments)}function Xc(){return(Xc=(0,C.A)(function*(f,c,l){const p=(0,ee.Ku)(f);if((0,Pe._isFirebaseServerApp)(p.auth.app))return Promise.reject($e(p.auth));const y=yield xt(p.auth,c,(0,ee.Ku)(l));return new Zc(y,E=>Kg(p,E))})).apply(this,arguments)}function xt(f,c,l){return Iu.apply(this,arguments)}function Iu(){return Iu=(0,C.A)(function*(f,c,l){var p;const y=yield l.verify();try{let E;if(le("string"==typeof y,f,"argument-error"),le(l.type===Bh,f,"argument-error"),E="string"==typeof c?{phoneNumber:c}:c,"session"in E){const R=E.session;if("phoneNumber"in E)return le("enroll"===R.type,f,"internal-error"),(yield function rb(f,c){return fe(f,"POST","/v2/accounts/mfaEnrollment:start",ne(f,c))}(f,{idToken:R.credential,phoneEnrollmentInfo:{phoneNumber:E.phoneNumber,recaptchaToken:y}})).phoneSessionInfo.sessionInfo;{le("signin"===R.type,f,"internal-error");const U=(null===(p=E.multiFactorHint)||void 0===p?void 0:p.uid)||E.multiFactorUid;return le(U,f,"missing-multi-factor-info"),(yield function cb(f,c){return fe(f,"POST","/v2/accounts/mfaSignIn:start",ne(f,c))}(f,{mfaPendingCredential:R.credential,mfaEnrollmentId:U,phoneSignInInfo:{recaptchaToken:y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:R}=yield function Xo(f,c){return _h.apply(this,arguments)}(f,{phoneNumber:E.phoneNumber,recaptchaToken:y});return R}}finally{l._reset()}}),Iu.apply(this,arguments)}function or(){return(or=(0,C.A)(function*(f,c){const l=(0,ee.Ku)(f);if((0,Pe._isFirebaseServerApp)(l.auth.app))return Promise.reject($e(l.auth));yield Eh(l,c)})).apply(this,arguments)}let Eu=(()=>{class f{constructor(l){this.providerId=f.PROVIDER_ID,this.auth=Pt(l)}verifyPhoneNumber(l,p){return xt(this.auth,l,(0,ee.Ku)(p))}static credential(l,p){return wi._fromVerification(l,p)}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:p,temporaryProof:y}=l;return p&&y?wi._fromTokenResponse(p,y):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function Ds(f,c){return c?Ce(c):(le(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class bs extends eo{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return os(c,this._buildIdpRequest())}_linkToIdToken(c,l){return os(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return os(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function ei(f){return Th(f.auth,new bs(f),f.bypassAuthState)}function LI(f){const{auth:c,user:l}=f;return le(l,c,"internal-error"),Wg(l,new bs(f),f.bypassAuthState)}function UI(f){return jh.apply(this,arguments)}function jh(){return(jh=(0,C.A)(function*(f){const{auth:c,user:l}=f;return le(l,c,"internal-error"),Eh(l,new bs(f),f.bypassAuthState)})).apply(this,arguments)}class us{constructor(c,l,p,y,E=!1){this.auth=c,this.resolver=p,this.user=y,this.bypassAuthState=E,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,C.A)(function*(p,y){c.pendingPromise={resolve:p,reject:y};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(E){c.reject(E)}});return function(p,y){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,C.A)(function*(){const{urlResponse:p,sessionId:y,postBody:E,tenantId:R,error:U,type:re}=c;if(U)return void l.reject(U);const ve={auth:l.auth,requestUri:p,sessionId:y,tenantId:R||void 0,postBody:E||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(re)(ve))}catch(Me){l.reject(Me)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return ei;case"linkViaPopup":case"linkViaRedirect":return UI;case"reauthViaPopup":case"reauthViaRedirect":return LI;default:bt(this.auth,"internal-error")}}resolve(c){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const mm=new Y(2e3,1e4);function tl(){return(tl=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(Vt(f,"operation-not-supported-in-this-environment"));const p=Pt(f);In(f,c,kn);const y=Ds(p,l);return new rl(p,"signInViaPopup",c,y).executeNotNull()})).apply(this,arguments)}function nl(){return(nl=(0,C.A)(function*(f,c,l){const p=(0,ee.Ku)(f);if((0,Pe._isFirebaseServerApp)(p.auth.app))return Promise.reject(Vt(p.auth,"operation-not-supported-in-this-environment"));In(p.auth,c,kn);const y=Ds(p.auth,l);return new rl(p.auth,"reauthViaPopup",c,y,p).executeNotNull()})).apply(this,arguments)}function ze(){return(ze=(0,C.A)(function*(f,c,l){const p=(0,ee.Ku)(f);In(p.auth,c,kn);const y=Ds(p.auth,l);return new rl(p.auth,"linkViaPopup",c,y,p).executeNotNull()})).apply(this,arguments)}let rl=(()=>{class f extends us{constructor(l,p,y,E,R){super(l,p,E,R),this.provider=y,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var l=this;return(0,C.A)(function*(){const p=yield l.execute();return le(p,l.auth,"internal-error"),p})()}onExecution(){var l=this;return(0,C.A)(function*(){qt(1===l.filter.length,"Popup operations only handle one event");const p=aa();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],p),l.authWindow.associatedEvent=p,l.resolver._originValidation(l.auth).catch(y=>{l.reject(y)}),l.resolver._isIframeWebStorageSupported(l.auth,y=>{y||l.reject(Vt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(Vt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const l=()=>{var p,y;this.pollId=null!==(y=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==y&&y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Vt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,mm.get())};l()}}return f.currentPopupAction=null,f})();const db="pendingRedirect",wu=new Map;class $I extends us{constructor(c,l,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,C.A)(function*(){let p=wu.get(l.auth._key());if(!p){try{const E=(yield function HI(f,c){return il.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;p=()=>Promise.resolve(E)}catch(y){p=()=>Promise.reject(y)}wu.set(l.auth._key(),p)}return l.bypassAuthState||wu.set(l.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,p=this;return(0,C.A)(function*(){if("signInViaRedirect"===c.type)return l().call(p,c);if("unknown"!==c.type){if(c.eventId){const y=yield p.auth._redirectUserForId(c.eventId);if(y)return p.user=y,l().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,C.A)(function*(){})()}cleanUp(){}}function il(){return(il=(0,C.A)(function*(f,c){const l=vm(c),p=ym(f);if(!(yield p._isAvailable()))return!1;const y="true"===(yield p._get(l));return yield p._remove(l),y})).apply(this,arguments)}function Ss(f,c){return $h.apply(this,arguments)}function $h(){return($h=(0,C.A)(function*(f,c){return ym(f)._set(vm(c),"true")})).apply(this,arguments)}function Hh(f,c){wu.set(f._key(),c)}function ym(f){return Ce(f._redirectPersistence)}function vm(f){return Be(db,f.config.apiKey,f.name)}function ue(f,c,l){return function It(f,c,l){return sl.apply(this,arguments)}(f,c,l)}function sl(){return(sl=(0,C.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject($e(f));const p=Pt(f);In(f,c,kn),yield p._initializationPromise;const y=Ds(p,l);return yield Ss(y,p),y._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function Im(f,c,l){return function er(f,c,l){return ol.apply(this,arguments)}(f,c,l)}function ol(){return(ol=(0,C.A)(function*(f,c,l){const p=(0,ee.Ku)(f);if(In(p.auth,c,kn),(0,Pe._isFirebaseServerApp)(p.auth.app))return Promise.reject($e(p.auth));yield p.auth._initializationPromise;const y=Ds(p.auth,l);yield Ss(y,p.auth);const E=yield ar(p);return y._openRedirect(p.auth,c,"reauthViaRedirect",E)})).apply(this,arguments)}function Au(f,c,l){return function Wi(f,c,l){return Tu.apply(this,arguments)}(f,c,l)}function Tu(){return(Tu=(0,C.A)(function*(f,c,l){const p=(0,ee.Ku)(f);In(p.auth,c,kn),yield p.auth._initializationPromise;const y=Ds(p.auth,l);yield jc(!1,p,c.providerId),yield Ss(y,p.auth);const E=yield ar(p);return y._openRedirect(p.auth,c,"linkViaRedirect",E)})).apply(this,arguments)}function qh(){return(qh=(0,C.A)(function*(f,c){return yield Pt(f)._initializationPromise,Gh(f,c,!1)})).apply(this,arguments)}function Gh(f,c){return al.apply(this,arguments)}function al(){return(al=(0,C.A)(function*(f,c,l=!1){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject($e(f));const p=Pt(f),y=Ds(p,c),R=yield new $I(p,y,l).execute();return R&&!l&&(delete R.user._redirectEventId,yield p._persistUserIfCurrent(R.user),yield p._setRedirectUser(null,c)),R})).apply(this,arguments)}function ar(f){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,C.A)(function*(f){const c=aa(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class uo{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(l=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Am(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wm(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var p;if(c.error&&!wm(c)){const y=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";l.onError(Vt(this.auth,y))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const p=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ki(c))}saveEventToCache(c){this.cachedEventUids.add(Ki(c)),this.lastProcessedEventTime=Date.now()}}function Ki(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function wm({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function Tm(f){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,C.A)(function*(f,c={}){return fe(f,"GET","/v1/projects",c)})).apply(this,arguments)}const Kh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qh=/^https?/;function Cu(){return(Cu=(0,C.A)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield Tm(f);for(const l of c)try{if(qI(l))return}catch{}bt(f,"unauthorized-domain")})).apply(this,arguments)}function qI(f){const c=Cr(),{protocol:l,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const R=new URL(f);return""===R.hostname&&""===p?"chrome-extension:"===l&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&R.hostname===p}if(!Qh.test(l))return!1;if(Kh.test(f))return p===f;const y=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(p)}const Dm=new Y(3e4,6e4);function ul(){const f=Dn().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let l=0;l<f.CP.length;l++)f.CP[l]=null}let Du=null;const Rm=new Y(5e3,15e3),Yh="__/auth/iframe",GI="emulator/auth/iframe",WI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function co(f){const c=f.config;le(c.authDomain,f,"auth-domain-config-required");const l=c.emulator?Z(c,GI):`https://${f.config.authDomain}/${Yh}`,p={apiKey:c.apiKey,appName:f.name,v:Pe.SDK_VERSION},y=yr.get(f.config.apiHost);y&&(p.eid=y);const E=f._getFrameworks();return E.length&&(p.fw=E.join(",")),`${l}?${(0,ee.Am)(p).slice(1)}`}function Jh(){return Jh=(0,C.A)(function*(f){const c=yield function Sm(f){return Du=Du||function bm(f){return new Promise((c,l)=>{var p,y,E;function R(){ul(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{ul(),l(Vt(f,"network-request-failed"))},timeout:Dm.get()})}if(null!==(y=null===(p=Dn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==y&&y.Iframe)c(gapi.iframes.getContext());else{if(null===(E=Dn().gapi)||void 0===E||!E.load){const U=Vg("iframefcb");return Dn()[U]=()=>{gapi.load?R():l(Vt(f,"network-request-failed"))},kg(`${function z0(){return Cc.gapiScript}()}?onload=${U}`).catch(re=>l(re))}R()}}).catch(c=>{throw Du=null,c})}(f),Du}(f),l=Dn().gapi;return le(l,f,"internal-error"),c.open({where:document.body,url:co(f),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WI,dontclear:!0},p=>new Promise(function(){var y=(0,C.A)(function*(E,R){yield p.restyle({setHideOnLeave:!1});const U=Vt(f,"network-request-failed"),re=Dn().setTimeout(()=>{R(U)},Rm.get());function ve(){Dn().clearTimeout(re),E(p)}p.ping(ve).then(ve,()=>{R(U)})});return function(E,R){return y.apply(this,arguments)}}()))}),Jh.apply(this,arguments)}const KI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bu{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const cl="__/auth/handler",ll="emulator/auth/handler",dl=encodeURIComponent("fac");function Su(f,c,l,p,y,E){return hl.apply(this,arguments)}function hl(){return(hl=(0,C.A)(function*(f,c,l,p,y,E){le(f.config.authDomain,f,"auth-domain-config-required"),le(f.config.apiKey,f,"invalid-api-key");const R={apiKey:f.config.apiKey,appName:f.name,authType:l,redirectUrl:p,v:Pe.SDK_VERSION,eventId:y};if(c instanceof kn){c.setDefaultLanguage(f.languageCode),R.providerId=c.providerId||"",(0,ee.Im)(c.getCustomParameters())||(R.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Me,Re]of Object.entries(E||{}))R[Me]=Re}if(c instanceof gr){const Me=c.getScopes().filter(Re=>""!==Re);Me.length>0&&(R.scopes=Me.join(","))}f.tenantId&&(R.tid=f.tenantId);const U=R;for(const Me of Object.keys(U))void 0===U[Me]&&delete U[Me];const re=yield f._getAppCheckToken(),ve=re?`#${dl}=${encodeURIComponent(re)}`:"";return`${function xm({config:f}){return f.emulator?Z(f,ll):`https://${f.authDomain}/${cl}`}(f)}?${(0,ee.Am)(U).slice(1)}${ve}`})).apply(this,arguments)}const Zh="webStorageSupport",la=class ca{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=en,this._completeRedirectFn=Gh,this._overrideRedirectResult=Hh}_openPopup(c,l,p,y){var E=this;return(0,C.A)(function*(){var R;qt(null===(R=E.eventManagers[c._key()])||void 0===R?void 0:R.manager,"_initialize() not called before _openPopup()");const U=yield Su(c,l,p,Cr(),y);return function Rs(f,c,l,p=500,y=600){const E=Math.max((window.screen.availHeight-y)/2,0).toString(),R=Math.max((window.screen.availWidth-p)/2,0).toString();let U="";const re=Object.assign(Object.assign({},KI),{width:p.toString(),height:y.toString(),top:E,left:R}),ve=(0,ee.ZQ)().toLowerCase();l&&(U=St(ve)?"_blank":l),Zn(ve)&&(c=c||"http://localhost",re.scrollbars="yes");const Me=Object.entries(re).reduce((cn,[Di,yo])=>`${cn}${Di}=${yo},`,"");if(function Q(f=(0,ee.ZQ)()){var c;return ss(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ve)&&"_self"!==U)return function JI(f,c){const l=document.createElement("a");l.href=f,l.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(p)}(c||"",U),new bu(null);const Re=window.open(c||"",U,Me);le(Re,f,"popup-blocked");try{Re.focus()}catch{}return new bu(Re)}(c,U,aa())})()}_openRedirect(c,l,p,y){var E=this;return(0,C.A)(function*(){return yield E._originValidation(c),function im(f){Dn().location.href=f}(yield Su(c,l,p,Cr(),y)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:y,promise:E}=this.eventManagers[l];return y?Promise.resolve(y):(qt(E,"If manager is not set, promise should be"),E)}const p=this.initAndGetManager(c);return this.eventManagers[l]={promise:p},p.catch(()=>{delete this.eventManagers[l]}),p}initAndGetManager(c){var l=this;return(0,C.A)(function*(){const p=yield function un(f){return Jh.apply(this,arguments)}(c),y=new uo(c);return p.register("authEvent",E=>(le(E?.authEvent,c,"invalid-auth-event"),{status:y.onEvent(E.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:y},l.iframes[c._key()]=p,y})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(Zh,{type:Zh},y=>{var E;const R=null===(E=y?.[0])||void 0===E?void 0:E[Zh];void 0!==R&&l(!!R),bt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Cm(f){return Cu.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return K()||is()||ss()}};class Nm{constructor(c){this.factorId=c}_process(c,l,p){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,p);case"signin":return this._finalizeSignIn(c,l.credential);default:return Yt("unexpected MultiFactorSessionType")}}}class Om extends Nm{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new Om(c)}_finalizeEnroll(c,l,p){return function ib(f,c){return fe(f,"POST","/v2/accounts/mfaEnrollment:finalize",ne(f,c))}(c,{idToken:l,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function SI(f,c){return fe(f,"POST","/v2/accounts/mfaSignIn:finalize",ne(f,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Xh=(()=>{class f{constructor(){}static assertion(l){return Om._fromCredential(l)}}return f.FACTOR_ID="phone",f})();var ZI="@firebase/auth";class Ru{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,C.A)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ur(){return window}(0,ee.XA)("authIdTokenMaxAge"),function $0(f){Cc=f}({loadJS:f=>new Promise((c,l)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=y=>{const E=Vt("internal-error");E.customData=y,l(E)},p.type="text/javascript",p.charset="UTF-8",function nE(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Pu(f){(0,Pe._registerComponent)(new pn.uA("auth",(c,{options:l})=>{const p=c.getProvider("app").getImmediate(),y=c.getProvider("heartbeat"),E=c.getProvider("app-check-internal"),{apiKey:R,authDomain:U}=p.options;le(R&&!R.includes(":"),"invalid-api-key",{appName:p.name});const re={apiKey:R,authDomain:U,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ae(f)},ve=new Kr(p,y,E,re);return function _I(f,c){const l=c?.persistence||[],p=(Array.isArray(l)?l:[l]).map(Ce);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(ve,l),ve},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,p)=>{c.getProvider("auth-internal").initialize()})),(0,Pe._registerComponent)(new pn.uA("auth-internal",c=>{const l=Pt(c.getProvider("auth").getImmediate());return new Ru(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Pe.registerVersion)(ZI,"1.7.9",function XI(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,Pe.registerVersion)(ZI,"1.7.9","esm2017")}("Browser");function Mu(){return Mu=(0,C.A)(function*(f,c,l){var p;const{BuildInfo:y}=ur();qt(c.sessionId,"AuthEvent did not contain a session ID");const E=yield function Um(f){return _l.apply(this,arguments)}(c.sessionId),R={};return ss()?R.ibi=y.packageName:$i()?R.apn=y.packageName:bt(f,"operation-not-supported-in-this-environment"),y.displayName&&(R.appDisplayName=y.displayName),R.sessionId=E,Su(f,l,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,R)}),Mu.apply(this,arguments)}function da(){return(da=(0,C.A)(function*(f){const{BuildInfo:c}=ur(),l={};ss()?l.iosBundleId=c.packageName:$i()?l.androidPackageName=c.packageName:bt(f,"operation-not-supported-in-this-environment"),yield Tm(f,l)})).apply(this,arguments)}function ml(){return(ml=(0,C.A)(function*(f,c,l){const{cordova:p}=ur();let y=()=>{};try{yield new Promise((E,R)=>{let U=null;function re(){var Re;E();const cn=null===(Re=p.plugins.browsertab)||void 0===Re?void 0:Re.close;"function"==typeof cn&&cn(),"function"==typeof l?.close&&l.close()}function ve(){U||(U=window.setTimeout(()=>{R(Vt(f,"redirect-cancelled-by-user"))},2e3))}function Me(){"visible"===document?.visibilityState&&ve()}c.addPassiveListener(re),document.addEventListener("resume",ve,!1),$i()&&document.addEventListener("visibilitychange",Me,!1),y=()=>{c.removePassiveListener(re),document.removeEventListener("resume",ve,!1),document.removeEventListener("visibilitychange",Me,!1),U&&window.clearTimeout(U)}})}finally{y()}})).apply(this,arguments)}function _l(){return(_l=(0,C.A)(function*(f){const c=function sE(f){if(qt(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const c=new ArrayBuffer(f.length),l=new Uint8Array(c);for(let p=0;p<f.length;p++)l[p]=f.charCodeAt(p);return l}(f),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(y=>y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class lo extends uo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInitialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInitialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,C.A)(function*(){yield c.initPromise})()}}function sf(f){return ho.apply(this,arguments)}function ho(){return(ho=(0,C.A)(function*(f){const c=yield af()._get(Fn(f));return c&&(yield af()._remove(Fn(f))),c})).apply(this,arguments)}function vr(){const f=[];for(let l=0;l<20;l++){const p=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return f.join("")}function af(){return Ce(Oh)}function Fn(f){return Be("authEvent",f.config.apiKey,f.name)}function xu(f){if(!f?.includes("?"))return{};const[c,...l]=f.split("?");return(0,ee.I9)(l.join("?"))}const fa=class ha{constructor(){this._redirectPersistence=en,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gh,this._overrideRedirectResult=Hh}_initialize(c){var l=this;return(0,C.A)(function*(){const p=c._key();let y=l.eventManagers.get(p);return y||(y=new lo(c),l.eventManagers.set(p,y),l.attachCallbackListeners(c,y)),y})()}_openPopup(c){bt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,p,y){var E=this;return(0,C.A)(function*(){!function Lm(f){var c,l,p,y,E,R,U,re,ve,Me;const Re=ur();le("function"==typeof(null===(c=Re?.universalLinks)||void 0===c?void 0:c.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(typeof(null===(l=Re?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le("function"==typeof(null===(E=null===(y=null===(p=Re?.cordova)||void 0===p?void 0:p.plugins)||void 0===y?void 0:y.browsertab)||void 0===E?void 0:E.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(re=null===(U=null===(R=Re?.cordova)||void 0===R?void 0:R.plugins)||void 0===U?void 0:U.browsertab)||void 0===re?void 0:re.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(Me=null===(ve=Re?.cordova)||void 0===ve?void 0:ve.InAppBrowser)||void 0===Me?void 0:Me.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const R=yield E._initialize(c);yield R.initialized(),R.resetRedirect(),function zI(){wu.clear()}(),yield E._originValidation(c);const U=function oE(f,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:vr(),postBody:null,tenantId:f.tenantId,error:Vt(f,"no-auth-event")}}(c,p,y);yield function Bm(f,c){return af()._set(Fn(f),c)}(c,U);const re=yield function gl(f,c,l){return Mu.apply(this,arguments)}(c,U,l),ve=yield function rf(f){const{cordova:c}=ur();return new Promise(l=>{c.plugins.browsertab.isAvailable(p=>{let y=null;p?c.plugins.browsertab.openUrl(f):y=c.InAppBrowser.open(f,function de(f=(0,ee.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),l(y)})})}(re);return function iE(f,c,l){return ml.apply(this,arguments)}(c,R,ve)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Fm(f){return da.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:p,handleOpenURL:y,BuildInfo:E}=ur(),R=setTimeout((0,C.A)(function*(){yield sf(c),l.onEvent(fo())}),500),U=function(){var Me=(0,C.A)(function*(Re){clearTimeout(R);const cn=yield sf(c);let Di=null;cn&&Re?.url&&(Di=function aE(f,c){var l,p;const y=function uE(f){const c=xu(f),l=c.link?decodeURIComponent(c.link):void 0,p=xu(l).link,y=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return xu(y).link||y||p||l||f}(c);if(y.includes("/__/auth/callback")){const E=xu(y),R=E.firebaseError?function uf(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(E.firebaseError)):null,U=null===(p=null===(l=R?.code)||void 0===l?void 0:l.split("auth/"))||void 0===p?void 0:p[1],re=U?Vt(U):null;return re?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:re,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:y,postBody:null}}return null}(cn,Re.url)),l.onEvent(Di||fo())});return function(cn){return Me.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,U);const re=y,ve=`${E.packageName.toLowerCase()}://`;ur().handleOpenURL=function(){var Me=(0,C.A)(function*(Re){if(Re.toLowerCase().startsWith(ve)&&U({url:Re}),"function"==typeof re)try{re(Re)}catch(cn){console.error(cn)}});return function(Re){return Me.apply(this,arguments)}}()}};function fo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Vt("no-auth-event")}}function Nu(){var f;return(null===(f=self?.location)||void 0===f?void 0:f.protocol)||null}function cE(f=(0,ee.ZQ)()){return!("file:"!==Nu()&&"ionic:"!==Nu()&&"capacitor:"!==Nu()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function po(){try{const f=self.localStorage,c=aa();if(f)return f.setItem(c,"1"),f.removeItem(c),!function _b(f=(0,ee.ZQ)()){return function gb(){return(0,ee.lT)()&&11===document?.documentMode}()||function mb(f=(0,ee.ZQ)()){return/Edge\/\d+/.test(f)}(f)}()||(0,ee.zW)()}catch{return lf()&&(0,ee.zW)()}return!1}function lf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function df(){return(function fb(){return"http:"===Nu()||"https:"===Nu()}()||(0,ee.sr)()||cE())&&!function pb(){return(0,ee.lV)()||(0,ee.Ll)()}()&&po()&&!lf()}function Rn(){return cE()&&typeof document<"u"}function go(){return(go=(0,C.A)(function*(){return!!Rn()&&new Promise(f=>{const c=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),f(!0)})})})).apply(this,arguments)}const tn={LOCAL:"local",NONE:"none",SESSION:"session"},Qi=le,hf="persistence";function mo(f){return ff.apply(this,arguments)}function ff(){return(ff=(0,C.A)(function*(f){yield f._initializationPromise;const c=$m(),l=Be(hf,f.config.apiKey,f.name);c&&c.setItem(l,f._getPersistence())})).apply(this,arguments)}function $m(){var f;try{return(null===(f=function dE(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const vb=le;class Pn{constructor(){this.browserResolver=Ce(la),this.cordovaResolver=Ce(fa),this.underlyingResolver=null,this._redirectPersistence=en,this._completeRedirectFn=Gh,this._overrideRedirectResult=Hh}_initialize(c){var l=this;return(0,C.A)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,p,y){var E=this;return(0,C.A)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._openPopup(c,l,p,y)})()}_openRedirect(c,l,p,y){var E=this;return(0,C.A)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._openRedirect(c,l,p,y)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return Rn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vb(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,C.A)(function*(){if(c.underlyingResolver)return;const l=yield function lE(){return go.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function El(f){return f.unwrap()}function Ib(f){return zm(f)}function zm(f){const{_tokenResponse:c}=f instanceof ee.g?f.customData:f;if(!c)return null;if(!(f instanceof ee.g)&&"temporaryProof"in c&&"phoneNumber"in c)return Eu.credentialFromResult(f);const l=c.providerId;if(!l||l===dt.PASSWORD)return null;let p;switch(l){case dt.GOOGLE:p=Oc;break;case dt.FACEBOOK:p=uu;break;case dt.GITHUB:p=kc;break;case dt.TWITTER:p=vh;break;default:const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:R,pendingToken:U,nonce:re}=c;return E||R||y||U?U?l.startsWith("saml.")?xr._create(l,U):Ei._fromParams({providerId:l,signInMethod:l,pendingToken:U,idToken:y,accessToken:E}):new pt(l).credential({idToken:y,accessToken:E,rawNonce:re}):null}return f instanceof ee.g?p.credentialFromError(f):p.credentialFromResult(f)}function Or(f,c){return c.catch(l=>{throw l instanceof ee.g&&function Hm(f,c){var l;const p=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new hE(f,function nb(f,c){var l;const p=(0,ee.Ku)(f),y=c;return le(c.customData.operationType,p,"argument-error"),le(null===(l=y.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,p,"argument-error"),em._fromError(p,y)}(f,c));else if(p){const y=zm(c),E=c;y&&(E.credential=y,E.tenantId=p.tenantId||void 0,E.email=p.email||void 0,E.phoneNumber=p.phoneNumber||void 0)}}(f,l),l}).then(l=>{const y=l.user;return{operationType:l.operationType,credential:Ib(l),additionalUserInfo:_r(l),user:cs.getOrCreate(y)}})}function pf(f,c){return gf.apply(this,arguments)}function gf(){return(gf=(0,C.A)(function*(f,c){const l=yield c;return{verificationId:l.verificationId,confirm:p=>Or(f,l.confirm(p))}})).apply(this,arguments)}class hE{constructor(c,l){this.resolver=l,this.auth=function ga(f){return f.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Or(El(this.auth),this.resolver.resolveSignIn(c))}}class cs{constructor(c){this._delegate=c,this.multiFactor=function nm(f){const c=(0,ee.Ku)(f);return Kc.has(c)||Kc.set(c,tm._fromUser(c)),Kc.get(c)}(c)}static getOrCreate(c){return cs.USER_MAP.has(c)||cs.USER_MAP.set(c,new cs(c)),cs.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,C.A)(function*(){return Or(l.auth,Ai(l._delegate,c))})()}linkWithPhoneNumber(c,l){var p=this;return(0,C.A)(function*(){return pf(p.auth,function FI(f,c,l){return gi.apply(this,arguments)}(p._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,C.A)(function*(){return Or(l.auth,function jI(f,c,l){return ze.apply(this,arguments)}(l._delegate,c,Pn))})()}linkWithRedirect(c){var l=this;return(0,C.A)(function*(){return yield mo(Pt(l.auth)),Au(l._delegate,c,Pn)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,C.A)(function*(){return Or(l.auth,Kg(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return pf(this.auth,function gm(f,c,l){return Xc.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return Or(this.auth,function _m(f,c,l){return nl.apply(this,arguments)}(this._delegate,c,Pn))}reauthenticateWithRedirect(c){var l=this;return(0,C.A)(function*(){return yield mo(Pt(l.auth)),Im(l._delegate,c,Pn)})()}sendEmailVerification(c){return function ia(f,c){return hi.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,C.A)(function*(){return yield function EI(f,c){return Yr.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function gt(f,c){const l=(0,ee.Ku)(f);return(0,Pe._isFirebaseServerApp)(l.auth.app)?Promise.reject($e(l.auth)):Gc(l,c,null)}(this._delegate,c)}updatePassword(c){return function J0(f,c){return Gc((0,ee.Ku)(f),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function el(f,c){return or.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function fu(f,c){return ro.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function hu(f,c,l){return qc.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}cs.USER_MAP=new WeakMap;const _o=le;let Ou=(()=>{class f{constructor(l,p){if(this.app=l,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:y}=l.options;_o(y,"invalid-api-key",{appName:l.name}),_o(y,"invalid-api-key",{appName:l.name});const E=typeof window<"u"?Pn:void 0;this._delegate=p.initialize({options:{persistence:ku(y,l.name),popupRedirectResolver:E}}),this._delegate._updateErrorMap(Kn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?cs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,p){!function ch(f,c,l){const p=Pt(f);le(p._canInitEmulator,p,"emulator-config-failed"),le(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const y=!!l?.disableWarnings,E=Lg(c),{host:R,port:U}=function Sc(f){const c=Lg(f),l=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!l)return{host:"",port:null};const p=l[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(p);if(y){const E=y[1];return{host:E,port:nu(p.substr(E.length+1))}}{const[E,R]=p.split(":");return{host:E,port:nu(R)}}}(c);p.config.emulator={url:`${E}//${R}${null===U?"":`:${U}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:R,port:U,protocol:E.replace(":",""),options:Object.freeze({disableWarnings:y})}),y||function lh(){function f(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,l,p)}applyActionCode(l){return function wI(f,c){return Zt.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return De(this._delegate,l)}confirmPasswordReset(l,p){return function zc(f,c,l){return Ph.apply(this,arguments)}(this._delegate,l,p)}createUserWithEmailAndPassword(l,p){var y=this;return(0,C.A)(function*(){return Or(y._delegate,function du(f,c,l){return zn.apply(this,arguments)}(y._delegate,l,p))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function Cn(f,c){return no.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function ra(f,c){const l=au.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,C.A)(function*(){_o(df(),l._delegate,"operation-not-supported-in-this-environment");const p=yield function zh(f,c){return qh.apply(this,arguments)}(l._delegate,Pn);return p?Or(l._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function jm(f,c){Pt(f)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,p,y){const{next:E,error:R,complete:U}=qm(l,p,y);return this._delegate.onAuthStateChanged(E,R,U)}onIdTokenChanged(l,p,y){const{next:E,error:R,complete:U}=qm(l,p,y);return this._delegate.onIdTokenChanged(E,R,U)}sendSignInLinkToEmail(l,p){return function Tn(f,c,l){return zi.apply(this,arguments)}(this._delegate,l,p)}sendPasswordResetEmail(l,p){return function Yg(f,c,l){return Hc.apply(this,arguments)}(this._delegate,l,p||void 0)}setPersistence(l){var p=this;return(0,C.A)(function*(){let y;switch(function Il(f,c){Qi(Object.values(tn).includes(c),f,"invalid-persistence-type"),(0,ee.lV)()?Qi(c!==tn.SESSION,f,"unsupported-persistence-type"):(0,ee.Ll)()?Qi(c===tn.NONE,f,"unsupported-persistence-type"):lf()?Qi(c===tn.NONE||c===tn.LOCAL&&(0,ee.zW)(),f,"unsupported-persistence-type"):Qi(c===tn.NONE||po(),f,"unsupported-persistence-type")}(p._delegate,l),l){case tn.SESSION:y=en;break;case tn.LOCAL:y=(yield Ce(yu)._isAvailable())?yu:Oh;break;case tn.NONE:y=Sn;break;default:return bt("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(y)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return Or(this._delegate,function qg(f){return Lc.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return Or(this._delegate,$c(this._delegate,l))}signInWithCustomToken(l){return Or(this._delegate,function Qg(f,c){return Ke.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,p){return Or(this._delegate,function na(f,c,l){return(0,Pe._isFirebaseServerApp)(f.app)?Promise.reject($e(f)):$c((0,ee.Ku)(f),ea.credential(c,l)).catch(function(){var p=(0,C.A)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&As(f),y});return function(y){return p.apply(this,arguments)}}())}(this._delegate,l,p))}signInWithEmailLink(l,p){return Or(this._delegate,function Ze(f,c,l){return to.apply(this,arguments)}(this._delegate,l,p))}signInWithPhoneNumber(l,p){return pf(this._delegate,function VI(f,c,l){return vu.apply(this,arguments)}(this._delegate,l,p))}signInWithPopup(l){var p=this;return(0,C.A)(function*(){return _o(df(),p._delegate,"operation-not-supported-in-this-environment"),Or(p._delegate,function BI(f,c,l){return tl.apply(this,arguments)}(p._delegate,l,Pn))})()}signInWithRedirect(l){var p=this;return(0,C.A)(function*(){return _o(df(),p._delegate,"operation-not-supported-in-this-environment"),yield mo(p._delegate),ue(p._delegate,l,Pn)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function Xt(f,c){return Zr.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=tn,f})();function qm(f,c,l){let p=f;"function"!=typeof f&&({next:p,error:c,complete:l}=f);const y=p;return{next:R=>y(R&&cs.getOrCreate(R)),error:c,complete:l}}function ku(f,c){const l=function yb(f,c){const l=$m();if(!l)return[];const p=Be(hf,f,c);switch(l.getItem(p)){case tn.NONE:return[Sn];case tn.LOCAL:return[yu,en];case tn.SESSION:return[en];default:return[]}}(f,c);if(typeof self<"u"&&!l.includes(yu)&&l.push(yu),typeof window<"u")for(const p of[Oh,en])l.includes(p)||l.push(p);return l.includes(Sn)||l.push(Sn),l}class mf{constructor(){this.providerId="phone",this._delegate=new Eu(El(qe.A.auth()))}static credential(c,l){return Eu.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}mf.PHONE_SIGN_IN_METHOD=Eu.PHONE_SIGN_IN_METHOD,mf.PROVIDER_ID=Eu.PROVIDER_ID;const wl=le;class fE{constructor(c,l,p=qe.A.app()){var y;wl(null===(y=p.options)||void 0===y?void 0:y.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new kI(p.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function _f(f){f.INTERNAL.registerComponent(new pn.uA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new Ou(l,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ea,FacebookAuthProvider:uu,GithubAuthProvider:kc,GoogleAuthProvider:Oc,OAuthProvider:pt,SAMLAuthProvider:lu,PhoneAuthProvider:mf,PhoneMultiFactorGenerator:Xh,RecaptchaVerifier:fE,TwitterAuthProvider:vh,Auth:Ou,AuthCredential:eo,Error:ee.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.14")}(qe.A)},467:(ns,rr,nt)=>{function C(Pe,ee,Tt,on,pn,Wn,dt){try{var oe=Pe[Wn](dt),ge=oe.value}catch(Ne){return void Tt(Ne)}oe.done?ee(ge):Promise.resolve(ge).then(on,pn)}function qe(Pe){return function(){var ee=this,Tt=arguments;return new Promise(function(on,pn){var Wn=Pe.apply(ee,Tt);function dt(ge){C(Wn,on,pn,dt,oe,"next",ge)}function oe(ge){C(Wn,on,pn,dt,oe,"throw",ge)}dt(void 0)})}}nt.d(rr,{A:()=>qe})},635:(ns,rr,nt)=>{function ee(Y,Z){var te={};for(var se in Y)Object.prototype.hasOwnProperty.call(Y,se)&&Z.indexOf(se)<0&&(te[se]=Y[se]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var Ie=0;for(se=Object.getOwnPropertySymbols(Y);Ie<se.length;Ie++)Z.indexOf(se[Ie])<0&&Object.prototype.propertyIsEnumerable.call(Y,se[Ie])&&(te[se[Ie]]=Y[se[Ie]])}return te}function Ne(Y,Z,te,se){return new(te||(te=Promise))(function(ne,fe){function ht(ft){try{Ue(se.next(ft))}catch(Jt){fe(Jt)}}function Oe(ft){try{Ue(se.throw(ft))}catch(Jt){fe(Jt)}}function Ue(ft){ft.done?ne(ft.value):function Ie(ne){return ne instanceof te?ne:new te(function(fe){fe(ne)})}(ft.value).then(ht,Oe)}Ue((se=se.apply(Y,Z||[])).next())})}function Qt(Y){return this instanceof Qt?(this.v=Y,this):new Qt(Y)}function bt(Y,Z,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,se=te.apply(Y,Z||[]),ne=[];return Ie={},fe("next"),fe("throw"),fe("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie;function fe(Rt){se[Rt]&&(Ie[Rt]=function(ir){return new Promise(function(Dr,Jn){ne.push([Rt,ir,Dr,Jn])>1||ht(Rt,ir)})})}function ht(Rt,ir){try{!function Oe(Rt){Rt.value instanceof Qt?Promise.resolve(Rt.value.v).then(Ue,ft):Jt(ne[0][2],Rt)}(se[Rt](ir))}catch(Dr){Jt(ne[0][3],Dr)}}function Ue(Rt){ht("next",Rt)}function ft(Rt){ht("throw",Rt)}function Jt(Rt,ir){Rt(ir),ne.shift(),ne.length&&ht(ne[0][0],ne[0][1])}}function fr(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,Z=Y[Symbol.asyncIterator];return Z?Z.call(Y):(Y=function Ct(Y){var Z="function"==typeof Symbol&&Symbol.iterator,te=Z&&Y[Z],se=0;if(te)return te.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&se>=Y.length&&(Y=void 0),{value:Y&&Y[se++],done:!Y}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),te={},se("next"),se("throw"),se("return"),te[Symbol.asyncIterator]=function(){return this},te);function se(ne){te[ne]=Y[ne]&&function(fe){return new Promise(function(ht,Oe){!function Ie(ne,fe,ht,Oe){Promise.resolve(Oe).then(function(Ue){ne({value:Ue,done:ht})},fe)}(ht,Oe,(fe=Y[ne](fe)).done,fe.value)})}}}nt.d(rr,{AQ:()=>bt,N3:()=>Qt,Tt:()=>ee,sH:()=>Ne,xN:()=>fr}),"function"==typeof SuppressedError&&SuppressedError}},ns=>{ns(ns.s=618)}]);
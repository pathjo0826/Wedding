"use strict";(self.webpackChunkwedding_app=self.webpackChunkwedding_app||[]).push([[792],{401:(as,cr,rt)=>{rt.d(cr,{Am:()=>no,Bd:()=>le,FA:()=>ft,Fy:()=>yr,I9:()=>zi,Im:()=>Zo,Ku:()=>us,Ll:()=>Ht,T9:()=>Yt,Uj:()=>ht,XA:()=>bt,ZQ:()=>ze,bD:()=>to,c1:()=>qt,cY:()=>Ft,eX:()=>se,g:()=>fe,gR:()=>Zr,hp:()=>ro,jZ:()=>wn,lT:()=>As,lV:()=>gi,mS:()=>At,nr:()=>Z,p7:()=>Jt,sr:()=>Mr,tD:()=>Pn,u:()=>oe,zW:()=>te,zw:()=>Oe});const ee=function(S){const P=[];let k=0;for(let B=0;B<S.length;B++){let G=S.charCodeAt(B);G<128?P[k++]=G:G<2048?(P[k++]=G>>6|192,P[k++]=63&G|128):55296==(64512&G)&&B+1<S.length&&56320==(64512&S.charCodeAt(B+1))?(G=65536+((1023&G)<<10)+(1023&S.charCodeAt(++B)),P[k++]=G>>18|240,P[k++]=G>>12&63|128,P[k++]=G>>6&63|128,P[k++]=63&G|128):(P[k++]=G>>12|224,P[k++]=G>>6&63|128,P[k++]=63&G|128)}return P},un={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(S,P){if(!Array.isArray(S))throw Error("encodeByteArray takes an array as a parameter");this.init_();const k=P?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let G=0;G<S.length;G+=3){const Se=S[G],Te=G+1<S.length,zt=Te?S[G+1]:0,Mn=G+2<S.length,$e=Mn?S[G+2]:0;let tr=(15&zt)<<2|$e>>6,cs=63&$e;Mn||(cs=64,Te||(tr=64)),B.push(k[Se>>2],k[(3&Se)<<4|zt>>4],k[tr],k[cs])}return B.join("")},encodeString(S,P){return this.HAS_NATIVE_SUPPORT&&!P?btoa(S):this.encodeByteArray(ee(S),P)},decodeString(S,P){return this.HAS_NATIVE_SUPPORT&&!P?atob(S):function(S){const P=[];let k=0,B=0;for(;k<S.length;){const G=S[k++];if(G<128)P[B++]=String.fromCharCode(G);else if(G>191&&G<224){const Se=S[k++];P[B++]=String.fromCharCode((31&G)<<6|63&Se)}else if(G>239&&G<365){const Mn=((7&G)<<18|(63&S[k++])<<12|(63&S[k++])<<6|63&S[k++])-65536;P[B++]=String.fromCharCode(55296+(Mn>>10)),P[B++]=String.fromCharCode(56320+(1023&Mn))}else{const Se=S[k++],Te=S[k++];P[B++]=String.fromCharCode((15&G)<<12|(63&Se)<<6|63&Te)}}return P.join("")}(this.decodeStringToByteArray(S,P))},decodeStringToByteArray(S,P){this.init_();const k=P?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let G=0;G<S.length;){const Se=k[S.charAt(G++)],zt=G<S.length?k[S.charAt(G)]:0;++G;const $e=G<S.length?k[S.charAt(G)]:64;++G;const He=G<S.length?k[S.charAt(G)]:64;if(++G,null==Se||null==zt||null==$e||null==He)throw new mn;B.push(Se<<2|zt>>4),64!==$e&&(B.push(zt<<4&240|$e>>2),64!==He&&B.push($e<<6&192|He))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let S=0;S<this.ENCODED_VALS.length;S++)this.byteToCharMap_[S]=this.ENCODED_VALS.charAt(S),this.charToByteMap_[this.byteToCharMap_[S]]=S,this.byteToCharMapWebSafe_[S]=this.ENCODED_VALS_WEBSAFE.charAt(S),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[S]]=S,S>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(S)]=S,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(S)]=S)}}};class mn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ht=function(S){return function(S){const P=ee(S);return un.encodeByteArray(P,!0)}(S).replace(/\./g,"")},oe=function(S){try{return un.decodeString(S,!0)}catch(P){console.error("base64Decode failed: ",P)}return null};function Oe(S,P){if(!(P instanceof Object))return P;switch(P.constructor){case Date:return new Date(P.getTime());case Object:void 0===S&&(S={});break;case Array:S=[];break;default:return P}for(const k in P)!P.hasOwnProperty(k)||!lt(k)||(S[k]=Oe(S[k],P[k]));return S}function lt(S){return"__proto__"!==S}function At(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ot=()=>{try{return At().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const S=process.env.__FIREBASE_DEFAULTS__;return S?JSON.parse(S):void 0})()||(()=>{if(typeof document>"u")return;let S;try{S=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const P=S&&oe(S[1]);return P&&JSON.parse(P)})()}catch(S){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${S}`)}},Yt=()=>{var S;return null===(S=ot())||void 0===S?void 0:S.config},bt=S=>{var P;return null===(P=ot())||void 0===P?void 0:P[`_${S}`]};class Ft{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((P,k)=>{this.resolve=P,this.reject=k})}wrapCallback(P){return(k,B)=>{k?this.reject(k):this.resolve(B),"function"==typeof P&&(this.promise.catch(()=>{}),1===P.length?P(k):P(k,B))}}}function yr(S,P){if(S.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=P||"demo-project",G=S.iat||0,Se=S.sub||S.user_id;if(!Se)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Te=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:G,exp:G+3600,auth_time:G,sub:Se,user_id:Se,firebase:{sign_in_provider:"custom",identities:{}}},S);return[ht(JSON.stringify({alg:"none",type:"JWT"})),ht(JSON.stringify(Te)),""].join(".")}function ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function wn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function Ht(){var S;const P=null===(S=ot())||void 0===S?void 0:S.forceEnvironment;if("node"===P)return!0;if("browser"===P)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function le(){return typeof window<"u"||Jt()}function Jt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function qt(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function Mr(){const S="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof S&&void 0!==S.id}function gi(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function As(){const S=ze();return S.indexOf("MSIE ")>=0||S.indexOf("Trident/")>=0}function Z(){return!Ht()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function te(){try{return"object"==typeof indexedDB}catch{return!1}}function se(){return new Promise((S,P)=>{try{let k=!0;const B="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(B);G.onsuccess=()=>{G.result.close(),k||self.indexedDB.deleteDatabase(B),S(!0)},G.onupgradeneeded=()=>{k=!1},G.onerror=()=>{var Se;P((null===(Se=G.error)||void 0===Se?void 0:Se.message)||"")}}catch(k){P(k)}})}class fe extends Error{constructor(P,k,B){super(k),this.code=P,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ft.prototype.create)}}class ft{constructor(P,k,B){this.service=P,this.serviceName=k,this.errors=B}create(P,...k){const B=k[0]||{},G=`${this.service}/${P}`,Se=this.errors[P],Te=Se?function ke(S,P){return S.replace(je,(k,B)=>{const G=P[B];return null!=G?String(G):`<${B}?>`})}(Se,B):"Error";return new fe(G,`${this.serviceName}: ${Te} (${G}).`,B)}}const je=/\{\$([^}]+)}/g;function Zr(S,P){return Object.prototype.hasOwnProperty.call(S,P)}function Zo(S){for(const P in S)if(Object.prototype.hasOwnProperty.call(S,P))return!1;return!0}function to(S,P){if(S===P)return!0;const k=Object.keys(S),B=Object.keys(P);for(const G of k){if(!B.includes(G))return!1;const Se=S[G],Te=P[G];if(Cs(Se)&&Cs(Te)){if(!to(Se,Te))return!1}else if(Se!==Te)return!1}for(const G of B)if(!k.includes(G))return!1;return!0}function Cs(S){return null!==S&&"object"==typeof S}function no(S){const P=[];for(const[k,B]of Object.entries(S))Array.isArray(B)?B.forEach(G=>{P.push(encodeURIComponent(k)+"="+encodeURIComponent(G))}):P.push(encodeURIComponent(k)+"="+encodeURIComponent(B));return P.length?"&"+P.join("&"):""}function zi(S){const P={};return S.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[G,Se]=B.split("=");P[decodeURIComponent(G)]=decodeURIComponent(Se)}}),P}function ro(S){const P=S.indexOf("?");if(!P)return"";const k=S.indexOf("#",P);return S.substring(P,k>0?k:void 0)}function Pn(S,P){const k=new Or(S,P);return k.subscribe.bind(k)}class Or{constructor(P,k){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=k,this.task.then(()=>{P(this)}).catch(B=>{this.error(B)})}next(P){this.forEachObserver(k=>{k.next(P)})}error(P){this.forEachObserver(k=>{k.error(P)}),this.close(P)}complete(){this.forEachObserver(P=>{P.complete()}),this.close()}subscribe(P,k,B){let G;if(void 0===P&&void 0===k&&void 0===B)throw new Error("Missing Observer.");G=function Gi(S,P){if("object"!=typeof S||null===S)return!1;for(const k of P)if(k in S&&"function"==typeof S[k])return!0;return!1}(P,["next","error","complete"])?P:{next:P,error:k,complete:B},void 0===G.next&&(G.next=Cn),void 0===G.error&&(G.error=Cn),void 0===G.complete&&(G.complete=Cn);const Se=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch{}}),this.observers.push(G),Se}unsubscribeOne(P){void 0===this.observers||void 0===this.observers[P]||(delete this.observers[P],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(P){if(!this.finalized)for(let k=0;k<this.observers.length;k++)this.sendOne(k,P)}sendOne(P,k){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[P])try{k(this.observers[P])}catch(B){typeof console<"u"&&console.error&&console.error(B)}})}close(P){this.finalized||(this.finalized=!0,void 0!==P&&(this.finalError=P),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Cn(){}function us(S){return S&&S._delegate?S._delegate:S}},176:(as,cr,rt)=>{function T(n){return"function"==typeof n}function We(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Pe=We(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ee(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Ct{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(T(r))try{r()}catch(s){e=s instanceof Pe?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Yn(s)}catch(o){e=e??[],o instanceof Pe?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Pe(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Yn(e);else{if(e instanceof Ct){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ee(t,e)}remove(e){const{_finalizers:t}=this;t&&ee(t,e),e instanceof Ct&&e._removeParent(this)}}Ct.EMPTY=(()=>{const n=new Ct;return n.closed=!0,n})();const un=Ct.EMPTY;function mn(n){return n instanceof Ct||n&&"closed"in n&&T(n.remove)&&T(n.add)&&T(n.unsubscribe)}function Yn(n){T(n)?n():n.unsubscribe()}const ht={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},oe={setTimeout(n,e,...t){const{delegate:r}=oe;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=oe;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ge(n){oe.setTimeout(()=>{const{onUnhandledError:e}=ht;if(!e)throw n;e(n)})}function Oe(){}const lt=Tt("C",void 0,void 0);function Tt(n,e,t){return{kind:n,value:e,error:t}}let Ke=null;function ot(n){if(ht.useDeprecatedSynchronousErrorHandling){const e=!Ke;if(e&&(Ke={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Ke;if(Ke=null,t)throw r}}else n()}class Xn extends Ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,mn(e)&&e.add(this)):this.destination=le}static create(e,t,r){return new yr(e,t,r)}next(e){this.isStopped?Ht(function Jn(n){return Tt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ht(function At(n){return Tt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ht(lt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Yt=Function.prototype.bind;function bt(n,e){return Yt.call(n,e)}class Ft{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ze(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ze(r)}else ze(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ze(t)}}}class yr extends Xn{constructor(e,t,r){let i;if(super(),T(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ht.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bt(e.next,s),error:e.error&&bt(e.error,s),complete:e.complete&&bt(e.complete,s)}):i=e}this.destination=new Ft(i)}}function ze(n){ht.useDeprecatedSynchronousErrorHandling?function Zn(n){ht.useDeprecatedSynchronousErrorHandling&&Ke&&(Ke.errorThrown=!0,Ke.error=n)}(n):ge(n)}function Ht(n,e){const{onStoppedNotification:t}=ht;t&&oe.setTimeout(()=>t(n,e))}const le={closed:!0,next:Oe,error:function wn(n){throw n},complete:Oe},Jt="function"==typeof Symbol&&Symbol.observable||"@@observable";function qt(n){return n}function gi(n){return 0===n.length?qt:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let dt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Y(n){return n&&n instanceof Xn||function cu(n){return n&&T(n.next)&&T(n.error)&&T(n.complete)}(n)&&mn(n)}(t)?t:new yr(t,r,i);return ot(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=As(r))((i,s)=>{const o=new yr({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Jt](){return this}pipe(...t){return gi(t)(this)}toPromise(t){return new(t=As(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function As(n){var e;return null!==(e=n??ht.Promise)&&void 0!==e?e:Promise}const Z=We(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let te=(()=>{class n extends dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new se(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Z}next(t){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ot(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?un:(this.currentObservers=null,s.push(t),new Ct(()=>{this.currentObservers=null,ee(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new dt;return t.source=this,t}}return n.create=(e,t)=>new se(e,t),n})();class se extends te{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:un}}function Ie(n){return T(n?.lift)}function ne(n){return e=>{if(Ie(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(n,e,t,r,i){return new ft(n,e,t,r,i)}class ft extends Xn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ke(n,e){return ne((t,r)=>{let i=0;t.subscribe(fe(r,s=>{r.next(n.call(e,s,i++))}))})}var je=rt(635);const pt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Zt(n){return T(n?.then)}function Rt(n){return T(n[Jt])}function lr(n){return Symbol.asyncIterator&&T(n?.[Symbol.asyncIterator])}function xr(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Nr=function er(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Zr(n){return T(n?.[Nr])}function Jo(n){return(0,je.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,je.N3)(t.read());if(i)return yield(0,je.N3)(void 0);yield yield(0,je.N3)(r)}}finally{t.releaseLock()}})}function Zo(n){return T(n?.getReader)}function zn(n){if(n instanceof dt)return n;if(null!=n){if(Rt(n))return function to(n){return new dt(e=>{const t=n[Jt]();if(T(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(pt(n))return function Cs(n){return new dt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Zt(n))return function xc(n){return new dt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ge)})}(n);if(lr(n))return zi(n);if(Zr(n))return function no(n){return new dt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Zo(n))return function ro(n){return zi(Jo(n))}(n)}throw xr(n)}function zi(n){return new dt(e=>{(function mi(n,e){var t,r,i,s;return(0,je.sH)(this,void 0,void 0,function*(){try{for(t=(0,je.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Pn(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function An(n,e,t=1/0){return T(e)?An((r,i)=>ke((s,o)=>e(r,s,i,o))(zn(n(r,i))),t):("number"==typeof e&&(t=e),ne((r,i)=>function Or(n,e,t,r,i,s,o,a){const u=[];let d=0,g=0,m=!1;const v=()=>{m&&!u.length&&!d&&e.complete()},w=D=>d<r?C(D):u.push(D),C=D=>{s&&e.next(D),d++;let M=!1;zn(t(D,g++)).subscribe(fe(e,z=>{i?.(z),s?w(z):e.next(z)},()=>{M=!0},void 0,()=>{if(M)try{for(d--;u.length&&d<r;){const z=u.shift();o?Pn(e,o,()=>C(z)):C(z)}v()}catch(z){e.error(z)}}))};return n.subscribe(fe(e,w,()=>{m=!0,v()})),()=>{a?.()}}(r,i,n,t)))}function Gi(n=1/0){return An(qt,n)}const Cn=new dt(n=>n.complete());function kr(n){return n[n.length-1]}function io(n){return T(kr(n))?n.pop():void 0}function Ts(n){return function ea(n){return n&&T(n.schedule)}(kr(n))?n.pop():void 0}function Xr(n,e=0){return ne((t,r)=>{t.subscribe(fe(r,i=>Pn(r,n,()=>r.next(i),e),()=>Pn(r,n,()=>r.complete(),e),i=>Pn(r,n,()=>r.error(i),e)))})}function Vr(n,e=0){return ne((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function na(n,e){if(!n)throw new Error("Iterable cannot be null");return new dt(t=>{Pn(t,e,()=>{const r=n[Symbol.asyncIterator]();Pn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function S(n,e){return e?function us(n,e){if(null!=n){if(Rt(n))return function so(n,e){return zn(n).pipe(Vr(e),Xr(e))}(n,e);if(pt(n))return function oo(n,e){return new dt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Zt(n))return function ta(n,e){return zn(n).pipe(Vr(e),Xr(e))}(n,e);if(lr(n))return na(n,e);if(Zr(n))return function Nc(n,e){return new dt(t=>{let r;return Pn(t,e,()=>{r=n[Nr](),Pn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>T(r?.return)&&r.return()})}(n,e);if(Zo(n))return function ra(n,e){return na(Jo(n),e)}(n,e)}throw xr(n)}(n,e):zn(n)}function P(...n){const e=Ts(n),t=function vr(n,e){return"number"==typeof kr(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?zn(r[0]):Gi(t)(S(r,e)):Cn}class k extends te{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function B(...n){return S(n,Ts(n))}function G(n={}){const{connector:e=(()=>new te),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,d=0,g=!1,m=!1;const v=()=>{a?.unsubscribe(),a=void 0},w=()=>{v(),o=u=void 0,g=m=!1},C=()=>{const D=o;w(),D?.unsubscribe()};return ne((D,M)=>{d++,!m&&!g&&v();const z=u=u??e();M.add(()=>{d--,0===d&&!m&&!g&&(a=Se(C,i))}),z.subscribe(M),!o&&d>0&&(o=new yr({next:F=>z.next(F),error:F=>{m=!0,v(),a=Se(w,t,F),z.error(F)},complete:()=>{g=!0,v(),a=Se(w,r),z.complete()}}),zn(D).subscribe(o))})(s)}}function Se(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new yr({next:()=>{r.unsubscribe(),n()}});return zn(e(...t)).subscribe(r)}function Te(n,e){return ne((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(fe(r,u=>{i?.unsubscribe();let d=0;const g=s++;zn(n(u,g)).subscribe(i=fe(r,m=>r.next(e?e(u,m,g,d++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function zt(n,e=qt){return n=n??Mn,ne((t,r)=>{let i,s=!0;t.subscribe(fe(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Mn(n,e){return n===e}function $e(n){for(let e in n)if(n[e]===$e)return e;throw Error("Could not find renamed property on target object.")}function Tn(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function He(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(He).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function tr(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const cs=$e({__forward_ref__:$e});function St(n){return n.__forward_ref__=St,n.toString=function(){return He(this())},n}function Ge(n){return Wi(n)?n():n}function Wi(n){return"function"==typeof n&&n.hasOwnProperty(cs)&&n.__forward_ref__===St}function ia(n){return n&&!!n.\u0275providers}const ls="https://g.co/ng/security#xss";class de extends Error{constructor(e,t){super(function Q(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function x(n){return"string"==typeof n?n:null==n?"":String(n)}function nt(n,e){throw new de(-201,!1)}function _i(n,e){null==n&&function Qe(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Fe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function dr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Vc(n){return yh(n,lu)||yh(n,ao)}function yh(n,e){return n.hasOwnProperty(e)?n[e]:null}function Fc(n){return n&&(n.hasOwnProperty(vh)||n.hasOwnProperty(Kg))?n[vh]:null}const lu=$e({\u0275prov:$e}),vh=$e({\u0275inj:$e}),ao=$e({ngInjectableDef:$e}),Kg=$e({ngInjectorDef:$e});var ct=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ct||{});let Ih;function Fr(n){const e=Ih;return Ih=n,e}function Uc(n,e,t){const r=Vc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ct.Optional?null:void 0!==e?e:void nt(He(n))}const Lt=globalThis;class _e{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Fe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const hu={},fu="__NG_DI_FLAG__",Ds="ngTempTokenPath",Th=/\n/gm,Si="__source";let sa;function bs(n){const e=sa;return sa=n,e}function bh(n,e=ct.Default){if(void 0===sa)throw new de(-203,!1);return null===sa?Uc(n,void 0,e):sa.get(n,e&ct.Optional?null:void 0,e)}function me(n,e=ct.Default){return(function Lc(){return Ih}()||bh)(Ge(n),e)}function be(n,e=ct.Default){return me(n,$c(e))}function $c(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function pu(n){const e=[];for(let t=0;t<n.length;t++){const r=Ge(n[t]);if(Array.isArray(r)){if(0===r.length)throw new de(900,!1);let i,s=ct.Default;for(let o=0;o<r.length;o++){const a=r[o],u=bI(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(me(i,s))}else e.push(me(r))}return e}function Ri(n,e){return n[fu]=e,n.prototype[fu]=e,n}function bI(n){return n[fu]}function Ss(n){return{toString:n}.toString()}var oa=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(oa||{}),Ln=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ln||{});const Ir={},gt=[],mu=$e({\u0275cmp:$e}),Hc=$e({\u0275dir:$e}),zc=$e({\u0275pipe:$e}),Xg=$e({\u0275mod:$e}),Lr=$e({\u0275fac:$e}),_u=$e({__NG_ELEMENT_ID__:$e}),yu=$e({__NG_ENV_ID__:$e});function Sh(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Gc(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];ti(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function qc(n){return 3===n||4===n||6===n}function ti(n){return 64===n.charCodeAt(0)}function aa(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||em(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function em(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Wc="ng-template";function Kc(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==Sh(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Rh(n){return 4===n.type&&n.value!==Wc}function tm(n,e,t){return e===(4!==n.type||t?n.value:Wc)}function RI(n,e,t){let r=4;const i=n.attrs||[],s=function Mh(n){for(let e=0;e<n.length;e++)if(qc(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!tm(n,u,t)||""===u&&1===e.length){if(ni(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!Kc(n.attrs,d,t)){if(ni(r))return!1;o=!0}continue}const m=Ph(8&r?"class":u,i,Rh(n),t);if(-1===m){if(ni(r))return!1;o=!0;continue}if(""!==d){let v;v=m>s?"":i[m+1].toLowerCase();const w=8&r?v:null;if(w&&-1!==Sh(w,d,0)||2&r&&d!==v){if(ni(r))return!1;o=!0}}}}else{if(!o&&!ni(r)&&!ni(u))return!1;if(o&&ni(u))continue;o=!1,r=u|1&r}}return ni(r)||o}function ni(n){return 0==(1&n)}function Ph(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function nm(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Qc(n,e,t=!1){for(let r=0;r<e.length;r++)if(RI(n,e[r],t))return!0;return!1}function Nh(n,e){return n?":not("+e.trim()+")":e}function Oh(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ni(o)&&(e+=Nh(s,i),i=""),r=o,s=s||!ni(r);t++}return""!==i&&(e+=Nh(s,i)),e}function yi(n){return Ss(()=>{const e=sm(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===oa.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ln.Emulated,styles:n.styles||gt,_:null,schemas:n.schemas||null,tView:null,id:""};Zc(t);const r=n.dependencies;return t.directiveDefs=Xc(r,!1),t.pipeDefs=Xc(r,!0),t.id=function PI(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function rm(n){return yt(n)||Un(n)}function Fh(n){return null!==n}function ri(n){return Ss(()=>({type:n.type,bootstrap:n.bootstrap||gt,declarations:n.declarations||gt,imports:n.imports||gt,exports:n.exports||gt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function im(n,e){if(null==n)return Ir;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Ye(n){return Ss(()=>{const e=sm(n);return Zc(e),e})}function yt(n){return n[mu]||null}function Un(n){return n[Hc]||null}function qn(n){return n[zc]||null}function Er(n,e){const t=n[Xg]||null;if(!t&&!0===e)throw new Error(`Type ${He(n)} does not have '\u0275mod' property.`);return t}function sm(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ir,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||gt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:im(n.inputs,e),outputs:im(n.outputs)}}function Zc(n){n.features?.forEach(e=>e(n))}function Xc(n,e){if(!n)return null;const t=e?qn:rm;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Fh)}const Xt=0,De=1,Ze=2,en=3,ii=4,vu=5,Wn=6,ua=7,Dn=8,Qi=9,ca=10,Xe=11,uo=12,om=13,Ps=14,bn=15,co=16,la=17,vi=18,Iu=19,el=20,Ms=21,Pi=22,Eu=23,lo=24,mt=25,tl=1,nl=2,Yi=7,ho=9,nr=11;function Ur(n){return Array.isArray(n)&&"object"==typeof n[tl]}function wr(n){return Array.isArray(n)&&!0===n[tl]}function am(n){return 0!=(4&n.flags)}function da(n){return n.componentOffset>-1}function Bh(n){return 1==(1&n.flags)}function si(n){return!!n.template}function jh(n){return 0!=(512&n[Ze])}function fo(n,e){return n.hasOwnProperty(Lr)?n[Lr]:null}let tn=null,il=!1;function Ii(n){const e=tn;return tn=n,e}const fa={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Sn(n){if(!pa(n)||n.dirty){if(!n.producerMustRecompute(n)&&!gm(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function pm(n){n.dirty=!0,function fm(n){if(void 0===n.liveConsumerNode)return;const e=il;il=!0;try{for(const t of n.liveConsumerNode)t.dirty||pm(t)}finally{il=e}}(n),n.consumerMarkedDirty?.(n)}function Cu(n){return n&&(n.nextProducerIndex=0),Ii(n)}function zh(n,e){if(Ii(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(pa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)go(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function gm(n){Ji(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Sn(t),r!==t.version))return!0}return!1}function Gh(n){if(Ji(n),pa(n))for(let e=0;e<n.producerNode.length;e++)go(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function go(n,e){if(function Tu(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Ji(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)go(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ji(i),i.producerIndexOfThis[r]=e}}function pa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ji(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Wh=null;const ol=()=>{},BI=(()=>({...fa,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:ol}))();class jI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ei(){return Qh}function Qh(n){return n.type.prototype.ngOnChanges&&(n.setInput=HI),$I}function $I(){const n=al(this),e=n?.current;if(e){const t=n.previous;if(t===Ir)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function HI(n,e,t,r){const i=this.declaredInputs[t],s=al(n)||function zI(n,e){return n[Am]=e}(n,{previous:Ir,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new jI(u&&u.currentValue,e,a===Ir),n[r]=e}Ei.ngInherit=!0;const Am="__ngSimpleChanges__";function al(n){return n[Am]||null}const wi=function(n,e,t){};function Nt(n){for(;Array.isArray(n);)n=n[Xt];return n}function cl(n,e){return Nt(e[n])}function hr(n,e){return Nt(e[n.index])}function xs(n,e){return n.data[e]}function oi(n,e){const t=e[n];return Ur(t)?t:t[Xt]}function fs(n,e){return null==e?null:n[e]}function Tm(n){n[la]=0}function KI(n){1024&n[Ze]||(n[Ze]|=1024,Dm(n,1))}function ll(n){1024&n[Ze]&&(n[Ze]&=-1025,Dm(n,-1))}function Dm(n,e){let t=n[en];if(null===t)return;t[vu]+=e;let r=t;for(t=t[en];null!==t&&(1===e&&1===r[vu]||-1===e&&0===r[vu]);)t[vu]+=e,r=t,t=t[en]}const qe={lFrame:Ou(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function fl(){return qe.bindingsEnabled}function ue(){return qe.lFrame.lView}function It(){return qe.lFrame.tView}function rr(n){return qe.lFrame.contextLView=n,n[Dn]}function Ar(n){return qe.lFrame.contextLView=null,n}function ir(){let n=pl();for(;null!==n&&64===n.type;)n=n.parent;return n}function pl(){return qe.lFrame.currentTNode}function Zi(n,e){const t=qe.lFrame;t.currentTNode=n,t.isParent=e}function xu(){return qe.lFrame.isParent}function mo(){return qe.lFrame.bindingIndex++}function Xi(n){const e=qe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function xm(n,e){const t=qe.lFrame;t.bindingIndex=t.bindingRootIndex=n,rf(e)}function rf(n){qe.lFrame.currentDirectiveIndex=n}function Nu(n){qe.lFrame.currentQueryIndex=n}function XI(n){const e=n[De];return 2===e.type?e.declTNode:1===e.type?n[Wn]:null}function Om(n,e,t){if(t&ct.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&ct.Host||(i=XI(s),null===i||(s=s[Ps],10&i.type))););if(null===i)return!1;e=i,n=s}const r=qe.lFrame=km();return r.currentTNode=e,r.lView=n,!0}function ml(n){const e=km(),t=n[De];qe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function km(){const n=qe.lFrame,e=null===n?null:n.child;return null===e?Ou(n):e}function Ou(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Vm(){const n=qe.lFrame;return qe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Fm=Vm;function af(){const n=Vm();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Cr(){return qe.lFrame.selectedIndex}function _o(n){qe.lFrame.selectedIndex=n}function ln(){const n=qe.lFrame;return xs(n.tView,n.selectedIndex)}let Um=!0;function ku(){return Um}function ks(n){Um=n}function _l(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:g}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),null!=g&&(n.destroyHooks??=[]).push(t,g)}}function yl(n,e,t){Il(n,e,3,t)}function vl(n,e,t,r){(3&n[Ze])===t&&Il(n,e,t,r)}function Vu(n,e){let t=n[Ze];(3&t)===e&&(t&=8191,t+=1,n[Ze]=t)}function Il(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[la]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[la]+=65536),(a<s||-1==s)&&(cf(n,t,e,u),n[la]=(4294901760&n[la])+u+2),u++}function Bm(n,e){wi(4,n,e);const t=Ii(null);try{e.call(n)}finally{Ii(t),wi(5,n,e)}}function cf(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[Ze]>>13<n[la]>>16&&(3&n[Ze])===e&&(n[Ze]+=8192,Bm(a,s)):Bm(a,s)}const ga=-1;class ma{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function El(n){return n!==ga}function Fu(n){return 32767&n}function Lu(n,e){let t=function aE(n){return n>>16}(n),r=e;for(;t>0;)r=r[Ps],t--;return r}let ff=!0;function wl(n){const e=ff;return ff=n,e}const zm=255,cE=5;let lE=0;const pr={};function Al(n,e){const t=Gm(n,e);if(-1!==t)return t;const r=e[De];r.firstCreatePass&&(n.injectorIndex=e.length,Uu(r.data,n),Uu(e,null),Uu(r.blueprint,null));const i=_a(n,e),s=n.injectorIndex;if(El(i)){const o=Fu(i),a=Lu(i,e),u=a[De].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function Uu(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Gm(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function _a(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Bu(i),null===r)return ga;if(t++,i=i[Ps],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return ga}function pf(n,e,t){!function dE(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(_u)&&(r=t[_u]),null==r&&(r=t[_u]=lE++);const i=r&zm;e.data[n+(i>>cE)]|=1<<i}(n,e,t)}function Cl(n,e,t){if(t&ct.Optional||void 0!==n)return n;nt()}function qm(n,e,t,r){if(t&ct.Optional&&void 0===r&&(r=null),!(t&(ct.Self|ct.Host))){const i=n[Qi],s=Fr(void 0);try{return i?i.get(e,r,t&ct.Optional):Uc(e,r,t&ct.Optional)}finally{Fr(s)}}return Cl(r,0,t)}function Wm(n,e,t,r=ct.Default,i){if(null!==n){if(2048&e[Ze]&&!(r&ct.Self)){const o=function mE(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Ze]&&!(512&o[Ze]);){const a=Tl(s,o,t,r|ct.Self,pr);if(a!==pr)return a;let u=s.parent;if(!u){const d=o[el];if(d){const g=d.get(t,pr,r);if(g!==pr)return g}u=Bu(o),o=o[Ps]}s=u}return i}(n,e,t,r,pr);if(o!==pr)return o}const s=Tl(n,e,t,r,pr);if(s!==pr)return s}return qm(e,t,r,i)}function Tl(n,e,t,r,i){const s=function pE(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(_u)?n[_u]:void 0;return"number"==typeof e?e>=0?e&zm:mf:e}(t);if("function"==typeof s){if(!Om(e,n,r))return r&ct.Host?Cl(i,0,r):qm(e,t,r,i);try{let o;if(o=s(r),null!=o||r&ct.Optional)return o;nt()}finally{Fm()}}else if("number"==typeof s){let o=null,a=Gm(n,e),u=ga,d=r&ct.Host?e[bn][Wn]:null;for((-1===a||r&ct.SkipSelf)&&(u=-1===a?_a(n,e):e[a+8],u!==ga&&gf(r,!1)?(o=e[De],a=Fu(u),e=Lu(u,e)):a=-1);-1!==a;){const g=e[De];if(Km(s,a,g.data)){const m=fE(a,e,t,o,r,d);if(m!==pr)return m}u=e[a+8],u!==ga&&gf(r,e[De].data[a+8]===d)&&Km(s,a,e)?(o=g,a=Fu(u),e=Lu(u,e)):a=-1}}return i}function fE(n,e,t,r,i,s){const o=e[De],a=o.data[n+8],g=function Dl(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,g=s>>20,v=i?a+g:n.directiveEnd;for(let w=r?a:a+g;w<v;w++){const C=o[w];if(w<u&&t===C||w>=u&&C.type===t)return w}if(i){const w=o[u];if(w&&si(w)&&w.type===t)return u}return null}(a,o,t,null==r?da(a)&&ff:r!=o&&0!=(3&a.type),i&ct.Host&&s===a);return null!==g?yo(e,o,g,a):pr}function yo(n,e,t,r){let i=n[t];const s=e.data;if(function jm(n){return n instanceof ma}(i)){const o=i;o.resolving&&function Ae(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new de(-200,`Circular dependency in DI detected for ${n}${t}`)}(function K(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():x(n)}(s[t]));const a=wl(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Fr(o.injectImpl):null;Om(n,r,ct.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function sE(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Qh(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==d&&Fr(d),wl(a),o.resolving=!1,Fm()}}return i}function Km(n,e,t){return!!(t[e+(n>>cE)]&1<<n)}function gf(n,e){return!(n&ct.Self||n&ct.Host&&e)}class Tr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Wm(this._tNode,this._lView,e,$c(r),t)}}function mf(){return new Tr(ir(),ue())}function Bn(n){return Ss(()=>{const e=n.prototype.constructor,t=e[Lr]||_f(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Lr]||_f(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function _f(n){return Wi(n)?()=>{const e=_f(Ge(n));return e&&e()}:fo(n)}function Bu(n){const e=n[De],t=e.type;return 2===t?e.declTNode:1===t?n[Wn]:null}const va="__parameters__";function Ia(n,e,t){return Ss(()=>{const r=function yf(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,g){const m=u.hasOwnProperty(va)?u[va]:Object.defineProperty(u,va,{value:[]})[va];for(;m.length<=g;)m.push(null);return(m[g]=m[g]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function es(n,e){n.forEach(t=>Array.isArray(t)?es(t,e):e(t))}function Ef(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Sl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Nn(n,e,t){let r=Ea(n,e);return r>=0?n[1|r]=t:(r=~r,function Ym(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Rl(n,e){const t=Ea(n,e);if(t>=0)return n[1|t]}function Ea(n,e){return function Jm(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Hu=Ri(Ia("Optional"),8),Pl=Ri(Ia("SkipSelf"),4);function s_(n){return 128==(128&n.flags)}var wa=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(wa||{});const CE=new Map;let WU=0;const DE="__ngContext__";function jr(n,e){Ur(e)?(n[DE]=e[Iu],function QU(n){CE.set(n[Iu],n)}(e)):n[DE]=e}let bE;function SE(n,e){return bE(n,e)}function Nf(n){const e=n[en];return wr(e)?e[en]:e}function Hb(n){return Gb(n[uo])}function zb(n){return Gb(n[ii])}function Gb(n){for(;null!==n&&!wr(n);)n=n[ii];return n}function Ol(n,e,t,r,i){if(null!=r){let s,o=!1;wr(r)?s=r:Ur(r)&&(o=!0,r=r[Xt]);const a=Nt(r);0===n&&null!==t?null==i?Qb(e,t,a):zu(e,t,a,i||null,!0):1===n&&null!==t?zu(e,t,a,i||null,!0):2===n?function h_(n,e,t){const r=l_(n,e);r&&function pB(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function _B(n,e,t,r,i){const s=t[Yi];s!==Nt(t)&&Ol(e,n,r,s,i);for(let a=nr;a<t.length;a++){const u=t[a];kf(u[De],u,n,e,r,s)}}(e,n,s,t,i)}}function u_(n,e,t){return n.createElement(e,t)}function Wb(n,e){const t=n[ho],r=t.indexOf(e);ll(e),t.splice(r,1)}function c_(n,e){if(n.length<=nr)return;const t=nr+e,r=n[t];if(r){const i=r[co];null!==i&&i!==n&&Wb(i,r),e>0&&(n[t-1][ii]=r[ii]);const s=Sl(n,nr+e);!function oB(n,e){kf(n,e,e[Xe],2,null,null),e[Xt]=null,e[Wn]=null}(r[De],r);const o=s[vi];null!==o&&o.detachView(s[De]),r[en]=null,r[ii]=null,r[Ze]&=-129}return r}function PE(n,e){if(!(256&e[Ze])){const t=e[Xe];e[Eu]&&Gh(e[Eu]),e[lo]&&Gh(e[lo]),t.destroyNode&&kf(n,e,t,3,null,null),function cB(n){let e=n[uo];if(!e)return ME(n[De],n);for(;e;){let t=null;if(Ur(e))t=e[uo];else{const r=e[nr];r&&(t=r)}if(!t){for(;e&&!e[ii]&&e!==n;)Ur(e)&&ME(e[De],e),e=e[en];null===e&&(e=n),Ur(e)&&ME(e[De],e),t=e&&e[ii]}e=t}}(e)}}function ME(n,e){if(!(256&e[Ze])){e[Ze]&=-129,e[Ze]|=256,function fB(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof ma)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];wi(4,a,u);try{u.call(a)}finally{wi(5,a,u)}}else{wi(4,i,s);try{s.call(i)}finally{wi(5,i,s)}}}}}(n,e),function hB(n,e){const t=n.cleanup,r=e[ua];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[ua]=null);const i=e[Ms];if(null!==i){e[Ms]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[De].type&&e[Xe].destroy();const t=e[co];if(null!==t&&wr(e[en])){t!==e[en]&&Wb(t,e);const r=e[vi];null!==r&&r.detachView(n)}!function YU(n){CE.delete(n[Iu])}(e)}}function xE(n,e,t){return function Kb(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Xt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Ln.None||s===Ln.Emulated)return null}return hr(r,t)}}(n,e.parent,t)}function zu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Qb(n,e,t){n.appendChild(e,t)}function Yb(n,e,t,r,i){null!==r?zu(n,e,t,r,i):Qb(n,e,t)}function l_(n,e){return n.parentNode(e)}let NE,FE,p_,Xb=function Zb(n,e,t){return 40&n.type?hr(n,t):null};function d_(n,e,t,r){const i=xE(n,r,e),s=e[Xe],a=function Jb(n,e,t){return Xb(n,e,t)}(r.parent||e[Wn],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)Yb(s,i,t[u],a,!1);else Yb(s,i,t,a,!1);void 0!==NE&&NE(s,r,e,t,i)}function Of(n,e){if(null!==e){const t=e.type;if(3&t)return hr(e,n);if(4&t)return OE(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Of(n,r);{const i=n[e.index];return wr(i)?OE(-1,i):Nt(i)}}if(32&t)return SE(e,n)()||Nt(n[e.index]);{const r=tS(n,e);return null!==r?Array.isArray(r)?r[0]:Of(Nf(n[bn]),r):Of(n,e.next)}}return null}function tS(n,e){return null!==e?n[bn][Wn].projection[e.projection]:null}function OE(n,e){const t=nr+n+1;if(t<e.length){const r=e[t],i=r[De].firstChild;if(null!==i)return Of(r,i)}return e[Yi]}function kE(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&jr(Nt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)kE(n,e,t.child,r,i,s,!1),Ol(e,n,i,a,s);else if(32&u){const d=SE(t,r);let g;for(;g=d();)Ol(e,n,i,g,s);Ol(e,n,i,a,s)}else 16&u?rS(n,e,r,t,i,s):Ol(e,n,i,a,s);t=o?t.projectionNext:t.next}}function kf(n,e,t,r,i,s){kE(t,r,n.firstChild,e,i,s,!1)}function rS(n,e,t,r,i,s){const o=t[bn],u=o[Wn].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Ol(e,n,i,u[d],s);else{let d=u;const g=o[en];s_(r)&&(d.flags|=128),kE(n,e,d,g,i,s,!0)}}function iS(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function sS(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Gc(n,e,r),null!==i&&iS(n,e,i),null!==s&&function vB(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function uS(n){return function LE(){if(void 0===p_&&(p_=null,Lt.trustedTypes))try{p_=Lt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return p_}()?.createScriptURL(n)||n}class cS{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ls})`}}function Aa(n){return n instanceof cS?n.changingThisBreaksApplicationSecurity:n}function Vf(n,e){const t=function RB(n){return n instanceof cS&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ls})`)}return t===e}const NB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Fl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Fl||{});function Gu(n){const e=Lf();return e?e.sanitize(Fl.URL,n)||"":Vf(n,"URL")?Aa(n):function UE(n){return(n=String(n)).match(NB)?n:"unsafe:"+n}(x(n))}function mS(n){const e=Lf();if(e)return uS(e.sanitize(Fl.RESOURCE_URL,n)||"");if(Vf(n,"ResourceURL"))return uS(Aa(n));throw new de(904,!1)}function Lf(){const n=ue();return n&&n[ca].sanitizer}const Uf=new _e("ENVIRONMENT_INITIALIZER"),yS=new _e("INJECTOR",-1),vS=new _e("INJECTOR_DEF_TYPES");class HE{get(e,t=hu){if(t===hu){const r=new Error(`NullInjectorError: No provider for ${He(e)}!`);throw r.name="NullInjectorError",r}return t}}function qB(...n){return{\u0275providers:IS(0,n),\u0275fromNgModule:!0}}function IS(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return es(e,o=>{const a=o;m_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&ES(i,s),t}function ES(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];GE(i,s=>{e(s,r)})}}function m_(n,e,t,r){if(!(n=Ge(n)))return!1;let i=null,s=Fc(n);const o=!s&&yt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=Fc(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)m_(d,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{es(s.imports,g=>{m_(g,e,t,r)&&(d||=[],d.push(g))})}finally{}void 0!==d&&ES(d,e)}if(!a){const d=fo(i)||(()=>new i);e({provide:i,useFactory:d,deps:gt},i),e({provide:vS,useValue:i,multi:!0},i),e({provide:Uf,useValue:()=>me(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=n;GE(u,g=>{e(g,d)})}}}return i!==n&&void 0!==n.providers}function GE(n,e){for(let t of n)ia(t)&&(t=t.\u0275providers),Array.isArray(t)?GE(t,e):e(t)}const WB=$e({provide:String,useValue:$e});function qE(n){return null!==n&&"object"==typeof n&&WB in n}function qu(n){return"function"==typeof n}const WE=new _e("Set Injector scope."),__={},QB={};let KE;function y_(){return void 0===KE&&(KE=new HE),KE}class Ni{}class Ll extends Ni{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,YE(e,o=>this.processProvider(o)),this.records.set(yS,Ul(void 0,this)),i.has("environment")&&this.records.set(Ni,Ul(void 0,this));const s=this.records.get(WE);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(vS.multi,gt,ct.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=bs(this),r=Fr(void 0);try{return e()}finally{bs(t),Fr(r)}}get(e,t=hu,r=ct.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(yu))return e[yu](this);r=$c(r);const s=bs(this),o=Fr(void 0);try{if(!(r&ct.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function ej(n){return"function"==typeof n||"object"==typeof n&&n instanceof _e}(e)&&Vc(e);u=d&&this.injectableDefInScope(d)?Ul(QE(e),__):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&ct.Self?y_():this.parent).get(e,t=r&ct.Optional&&t===hu?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Ds]=a[Ds]||[]).unshift(He(e)),s)throw a;return function SI(n,e,t,r){const i=n[Ds];throw e[Si]&&i.unshift(e[Si]),n.message=function gu(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=He(e);if(Array.isArray(e))i=e.map(He).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):He(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Th,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Ds]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Fr(o),bs(s)}}resolveInjectorInitializers(){const e=bs(this),t=Fr(void 0);try{const i=this.get(Uf.multi,gt,ct.Self);for(const s of i)s()}finally{bs(e),Fr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(He(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(e){let t=qu(e=Ge(e))?e:Ge(e&&e.provide);const r=function JB(n){return qE(n)?Ul(void 0,n.useValue):Ul(CS(n),__)}(e);if(qu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Ul(void 0,__,!0),i.factory=()=>pu(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===__&&(t.value=QB,t.value=t.factory()),"object"==typeof t.value&&t.value&&function XB(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ge(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function QE(n){const e=Vc(n),t=null!==e?e.factory:fo(n);if(null!==t)return t;if(n instanceof _e)throw new de(204,!1);if(n instanceof Function)return function YB(n){const e=n.length;if(e>0)throw function Ao(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new de(204,!1);const t=function Wg(n){return n&&(n[lu]||n[ao])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new de(204,!1)}function CS(n,e,t){let r;if(qu(n)){const i=Ge(n);return fo(i)||QE(i)}if(qE(n))r=()=>Ge(n.useValue);else if(function AS(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...pu(n.deps||[]));else if(function wS(n){return!(!n||!n.useExisting)}(n))r=()=>me(Ge(n.useExisting));else{const i=Ge(n&&(n.useClass||n.provide));if(!function ZB(n){return!!n.deps}(n))return fo(i)||QE(i);r=()=>new i(...pu(n.deps))}return r}function Ul(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function YE(n,e){for(const t of n)Array.isArray(t)?YE(t,e):t&&ia(t)?YE(t.\u0275providers,e):e(t)}const v_=new _e("AppId",{providedIn:"root",factory:()=>tj}),tj="ng",TS=new _e("Platform Initializer"),Vs=new _e("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),DS=new _e("CSP nonce",{providedIn:"root",factory:()=>function Vl(){if(void 0!==FE)return FE;if(typeof document<"u")return document;throw new de(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let bS=(n,e,t)=>null;function iw(n,e,t=!1){return bS(n,e,t)}class dj{}class PS{}class fj{resolveComponentFactory(e){throw function hj(n){const e=Error(`No component factory found for ${He(n)}.`);return e.ngComponent=n,e}(e)}}let T_=(()=>{class n{static{this.NULL=new fj}}return n})();function pj(){return $l(ir(),ue())}function $l(n,e){return new Oi(hr(n,e))}let Oi=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=pj}}return n})();class xS{}let bo=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function mj(){const n=ue(),t=oi(ir().index,n);return(Ur(t)?t:n)[Xe]}()}}return n})(),_j=(()=>{class n{static{this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>null})}}return n})();class Hl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const NS=new Hl("16.2.12"),aw={};function FS(n,e=null,t=null,r){const i=LS(n,e,t,r);return i.resolveInjectorInitializers(),i}function LS(n,e=null,t=null,r,i=new Set){const s=[t||gt,qB(n)];return r=r||("object"==typeof n?void 0:He(n)),new Ll(s,e||y_(),r||null,i)}let ki=(()=>{class n{static{this.THROW_IF_NOT_FOUND=hu}static{this.NULL=new HE}static create(t,r){if(Array.isArray(t))return FS({name:""},r,t,"");{const i=t.name??"";return FS({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Fe({token:n,providedIn:"any",factory:()=>me(yS)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function cw(n){return n.ngOriginalError}class So{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&cw(e);for(;t&&cw(t);)t=cw(t);return t||null}}function lw(n){return e=>{setTimeout(n,void 0,e)}}const On=class Tj extends te{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=lw(s),i&&(i=lw(i)),o&&(o=lw(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ct&&e.add(a),a}};function BS(...n){}class Ut{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new On(!1),this.onMicrotaskEmpty=new On(!1),this.onStable=new On(!1),this.onError=new On(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Dj(){const n="function"==typeof Lt.requestAnimationFrame;let e=Lt[n?"requestAnimationFrame":"setTimeout"],t=Lt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Rj(n){const e=()=>{!function Sj(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Lt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,hw(n),n.isCheckStableRunning=!0,dw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),hw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function Mj(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return jS(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),$S(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return jS(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),$S(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,hw(n),dw(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ut.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(Ut.isInAngularZone())throw new de(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,bj,BS,BS);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const bj={};function dw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function hw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function jS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $S(n){n._nesting--,dw(n)}class Pj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new On,this.onMicrotaskEmpty=new On,this.onStable=new On,this.onError=new On}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const HS=new _e("",{providedIn:"root",factory:zS});function zS(){const n=be(Ut);let e=!0;return P(new dt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new dt(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Ut.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Ut.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(G()))}function Ro(n){return n instanceof Function?n():n}let fw=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new n})}}return n})();function $f(n){for(;n;){n[Ze]|=64;const e=Nf(n);if(jh(n)&&!e)return n;n=e}return null}const QS=new _e("",{providedIn:"root",factory:()=>!1});let S_=null;function XS(n,e){return n[e]??nR()}function eR(n,e){const t=nR();t.producerNode?.length&&(n[e]=S_,t.lView=n,S_=tR())}const jj={...fa,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{$f(n.lView)},lView:null};function tR(){return Object.create(jj)}function nR(){return S_??=tR(),S_}const it={};function Mt(n){rR(It(),ue(),Cr()+n,!1)}function rR(n,e,t,r){if(!r)if(3==(3&e[Ze])){const s=n.preOrderCheckHooks;null!==s&&yl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&vl(e,s,0,t)}_o(t)}function pe(n,e=ct.Default){const t=ue();return null===t?me(n,e):Wm(ir(),t,Ge(n),e)}function R_(n,e,t,r,i,s,o,a,u,d,g){const m=e.blueprint.slice();return m[Xt]=i,m[Ze]=140|r,(null!==d||n&&2048&n[Ze])&&(m[Ze]|=2048),Tm(m),m[en]=m[Ps]=n,m[Dn]=t,m[ca]=o||n&&n[ca],m[Xe]=a||n&&n[Xe],m[Qi]=u||n&&n[Qi]||null,m[Wn]=s,m[Iu]=function KU(){return WU++}(),m[Pi]=g,m[el]=d,m[bn]=2==e.type?n[bn]:m,m}function ql(n,e,t,r,i){let s=n.data[e];if(null===s)s=function pw(n,e,t,r,i){const s=pl(),o=xu(),u=n.data[e]=function Qj(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Os(){return null!==qe.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function Pm(){return qe.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Mu(){const n=qe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Zi(s,!0),s}function Hf(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function sR(n,e,t,r,i){const s=XS(e,Eu),o=Cr(),a=2&r;try{_o(-1),a&&e.length>mt&&rR(n,e,mt,!1),wi(a?2:0,i);const d=a?s:null,g=Cu(d);try{null!==d&&(d.dirty=!1),t(r,i)}finally{zh(d,g)}}finally{a&&null===e[Eu]&&eR(e,Eu),_o(o),wi(a?3:1,i)}}function gw(n,e,t){if(am(e)){const r=Ii(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Ii(r)}}}function mw(n,e,t){fl()&&(function n$(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;da(t)&&function c$(n,e,t){const r=hr(e,n),i=oR(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=P_(n,R_(n,i,null,o,r,e,null,n[ca].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Al(t,e),jr(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],d=yo(e,n,a,t);jr(d,e),null!==o&&l$(0,a-i,d,u,0,o),si(u)&&(oi(t.index,e)[Dn]=yo(e,n,a,t))}}(n,e,t,hr(t,e)),64==(64&t.flags)&&dR(n,e,t))}function _w(n,e,t=hr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function oR(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=yw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function yw(n,e,t,r,i,s,o,a,u,d,g){const m=mt+r,v=m+i,w=function Hj(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:it);return t}(m,v),C="function"==typeof d?d():d;return w[De]={type:n,blueprint:w,template:t,queries:null,viewQuery:a,declTNode:e,data:w.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:g}}let aR=n=>null;function uR(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?cR(t,e,i,s):r.hasOwnProperty(i)&&cR(t,e,r[i],s)}return t}function cR(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Vi(n,e,t,r,i,s,o,a){const u=hr(e,t);let g,d=e.inputs;!a&&null!=d&&(g=d[r])?(Aw(n,t,g,r,i),da(e)&&function Zj(n,e){const t=oi(e,n);16&t[Ze]||(t[Ze]|=64)}(t,e.index)):3&e.type&&(r=function Jj(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function vw(n,e,t,r){if(fl()){const i=null===r?null:{"":-1},s=function i$(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Qc(e,o.selectors,!1))if(r||(r=[]),si(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Iw(n,e,a.length)}else r.unshift(o),Iw(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&lR(n,e,t,o,i,a),i&&function s$(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new de(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=aa(t.mergedAttrs,t.attrs)}function lR(n,e,t,r,i,s){for(let d=0;d<r.length;d++)pf(Al(t,e),n,r[d].type);!function a$(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let d=0;d<r.length;d++){const g=r[d];g.providersResolver&&g.providersResolver(g)}let o=!1,a=!1,u=Hf(n,e,r.length,null);for(let d=0;d<r.length;d++){const g=r[d];t.mergedAttrs=aa(t.mergedAttrs,g.hostAttrs),u$(n,t,e,u,g),o$(u,g,i),null!==g.contentQueries&&(t.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(t.flags|=64);const m=g.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function Yj(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,d=null;for(let g=e.directiveStart;g<i;g++){const m=s[g],v=t?t.get(m):null,C=v?v.outputs:null;u=uR(m.inputs,g,u,v?v.inputs:null),d=uR(m.outputs,g,d,C);const D=null===u||null===o||Rh(e)?null:d$(u,g,o);a.push(D)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(n,t,s)}function dR(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function nf(){return qe.lFrame.currentDirectiveIndex}();try{_o(s);for(let a=r;a<i;a++){const u=n.data[a],d=e[a];rf(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&r$(u,d)}}finally{_o(-1),rf(o)}}function r$(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Iw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function o$(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;si(e)&&(t[""]=n)}}function u$(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=fo(i.type)),o=new ma(s,si(i),pe);n.blueprint[r]=o,t[r]=o,function e$(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function t$(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Hf(n,t,i.hostVars,it),i)}function Fs(n,e,t,r,i,s){const o=hr(n,e);!function Ew(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?x(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[Xe],o,s,n.value,t,r,i)}function l$(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)hR(r,t,o[a++],o[a++],o[a++])}function hR(n,e,t,r,i){const s=Ii(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{Ii(s)}}function d$(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function fR(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function pR(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Nu(t[r]),o.contentQueries(2,e[s],s)}}}function P_(n,e){return n[uo]?n[om][ii]=e:n[uo]=e,n[om]=e,e}function ww(n,e,t){Nu(0);const r=Ii(null);try{e(n,t)}finally{Ii(r)}}function yR(n,e){const t=n[Qi],r=t?t.get(So,null):null;r&&r.handleError(e)}function Aw(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];hR(n.data[o],e[o],r,a,i)}}function Po(n,e,t){const r=cl(e,n);!function qb(n,e,t){n.setValue(e,t)}(n[Xe],r,t)}function h$(n,e){const t=oi(e,n),r=t[De];!function f$(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Xt];null!==i&&null===t[Pi]&&(t[Pi]=iw(i,t[Qi])),Cw(r,t,t[Dn])}function Cw(n,e,t){ml(e);try{const r=n.viewQuery;null!==r&&ww(1,r,t);const i=n.template;null!==i&&sR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&pR(n,e),n.staticViewQueries&&ww(2,n.viewQuery,t);const s=n.components;null!==s&&function p$(n,e){for(let t=0;t<e.length;t++)h$(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ze]&=-5,af()}}let vR=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function UI(n,e,t){const r=Object.create(BI);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>pm(r),run:()=>{if(r.dirty=!1,r.hasRun&&!gm(r))return;r.hasRun=!0;const o=Cu(r);try{r.cleanupFn(),r.cleanupFn=ol,r.fn(i)}finally{zh(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new n})}}return n})();function M_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=tr(i,a):2==s&&(r=tr(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function zf(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Nt(s)),wr(s)&&IR(s,r);const o=t.type;if(8&o)zf(n,e,t.child,r);else if(32&o){const a=SE(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=tS(e,t);if(Array.isArray(a))r.push(...a);else{const u=Nf(e[bn]);zf(u[De],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function IR(n,e){for(let t=nr;t<n.length;t++){const r=n[t],i=r[De].firstChild;null!==i&&zf(r[De],r,i,e)}n[Yi]!==n[Xt]&&e.push(n[Yi])}function x_(n,e,t,r=!0){const i=e[ca],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{ER(n,e,n.template,t)}catch(u){throw r&&yR(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function ER(n,e,t,r){const i=e[Ze];if(256!=(256&i)){e[ca].effectManager?.flush(),ml(e);try{Tm(e),function Rm(n){return qe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&sR(n,e,t,2,r);const o=3==(3&i);if(o){const d=n.preOrderCheckHooks;null!==d&&yl(e,d,null)}else{const d=n.preOrderHooks;null!==d&&vl(e,d,0,null),Vu(e,0)}if(function _$(n){for(let e=Hb(n);null!==e;e=zb(e)){if(!e[nl])continue;const t=e[ho];for(let r=0;r<t.length;r++){KI(t[r])}}}(e),wR(e,2),null!==n.contentQueries&&pR(n,e),o){const d=n.contentCheckHooks;null!==d&&yl(e,d)}else{const d=n.contentHooks;null!==d&&vl(e,d,1),Vu(e,1)}!function $j(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=XS(e,lo);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)_o(~s);else{const o=s,a=t[++i],u=t[++i];xm(a,o),r.dirty=!1;const d=Cu(r);try{u(2,e[o])}finally{zh(r,d)}}}}finally{null===e[lo]&&eR(e,lo),_o(-1)}}(n,e);const a=n.components;null!==a&&CR(e,a,0);const u=n.viewQuery;if(null!==u&&ww(2,u,r),o){const d=n.viewCheckHooks;null!==d&&yl(e,d)}else{const d=n.viewHooks;null!==d&&vl(e,d,2),Vu(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Ze]&=-73,ll(e)}finally{af()}}}function wR(n,e){for(let t=Hb(n);null!==t;t=zb(t))for(let r=nr;r<t.length;r++)AR(t[r],e)}function y$(n,e,t){AR(oi(e,n),t)}function AR(n,e){if(!function WI(n){return 128==(128&n[Ze])}(n))return;const t=n[De],r=n[Ze];if(80&r&&0===e||1024&r||2===e)ER(t,n,t.template,n[Dn]);else if(n[vu]>0){wR(n,1);const i=t.components;null!==i&&CR(n,i,1)}}function CR(n,e,t){for(let r=0;r<e.length;r++)y$(n,e[r],t)}class Gf{get rootNodes(){const e=this._lView,t=e[De];return zf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Dn]}set context(e){this._lView[Dn]=e}get destroyed(){return 256==(256&this._lView[Ze])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[en];if(wr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(c_(e,r),Sl(t,r))}this._attachedToViewContainer=!1}PE(this._lView[De],this._lView)}onDestroy(e){!function dl(n,e){if(256==(256&n[Ze]))throw new de(911,!1);null===n[Ms]&&(n[Ms]=[]),n[Ms].push(e)}(this._lView,e)}markForCheck(){$f(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ze]&=-129}reattach(){this._lView[Ze]|=128}detectChanges(){x_(this._lView[De],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function uB(n,e){kf(n,e,e[Xe],2,null,null)}(this._lView[De],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=e}}class v$ extends Gf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;x_(e[De],e,e[Dn],!1)}checkNoChanges(){}get context(){return null}}class TR extends T_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=yt(e);return new qf(t,this.ngModule)}}function DR(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class E${constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=$c(r);const i=this.injector.get(e,aw,r);return i!==aw||t===aw?i:this.parentInjector.get(e,t,r)}}class qf extends PS{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=DR(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return DR(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Jc(n){return n.map(Oh).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Ni?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new E$(e,s):e,a=o.get(xS,null);if(null===a)throw new de(407,!1);const m={rendererFactory:a,sanitizer:o.get(_j,null),effectManager:o.get(vR,null),afterRenderEventManager:o.get(fw,null)},v=a.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",C=r?function zj(n,e,t,r){const s=r.get(QS,!1)||t===Ln.ShadowDom,o=n.selectRootElement(e,s);return function Gj(n){aR(n)}(o),o}(v,r,this.componentDef.encapsulation,o):u_(v,w,function I$(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(w)),z=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let F=null;null!==C&&(F=iw(C,o,!0));const q=yw(0,null,null,1,0,null,null,null,null,null,null),ae=R_(null,q,null,z,null,null,m,v,o,null,F);let ye,Ue;ml(ae);try{const V=this.componentDef;let b,O=null;V.findHostDirectiveDefs?(b=[],O=new Map,V.findHostDirectiveDefs(V,b,O),b.push(V)):b=[V];const L=function A$(n,e){const t=n[De],r=mt;return n[r]=e,ql(t,r,2,"#host",null)}(ae,C),j=function C$(n,e,t,r,i,s,o){const a=i[De];!function T$(n,e,t,r){for(const i of n)e.mergedAttrs=aa(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(M_(e,e.mergedAttrs,!0),null!==t&&sS(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=iw(e,i[Qi]));const d=s.rendererFactory.createRenderer(e,t);let g=16;t.signals?g=4096:t.onPush&&(g=64);const m=R_(i,oR(t),null,g,i[n.index],n,s,d,null,null,u);return a.firstCreatePass&&Iw(a,n,r.length-1),P_(i,m),i[n.index]=m}(L,C,V,b,ae,m,v);Ue=xs(q,mt),C&&function b$(n,e,t,r){if(r)Gc(n,t,["ng-version",NS.full]);else{const{attrs:i,classes:s}=function kh(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!ni(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Gc(n,t,i),s&&s.length>0&&iS(n,t,s.join(" "))}}(v,V,C,r),void 0!==t&&function S$(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Ue,this.ngContentSelectors,t),ye=function D$(n,e,t,r,i,s){const o=ir(),a=i[De],u=hr(o,i);lR(a,i,o,t,null,r);for(let g=0;g<t.length;g++)jr(yo(i,a,o.directiveStart+g,o),i);dR(a,i,o),u&&jr(u,i);const d=yo(i,a,o.directiveStart+o.componentOffset,o);if(n[Dn]=i[Dn]=d,null!==s)for(const g of s)g(d,e);return gw(a,o,n),d}(j,V,b,O,ae,[R$]),Cw(q,ae,null)}finally{af()}return new w$(this.componentType,ye,$l(Ue,ae),ae,Ue)}}class w$ extends dj{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new v$(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;Aw(s[De],s,i,e,t),this.previousInputValues.set(e,t),$f(oi(this._tNode.index,s))}}get injector(){return new Tr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function R$(){const n=ir();_l(ue()[De],n)}function Bt(n){let e=function bR(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(si(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new de(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=N_(n.inputs),o.inputTransforms=N_(n.inputTransforms),o.declaredInputs=N_(n.declaredInputs),o.outputs=N_(n.outputs);const a=i.hostBindings;a&&N$(n,a);const u=i.viewQuery,d=i.contentQueries;if(u&&M$(n,u),d&&x$(n,d),Tn(n.inputs,i.inputs),Tn(n.declaredInputs,i.declaredInputs),Tn(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Tn(o.inputTransforms,i.inputTransforms)),si(i)&&i.data.animation){const g=n.data;g.animation=(g.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Bt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function P$(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=aa(i.hostAttrs,t=aa(t,i.hostAttrs))}}(r)}function N_(n){return n===Ir?{}:n===gt?[]:n}function M$(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function x$(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function N$(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function MR(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function O_(n){return!!Tw(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Tw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function $r(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Wu(n,e,t,r){const i=$r(n,e,t);return $r(n,e+1,r)||i}function Us(n,e,t,r){const i=ue();return $r(i,mo(),e)&&(It(),Fs(ln(),i,n,e,t,r)),Us}function Kl(n,e,t,r){return $r(n,mo(),t)?e+x(t)+r:it}function Jl(n,e,t,r,i,s,o,a,u,d){const m=function ts(n,e,t,r,i,s){const o=Wu(n,e,t,r);return Wu(n,e+2,i,s)||o}(n,function Mi(){return qe.lFrame.bindingIndex}(),t,i,o,u);return Xi(4),m?e+x(t)+r+x(i)+s+x(o)+a+x(u)+d:it}function gs(n,e,t,r,i,s,o,a){const u=ue(),d=It(),g=n+mt,m=d.firstCreatePass?function iH(n,e,t,r,i,s,o,a,u){const d=e.consts,g=ql(e,n,4,o||null,fs(d,a));vw(e,t,g,fs(d,u)),_l(e,g);const m=g.tView=yw(2,g,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,g),m.queries=e.queries.embeddedTView(g)),g}(g,d,u,e,t,r,i,s,o):d.data[g];Zi(m,!1);const v=zR(d,u,m,n);ku()&&d_(d,u,v,m),jr(v,u),P_(u,u[g]=fR(v,u,v,m)),Bh(m)&&mw(d,u,m),null!=o&&_w(u,m,a)}let zR=function GR(n,e,t,r){return ks(!0),e[Xe].createComment("")};function Bs(n){return function Ns(n,e){return n[e]}(function ef(){return qe.lFrame.contextLView}(),mt+n)}function Rn(n,e,t){const r=ue();return $r(r,mo(),e)&&Vi(It(),ln(),r,n,e,r[Xe],t,!1),Rn}function Mw(n,e,t,r,i){const o=i?"class":"style";Aw(n,t,e.inputs[o],o,r)}function xe(n,e,t,r){const i=ue(),s=It(),o=mt+n,a=i[Xe],u=s.firstCreatePass?function uH(n,e,t,r,i,s){const o=e.consts,u=ql(e,n,2,r,fs(o,i));return vw(e,t,u,fs(o,s)),null!==u.attrs&&M_(u,u.attrs,!1),null!==u.mergedAttrs&&M_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],d=qR(s,i,u,a,e,n);i[o]=d;const g=Bh(u);return Zi(u,!0),sS(a,d,u),32!=(32&u.flags)&&ku()&&d_(s,i,d,u),0===function Pu(){return qe.lFrame.elementDepthCount}()&&jr(d,i),function YI(){qe.lFrame.elementDepthCount++}(),g&&(mw(s,i,u),gw(s,u,i)),null!==r&&_w(i,u),xe}function Le(){let n=ir();xu()?function Xh(){qe.lFrame.isParent=!1}():(n=n.parent,Zi(n,!1));const e=n;(function Jh(n){return qe.skipHydrationRootTNode===n})(e)&&function Sm(){qe.skipHydrationRootTNode=null}(),function JI(){qe.lFrame.elementDepthCount--}();const t=It();return t.firstCreatePass&&(_l(t,n),am(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function df(n){return 0!=(8&n.flags)}(e)&&Mw(t,e,ue(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Hm(n){return 0!=(16&n.flags)}(e)&&Mw(t,e,ue(),e.stylesWithoutHost,!1),Le}function sr(n,e,t,r){return xe(n,e,t,r),Le(),sr}let qR=(n,e,t,r,i,s)=>(ks(!0),u_(r,i,function Lm(){return qe.lFrame.currentNamespace}()));function Ca(){return ue()}function Jf(n){return!!n&&"function"==typeof n.then}function QR(n){return!!n&&"function"==typeof n.subscribe}function rn(n,e,t,r){const i=ue(),s=It(),o=ir();return function JR(n,e,t,r,i,s,o){const a=Bh(r),d=n.firstCreatePass&&function mR(n){return n.cleanup||(n.cleanup=[])}(n),g=e[Dn],m=function gR(n){return n[ua]||(n[ua]=[])}(e);let v=!0;if(3&r.type||o){const D=hr(r,e),M=o?o(D):D,z=m.length,F=o?ae=>o(Nt(ae[r.index])):r.index;let q=null;if(!o&&a&&(q=function pH(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[ua],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==q)(q.__ngLastListenerFn__||q).__ngNextListenerFn__=s,q.__ngLastListenerFn__=s,v=!1;else{s=XR(r,e,g,s,!1);const ae=t.listen(M,i,s);m.push(s,ae),d&&d.push(i,F,z,z+1)}}else s=XR(r,e,g,s,!1);const w=r.outputs;let C;if(v&&null!==w&&(C=w[i])){const D=C.length;if(D)for(let M=0;M<D;M+=2){const ye=e[C[M]][C[M+1]].subscribe(s),Ue=m.length;m.push(s,ye),d&&d.push(i,r.index,Ue,-(Ue+1))}}}(s,i,i[Xe],o,n,e,r),rn}function ZR(n,e,t,r){try{return wi(6,e,t),!1!==t(r)}catch(i){return yR(n,i),!1}finally{wi(7,e,t)}}function XR(n,e,t,r,i){return function s(o){if(o===Function)return r;$f(n.componentOffset>-1?oi(n.index,e):e);let u=ZR(e,t,r,o),d=s.__ngNextListenerFn__;for(;d;)u=ZR(e,t,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function or(n=1){return function eE(n){return(qe.lFrame.contextLView=function tE(n,e){for(;n>0;)e=e[Ps],n--;return e}(n,qe.lFrame.contextLView))[Dn]}(n)}function nd(n,e,t){return Ow(n,"",e,"",t),nd}function Ow(n,e,t,r,i){const s=ue(),o=Kl(s,e,t,r);return o!==it&&Vi(It(),ln(),s,n,o,s[Xe],i,!1),Ow}function U_(n,e){return n<<17|e<<2}function Ta(n){return n>>17&32767}function kw(n){return 2|n}function Ku(n){return(131068&n)>>2}function Vw(n,e){return-131069&n|e<<2}function Fw(n){return 1|n}function uP(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Ta(s):Ku(s),u=!1;for(;0!==a&&(!1===u||o);){const g=n[a+1];AH(n[a],e)&&(u=!0,n[a+1]=r?Fw(g):kw(g)),a=r?Ta(g):Ku(g)}u&&(n[t+1]=r?kw(s):Fw(s))}function AH(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ea(n,e)>=0}function Da(n,e){return function ms(n,e,t,r){const i=ue(),s=It(),o=Xi(2);s.firstUpdatePass&&function _P(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Cr()],o=function mP(n,e){return e>=n.expandoStartIndex}(n,t);(function EP(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function xH(n,e,t,r){const i=function sf(n){const e=qe.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Zf(t=Lw(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=Lw(i,n,e,t,r),null===s){let u=function NH(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Ku(r))return n[Ta(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=Lw(null,n,e,u[1],r),u=Zf(u,e.attrs,r),function OH(n,e,t,r){n[Ta(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function kH(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Zf(r,n[s].hostAttrs,t);return Zf(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function EH(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ta(o),u=Ku(o);n[r]=t;let g,d=!1;if(Array.isArray(t)?(g=t[1],(null===g||Ea(t,g)>0)&&(d=!0)):g=t,i)if(0!==u){const v=Ta(n[a+1]);n[r+1]=U_(v,a),0!==v&&(n[v+1]=Vw(n[v+1],r)),n[a+1]=function vH(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=U_(a,0),0!==a&&(n[a+1]=Vw(n[a+1],r)),a=r;else n[r+1]=U_(u,0),0===a?a=r:n[u+1]=Vw(n[u+1],r),u=r;d&&(n[r+1]=kw(n[r+1])),uP(n,g,r,!0),uP(n,g,r,!1),function wH(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Ea(s,e)>=0&&(t[r+1]=Fw(t[r+1]))}(e,g,n,r,s),o=U_(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==it&&$r(i,o,e)&&function vP(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,d=u[a+1],g=function IH(n){return 1==(1&n)}(d)?IP(u,e,t,i,Ku(d),o):void 0;B_(g)||(B_(s)||function yH(n){return 2==(2&n)}(d)&&(s=IP(u,null,t,i,a,o)),function yB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:wa.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=wa.Important),n.setStyle(t,r,i,s))}}(r,o,cl(Cr(),t),i,s))}(s,s.data[Cr()],i,i[Xe],n,i[o+1]=function UH(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=He(Aa(n)))),n}(e,t),r,o)}(n,e,null,!0),Da}function Lw(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Zf(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Zf(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Nn(n,o,!!t||e[++s]))}return void 0===n?null:n}function IP(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],d=Array.isArray(u),g=d?u[1]:u,m=null===g;let v=t[i+1];v===it&&(v=m?gt:void 0);let w=m?Rl(v,r):g===r?v:void 0;if(d&&!B_(w)&&(w=Rl(u,r)),B_(w)&&(a=w,o))return a;const C=n[i+1];i=o?Ta(C):Ku(C)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=Rl(u,r))}return a}function B_(n){return void 0!==n}function st(n,e=""){const t=ue(),r=It(),i=n+mt,s=r.firstCreatePass?ql(r,i,1,e,null):r.data[i],o=wP(r,t,s,e,n);t[i]=o,ku()&&d_(r,t,o,s),Zi(s,!1)}let wP=(n,e,t,r,i)=>(ks(!0),function a_(n,e){return n.createText(e)}(e[Xe],r));function ba(n,e,t){const r=ue(),i=Kl(r,n,e,t);return i!==it&&Po(r,Cr(),i),ba}function Uw(n,e,t,r,i,s,o,a,u){const d=ue(),g=Jl(d,n,e,t,r,i,s,o,a,u);return g!==it&&Po(d,Cr(),g),Uw}const sd="en-US";let zP=sd;function $w(n,e,t,r,i){if(n=Ge(n),Array.isArray(n))for(let s=0;s<n.length;s++)$w(n[s],e,t,r,i);else{const s=It(),o=ue(),a=ir();let u=qu(n)?n:Ge(n.provide);const d=CS(n),g=1048575&a.providerIndexes,m=a.directiveStart,v=a.providerIndexes>>20;if(qu(n)||!n.multi){const w=new ma(d,i,pe),C=zw(u,e,i?g:g+v,m);-1===C?(pf(Al(a,o),s,u),Hw(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(w),o.push(w)):(t[C]=w,o[C]=w)}else{const w=zw(u,e,g+v,m),C=zw(u,e,g,g+v),M=C>=0&&t[C];if(i&&!M||!i&&!(w>=0&&t[w])){pf(Al(a,o),s,u);const z=function oz(n,e,t,r,i){const s=new ma(n,t,pe);return s.multi=[],s.index=e,s.componentProviders=0,gM(s,i,r&&!t),s}(i?sz:iz,t.length,i,r,d);!i&&M&&(t[C].providerFactory=z),Hw(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(z),o.push(z)}else Hw(s,n,w>-1?w:C,gM(t[i?C:w],d,!i&&r));!i&&r&&M&&t[C].componentProviders++}}}function Hw(n,e,t,r){const i=qu(e),s=function KB(n){return!!n.useClass}(e);if(i||s){const u=(s?Ge(e.useClass):e).prototype.ngOnDestroy;if(u){const d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const g=d.indexOf(t);-1===g?d.push(t,[r,u]):d[g+1].push(r,u)}else d.push(t,u)}}}function gM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function zw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function iz(n,e,t,r){return Gw(this.multi,[])}function sz(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=yo(t,t[De],this.providerFactory.index,r);s=a.slice(0,o),Gw(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Gw(i,s);return s}function Gw(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function _n(n,e=[]){return t=>{t.providersResolver=(r,i)=>function rz(n,e,t){const r=It();if(r.firstCreatePass){const i=si(n);$w(t,r.data,r.blueprint,i,!0),$w(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Yu{}class mM{}class qw extends Yu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new TR(this);const i=Er(e);this._bootstrapComponents=Ro(i.bootstrap),this._r3Injector=LS(e,t,[{provide:Yu,useValue:this},{provide:T_,useValue:this.componentFactoryResolver},...r],He(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Ww extends mM{constructor(e){super(),this.moduleType=e}create(e){return new qw(this.moduleType,e,[])}}class _M extends Yu{constructor(e){super(),this.componentFactoryResolver=new TR(this),this.instance=null;const t=new Ll([...e.providers,{provide:Yu,useValue:this},{provide:T_,useValue:this.componentFactoryResolver}],e.parent||y_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Kw(n,e,t=null){return new _M({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let cz=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=IS(0,t.type),i=r.length>0?Kw([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Fe({token:n,providedIn:"environment",factory:()=>new n(me(Ni))})}}return n})();function yM(n){n.getStandaloneInjector=e=>e.get(cz).getOrCreateStandaloneInjector(n)}function Fz(n,e,t,r=!0){const i=e[De];if(function lB(n,e,t,r){const i=nr+r,s=t.length;r>0&&(t[i-1][ii]=e),r<s-nr?(e[ii]=t[i],Ef(t,nr+r,e)):(t.push(e),e[ii]=null),e[en]=t;const o=e[co];null!==o&&t!==o&&function dB(n,e){const t=n[ho];e[bn]!==e[en][en][bn]&&(n[nl]=!0),null===t?n[ho]=[e]:t.push(e)}(o,e);const a=e[vi];null!==a&&a.insertView(n),e[Ze]|=128}(i,e,n,t),r){const s=OE(t,n),o=e[Xe],a=l_(o,n[Yi]);null!==a&&function aB(n,e,t,r,i,s){r[Xt]=i,r[Wn]=e,kf(n,r,t,1,i,s)}(i,n[Wn],o,e,a,s)}}let Mo=(()=>{class n{static{this.__NG_ELEMENT_ID__=Bz}}return n})();const Lz=Mo,Uz=class extends Lz{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function Vz(n,e,t,r){const i=e.tView,a=R_(n,i,t,4096&n[Ze]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[co]=n[e.index];const d=n[vi];return null!==d&&(a[vi]=d.createEmbeddedView(i)),Cw(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Gf(i)}};function Bz(){return function G_(n,e){return 4&n.type?new Uz(e,n,$l(n,e)):null}(ir(),ue())}let ys=(()=>{class n{static{this.__NG_ELEMENT_ID__=qz}}return n})();function qz(){return function VM(n,e){let t;const r=e[n.index];return wr(r)?t=r:(t=fR(r,e,null,n),e[n.index]=t,P_(e,t)),FM(t,e,n,r),new OM(t,n,e)}(ir(),ue())}const Wz=ys,OM=class extends Wz{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return $l(this._hostTNode,this._hostLView)}get injector(){return new Tr(this._hostTNode,this._hostLView)}get parentInjector(){const e=_a(this._hostTNode,this._hostLView);if(El(e)){const t=Lu(e,this._hostLView),r=Fu(e);return new Tr(t[De].data[r+8],t)}return new Tr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=kM(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-nr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function wo(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,s=D.environmentInjector||D.ngModuleRef}const u=o?e:new qf(yt(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const M=(o?d:this.parentInjector).get(Ni,null);M&&(s=M)}yt(u.componentType??{});const w=u.create(d,i,null,s);return this.insertImpl(w.hostView,a,false),w}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function Yh(n){return wr(n[en])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[en],g=new OM(d,d[Wn],d[en]);g.detach(g.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return Fz(a,i,o,!r),e.attachToViewContainerRef(),Ef(Jw(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=kM(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=c_(this._lContainer,t);r&&(Sl(Jw(this._lContainer),t),PE(r[De],r))}detach(e){const t=this._adjustIndex(e,-1),r=c_(this._lContainer,t);return r&&null!=Sl(Jw(this._lContainer),t)?new Gf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function kM(n){return n[8]}function Jw(n){return n[8]||(n[8]=[])}let FM=function LM(n,e,t,r){if(n[Yi])return;let i;i=8&t.type?Nt(r):function Kz(n,e){const t=n[Xe],r=t.createComment(""),i=hr(e,n);return zu(t,l_(t,i),r,function gB(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Yi]=i};const uA=new _e("Application Initializer");let cA=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=be(uA,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Jf(s))t.push(s);else if(QR(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cx=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const xo=new _e("LocaleId",{providedIn:"root",factory:()=>be(xo,ct.Optional|ct.SkipSelf)||function TG(){return typeof $localize<"u"&&$localize.locale||sd}()});let K_=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new k(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class SG{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let lx=(()=>{class n{compileModuleSync(t){return new Ww(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Ro(Er(t).declarations).reduce((o,a)=>{const u=yt(a);return u&&o.push(new qf(u)),o},[]);return new SG(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const px=new _e(""),Y_=new _e("");let pA,hA=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,pA||(function YG(n){pA=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ut.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(me(Ut),me(fA),me(Y_))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})(),fA=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return pA?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Sa=null;const gx=new _e("AllowMultipleToken"),gA=new _e("PlatformDestroyListeners"),mA=new _e("appBootstrapListener");class _x{constructor(e,t){this.name=e,this.token=t}}function vx(n,e,t=[]){const r=`Platform: ${e}`,i=new _e(r);return(s=[])=>{let o=_A();if(!o||o.injector.get(gx,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function XG(n){if(Sa&&!Sa.get(gx,!1))throw new de(400,!1);(function mx(){!function kI(n){Wh=n}(()=>{throw new de(600,!1)})})(),Sa=n;const e=n.get(Ex);(function yx(n){n.get(TS,null)?.forEach(t=>t())})(n)}(function Ix(n=[],e){return ki.create({name:e,providers:[{provide:WE,useValue:"platform"},{provide:gA,useValue:new Set([()=>Sa=null])},...n]})}(a,r))}return function tq(n){const e=_A();if(!e)throw new de(401,!1);return e}()}}function _A(){return Sa?.get(Ex)??null}let Ex=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function nq(n="zone.js",e){return"noop"===n?new Pj:"zone.js"===n?new Ut(e):n}(r?.ngZone,function wx(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function uz(n,e,t){return new qw(n,e,t)}(t.moduleType,this.injector,function bx(n){return[{provide:Ut,useFactory:n},{provide:Uf,multi:!0,useFactory:()=>{const e=be(iq,{optional:!0});return()=>e.initialize()}},{provide:Dx,useFactory:rq},{provide:HS,useFactory:zS}]}(()=>i)),o=s.injector.get(So,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{J_(this._modules,s),a.unsubscribe()})}),function Ax(n,e,t){try{const r=t();return Jf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(cA);return a.runInitializers(),a.donePromise.then(()=>(function GP(n){_i(n,"Expected localeId to be defined"),"string"==typeof n&&(zP=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(xo,sd)||sd),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=Cx({},r);return function JG(n,e,t){const r=new Ww(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(ud);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new de(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(gA,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(me(ki))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function Cx(n,e){return Array.isArray(e)?e.reduce(Cx,n):{...n,...e}}let ud=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=be(Dx),this.zoneIsStable=be(HS),this.componentTypes=[],this.components=[],this.isStable=be(K_).hasPendingTasks.pipe(Te(t=>t?B(!1):this.zoneIsStable),zt(),G()),this._injector=be(Ni)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof PS;if(!this._injector.get(cA).done)throw!i&&function Rs(n){const e=yt(n)||Un(n)||qn(n);return null!==e&&e.standalone}(t),new de(405,!1);let o;o=i?t:this._injector.get(T_).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function ZG(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Yu),d=o.create(ki.NULL,[],r||o.selector,a),g=d.location.nativeElement,m=d.injector.get(px,null);return m?.registerApplication(g),d.onDestroy(()=>{this.detachView(d.hostView),J_(this.components,d),m?.unregisterApplication(g)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;J_(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(mA,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>J_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new de(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function J_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Dx=new _e("",{providedIn:"root",factory:()=>be(So).handleError.bind(void 0)});function rq(){const n=be(Ut),e=be(So);return t=>n.runOutsideAngular(()=>e.handleError(t))}let iq=(()=>{class n{constructor(){this.zone=be(Ut),this.applicationRef=be(ud)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let Z_=(()=>{class n{static{this.__NG_ELEMENT_ID__=oq}}return n})();function oq(n){return function aq(n,e,t){if(da(n)&&!t){const r=oi(n.index,e);return new Gf(r,r)}return 47&n.type?new Gf(e[bn],e):null}(ir(),ue(),16==(16&n))}class Nx{constructor(){}supports(e){return O_(e)}create(e){return new hq(e)}}const dq=(n,e)=>e;class hq{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||dq}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<kx(r,i,s)?t:r,a=kx(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,g=u-i;if(d!=g){for(let v=0;v<d;v++){const w=v<s.length?s[v]:s[v]=0,C=w+v;g<=C&&C<d&&(s[v]=w+1)}s[o.previousIndex]=g-d}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!O_(e))throw new de(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function B$(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new fq(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Ox),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ox),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class fq{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pq{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class Ox{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new pq,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kx(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class Vx{constructor(){}supports(e){return e instanceof Map||Tw(e)}create(){return new gq}}class gq{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Tw(e)))throw new de(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new mq(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class mq{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Fx(){return new ty([new Nx])}let ty=(()=>{class n{static{this.\u0275prov=Fe({token:n,providedIn:"root",factory:Fx})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Fx()),deps:[[n,new Pl,new Hu]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new de(901,!1)}}return n})();function Lx(){return new up([new Vx])}let up=(()=>{class n{static{this.\u0275prov=Fe({token:n,providedIn:"root",factory:Lx})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Lx()),deps:[[n,new Pl,new Hu]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new de(901,!1)}}return n})();const vq=vx(null,"core",[]);let Iq=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(me(ud))}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({})}}return n})();function cd(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let AA=null;function Ra(){return AA}class Oq{}const Fi=new _e("DocumentToken");let CA=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:function(){return be(Vq)},providedIn:"platform"})}}return n})();const kq=new _e("Location Initialized");let Vq=(()=>{class n extends CA{constructor(){super(),this._doc=be(Fi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ra().getBaseHref(this._doc)}onPopState(t){const r=Ra().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Ra().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function TA(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Wx(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function No(n){return n&&"?"!==n[0]?"?"+n:n}let Zu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:function(){return be(Qx)},providedIn:"root"})}}return n})();const Kx=new _e("appBaseHref");let Qx=(()=>{class n extends Zu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??be(Fi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return TA(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+No(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+No(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+No(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(me(CA),me(Kx,8))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Fq=(()=>{class n extends Zu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=TA(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+No(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+No(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(me(CA),me(Kx,8))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})(),DA=(()=>{class n{constructor(t){this._subject=new On,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Bq(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Wx(Yx(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+No(r))}normalize(t){return n.stripTrailingSlash(function Uq(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Yx(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+No(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+No(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=No}static{this.joinWithSlash=TA}static{this.stripTrailingSlash=Wx}static{this.\u0275fac=function(r){return new(r||n)(me(Zu))}}static{this.\u0275prov=Fe({token:n,factory:function(){return function Lq(){return new DA(me(Zu))}()},providedIn:"root"})}}return n})();function Yx(n){return n.replace(/\/index.html$/,"")}function sN(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class D3{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let uN=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new D3(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),cN(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{cN(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(pe(ys),pe(Mo),pe(ty))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function cN(n,e){n.context.$implicit=e.item}let fy=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new b3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){lN("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){lN("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(pe(ys),pe(Mo))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class b3{constructor(){this.$implicit=null,this.ngIf=null}}function lN(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${He(e)}'.`)}let hN=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:wa.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(pe(Oi),pe(up),pe(bo))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),X3=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({})}}return n})();function py(n){return"server"===n}let r6=(()=>{class n{static{this.\u0275prov=Fe({token:n,providedIn:"root",factory:()=>new i6(me(Fi),window)})}}return n})();class i6{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function s6(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class gN{}class S6 extends Oq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class HA extends S6{static makeCurrent(){!function Nq(n){AA||(AA=n)}(new HA)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function R6(){return hp=hp||document.querySelector("base"),hp?hp.getAttribute("href"):null}();return null==t?null:function P6(n){_y=_y||document.createElement("a"),_y.setAttribute("href",n);const e=_y.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){hp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sN(document.cookie,e)}}let _y,hp=null,x6=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();const zA=new _e("EventManagerPlugins");let IN=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new de(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(me(zA),me(Ut))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();class EN{constructor(e){this._doc=e}}const GA="ng-app-id";let wN=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=py(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${GA}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(GA),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(GA,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(me(Fi),me(v_),me(DS,8),me(Vs))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();const qA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},WA=/%COMP%/g,V6=new _e("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function CN(n,e){return e.map(t=>t.replace(WA,n))}let TN=(()=>{class n{constructor(t,r,i,s,o,a,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=py(a),this.defaultRenderer=new KA(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ln.ShadowDom&&(r={...r,encapsulation:Ln.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof bN?i.applyToHost(t):i instanceof QA&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Ln.Emulated:s=new bN(u,d,r,this.appId,g,o,a,m);break;case Ln.ShadowDom:return new B6(u,d,t,r,o,a,this.nonce,m);default:s=new QA(u,d,r,g,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(me(IN),me(wN),me(v_),me(V6),me(Fi),me(Vs),me(Ut),me(DS))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();class KA{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(qA[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(DN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(DN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new de(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=qA[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=qA[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(wa.DashCase|wa.Important)?e.style.setProperty(t,r,i&wa.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&wa.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Ra().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function DN(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class B6 extends KA{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=CN(i.id,i.styles);for(const g of d){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=g,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class QA extends KA{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?CN(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class bN extends QA{constructor(e,t,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,t,r,s,o,a,u,d),this.contentAttr=function F6(n){return"_ngcontent-%COMP%".replace(WA,n)}(d),this.hostAttr=function L6(n){return"_nghost-%COMP%".replace(WA,n)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let j6=(()=>{class n extends EN{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(me(Fi))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();const SN=["alt","control","meta","shift"],$6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},H6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let z6=(()=>{class n extends EN{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ra().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),SN.forEach(d=>{const g=r.indexOf(d);g>-1&&(r.splice(g,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=$6[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),SN.forEach(o=>{o!==i&&(0,H6[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(me(Fi))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();const K6=vx(vq,"browser",[{provide:Vs,useValue:"browser"},{provide:TS,useValue:function G6(){HA.makeCurrent()},multi:!0},{provide:Fi,useFactory:function W6(){return function AB(n){FE=n}(document),document},deps:[]}]),Q6=new _e(""),MN=[{provide:Y_,useClass:class M6{addToWindow(e){Lt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new de(5103,!1);return s},Lt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Lt.getAllAngularRootElements=()=>e.getAllRootElements(),Lt.frameworkStabilizers||(Lt.frameworkStabilizers=[]),Lt.frameworkStabilizers.push(r=>{const i=Lt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Ra().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:px,useClass:hA,deps:[Ut,fA,Y_]},{provide:hA,useClass:hA,deps:[Ut,fA,Y_]}],xN=[{provide:WE,useValue:"root"},{provide:So,useFactory:function q6(){return new So},deps:[]},{provide:zA,useClass:j6,multi:!0,deps:[Fi,Ut,Vs]},{provide:zA,useClass:z6,multi:!0,deps:[Fi]},TN,wN,IN,{provide:xS,useExisting:TN},{provide:gN,useClass:x6,deps:[]},[]];let Y6=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:v_,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(me(Q6,12))}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({providers:[...xN,...MN],imports:[X3,Iq]})}}return n})(),NN=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(me(Fi))}}static{this.\u0275prov=Fe({token:n,factory:function(r){let i=null;return i=r?new r:function Z6(){return new NN(me(Fi))}(),i},providedIn:"root"})}}return n})();typeof window<"u"&&window;const{isArray:i9}=Array,{getPrototypeOf:s9,prototype:o9,keys:a9}=Object;function FN(n){if(1===n.length){const e=n[0];if(i9(e))return{args:e,keys:null};if(function u9(n){return n&&"object"==typeof n&&s9(n)===o9}(e)){const t=a9(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:c9}=Array;function LN(n){return ke(e=>function l9(n,e){return c9(e)?n(...e):n(e)}(n,e))}function UN(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function JA(...n){const e=Ts(n),t=io(n),{args:r,keys:i}=FN(n);if(0===r.length)return S([],e);const s=new dt(function d9(n,e,t=qt){return r=>{BN(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)BN(e,()=>{const d=S(n[u],e);let g=!1;d.subscribe(fe(r,m=>{s[u]=m,g||(g=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>UN(i,o):qt));return t?s.pipe(LN(t)):s}function BN(n,e,t){n?Pn(t,n,e):e()}const yy=We(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ZA(...n){return function h9(){return Gi(1)}()(S(n,Ts(n)))}function jN(n){return new dt(e=>{zn(n()).subscribe(e)})}function fp(n,e){const t=T(n)?n:()=>n,r=i=>i.error(t());return new dt(e?i=>e.schedule(r,0,i):r)}function XA(){return ne((n,e)=>{let t=null;n._refCount++;const r=fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class $N extends dt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ie(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ct;const t=this.getSubject();e.add(this.source.subscribe(fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ct.EMPTY)}return e}refCount(){return XA()(this)}}function dd(n){return n<=0?()=>Cn:ne((e,t)=>{let r=0;e.subscribe(fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function vy(...n){const e=Ts(n);return ne((t,r)=>{(e?ZA(n,t,e):ZA(n,t)).subscribe(r)})}function is(n,e){return ne((t,r)=>{let i=0;t.subscribe(fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Iy(n){return ne((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function HN(n=f9){return ne((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function f9(){return new yy}function Ma(n,e){const t=arguments.length>=2;return r=>r.pipe(n?is((i,s)=>n(i,s,r)):qt,dd(1),t?Iy(e):HN(()=>new yy))}function hd(n,e){return T(e)?An(n,e,1):An(n,1)}function Dr(n,e,t){const r=T(n)||e||t?{next:n,error:e,complete:t}:n;return r?ne((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(fe(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):qt}function Xu(n){return ne((e,t)=>{let s,r=null,i=!1;r=e.subscribe(fe(t,void 0,void 0,o=>{s=zn(n(o,Xu(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Ey(n,e){return ne(function p9(n,e,t,r,i){return(s,o)=>{let a=t,u=e,d=0;s.subscribe(fe(o,g=>{const m=d++;u=a?n(u,g,m):(a=!0,g),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function eC(n){return n<=0?()=>Cn:ne((e,t)=>{let r=[];e.subscribe(fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function pp(n){return ne((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const at="primary",gp=Symbol("RouteTitle");class y9{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function fd(n){return new y9(n)}function v9(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Hs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!zN(n[i],e[i]))return!1;return!0}function zN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function GN(n){return n.length>0?n[n.length-1]:null}function xa(n){return function r9(n){return!!n&&(n instanceof dt||T(n.lift)&&T(n.subscribe))}(n)?n:Jf(n)?S(Promise.resolve(n)):B(n)}const E9={exact:function KN(n,e,t){if(!ec(n.segments,e.segments)||!wy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!KN(n.children[r],e.children[r],t))return!1;return!0},subset:QN},qN={exact:function w9(n,e){return Hs(n,e)},subset:function A9(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zN(n[t],e[t]))},ignored:()=>!0};function WN(n,e,t){return E9[t.paths](n.root,e.root,t.matrixParams)&&qN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function QN(n,e,t){return YN(n,e,e.segments,t)}function YN(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ec(i,t)||e.hasChildren()||!wy(i,t,r))}if(n.segments.length===t.length){if(!ec(n.segments,t)||!wy(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!QN(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ec(n.segments,i)&&wy(n.segments,i,r)&&n.children[at])&&YN(n.children[at],e,s,r)}}function wy(n,e,t){return e.every((r,i)=>qN[t](n[i].parameters,r.parameters))}class pd{constructor(e=new jt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fd(this.queryParams)),this._queryParamMap}toString(){return D9.serialize(this)}}class jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ay(this)}}class mp{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=fd(this.parameters)),this._parameterMap}toString(){return XN(this)}}function ec(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let _p=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:function(){return new tC},providedIn:"root"})}}return n})();class tC{parse(e){const t=new F9(e);return new pd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${yp(e.root,!0)}`,r=function R9(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Cy(t)}=${Cy(i)}`).join("&"):`${Cy(t)}=${Cy(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function b9(n){return encodeURI(n)}(e.fragment)}`:""}`}}const D9=new tC;function Ay(n){return n.segments.map(e=>XN(e)).join("/")}function yp(n,e){if(!n.hasChildren())return Ay(n);if(e){const t=n.children[at]?yp(n.children[at],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==at&&r.push(`${i}:${yp(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function T9(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===at&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==at&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===at?[yp(n.children[at],!1)]:[`${i}:${yp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[at]?`${Ay(n)}/${t[0]}`:`${Ay(n)}/(${t.join("//")})`}}function JN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cy(n){return JN(n).replace(/%3B/gi,";")}function nC(n){return JN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ty(n){return decodeURIComponent(n)}function ZN(n){return Ty(n.replace(/\+/g,"%20"))}function XN(n){return`${nC(n.path)}${function S9(n){return Object.keys(n).map(e=>`;${nC(e)}=${nC(n[e])}`).join("")}(n.parameters)}`}const P9=/^[^\/()?;#]+/;function rC(n){const e=n.match(P9);return e?e[0]:""}const M9=/^[^\/()?;=#]+/,N9=/^[^=?&#]+/,k9=/^[^&#]+/;class F9{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jt([],{}):new jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[at]=new jt(e,t)),r}parseSegment(){const e=rC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(e),new mp(Ty(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function x9(n){const e=n.match(M9);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=rC(this.remaining);i&&(r=i,this.capture(r))}e[Ty(t)]=Ty(r)}parseQueryParam(e){const t=function O9(n){const e=n.match(N9);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function V9(n){const e=n.match(k9);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=ZN(t),s=ZN(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=rC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new de(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=at);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[at]:new jt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new de(4011,!1)}}function eO(n){return n.segments.length>0?new jt([],{[at]:n}):n}function tO(n){const e={};for(const r of Object.keys(n.children)){const s=tO(n.children[r]);if(r===at&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function L9(n){if(1===n.numberOfChildren&&n.children[at]){const e=n.children[at];return new jt(n.segments.concat(e.segments),e.children)}return n}(new jt(n.segments,e))}function tc(n){return n instanceof pd}function nO(n){let e;const i=eO(function t(s){const o={};for(const u of s.children){const d=t(u);o[u.outlet]=d}const a=new jt(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function rO(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return iC(i,i,i,t,r);const s=function B9(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new sO(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new sO(t,e,r)}(e);if(s.toRoot())return iC(i,i,new jt([],{}),t,r);const o=function j9(n,e,t){if(n.isAbsolute)return new by(e,!0,0);if(!t)return new by(e,!1,NaN);if(null===t.parent)return new by(t,!0,0);const r=Dy(n.commands[0])?0:1;return function $9(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new de(4005,!1);i=r.segments.length}return new by(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Ip(o.segmentGroup,o.index,s.commands):oO(o.segmentGroup,o.index,s.commands);return iC(i,o.segmentGroup,a,t,r)}function Dy(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function vp(n){return"object"==typeof n&&null!=n&&n.outlets}function iC(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(g=>`${g}`):`${d}`}),o=n===e?t:iO(n,e,t);const a=eO(tO(o));return new pd(a,s,i)}function iO(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:iO(s,e,t)}),new jt(n.segments,r)}class sO{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Dy(r[0]))throw new de(4003,!1);const i=r.find(vp);if(i&&i!==GN(r))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class by{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function oO(n,e,t){if(n||(n=new jt([],{})),0===n.segments.length&&n.hasChildren())return Ip(n,e,t);const r=function z9(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(vp(a))break;const u=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!uO(u,d,o))return s;r+=2}else{if(!uO(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new jt(n.segments.slice(0,r.pathIndex),{});return s.children[at]=new jt(n.segments.slice(r.pathIndex),n.children),Ip(s,0,i)}return r.match&&0===i.length?new jt(n.segments,{}):r.match&&!n.hasChildren()?sC(n,e,t):r.match?Ip(n,0,i):sC(n,e,t)}function Ip(n,e,t){if(0===t.length)return new jt(n.segments,{});{const r=function H9(n){return vp(n[0])?n[0].outlets:{[at]:n}}(t),i={};if(Object.keys(r).some(s=>s!==at)&&n.children[at]&&1===n.numberOfChildren&&0===n.children[at].segments.length){const s=Ip(n.children[at],e,t);return new jt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=oO(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new jt(n.segments,i)}}function sC(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(vp(s)){const u=G9(s.outlets);return new jt(r,u)}if(0===i&&Dy(t[0])){r.push(new mp(n.segments[e].path,aO(t[0]))),i++;continue}const o=vp(s)?s.outlets[at]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Dy(a)?(r.push(new mp(o,aO(a))),i+=2):(r.push(new mp(o,{})),i++)}return new jt(r,{})}function G9(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=sC(new jt([],{}),0,r))}),e}function aO(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function uO(n,e,t){return n==t.path&&Hs(e,t.parameters)}const Ep="imperative";class zs{constructor(e,t){this.id=e,this.url=t}}class Sy extends zs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Na extends zs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wp extends zs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class gd extends zs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Ry extends zs{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cO extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class q9 extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W9 extends zs{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class K9 extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q9 extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y9{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class J9{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Z9{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class X9{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class e5{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t5{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lO{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class oC{}class aC{constructor(e){this.url=e}}class n5{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ap,this.attachRef=null}}let Ap=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new n5,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class dO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=uC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=uC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cC(e,this._root).map(t=>t.value)}}function uC(n,e){if(n===e.value)return e;for(const t of e.children){const r=uC(n,t);if(r)return r}return null}function cC(n,e){if(n===e.value)return[e];for(const t of e.children){const r=cC(n,t);if(r.length)return r.unshift(e),r}return[]}class Vo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function md(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class hO extends dO{constructor(e,t){super(e),this.snapshot=t,lC(this,e)}toString(){return this.snapshot.toString()}}function fO(n,e){const t=function r5(n,e){const o=new Py([],{},{},"",{},at,e,null,{});return new gO("",new Vo(o,[]))}(0,e),r=new k([new mp("",{})]),i=new k({}),s=new k({}),o=new k({}),a=new k(""),u=new _d(r,i,o,a,s,at,e,t.root);return u.snapshot=t.root,new hO(new Vo(u,[]),t)}class _d{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ke(d=>d[gp]))??B(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ke(e=>fd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ke(e=>fd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pO(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function i5(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Py{get title(){return this.data?.[gp]}constructor(e,t,r,i,s,o,a,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gO extends dO{constructor(e,t){super(t),this.url=e,lC(this,t)}toString(){return mO(this._root)}}function lC(n,e){e.value._routerState=n,e.children.forEach(t=>lC(n,t))}function mO(n){const e=n.children.length>0?` { ${n.children.map(mO).join(", ")} } `:"";return`${n.value}${e}`}function dC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hs(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Hs(e.params,t.params)||n.paramsSubject.next(t.params),function I9(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Hs(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function hC(n,e){const t=Hs(n.params,e.params)&&function C9(n,e){return ec(n,e)&&n.every((t,r)=>Hs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||hC(n.parent,e.parent))}let fC=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=at,this.activateEvents=new On,this.deactivateEvents=new On,this.attachEvents=new On,this.detachEvents=new On,this.parentContexts=be(Ap),this.location=be(ys),this.changeDetector=be(Z_),this.environmentInjector=be(Ni),this.inputBinder=be(My,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new s5(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ei]})}}return n})();class s5{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===_d?this.route:e===Ap?this.childContexts:this.parent.get(e,t)}}const My=new _e("");let _O=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=JA([r.queryParams,r.params,r.data]).pipe(Te(([s,o,a],u)=>(a={...s,...o,...a},0===u?B(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function xq(n){const e=yt(n);if(!e)return null;const t=new qf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();function Cp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function a5(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Cp(n,r,i);return Cp(n,r)})}(n,e,t);return new Vo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Cp(n,a)),o}}const r=function u5(n){return new _d(new k(n.url),new k(n.params),new k(n.queryParams),new k(n.fragment),new k(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Cp(n,s));return new Vo(r,i)}}const pC="ngNavigationCancelingError";function yO(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=tc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=vO(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function vO(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[pC]=!0,r.cancellationCode=e,t&&(r.url=t),r}function IO(n){return n&&n[pC]}let EO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=yi({type:n,selectors:[["ng-component"]],standalone:!0,features:[yM],decls:1,vars:0,template:function(r,i){1&r&&sr(0,"router-outlet")},dependencies:[fC],encapsulation:2})}}return n})();function gC(n){const e=n.children&&n.children.map(gC),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==at&&(t.component=EO),t}function Es(n){return n.outlet||at}function Tp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class m5{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),dC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=md(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=md(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=md(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=md(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new t5(s.value.snapshot))}),e.children.length&&this.forwardEvent(new X9(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(dC(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),dC(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Tp(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class wO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class xy{constructor(e,t){this.component=e,this.route=t}}function _5(n,e,t){const r=n._root;return Dp(r,e?e._root:null,t,[r.value])}function yd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function TI(n){return null!==Vc(n)}(n)?e.get(n):n:r}function Dp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=md(e);return n.children.forEach(o=>{(function v5(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function I5(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ec(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ec(n.url,e.url)||!Hs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hC(n,e)||!Hs(n.queryParams,e.queryParams);default:return!hC(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new wO(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Dp(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xy(a.outlet.component,o))}else o&&bp(e,a,i),i.canActivateChecks.push(new wO(r)),Dp(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>bp(a,t.getContext(o),i)),i}function bp(n,e,t){const r=md(n),i=n.value;Object.entries(r).forEach(([s,o])=>{bp(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new xy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Sp(n){return"function"==typeof n}function AO(n){return n instanceof yy||"EmptyError"===n?.name}const Ny=Symbol("INITIAL_VALUE");function vd(){return Te(n=>JA(n.map(e=>e.pipe(dd(1),vy(Ny)))).pipe(ke(e=>{for(const t of e)if(!0!==t){if(t===Ny)return Ny;if(!1===t||t instanceof pd)return t}return!0}),is(e=>e!==Ny),dd(1)))}function CO(n){return function Mr(...n){return gi(n)}(Dr(e=>{if(tc(e))throw yO(0,e)}),ke(e=>!0===e))}class Oy{constructor(e){this.segmentGroup=e||null}}class TO{constructor(e){this.urlTree=e}}function Id(n){return fp(new Oy(n))}function DO(n){return fp(new TO(n))}class B5{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new de(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return B(r);if(i.numberOfChildren>1||!i.children[at])return fp(new de(4e3,!1));i=i.children[at]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new pd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new jt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new de(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const mC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function j5(n,e,t,r,i){const s=_C(n,e,t);return s.matched?(r=function l5(n,e){return n.providers&&!n._injector&&(n._injector=Kw(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function F5(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?B(i.map(o=>{const a=yd(o,n);return xa(function D5(n){return n&&Sp(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(vd(),CO()):B(!0)}(r,e,t).pipe(ke(o=>!0===o?s:{...mC}))):B(s)}function _C(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...mC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||v9)(t,n,e);if(!i)return{...mC};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function bO(n,e,t,r){return t.length>0&&function z5(n,e,t){return t.some(r=>ky(n,e,r)&&Es(r)!==at)}(n,t,r)?{segmentGroup:new jt(e,H5(r,new jt(t,n.children))),slicedSegments:[]}:0===t.length&&function G5(n,e,t){return t.some(r=>ky(n,e,r))}(n,t,r)?{segmentGroup:new jt(n.segments,$5(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new jt(n.segments,n.children),slicedSegments:t}}function $5(n,e,t,r,i){const s={};for(const o of r)if(ky(n,t,o)&&!i[Es(o)]){const a=new jt([],{});s[Es(o)]=a}return{...i,...s}}function H5(n,e){const t={};t[at]=e;for(const r of n)if(""===r.path&&Es(r)!==at){const i=new jt([],{});t[Es(r)]=i}return t}function ky(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Q5{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new B5(this.urlSerializer,this.urlTree)}noMatchError(e){return new de(4002,!1)}recognize(){const e=bO(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,at).pipe(Xu(t=>{if(t instanceof TO)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Oy?this.noMatchError(t):t}),ke(t=>{const r=new Py([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},at,this.rootComponentType,null,{}),i=new Vo(r,t),s=new gO("",i),o=function U9(n,e,t=null,r=null){return rO(nO(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,at).pipe(Xu(r=>{throw r instanceof Oy?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=pO(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return S(i).pipe(hd(s=>{const o=r.children[s],a=function p5(n,e){const t=n.filter(r=>Es(r)===e);return t.push(...n.filter(r=>Es(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),Ey((s,o)=>(s.push(...o),s)),Iy(null),function g9(n,e){const t=arguments.length>=2;return r=>r.pipe(n?is((i,s)=>n(i,s,r)):qt,eC(1),t?Iy(e):HN(()=>new yy))}(),An(s=>{if(null===s)return Id(r);const o=SO(s);return function Y5(n){n.sort((e,t)=>e.value.outlet===at?-1:t.value.outlet===at?1:e.value.outlet.localeCompare(t.value.outlet))}(o),B(o)}))}processSegment(e,t,r,i,s,o){return S(t).pipe(hd(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Xu(u=>{if(u instanceof Oy)return B(null);throw u}))),Ma(a=>!!a),Xu(a=>{if(AO(a))return function W5(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?B([]):Id(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function q5(n,e,t,r){return!!(Es(n)===r||r!==at&&ky(e,t,n))&&("**"===n.path||_C(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Id(i):Id(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?DO(s):this.applyRedirects.lineralizeSegments(r,s).pipe(An(o=>{const a=new jt(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:g}=_C(t,i,s);if(!a)return Id(t);const m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,g);return i.redirectTo.startsWith("/")?DO(m):this.applyRedirects.lineralizeSegments(i,m).pipe(An(v=>this.processSegment(e,r,t,v.concat(d),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?GN(i).parameters:{};a=B({snapshot:new Py(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,RO(r),Es(r),r.component??r._loadedComponent??null,r,PO(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=j5(t,r,i,e).pipe(ke(({matched:u,consumedSegments:d,remainingSegments:g,parameters:m})=>u?{snapshot:new Py(d,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,RO(r),Es(r),r.component??r._loadedComponent??null,r,PO(r)),consumedSegments:d,remainingSegments:g}:null));return a.pipe(Te(u=>null===u?Id(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Te(({routes:d})=>{const g=r._loadedInjector??e,{snapshot:m,consumedSegments:v,remainingSegments:w}=u,{segmentGroup:C,slicedSegments:D}=bO(t,v,w,d);if(0===D.length&&C.hasChildren())return this.processChildren(g,d,C).pipe(ke(z=>null===z?null:[new Vo(m,z)]));if(0===d.length&&0===D.length)return B([new Vo(m,[])]);const M=Es(r)===s;return this.processSegment(g,d,C,D,M?at:s,!0).pipe(ke(z=>[new Vo(m,z)]))}))))}getChildConfig(e,t,r){return t.children?B({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?B({routes:t._loadedRoutes,injector:t._loadedInjector}):function V5(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?B(!0):B(i.map(o=>{const a=yd(o,n);return xa(function w5(n){return n&&Sp(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(vd(),CO())}(e,t,r).pipe(An(i=>i?this.configLoader.loadChildren(e,t).pipe(Dr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function U5(n){return fp(vO(!1,3))}())):B({routes:[],injector:e})}}function J5(n){const e=n.value.routeConfig;return e&&""===e.path}function SO(n){const e=[],t=new Set;for(const r of n){if(!J5(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=SO(r.children);e.push(new Vo(r.value,i))}return e.filter(r=>!t.has(r))}function RO(n){return n.data||{}}function PO(n){return n.resolve||{}}function MO(n){return"string"==typeof n.title||null===n.title}function yC(n){return Te(e=>{const t=n(e);return t?S(t).pipe(ke(()=>e)):B(e)})}const Ed=new _e("ROUTES");let vC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=be(lx)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return B(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=xa(t.loadComponent()).pipe(ke(xO),Dr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),pp(()=>{this.componentLoaders.delete(t)})),i=new $N(r,()=>new te).pipe(XA());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return B({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function i8(n,e,t,r){return xa(n.loadChildren()).pipe(ke(xO),An(i=>i instanceof mM||Array.isArray(i)?B(i):S(e.compileModuleAsync(i))),ke(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Ed,[],{optional:!0,self:!0}).flat()),{routes:o.map(gC),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(pp(()=>{this.childrenLoaders.delete(r)})),o=new $N(s,()=>new te).pipe(XA());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xO(n){return function s8(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Vy=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new te,this.transitionAbortSubject=new te,this.configLoader=be(vC),this.environmentInjector=be(Ni),this.urlSerializer=be(_p),this.rootContexts=be(Ap),this.inputBindingEnabled=null!==be(My,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>B(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new J9(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Y9(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new k({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ep,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(is(s=>0!==s.id),ke(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Te(s=>{this.currentTransition=s;let o=!1,a=!1;return B(s).pipe(Dr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Te(u=>{const d=u.currentBrowserUrl.toString(),g=!t.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!g&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const v="";return this.events.next(new gd(u.id,this.urlSerializer.serialize(u.rawUrl),v,0)),u.resolve(null),Cn}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return B(u).pipe(Te(v=>{const w=this.transitions?.getValue();return this.events.next(new Sy(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),w!==this.transitions?.getValue()?Cn:Promise.resolve(v)}),function Z5(n,e,t,r,i,s){return An(o=>function K5(n,e,t,r,i,s,o="emptyOnly"){return new Q5(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(ke(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Dr(v=>{s.targetSnapshot=v.targetSnapshot,s.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:v.urlAfterRedirects};const w=new cO(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(w)}));if(g&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:v,extractedUrl:w,source:C,restoredState:D,extras:M}=u,z=new Sy(v,this.urlSerializer.serialize(w),C,D);this.events.next(z);const F=fO(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:F,urlAfterRedirects:w,extras:{...M,skipLocationChange:!1,replaceUrl:!1}},B(s)}{const v="";return this.events.next(new gd(u.id,this.urlSerializer.serialize(u.extractedUrl),v,1)),u.resolve(null),Cn}}),Dr(u=>{const d=new q9(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),ke(u=>(this.currentTransition=s={...u,guards:_5(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function S5(n,e){return An(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?B({...t,guardsResult:!0}):function R5(n,e,t,r){return S(n).pipe(An(i=>function k5(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?B(s.map(a=>{const u=Tp(e)??i,d=yd(a,u);return xa(function T5(n){return n&&Sp(n.canDeactivate)}(d)?d.canDeactivate(n,e,t,r):u.runInContext(()=>d(n,e,t,r))).pipe(Ma())})).pipe(vd()):B(!0)}(i.component,i.route,t,e,r)),Ma(i=>!0!==i,!0))}(o,r,i,n).pipe(An(a=>a&&function E5(n){return"boolean"==typeof n}(a)?function P5(n,e,t,r){return S(e).pipe(hd(i=>ZA(function x5(n,e){return null!==n&&e&&e(new Z9(n)),B(!0)}(i.route.parent,r),function M5(n,e){return null!==n&&e&&e(new e5(n)),B(!0)}(i.route,r),function O5(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function y5(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>jN(()=>B(o.guards.map(u=>{const d=Tp(o.node)??t,g=yd(u,d);return xa(function C5(n){return n&&Sp(n.canActivateChild)}(g)?g.canActivateChild(r,n):d.runInContext(()=>g(r,n))).pipe(Ma())})).pipe(vd())));return B(s).pipe(vd())}(n,i.path,t),function N5(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return B(!0);const i=r.map(s=>jN(()=>{const o=Tp(e)??t,a=yd(s,o);return xa(function A5(n){return n&&Sp(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Ma())}));return B(i).pipe(vd())}(n,i.route,t))),Ma(i=>!0!==i,!0))}(r,s,n,e):B(a)),ke(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Dr(u=>{if(s.guardsResult=u.guardsResult,tc(u.guardsResult))throw yO(0,u.guardsResult);const d=new W9(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),is(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),yC(u=>{if(u.guards.canActivateChecks.length)return B(u).pipe(Dr(d=>{const g=new K9(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}),Te(d=>{let g=!1;return B(d).pipe(function X5(n,e){return An(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return B(t);let s=0;return S(i).pipe(hd(o=>function e8(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!MO(i)&&(s[gp]=i.title),function t8(n,e,t,r){const i=function n8(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return B({});const s={};return S(i).pipe(An(o=>function r8(n,e,t,r){const i=Tp(e)??r,s=yd(n,i);return xa(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Ma(),Dr(a=>{s[o]=a}))),eC(1),function m9(n){return ke(()=>n)}(s),Xu(o=>AO(o)?Cn:fp(o)))}(s,n,e,r).pipe(ke(o=>(n._resolvedData=o,n.data=pO(n,t).resolve,i&&MO(i)&&(n.data[gp]=i.title),null)))}(o.route,r,n,e)),Dr(()=>s++),eC(1),An(o=>s===i.length?B(t):Cn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Dr({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(d,"",2)}}))}),Dr(d=>{const g=new Q9(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}))}),yC(u=>{const d=g=>{const m=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(g.routeConfig).pipe(Dr(v=>{g.component=v}),ke(()=>{})));for(const v of g.children)m.push(...d(v));return m};return JA(d(u.targetSnapshot.root)).pipe(Iy(),dd(1))}),yC(()=>this.afterPreactivation()),ke(u=>{const d=function o5(n,e,t){const r=Cp(n,e._root,t?t._root:void 0);return new hO(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:d},s}),Dr(()=>{this.events.next(new oC)}),((n,e,t,r)=>ke(i=>(new m5(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),dd(1),Dr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Na(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function _9(n){return ne((e,t)=>{zn(n).subscribe(fe(t,()=>t.complete(),Oe)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Dr(u=>{throw u}))),pp(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Xu(u=>{if(a=!0,IO(u))this.events.next(new wp(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function c5(n){return IO(n)&&tc(n.url)}(u)?this.events.next(new aC(u.url)):s.resolve(!1);else{this.events.next(new Ry(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(d){s.reject(d)}}return Cn}))}))}cancelNavigationTransition(t,r,i){const s=new wp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function NO(n){return n!==Ep}let OO=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===at);return r}getResolvedTitleForRoute(t){return t.data[gp]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:function(){return be(o8)},providedIn:"root"})}}return n})(),o8=(()=>{class n extends OO{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(me(NN))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),a8=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:function(){return be(c8)},providedIn:"root"})}}return n})();class u8{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let c8=(()=>{class n extends u8{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Bn(n)))(i||n)}}()}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Fy=new _e("",{providedIn:"root",factory:()=>({})});let l8=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:function(){return be(d8)},providedIn:"root"})}}return n})(),d8=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Rp=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Rp||{});function kO(n,e){n.events.pipe(is(t=>t instanceof Na||t instanceof wp||t instanceof Ry||t instanceof gd),ke(t=>t instanceof Na||t instanceof gd?Rp.COMPLETE:t instanceof wp&&(0===t.code||1===t.code)?Rp.REDIRECTING:Rp.FAILED),is(t=>t!==Rp.REDIRECTING),dd(1)).subscribe(()=>{e()})}function h8(n){throw n}function f8(n,e,t){return e.parse("/")}const p8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},g8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ss=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=be(cx),this.isNgZoneEnabled=!1,this._events=new te,this.options=be(Fy,{optional:!0})||{},this.pendingTasks=be(K_),this.errorHandler=this.options.errorHandler||h8,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||f8,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=be(l8),this.routeReuseStrategy=be(a8),this.titleStrategy=be(OO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=be(Ed,{optional:!0})?.flat()??[],this.navigationTransitions=be(Vy),this.urlSerializer=be(_p),this.location=be(DA),this.componentInputBindingEnabled=!!be(My,{optional:!0}),this.eventsSubscription=new Ct,this.isNgZoneEnabled=be(Ut)instanceof Ut&&Ut.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new pd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=fO(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(VO(r)&&this._events.next(r));if(r instanceof Sy)NO(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof gd)this.rawUrlTree=i.rawUrl;else if(r instanceof cO){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof oC)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof wp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof aC){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||NO(i.source)};this.scheduleNavigation(s,Ep,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Ry&&this.restoreHistory(i,!0),r instanceof Na&&(this.navigated=!0),VO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ep,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(gC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let m,g=null;switch(a){case"merge":g={...this.currentUrlTree.queryParams,...s};break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=s||null}null!==g&&(g=this.removeEmptyProps(g));try{m=nO(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return rO(m,t,g,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=tc(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ep,null,r)}navigate(t,r={skipLocationChange:!1}){return function m8(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new de(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...p8}:!1===r?{...g8}:r,tc(t))return WN(this.currentUrlTree,t,i);const s=this.parseUrl(t);return WN(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((m,v)=>{a=m,u=v});const g=this.pendingTasks.add();return kO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function VO(n){return!(n instanceof oC||n instanceof aC)}let Ly=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new te,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof Na&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function _S(n,e,t){return function GB(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?mS:Gu}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(pe(ss),pe(_d),function bl(n){return function hE(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(qc(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(ir(),n)}("tabindex"),pe(bo),pe(Oi),pe(Zu))}}static{this.\u0275dir=Ye({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&rn("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Us("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",cd],skipLocationChange:["skipLocationChange","skipLocationChange",cd],replaceUrl:["replaceUrl","replaceUrl",cd],routerLink:"routerLink"},standalone:!0,features:[MR,Ei]})}}return n})();class FO{}let v8=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(is(t=>t instanceof Na),hd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Kw(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return S(i).pipe(Gi())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):B(null);const s=i.pipe(An(o=>null===o?B(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?S([s,this.loader.loadComponent(r)]).pipe(Gi()):s})}static{this.\u0275fac=function(r){return new(r||n)(me(ss),me(lx),me(Ni),me(FO),me(vC))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const IC=new _e("");let LO=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Sy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Na?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof gd&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof lO&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new lO(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function iR(){throw new Error("invalid")}()}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();function Fo(n,e){return{\u0275kind:n,\u0275providers:e}}function BO(){const n=be(ki);return e=>{const t=n.get(ud);if(e!==t.components[0])return;const r=n.get(ss),i=n.get(jO);1===n.get(EC)&&r.initialNavigation(),n.get($O,null,ct.Optional)?.setUpPreloading(),n.get(IC,null,ct.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const jO=new _e("",{factory:()=>new te}),EC=new _e("",{providedIn:"root",factory:()=>1}),$O=new _e("");function A8(n){return Fo(0,[{provide:$O,useExisting:v8},{provide:FO,useExisting:n}])}const HO=new _e("ROUTER_FORROOT_GUARD"),T8=[DA,{provide:_p,useClass:tC},ss,Ap,{provide:_d,useFactory:function UO(n){return n.routerState.root},deps:[ss]},vC,[]];function D8(){return new _x("Router",ss)}let wC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[T8,[],{provide:Ed,multi:!0,useValue:t},{provide:HO,useFactory:P8,deps:[[ss,new Hu,new Pl]]},{provide:Fy,useValue:r||{}},r?.useHash?{provide:Zu,useClass:Fq}:{provide:Zu,useClass:Qx},{provide:IC,useFactory:()=>{const n=be(r6),e=be(Ut),t=be(Fy),r=be(Vy),i=be(_p);return t.scrollOffset&&n.setOffset(t.scrollOffset),new LO(i,r,n,e,t)}},r?.preloadingStrategy?A8(r.preloadingStrategy).\u0275providers:[],{provide:_x,multi:!0,useFactory:D8},r?.initialNavigation?M8(r):[],r?.bindToComponentInputs?Fo(8,[_O,{provide:My,useExisting:_O}]).\u0275providers:[],[{provide:zO,useFactory:BO},{provide:mA,multi:!0,useExisting:zO}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ed,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(me(HO,8))}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({})}}return n})();function P8(n){return"guarded"}function M8(n){return["disabled"===n.initialNavigation?Fo(3,[{provide:uA,multi:!0,useFactory:()=>{const e=be(ss);return()=>{e.setUpLocationChangeListener()}}},{provide:EC,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Fo(2,[{provide:EC,useValue:0},{provide:uA,multi:!0,deps:[ki],useFactory:e=>{const t=e.get(kq,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(ss),s=e.get(jO);kO(i,()=>{r(!0)}),e.get(Vy).afterPreactivation=()=>(r(!0),s.closed?B(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const zO=new _e(""),N8=[];let O8=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({imports:[wC.forRoot(N8),wC]})}}return n})(),k8=(()=>{class n{constructor(){this.title="wedding-app"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=yi({type:n,selectors:[["app-root"]],decls:26,vars:6,consts:[[1,"grid-container"],[1,"grid-item1"],[1,"avatar-container"],[1,"circular-frame"],["src","assets/images/ratio1-1/picture3-1_1.jpg"],[3,"routerLink"],[1,"grid-item2"]],template:function(r,i){1&r&&(xe(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),sr(4,"img",4),Le()(),xe(5,"ul")(6,"li")(7,"a",5),st(8,"HOME"),Le()(),xe(9,"li")(10,"a",5),st(11,"ABOUT"),Le()(),xe(12,"li")(13,"a",5),st(14,"SCHEDULE"),Le()(),xe(15,"li")(16,"a",5),st(17,"REGISTRY"),Le()(),xe(18,"li")(19,"a",5),st(20,"CONTACT"),Le()(),xe(21,"li")(22,"a",5),st(23,"RSVP"),Le()()()(),xe(24,"div",6),sr(25,"router-outlet"),Le()()),2&r&&(Mt(7),Rn("routerLink","Home"),Mt(3),Rn("routerLink","About"),Mt(3),Rn("routerLink","Schedule"),Mt(3),Rn("routerLink","Registry"),Mt(3),Rn("routerLink","Contact"),Mt(3),Rn("routerLink","Rsvp"))},dependencies:[fC,Ly],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:16% auto}.grid-item1[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;font-family:Lora,cursive;background-color:#96a498;color:#fff;min-height:100vh}.grid-item2[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;background-color:#fcfbf4;font-family:Lora,cursive}.avatar-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.circular-frame[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:20px;width:180px;height:180px;border-radius:50%;overflow:hidden}.circular-frame[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:26px;list-style-type:none;margin-top:1em}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:inherit;text-decoration:none}@media (max-width: 1200px){.circular-frame[_ngcontent-%COMP%]{width:140px;height:140px}ul[_ngcontent-%COMP%]{padding-left:2em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 1000px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:18% auto}.circular-frame[_ngcontent-%COMP%]{width:120px;height:120px}ul[_ngcontent-%COMP%]{padding-left:1.5em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 800px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:22% auto}.circular-frame[_ngcontent-%COMP%]{width:110px;height:110px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 600px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:25% auto}.circular-frame[_ngcontent-%COMP%]{width:90px;height:90px}ul[_ngcontent-%COMP%]{padding-left:1em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 450px){.circular-frame[_ngcontent-%COMP%]{width:80px;height:80px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 450px){.circular-frame[_ngcontent-%COMP%]{width:70px;height:70px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px}}"]})}}return n})();var wd=rt(979);(0,wd.registerVersion)("firebase","10.14.1","app");class L8 extends Ct{constructor(e,t){super()}schedule(e,t=0){return this}}const Uy={setInterval(n,e,...t){const{delegate:r}=Uy;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Uy;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class GO extends L8{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Uy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Uy.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ee(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const AC={now:()=>(AC.delegate||Date).now(),delegate:void 0};class Pp{constructor(e,t=Pp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Pp.now=AC.now;class qO extends Pp{constructor(e,t=Pp.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const j8=new class B8 extends qO{}(class U8 extends GO{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),WO=new qO(GO),CC=new Hl("ANGULARFIRE2_VERSION");class KO{constructor(){return((n,e)=>{const t=(0,wd.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(H8)}}const H8="app-check";function Ad(){}class QO{zone;delegate;constructor(e,t=j8){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class z8{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ad,{},Ad,Ad)),t.pipe(Dr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let YO=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new QO(Zone.current)),this.insideAngular=t.run(()=>new QO(Zone.current,WO)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(me(Ut))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ui(n){return function q8(n){return function(t){return(t=t.lift(new z8(n.ngZone))).pipe(Vr(n.outsideAngular),Xr(n.insideAngular))}}(function Cd(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Oa=rt(574);Oa.A.registerVersion("firebase","10.14.1","app-compat");const Y8=["ngOnDestroy"];class JO{constructor(e){return e}}const By=new _e("angularfire2.app.options"),jy=new _e("angularfire2.app.name");function TC(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Oa.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Oa.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;X8("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new JO(o)}const X8=(n,...e)=>{},eW={provide:JO,useFactory:TC,deps:[By,Ut,[new Hu,jy]]};let tW=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:By,useValue:t},{provide:jy,useValue:r}]}}constructor(t){Oa.A.registerVersion("angularfire",CC.full,"core"),Oa.A.registerVersion("angularfire",CC.full,"app-compat"),Oa.A.registerVersion("angular",NS.full,t.toString())}static \u0275fac=function(r){return new(r||n)(me(Vs))};static \u0275mod=ri({type:n});static \u0275inj=dr({providers:[eW]})}return n})();function ZO(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function nW(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(XO("error",`${e} was already initialized on the ${t} Firebase App with different settings.${rW?" You may need to reload as Firebase is not HMR aware.":""}`),XO("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const rW=typeof module<"u"&&!!module.hot,XO=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],rt(324);class iW extends te{constructor(e=1/0,t=1/0,r=AC){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function e1(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,G({connector:()=>new iW(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function t1(n,e){return T(e)?Te(()=>n,e):Te(()=>n)}const n1=new _e("angularfire2.auth.use-emulator"),r1=new _e("angularfire2.auth.settings"),i1=new _e("angularfire2.auth.tenant-id"),s1=new _e("angularfire2.auth.langugage-code"),o1=new _e("angularfire2.auth.use-device-language"),a1=new _e("angularfire.auth.persistence"),u1=(n,e,t,r,i,s,o,a)=>ZO(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,g]of Object.entries(o))u.settings[d]=g;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let c1=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,d,g,m,v,w){const C=new te,D=B(void 0).pipe(Xr(o.outsideAngular),Te(()=>s.runOutsideAngular(()=>Promise.resolve().then(rt.bind(rt,324)))),ke(()=>TC(t,s,r)),ke(M=>u1(M,s,a,d,g,m,u,v)),e1({bufferSize:1,refCount:!1}));if(py(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=B(null);else{D.pipe(Ma()).subscribe();const M=D.pipe(Te(q=>q.getRedirectResult().then(ae=>ae,()=>null)),Ui,e1({bufferSize:1,refCount:!1})),z=D.pipe(Te(q=>new dt(ae=>({unsubscribe:s.runOutsideAngular(()=>q.onAuthStateChanged(ye=>ae.next(ye),ye=>ae.error(ye),()=>ae.complete()))})))),F=D.pipe(Te(q=>new dt(ae=>({unsubscribe:s.runOutsideAngular(()=>q.onIdTokenChanged(ye=>ae.next(ye),ye=>ae.error(ye),()=>ae.complete()))}))));this.authState=M.pipe(t1(z),Vr(o.outsideAngular),Xr(o.insideAngular)),this.user=M.pipe(t1(F),Vr(o.outsideAngular),Xr(o.insideAngular)),this.idToken=this.user.pipe(Te(q=>q?S(q.getIdToken()):B(null))),this.idTokenResult=this.user.pipe(Te(q=>q?S(q.getIdTokenResult()):B(null))),this.credential=P(M,C,this.authState.pipe(is(q=>!q))).pipe(ke(q=>q?.user?q:null),Vr(o.outsideAngular),Xr(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(Y8.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>t.run(()=>d)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(g=>{const m=g?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,m),m})})})}))(this,D,s,{spy:{apply:(M,z,F)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&F.then(q=>C.next(q))}}})}static \u0275fac=function(r){return new(r||n)(me(By),me(jy,8),me(Vs),me(Ut),me(YO),me(n1,8),me(r1,8),me(i1,8),me(s1,8),me(o1,8),me(a1,8),me(KO,8))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function DC(){return ne((n,e)=>{let t,r=!1;n.subscribe(fe(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var rc,f1,ie=rt(467),l1=rt(779),Gs=rt(398),Vt=rt(401),d1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},h1={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(V,b,O){O||(O=0);var L=Array(16);if("string"==typeof b)for(var j=0;16>j;++j)L[j]=b.charCodeAt(O++)|b.charCodeAt(O++)<<8|b.charCodeAt(O++)<<16|b.charCodeAt(O++)<<24;else for(j=0;16>j;++j)L[j]=b[O++]|b[O++]<<8|b[O++]<<16|b[O++]<<24;var W=V.g[3],N=(b=V.g[0])+(W^(O=V.g[1])&((j=V.g[2])^W))+L[0]+3614090360&4294967295;N=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=(O=(j=(W=(b=O+(N<<7&4294967295|N>>>25))+((N=W+(j^b&(O^j))+L[1]+3905402710&4294967295)<<12&4294967295|N>>>20))+((N=j+(O^W&(b^O))+L[2]+606105819&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^j&(W^b))+L[3]+3250441966&4294967295)<<22&4294967295|N>>>10))+((N=b+(W^O&(j^W))+L[4]+4118548399&4294967295)<<7&4294967295|N>>>25))+((N=W+(j^b&(O^j))+L[5]+1200080426&4294967295)<<12&4294967295|N>>>20))+((N=j+(O^W&(b^O))+L[6]+2821735955&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^j&(W^b))+L[7]+4249261313&4294967295)<<22&4294967295|N>>>10))+((N=b+(W^O&(j^W))+L[8]+1770035416&4294967295)<<7&4294967295|N>>>25))+((N=W+(j^b&(O^j))+L[9]+2336552879&4294967295)<<12&4294967295|N>>>20))+((N=j+(O^W&(b^O))+L[10]+4294925233&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^j&(W^b))+L[11]+2304563134&4294967295)<<22&4294967295|N>>>10))+((N=b+(W^O&(j^W))+L[12]+1804603682&4294967295)<<7&4294967295|N>>>25))+((N=W+(j^b&(O^j))+L[13]+4254626195&4294967295)<<12&4294967295|N>>>20))+((N=j+(O^W&(b^O))+L[14]+2792965006&4294967295)<<17&4294967295|N>>>15))+((N=O+(b^j&(W^b))+L[15]+1236535329&4294967295)<<22&4294967295|N>>>10))+((N=b+(j^W&(O^j))+L[1]+4129170786&4294967295)<<5&4294967295|N>>>27))+((N=W+(O^j&(b^O))+L[6]+3225465664&4294967295)<<9&4294967295|N>>>23))+((N=j+(b^O&(W^b))+L[11]+643717713&4294967295)<<14&4294967295|N>>>18))+((N=O+(W^b&(j^W))+L[0]+3921069994&4294967295)<<20&4294967295|N>>>12))+((N=b+(j^W&(O^j))+L[5]+3593408605&4294967295)<<5&4294967295|N>>>27))+((N=W+(O^j&(b^O))+L[10]+38016083&4294967295)<<9&4294967295|N>>>23))+((N=j+(b^O&(W^b))+L[15]+3634488961&4294967295)<<14&4294967295|N>>>18))+((N=O+(W^b&(j^W))+L[4]+3889429448&4294967295)<<20&4294967295|N>>>12))+((N=b+(j^W&(O^j))+L[9]+568446438&4294967295)<<5&4294967295|N>>>27))+((N=W+(O^j&(b^O))+L[14]+3275163606&4294967295)<<9&4294967295|N>>>23))+((N=j+(b^O&(W^b))+L[3]+4107603335&4294967295)<<14&4294967295|N>>>18))+((N=O+(W^b&(j^W))+L[8]+1163531501&4294967295)<<20&4294967295|N>>>12))+((N=b+(j^W&(O^j))+L[13]+2850285829&4294967295)<<5&4294967295|N>>>27))+((N=W+(O^j&(b^O))+L[2]+4243563512&4294967295)<<9&4294967295|N>>>23))+((N=j+(b^O&(W^b))+L[7]+1735328473&4294967295)<<14&4294967295|N>>>18))+((N=O+(W^b&(j^W))+L[12]+2368359562&4294967295)<<20&4294967295|N>>>12))+((N=b+(O^j^W)+L[5]+4294588738&4294967295)<<4&4294967295|N>>>28))+((N=W+(b^O^j)+L[8]+2272392833&4294967295)<<11&4294967295|N>>>21))+((N=j+(W^b^O)+L[11]+1839030562&4294967295)<<16&4294967295|N>>>16))+((N=O+(j^W^b)+L[14]+4259657740&4294967295)<<23&4294967295|N>>>9))+((N=b+(O^j^W)+L[1]+2763975236&4294967295)<<4&4294967295|N>>>28))+((N=W+(b^O^j)+L[4]+1272893353&4294967295)<<11&4294967295|N>>>21))+((N=j+(W^b^O)+L[7]+4139469664&4294967295)<<16&4294967295|N>>>16))+((N=O+(j^W^b)+L[10]+3200236656&4294967295)<<23&4294967295|N>>>9))+((N=b+(O^j^W)+L[13]+681279174&4294967295)<<4&4294967295|N>>>28))+((N=W+(b^O^j)+L[0]+3936430074&4294967295)<<11&4294967295|N>>>21))+((N=j+(W^b^O)+L[3]+3572445317&4294967295)<<16&4294967295|N>>>16))+((N=O+(j^W^b)+L[6]+76029189&4294967295)<<23&4294967295|N>>>9))+((N=b+(O^j^W)+L[9]+3654602809&4294967295)<<4&4294967295|N>>>28))+((N=W+(b^O^j)+L[12]+3873151461&4294967295)<<11&4294967295|N>>>21))+((N=j+(W^b^O)+L[15]+530742520&4294967295)<<16&4294967295|N>>>16))+((N=O+(j^W^b)+L[2]+3299628645&4294967295)<<23&4294967295|N>>>9))+((N=b+(j^(O|~W))+L[0]+4096336452&4294967295)<<6&4294967295|N>>>26))+((N=W+(O^(b|~j))+L[7]+1126891415&4294967295)<<10&4294967295|N>>>22))+((N=j+(b^(W|~O))+L[14]+2878612391&4294967295)<<15&4294967295|N>>>17))+((N=O+(W^(j|~b))+L[5]+4237533241&4294967295)<<21&4294967295|N>>>11))+((N=b+(j^(O|~W))+L[12]+1700485571&4294967295)<<6&4294967295|N>>>26))+((N=W+(O^(b|~j))+L[3]+2399980690&4294967295)<<10&4294967295|N>>>22))+((N=j+(b^(W|~O))+L[10]+4293915773&4294967295)<<15&4294967295|N>>>17))+((N=O+(W^(j|~b))+L[1]+2240044497&4294967295)<<21&4294967295|N>>>11))+((N=b+(j^(O|~W))+L[8]+1873313359&4294967295)<<6&4294967295|N>>>26))+((N=W+(O^(b|~j))+L[15]+4264355552&4294967295)<<10&4294967295|N>>>22))+((N=j+(b^(W|~O))+L[6]+2734768916&4294967295)<<15&4294967295|N>>>17))+((N=O+(W^(j|~b))+L[13]+1309151649&4294967295)<<21&4294967295|N>>>11))+((W=(b=O+((N=b+(j^(O|~W))+L[4]+4149444226&4294967295)<<6&4294967295|N>>>26))+((N=W+(O^(b|~j))+L[11]+3174756917&4294967295)<<10&4294967295|N>>>22))^((j=W+((N=j+(b^(W|~O))+L[2]+718787259&4294967295)<<15&4294967295|N>>>17))|~b))+L[9]+3951481745&4294967295,V.g[0]=V.g[0]+b&4294967295,V.g[1]=V.g[1]+(j+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+j&4294967295,V.g[3]=V.g[3]+W&4294967295}function o(V,b){this.h=b;for(var O=[],L=!0,j=V.length-1;0<=j;j--){var W=0|V[j];L&&W==b||(O[j]=W,L=!1)}this.g=O}(function e(V,b){function O(){}O.prototype=b.prototype,V.D=b.prototype,V.prototype=new O,V.prototype.constructor=V,V.C=function(L,j,W){for(var N=Array(arguments.length-2),Ko=2;Ko<arguments.length;Ko++)N[Ko-2]=arguments[Ko];return b.prototype[j].apply(L,N)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(V,b){void 0===b&&(b=V.length);for(var O=b-this.blockSize,L=this.B,j=this.h,W=0;W<b;){if(0==j)for(;W<=O;)i(this,V,W),W+=this.blockSize;if("string"==typeof V){for(;W<b;)if(L[j++]=V.charCodeAt(W++),j==this.blockSize){i(this,L),j=0;break}}else for(;W<b;)if(L[j++]=V[W++],j==this.blockSize){i(this,L),j=0;break}}this.h=j,this.o+=b},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var b=1;b<V.length-8;++b)V[b]=0;var O=8*this.o;for(b=V.length-8;b<V.length;++b)V[b]=255&O,O/=256;for(this.u(V),V=Array(16),b=O=0;4>b;++b)for(var L=0;32>L;L+=8)V[O++]=this.g[b]>>>L&255;return V};var a={};function u(V){return-128<=V&&128>V?function s(V,b){var O=a;return Object.prototype.hasOwnProperty.call(O,V)?O[V]:O[V]=b(V)}(V,function(b){return new o([0|b],0>b?-1:0)}):new o([0|V],0>V?-1:0)}function d(V){if(isNaN(V)||!isFinite(V))return m;if(0>V)return M(d(-V));for(var b=[],O=1,L=0;V>=O;L++)b[L]=V/O|0,O*=4294967296;return new o(b,0)}var m=u(0),v=u(1),w=u(16777216);function C(V){if(0!=V.h)return!1;for(var b=0;b<V.g.length;b++)if(0!=V.g[b])return!1;return!0}function D(V){return-1==V.h}function M(V){for(var b=V.g.length,O=[],L=0;L<b;L++)O[L]=~V.g[L];return new o(O,~V.h).add(v)}function z(V,b){return V.add(M(b))}function F(V,b){for(;(65535&V[b])!=V[b];)V[b+1]+=V[b]>>>16,V[b]&=65535,b++}function q(V,b){this.g=V,this.h=b}function ae(V,b){if(C(b))throw Error("division by zero");if(C(V))return new q(m,m);if(D(V))return b=ae(M(V),b),new q(M(b.g),M(b.h));if(D(b))return b=ae(V,M(b)),new q(M(b.g),b.h);if(30<V.g.length){if(D(V)||D(b))throw Error("slowDivide_ only works with positive integers.");for(var O=v,L=b;0>=L.l(V);)O=ye(O),L=ye(L);var j=Ue(O,1),W=Ue(L,1);for(L=Ue(L,2),O=Ue(O,2);!C(L);){var N=W.add(L);0>=N.l(V)&&(j=j.add(O),W=N),L=Ue(L,1),O=Ue(O,1)}return b=z(V,j.j(b)),new q(j,b)}for(j=m;0<=V.l(b);){for(O=Math.max(1,Math.floor(V.m()/b.m())),L=48>=(L=Math.ceil(Math.log(O)/Math.LN2))?1:Math.pow(2,L-48),N=(W=d(O)).j(b);D(N)||0<N.l(V);)N=(W=d(O-=L)).j(b);C(W)&&(W=v),j=j.add(W),V=z(V,N)}return new q(j,V)}function ye(V){for(var b=V.g.length+1,O=[],L=0;L<b;L++)O[L]=V.i(L)<<1|V.i(L-1)>>>31;return new o(O,V.h)}function Ue(V,b){var O=b>>5;b%=32;for(var L=V.g.length-O,j=[],W=0;W<L;W++)j[W]=0<b?V.i(W+O)>>>b|V.i(W+O+1)<<32-b:V.i(W+O);return new o(j,V.h)}(n=o.prototype).m=function(){if(D(this))return-M(this).m();for(var V=0,b=1,O=0;O<this.g.length;O++){var L=this.i(O);V+=(0<=L?L:4294967296+L)*b,b*=4294967296}return V},n.toString=function(V){if(2>(V=V||10)||36<V)throw Error("radix out of range: "+V);if(C(this))return"0";if(D(this))return"-"+M(this).toString(V);for(var b=d(Math.pow(V,6)),O=this,L="";;){var j=ae(O,b).g,W=((0<(O=z(O,j.j(b))).g.length?O.g[0]:O.h)>>>0).toString(V);if(C(O=j))return W+L;for(;6>W.length;)W="0"+W;L=W+L}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h},n.l=function(V){return D(V=z(this,V))?-1:C(V)?0:1},n.abs=function(){return D(this)?M(this):this},n.add=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0,j=0;j<=b;j++){var W=L+(65535&this.i(j))+(65535&V.i(j)),N=(W>>>16)+(this.i(j)>>>16)+(V.i(j)>>>16);L=N>>>16,O[j]=(N&=65535)<<16|(W&=65535)}return new o(O,-2147483648&O[O.length-1]?-1:0)},n.j=function(V){if(C(this)||C(V))return m;if(D(this))return D(V)?M(this).j(M(V)):M(M(this).j(V));if(D(V))return M(this.j(M(V)));if(0>this.l(w)&&0>V.l(w))return d(this.m()*V.m());for(var b=this.g.length+V.g.length,O=[],L=0;L<2*b;L++)O[L]=0;for(L=0;L<this.g.length;L++)for(var j=0;j<V.g.length;j++){var W=this.i(L)>>>16,N=65535&this.i(L),Ko=V.i(j)>>>16,Tg=65535&V.i(j);O[2*L+2*j]+=N*Tg,F(O,2*L+2*j),O[2*L+2*j+1]+=W*Tg,F(O,2*L+2*j+1),O[2*L+2*j+1]+=N*Ko,F(O,2*L+2*j+1),O[2*L+2*j+2]+=W*Ko,F(O,2*L+2*j+2)}for(L=0;L<b;L++)O[L]=O[2*L+1]<<16|O[2*L];for(L=b;L<2*b;L++)O[L]=0;return new o(O,0)},n.A=function(V){return ae(this,V).h},n.and=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0;L<b;L++)O[L]=this.i(L)&V.i(L);return new o(O,this.h&V.h)},n.or=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0;L<b;L++)O[L]=this.i(L)|V.i(L);return new o(O,this.h|V.h)},n.xor=function(V){for(var b=Math.max(this.g.length,V.g.length),O=[],L=0;L<b;L++)O[L]=this.i(L)^V.i(L);return new o(O,this.h^V.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,f1=h1.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=function g(V,b){if(0==V.length)throw Error("number format error: empty string");if(2>(b=b||10)||36<b)throw Error("radix out of range: "+b);if("-"==V.charAt(0))return M(g(V.substring(1),b));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=d(Math.pow(b,8)),L=m,j=0;j<V.length;j+=8){var W=Math.min(8,V.length-j),N=parseInt(V.substring(j,j+W),b);8>W?(W=d(Math.pow(b,W)),L=L.j(W).add(d(N))):L=(L=L.j(O)).add(d(N))}return L},rc=h1.Integer=o}).apply(typeof d1<"u"?d1:typeof self<"u"?self:typeof window<"u"?window:{});var p1,Mp,g1,Hy,bC,m1,_1,y1,$y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Lo={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,I){return h==Array.prototype||h==Object.prototype||(h[_]=I.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof $y&&$y];for(var _=0;_<h.length;++_){var I=h[_];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var I=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var $=h[A];if(!($ in I))break e;I=I[$]}(_=_(A=I[h=h[h.length-1]]))!=A&&null!=_&&e(I,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var I=0,A=!1,$={next:function(){if(!A&&I<h.length){var X=I++;return{value:_(X,h[X]),done:!1}}return A=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}(this,function(_,I){return I})}});var o=o||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function d(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function g(h,_,I){return h.call.apply(h.bind,arguments)}function m(h,_,I){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,A),h.apply(_,$)}}return function(){return h.apply(_,arguments)}}function v(h,_,I){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function w(h,_){var I=Array.prototype.slice.call(arguments,1);return function(){var A=I.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function C(h,_){function I(){}I.prototype=_.prototype,h.aa=_.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(A,$,X){for(var we=Array(arguments.length-2),Qt=2;Qt<arguments.length;Qt++)we[Qt-2]=arguments[Qt];return _.prototype[$].apply(A,we)}}function D(h){const _=h.length;if(0<_){const I=Array(_);for(let A=0;A<_;A++)I[A]=h[A];return I}return[]}function M(h,_){for(let I=1;I<arguments.length;I++){const A=arguments[I];if(u(A)){const $=h.length||0,X=A.length||0;h.length=$+X;for(let we=0;we<X;we++)h[$+we]=A[we]}else h.push(A)}}function F(h){return/^[\s\xa0]*$/.test(h)}function q(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function ae(h){return ae[" "](h),h}ae[" "]=function(){};var ye=!(-1==q().indexOf("Gecko")||-1!=q().toLowerCase().indexOf("webkit")&&-1==q().indexOf("Edge")||-1!=q().indexOf("Trident")||-1!=q().indexOf("MSIE")||-1!=q().indexOf("Edge"));function Ue(h,_,I){for(const A in h)_.call(I,h[A],A,h)}function b(h){const _={};for(const I in h)_[I]=h[I];return _}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,_){let I,A;for(let $=1;$<arguments.length;$++){for(I in A=arguments[$],A)h[I]=A[I];for(let X=0;X<O.length;X++)I=O[X],Object.prototype.hasOwnProperty.call(A,I)&&(h[I]=A[I])}}function j(h){var _=1;h=h.split(":");const I=[];for(;0<_&&h.length;)I.push(h.shift()),_--;return h.length&&I.push(h.join(":")),I}function W(h){a.setTimeout(()=>{throw h},0)}function N(){var h=TD;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var Tg=new class z{constructor(_,I){this.i=_,this.j=I,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new bZ,h=>h.reset());class bZ{constructor(){this.next=this.g=this.h=null}set(_,I){this.h=_,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let Dg,bg=!1,TD=new class Ko{constructor(){this.h=this.g=null}add(_,I){const A=Tg.get();A.set(_,I),this.h?this.h.next=A:this.g=A,this.h=A}},V2=()=>{const h=a.Promise.resolve(void 0);Dg=()=>{h.then(SZ)}};var SZ=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(I){W(I)}var _=Tg;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}bg=!1};function su(){this.s=this.s,this.C=this.C}function Kr(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}su.prototype.s=!1,su.prototype.ma=function(){this.s||(this.s=!0,this.N())},su.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Kr.prototype.h=function(){this.defaultPrevented=!0};var RZ=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};a.addEventListener("test",I,_),a.removeEventListener("test",I,_)}catch{}return h}();function Sg(h,_){if(Kr.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ye){e:{try{ae(_.nodeName);var $=!0;break e}catch{}$=!1}$||(_=null)}}else"mouseover"==I?_=h.fromElement:"mouseout"==I&&(_=h.toElement);this.relatedTarget=_,A?(this.clientX=void 0!==A.clientX?A.clientX:A.pageX,this.clientY=void 0!==A.clientY?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:PZ[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Sg.aa.h.call(this)}}C(Sg,Kr);var PZ={2:"touch",3:"pen",4:"mouse"};Sg.prototype.h=function(){Sg.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Rg="closure_listenable_"+(1e6*Math.random()|0),MZ=0;function xZ(h,_,I,A,$){this.listener=h,this.proxy=null,this.src=_,this.type=I,this.capture=!!A,this.ha=$,this.key=++MZ,this.da=this.fa=!1}function oI(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function aI(h){this.src=h,this.g={},this.h=0}function DD(h,_){var I=_.type;if(I in h.g){var X,A=h.g[I],$=Array.prototype.indexOf.call(A,_,void 0);(X=0<=$)&&Array.prototype.splice.call(A,$,1),X&&(oI(_),0==h.g[I].length&&(delete h.g[I],h.h--))}}function bD(h,_,I,A){for(var $=0;$<h.length;++$){var X=h[$];if(!X.da&&X.listener==_&&X.capture==!!I&&X.ha==A)return $}return-1}aI.prototype.add=function(h,_,I,A,$){var X=h.toString();(h=this.g[X])||(h=this.g[X]=[],this.h++);var we=bD(h,_,A,$);return-1<we?(_=h[we],I||(_.fa=!1)):((_=new xZ(_,this.src,X,!!A,$)).fa=I,h.push(_)),_};var SD="closure_lm_"+(1e6*Math.random()|0),RD={};function F2(h,_,I,A,$){if(A&&A.once)return U2(h,_,I,A,$);if(Array.isArray(_)){for(var X=0;X<_.length;X++)F2(h,_[X],I,A,$);return null}return I=ND(I),h&&h[Rg]?h.K(_,I,d(A)?!!A.capture:!!A,$):L2(h,_,I,!1,A,$)}function L2(h,_,I,A,$,X){if(!_)throw Error("Invalid event type");var we=d($)?!!$.capture:!!$,Qt=MD(h);if(Qt||(h[SD]=Qt=new aI(h)),(I=Qt.add(_,I,A,we,X)).proxy)return I;if(A=function NZ(){const _=OZ;return function h(I){return _.call(h.src,h.listener,I)}}(),I.proxy=A,A.src=h,A.listener=I,h.addEventListener)RZ||($=we),void 0===$&&($=!1),h.addEventListener(_.toString(),A,$);else if(h.attachEvent)h.attachEvent(j2(_.toString()),A);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(A)}return I}function U2(h,_,I,A,$){if(Array.isArray(_)){for(var X=0;X<_.length;X++)U2(h,_[X],I,A,$);return null}return I=ND(I),h&&h[Rg]?h.L(_,I,d(A)?!!A.capture:!!A,$):L2(h,_,I,!0,A,$)}function B2(h,_,I,A,$){if(Array.isArray(_))for(var X=0;X<_.length;X++)B2(h,_[X],I,A,$);else A=d(A)?!!A.capture:!!A,I=ND(I),h&&h[Rg]?(h=h.i,(_=String(_).toString())in h.g&&-1<(I=bD(X=h.g[_],I,A,$))&&(oI(X[I]),Array.prototype.splice.call(X,I,1),0==X.length&&(delete h.g[_],h.h--))):h&&(h=MD(h))&&(_=h.g[_.toString()],h=-1,_&&(h=bD(_,I,A,$)),(I=-1<h?_[h]:null)&&PD(I))}function PD(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[Rg])DD(_.i,h);else{var I=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(I,A,h.capture):_.detachEvent?_.detachEvent(j2(I),A):_.addListener&&_.removeListener&&_.removeListener(A),(I=MD(_))?(DD(I,h),0==I.h&&(I.src=null,_[SD]=null)):oI(h)}}}function j2(h){return h in RD?RD[h]:RD[h]="on"+h}function OZ(h,_){if(h.da)h=!0;else{_=new Sg(_,this);var I=h.listener,A=h.ha||h.src;h.fa&&PD(h),h=I.call(A,_)}return h}function MD(h){return(h=h[SD])instanceof aI?h:null}var xD="__closure_events_fn_"+(1e9*Math.random()>>>0);function ND(h){return"function"==typeof h?h:(h[xD]||(h[xD]=function(_){return h.handleEvent(_)}),h[xD])}function Qr(){su.call(this),this.i=new aI(this),this.M=this,this.F=null}function fi(h,_){var I,A=h.F;if(A)for(I=[];A;A=A.F)I.push(A);if(h=h.M,A=_.type||_,"string"==typeof _)_=new Kr(_,h);else if(_ instanceof Kr)_.target=_.target||h;else{var $=_;L(_=new Kr(A,h),$)}if($=!0,I)for(var X=I.length-1;0<=X;X--){var we=_.g=I[X];$=uI(we,A,!0,_)&&$}if($=uI(we=_.g=h,A,!0,_)&&$,$=uI(we,A,!1,_)&&$,I)for(X=0;X<I.length;X++)$=uI(we=_.g=I[X],A,!1,_)&&$}function uI(h,_,I,A){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var $=!0,X=0;X<_.length;++X){var we=_[X];if(we&&!we.da&&we.capture==I){var Qt=we.listener,Pr=we.ha||we.src;we.fa&&DD(h.i,we),$=!1!==Qt.call(Pr,A)&&$}}return $&&!A.defaultPrevented}function $2(h,_,I){if("function"==typeof h)I&&(h=v(h,I));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=v(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function H2(h){h.g=$2(()=>{h.g=null,h.i&&(h.i=!1,H2(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}C(Qr,su),Qr.prototype[Rg]=!0,Qr.prototype.removeEventListener=function(h,_,I,A){B2(this,h,_,I,A)},Qr.prototype.N=function(){if(Qr.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var I=h.g[_],A=0;A<I.length;A++)oI(I[A]);delete h.g[_],h.h--}}this.F=null},Qr.prototype.K=function(h,_,I,A){return this.i.add(String(h),_,!1,I,A)},Qr.prototype.L=function(h,_,I,A){return this.i.add(String(h),_,!0,I,A)};class kZ extends su{constructor(_,I){super(),this.m=_,this.l=I,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:H2(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pg(h){su.call(this),this.h=h,this.g={}}C(Pg,su);var z2=[];function G2(h){Ue(h.g,function(_,I){this.g.hasOwnProperty(I)&&PD(_)},h),h.g={}}Pg.prototype.N=function(){Pg.aa.N.call(this),G2(this)},Pg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var OD=a.JSON.stringify,VZ=a.JSON.parse,FZ=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function kD(){}function W2(){}kD.prototype.h=null;var Mg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function VD(){Kr.call(this,"d")}function FD(){Kr.call(this,"c")}C(VD,Kr),C(FD,Kr);var Sc={},K2=null;function cI(){return K2=K2||new Qr}function Q2(h){Kr.call(this,Sc.La,h)}function xg(h){const _=cI();fi(_,new Q2(_))}function Y2(h,_){Kr.call(this,Sc.STAT_EVENT,h),this.stat=_}function pi(h){const _=cI();fi(_,new Y2(_,h))}function J2(h,_){Kr.call(this,Sc.Ma,h),this.size=_}function Ng(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Og(){this.g=!0}function fh(h,_,I,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function jZ(h,_){if(!h.g)return _;if(!_)return null;try{var I=JSON.parse(_);if(I)for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var A=I[h];if(!(2>A.length)){var $=A[1];if(Array.isArray($)&&!(1>$.length)){var X=$[0];if("noop"!=X&&"stop"!=X&&"close"!=X)for(var we=1;we<$.length;we++)$[we]=""}}}return OD(I)}catch{return _}}(h,I)+(A?" "+A:"")})}Sc.La="serverreachability",C(Q2,Kr),Sc.STAT_EVENT="statevent",C(Y2,Kr),Sc.Ma="timingevent",C(J2,Kr),Og.prototype.xa=function(){this.g=!1},Og.prototype.info=function(){};var LD,lI={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Z2={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function dI(){}function ou(h,_,I,A){this.j=h,this.i=_,this.l=I,this.R=A||1,this.U=new Pg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new X2}function X2(){this.i=null,this.g="",this.h=!1}C(dI,kD),dI.prototype.g=function(){return new XMLHttpRequest},dI.prototype.i=function(){return{}},LD=new dI;var eU={},UD={};function BD(h,_,I){h.L=1,h.v=gI(Qo(_)),h.m=I,h.P=!0,tU(h,null)}function tU(h,_){h.F=Date.now(),hI(h),h.A=Qo(h.v);var I=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),gU(I.i,"t",A),h.C=0,I=h.j.J,h.h=new X2,h.g=NU(h.j,I?_:null,!h.m),0<h.O&&(h.M=new kZ(v(h.Y,h,h.g),h.O)),_=h.U,I=h.g,A=h.ca;var $="readystatechange";Array.isArray($)||($&&(z2[0]=$.toString()),$=z2);for(var X=0;X<$.length;X++){var we=F2(I,$[X],A||_.handleEvent,!1,_.h||_);if(!we)break;_.g[we.key]=we}_=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),xg(),function LZ(h,_,I,A,$,X){h.info(function(){if(h.g)if(X)for(var we="",Qt=X.split("&"),Pr=0;Pr<Qt.length;Pr++){var xt=Qt[Pr].split("=");if(1<xt.length){var Yr=xt[0];xt=xt[1];var Jr=Yr.split("_");we=2<=Jr.length&&"type"==Jr[1]?we+(Yr+"=")+xt+"&":we+(Yr+"=redacted&")}}else we=null;else we=X;return"XMLHTTP REQ ("+A+") [attempt "+$+"]: "+_+"\n"+I+"\n"+we})}(h.i,h.u,h.A,h.l,h.R,h.m)}function nU(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function $Z(h,_){var I=h.C,A=_.indexOf("\n",I);return-1==A?UD:(I=Number(_.substring(I,A)),isNaN(I)?eU:(A+=1)+I>_.length?UD:(_=_.slice(A,A+I),h.C=A+I,_))}function hI(h){h.S=Date.now()+h.I,rU(h,h.I)}function rU(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Ng(v(h.ba,h),_)}function jD(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function kg(h){0==h.j.G||h.J||RU(h.j,h)}function Rc(h){jD(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,G2(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function $D(h,_){try{var I=h.j;if(0!=I.G&&(I.g==h||HD(I.h,h)))if(!h.K&&HD(I.h,h)&&3==I.G){try{var A=I.Da.g.parse(_)}catch{A=null}if(Array.isArray(A)&&3==A.length){var $=A;if(0==$[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<h.F))break e;II(I),yI(I)}WD(I),pi(18)}}else I.za=$[1],0<I.za-I.T&&37500>$[2]&&I.F&&0==I.v&&!I.C&&(I.C=Ng(v(I.Za,I),6e3));if(1>=oU(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Mc(I,11)}else if((h.K||I.g==h)&&II(I),!F(_))for($=I.Da.g.parse(_),_=0;_<$.length;_++){let xt=$[_];if(I.T=xt[0],xt=xt[1],2==I.G)if("c"==xt[0]){I.K=xt[1],I.ia=xt[2];const Yr=xt[3];null!=Yr&&(I.la=Yr,I.j.info("VER="+I.la));const Jr=xt[4];null!=Jr&&(I.Aa=Jr,I.j.info("SVER="+I.Aa));const mh=xt[5];null!=mh&&"number"==typeof mh&&0<mh&&(I.L=A=1.5*mh,I.j.info("backChannelRequestTimeoutMs_="+A)),A=I;const ws=h.g;if(ws){const wI=ws.g?ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wI){var X=A.h;X.g||-1==wI.indexOf("spdy")&&-1==wI.indexOf("quic")&&-1==wI.indexOf("h2")||(X.j=X.l,X.g=new Set,X.h&&(zD(X,X.h),X.h=null))}if(A.D){const QD=ws.g?ws.g.getResponseHeader("X-HTTP-Session-Id"):null;QD&&(A.ya=QD,gn(A.I,A.D,QD))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms"));var we=h;if((A=I).qa=xU(A,A.J?A.ia:null,A.W),we.K){aU(A.h,we);var Qt=we,Pr=A.L;Pr&&(Qt.I=Pr),Qt.B&&(jD(Qt),hI(Qt)),A.g=we}else bU(A);0<I.i.length&&vI(I)}else"stop"!=xt[0]&&"close"!=xt[0]||Mc(I,7);else 3==I.G&&("stop"==xt[0]||"close"==xt[0]?"stop"==xt[0]?Mc(I,7):qD(I):"noop"!=xt[0]&&I.l&&I.l.ta(xt),I.v=0)}xg()}catch{}}function iU(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sU(h){return!!h.h||!!h.g&&h.g.size>=h.j}function oU(h){return h.h?1:h.g?h.g.size:0}function HD(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function zD(h,_){h.g?h.g.add(_):h.h=_}function aU(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function uU(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const I of h.g.values())_=_.concat(I.D);return _}return D(h.i)}function cU(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var I=function GZ(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var I=0;I<h;I++)_.push(I);return _}_=[],I=0;for(const A in h)_[I++]=A;return _}}}(h),A=function zZ(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],I=h.length,A=0;A<I;A++)_.push(h[A]);return _}for(A in _=[],I=0,h)_[I++]=h[A];return _}(h),$=A.length,X=0;X<$;X++)_.call(void 0,A[X],I&&I[X],h)}ou.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==Yo(h)?_.j():this.Y(h)},ou.prototype.Y=function(h){try{if(h==this.g)e:{const Jr=Yo(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>Jr)&&(3!=Jr||this.g&&(this.h.h||this.g.oa()||wU(this.g)))){this.J||4!=Jr||7==_||xg(),jD(this);var I=this.g.Z();this.X=I;t:if(nU(this)){var A=wU(this.g);h="";var $=A.length,X=4==Yo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Rc(this),kg(this);var we="";break t}this.h.i=new a.TextDecoder}for(_=0;_<$;_++)this.h.h=!0,h+=this.h.i.decode(A[_],{stream:!(X&&_==$-1)});A.length=0,this.h.g+=h,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=200==I,function UZ(h,_,I,A,$,X,we){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+$+"]: "+_+"\n"+I+"\n"+X+" "+we})}(this.i,this.u,this.A,this.l,this.R,Jr,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Qt,Pr=this.g;if((Qt=Pr.g?Pr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Qt)){var xt=Qt;break t}}xt=null}if(!(I=xt)){this.o=!1,this.s=3,pi(12),Rc(this),kg(this);break e}fh(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$D(this,I)}if(this.P){let ws;for(I=!0;!this.J&&this.C<we.length;){if(ws=$Z(this,we),ws==UD){4==Jr&&(this.s=4,pi(14),I=!1),fh(this.i,this.l,null,"[Incomplete Response]");break}if(ws==eU){this.s=4,pi(15),fh(this.i,this.l,we,"[Invalid Chunk]"),I=!1;break}fh(this.i,this.l,ws,null),$D(this,ws)}if(nU(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Jr||0!=we.length||this.h.h||(this.s=1,pi(16),I=!1),this.o=this.o&&I,I){if(0<we.length&&!this.W){this.W=!0;var Yr=this.j;Yr.g==this&&Yr.ba&&!Yr.M&&(Yr.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),KD(Yr),Yr.M=!0,pi(11))}}else fh(this.i,this.l,we,"[Invalid Chunked Response]"),Rc(this),kg(this)}else fh(this.i,this.l,we,null),$D(this,we);4==Jr&&Rc(this),this.o&&!this.J&&(4==Jr?RU(this.j,this):(this.o=!1,hI(this)))}else(function sX(h){const _={};h=(h.g&&2<=Yo(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let A=0;A<h.length;A++){if(F(h[A]))continue;var I=j(h[A]);const $=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const X=_[$]||[];_[$]=X,X.push(I)}!function V(h,_){for(const I in h)_.call(void 0,h[I],I,h)}(_,function(A){return A.join(", ")})})(this.g),400==I&&0<we.indexOf("Unknown SID")?(this.s=3,pi(12)):(this.s=0,pi(13)),Rc(this),kg(this)}}}catch{}},ou.prototype.cancel=function(){this.J=!0,Rc(this)},ou.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function BZ(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(xg(),pi(17)),Rc(this),this.s=2,kg(this)):rU(this,this.S-h)},iU.prototype.cancel=function(){if(this.i=uU(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var lU=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pc(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pc){this.h=h.h,fI(this,h.j),this.o=h.o,this.g=h.g,pI(this,h.s),this.l=h.l;var _=h.i,I=new Lg;I.i=_.i,_.g&&(I.g=new Map(_.g),I.h=_.h),dU(this,I),this.m=h.m}else h&&(_=String(h).match(lU))?(this.h=!1,fI(this,_[1]||"",!0),this.o=Vg(_[2]||""),this.g=Vg(_[3]||"",!0),pI(this,_[4]),this.l=Vg(_[5]||"",!0),dU(this,_[6]||"",!0),this.m=Vg(_[7]||"")):(this.h=!1,this.i=new Lg(null,this.h))}function Qo(h){return new Pc(h)}function fI(h,_,I){h.j=I?Vg(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function pI(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function dU(h,_,I){_ instanceof Lg?(h.i=_,function ZZ(h,_){_&&!h.j&&(au(h),h.i=null,h.g.forEach(function(I,A){var $=A.toLowerCase();A!=$&&(fU(this,A),gU(this,$,I))},h)),h.j=_}(h.i,h.h)):(I||(_=Fg(_,YZ)),h.i=new Lg(_,h.h))}function gn(h,_,I){h.i.set(_,I)}function gI(h){return gn(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Vg(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Fg(h,_,I){return"string"==typeof h?(h=encodeURI(h).replace(_,WZ),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function WZ(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}Pc.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Fg(_,hU,!0),":");var I=this.g;return(I||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(Fg(_,hU,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&h.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&h.push("/"),h.push(Fg(I,"/"==I.charAt(0)?QZ:KZ,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",Fg(I,JZ)),h.join("")};var h,hU=/[#\/\?@]/g,KZ=/[#\?:]/g,QZ=/[#\?]/g,YZ=/[#\?@]/g,JZ=/#/g;function Lg(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function au(h){h.g||(h.g=new Map,h.h=0,h.i&&function qZ(h,_){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var A=h[I].indexOf("="),$=null;if(0<=A){var X=h[I].substring(0,A);$=h[I].substring(A+1)}else X=h[I];_(X,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}(h.i,function(_,I){h.add(decodeURIComponent(_.replace(/\+/g," ")),I)}))}function fU(h,_){au(h),_=ph(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function pU(h,_){return au(h),_=ph(h,_),h.g.has(_)}function gU(h,_,I){fU(h,_),0<I.length&&(h.i=null,h.g.set(ph(h,_),D(I)),h.h+=I.length)}function ph(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function uu(h,_,I,A,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),A(I)}catch{}}function tX(){this.g=new FZ}function nX(h,_,I){const A=I||"";try{cU(h,function($,X){let we=$;d($)&&(we=OD($)),_.push(A+X+"="+encodeURIComponent(we))})}catch($){throw _.push(A+"type="+encodeURIComponent("_badmap")),$}}function Ug(h){this.l=h.Ub||null,this.j=h.eb||!1}function mI(h,_){Qr.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function mU(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Bg(h){h.readyState=4,h.l=null,h.j=null,h.v=null,jg(h)}function jg(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function _U(h){let _="";return Ue(h,function(I,A){_+=A,_+=":",_+=I,_+="\r\n"}),_}function GD(h,_,I){e:{for(A in I){var A=!1;break e}A=!0}A||(I=_U(I),"string"==typeof h?null!=I&&encodeURIComponent(String(I)):gn(h,_,I))}function Fn(h){Qr.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Lg.prototype).add=function(h,_){au(this),this.i=null,h=ph(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(_),this.h+=1,this},n.forEach=function(h,_){au(this),this.g.forEach(function(I,A){I.forEach(function($){h.call(_,$,A,this)},this)},this)},n.na=function(){au(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),I=[];for(let A=0;A<_.length;A++){const $=h[A];for(let X=0;X<$.length;X++)I.push(_[A])}return I},n.V=function(h){au(this);let _=[];if("string"==typeof h)pU(this,h)&&(_=_.concat(this.g.get(ph(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)_=_.concat(h[I])}return _},n.set=function(h,_){return au(this),this.i=null,pU(this,h=ph(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var I=0;I<_.length;I++){var A=_[I];const X=encodeURIComponent(String(A)),we=this.V(A);for(A=0;A<we.length;A++){var $=X;""!==we[A]&&($+="="+encodeURIComponent(String(we[A]))),h.push($)}}return this.i=h.join("&")},C(Ug,kD),Ug.prototype.g=function(){return new mI(this.l,this.j)},Ug.prototype.i=(h={},function(){return h}),C(mI,Qr),(n=mI.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,jg(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bg(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,jg(this)),this.g&&(this.readyState=3,jg(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mU(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Bg(this):jg(this),3==this.readyState&&mU(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Bg(this))},n.Qa=function(h){this.g&&(this.response=h,Bg(this))},n.ga=function(){this.g&&Bg(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var I=_.next();!I.done;)h.push((I=I.value)[0]+": "+I[1]),I=_.next();return h.join("\r\n")},Object.defineProperty(mI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),C(Fn,Qr);var rX=/^https?$/i,iX=["POST","PUT"];function yU(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,vU(h),_I(h)}function vU(h){h.A||(h.A=!0,fi(h,"complete"),fi(h,"error"))}function IU(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=Yo(h)||2!=h.Z()))if(h.u&&4==Yo(h))$2(h.Ea,0,h);else if(fi(h,"readystatechange"),4==Yo(h)){h.h=!1;try{const we=h.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var I;if(!(I=_)){var A;if(A=0===we){var $=String(h.D).match(lU)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),A=!rX.test($?$.toLowerCase():"")}I=A}if(I)fi(h,"complete"),fi(h,"success");else{h.m=6;try{var X=2<Yo(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",vU(h)}}finally{_I(h)}}}function _I(h,_){if(h.g){EU(h);const I=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||fi(h,"ready");try{I.onreadystatechange=A}catch{}}}function EU(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function Yo(h){return h.g?h.g.readyState:0}function wU(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function $g(h,_,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||_}function AU(h){this.Aa=0,this.i=[],this.j=new Og,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$g("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$g("baseRetryDelayMs",5e3,h),this.cb=$g("retryDelaySeedMs",1e4,h),this.Wa=$g("forwardChannelMaxRetries",2,h),this.wa=$g("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new iU(h&&h.concurrentRequestLimit),this.Da=new tX,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function qD(h){if(CU(h),3==h.G){var _=h.U++,I=Qo(h.I);if(gn(I,"SID",h.K),gn(I,"RID",_),gn(I,"TYPE","terminate"),Hg(h,I),(_=new ou(h,h.j,_)).L=2,_.v=gI(Qo(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=_.v,I=!0),I||(_.g=NU(_.j,null),_.g.ea(_.v)),_.F=Date.now(),hI(_)}MU(h)}function yI(h){h.g&&(KD(h),h.g.cancel(),h.g=null)}function CU(h){yI(h),h.u&&(a.clearTimeout(h.u),h.u=null),II(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function vI(h){if(!sU(h.h)&&!h.s){h.s=!0;var _=h.Ga;Dg||V2(),bg||(Dg(),bg=!0),TD.add(_,h),h.B=0}}function TU(h,_){var I;I=_?_.l:h.U++;const A=Qo(h.I);gn(A,"SID",h.K),gn(A,"RID",I),gn(A,"AID",h.T),Hg(h,A),h.m&&h.o&&GD(A,h.m,h.o),I=new ou(h,h.j,I,h.B+1),null===h.m&&(I.H=h.o),_&&(h.i=_.D.concat(h.i)),_=DU(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),zD(h.h,I),BD(I,A,_)}function Hg(h,_){h.H&&Ue(h.H,function(I,A){gn(_,A,I)}),h.l&&cU({},function(I,A){gn(_,A,I)})}function DU(h,_,I){I=Math.min(h.i.length,I);var A=h.l?v(h.l.Na,h.l,h):null;e:{var $=h.i;let X=-1;for(;;){const we=["count="+I];-1==X?0<I?(X=$[0].g,we.push("ofs="+X)):X=0:we.push("ofs="+X);let Qt=!0;for(let Pr=0;Pr<I;Pr++){let xt=$[Pr].g;const Yr=$[Pr].map;if(xt-=X,0>xt)X=Math.max(0,$[Pr].g-100),Qt=!1;else try{nX(Yr,we,"req"+xt+"_")}catch{A&&A(Yr)}}if(Qt){A=we.join("&");break e}}}return h=h.i.splice(0,I),_.D=h,A}function bU(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Dg||V2(),bg||(Dg(),bg=!0),TD.add(_,h),h.v=0}}function WD(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=Ng(v(h.Fa,h),PU(h,h.v)),h.v++,0))}function KD(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function SU(h){h.g=new ou(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=Qo(h.qa);gn(_,"RID","rpc"),gn(_,"SID",h.K),gn(_,"AID",h.T),gn(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&gn(_,"TO",h.ja),gn(_,"TYPE","xmlhttp"),Hg(h,_),h.m&&h.o&&GD(_,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=gI(Qo(_)),I.m=null,I.P=!0,tU(I,h)}function II(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function RU(h,_){var I=null;if(h.g==_){II(h),KD(h),h.g=null;var A=2}else{if(!HD(h.h,_))return;I=_.D,aU(h.h,_),A=1}if(0!=h.G)if(_.o)if(1==A){I=_.m?_.m.length:0,_=Date.now()-_.F;var $=h.B;fi(A=cI(),new J2(A,I)),vI(h)}else bU(h);else if(3==($=_.s)||0==$&&0<_.X||!(1==A&&function oX(h,_){return!(oU(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=Ng(v(h.Ga,h,_),PU(h,h.B)),h.B++,0)))}(h,_)||2==A&&WD(h)))switch(I&&0<I.length&&(_=h.h,_.i=_.i.concat(I)),$){case 1:Mc(h,5);break;case 4:Mc(h,10);break;case 3:Mc(h,6);break;default:Mc(h,2)}}function PU(h,_){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*_}function Mc(h,_){if(h.j.info("Error code "+_),2==_){var I=v(h.fb,h),A=h.Xa;const $=!A;A=new Pc(A||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||fI(A,"https"),gI(A),$?function XZ(h,_){const I=new Og;if(a.Image){const A=new Image;A.onload=w(uu,I,"TestLoadImage: loaded",!0,_,A),A.onerror=w(uu,I,"TestLoadImage: error",!1,_,A),A.onabort=w(uu,I,"TestLoadImage: abort",!1,_,A),A.ontimeout=w(uu,I,"TestLoadImage: timeout",!1,_,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}(A.toString(),I):function eX(h,_){new Og;const A=new AbortController,$=setTimeout(()=>{A.abort(),uu(0,0,!1,_)},1e4);fetch(h,{signal:A.signal}).then(X=>{clearTimeout($),uu(0,0,!!X.ok,_)}).catch(()=>{clearTimeout($),uu(0,0,!1,_)})}(A.toString(),I)}else pi(2);h.G=0,h.l&&h.l.sa(_),MU(h),CU(h)}function MU(h){if(h.G=0,h.ka=[],h.l){const _=uU(h.h);(0!=_.length||0!=h.i.length)&&(M(h.ka,_),M(h.ka,h.i),h.h.i.length=0,D(h.i),h.i.length=0),h.l.ra()}}function xU(h,_,I){var A=I instanceof Pc?Qo(I):new Pc(I);if(""!=A.g)_&&(A.g=_+"."+A.g),pI(A,A.s);else{var $=a.location;A=$.protocol,_=_?_+"."+$.hostname:$.hostname,$=+$.port;var X=new Pc(null);A&&fI(X,A),_&&(X.g=_),$&&pI(X,$),I&&(X.l=I),A=X}return _=h.ya,(I=h.D)&&_&&gn(A,I,_),gn(A,"VER",h.la),Hg(h,A),A}function NU(h,_,I){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Fn(h.Ca&&!h.pa?new Ug({eb:I}):h.pa)).Ha(h.J),_}function OU(){}function EI(){}function Hi(h,_){Qr.call(this),this.g=new AU(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!F(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!F(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new gh(this)}function kU(h){VD.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const I in _){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function VU(){FD.call(this),this.status=1}function gh(h){this.g=h}(n=Fn.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,I,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():LD.g(),this.v=function q2(h){return h.h||(h.h=h.i())}(this.o?this.o:LD),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(X){return void yU(this,X)}if(h=I||"",I=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var $ in A)I.set($,A[$]);else{if("function"!=typeof A.keys||"function"!=typeof A.get)throw Error("Unknown input type for opt_headers: "+String(A));for(const X of A.keys())I.set(X,A.get(X))}A=Array.from(I.keys()).find(X=>"content-type"==X.toLowerCase()),$=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iX,_,void 0))||A||$||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,we]of I)this.g.setRequestHeader(X,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{EU(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){yU(this,X)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,fi(this,"complete"),fi(this,"abort"),_I(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_I(this,!0)),Fn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?IU(this):this.bb())},n.bb=function(){IU(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Yo(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),VZ(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=AU.prototype).la=8,n.G=1,n.connect=function(h,_,I,A){pi(0),this.W=h,this.H=_||{},I&&void 0!==A&&(this.H.OSID=I,this.H.OAID=A),this.F=this.X,this.I=xU(this,null,this.W),vI(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const $=new ou(this,this.j,h);let X=this.o;if(this.S&&(X?(X=b(X),L(X,this.S)):X=this.S),null!==this.m||this.O||($.H=X,X=null),this.P)e:{for(var _=0,I=0;I<this.i.length;I++){var A=this.i[I];if(void 0===(A="__data__"in A.map&&"string"==typeof(A=A.map.__data__)?A.length:void 0))break;if(4096<(_+=A)){_=I;break e}if(4096===_||I===this.i.length-1){_=I+1;break e}}_=1e3}else _=1e3;_=DU(this,$,_),gn(I=Qo(this.I),"RID",h),gn(I,"CVER",22),this.D&&gn(I,"X-HTTP-Session-Id",this.D),Hg(this,I),X&&(this.O?_="headers="+encodeURIComponent(String(_U(X)))+"&"+_:this.m&&GD(I,this.m,X)),zD(this.h,$),this.Ua&&gn(I,"TYPE","init"),this.P?(gn(I,"$req",_),gn(I,"SID","null"),$.T=!0,BD($,I,null)):BD($,I,_),this.G=2}}else 3==this.G&&(h?TU(this,h):0==this.i.length||sU(this.h)||TU(this))},n.Fa=function(){if(this.u=null,SU(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ng(v(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pi(10),yI(this),SU(this))},n.Za=function(){null!=this.C&&(this.C=null,yI(this),WD(this),pi(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),pi(2)):(this.j.info("Failed to ping google.com"),pi(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=OU.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},EI.prototype.g=function(h,_){return new Hi(h,_)},C(Hi,Qr),Hi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hi.prototype.close=function(){qD(this.g)},Hi.prototype.o=function(h){var _=this.g;if("string"==typeof h){var I={};I.__data__=h,h=I}else this.u&&((I={}).__data__=OD(h),h=I);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&vI(_)},Hi.prototype.N=function(){this.g.l=null,delete this.j,qD(this.g),delete this.g,Hi.aa.N.call(this)},C(kU,VD),C(VU,FD),C(gh,OU),gh.prototype.ua=function(){fi(this.g,"a")},gh.prototype.ta=function(h){fi(this.g,new kU(h))},gh.prototype.sa=function(h){fi(this.g,new VU)},gh.prototype.ra=function(){fi(this.g,"b")},EI.prototype.createWebChannel=EI.prototype.g,Hi.prototype.send=Hi.prototype.o,Hi.prototype.open=Hi.prototype.m,Hi.prototype.close=Hi.prototype.close,y1=Lo.createWebChannelTransport=function(){return new EI},_1=Lo.getStatEventTarget=function(){return cI()},m1=Lo.Event=Sc,bC=Lo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lI.NO_ERROR=0,lI.TIMEOUT=8,lI.HTTP_ERROR=6,Hy=Lo.ErrorCode=lI,Z2.COMPLETE="complete",g1=Lo.EventType=Z2,W2.EventType=Mg,Mg.OPEN="a",Mg.CLOSE="b",Mg.ERROR="c",Mg.MESSAGE="d",Qr.prototype.listen=Qr.prototype.K,Mp=Lo.WebChannel=W2,Lo.FetchXmlHttpFactory=Ug,Fn.prototype.listenOnce=Fn.prototype.L,Fn.prototype.getLastError=Fn.prototype.Ka,Fn.prototype.getLastErrorCode=Fn.prototype.Ba,Fn.prototype.getStatus=Fn.prototype.Z,Fn.prototype.getResponseJson=Fn.prototype.Oa,Fn.prototype.getResponseText=Fn.prototype.oa,Fn.prototype.send=Fn.prototype.ea,Fn.prototype.setWithCredentials=Fn.prototype.Ha,p1=Lo.XhrIo=Fn}).apply(typeof $y<"u"?$y:typeof self<"u"?self:typeof window<"u"?window:{});const v1="@firebase/firestore";class gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gr.UNAUTHENTICATED=new gr(null),gr.GOOGLE_CREDENTIALS=new gr("google-credentials-uid"),gr.FIRST_PARTY=new gr("first-party-uid"),gr.MOCK_USER=new gr("mock-user");let Td="10.14.0";const ka=new Gs.Vy("@firebase/firestore");function Dd(){return ka.logLevel}function he(n,...e){if(ka.logLevel<=Gs.$b.DEBUG){const t=e.map(SC);ka.debug(`Firestore (${Td}): ${n}`,...t)}}function $n(n,...e){if(ka.logLevel<=Gs.$b.ERROR){const t=e.map(SC);ka.error(`Firestore (${Td}): ${n}`,...t)}}function Bi(n,...e){if(ka.logLevel<=Gs.$b.WARN){const t=e.map(SC);ka.warn(`Firestore (${Td}): ${n}`,...t)}}function SC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ne(n="Unexpected state"){const e=`FIRESTORE (${Td}) INTERNAL ASSERTION FAILED: `+n;throw $n(e),new Error(e)}function Ve(n,e){n||Ne()}function Ee(n,e){return n}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Vt.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class I1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gr.UNAUTHENTICATED))}shutdown(){}}class lW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dW{constructor(e){this.t=e,this.currentUser=gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;Ve(void 0===this.o);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new mr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,ie.A)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new mr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve("string"==typeof r.accessToken),new I1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(null===e||"string"==typeof e),new gr(e)}}class hW{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=gr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fW{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new hW(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class E1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pW{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ve(void 0===this.o);const r=s=>{null!=s.error&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ve("string"==typeof t.token),this.R=t.token,new E1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function gW(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class w1{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=gW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function et(n,e){return n<e?-1:n>e?1:0}function bd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function A1(n){return n+"\0"}class yn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yn.fromMillis(Date.now())}static fromDate(e){return yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new yn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Be(e)}static min(){return new Be(new yn(0,0))}static max(){return new Be(new yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xp{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ne(),void 0===r?r=e.length-t:r>e.length-t&&Ne(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===xp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Et extends xp{construct(e,t,r){return new Et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Et(t)}static emptyPath(){return new Et([])}}const mW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends xp{construct(e,t,r){return new hn(e,t,r)}static isValidIdentifier(e){return mW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(t)}static emptyPath(){return new hn([])}}class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(Et.fromString(e))}static fromName(e){return new Ce(Et.fromString(e).popFirst(5))}static empty(){return new Ce(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Et.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new Et(e.slice()))}}class Sd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function RC(n){return n.fields.find(e=>2===e.kind)}function ic(n){return n.fields.filter(e=>2!==e.kind)}Sd.UNKNOWN_ID=-1;class sc{constructor(e,t){this.fieldPath=e,this.kind=t}}class Rd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Rd(0,ji.min())}}function C1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Be.fromTimestamp(1e9===r?new yn(t+1,0):new yn(t,r));return new ji(i,Ce.empty(),e)}function T1(n){return new ji(n.readTime,n.key,-1)}class ji{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ji(Be.min(),Ce.empty(),-1)}static max(){return new ji(Be.max(),Ce.empty(),-1)}}function PC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ce.comparator(n.documentKey,e.documentKey),0!==t?t:et(n.largestBatchId,e.largestBatchId))}const D1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Va(n){return MC.apply(this,arguments)}function MC(){return(MC=(0,ie.A)(function*(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==D1)throw n;he("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):H.reject(t)}static resolve(e){return new H((t,r)=>{t(e)})}static reject(e){return new H((t,r)=>{r(e)})}static waitFor(e){return new H((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=H.resolve(!1);for(const r of e)t=t.next(i=>i?H.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new H((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;t(e[d]).next(g=>{o[d]=g,++a,a===s&&r(o)},g=>i(g))}})}static doWhile(e,t){return new H((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class zy{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new mr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Np(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=xC(r.target.error);this.V.reject(new Np(e,i))}}static open(e,t,r,i){try{return new zy(t,e.transaction(i,r))}catch(s){throw new Np(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(he("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new IW(t)}}class qs{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===qs.S((0,Vt.ZQ)())&&$n("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return he("SimpleDb","Removing database:",e),oc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Vt.zW)())return!1;if(qs.v())return!0;const e=(0,Vt.ZQ)(),t=qs.S(e),r=0<t&&t<10,i=S1(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ie.A)(function*(){return t.db||(he("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Np(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new ce(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ce(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Np(e,a))},s.onupgradeneeded=o=>{he("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{he("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,ie.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=zy.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(g=>(u.g(),g)).catch(g=>(u.abort(g),H.reject(g))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,g="FirebaseError"!==d.name&&a<3;if(he("SimpleDb","Transaction failed with error:",d.message,"Retrying:",g),s.close(),!g)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function S1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class vW{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return oc(this.B.delete())}}class Np extends ce{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fa(n){return"IndexedDbTransactionError"===n.name}class IW{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(he("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(he("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),oc(r)}add(e){return he("SimpleDb","ADD",this.store.name,e,e),oc(this.store.add(e))}get(e){return oc(this.store.get(e)).next(t=>(void 0===t&&(t=null),he("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return he("SimpleDb","DELETE",this.store.name,e),oc(this.store.delete(e))}count(){return he("SimpleDb","COUNT",this.store.name),oc(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new H((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new H((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){he("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new H((r,i)=>{t.onerror=s=>{const o=xC(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new H((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new vW(a),d=t(a.primaryKey,a.value,u);if(d instanceof H){const g=d.catch(m=>(u.done(),H.reject(m)));r.push(g)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>H.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oc(n){return new H((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=xC(r.target.error);t(i)}})}let R1=!1;function xC(n){const e=qs.S((0,Vt.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return R1||(R1=!0,setTimeout(()=>{throw r},0)),r}}return n}class EW{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;he("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ie.A)(function*(){t.task=null;try{he("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Fa(r)?he("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Va(r)}yield t.X(6e4)}))}}class wW{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ie.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return H.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return he("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(he("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=T1(s);PC(o,r)>0&&(r=o)}),new ji(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let $i=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Op(n){return null==n}function kp(n){return 0===n&&1/n==-1/0}function P1(n){return"number"==typeof n&&Number.isInteger(n)&&!kp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Hr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=M1(e)),e=AW(n.get(t),e);return M1(e)}function AW(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function M1(n){return n+"\x01\x01"}function Ws(n){const e=n.length;if(Ve(e>=2),2===e)return Ve("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Et.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ne(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ne()}s=o+2}return new Et(r)}const x1=["userId","batchId"];function Gy(n,e){return[n,Hr(e)]}function N1(n,e,t){return[n,Hr(e),t]}const CW={},TW=["prefixPath","collectionGroup","readTime","documentId"],DW=["prefixPath","collectionGroup","documentId"],bW=["collectionGroup","readTime","prefixPath","documentId"],SW=["canonicalId","targetId"],RW=["targetId","path"],PW=["path","targetId"],MW=["collectionId","parent"],xW=["indexId","uid"],NW=["uid","sequenceNumber"],OW=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kW=["indexId","uid","orderedDocumentKey"],VW=["userId","collectionPath","documentId"],FW=["userId","collectionPath","largestBatchId"],LW=["userId","collectionGroup","largestBatchId"],O1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],UW=[...O1,"documentOverlays"],k1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],V1=k1,NC=[...V1,"indexConfiguration","indexState","indexEntries"],BW=NC,jW=[...NC,"globals"];class OC extends b1{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function ur(n,e){const t=Ee(n);return qs.F(t._e,e)}function F1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function La(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function U1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class an{constructor(e,t){this.comparator=e,this.root=t||br.EMPTY}insert(e,t){return new an(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,br.BLACK,null,null))}remove(e){return new an(this.comparator,this.root.remove(e,this.comparator).copy(null,null,br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qy(this.root,e,this.comparator,!1)}getReverseIterator(){return new qy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qy(this.root,e,this.comparator,!0)}}class qy{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class br{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??br.RED,this.left=i??br.EMPTY,this.right=s??br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new br(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return br.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}br.EMPTY=null,br.RED=!0,br.BLACK=!1,br.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,t,r,i,s){return this}insert(e,t,r){return new br(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gt{constructor(e){this.comparator=e,this.data=new an(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new B1(this.data.getIterator())}getIteratorFrom(e){return new B1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class B1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pd(n){return n.hasNext()?n.getNext():void 0}class Di{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new Di([])}unionWith(e){let t=new Gt(hn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Di(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class j1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new j1("Invalid base64 string: "+s):s}}(e);return new Vn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Vn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vn.EMPTY_BYTE_STRING=new Vn("");const HW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Uo(n){if(Ve(!!n),"string"==typeof n){let e=0;const t=HW.exec(n);if(Ve(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vn(n.seconds),nanos:vn(n.nanos)}}function vn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Bo(n){return"string"==typeof n?Vn.fromBase64String(n):Vn.fromUint8Array(n)}function Wy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ky(n){const e=n.mapValue.fields.__previous_value__;return Wy(e)?Ky(e):e}function Vp(n){const e=Uo(n.mapValue.fields.__local_write_time__.timestampValue);return new yn(e.seconds,e.nanos)}class zW{constructor(e,t,r,i,s,o,a,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class Ua{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ua("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ua&&e.projectId===this.projectId&&e.database===this.database}}const Ba={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qy={nullValue:"NULL_VALUE"};function ja(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wy(n)?4:q1(n)?9007199254740991:Zy(n)?10:11:Ne()}function Ks(n,e){if(n===e)return!0;const t=ja(n);if(t!==ja(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vp(n).isEqual(Vp(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Uo(i.timestampValue),a=Uo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Bo(n.bytesValue).isEqual(Bo(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return vn(i.geoPointValue.latitude)===vn(s.geoPointValue.latitude)&&vn(i.geoPointValue.longitude)===vn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return vn(i.integerValue)===vn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=vn(i.doubleValue),a=vn(s.doubleValue);return o===a?kp(o)===kp(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return bd(n.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(F1(o)!==F1(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Ks(o[u],a[u])))return!1;return!0}(n,e);default:return Ne()}var s}function Fp(n,e){return void 0!==(n.values||[]).find(t=>Ks(t,e))}function $a(n,e){if(n===e)return 0;const t=ja(n),r=ja(e);if(t!==r)return et(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return et(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=vn(s.integerValue||s.doubleValue),u=vn(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return $1(n.timestampValue,e.timestampValue);case 4:return $1(Vp(n),Vp(e));case 5:return et(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Bo(s),u=Bo(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const g=et(a[d],u[d]);if(0!==g)return g}return et(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=et(vn(s.latitude),vn(o.latitude));return 0!==a?a:et(vn(s.longitude),vn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return H1(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,d,g;const w=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,C=null===(u=(o.fields||{}).value)||void 0===u?void 0:u.arrayValue,D=et((null===(d=w?.values)||void 0===d?void 0:d.length)||0,(null===(g=C?.values)||void 0===g?void 0:g.length)||0);return 0!==D?D:H1(w,C)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ba.mapValue&&o===Ba.mapValue)return 0;if(s===Ba.mapValue)return 1;if(o===Ba.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},g=Object.keys(d);u.sort(),g.sort();for(let m=0;m<u.length&&m<g.length;++m){const v=et(u[m],g[m]);if(0!==v)return v;const w=$a(a[u[m]],d[g[m]]);if(0!==w)return w}return et(u.length,g.length)}(n.mapValue,e.mapValue);default:throw Ne()}}function $1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return et(n,e);const t=Uo(n),r=Uo(e),i=et(t.seconds,r.seconds);return 0!==i?i:et(t.nanos,r.nanos)}function H1(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=$a(t[i],r[i]);if(s)return s}return et(t.length,r.length)}function Md(n){return kC(n)}function kC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Uo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Bo(n.bytesValue).toBase64():"referenceValue"in n?Ce.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=kC(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${kC(t.fields[o])}`;return i+"}"}(n.mapValue):Ne()}function ac(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function VC(n){return!!n&&"integerValue"in n}function Lp(n){return!!n&&"arrayValue"in n}function z1(n){return!!n&&"nullValue"in n}function G1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jy(n){return!!n&&"mapValue"in n}function Zy(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Up(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return La(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Up(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Up(n.arrayValue.values[t]);return e}return Object.assign({},n)}function q1(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const W1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function GW(n){return"nullValue"in n?Qy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ac(Ua.empty(),Ce.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Zy(n)?W1:{mapValue:{}}:Ne()}function qW(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ac(Ua.empty(),Ce.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?W1:"mapValue"in n?Zy(n)?{mapValue:{}}:Ba:Ne()}function K1(n,e){const t=$a(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Q1(n,e){const t=$a(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Sr{constructor(e){this.value=e}static empty(){return new Sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Up(t)}setAll(e){let t=hn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Up(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Jy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ks(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Jy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){La(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Sr(Up(this.value))}}function Y1(n){const e=[];return La(n.fields,(t,r)=>{const i=new hn([t]);if(Jy(r)){const s=Y1(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Di(e)}class fn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new fn(e,0,Be.min(),Be.min(),Be.min(),Sr.empty(),0)}static newFoundDocument(e,t,r,i){return new fn(e,1,t,Be.min(),r,i,0)}static newNoDocument(e,t){return new fn(e,2,t,Be.min(),Be.min(),Sr.empty(),0)}static newUnknownDocument(e,t){return new fn(e,3,t,Be.min(),Be.min(),Sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Be.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ha{constructor(e,t){this.position=e,this.inclusive=t}}function J1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Ce.comparator(Ce.fromName(o.referenceValue),t.key):$a(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Z1(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ks(n.position[t],e.position[t]))return!1;return!0}class Bp{constructor(e,t="asc"){this.field=e,this.dir=t}}function WW(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class X1{}class wt extends X1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new KW(e,t,r):"array-contains"===t?new JW(e,r):"in"===t?new sk(e,r):"not-in"===t?new ZW(e,r):"array-contains-any"===t?new XW(e,r):new wt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new QW(e,r):new YW(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison($a(t,this.value)):null!==t&&ja(this.value)===ja(t)&&this.matchesComparison($a(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $t extends X1{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new $t(e,t)}matches(e){return xd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function xd(n){return"and"===n.op}function FC(n){return"or"===n.op}function LC(n){return ek(n)&&xd(n)}function ek(n){for(const e of n.filters)if(e instanceof $t)return!1;return!0}function UC(n){if(n instanceof wt)return n.field.canonicalString()+n.op.toString()+Md(n.value);if(LC(n))return n.filters.map(e=>UC(e)).join(",");{const e=n.filters.map(t=>UC(t)).join(",");return`${n.op}(${e})`}}function tk(n,e){return n instanceof wt?(r=n,(i=e)instanceof wt&&r.op===i.op&&r.field.isEqual(i.field)&&Ks(r.value,i.value)):n instanceof $t?function(r,i){return i instanceof $t&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&tk(o,i.filters[a]),!0)}(n,e):void Ne();var r,i}function nk(n,e){const t=n.filters.concat(e);return $t.create(t,n.op)}function rk(n){return n instanceof wt?`${(t=n).field.canonicalString()} ${t.op} ${Md(t.value)}`:n instanceof $t?function(t){return t.op.toString()+" {"+t.getFilters().map(rk).join(" ,")+"}"}(n):"Filter";var t}class KW extends wt{constructor(e,t,r){super(e,t,r),this.key=Ce.fromName(r.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class QW extends wt{constructor(e,t){super(e,"in",t),this.keys=ik(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class YW extends wt{constructor(e,t){super(e,"not-in",t),this.keys=ik(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ik(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ce.fromName(r.referenceValue))}class JW extends wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lp(t)&&Fp(t.arrayValue,this.value)}}class sk extends wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Fp(this.value.arrayValue,t)}}class ZW extends wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Fp(this.value.arrayValue,t)}}class XW extends wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Fp(this.value.arrayValue,r))}}class eK{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function BC(n,e=null,t=[],r=[],i=null,s=null,o=null){return new eK(n,e,t,r,i,s,o)}function uc(n){const e=Ee(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>UC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Op(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Md(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Md(r)).join(",")),e.ue=t}return e.ue}function jp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!WW(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Z1(n.startAt,e.startAt)&&Z1(n.endAt,e.endAt)}function Xy(n){return Ce.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ev(n,e){return n.filters.filter(t=>t instanceof wt&&t.field.isEqual(e))}function ok(n,e,t){let r=Qy,i=!0;for(const s of ev(n,e)){let o=Qy,a=!0;switch(s.op){case"<":case"<=":o=GW(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Qy}K1({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];K1({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function ak(n,e,t){let r=Ba,i=!0;for(const s of ev(n,e)){let o=Ba,a=!0;switch(s.op){case">=":case">":o=qW(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ba}Q1({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Q1({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class jo{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function uk(n,e,t,r,i,s,o,a){return new jo(n,e,t,r,i,s,o,a)}function Nd(n){return new jo(n)}function ck(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function jC(n){return null!==n.collectionGroup}function Od(n){const e=Ee(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Gt(hn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Bp(s,r))}),t.has(hn.keyField().canonicalString())||e.ce.push(new Bp(hn.keyField(),r))}return e.ce}function zr(n){const e=Ee(n);return e.le||(e.le=function dk(n,e){if("F"===n.limitType)return BC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Bp(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Ha(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ha(n.startAt.position,n.startAt.inclusive):null;return BC(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Od(n))),e.le}function $C(n,e){const t=n.filters.concat([e]);return new jo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function tv(n,e,t){return new jo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $p(n,e){return jp(zr(n),zr(e))&&n.limitType===e.limitType}function hk(n){return`${uc(zr(n))}|lt:${n.limitType}`}function kd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>rk(i)).join(", ")}]`),Op(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Md(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Md(i)).join(",")),`Target(${r})`}(zr(n))}; limitType=${n.limitType})`}function Hp(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Od(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const d=J1(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,Od(r),i)||r.endAt&&!function(o,a,u){const d=J1(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,Od(r),i)));var r,i}function fk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pk(n){return(e,t)=>{let r=!1;for(const i of Od(n)){const s=tK(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function tK(n,e,t){const r=n.field.isKeyField()?Ce.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?$a(u,d):Ne()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ne()}}class $o{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){La(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return U1(this.inner)}size(){return this.innerSize}}const nK=new an(Ce.comparator);function bi(){return nK}const gk=new an(Ce.comparator);function zp(...n){let e=gk;for(const t of n)e=e.insert(t.key,t);return e}function mk(n){let e=gk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qs(){return Gp()}function _k(){return Gp()}function Gp(){return new $o(n=>n.toString(),(n,e)=>n.isEqual(e))}const rK=new an(Ce.comparator),iK=new Gt(Ce.comparator);function ut(...n){let e=iK;for(const t of n)e=e.add(t);return e}const sK=new Gt(et);function HC(){return sK}function zC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kp(e)?"-0":e}}function yk(n){return{integerValue:""+n}}function vk(n,e){return P1(e)?yk(e):zC(n,e)}class nv{constructor(){this._=void 0}}function oK(n,e,t){return n instanceof Vd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Wy(s)&&(s=Ky(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof cc?Ek(n,e):n instanceof lc?wk(n,e):function(i,s){const o=Ik(i,s),a=Ak(o)+Ak(i.Pe);return VC(o)&&VC(i.Pe)?yk(a):zC(i.serializer,a)}(n,e)}function aK(n,e,t){return n instanceof cc?Ek(n,e):n instanceof lc?wk(n,e):t}function Ik(n,e){return n instanceof Fd?VC(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Vd extends nv{}class cc extends nv{constructor(e){super(),this.elements=e}}function Ek(n,e){const t=Ck(e);for(const r of n.elements)t.some(i=>Ks(i,r))||t.push(r);return{arrayValue:{values:t}}}class lc extends nv{constructor(e){super(),this.elements=e}}function wk(n,e){let t=Ck(e);for(const r of n.elements)t=t.filter(i=>!Ks(i,r));return{arrayValue:{values:t}}}class Fd extends nv{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ak(n){return vn(n.integerValue||n.doubleValue)}function Ck(n){return Lp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qp{constructor(e,t){this.field=e,this.transform=t}}class cK{constructor(e,t){this.version=e,this.transformResults=t}}class In{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new In}static exists(e){return new In(void 0,e)}static updateTime(e){return new In(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class iv{}function Tk(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ud(n.key,In.none()):new Ld(n.key,n.data,In.none());{const t=n.data,r=Sr.empty();let i=new Gt(hn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ho(n.key,r,new Di(i.toArray()),In.none())}}function lK(n,e,t){n instanceof Ld?function(i,s,o){const a=i.value.clone(),u=Sk(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ho?function(i,s,o){if(!rv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Sk(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(bk(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Wp(n,e,t,r){return n instanceof Ld?function(s,o,a,u){if(!rv(s.precondition,o))return a;const d=s.value.clone(),g=Rk(s.fieldTransforms,u,o);return d.setAll(g),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ho?function(s,o,a,u){if(!rv(s.precondition,o))return a;const d=Rk(s.fieldTransforms,u,o),g=o.data;return g.setAll(bk(s)),g.setAll(d),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,rv(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function dK(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Ik(r.transform,i||null);null!=s&&(null===t&&(t=Sr.empty()),t.set(r.field,s))}return t||null}function Dk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&bd(r,i,(s,o)=>function uK(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof cc&&i instanceof cc||r instanceof lc&&i instanceof lc?bd(r.elements,i.elements,Ks):r instanceof Fd&&i instanceof Fd?Ks(r.Pe,i.Pe):r instanceof Vd&&i instanceof Vd);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Ld extends iv{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ho extends iv{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function bk(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Sk(n,e,t){const r=new Map;Ve(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,aK(o,a,t[i]))}return r}function Rk(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,oK(s,o,e))}return r}class Ud extends iv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GC extends iv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qC{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&lK(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Wp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_k();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=Tk(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Be.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ut())}isEqual(e){return this.batchId===e.batchId&&bd(this.mutations,e.mutations,(t,r)=>Dk(t,r))&&bd(this.baseMutations,e.baseMutations,(t,r)=>Dk(t,r))}}class WC{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ve(e.mutations.length===r.length);let i=rK;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new WC(e,t,r,i)}}class KC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class hK{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qn,Dt;function Mk(n){switch(n){default:return Ne();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function xk(n){if(void 0===n)return $n("GRPC error has no .code"),J.UNKNOWN;switch(n){case Qn.OK:return J.OK;case Qn.CANCELLED:return J.CANCELLED;case Qn.UNKNOWN:return J.UNKNOWN;case Qn.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Qn.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Qn.INTERNAL:return J.INTERNAL;case Qn.UNAVAILABLE:return J.UNAVAILABLE;case Qn.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Qn.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Qn.NOT_FOUND:return J.NOT_FOUND;case Qn.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Qn.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Qn.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Qn.ABORTED:return J.ABORTED;case Qn.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Qn.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Qn.DATA_LOSS:return J.DATA_LOSS;default:return Ne()}}(Dt=Qn||(Qn={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";function Nk(){return new TextEncoder}const fK=new rc([4294967295,4294967295],0);function Ok(n){const e=Nk().encode(n),t=new f1;return t.update(e),new Uint8Array(t.digest())}function kk(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new rc([t,r],0),new rc([i,s],0)]}class QC{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Kp(`Invalid padding: ${t}`);if(r<0)throw new Kp(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Kp(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Kp(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=rc.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(rc.fromNumber(r)));return 1===i.compare(fK)&&(i=new rc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Ok(e),[r,i]=kk(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new QC(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=Ok(e),[r,i]=kk(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Kp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qp{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Yp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Qp(Be.min(),i,new an(et),bi(),ut())}}class Yp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Yp(r,t,ut(),ut(),ut())}}class ov{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Vk{constructor(e,t){this.targetId=e,this.me=t}}class Fk{constructor(e,t,r=Vn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Lk{constructor(){this.fe=0,this.ge=Bk(),this.pe=Vn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ut(),t=ut(),r=ut();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ne()}}),new Yp(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Bk()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class pK{constructor(e){this.Le=e,this.Be=new Map,this.ke=bi(),this.qe=Uk(),this.Qe=new an(et)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ne()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Xy(s))if(0===r){const o=new Ce(s.path);this.Ue(t,o,fn.newNoDocument(o,Be.min()))}else Ve(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Bo(r).toUint8Array()}catch(u){if(u instanceof j1)return Bi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new QC(o,i,s)}catch(u){return Bi(u instanceof Kp?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Xy(a.target)){const u=new Ce(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,fn.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ut();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Qp(e,t,this.Qe,this.ke,r);return this.ke=bi(),this.qe=Uk(),this.Qe=new an(et),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Lk,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Gt(et),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||he("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Lk),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Uk(){return new an(Ce.comparator)}function Bk(){return new an(Ce.comparator)}const gK={asc:"ASCENDING",desc:"DESCENDING"},mK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_K={and:"AND",or:"OR"};class yK{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function YC(n,e){return n.useProto3Json||Op(e)?e:{value:e}}function Bd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vK(n,e){return Bd(n,e.toTimestamp())}function Hn(n){return Ve(!!n),Be.fromTimestamp(function(t){const r=Uo(t);return new yn(r.seconds,r.nanos)}(n))}function JC(n,e){return ZC(n,e).canonicalString()}function ZC(n,e){const t=(i=n,new Et(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function $k(n){const e=Et.fromString(n);return Ve(Xk(e)),e}function Jp(n,e){return JC(n.databaseId,e.path)}function Ys(n,e){const t=$k(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(Gk(t))}function Hk(n,e){return JC(n.databaseId,e)}function zk(n){const e=$k(n);return 4===e.length?Et.emptyPath():Gk(e)}function XC(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Gk(n){return Ve(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function qk(n,e,t){return{name:Jp(n,e),fields:t.value.mapValue.fields}}function Wk(n,e,t){const r=Ys(n,e.name),i=Hn(e.updateTime),s=e.createTime?Hn(e.createTime):Be.min(),o=new Sr({mapValue:{fields:e.fields}}),a=fn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Zp(n,e){let t;if(e instanceof Ld)t={update:qk(n,e.key,e.value)};else if(e instanceof Ud)t={delete:Jp(n,e.key)};else if(e instanceof Ho)t={update:qk(n,e.key,e.data),updateMask:bK(e.fieldMask)};else{if(!(e instanceof GC))return Ne();t={verify:Jp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Vd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof lc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ne()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:vK(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ne()),t;var s}function eT(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?In.updateTime(Hn(s.updateTime)):void 0!==s.exists?In.exists(s.exists):In.none():In.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Ve("REQUEST_TIME"===a.setToServerValue),u=new Vd):"appendMissingElements"in a?u=new cc(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new lc(a.removeAllFromArray.values||[]):"increment"in a?u=new Fd(o,a.increment):Ne();const d=hn.fromServerFormat(a.fieldPath);return new qp(d,u)}(n,i)):[];var s;if(e.update){const i=Ys(n,e.update.name),s=new Sr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Di((e.updateMask.fieldPaths||[]).map(g=>hn.fromServerFormat(g)));return new Ho(i,s,o,t,r)}return new Ld(i,s,t,r)}if(e.delete){const i=Ys(n,e.delete);return new Ud(i,t)}if(e.verify){const i=Ys(n,e.verify);return new GC(i,t)}return Ne()}function Kk(n,e){return{documents:[Hk(n,e.path)]}}function av(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Hk(n,i);const s=function(d){if(0!==d.length)return Zk($t.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(d){if(0!==d.length)return d.map(g=>{return{field:za((v=g).field),direction:CK(v.dir)};var v})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=YC(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i};var d}function Yk(n){let e=zk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ve(1===r);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=function(m){const v=Jk(m);return v instanceof $t&&LC(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(v=>{return new Bp(jd((C=v).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction));var C}));let a=null;t.limit&&(a=function(m){let v;return v="object"==typeof m?m.value:m,Op(v)?null:v}(t.limit));let u=null;var m;t.startAt&&(u=new Ha((m=t.startAt).values||[],!!m.before));let d=null;return t.endAt&&(d=function(m){return new Ha(m.values||[],!m.before)}(t.endAt)),uk(e,i,o,s,a,"F",u,d)}function Jk(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=jd(t.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=jd(t.unaryFilter.field);return wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=jd(t.unaryFilter.field);return wt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=jd(t.unaryFilter.field);return wt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(n):void 0!==n.fieldFilter?wt.create(jd((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return $t.create(t.compositeFilter.filters.map(r=>Jk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ne()}}(t.compositeFilter.op))}(n):Ne();var t}function CK(n){return gK[n]}function TK(n){return mK[n]}function DK(n){return _K[n]}function za(n){return{fieldPath:n.canonicalString()}}function jd(n){return hn.fromServerFormat(n.fieldPath)}function Zk(n){return n instanceof wt?function(t){if("=="===t.op){if(G1(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NAN"}};if(z1(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(G1(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NOT_NAN"}};if(z1(t.value))return{unaryFilter:{field:za(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(t.field),op:TK(t.op),value:t.value}}}(n):n instanceof $t?function(t){const r=t.getFilters().map(i=>Zk(i));return 1===r.length?r[0]:{compositeFilter:{op:DK(t.op),filters:r}}}(n):Ne()}function bK(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Xk(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class zo{constructor(e,t,r,i,s=Be.min(),o=Be.min(),a=Vn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new zo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class eV{constructor(e){this.ct=e}}function tV(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:uv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Jp(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Bd(s,o.version.toTimestamp()),createTime:Bd(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:dc(e.version)};else{if(!e.isUnknownDocument())return Ne();r.unknownDocument={path:t.path.toArray(),version:dc(e.version)}}var s,o;return r}function uv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function dc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hc(n){const e=new yn(n.seconds,n.nanoseconds);return Be.fromTimestamp(e)}function fc(n,e){const t=(e.baseMutations||[]).map(s=>eT(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>eT(n.ct,s)),i=yn.fromMillis(e.localWriteTimeMs);return new qC(e.batchId,i,t,r)}function Xp(n){const e=hc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hc(n.lastLimboFreeSnapshotVersion):Be.min();let r;return r=void 0!==n.query.documents?(Ve(1===(s=n.query).documents.length),zr(Nd(zk(s.documents[0])))):function(s){return zr(Yk(s))}(n.query),new zo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Vn.fromBase64String(n.resumeToken));var s}function nV(n,e){const t=dc(e.snapshotVersion),r=dc(e.lastLimboFreeSnapshotVersion);let i;i=Xy(e.target)?Kk(n.ct,e.target):av(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uc(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function tT(n){const e=Yk({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?tv(e,e.limit,"L"):e}function nT(n,e){return new KC(e.largestBatchId,eT(n.ct,e.overlayMutation))}function rV(n,e){const t=e.path.lastSegment();return[n,Hr(e.path.popLast()),t]}function iV(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:dc(r.readTime),documentKey:Hr(r.documentKey.path),largestBatchId:r.largestBatchId}}class RK{getBundleMetadata(e,t){return sV(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:hc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return sV(e).put({bundleId:(i=t).id,createTime:dc(Hn(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return oV(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:tT(s.bundledQuery),readTime:hc(s.readTime)};var s})}saveNamedQuery(e,t){return oV(e).put({name:(i=t).name,readTime:dc(Hn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function sV(n){return ur(n,"bundles")}function oV(n){return ur(n,"namedQueries")}class cv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new cv(e,t.uid||"")}getOverlay(e,t){return eg(e).get(rV(this.userId,t)).next(r=>r?nT(this.serializer,r):null)}getOverlays(e,t){const r=Qs();return H.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new KC(t,o);i.push(this.ht(e,a))}),H.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Hr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(eg(e).j("collectionPathOverlayIndex",a))}),H.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Qs(),s=Hr(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return eg(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=nT(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Qs();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return eg(e).J({index:"collectionGroupOverlayIndex",range:a},(u,d,g)=>{const m=nT(this.serializer,d);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):g.done()}).next(()=>s)}ht(e,t){return eg(e).put(function(i,s,o){const[a,u,d]=rV(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Zp(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function eg(n){return ur(n,"documentOverlays")}class PK{Pt(e){return ur(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?Vn.fromUint8Array(r):Vn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class pc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(vn(e.integerValue));else if("doubleValue"in e){const r=vn(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),kp(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Uo(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Bo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?q1(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Zy(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Ne()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(vn(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Ce.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function MK(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function aV(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=MK(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}pc.vt=new pc;class xK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=aV(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=aV(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class NK{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class OK{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class tg{constructor(){this.jt=new xK,this.Ht=new NK(this.jt),this.Jt=new OK(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class gc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gc(this.indexId,this.documentKey,this.arrayValue,r)}}function Ga(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=uV(n.arrayValue,e.arrayValue),0!==t?t:(t=uV(n.directionalValue,e.directionalValue),0!==t?t:Ce.comparator(n.documentKey,e.documentKey)))}function uV(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class cV{constructor(e){this.Xt=new Gt((t,r)=>hn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ve(e.collectionGroup===this.collectionId),this.nn)return!1;const t=RC(e);if(void 0!==t&&!this.sn(t))return!1;const r=ic(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new Gt(hn.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new sc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new sc(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new sc(r.field,"asc"===r.dir?0:1)));return new Sd(Sd.UNKNOWN_ID,this.collectionId,t,Rd.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function lV(n){var e,t;if(Ve(n instanceof wt||n instanceof $t),n instanceof wt){if(n instanceof sk){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>wt.create(n.field,"==",s)))||[];return $t.create(i,"or")}return n}const r=n.filters.map(i=>lV(i));return $t.create(r,n.op)}function kK(n){if(0===n.getFilters().length)return[];const e=sT(lV(n));return Ve(dV(e)),rT(e)||iT(e)?[e]:e.getFilters()}function rT(n){return n instanceof wt}function iT(n){return n instanceof $t&&LC(n)}function dV(n){return rT(n)||iT(n)||function(t){if(t instanceof $t&&FC(t)){for(const r of t.getFilters())if(!rT(r)&&!iT(r))return!1;return!0}return!1}(n)}function sT(n){if(Ve(n instanceof wt||n instanceof $t),n instanceof wt)return n;if(1===n.filters.length)return sT(n.filters[0]);const e=n.filters.map(r=>sT(r));let t=$t.create(e,n.op);return t=lv(t),dV(t)?t:(Ve(t instanceof $t),Ve(xd(t)),Ve(t.filters.length>1),t.filters.reduce((r,i)=>oT(r,i)))}function oT(n,e){let t;return Ve(n instanceof wt||n instanceof $t),Ve(e instanceof wt||e instanceof $t),t=n instanceof wt?e instanceof wt?$t.create([n,e],"and"):hV(n,e):e instanceof wt?hV(e,n):function(i,s){if(Ve(i.filters.length>0&&s.filters.length>0),xd(i)&&xd(s))return nk(i,s.getFilters());const o=FC(i)?i:s,a=FC(i)?s:i,u=o.filters.map(d=>oT(d,a));return $t.create(u,"or")}(n,e),lv(t)}function hV(n,e){if(xd(e))return nk(e,n.getFilters());{const t=e.filters.map(r=>oT(n,r));return $t.create(t,"or")}}function lv(n){if(Ve(n instanceof wt||n instanceof $t),n instanceof wt)return n;const e=n.getFilters();if(1===e.length)return lv(e[0]);if(ek(n))return n;const t=e.map(i=>lv(i)),r=[];return t.forEach(i=>{i instanceof wt?r.push(i):i instanceof $t&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:$t.create(r,n.op)}class VK{constructor(){this.un=new aT}addToCollectionParentIndex(e,t){return this.un.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(ji.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class aT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Gt(Et.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gt(Et.comparator)).toArray()}}const dv=new Uint8Array(0);class FK{constructor(e,t){this.databaseId=t,this.cn=new aT,this.ln=new $o(r=>uc(r),(r,i)=>jp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Hr(i)};return fV(e).put(s)}return H.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[A1(t),""],!1,!0);return fV(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Ws(o.parent))}return r})}addFieldIndex(e,t){const r=ng(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Hd(e);return s.next(a=>{o.put(iV(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=ng(e),i=Hd(e),s=$d(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=ng(e),r=$d(e),i=Hd(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return H.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new cV(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=$d(e);let i=!0;const s=new Map;return H.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ut();const a=[];return H.forEach(s,(u,d)=>{var q;he("IndexedDbIndexManager",`Using index ${q=u,`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(ae=>`${ae.fieldPath}:${ae.kind}`).join(",")}`} to execute ${uc(t)}`);const g=function(q,ae){const ye=RC(ae);if(void 0===ye)return null;for(const Ue of ev(q,ye.fieldPath))switch(Ue.op){case"array-contains-any":return Ue.value.arrayValue.values||[];case"array-contains":return[Ue.value]}return null}(d,u),m=function(q,ae){const ye=new Map;for(const Ue of ic(ae))for(const V of ev(q,Ue.fieldPath))switch(V.op){case"==":case"in":ye.set(Ue.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return ye.set(Ue.fieldPath.canonicalString(),V.value),Array.from(ye.values())}return null}(d,u),v=function(q,ae){const ye=[];let Ue=!0;for(const V of ic(ae)){const b=0===V.kind?ok(q,V.fieldPath,q.startAt):ak(q,V.fieldPath,q.startAt);ye.push(b.value),Ue&&(Ue=b.inclusive)}return new Ha(ye,Ue)}(d,u),w=function(q,ae){const ye=[];let Ue=!0;for(const V of ic(ae)){const b=0===V.kind?ak(q,V.fieldPath,q.endAt):ok(q,V.fieldPath,q.endAt);ye.push(b.value),Ue&&(Ue=b.inclusive)}return new Ha(ye,Ue)}(d,u),C=this.In(u,d,v),D=this.In(u,d,w),M=this.Tn(u,d,m),z=this.En(u.indexId,g,C,v.inclusive,D,w.inclusive,M);return H.forEach(z,F=>r.G(F,t.limit).next(q=>{q.forEach(ae=>{const ye=Ce.fromSegments(ae.documentKey);o.has(ye)||(o=o.add(ye),a.push(ye))})}))}).next(()=>a)}return H.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:kK($t.create(e.filters,"and")).map(r=>BC(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),d=u/(null!=t?t.length:1),g=[];for(let m=0;m<u;++m){const v=t?this.dn(t[m/d]):dv,w=this.An(e,v,r[m%d],i),C=this.Rn(e,v,s[m%d],o),D=a.map(M=>this.An(e,v,M,!0));g.push(...this.createRange(w,C,D))}return g}An(e,t,r,i){const s=new gc(e,Ce.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new gc(e,Ce.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new cV(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return H.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new Gt(hn.comparator),g=!1;for(const m of u.filters)for(const v of m.getFlattenedFilters())v.field.isKeyField()||("array-contains"===v.op||"array-contains-any"===v.op?g=!0:d=d.add(v.field));for(const m of u.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(g?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new tg;for(const i of ic(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);pc.vt.It(s,o)}return r.zt()}dn(e){const t=new tg;return pc.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new tg;return pc.vt.It(ac(this.databaseId,t),r.Yt(function(s){const o=ic(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new tg);let s=0;for(const o of ic(e)){const a=r[s++];for(const u of i)if(this.fn(t,o.fieldPath)&&Lp(a))i=this.gn(i,o,a);else{const d=u.Yt(o.kind);pc.vt.It(a,d)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new tg;u.seed(a.zt()),pc.vt.It(o,u.Yt(t.kind)),s.push(u)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof wt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ng(e),i=Hd(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return H.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(g,m){const v=m?new Rd(m.sequenceNumber,new ji(hc(m.readTime),new Ce(Ws(m.documentKey)),m.largestBatchId)):Rd.empty(),w=g.fields.map(([C,D])=>new sc(hn.fromServerFormat(C),D));return new Sd(g.indexId,g.collectionGroup,w,v)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:et(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ng(e),s=Hd(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>H.forEach(a,u=>s.put(iV(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return H.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?H.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),H.forEach(a,u=>this.wn(e,i,u).next(d=>{const g=this.Sn(s,u);return d.isEqual(g)?H.resolve():this.bn(e,s,u,d,g)}))))})}Dn(e,t,r,i){return $d(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return $d(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=$d(e);let s=new Gt(Ga);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new gc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Gt(Ga);const i=this.Vn(t,e);if(null==i)return r;const s=RC(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Lp(o))for(const a of o.arrayValue.values||[])r=r.add(new gc(t.indexId,e.key,this.dn(a),i))}else r=r.add(new gc(t.indexId,e.key,dv,i));return r}bn(e,t,r,i,s){he("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,d,g,m,v){const w=u.getIterator(),C=d.getIterator();let D=Pd(w),M=Pd(C);for(;D||M;){let z=!1,F=!1;if(D&&M){const q=g(D,M);q<0?F=!0:q>0&&(z=!0)}else null!=D?F=!0:z=!0;z?(m(M),M=Pd(C)):F?(v(D),D=Pd(w)):(D=Pd(w),M=Pd(C))}}(i,s,Ga,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),H.waitFor(o)}yn(e){let t=1;return Hd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Ga(o,a)).filter((o,a,u)=>!a||0!==Ga(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=Ga(o,e),u=Ga(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,dv,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,dv,[]]))}return s}Cn(e,t){return Ga(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(pV)}getMinOffset(e,t){return H.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||Ne())).next(pV)}}function fV(n){return ur(n,"collectionParents")}function $d(n){return ur(n,"indexEntries")}function ng(n){return ur(n,"indexConfiguration")}function Hd(n){return ur(n,"indexState")}function pV(n){Ve(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;PC(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ji(e.readTime,e.documentKey,t)}const gV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gr(e,Gr.DEFAULT_COLLECTION_PERCENTILE,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function mV(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:o},(g,m,v)=>(a++,v.delete()));s.push(u.next(()=>{Ve(1===a)}));const d=[];for(const g of t.mutations){const m=N1(e,g.key.path,t.batchId);s.push(i.delete(m)),d.push(g.key)}return H.waitFor(s).next(()=>d)}function hv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ne();e=n.noDocument}return JSON.stringify(e).length}Gr.DEFAULT_COLLECTION_PERCENTILE=10,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gr.DEFAULT=new Gr(41943040,Gr.DEFAULT_COLLECTION_PERCENTILE,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gr.DISABLED=new Gr(-1,0,0);class fv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Ve(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new fv(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qa(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=zd(e),o=qa(e);return o.add({}).next(a=>{Ve("number"==typeof a);const u=new qC(a,t,r,i),d=function(w,C,D){const M=D.baseMutations.map(F=>Zp(w.ct,F)),z=D.mutations.map(F=>Zp(w.ct,F));return{userId:C,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:M,mutations:z}}(this.serializer,this.userId,u),g=[];let m=new Gt((v,w)=>et(v.canonicalString(),w.canonicalString()));for(const v of i){const w=N1(this.userId,v.key.path,a);m=m.add(v.key.path.popLast()),g.push(o.put(d)),g.push(s.put(w,CW))}return m.forEach(v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),H.waitFor(g).next(()=>u)})}lookupMutationBatch(e,t){return qa(e).get(t).next(r=>r?(Ve(r.userId===this.userId),fc(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?H.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return qa(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Ve(a.batchId>=r),s=fc(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return qa(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qa(e).U("userMutationsIndex",t).next(r=>r.map(i=>fc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Gy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return zd(e).J({range:i},(o,a,u)=>{const[d,g,m]=o,v=Ws(g);if(d===this.userId&&t.path.isEqual(v))return qa(e).get(m).next(w=>{if(!w)throw Ne();Ve(w.userId===this.userId),s.push(fc(this.serializer,w))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(et);const i=[];return t.forEach(s=>{const o=Gy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=zd(e).J({range:a},(d,g,m)=>{const[v,w,C]=d,D=Ws(w);v===this.userId&&s.path.isEqual(D)?r=r.add(C):m.done()});i.push(u)}),H.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Gy(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Gt(et);return zd(e).J({range:o},(u,d,g)=>{const[m,v,w]=u,C=Ws(v);m===this.userId&&r.isPrefixOf(C)?C.length===i&&(a=a.add(w)):g.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(qa(e).get(s).next(o=>{if(null===o)throw Ne();Ve(o.userId===this.userId),r.push(fc(this.serializer,o))}))}),H.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return mV(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),H.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return H.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return zd(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Ws(s[1]);i.push(u)}else a.done()}).next(()=>{Ve(0===i.length)})})}containsKey(e,t){return _V(e,this.userId,t)}Nn(e){return yV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function _V(n,e,t){const r=Gy(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return zd(n).J({range:s,H:!0},(a,u,d)=>{const[g,m,v]=a;g===e&&m===i&&(o=!0),d.done()}).next(()=>o)}function qa(n){return ur(n,"mutations")}function zd(n){return ur(n,"documentMutations")}function yV(n){return ur(n,"mutationQueues")}class mc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new mc(0)}static kn(){return new mc(-1)}}class LK{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new mc(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Be.fromTimestamp(new yn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Gd(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Ve(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Gd(e).J((o,a)=>{const u=Xp(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>H.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Gd(e).J((r,i)=>{const s=Xp(i);t(s)})}qn(e){return vV(e).get("targetGlobalKey").next(t=>(Ve(null!==t),t))}Qn(e,t){return vV(e).put("targetGlobalKey",t)}Kn(e,t){return Gd(e).put(nV(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=uc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Gd(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=Xp(a);jp(t,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Wa(e);return t.forEach(o=>{const a=Hr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),H.waitFor(i)}removeMatchingKeys(e,t,r){const i=Wa(e);return H.forEach(t,s=>{const o=Hr(s.path);return H.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Wa(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Wa(e);let s=ut();return i.J({range:r,H:!0},(o,a,u)=>{const d=Ws(o[1]),g=new Ce(d);s=s.add(g)}).next(()=>s)}containsKey(e,t){const r=Hr(t.path),i=IDBKeyRange.bound([r],[A1(r)],!1,!0);let s=0;return Wa(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}ot(e,t){return Gd(e).get(t).next(r=>r?Xp(r):null)}}function Gd(n){return ur(n,"targets")}function vV(n){return ur(n,"targetGlobal")}function Wa(n){return ur(n,"targetDocuments")}function IV([n,e],[t,r]){const i=et(n,t);return 0===i?et(e,r):i}class UK{constructor(e){this.Un=e,this.buffer=new Gt(IV),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();IV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class EV{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;he("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ie.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Fa(r)?he("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Va(r)}yield t.Hn(3e5)}))}}class BK{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return H.resolve($i.oe);const r=new UK(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(gV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gV):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,u,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Dd()<=Gs.$b.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-g}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(d-u)+`ms\nTotal Duration: ${d-g}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class jK{constructor(e,t){this.db=e,this.garbageCollector=function wV(n,e){return new BK(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return pv(e,r)}removeReference(e,t,r){return pv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return pv(e,t)}nr(e,t){return function(i,s){let o=!1;return yV(i).Y(a=>_V(i,a,s).next(u=>(u&&(o=!0),H.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const u=this.nr(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Be.min()),Wa(e).delete([0,Hr(o.path)])))});i.push(u)}}).next(()=>H.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return pv(e,t)}tr(e,t){const r=Wa(e);let i,s=$i.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==$i.oe&&t(new Ce(Ws(i)),s),s=d,i=u):s=$i.oe}).next(()=>{s!==$i.oe&&t(new Ce(Ws(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function pv(n,e){return Wa(n).put((i=n.currentSequenceNumber,{targetId:0,path:Hr(e.path),sequenceNumber:i}));var i}class AV{constructor(){this.changes=new $o(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $K{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _c(e).put(r)}removeEntry(e,t,r){return _c(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],uv(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=fn.newInvalidDocument(t);return _c(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rg(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:fn.newInvalidDocument(t)};return _c(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rg(t))},(i,s)=>{r={document:this.ir(t,s),size:hv(s)}}).next(()=>r)}getEntries(e,t){let r=bi();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=bi(),i=new an(Ce.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,hv(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return H.resolve();let i=new Gt(bV);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(rg(i.first()),rg(i.last())),o=i.getIterator();let a=o.getNext();return _c(e).J({index:"documentKeyIndex",range:s},(u,d,g)=>{const m=Ce.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&bV(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?g.$(rg(a)):g.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),uv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _c(e).U(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let g=bi();for(const m of d){const v=this.ir(Ce.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);v.isFoundDocument()&&(Hp(t,v)||i.has(v.key))&&(g=g.insert(v.key,v))}return g})}getAllFromCollectionGroup(e,t,r,i){let s=bi();const o=DV(t,r),a=DV(t,ji.max());return _c(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,g)=>{const m=this.ir(Ce.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(m.key,m),s.size===i&&g.done()}).next(()=>s)}newChangeBuffer(e){return new HK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return TV(e).get("remoteDocumentGlobalKey").next(t=>(Ve(!!t),t))}rr(e,t){return TV(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function SK(n,e){let t;if(e.document)t=Wk(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ce.fromSegments(e.noDocument.path),i=hc(e.noDocument.readTime);t=fn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ne();{const r=Ce.fromSegments(e.unknownDocument.path),i=hc(e.unknownDocument.version);t=fn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new yn(i[0],i[1]);return Be.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Be.min()))return r}return fn.newInvalidDocument(e)}}function CV(n){return new $K(n)}class HK extends AV{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new $o(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Gt((s,o)=>et(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=tV(this.cr.serializer,o);i=i.add(s.path.popLast());const d=hv(u);r+=d-a.size,t.push(this.cr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=tV(this.cr.serializer,o.convertToNoDocument(Be.min()));t.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),H.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function TV(n){return ur(n,"remoteDocumentGlobal")}function _c(n){return ur(n,"remoteDocumentsV14")}function rg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function DV(n,e){const t=e.documentKey.path.toArray();return[n,uv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bV(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=et(t[s],r[s]),i)return i;return i=et(t.length,r.length),i||(i=et(t[t.length-2],r[r.length-2]),i||et(t[t.length-1],r[r.length-1]))}class zK{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class SV{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Wp(r.mutation,i,Di.empty(),yn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ut()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ut()){const i=Qs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=zp();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Qs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ut()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=bi();const o=Gp(),a=Gp();return t.forEach((u,d)=>{const g=r.get(d.key);i.has(d.key)&&(void 0===g||g.mutation instanceof Ho)?s=s.insert(d.key,d):void 0!==g?(o.set(d.key,g.mutation.getFieldMask()),Wp(g.mutation,d,g.mutation.getFieldMask(),yn.now())):o.set(d.key,Di.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,g)=>o.set(d,g)),t.forEach((d,g)=>{var m;return a.set(d,new zK(g,null!==(m=o.get(d))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Gp();let i=new an((o,a)=>o-a),s=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=t.get(u);if(null===d)return;let g=r.get(u)||Di.empty();g=a.applyToLocalView(d,g),r.set(u,g);const m=(i.get(a.batchId)||ut()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,g=u.value,m=_k();g.forEach(v=>{if(!s.has(v)){const w=Tk(t.get(v),r.get(v));null!==w&&m.set(v,w),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Ce.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):jC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):H.resolve(Qs());let a=-1,u=s;return o.next(d=>H.forEach(d,(g,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(g)?H.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{u=u.insert(g,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ut())).next(g=>({batchId:a,changes:mk(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next(r=>{let i=zp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=zp();return this.indexManager.getCollectionParents(e,s).next(a=>H.forEach(a,u=>{const d=(m=t,v=u.child(s),new jo(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,v;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(g=>{g.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,d)=>{const g=d.getKey();null===o.get(g)&&(o=o.insert(g,fn.newInvalidDocument(g)))});let a=zp();return o.forEach((u,d)=>{const g=s.get(u);void 0!==g&&Wp(g.mutation,d,Di.empty(),yn.now()),Hp(t,d)&&(a=a.insert(u,d))}),a})}}class GK{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return H.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Hn(i.createTime)}),H.resolve();var i}getNamedQuery(e,t){return H.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:tT(i.bundledQuery),readTime:Hn(i.readTime)}),H.resolve();var i}}class qK{constructor(){this.overlays=new an(Ce.comparator),this.Ir=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qs();return H.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),H.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){const i=Qs(),s=t.length+1,o=new Ce(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return H.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new an((d,g)=>d-g);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let g=s.get(d.largestBatchId);null===g&&(g=Qs(),s=s.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const a=Qs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,g)=>a.set(d,g)),!(a.size()>=i)););return H.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new KC(t,r));let s=this.Ir.get(t);void 0===s&&(s=ut(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class WK{constructor(){this.sessionToken=Vn.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}class uT{constructor(){this.Tr=new Gt(_r.Er),this.dr=new Gt(_r.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new _r(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new _r(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Ce(new Et([])),r=new _r(t,e),i=new _r(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Ce(new Et([])),r=new _r(t,e),i=new _r(t,e+1);let s=ut();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new _r(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class _r{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Ce.comparator(e.key,t.key)||et(e.wr,t.wr)}static Ar(e,t){return et(e.wr,t.wr)||Ce.comparator(e.key,t.key)}}class KK{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Gt(_r.Er)}checkEmpty(e){return H.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new qC(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new _r(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,t){return H.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new _r(t,0),i=new _r(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(et);return t.forEach(i=>{const s=new _r(i,0),o=new _r(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Ce.isDocumentKey(s)||(s=s.child(""));const o=new _r(new Ce(s),0);let a=new Gt(et);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.wr)),!0)},o),H.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ve(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return H.forEach(t.mutations,i=>{const s=new _r(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new _r(t,0),i=this.br.firstAfterOrEqual(r);return H.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return H.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class QK{constructor(e){this.Mr=e,this.docs=new an(Ce.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(t))}getEntries(e,t){let r=bi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():fn.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=bi();const o=t.path,a=new Ce(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:g}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||PC(T1(g),r)<=0||(i.has(g.key)||Hp(t,g))&&(s=s.insert(g.key,g.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ne()}Or(e,t){return H.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new YK(this)}getSize(e){return H.resolve(this.size)}}class YK extends AV{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),H.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class JK{constructor(e){this.persistence=e,this.Nr=new $o(t=>uc(t),jp),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new uT,this.targetCount=0,this.kr=mc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),H.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new mc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Kn(t),H.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(s).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),H.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this.Br.containsKey(t))}}class cT{constructor(e,t){this.qr={},this.overlays={},this.Qr=new $i(0),this.Kr=!1,this.Kr=!0,this.$r=new WK,this.referenceDelegate=e(this),this.Ur=new JK(this),this.indexManager=new VK,this.remoteDocumentCache=new QK(r=>this.referenceDelegate.Wr(r)),this.serializer=new eV(t),this.Gr=new GK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qK,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new KK(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const i=new ZK(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class ZK extends b1{constructor(e){super(),this.currentSequenceNumber=e}}class gv{constructor(e){this.persistence=e,this.Jr=new uT,this.Yr=null}static Zr(e){return new gv(e)}get Xr(){if(this.Yr)return this.Yr;throw Ne()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),H.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const i=Ce.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Be.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return H.or([()=>H.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class XK{constructor(e){this.serializer=e}O(e,t,r,i){const s=new zy("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",x1,{unique:!0}),u.createObjectStore("documentMutations"),RV(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=H.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),RV(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Be.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",g)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").U().next(g=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",x1,{unique:!0});const m=d.store("mutations"),v=g.map(w=>m.put(w));return H.waitFor(v)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:VW});d.createIndex("collectionPathOverlayIndex",FW,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",LW,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:TW});d.createIndex("documentKeyIndex",DW),d.createIndex("collectionGroupIndex",bW)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:xW}).createIndex("sequenceNumberIndex",NW,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:OW}).createIndex("documentKeyIndex",kW,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(u){u.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=hv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>H.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>H.forEach(a,u=>{Ve(u.userId===s.userId);const d=fc(this.serializer,u);return mV(e,s.userId,d).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new Et(o),d=[0,Hr(u)];s.push(t.get(d).next(g=>g?H.resolve():t.put({targetId:0,path:Hr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>H.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:MW});const r=t.store("collectionParents"),i=new aT,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Hr(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new Et(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],d)=>{const g=Ws(a);return s(g.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=Xp(i),o=nV(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(m=o,m.document?new Ce(Et.fromString(m.document.name).popFirst(5)):m.noDocument?Ce.fromSegments(m.noDocument.path):m.unknownDocument?Ce.fromSegments(m.unknownDocument.path):Ne()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(d))}).next(()=>H.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=CV(this.serializer),s=new cT(gv.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var d;let g=null!==(d=a.get(u.userId))&&void 0!==d?d:ut();fc(this.serializer,u).keys().forEach(m=>g=g.add(m)),a.set(u.userId,g)}),H.forEach(a,(u,d)=>{const g=new gr(d),m=cv.lt(this.serializer,g),v=s.getIndexManager(g),w=fv.lt(g,this.serializer,v,s.referenceDelegate);return new SV(i,w,m,v).recalculateAndSaveOverlaysForDocumentKeys(new OC(t,$i.oe),u).next()})})}}function RV(n){n.createObjectStore("targetDocuments",{keyPath:RW}).createIndex("documentTargetsIndex",PW,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",SW,{unique:!0}),n.createObjectStore("targetGlobal")}const lT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dT{constructor(e,t,r,i,s,o,a,u,d,g,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=d,this.li=g,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!dT.D())throw new ce(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jK(this,i),this.Ai=t+"main",this.serializer=new eV(u),this.Ri=new qs(this.Ai,this.hi,new XK(this.serializer)),this.$r=new PK,this.Ur=new LK(this.referenceDelegate,this.serializer),this.remoteDocumentCache=CV(this.serializer),this.Gr=new RK,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===g&&$n("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ce(J.FAILED_PRECONDITION,lT);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new $i(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,ie.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,ie.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,ie.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_v(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Fa(e))return he("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return he("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ig(e).get("owner").next(t=>H.resolve(this.vi(t)))}Ci(e){return _v(e).delete(this.clientId)}Fi(){var e=this;return(0,ie.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ur(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return H.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?H.resolve(!0):ig(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ce(J.FAILED_PRECONDITION,lT);return!1}}return!(!this.networkEnabled||!this.inForeground)||_v(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&he("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ie.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new OC(t,$i.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>_v(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return fv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new FK(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return cv.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){he("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(u=this.hi)?jW:16===u?BW:15===u?NC:14===u?V1:13===u?k1:12===u?UW:11===u?O1:void Ne();var u;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new OC(a,this.Qr?this.Qr.next():$i.oe),"readwrite-primary"===t?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw $n(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ce(J.FAILED_PRECONDITION,D1);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return ig(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ce(J.FAILED_PRECONDITION,lT)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ig(e).put("owner",t)}static D(){return qs.D()}bi(e){const t=ig(e);return t.get("owner").next(r=>this.vi(r)?(he("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):H.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&($n(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,Vt.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return he("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return $n("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){$n("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ig(n){return ur(n,"owner")}function _v(n){return ur(n,"clientMetadata")}function hT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class fT{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ut(),i=ut();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new fT(e,t.fromCache,r,i)}}class e7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class PV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,Vt.nr)()?8:S1((0,Vt.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new e7;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Dd()<=Gs.$b.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",kd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(Dd()<=Gs.$b.DEBUG&&he("QueryEngine","Query:",kd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Dd()<=Gs.$b.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",kd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(t))):H.resolve())}Yi(e,t){if(ck(t))return H.resolve(null);let r=zr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=tv(t,null,"F"),r=zr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ut(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(t,a);return this.ns(t,d,o,u.readTime)?this.Yi(e,tv(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return ck(t)||i.isEqual(Be.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?H.resolve(null):(Dd()<=Gs.$b.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),kd(t)),this.rs(e,o,t,C1(i,-1)).next(a=>a))})}ts(e,t){let r=new Gt(pk(e));return t.forEach((i,s)=>{Hp(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Dd()<=Gs.$b.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",kd(t)),this.Ji.getDocumentsMatchingQuery(e,t,ji.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class t7{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new an(et),this._s=new $o(s=>uc(s),jp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function MV(n,e,t,r){return new t7(n,e,t,r)}function xV(n,e){return pT.apply(this,arguments)}function pT(){return(pT=(0,ie.A)(function*(n,e){const t=Ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ut();for(const d of i){o.push(d.batchId);for(const g of d.mutations)u=u.add(g.key)}for(const d of s){a.push(d.batchId);for(const g of d.mutations)u=u.add(g.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function NV(n){const e=Ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function OV(n,e,t){let r=ut(),i=ut();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=bi();return t.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Be.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):he("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function i7(n,e){const t=Ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qd(n,e){const t=Ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,H.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new zo(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Wd(n,e,t){return gT.apply(this,arguments)}function gT(){return(gT=(0,ie.A)(function*(n,e,t){const r=Ee(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Fa(o))throw o;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function yv(n,e,t){const r=Ee(n);let i=Be.min(),s=ut();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,g){const m=Ee(u),v=m._s.get(g);return void 0!==v?H.resolve(m.os.get(v)):m.Ur.getTargetData(d,g)}(r,o,zr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Be.min(),t?s:ut())).next(a=>(FV(r,fk(e),a),{documents:a,Ts:s})))}function kV(n,e){const t=Ee(n),r=Ee(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function VV(n,e){const t=Ee(n),r=t.us.get(e)||Be.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,C1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(FV(t,e,i),i))}function FV(n,e,t){let r=n.us.get(e)||Be.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function mT(){return(mT=(0,ie.A)(function*(n,e,t,r){const i=Ee(n);let s=ut(),o=bi();for(const d of t){const g=e.Es(d.metadata.name);d.document&&(s=s.add(g));const m=e.ds(d);m.setReadTime(e.As(d.metadata.readTime)),o=o.insert(g,m)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield qd(i,(g=r,zr(Nd(Et.fromString(`__bundle__/docs/${g}`)))));var g;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>OV(d,a,o).next(g=>(a.apply(d),g)).next(g=>i.Ur.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.Ur.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,g.Ps,g.Is)).next(()=>g.Ps)))})).apply(this,arguments)}function o7(n,e){return _T.apply(this,arguments)}function _T(){return(_T=(0,ie.A)(function*(n,e,t=ut()){const r=yield qd(n,zr(tT(e.bundledQuery))),i=Ee(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Hn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Vn.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function LV(n,e){return`firestore_clients_${n}_${e}`}function UV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function yT(n,e){return`firestore_targets_${n}_${e}`}class vv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new ce(i.error.code,i.error.message))),o?new vv(e,t,i.state,s):($n("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ce(r.error.code,r.error.message))),s?new sg(e,r.state,i):($n("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Iv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=HC();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=P1(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Iv(e,s):($n("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class vT{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vT(t.clientId,t.onlineState):($n("SharedClientState",`Failed to parse online state: ${e}`),null)}}class IT{constructor(){this.activeTargetIds=HC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ET{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new an(et),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=LV(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new IT),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ie.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(LV(e.persistenceKey,i));if(s){const o=Iv.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(yT(this.persistenceKey,e));if(i){const s=sg.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yT(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return he("SharedClientState","READ",e,t),t}setItem(e,t){he("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){he("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(he("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void $n("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,ie.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=$i.oe;if(null!=o)try{const u=JSON.parse(o);Ve("number"==typeof u),a=u}catch(u){$n("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==$i.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new vv(this.currentUser,e,t,r),s=UV(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=UV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=yT(this.persistenceKey,e),s=new sg(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return Iv.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return vv.Rs(new gr(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return sg.Rs(i,t)}Ls(e){return vT.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,ie.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);he("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=HC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class BV{constructor(){this.so=new IT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new IT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class a7{_o(e){}shutdown(){}}class jV{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ev=null;function wT(){return null===Ev?Ev=268435456+Math.round(2147483648*Math.random()):Ev++,"0x"+Ev.toString(16)}const u7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class c7{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const qr="WebChannelConnection";class l7 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=wT(),u=this.xo(t,r.toUriEncodedString());he("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,u,d,i).then(g=>(he("RestConnection",`Received RPC '${t}' ${a}: `,g),g),g=>{throw Bi("RestConnection",`RPC '${t}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Td,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${u7[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=wT();return new Promise((o,a)=>{const u=new p1;u.setWithCredentials(!0),u.listenOnce(g1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Hy.NO_ERROR:const g=u.getResponseJson();he(qr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),o(g);break;case Hy.TIMEOUT:he(qr,`RPC '${e}' ${s} timed out`),a(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case Hy.HTTP_ERROR:const m=u.getStatus();if(he(qr,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const w=v?.error;if(w&&w.status&&w.message){const C=function(M){const z=M.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(z)>=0?z:J.UNKNOWN}(w.status);a(new ce(C,w.message))}else a(new ce(J.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ce(J.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{he(qr,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);he(qr,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){const i=wT(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=y1(),a=_1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const g=s.join("");he(qr,`Creating RPC '${e}' stream ${i}: ${g}`,u);const m=o.createWebChannel(g,u);let v=!1,w=!1;const C=new c7({Io:M=>{w?he(qr,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(v||(he(qr,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),he(qr,`RPC '${e}' stream ${i} sending:`,M),m.send(M))},To:()=>m.close()}),D=(M,z,F)=>{M.listen(z,q=>{try{F(q)}catch(ae){setTimeout(()=>{throw ae},0)}})};return D(m,Mp.EventType.OPEN,()=>{w||(he(qr,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),D(m,Mp.EventType.CLOSE,()=>{w||(w=!0,he(qr,`RPC '${e}' stream ${i} transport closed`),C.So())}),D(m,Mp.EventType.ERROR,M=>{w||(w=!0,Bi(qr,`RPC '${e}' stream ${i} transport errored:`,M),C.So(new ce(J.UNAVAILABLE,"The operation could not be completed")))}),D(m,Mp.EventType.MESSAGE,M=>{var z;if(!w){const F=M.data[0];Ve(!!F);const ae=F.error||(null===(z=F[0])||void 0===z?void 0:z.error);if(ae){he(qr,`RPC '${e}' stream ${i} received error:`,ae);const ye=ae.status;let Ue=function(O){const L=Qn[O];if(void 0!==L)return xk(L)}(ye),V=ae.message;void 0===Ue&&(Ue=J.INTERNAL,V="Unknown error status: "+ye+" with message "+ae.message),w=!0,C.So(new ce(Ue,V)),m.close()}else he(qr,`RPC '${e}' stream ${i} received:`,F),C.bo(F)}}),D(a,m1.STAT_EVENT,M=>{M.stat===bC.PROXY?he(qr,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===bC.NOPROXY&&he(qr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function $V(){return typeof window<"u"?window:null}function wv(){return typeof document<"u"?document:null}function og(n){return new yK(n,!0)}class AT{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class HV{constructor(e,t,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new AT(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,ie.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,ie.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,ie.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?($n(t.toString()),$n("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===J.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ce(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,ie.A)(function*(){e.state=0,e.start()}))}I_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d7 extends HV{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function EK(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:Ne(),i=e.targetChange.targetIds||[],s=function(d,g){return d.useProto3Json?(Ve(void 0===g||"string"==typeof g),Vn.fromBase64String(g||"")):(Ve(void 0===g||g instanceof Buffer||g instanceof Uint8Array),Vn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const g=void 0===d.code?J.UNKNOWN:xk(d.code);return new ce(g,d.message||"")}(o);t=new Fk(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Ys(n,r.document.name),s=Hn(r.document.updateTime),o=r.document.createTime?Hn(r.document.createTime):Be.min(),a=new Sr({mapValue:{fields:r.document.fields}}),u=fn.newFoundDocument(i,s,o,a);t=new ov(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Ys(n,r.document),s=r.readTime?Hn(r.readTime):Be.min(),o=fn.newNoDocument(i,s);t=new ov([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Ys(n,r.document);t=new ov([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ne();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new hK(i,s);t=new Vk(r.targetId,o)}}var d;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Be.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Be.min():o.readTime?Hn(o.readTime):Be.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=XC(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=Xy(u)?{documents:Kk(s,u)}:{query:av(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=jk(s,o.resumeToken);const d=YC(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Be.min())>0){a.readTime=Bd(s,o.snapshotVersion.toTimestamp());const d=YC(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function AK(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=XC(this.serializer),t.removeTarget=e,this.a_(t)}}class h7 extends HV{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function wK(n,e){return n&&n.length>0?(Ve(void 0!==e),n.map(t=>function(i,s){let o=Hn(i.updateTime?i.updateTime:s);return o.isEqual(Be.min())&&(o=Hn(s)),new cK(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Hn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=XC(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Zp(this.serializer,r))};this.a_(t)}}class f7 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,ZC(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ce(J.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,ZC(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(J.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class p7{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($n(t),this.D_=!1):he("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class g7{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,ie.A)(function*(){var u;Ka(o)&&(he("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,ie.A)(function*(g){const m=Ee(g);m.L_.add(4),yield Kd(m),m.q_.set("Unknown"),m.L_.delete(4),yield ag(m)}),function d(g){return u.apply(this,arguments)})(o))}))}),this.q_=new p7(r,i)}}function ag(n){return CT.apply(this,arguments)}function CT(){return(CT=(0,ie.A)(function*(n){if(Ka(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function Kd(n){return TT.apply(this,arguments)}function TT(){return(TT=(0,ie.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function Av(n,e){const t=Ee(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),ST(t)?bT(t):Jd(t).r_()&&DT(t,e))}function Qd(n,e){const t=Ee(n),r=Jd(t);t.N_.delete(e),r.r_()&&zV(t,e),0===t.N_.size&&(r.r_()?r.o_():Ka(t)&&t.q_.set("Unknown"))}function DT(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jd(n).A_(e)}function zV(n,e){n.Q_.xe(e),Jd(n).R_(e)}function bT(n){n.Q_=new pK({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Jd(n).start(),n.q_.v_()}function ST(n){return Ka(n)&&!Jd(n).n_()&&n.N_.size>0}function Ka(n){return 0===Ee(n).L_.size}function GV(n){n.Q_=void 0}function m7(n){return RT.apply(this,arguments)}function RT(){return(RT=(0,ie.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function _7(n){return PT.apply(this,arguments)}function PT(){return(PT=(0,ie.A)(function*(n){n.N_.forEach((e,t)=>{DT(n,e)})})).apply(this,arguments)}function y7(n,e){return MT.apply(this,arguments)}function MT(){return(MT=(0,ie.A)(function*(n,e){GV(n),ST(n)?(n.q_.M_(e),bT(n)):n.q_.set("Unknown")})).apply(this,arguments)}function v7(n,e,t){return xT.apply(this,arguments)}function xT(){return xT=(0,ie.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof Fk&&2===e.state&&e.cause)try{yield(r=(0,ie.A)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.N_.delete(u),s.Q_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Cv(n,r)}else if(e instanceof ov?n.Q_.Ke(e):e instanceof Vk?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Be.min()))try{const r=yield NV(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const g=s.N_.get(d);g&&s.N_.set(d,g.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const g=s.N_.get(u);if(!g)return;s.N_.set(u,g.withResumeToken(Vn.EMPTY_BYTE_STRING,g.snapshotVersion)),zV(s,u);const m=new zo(g.target,u,d,g.sequenceNumber);DT(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){he("RemoteStore","Failed to raise snapshot:",r),yield Cv(n,r)}var r}),xT.apply(this,arguments)}function Cv(n,e,t){return NT.apply(this,arguments)}function NT(){return(NT=(0,ie.A)(function*(n,e,t){if(!Fa(e))throw e;n.L_.add(1),yield Kd(n),n.q_.set("Offline"),t||(t=()=>NV(n.localStore)),n.asyncQueue.enqueueRetryable((0,ie.A)(function*(){he("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield ag(n)}))})).apply(this,arguments)}function qV(n,e){return e().catch(t=>Cv(n,t,e))}function Yd(n){return OT.apply(this,arguments)}function OT(){return(OT=(0,ie.A)(function*(n){const e=Ee(n),t=Qa(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;I7(e);)try{const i=yield i7(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,E7(e,i)}catch(i){yield Cv(e,i)}WV(e)&&KV(e)})).apply(this,arguments)}function I7(n){return Ka(n)&&n.O_.length<10}function E7(n,e){n.O_.push(e);const t=Qa(n);t.r_()&&t.V_&&t.m_(e.mutations)}function WV(n){return Ka(n)&&!Qa(n).n_()&&n.O_.length>0}function KV(n){Qa(n).start()}function w7(n){return kT.apply(this,arguments)}function kT(){return(kT=(0,ie.A)(function*(n){Qa(n).p_()})).apply(this,arguments)}function A7(n){return VT.apply(this,arguments)}function VT(){return(VT=(0,ie.A)(function*(n){const e=Qa(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function C7(n,e,t){return FT.apply(this,arguments)}function FT(){return(FT=(0,ie.A)(function*(n,e,t){const r=n.O_.shift(),i=WC.from(r,e,t);yield qV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Yd(n)})).apply(this,arguments)}function T7(n,e){return LT.apply(this,arguments)}function LT(){return LT=(0,ie.A)(function*(n,e){var t;e&&Qa(n).V_&&(yield(t=(0,ie.A)(function*(i,s){if(Mk(a=s.code)&&a!==J.ABORTED){const o=i.O_.shift();Qa(i).s_(),yield qV(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Yd(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),WV(n)&&KV(n)}),LT.apply(this,arguments)}function QV(n,e){return UT.apply(this,arguments)}function UT(){return(UT=(0,ie.A)(function*(n,e){const t=Ee(n);t.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const r=Ka(t);t.L_.add(3),yield Kd(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield ag(t)})).apply(this,arguments)}function BT(n,e){return jT.apply(this,arguments)}function jT(){return(jT=(0,ie.A)(function*(n,e){const t=Ee(n);e?(t.L_.delete(2),yield ag(t)):e||(t.L_.add(2),yield Kd(t),t.q_.set("Unknown"))})).apply(this,arguments)}function Jd(n){return n.K_||(n.K_=function(t,r,i){const s=Ee(t);return s.w_(),new d7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:m7.bind(null,n),Ro:_7.bind(null,n),mo:y7.bind(null,n),d_:v7.bind(null,n)}),n.B_.push(function(){var e=(0,ie.A)(function*(t){t?(n.K_.s_(),ST(n)?bT(n):n.q_.set("Unknown")):(yield n.K_.stop(),GV(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function Qa(n){return n.U_||(n.U_=function(t,r,i){const s=Ee(t);return s.w_(),new h7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:w7.bind(null,n),mo:T7.bind(null,n),f_:A7.bind(null,n),g_:C7.bind(null,n)}),n.B_.push(function(){var e=(0,ie.A)(function*(t){t?(n.U_.s_(),yield Yd(n)):(yield n.U_.stop(),n.O_.length>0&&(he("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class $T{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new $T(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zd(n,e){if($n("AsyncQueue",`${e}: ${n}`),Fa(n))return new ce(J.UNAVAILABLE,`${e}: ${n}`);throw n}class Xd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ce.comparator(t.key,r.key):(t,r)=>Ce.comparator(t.key,r.key),this.keyedMap=zp(),this.sortedSet=new an(this.comparator)}static emptySet(e){return new Xd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Xd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class YV{constructor(){this.W_=new an(Ce.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ne():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class eh{constructor(e,t,r,i,s,o,a,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new eh(e,t,Xd.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$p(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class D7{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class b7{constructor(){this.queries=JV(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Ee(t),s=i.queries;i.queries=JV(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})}(this,new ce(J.ABORTED,"Firestore shutting down"))}}function JV(){return new $o(n=>hk(n),$p)}function HT(n,e){return zT.apply(this,arguments)}function zT(){return(zT=(0,ie.A)(function*(n,e){const t=Ee(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new D7,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Zd(o,`Initialization of query '${kd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&WT(t)})).apply(this,arguments)}function GT(n,e){return qT.apply(this,arguments)}function qT(){return(qT=(0,ie.A)(function*(n,e){const t=Ee(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function S7(n,e){const t=Ee(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&WT(t)}function R7(n,e,t){const r=Ee(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function WT(n){n.Y_.forEach(e=>{e.next()})}var KT,ZV;(ZV=KT||(KT={})).ea="default",ZV.Cache="cache";class QT{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new eh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=eh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==KT.Cache}}class P7{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class XV{constructor(e){this.serializer=e}Es(e){return Ys(this.serializer,e)}ds(e){return e.metadata.exists?Wk(this.serializer,e.document,!1):fn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Hn(e)}}class M7{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=eF(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=Et.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new XV(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||ut()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,ie.A)(function*(){const t=yield function s7(n,e,t,r){return mT.apply(this,arguments)}(e.localStore,new XV(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield o7(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function eF(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class tF{constructor(e){this.key=e}}class nF{constructor(e){this.key=e}}class rF{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ut(),this.mutatedKeys=ut(),this.Aa=pk(e),this.Ra=new Xd(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new YV,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,m)=>{const v=i.get(g),w=Hp(this.query,m)?m:null,C=!!v&&this.mutatedKeys.has(v.key),D=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let M=!1;v&&w?v.data.isEqual(w.data)?C!==D&&(r.track({type:3,doc:w}),M=!0):this.ga(v,w)||(r.track({type:2,doc:w}),M=!0,(u&&this.Aa(w,u)>0||d&&this.Aa(w,d)<0)&&(a=!0)):!v&&w?(r.track({type:0,doc:w}),M=!0):v&&!w&&(r.track({type:1,doc:v}),M=!0,(u||d)&&(a=!0)),M&&(w?(o=o.add(w),s=D?s.add(g):s.delete(g)):(o=o.delete(g),s=s.delete(g)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const g="F"===this.query.limitType?o.last():o.first();o=o.delete(g.key),s=s.delete(g.key),r.track({type:1,doc:g})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((g,m)=>function(w,C){const D=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return D(w)-D(C)}(g.type,m.type)||this.Aa(g.doc,m.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],u=0===this.da.size&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,0!==o.length||d?{snapshot:new eh(this.query,e.Ra,s,o,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new YV,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ut(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new nF(r))}),this.da.forEach(r=>{e.has(r)||t.push(new tF(r))}),t}ba(e){this.Ta=e.Ts,this.da=ut();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return eh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class x7{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class N7{constructor(e){this.key=e,this.va=!1}}class O7{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new $o(a=>hk(a),$p),this.Ma=new Map,this.xa=new Set,this.Oa=new an(Ce.comparator),this.Na=new Map,this.La=new uT,this.Ba={},this.ka=new Map,this.qa=mc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function k7(n,e){return YT.apply(this,arguments)}function YT(){return(YT=(0,ie.A)(function*(n,e,t=!0){const r=Tv(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield iF(r,e,t,!0),i})).apply(this,arguments)}function V7(n,e){return JT.apply(this,arguments)}function JT(){return(JT=(0,ie.A)(function*(n,e){const t=Tv(n);yield iF(t,e,!0,!1)})).apply(this,arguments)}function iF(n,e,t,r){return ZT.apply(this,arguments)}function ZT(){return(ZT=(0,ie.A)(function*(n,e,t,r){const i=yield qd(n.localStore,zr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield XT(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&Av(n.remoteStore,i),a})).apply(this,arguments)}function XT(n,e,t,r,i){return e0.apply(this,arguments)}function e0(){return e0=(0,ie.A)(function*(n,e,t,r,i){n.Ka=(m,v,w)=>{return(C=(0,ie.A)(function*(M,z,F,q){let ae=z.view.ma(F);ae.ns&&(ae=yield yv(M.localStore,z.query,!1).then(({documents:b})=>z.view.ma(b,ae)));const ye=q&&q.targetChanges.get(z.targetId),Ue=q&&null!=q.targetMismatches.get(z.targetId),V=z.view.applyChanges(ae,M.isPrimaryClient,ye,Ue);return h0(M,z.targetId,V.wa),V.snapshot}),function D(M,z,F,q){return C.apply(this,arguments)})(n,m,v,w);var C};const s=yield yv(n.localStore,e,!0),o=new rF(e,s.Ts),a=o.ma(s.documents),u=Yp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),d=o.applyChanges(a,n.isPrimaryClient,u);h0(n,t,d.wa);const g=new x7(e,t,o);return n.Fa.set(e,g),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot}),e0.apply(this,arguments)}function F7(n,e,t){return t0.apply(this,arguments)}function t0(){return(t0=(0,ie.A)(function*(n,e,t){const r=Ee(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!$p(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Wd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Qd(r.remoteStore,i.targetId),th(r,i.targetId)}).catch(Va))):(th(r,i.targetId),yield Wd(r.localStore,i.targetId,!0))})).apply(this,arguments)}function L7(n,e){return n0.apply(this,arguments)}function n0(){return(n0=(0,ie.A)(function*(n,e){const t=Ee(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Qd(t.remoteStore,r.targetId))})).apply(this,arguments)}function r0(){return(r0=(0,ie.A)(function*(n,e,t){const r=A0(n);try{const i=yield function(o,a){const u=Ee(o),d=yn.now(),g=a.reduce((w,C)=>w.add(C.key),ut());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let C=bi(),D=ut();return u.cs.getEntries(w,g).next(M=>{C=M,C.forEach((z,F)=>{F.isValidDocument()||(D=D.add(z))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,C)).next(M=>{m=M;const z=[];for(const F of a){const q=dK(F,m.get(F.key).overlayedDocument);null!=q&&z.push(new Ho(F.key,q,Y1(q.value.mapValue),In.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,z,a)}).next(M=>{v=M;const z=M.applyToLocalDocumentSet(m,D);return u.documentOverlayCache.saveOverlays(w,M.batchId,z)})}).then(()=>({batchId:v.batchId,changes:mk(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new an(et)),d=d.insert(a,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,t),yield Go(r,i.changes),yield Yd(r.remoteStore)}catch(i){const s=Zd(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function sF(n,e){return s0.apply(this,arguments)}function s0(){return(s0=(0,ie.A)(function*(n,e){const t=Ee(n);try{const r=yield function r7(n,e){const t=Ee(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((g,m)=>{const v=i.get(m);if(!v)return;a.push(t.Ur.removeMatchingKeys(s,g.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(s,g.addedDocuments,m)));let w=v.withSequenceNumber(s.currentSequenceNumber);var D,M,z;null!==e.targetMismatches.get(m)?w=w.withResumeToken(Vn.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,r)),i=i.insert(m,w),M=w,z=g,(0===(D=v).resumeToken.approximateByteSize()||M.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8||z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,w))});let u=bi(),d=ut();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))}),a.push(OV(s,o,e.documentUpdates).next(g=>{u=g.Ps,d=g.Is})),!r.isEqual(Be.min())){const g=t.Ur.getLastRemoteSnapshotVersion(s).next(m=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(g)}return H.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(Ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ve(o.va):i.removedDocuments.size>0&&(Ve(o.va),o.va=!1))}),yield Go(t,r,e)}catch(r){yield Va(r)}})).apply(this,arguments)}function oF(n,e,t){const r=Ee(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Ee(o);u.onlineState=a;let d=!1;u.queries.forEach((g,m)=>{for(const v of m.j_)v.Z_(a)&&(d=!0)}),d&&WT(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function B7(n,e,t){return o0.apply(this,arguments)}function o0(){return(o0=(0,ie.A)(function*(n,e,t){const r=Ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new an(Ce.comparator);o=o.insert(s,fn.newNoDocument(s,Be.min()));const a=ut().add(s),u=new Qp(Be.min(),new Map,new an(et),o,a);yield sF(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),f0(r)}else yield Wd(r.localStore,e,!1).then(()=>th(r,e,t)).catch(Va)})).apply(this,arguments)}function j7(n,e){return a0.apply(this,arguments)}function a0(){return(a0=(0,ie.A)(function*(n,e){const t=Ee(n),r=e.batch.batchId;try{const i=yield function n7(n,e){const t=Ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,d,g){const m=d.batch,v=m.keys();let w=H.resolve();return v.forEach(C=>{w=w.next(()=>g.getEntry(u,C)).next(D=>{const M=d.docVersions.get(C);Ve(null!==M),D.version.compareTo(M)<0&&(m.applyToRemoteDocument(D,d),D.isValidDocument()&&(D.setReadTime(d.commitVersion),g.addEntry(D)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ut();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);d0(t,r,null),l0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Go(t,i)}catch(i){yield Va(i)}})).apply(this,arguments)}function $7(n,e,t){return u0.apply(this,arguments)}function u0(){return(u0=(0,ie.A)(function*(n,e,t){const r=Ee(n);try{const i=yield function(o,a){const u=Ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return u.mutationQueue.lookupMutationBatch(d,a).next(m=>(Ve(null!==m),g=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,g,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>u.localDocuments.getDocuments(d,g))})}(r.localStore,e);d0(r,e,t),l0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Go(r,i)}catch(i){yield Va(i)}})).apply(this,arguments)}function c0(){return(c0=(0,ie.A)(function*(n,e){const t=Ee(n);Ka(t.remoteStore)||he("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ee(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=Zd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function l0(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function d0(n,e,t){const r=Ee(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function th(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||aF(n,r)})}function aF(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(Qd(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),f0(n))}function h0(n,e,t){for(const r of t)r instanceof tF?(n.La.addReference(r.key,e),z7(n,r)):r instanceof nF?(he("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||aF(n,r.key)):Ne()}function z7(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(he("SyncEngine","New document in limbo: "+t),n.xa.add(r),f0(n))}function f0(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Ce(Et.fromString(e)),r=n.qa.next();n.Na.set(r,new N7(t)),n.Oa=n.Oa.insert(t,r),Av(n.remoteStore,new zo(zr(Nd(t.path)),r,"TargetPurposeLimboResolution",$i.oe))}}function Go(n,e,t){return p0.apply(this,arguments)}function p0(){return p0=(0,ie.A)(function*(n,e,t){const r=Ee(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,t).then(d=>{var g;if((d||t)&&r.isPrimaryClient){const m=d?!d.fromCache:null===(g=t?.targetChanges.get(u.targetId))||void 0===g?void 0:g.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=fT.Wi(u.targetId,d);s.push(m)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,ie.A)(function*(d,g){const m=Ee(d);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>H.forEach(g,w=>H.forEach(w.$i,C=>m.persistence.referenceDelegate.addReference(v,w.targetId,C)).next(()=>H.forEach(w.Ui,C=>m.persistence.referenceDelegate.removeReference(v,w.targetId,C)))))}catch(v){if(!Fa(v))throw v;he("LocalStore","Failed to update sequence numbers: "+v)}for(const v of g){const w=v.targetId;if(!v.fromCache){const C=m.os.get(w),M=C.withLastLimboFreeSnapshotVersion(C.snapshotVersion);m.os=m.os.insert(w,M)}}}),function u(d,g){return a.apply(this,arguments)})(r.localStore,s))}),p0.apply(this,arguments)}function G7(n,e){return g0.apply(this,arguments)}function g0(){return(g0=(0,ie.A)(function*(n,e){const t=Ee(n);if(!t.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const r=yield xV(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(u=>{u.reject(new ce(J.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Go(t,r.hs)}var s})).apply(this,arguments)}function q7(n,e){const t=Ee(n),r=t.Na.get(e);if(r&&r.va)return ut().add(r.key);{let i=ut();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function W7(n,e){return m0.apply(this,arguments)}function m0(){return(m0=(0,ie.A)(function*(n,e){const t=Ee(n),r=yield yv(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&h0(t,e.targetId,i.wa),i})).apply(this,arguments)}function K7(n,e){return _0.apply(this,arguments)}function _0(){return(_0=(0,ie.A)(function*(n,e){const t=Ee(n);return VV(t.localStore,e).then(r=>Go(t,r))})).apply(this,arguments)}function Q7(n,e,t,r){return y0.apply(this,arguments)}function y0(){return(y0=(0,ie.A)(function*(n,e,t,r){const i=Ee(n),s=yield function(a,u){const d=Ee(a),g=Ee(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",m=>g.Mn(m,u).next(v=>v?d.localDocuments.getDocuments(m,v):H.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield Yd(i.remoteStore):"acknowledged"===t||"rejected"===t?(d0(i,e,r||null),l0(i,e),u=e,Ee(Ee(i.localStore).mutationQueue).On(u)):Ne(),yield Go(i,s)):he("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function v0(){return(v0=(0,ie.A)(function*(n,e){const t=Ee(n);if(Tv(t),A0(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield uF(t,r.toArray());t.Qa=!0,yield BT(t.remoteStore,!0);for(const s of i)Av(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(th(t,o),Wd(t.localStore,o,!0))),Qd(t.remoteStore,o)}),yield i,yield uF(t,r),function(o){const a=Ee(o);a.Na.forEach((u,d)=>{Qd(a.remoteStore,d)}),a.La.pr(),a.Na=new Map,a.Oa=new an(Ce.comparator)}(t),t.Qa=!1,yield BT(t.remoteStore,!1)}})).apply(this,arguments)}function uF(n,e,t){return I0.apply(this,arguments)}function I0(){return(I0=(0,ie.A)(function*(n,e,t){const r=Ee(n),i=[],s=[];for(const o of e){let a;const u=r.Ma.get(o);if(u&&0!==u.length){a=yield qd(r.localStore,zr(u[0]));for(const d of u){const g=r.Fa.get(d),m=yield W7(r,g);m.snapshot&&s.push(m.snapshot)}}else{const d=yield kV(r.localStore,o);a=yield qd(r.localStore,d),yield XT(r,cF(d),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function cF(n){return uk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function J7(n){return t=Ee(n).localStore,Ee(Ee(t).persistence).Qi();var t}function Z7(n,e,t,r){return E0.apply(this,arguments)}function E0(){return(E0=(0,ie.A)(function*(n,e,t,r){const i=Ee(n);if(i.Qa)return void he("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield VV(i.localStore,fk(s[0])),a=Qp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Vn.EMPTY_BYTE_STRING);yield Go(i,o,a);break}case"rejected":yield Wd(i.localStore,e,!0),th(i,e,r);break;default:Ne()}})).apply(this,arguments)}function X7(n,e,t){return w0.apply(this,arguments)}function w0(){return(w0=(0,ie.A)(function*(n,e,t){const r=Tv(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){he("SyncEngine","Adding an already active target "+i);continue}const s=yield kV(r.localStore,i),o=yield qd(r.localStore,s);yield XT(r,cF(s),o.targetId,!1,o.resumeToken),Av(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield Wd(r.localStore,i,!1).then(()=>{Qd(r.remoteStore,i),th(r,i)}).catch(Va))}})).apply(this,arguments)}function Tv(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=B7.bind(null,e),e.Ca.d_=S7.bind(null,e.eventManager),e.Ca.$a=R7.bind(null,e.eventManager),e}function A0(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=j7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$7.bind(null,e),e}let nh=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,ie.A)(function*(){r.serializer=og(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return MV(this.persistence,new PV,t.initialUser,this.serializer)}Ga(t){return new cT(gv.Zr,this.serializer)}Wa(t){return new BV}terminate(){var t=this;return(0,ie.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class C0 extends nh{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ie.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield A0(r.Ja.syncEngine),yield Yd(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return MV(this.persistence,new PV,e.initialUser,this.serializer)}ja(e,t){return new EV(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new wW(t,this.persistence);return new EW(e.asyncQueue,r)}Ga(e){const t=hT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Gr.withCacheSize(this.cacheSizeBytes):Gr.DEFAULT;return new dT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,$V(),wv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new BV}}class lF extends C0{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ie.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof ET&&(r.sharedClientState.syncEngine={no:Q7.bind(null,i),ro:Z7.bind(null,i),io:X7.bind(null,i),Qi:J7.bind(null,i),eo:K7.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,ie.A)(function*(o){yield function Y7(n,e){return v0.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=$V();if(!ET.D(t))throw new ce(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=hT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ET(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let rh=(()=>{class n{initialize(t,r){var i=this;return(0,ie.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>oF(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=G7.bind(null,i.syncEngine),yield BT(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new b7}createDatastore(t){const r=og(t.databaseInfo.databaseId),i=new l7(t.databaseInfo);return new f7(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>oF(this.syncEngine,r,0),u=jV.D()?new jV:new a7,new g7(i,s,o,a,u);var i,s,o,a,u}createSyncEngine(t,r){return function(s,o,a,u,d,g,m){const v=new O7(s,o,a,u,d,g);return m&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,ie.A)(function*(){var r,i,s;yield(s=(0,ie.A)(function*(a){const u=Ee(a);he("RemoteStore","RemoteStore shutting down."),u.L_.add(5),yield Kd(u),u.k_.shutdown(),u.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function dF(n,e=10240){let t=0;return{read:()=>(0,ie.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ie.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Dv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):$n("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class nQ{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new mr,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,ie.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,ie.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,ie.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new P7(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,ie.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,ie.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,ie.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class rQ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ie.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ce(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ie.A)(function*(o,a){const u=Ee(o),d={documents:a.map(w=>Jp(u.serializer,w))},g=yield u.Lo("BatchGetDocuments",u.serializer.databaseId,Et.emptyPath(),d,a.length),m=new Map;g.forEach(w=>{const C=function IK(n,e){return"found"in e?function(r,i){Ve(!!i.found);const s=Ys(r,i.found.name),o=Hn(i.found.updateTime),a=i.found.createTime?Hn(i.found.createTime):Be.min(),u=new Sr({mapValue:{fields:i.found.fields}});return fn.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){Ve(!!i.missing),Ve(!!i.readTime);const s=Ys(r,i.missing),o=Hn(i.readTime);return fn.newNoDocument(s,o)}(n,e):Ne()}(u.serializer,w);m.set(C.key.toString(),C)});const v=[];return a.forEach(w=>{const C=m.get(w.toString());Ve(!!C),v.push(C)}),v}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ud(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ie.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Ce.fromPath(i);e.mutations.push(new GC(s,e.precondition(s)))}),yield(r=(0,ie.A)(function*(s,o){const a=Ee(s),u={writes:o.map(d=>Zp(a.serializer,d))};yield a.Mo("Commit",a.serializer.databaseId,Et.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ne();t=Be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ce(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Be.min())?In.exists(!1):In.updateTime(t):In.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Be.min()))throw new ce(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return In.updateTime(t)}return In.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class iQ{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new AT(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,ie.A)(function*(){const t=new rQ(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!Op(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Mk(t)}return!1}}class sQ{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gr.UNAUTHENTICATED,this.clientId=w1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,ie.A)(function*(u){he("FirestoreClient","Received user=",u.uid),yield o.authCredentialListener(u),o.user=u});return function(u){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(he("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ie.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Zd(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function T0(n,e){return D0.apply(this,arguments)}function D0(){return D0=(0,ie.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ie.A)(function*(s){r.isEqual(s)||(yield xV(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),D0.apply(this,arguments)}function hF(n,e){return b0.apply(this,arguments)}function b0(){return(b0=(0,ie.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield S0(n);he("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>QV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>QV(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function S0(n){return R0.apply(this,arguments)}function R0(){return(R0=(0,ie.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{yield T0(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Bi("Error using user provided cache. Falling back to memory cache: "+e),yield T0(n,new nh)}}else he("FirestoreClient","Using default OfflineComponentProvider"),yield T0(n,new nh);var i;return n._offlineComponents})).apply(this,arguments)}function bv(n){return P0.apply(this,arguments)}function P0(){return(P0=(0,ie.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),yield hF(n,n._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),yield hF(n,new rh))),n._onlineComponents})).apply(this,arguments)}function fF(n){return S0(n).then(e=>e.persistence)}function ih(n){return S0(n).then(e=>e.localStore)}function pF(n){return bv(n).then(e=>e.remoteStore)}function M0(n){return bv(n).then(e=>e.syncEngine)}function sh(n){return x0.apply(this,arguments)}function x0(){return(x0=(0,ie.A)(function*(n){const e=yield bv(n),t=e.eventManager;return t.onListen=k7.bind(null,e.syncEngine),t.onUnlisten=F7.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=V7.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=L7.bind(null,e.syncEngine),t})).apply(this,arguments)}function mF(n,e,t={}){const r=new mr;return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function(s,o,a,u,d){const g=new Dv({next:v=>{g.Za(),o.enqueueAndForget(()=>GT(s,m));const w=v.docs.has(a);!w&&v.fromCache?d.reject(new ce(J.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&u&&"server"===u.source?d.reject(new ce(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new QT(Nd(a.path),g,{includeMetadataChanges:!0,_a:!0});return HT(s,m)}(yield sh(n),n.asyncQueue,e,t,r)})),r.promise}function _F(n,e,t={}){const r=new mr;return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function(s,o,a,u,d){const g=new Dv({next:v=>{g.Za(),o.enqueueAndForget(()=>GT(s,m)),v.fromCache&&"server"===u.source?d.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new QT(a,g,{includeMetadataChanges:!0,_a:!0});return HT(s,m)}(yield sh(n),n.asyncQueue,e,t,r)})),r.promise}function yF(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const vF=new Map;function N0(n,e,t){if(!t)throw new ce(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function IF(n,e,t,r){if(!0===e&&!0===r)throw new ce(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function EF(n){if(!Ce.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wF(n){if(Ce.isDocumentKey(n))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Sv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ne()}function vt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sv(n);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function AF(n,e){if(e<=0)throw new ce(J.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class CF{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=yF(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ug{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CF({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CF(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new cW;switch(r.type){case"firstParty":return new fW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,ie.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=vF.get(t);r&&(he("ComponentProvider","Removing Datastore"),vF.delete(t),r.terminate())}(this),Promise.resolve()}}class Rr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rr(this.firestore,e,this._query)}}class pn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Js(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}}class Js extends Rr{constructor(e,t,r){super(e,t,Nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Ce(e))}withConverter(e){return new Js(this.firestore,e,this._path)}}function DF(n,e,...t){if(n=(0,Vt.Ku)(n),N0("collection","path",e),n instanceof ug){const r=Et.fromString(e,...t);return wF(r),new Js(n,null,r)}{if(!(n instanceof pn||n instanceof Js))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return wF(r),new Js(n.firestore,null,r)}}function Rv(n,e,...t){if(n=(0,Vt.Ku)(n),1===arguments.length&&(e=w1.newId()),N0("doc","path",e),n instanceof ug){const r=Et.fromString(e,...t);return EF(r),new pn(n,null,new Ce(r))}{if(!(n instanceof pn||n instanceof Js))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return EF(r),new pn(n.firestore,n instanceof Js?n.converter:null,new Ce(r))}}function bF(n,e){return n=(0,Vt.Ku)(n),e=(0,Vt.Ku)(e),(n instanceof pn||n instanceof Js)&&(e instanceof pn||e instanceof Js)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function O0(n,e){return n=(0,Vt.Ku)(n),e=(0,Vt.Ku)(e),n instanceof Rr&&e instanceof Rr&&n.firestore===e.firestore&&$p(n._query,e._query)&&n.converter===e.converter}class SF{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new AT(this,"async_queue_retry"),this.Vu=()=>{const r=wv();r&&he("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=wv();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=wv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new mr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,ie.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!Fa(t))throw t;he("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,$n("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=$T.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Ne()}verifyOperationInProgress(){}wu(){var e=this;return(0,ie.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function k0(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class yQ{constructor(){this._progressObserver={},this._taskCompletionResolver=new mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kt extends ug{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new SF,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,ie.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new SF(t),e._firestoreClient=void 0,yield t}})()}}function En(n){if(n._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||RF(n),n._firestoreClient}function RF(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new zW(n._databaseId,u,n._persistenceKey,(g=i).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,yF(g.experimentalLongPollingOptions),g.useFetchStreams));var u,g;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new sQ(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function V0(){return(V0=(0,ie.A)(function*(n){Bi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();PF(n,rh.provider,{build:t=>new lF(t,e.cacheSizeBytes)})})).apply(this,arguments)}function PF(n,e,t){if((n=vt(n,Kt))._firestoreClient||n._terminated)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ce(J.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},RF(n)}class Zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zs(Vn.fromBase64String(e))}catch(t){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zs(Vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qo{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yc{constructor(e){this._methodName=e}}class Pv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}}class Mv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const RQ=/^__.*__$/;class PQ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ho(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ld(e,this.data,t,this.fieldTransforms)}}class MF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ho(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class xv{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new xv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return kv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(xF(this.Cu)&&RQ.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class MQ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||og(e)}Qu(e,t,r,i=!1){return new xv({Cu:e,methodName:t,qu:r,path:hn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vc(n){const e=n._freezeSettings(),t=og(n._databaseId);return new MQ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Nv(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);H0("Data must be an object, but it was:",o,r);const a=kF(r,o);let u,d;if(s.merge)u=new Di(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const g=[];for(const m of s.mergeFields){const v=dg(e,m,t);if(!o.contains(v))throw new ce(J.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);FF(g,v)||g.push(v)}u=new Di(g),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new PQ(new Sr(a),u,d)}class lg extends yc{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lg}}function NF(n,e,t){return new xv({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class F0 extends yc{_toFieldTransform(e){return new qp(e.path,new Vd)}isEqual(e){return e instanceof F0}}class L0 extends yc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=NF(this,e,!0),r=this.Ku.map(s=>Ic(s,t)),i=new cc(r);return new qp(e.path,i)}isEqual(e){return e instanceof L0&&(0,Vt.bD)(this.Ku,e.Ku)}}class U0 extends yc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=NF(this,e,!0),r=this.Ku.map(s=>Ic(s,t)),i=new lc(r);return new qp(e.path,i)}isEqual(e){return e instanceof U0&&(0,Vt.bD)(this.Ku,e.Ku)}}class B0 extends yc{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Fd(e.serializer,vk(e.serializer,this.$u));return new qp(e.path,t)}isEqual(e){return e instanceof B0&&this.$u===e.$u}}function j0(n,e,t,r){const i=n.Qu(1,e,t);H0("Data must be an object, but it was:",i,r);const s=[],o=Sr.empty();La(r,(u,d)=>{const g=Ov(e,u,t);d=(0,Vt.Ku)(d);const m=i.Nu(g);if(d instanceof lg)s.push(g);else{const v=Ic(d,m);null!=v&&(s.push(g),o.set(g,v))}});const a=new Di(s);return new MF(o,a,i.fieldTransforms)}function $0(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[dg(e,r,t)],u=[i];if(s.length%2!=0)throw new ce(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(dg(e,s[v])),u.push(s[v+1]);const d=[],g=Sr.empty();for(let v=a.length-1;v>=0;--v)if(!FF(d,a[v])){const w=a[v];let C=u[v];C=(0,Vt.Ku)(C);const D=o.Nu(w);if(C instanceof lg)d.push(w);else{const M=Ic(C,D);null!=M&&(d.push(w),g.set(w,M))}}const m=new Di(d);return new MF(g,m,o.fieldTransforms)}function OF(n,e,t,r=!1){return Ic(t,n.Qu(r?4:3,e))}function Ic(n,e){if(VF(n=(0,Vt.Ku)(n)))return H0("Unsupported field value:",e,n),kF(n,e);if(n instanceof yc)return function(r,i){if(!xF(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Ic(a,i.Lu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,Vt.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return vk(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=yn.fromDate(r);return{timestampValue:Bd(i.serializer,s)}}if(r instanceof yn){const s=new yn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bd(i.serializer,s)}}if(r instanceof Pv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zs)return{bytesValue:jk(i.serializer,r._byteString)};if(r instanceof pn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:JC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Mv)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.Bu("VectorValues must only contain numeric values.");return zC(a.serializer,u)})}}}}};var a;throw i.Bu(`Unsupported field value: ${Sv(r)}`)}(n,e)}function kF(n,e){const t={};return U1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):La(n,(r,i)=>{const s=Ic(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function VF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof yn||n instanceof Pv||n instanceof Zs||n instanceof pn||n instanceof yc||n instanceof Mv)}function H0(n,e,t){if(!VF(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Sv(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function dg(n,e,t){if((e=(0,Vt.Ku)(e))instanceof qo)return e._internalPath;if("string"==typeof e)return Ov(n,e);throw kv("Field path arguments must be of type string or ",n,!1,void 0,t)}const xQ=new RegExp("[~\\*/\\[\\]]");function Ov(n,e,t){if(e.search(xQ)>=0)throw kv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qo(...e.split("."))._internalPath}catch{throw kv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kv(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ce(J.INVALID_ARGUMENT,a+n+u)}function FF(n,e){return n.some(t=>t.isEqual(e))}class hg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new NQ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class NQ extends hg{data(){return super.data()}}function Vv(n,e){return"string"==typeof e?Ov(n,e):e instanceof qo?e._internalPath:e._delegate._internalPath}function LF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class z0{}class fg extends z0{}function Ya(n,e,...t){let r=[];e instanceof z0&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof oh).length,a=s.filter(u=>u instanceof pg).length;if(o>1||o>0&&a>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class pg extends fg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new pg(e,t,r)}_apply(e){const t=this._parse(e);return $F(e._query,t),new Rr(e.firestore,e.converter,$C(e._query,t))}_parse(e){const t=vc(e.firestore);return function(s,o,a,u,d,g,m){let v;if(d.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){jF(m,g);const w=[];for(const C of m)w.push(BF(u,s,C));v={arrayValue:{values:w}}}else v=BF(u,s,m)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||jF(m,g),v=OF(a,"where",m,"in"===g||"not-in"===g);return wt.create(d,g,v)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class oh extends z0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new oh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:$t.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)$F(o,u),o=$C(o,u)}(e._query,t),new Rr(e.firestore,e.converter,$C(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class G0 extends fg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new G0(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bp(s,o)}(e._query,this._field,this._direction);return new Rr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new jo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Fv extends fg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Fv(e,t,r)}_apply(e){return new Rr(e.firestore,e.converter,tv(e._query,this._limit,this._limitType))}}class Lv extends fg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Lv(e,t,r)}_apply(e){const t=UF(e,this.type,this._docOrFields,this._inclusive);return new Rr(e.firestore,e.converter,(s=t,new jo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Uv extends fg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Uv(e,t,r)}_apply(e){const t=UF(e,this.type,this._docOrFields,this._inclusive);return new Rr(e.firestore,e.converter,(s=t,new jo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function UF(n,e,t,r){if(t[0]=(0,Vt.Ku)(t[0]),t[0]instanceof hg)return function(s,o,a,u,d){if(!u)throw new ce(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const g=[];for(const m of Od(s))if(m.field.isKeyField())g.push(ac(o,u.key));else{const v=u.data.field(m.field);if(Wy(v))throw new ce(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===v){const w=m.field.canonicalString();throw new ce(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}g.push(v)}return new Ha(g,d)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=vc(n.firestore);return function(o,a,u,d,g,m){const v=o.explicitOrderBy;if(g.length>v.length)throw new ce(J.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let C=0;C<g.length;C++){const D=g[C];if(v[C].field.isKeyField()){if("string"!=typeof D)throw new ce(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof D}`);if(!jC(o)&&-1!==D.indexOf("/"))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${D}' contains a slash.`);const M=o.path.child(Et.fromString(D));if(!Ce.isDocumentKey(M))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);const z=new Ce(M);w.push(ac(a,z))}else{const M=OF(u,d,D);w.push(M)}}return new Ha(w,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function BF(n,e,t){if("string"==typeof(t=(0,Vt.Ku)(t))){if(""===t)throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jC(e)&&-1!==t.indexOf("/"))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Et.fromString(t));if(!Ce.isDocumentKey(r))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ac(n,new Ce(r))}if(t instanceof pn)return ac(n,t._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sv(t)}.`)}function jF(n,e){if(!Array.isArray(n)||0===n.length)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $F(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ce(J.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class q0{convertValue(e,t="none"){switch(ja(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return La(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>vn(o.doubleValue));return new Mv(s)}convertGeoPoint(e){return new Pv(vn(e.latitude),vn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ky(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vp(e));default:return null}}convertTimestamp(e){const t=Uo(e);return new yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Et.fromString(e);Ve(Xk(r));const i=new Ua(r.get(1),r.get(3)),s=new Ce(r.popFirst(5));return i.isEqual(t)||$n(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Bv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class $Q extends q0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}class Ec{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wo extends hg{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Vv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class gg extends Wo{data(e={}){return super.data(e)}}class Ja{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ec(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new gg(this._firestore,this._userDataWriter,r.key,r,new Ec(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new gg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ec(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new gg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ec(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,g=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),g=o.indexOf(a.doc.key)),{type:zQ(a.type),doc:u,oldIndex:d,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function zQ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}function zF(n,e){return n instanceof Wo&&e instanceof Wo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ja&&e instanceof Ja&&n._firestore===e._firestore&&O0(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Za extends q0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}function GF(n,e,t){n=vt(n,pn);const r=vt(n.firestore,Kt),i=Bv(n.converter,e,t);return ah(r,[Nv(vc(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,In.none())])}function qF(n,e,t,...r){n=vt(n,pn);const i=vt(n.firestore,Kt),s=vc(i);let o;return o="string"==typeof(e=(0,Vt.Ku)(e))||e instanceof qo?$0(s,"updateDoc",n._key,e,t,r):j0(s,"updateDoc",n._key,e),ah(i,[o.toMutation(n._key,In.exists(!0))])}function WF(n,...e){var t,r,i;n=(0,Vt.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||k0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(k0(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,d,g;if(n instanceof pn)d=vt(n.firestore,Kt),g=Nd(n._key.path),u={next:m=>{e[o]&&e[o](W0(d,n,m))},error:e[o+1],complete:e[o+2]};else{const m=vt(n,Rr);d=vt(m.firestore,Kt),g=m._query;const v=new Za(d);u={next:w=>{e[o]&&e[o](new Ja(d,v,m,w))},error:e[o+1],complete:e[o+2]},LF(n._query)}return function(v,w,C,D){const M=new Dv(D),z=new QT(w,M,C);return v.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return HT(yield sh(v),z)})),()=>{M.Za(),v.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return GT(yield sh(v),z)}))}}(En(d),g,a,u)}function ah(n,e){return function(r,i){const s=new mr;return r.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function U7(n,e,t){return r0.apply(this,arguments)}(yield M0(r),i,s)})),s.promise}(En(n),e)}function W0(n,e,t){const r=t.docs.get(e._key),i=new Za(n);return new Wo(n,i,e._key,r,new Ec(t.hasPendingWrites,t.fromCache),e.converter)}const uY={maxAttempts:5};class KF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vc(e)}set(e,t,r){this._verifyNotCommitted();const i=Xa(e,this._firestore),s=Bv(i.converter,t,r),o=Nv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,In.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Xa(e,this._firestore);let o;return o="string"==typeof(t=(0,Vt.Ku)(t))||t instanceof qo?$0(this._dataReader,"WriteBatch.update",s._key,t,r,i):j0(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,In.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xa(e,this._firestore);return this._mutations=this._mutations.concat(new Ud(t._key,In.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ce(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xa(n,e){if((n=(0,Vt.Ku)(n)).firestore!==e)throw new ce(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class cY extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=vc(t)}get(t){const r=Xa(t,this._firestore),i=new $Q(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ne();const o=s[0];if(o.isFoundDocument())return new hg(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new hg(this._firestore,i,r._key,null,r.converter);throw Ne()})}set(t,r,i){const s=Xa(t,this._firestore),o=Bv(s.converter,r,i),a=Nv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Xa(t,this._firestore);let a;return a="string"==typeof(r=(0,Vt.Ku)(r))||r instanceof qo?$0(this._dataReader,"Transaction.update",o._key,r,i,s):j0(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Xa(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xa(e,this._firestore),r=new Za(this._firestore);return super.get(e).then(i=>new Wo(this._firestore,r,t._key,i._document,new Ec(!1,!1),t.converter))}}function Q0(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function ZF(){if(typeof Uint8Array>"u")throw new ce("unimplemented","Uint8Arrays are not available in this environment.")}function XF(){if(!function $W(){return typeof atob<"u"}())throw new ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Td=wd.SDK_VERSION,(0,wd._registerComponent)(new l1.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Kt(new dW(r.getProvider("auth-internal")),new pW(r.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(d.options.projectId,g)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,wd.registerVersion)(v1,"4.7.3",e),(0,wd.registerVersion)(v1,"4.7.3","esm2017")}();class mg{constructor(e){this._delegate=e}static fromBase64String(e){return XF(),new mg(Zs.fromBase64String(e))}static fromUint8Array(e){return ZF(),new mg(Zs.fromUint8Array(e))}toBase64(){return XF(),this._delegate.toBase64()}toUint8Array(){return ZF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Y0(n){return function vY(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class IY{enableIndexedDbPersistence(e,t){return function IQ(n,e){Bi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return PF(n,rh.provider,{build:r=>new C0(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function EQ(n){return V0.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function wQ(n){if(n._initialized&&!n._terminated)throw new ce(J.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ie.A)(function*(){try{yield(t=(0,ie.A)(function*(i){if(!qs.D())return Promise.resolve();const s=i+"main";yield qs.delete(s)}),function r(i){return t.apply(this,arguments)})(hT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class eL{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ua||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Bi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function TF(n,e,t,r={}){var i;const s=(n=vt(n,ug))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=gr.MOCK_USER;else{a=(0,Vt.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new gr(d)}n._authCredentials=new lW(new I1(a,u))}}(this._delegate,e,t,r)}enableNetwork(){return function CQ(n){return function oQ(n){return n.asyncQueue.enqueue((0,ie.A)(function*(){const e=yield fF(n),t=yield pF(n);return e.setNetworkEnabled(!0),function(i){const s=Ee(i);return s.L_.delete(0),ag(s)}(t)}))}(En(n=vt(n,Kt)))}(this._delegate)}disableNetwork(){return function TQ(n){return function aQ(n){return n.asyncQueue.enqueue((0,ie.A)(function*(){const e=yield fF(n),t=yield pF(n);return e.setNetworkEnabled(!1),(r=(0,ie.A)(function*(s){const o=Ee(s);o.L_.add(0),yield Kd(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(En(n=vt(n,Kt)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,IF("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function AQ(n){return function(t){const r=new mr;return t.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function H7(n,e){return c0.apply(this,arguments)}(yield M0(t),r)})),r.promise}(En(n=vt(n,Kt)))}(this._delegate)}onSnapshotsInSync(e){return function XQ(n,e){return function dQ(n,e){const t=new Dv(e);return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return i=yield sh(n),s=t,Ee(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return i=yield sh(n),s=t,void Ee(i).Y_.delete(s);var i,s}))}}(En(n=vt(n,Kt)),k0(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new uh(this,DF(this._delegate,e))}catch(t){throw li(t,"collection()","Firestore.collection()")}}doc(e){try{return new os(this,Rv(this._delegate,e))}catch(t){throw li(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new di(this,function _Q(n,e){if(n=vt(n,ug),N0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Rr(n,null,(r=e,new jo(Et.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw li(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function lY(n,e,t){n=vt(n,Kt);const r=Object.assign(Object.assign({},uY),t);return function(s){if(s.maxAttempts<1)throw new ce(J.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new mr;return s.asyncQueue.enqueueAndForget((0,ie.A)(function*(){const d=yield function gF(n){return bv(n).then(e=>e.datastore)}(s);new iQ(s.asyncQueue,d,a,o,u).au()})),u.promise}(En(n),i=>e(new cY(n,i)),r)}(this._delegate,t=>e(new tL(this,t)))}batch(){return En(this._delegate),new nL(new KF(this._delegate,e=>ah(this._delegate,e)))}loadBundle(e){return function DQ(n,e){const t=En(n=vt(n,Kt)),r=new yQ;return function hQ(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?Nk().encode(o):o,g=function(g,m){if(g instanceof Uint8Array)return dF(g,m);if(g instanceof ArrayBuffer)return dF(new Uint8Array(g),m);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new nQ(g,a);var g}(t,og(e));n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){!function eQ(n,e,t){const r=Ee(n);var i;(i=(0,ie.A)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(C,D){const M=Ee(C),z=Hn(D.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",F=>M.Gr.getBundleMetadata(F,D.id)).then(F=>!!F&&F.createTime.compareTo(z)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(C=d).totalDocuments,bytesLoaded:C.totalBytes,totalDocuments:C.totalDocuments,totalBytes:C.totalBytes}),Promise.resolve(new Set);u._updateProgress(eF(d));const g=new M7(d,o.localStore,a.serializer);let m=yield a.Ua();for(;m;){const w=yield g.la(m);w&&u._updateProgress(w),m=yield a.Ua()}const v=yield g.complete();return yield Go(o,v.Ia,void 0),yield function(C,D){const M=Ee(C);return M.persistence.runTransaction("Save bundle","readwrite",z=>M.Gr.saveBundleMetadata(z,D))}(o.localStore,d),u._completeWith(v.progress),Promise.resolve(v.Pa)}catch(d){return Bi("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var C}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield M0(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function bQ(n,e){return function fQ(n,e){return n.asyncQueue.enqueue((0,ie.A)(function*(){return function(r,i){const s=Ee(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield ih(n),e)}))}(En(n=vt(n,Kt)),e).then(t=>t?new Rr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new di(this,t):null)}}class $v extends q0{constructor(e){super(),this.firestore=e}convertBytes(e){return new mg(new Zs(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return os.forKey(t,this.firestore,null)}}class tL{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new $v(e)}get(e){const t=Ac(e);return this._delegate.get(t).then(r=>new _g(this._firestore,new Wo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ac(e);return r?(Q0("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Ac(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Ac(e);return this._delegate.delete(t),this}}class nL{constructor(e){this._delegate=e}set(e,t,r){const i=Ac(e);return r?(Q0("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Ac(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Ac(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wc{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new gg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yg(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=wc.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new wc(e,new $v(e),t),i.set(t,s)),s}}wc.INSTANCES=new WeakMap;class os{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $v(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new os(t,new pn(t._delegate,r,new Ce(e)))}static forKey(e,t,r){return new os(t,new pn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new uh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new uh(this.firestore,DF(this._delegate,e))}catch(t){throw li(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Vt.Ku)(e))instanceof pn&&bF(this._delegate,e)}set(e,t){t=Q0("DocumentReference.set",t);try{return t?GF(this._delegate,e,t):GF(this._delegate,e)}catch(r){throw li(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?qF(this._delegate,e):qF(this._delegate,e,t,...r)}catch(i){throw li(i,"updateDoc()","DocumentReference.update()")}}delete(){return function JQ(n){return ah(vt(n.firestore,Kt),[new Ud(n._key,In.none())])}(this._delegate)}onSnapshot(...e){const t=rL(e),r=iL(e,i=>new _g(this.firestore,new Wo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return WF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function qQ(n){n=vt(n,pn);const e=vt(n.firestore,Kt),t=En(e),r=new Za(e);return function uQ(n,e){const t=new mr;return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return(r=(0,ie.A)(function*(s,o,a){try{const u=yield function(g,m){const v=Ee(g);return v.persistence.runTransaction("read document","readonly",w=>v.localDocuments.getDocument(w,m))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ce(J.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=Zd(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield ih(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Wo(e,r,n._key,i,new Ec(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function WQ(n){n=vt(n,pn);const e=vt(n.firestore,Kt);return mF(En(e),n._key,{source:"server"}).then(t=>W0(e,n,t))}(this._delegate):function GQ(n){n=vt(n,pn);const e=vt(n.firestore,Kt);return mF(En(e),n._key).then(t=>W0(e,n,t))}(this._delegate),t.then(r=>new _g(this.firestore,new Wo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new os(this.firestore,this._delegate.withConverter(e?wc.getInstance(this.firestore,e):null))}}function li(n,e,t){return n.message=n.message.replace(e,t),n}function rL(n){for(const e of n)if("object"==typeof e&&!Y0(e))return e;return{}}function iL(n,e){var t,r;let i;return i=Y0(n[0])?n[0]:Y0(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class _g{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new os(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zF(this._delegate,e._delegate)}}class yg extends _g{data(e){const t=this._delegate.data(e);return this._delegate._converter||function uW(n,e){n||Ne()}(void 0!==t),t}}class di{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $v(e)}where(e,t,r){try{return new di(this.firestore,Ya(this._delegate,function OQ(n,e,t){const r=e,i=Vv("where",n);return pg._create(i,r,t)}(e,t,r)))}catch(i){throw li(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new di(this.firestore,Ya(this._delegate,function kQ(n,e="asc"){const t=e,r=Vv("orderBy",n);return G0._create(r,t)}(e,t)))}catch(r){throw li(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new di(this.firestore,Ya(this._delegate,function VQ(n){return AF("limit",n),Fv._create("limit",n,"F")}(e)))}catch(t){throw li(t,"limit()","Query.limit()")}}limitToLast(e){try{return new di(this.firestore,Ya(this._delegate,function FQ(n){return AF("limitToLast",n),Fv._create("limitToLast",n,"L")}(e)))}catch(t){throw li(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new di(this.firestore,Ya(this._delegate,function LQ(...n){return Lv._create("startAt",n,!0)}(...e)))}catch(t){throw li(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new di(this.firestore,Ya(this._delegate,function UQ(...n){return Lv._create("startAfter",n,!1)}(...e)))}catch(t){throw li(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new di(this.firestore,Ya(this._delegate,function BQ(...n){return Uv._create("endBefore",n,!1)}(...e)))}catch(t){throw li(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new di(this.firestore,Ya(this._delegate,function jQ(...n){return Uv._create("endAt",n,!0)}(...e)))}catch(t){throw li(t,"endAt()","Query.endAt()")}}isEqual(e){return O0(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function QQ(n){n=vt(n,Rr);const e=vt(n.firestore,Kt),t=En(e),r=new Za(e);return function cQ(n,e){const t=new mr;return n.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return(r=(0,ie.A)(function*(s,o,a){try{const u=yield yv(s,o,!0),d=new rF(o,u.Ts),g=d.ma(u.documents),m=d.applyChanges(g,!1);a.resolve(m.snapshot)}catch(u){const d=Zd(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield ih(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ja(e,r,n,i))}(this._delegate):"server"===e?.source?function YQ(n){n=vt(n,Rr);const e=vt(n.firestore,Kt),t=En(e),r=new Za(e);return _F(t,n._query,{source:"server"}).then(i=>new Ja(e,r,n,i))}(this._delegate):function KQ(n){n=vt(n,Rr);const e=vt(n.firestore,Kt),t=En(e),r=new Za(e);return LF(n._query),_F(t,n._query).then(i=>new Ja(e,r,n,i))}(this._delegate),t.then(r=>new J0(this.firestore,new Ja(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=rL(e),r=iL(e,i=>new J0(this.firestore,new Ja(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return WF(this._delegate,t,r)}withConverter(e){return new di(this.firestore,this._delegate.withConverter(e?wc.getInstance(this.firestore,e):null))}}class wY{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new yg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class J0{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new di(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new yg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new wY(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new yg(this._firestore,r))})}isEqual(e){return zF(this._delegate,e._delegate)}}class uh extends di{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new os(this.firestore,e):null}doc(e){try{return new os(this.firestore,void 0===e?Rv(this._delegate):Rv(this._delegate,e))}catch(t){throw li(t,"doc()","CollectionReference.doc()")}}add(e){return function ZQ(n,e){const t=vt(n.firestore,Kt),r=Rv(n),i=Bv(n.converter,e);return ah(t,[Nv(vc(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,In.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new os(this.firestore,t))}isEqual(e){return bF(this._delegate,e._delegate)}withConverter(e){return new uh(this.firestore,this._delegate.withConverter(e?wc.getInstance(this.firestore,e):null))}}function Ac(n){return vt(n,pn)}class Z0{constructor(...e){this._delegate=new qo(...e)}static documentId(){return new Z0(hn.keyField().canonicalString())}isEqual(e){return(e=(0,Vt.Ku)(e))instanceof qo&&this._delegate._internalPath.isEqual(e._internalPath)}}class Cc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function hY(){return new F0("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Cc(e)}static delete(){const e=function dY(){return new lg("deleteField")}();return e._methodName="FieldValue.delete",new Cc(e)}static arrayUnion(...e){const t=function fY(...n){return new L0("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Cc(t)}static arrayRemove(...e){const t=function pY(...n){return new U0("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Cc(t)}static increment(e){const t=function gY(n){return new B0("increment",n)}(e);return t._methodName="FieldValue.increment",new Cc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const AY={Firestore:eL,GeoPoint:Pv,Timestamp:yn,Blob:mg,Transaction:tL,WriteBatch:nL,DocumentReference:os,DocumentSnapshot:_g,Query:di,QueryDocumentSnapshot:yg,QuerySnapshot:J0,CollectionReference:uh,FieldPath:Z0,FieldValue:Cc,setLogLevel:function EY(n){!function aW(n){ka.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function sL(n,e){return function DY(n,e=WO){return new dt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function X0(n,e){return sL(n,e).pipe(ke(t=>({payload:t,type:"query"})))}!function TY(n){(function CY(n,e){n.INTERNAL.registerComponent(new l1.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},AY)))})(n,(e,t)=>new eL(e,t,new IY)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Oa.A);class oL{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=hL(r,t);return new cL(i,s,this.afs)}snapshotChanges(){return function bY(n,e){return sL(n,e).pipe(vy(void 0),DC(),ke(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ui)}valueChanges(e={}){return this.snapshotChanges().pipe(ke(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return S(this.ref.get(e)).pipe(Ui)}}function Hv(n,e){return X0(n,e).pipe(vy(void 0),DC(),ke(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(m=>m.doc.ref.isEqual(a.ref)),g=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&g&&JSON.stringify(g.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function aL(n,e,t){return Hv(n,t).pipe(Ey((r,i)=>function SY(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function RY(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return eD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return eD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return eD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),zt(),ke(r=>r.map(i=>({type:i.type,payload:i}))))}function eD(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function uL(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class cL{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Hv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ke(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(vy(void 0),DC(),is(([r,i])=>i.length>0||!r),ke(([,r])=>r),Ui)}auditTrail(e){return this.stateChanges(e).pipe(Ey((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uL(e);return aL(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ui)}valueChanges(e={}){return X0(this.query,this.afs.schedulers.outsideAngular).pipe(ke(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ui)}get(e){return S(this.query.get(e)).pipe(Ui)}add(e){return this.ref.add(e)}doc(e){return new oL(this.ref.doc(e),this.afs)}}class PY{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Hv(this.query,this.afs.schedulers.outsideAngular).pipe(ke(t=>t.filter(r=>e.indexOf(r.type)>-1)),is(t=>t.length>0),Ui):Hv(this.query,this.afs.schedulers.outsideAngular).pipe(Ui)}auditTrail(e){return this.stateChanges(e).pipe(Ey((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=uL(e);return aL(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ui)}valueChanges(e={}){return X0(this.query,this.afs.schedulers.outsideAngular).pipe(ke(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ui)}get(e){return S(this.query.get(e)).pipe(Ui)}}const lL=new _e("angularfire2.enableFirestorePersistence"),dL=new _e("angularfire2.firestore.persistenceSettings"),MY=new _e("angularfire2.firestore.settings"),xY=new _e("angularfire2.firestore.use-emulator");function hL(n,e=(t=>t)){return{query:e(n),ref:n}}let NY=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,d,g,m,v,w,C,D,M,z,F){this.schedulers=u;const q=TC(t,a,r),ae=g;m&&u1(q,a,v,C,D,M,w,z),[this.firestore,this.persistenceEnabled$]=ZO(`${q.name}.firestore`,"AngularFirestore",q.name,()=>{const ye=a.runOutsideAngular(()=>q.firestore());if(s&&ye.settings(s),ae&&ye.useEmulator(...ae),i&&!py(o)){const Ue=()=>{try{return S(ye.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(V){return typeof console<"u"&&console.warn(V),B(!1)}};return[ye,a.runOutsideAngular(Ue)]}return[ye,B(!1)]},[s,ae,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=hL(i,r),a=this.schedulers.ngZone.run(()=>s);return new cL(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new PY(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new oL(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(me(By),me(jy,8),me(lL,8),me(MY,8),me(Vs),me(Ut),me(YO),me(dL,8),me(xY,8),me(c1,8),me(n1,8),me(r1,8),me(i1,8),me(s1,8),me(o1,8),me(a1,8),me(KO,8))};static \u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),OY=(()=>{class n{constructor(){Oa.A.registerVersion("angularfire",CC.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:lL,useValue:!0},{provide:dL,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ri({type:n});static \u0275inj=dr({providers:[NY]})}return n})();const kY_firebase={apiKey:"AIzaSyDWOb8hpZ7JQcpPzpcNw6SW53_pG0V5UE0",authDomain:"wedding-29b48.firebaseapp.com",projectId:"wedding-29b48",storageBucket:"wedding-29b48.firebasestorage.app",messagingSenderId:"807343676966",appId:"1:807343676966:web:1c21870a5ee2dfbae790e7",measurementId:"YOUR_MEASUREMENT_ID"};let fL=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(pe(bo),pe(Oi))}}static{this.\u0275dir=Ye({type:n})}}return n})(),Tc=(()=>{class n extends fL{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Bn(n)))(i||n)}}()}static{this.\u0275dir=Ye({type:n,features:[Bt]})}}return n})();const Xs=new _e("NgValueAccessor"),LY={provide:Xs,useExisting:St(()=>zv),multi:!0},BY=new _e("CompositionEventMode");let zv=(()=>{class n extends fL{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function UY(){const n=Ra()?Ra().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(pe(bo),pe(Oi),pe(BY,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&rn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[_n([LY]),Bt]})}}return n})();const Wr=new _e("NgValidators"),tu=new _e("NgAsyncValidators");function CL(n){return null!=n}function TL(n){return Jf(n)?S(n):n}function DL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function bL(n,e){return e.map(t=>t(n))}function SL(n){return n.map(e=>function $Y(n){return!n.validate}(e)?e:t=>e.validate(t))}function tD(n){return null!=n?function RL(n){if(!n)return null;const e=n.filter(CL);return 0==e.length?null:function(t){return DL(bL(t,e))}}(SL(n)):null}function nD(n){return null!=n?function PL(n){if(!n)return null;const e=n.filter(CL);return 0==e.length?null:function(t){return function VY(...n){const e=io(n),{args:t,keys:r}=FN(n),i=new dt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,d=o;for(let g=0;g<o;g++){let m=!1;zn(t[g]).subscribe(fe(s,v=>{m||(m=!0,d--),a[g]=v},()=>u--,void 0,()=>{(!u||!m)&&(d||s.next(r?UN(r,a):a),s.complete())}))}});return e?i.pipe(LN(e)):i}(bL(t,e).map(TL)).pipe(ke(DL))}}(SL(n)):null}function ML(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function rD(n){return n?Array.isArray(n)?n:[n]:[]}function qv(n,e){return Array.isArray(n)?n.includes(e):n===e}function OL(n,e){const t=rD(e);return rD(n).forEach(i=>{qv(t,i)||t.push(i)}),t}function kL(n,e){return rD(e).filter(t=>!qv(n,t))}class VL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class hi extends VL{get formDirective(){return null}get path(){return null}}class nu extends VL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class FL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let LL=(()=>{class n extends FL{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(pe(nu,2))}}static{this.\u0275dir=Ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Da("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Bt]})}}return n})(),UL=(()=>{class n extends FL{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(pe(hi,10))}}static{this.\u0275dir=Ye({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Da("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Bt]})}}return n})();const vg="VALID",Kv="INVALID",ch="PENDING",Ig="DISABLED";function oD(n){return(Qv(n)?n.validators:n)||null}function aD(n,e){return(Qv(e)?e.asyncValidators:n)||null}function Qv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class uD{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vg}get invalid(){return this.status===Kv}get pending(){return this.status==ch}get disabled(){return this.status===Ig}get enabled(){return this.status!==Ig}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(OL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(OL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(kL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(kL(e,this._rawAsyncValidators))}hasValidator(e){return qv(this._rawValidators,e)}hasAsyncValidator(e){return qv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ch,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ig,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vg||this.status===ch)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ig:vg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ch,this._hasOwnPendingAsyncValidator=!0;const t=TL(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new On,this.statusChanges=new On}_calculateStatus(){return this._allControlsDisabled()?Ig:this.errors?Kv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ch)?ch:this._anyControlsHaveStatus(Kv)?Kv:vg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function qY(n){return Array.isArray(n)?tD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function WY(n){return Array.isArray(n)?nD(n):n||null}(this._rawAsyncValidators)}}class cD extends uD{constructor(e,t,r){super(oD(t),aD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function $L(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new de(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function jL(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new de(1e3,"");if(!r[t])throw new de(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const lh=new _e("CallSetDisabledState",{providedIn:"root",factory:()=>Yv}),Yv="always";function Eg(n,e,t=Yv){lD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function YY(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&HL(n,e)})}(n,e),function ZY(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function JY(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&HL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function QY(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Xv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function lD(n,e){const t=function xL(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(ML(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function NL(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(ML(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Xv(e._rawValidators,i),Xv(e._rawAsyncValidators,i)}function HL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const rJ={provide:hi,useExisting:St(()=>tI)},wg=(()=>Promise.resolve())();let tI=(()=>{class n extends hi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new On,this.form=new cD({},tD(t),nD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){wg.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Eg(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){wg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){wg.then(()=>{const r=this._findContainer(t.path),i=new cD({});(function zL(n,e){lD(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){wg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){wg.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function GL(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(pe(Wr,10),pe(tu,10),pe(lh,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&rn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_n([rJ]),Bt]})}}return n})();function qL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function WL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const KL=class extends uD{constructor(e=null,t,r){super(oD(t),aD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=WL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){qL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){qL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){WL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},oJ={provide:nu,useExisting:St(()=>pD)},JL=(()=>Promise.resolve())();let pD=(()=>{class n extends nu{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new KL,this._registered=!1,this.name="",this.update=new On,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function fD(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===zv?t=s:function tJ(n){return Object.getPrototypeOf(n.constructor)===Tc}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function hD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Eg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){JL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&cd(r);JL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Jv(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(pe(hi,9),pe(Wr,10),pe(tu,10),pe(Xs,10),pe(Z_,8),pe(lh,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_n([oJ]),Bt,Ei]})}}return n})(),ZL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),e2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({})}}return n})(),PJ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({imports:[e2]})}}return n})(),xJ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:lh,useValue:t.callSetDisabledState??Yv}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({imports:[PJ]})}}return n})();class nI{}class rI{}class eo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof eo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new eo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof eo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class NJ{encodeKey(e){return y2(e)}encodeValue(e){return y2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const kJ=/%(\d[a-f0-9])/gi,VJ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function y2(n){return encodeURIComponent(n).replace(kJ,(e,t)=>VJ[t]??e)}function iI(n){return`${n}`}class ru{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new NJ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function OJ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(iI):[iI(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ru({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(iI(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(iI(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class FJ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function v2(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function I2(n){return typeof Blob<"u"&&n instanceof Blob}function E2(n){return typeof FormData<"u"&&n instanceof FormData}class Ag{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function LJ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new eo),this.context||(this.context=new FJ),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new ru,this.urlWithParams=t}serializeBody(){return null===this.body?null:v2(this.body)||I2(this.body)||E2(this.body)||function UJ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ru?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||E2(this.body)?null:I2(this.body)?this.body.type||null:v2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ru?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,d=e.params||this.params;const g=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),d)),new Ag(t,r,s,{params:d,headers:u,context:g,reportProgress:a,responseType:i,withCredentials:o})}}var dh=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(dh||{});class ED{constructor(e,t=200,r="OK"){this.headers=e.headers||new eo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class wD extends ED{constructor(e={}){super(e),this.type=dh.ResponseHeader}clone(e={}){return new wD({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class hh extends ED{constructor(e={}){super(e),this.type=dh.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new hh({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class w2 extends ED{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function AD(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let A2=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Ag)s=t;else{let u,d;u=i.headers instanceof eo?i.headers:new eo(i.headers),i.params&&(d=i.params instanceof ru?i.params:new ru({fromObject:i.params})),s=new Ag(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=B(s).pipe(hd(u=>this.handler.handle(u)));if(t instanceof Ag||"events"===i.observe)return o;const a=o.pipe(is(u=>u instanceof hh));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(ke(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(ke(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(ke(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(ke(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ru).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,AD(i,r))}post(t,r,i={}){return this.request("POST",t,AD(i,r))}put(t,r,i={}){return this.request("PUT",t,AD(i,r))}static{this.\u0275fac=function(r){return new(r||n)(me(nI))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();function D2(n,e){return e(n)}function jJ(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const HJ=new _e(""),Cg=new _e(""),b2=new _e("");function zJ(){let n=null;return(e,t)=>{null===n&&(n=(be(HJ,{optional:!0})??[]).reduceRight(jJ,D2));const r=be(K_),i=r.add();return n(e,t).pipe(pp(()=>r.remove(i)))}}let S2=(()=>{class n extends nI{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=be(K_)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Cg),...this.injector.get(b2,[])]));this.chain=i.reduceRight((s,o)=>function $J(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),D2)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(pp(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(me(rI),me(Ni))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();const KJ=/^\)\]\}',?\n/;let P2=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new de(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?S(r.\u0275loadImpl()):B(null)).pipe(Te(()=>new dt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((D,M)=>o.setRequestHeader(D,M.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const D=t.detectContentTypeHeader();null!==D&&o.setRequestHeader("Content-Type",D)}if(t.responseType){const D=t.responseType.toLowerCase();o.responseType="json"!==D?D:"text"}const a=t.serializeBody();let u=null;const d=()=>{if(null!==u)return u;const D=o.statusText||"OK",M=new eo(o.getAllResponseHeaders()),z=function QJ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return u=new wD({headers:M,status:o.status,statusText:D,url:z}),u},g=()=>{let{headers:D,status:M,statusText:z,url:F}=d(),q=null;204!==M&&(q=typeof o.response>"u"?o.responseText:o.response),0===M&&(M=q?200:0);let ae=M>=200&&M<300;if("json"===t.responseType&&"string"==typeof q){const ye=q;q=q.replace(KJ,"");try{q=""!==q?JSON.parse(q):null}catch(Ue){q=ye,ae&&(ae=!1,q={error:Ue,text:q})}}ae?(s.next(new hh({body:q,headers:D,status:M,statusText:z,url:F||void 0})),s.complete()):s.error(new w2({error:q,headers:D,status:M,statusText:z,url:F||void 0}))},m=D=>{const{url:M}=d(),z=new w2({error:D,status:o.status||0,statusText:o.statusText||"Unknown Error",url:M||void 0});s.error(z)};let v=!1;const w=D=>{v||(s.next(d()),v=!0);let M={type:dh.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(M.total=D.total),"text"===t.responseType&&o.responseText&&(M.partialText=o.responseText),s.next(M)},C=D=>{let M={type:dh.UploadProgress,loaded:D.loaded};D.lengthComputable&&(M.total=D.total),s.next(M)};return o.addEventListener("load",g),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),t.reportProgress&&(o.addEventListener("progress",w),null!==a&&o.upload&&o.upload.addEventListener("progress",C)),o.send(a),s.next({type:dh.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",g),o.removeEventListener("timeout",m),t.reportProgress&&(o.removeEventListener("progress",w),null!==a&&o.upload&&o.upload.removeEventListener("progress",C)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(me(gN))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();const CD=new _e("XSRF_ENABLED"),M2=new _e("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),x2=new _e("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class N2{}let ZJ=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=sN(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(me(Fi),me(Vs),me(M2))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac})}}return n})();function XJ(n,e){const t=n.url.toLowerCase();if(!be(CD)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=be(N2).getToken(),i=be(x2);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var iu=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(iu||{});function bc(n,e){return{\u0275kind:n,\u0275providers:e}}function eZ(...n){const e=[A2,P2,S2,{provide:nI,useExisting:S2},{provide:rI,useExisting:P2},{provide:Cg,useValue:XJ,multi:!0},{provide:CD,useValue:!0},{provide:N2,useClass:ZJ}];for(const t of n)e.push(...t.\u0275providers);return function zE(n){return{\u0275providers:n}}(e)}const O2=new _e("LEGACY_INTERCEPTOR_FN");let nZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({providers:[eZ(bc(iu.LegacyInterceptors,[{provide:O2,useFactory:zJ},{provide:Cg,useExisting:O2,multi:!0}]))]})}}return n})(),uZ=(()=>{class n{constructor(){this.target=new Date(2025,6,19,12,30),this.updateTimeDifference(),this.intervalId=setInterval(()=>{this.updateTimeDifference()},1e3)}updateTimeDifference(){const t=new Date(Date.now()),r=this.target.getTime()-t.getTime();r<=0?(clearInterval(this.intervalId),this.remDays=this.remHours=this.remMinutes=this.remSeconds=0):this.calculateDifference(r)}calculateDifference(t){try{this.remDays=Math.floor(t/864e5),t%=864e5,this.remHours=Math.floor(t/36e5),t%=36e5,this.remMinutes=Math.floor(t/6e4),t%=6e4,this.remSeconds=Math.floor(t/1e3)}catch(r){console.log("Error in calculateDifference",r)}}ngOnDestroy(){clearInterval(this.intervalId)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=yi({type:n,selectors:[["app-timer"]],decls:3,vars:4,consts:[[1,"container"],[1,"clock"]],template:function(r,i){1&r&&(xe(0,"div",0)(1,"div",1),st(2),Le()()),2&r&&(Mt(2),Uw("",i.remDays," days, ",i.remHours," hrs ",i.remMinutes," min ",i.remSeconds," sec."))},styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;height:70px;width:50vw;background-color:#96a498;color:#fff;font-size:26px;padding-left:2em}@media (max-width: 1000px){.container[_ngcontent-%COMP%]{height:60px;font-size:20px}}@media (max-width: 800px){.container[_ngcontent-%COMP%]{height:50px;font-size:18px}}@media (max-width: 600px){.container[_ngcontent-%COMP%]{height:40px;width:45vw;font-size:12px;padding-left:1.5em}}@media (max-width: 450px){.container[_ngcontent-%COMP%]{height:30px;font-size:10px;padding-left:1em}}@media (max-width: 400px){.container[_ngcontent-%COMP%]{height:25px;padding-left:1em}}"]})}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cZ(n,e){if(1&n){const t=Ca();xe(0,"div",35),rn("click",function(){return rr(t),Ar(or().hideImage())}),sr(1,"img",36),Le()}if(2&n){const t=or();Mt(1),Rn("src",t.enlargedImageSrc,Gu)}}let lZ=(()=>{class n{constructor(){this.timer=new uZ,this.isImageVisible=!1,this.enlargedImageSrc=""}showImage(t){this.enlargedImageSrc=t.src,this.isImageVisible=!0}hideImage(){this.isImageVisible=!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=yi({type:n,selectors:[["app-home"]],decls:62,vars:2,consts:[[1,"container"],[1,"welcome-text"],[1,"time-and-place"],[1,"dot"],[1,"our-story"],[1,"our-story-headline"],[1,"our-story-text"],[1,"collage-container"],[1,"collage-item-1",3,"click"],["src","assets/images/ratio1-1/picture5-1_1.jpg"],["collageItem1",""],[1,"overlay-text-1_1"],[1,"collage-item-2",3,"click"],["src","assets/images/ratio1-1/picture12-1_1.jpg"],["collageItem2",""],[1,"collage-item-3",3,"click"],["src","assets/images/ratio9-16/picture10-9_16.jpg"],["collageItem3",""],[1,"overlay-text-9_16"],[1,"collage-item-4",3,"click"],["src","assets/images/ratio9-16/picture6-9_16.jpg"],["collageItem4",""],[1,"collage-item-5",3,"click"],["src","assets/images/ratio9-16/picture18-9_16.jpg"],["collageItem5",""],[1,"collage-item-6",3,"click"],["src","assets/images/ratio9-16/picture17-9_16.jpg"],["collageItem6",""],[1,"collage-item-7",3,"click"],["src","assets/images/ratio1-1/picture8-1_1.jpg"],["collageItem7",""],[1,"collage-item-8",3,"click"],["src","assets/images/ratio1-1/picture14-1_1.jpg"],["collageItem8",""],["class","image-overlay",3,"click",4,"ngIf"],[1,"image-overlay",3,"click"],[3,"src"]],template:function(r,i){if(1&r){const s=Ca();xe(0,"div",0)(1,"div",1)(2,"div"),st(3,"We are delighted to welcome you to"),Le(),xe(4,"div"),st(5,"Patrik & Claudia's"),Le(),xe(6,"div"),st(7,"wedding!"),Le()(),xe(8,"div",2),st(9," July 19 2025 "),sr(10,"span",3),st(11," G\xf6teborg "),sr(12,"span",3),xe(13,"span"),st(14),Le()(),xe(15,"div",4)(16,"div",5),st(17,"OUR STORY"),Le(),xe(18,"p",6),st(19," A simple message on a dating app would travel across Kattegat and become the beginning of our beautiful love story. \u201cHello there on the other side of the water\u201d Patrik wrote, and with those simple words, a Swedish Pilot and a Danish accountant would begin their very own fairytale. Our story proves that love knows no borders. Between Patrik\u2019s flights touching down all over Europe and my world of endless numbers and spreadsheets we have created a beautiful relationship based on mutual respect, curiosity and many interests that with time have become mutual. Patrik has introduced me to the beauty of the Gothenburg Archipelago, and I have shared with him my love for all things Italian. In our relationship we delight in teaching each other. Patrik patiently sits evening after evening explaining to me the intricate systems of jet aircraft \u2013 just ask me what might happen if you get on the back side of the drag curve... While I introduce him to the profound simplicity of Hemingway\u2019s prose, as well as the differences between the different philosophical schools. When I was younger, and wanted as young people tend to do \u2013 everything all at once, I would get annoyed when people told me to be patient, and that whoever waits for something good never waits in vain. Today I understand that they were right. Patrik and I might have found each other later in life, but in each other we have found a true soul mate, and a love that is both patient and enduring of any outside circumstances. On that magical Christmas Eve in 2023 when Patrik dropped to one knee and asked me to be his wife in Rome\u2019s beautiful Borghese Gardens I have never been more sure of an answer in my whole life. Patrik and I are so excited to embark on this next chapter of our lives as husband and wife together with our beloved children, and one far too spoiled miniature dachshund. Welcome to our wedding website. We can\u2019t wait to celebrate with all of you and hope you will find the information on this site useful. "),Le()(),xe(20,"div",7)(21,"div",8),rn("click",function(){rr(s);const a=Bs(23);return Ar(i.showImage(a))}),sr(22,"img",9,10),xe(24,"div",11),st(25,"Dec 2023"),Le()(),xe(26,"div",12),rn("click",function(){rr(s);const a=Bs(28);return Ar(i.showImage(a))}),sr(27,"img",13,14),xe(29,"div",11),st(30,"May 2023"),Le()(),xe(31,"div",15),rn("click",function(){rr(s);const a=Bs(33);return Ar(i.showImage(a))}),sr(32,"img",16,17),xe(34,"div",18),st(35,"Aug 2023"),Le()(),xe(36,"div",19),rn("click",function(){rr(s);const a=Bs(38);return Ar(i.showImage(a))}),sr(37,"img",20,21),xe(39,"div",18),st(40,"Dec 2023"),Le()(),xe(41,"div",22),rn("click",function(){rr(s);const a=Bs(43);return Ar(i.showImage(a))}),sr(42,"img",23,24),xe(44,"div",18),st(45,"Feb 2023"),Le()(),xe(46,"div",25),rn("click",function(){rr(s);const a=Bs(48);return Ar(i.showImage(a))}),sr(47,"img",26,27),xe(49,"div",18),st(50,"Sept 2024"),Le()(),xe(51,"div",28),rn("click",function(){rr(s);const a=Bs(53);return Ar(i.showImage(a))}),sr(52,"img",29,30),xe(54,"div",11),st(55,"July 2024"),Le()(),xe(56,"div",31),rn("click",function(){rr(s);const a=Bs(58);return Ar(i.showImage(a))}),sr(57,"img",32,33),xe(59,"div",11),st(60,"Dec 2022"),Le()()(),gs(61,cZ,2,1,"div",34),Le()}2&r&&(Mt(14),ba("",i.timer.remDays," days to go"),Mt(47),Rn("ngIf",i.isImageVisible))},dependencies:[fy],styles:[".welcome-text[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:30px;font-family:Waterfall,cursive;font-size:80px;align-items:center;text-align:center}.time-and-place[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:auto;background-color:#96a498;color:#fff;padding:.5em;font-size:22px}.dot[_ngcontent-%COMP%]{height:5px;width:5px;background-color:#fff;border-radius:50%;display:inline-block;margin-left:1.5em;margin-right:1.5em}.our-story-headline[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:center;font-size:26px}.our-story-text[_ngcontent-%COMP%]{margin:15px 2em 2em;font-size:14px;column-count:2;column-gap:20px;column-fill:balance;overflow-y:auto}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:36px;float:left;margin-right:.15em;line-height:1}.collage-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:auto auto auto auto;grid-column-gap:3%;grid-row-gap:3%;margin:3% 5% 5%}.collage-item-1[_ngcontent-%COMP%]{grid-column:1/1;grid-row:1/2;position:relative}.collage-item-2[_ngcontent-%COMP%]{grid-column:2/2;grid-row:1/2;position:relative}.collage-item-3[_ngcontent-%COMP%]{grid-column:3/4;grid-row:1/3;position:relative}.collage-item-4[_ngcontent-%COMP%]{grid-column:4/5;grid-row:1/3;position:relative}.collage-item-5[_ngcontent-%COMP%]{grid-column:1/2;grid-row:2/4;position:relative}.collage-item-6[_ngcontent-%COMP%]{grid-column:2/3;grid-row:2/4;position:relative}.collage-item-7[_ngcontent-%COMP%]{grid-column:3/4;grid-row:3/4;position:relative}.collage-item-8[_ngcontent-%COMP%]{grid-column:4/5;grid-row:3/4;position:relative}.collage-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:auto;object-fit:cover;border-radius:5px;filter:grayscale(100%);transition:filter .3s ease}.collage-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{filter:grayscale(0%)}.overlay-text-1_1[_ngcontent-%COMP%]{position:absolute;top:85%;left:10%;color:#fff;text-shadow:2px 2px 5px rgb(0,0,0);font-size:16px;font-weight:700}.overlay-text-9_16[_ngcontent-%COMP%]{position:absolute;top:90%;left:10%;color:#fff;text-shadow:2px 2px 5px rgb(0,0,0);font-size:16px;font-weight:700}.image-overlay[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;max-height:100%;max-width:auto;transform:translate(-35%,-50%);background-color:#000c;padding:40px;display:flex;justify-content:center;align-items:center;z-index:2}.image-overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:90vh;box-shadow:0 0 20px #00000080;border:2px solid white}@media (max-width: 1200px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:70px}.time-and-place[_ngcontent-%COMP%]{font-size:20px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 1000px){.welcome-text[_ngcontent-%COMP%]{margin-top:60px;font-size:65px}.time-and-place[_ngcontent-%COMP%]{font-size:18px}.dot[_ngcontent-%COMP%]{height:4px;width:4px}.our-story-text[_ngcontent-%COMP%]{font-size:12px;column-gap:18px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:30px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 800px){.welcome-text[_ngcontent-%COMP%]{margin-top:60px;font-size:52px}.time-and-place[_ngcontent-%COMP%]{font-size:16px}.our-story-headline[_ngcontent-%COMP%]{margin-top:20px;font-size:22px}.our-story-text[_ngcontent-%COMP%]{font-size:10px;column-gap:12px;margin-top:10px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:25px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:10px}.image-overlay[_ngcontent-%COMP%]{padding:30px;transform:translate(-30%,-50%)}}@media (max-width: 600px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:30px;font-size:38px}.time-and-place[_ngcontent-%COMP%]{font-size:12px}.dot[_ngcontent-%COMP%]{height:3px;width:3px}.our-story-headline[_ngcontent-%COMP%]{margin-top:15px;font-size:18px}.our-story-text[_ngcontent-%COMP%]{font-size:8px;column-gap:8px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:20px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:8px}}@media (max-width: 450px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:35px}.time-and-place[_ngcontent-%COMP%]{font-size:10px}.our-story-headline[_ngcontent-%COMP%]{font-size:14px}.our-story-text[_ngcontent-%COMP%]{font-size:7px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:18px;column-gap:6px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:6px}.image-overlay[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 400px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:28px}.timer[_ngcontent-%COMP%]{margin-top:20px}}"]})}}return n})(),dZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=yi({type:n,selectors:[["app-about"]],decls:3,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(xe(0,"div",0)(1,"p"),st(2,"about works!"),Le()())},styles:[".container[_ngcontent-%COMP%]{margin:2em;height:100vh}"]})}}return n})(),hZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=yi({type:n,selectors:[["app-schedule"]],decls:2,vars:0,consts:[[1,"page-headline"]],template:function(r,i){1&r&&(xe(0,"div",0),st(1,"SCHEDULE"),Le())},styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{height:100vh;margin:2em}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}}"]})}}return n})(),fZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=yi({type:n,selectors:[["app-contact"]],decls:2,vars:0,consts:[[1,"page-headline"]],template:function(r,i){1&r&&(xe(0,"div",0),st(1,"CONTACT"),Le())},styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{height:100vh;margin:2em}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}}"]})}}return n})(),pZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=yi({type:n,selectors:[["app-error"]],decls:5,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(xe(0,"div",0)(1,"h1"),st(2,"404: Page Not Found"),Le(),xe(3,"p"),st(4,"The page you are looking for cannot be found or you do not have access to this page."),Le()())},styles:[".container[_ngcontent-%COMP%]{text-align:center;margin:30px 0}"]})}}return n})(),k2=(()=>{class n{constructor(t){this.http=t}fetchGifts(){return this.http.get("https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app/gifts.json").pipe(ke(r=>{const i=[];for(const s in r)i.push({...r[s]});return i}))}updateClaim(t,r){return this.http.patch("https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app//"+t+".json",r)}addGuest(t){return this.http.post("https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app/guests.json",t)}static{this.\u0275fac=function(r){return new(r||n)(me(A2))}}static{this.\u0275prov=Fe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gZ(n,e){1&n&&(xe(0,"div",11),st(1,"Name missing"),Le())}let mZ=(()=>{class n{constructor(t){this.firebaseService=t,this.validName=!0}addGuest(t,r){try{this.validateName(t.name),this.firebaseService.addGuest(t).subscribe(),this.validName=!0,r.reset()}catch(i){this.validName=!1,console.error("Adding a Guest failed: "+i)}}validateName(t){if(t.length<1)throw Error}static{this.\u0275fac=function(r){return new(r||n)(pe(k2))}}static{this.\u0275cmp=yi({type:n,selectors:[["app-rsvp"]],decls:20,vars:1,consts:[[1,"page-headline"],[1,"container"],[1,"text-container"],[1,"form-container"],[1,"form",3,"ngSubmit"],["guestForm","ngForm"],["type","text","name","name","ngModel","",1,"input-field"],["class","error-message",4,"ngIf"],["type","text","name","plusOne","ngModel","",1,"input-field"],["name","additional","rows","5","ngModel","",1,"input-field"],["type","submit","value","Send",1,"submit-button"],[1,"error-message"]],template:function(r,i){if(1&r){const s=Ca();xe(0,"div",0),st(1,"RSVP"),Le(),xe(2,"div",1)(3,"div",2)(4,"p"),st(5,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ipsam natus deleniti ex delectus at libero consequatur est sequi numquam eveniet! "),Le()(),xe(6,"div",3)(7,"form",4,5),rn("ngSubmit",function(){rr(s);const a=Bs(8);return Ar(i.addGuest(a.value,a))}),xe(9,"label"),st(10,"Name"),Le(),sr(11,"input",6),gs(12,gZ,2,0,"div",7),xe(13,"label"),st(14,"Plus one (if any)"),Le(),sr(15,"input",8),xe(16,"label"),st(17,"Additional info"),Le(),sr(18,"textarea",9)(19,"input",10),Le()()()}2&r&&(Mt(12),Rn("ngIf",!i.validName))},dependencies:[fy,ZL,zv,LL,UL,pD,tI],styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{height:100vh;margin:2em}.text-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.form-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:400px;height:auto;background-color:#96a498;color:#fff;border-radius:10px;padding:1em}label[_ngcontent-%COMP%]{font-size:18px;margin-top:1em}.input-field[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:.5em;width:300px}.submit-button[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:2em;width:50px}.error-message[_ngcontent-%COMP%]{color:#fff}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}label[_ngcontent-%COMP%]{font-size:16px}.form[_ngcontent-%COMP%]{width:300px;height:auto}.input-field[_ngcontent-%COMP%]{width:200px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}label[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}.form[_ngcontent-%COMP%]{width:200px;height:auto}.input-field[_ngcontent-%COMP%]{width:150px}label[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}.form[_ngcontent-%COMP%]{width:150px;height:auto}.input-field[_ngcontent-%COMP%]{width:120px}label[_ngcontent-%COMP%]{font-size:12px}}"]})}}return n})();function _Z(n,e){if(1&n){const t=Ca();xe(0,"button",9),rn("click",function(){rr(t);const i=or().$implicit;return Ar(or().updateGiftStatus(i))}),Le()}2&n&&Da("ticked",or().$implicit.claimed)}function yZ(n,e){if(1&n&&(xe(0,"tr")(1,"td",5),gs(2,_Z,1,2,"button",6),Le(),xe(3,"td",7)(4,"a",8),st(5),Le()()()),2&n){const t=e.$implicit,r=or();Mt(2),Rn("ngIf","single"===t.quantity),Mt(1),Rn("ngStyle",r.getGiftStyle(t)),Mt(1),nd("href",t.link,Gu),Mt(1),ba(" ",t.name,"")}}function vZ(n,e){if(1&n){const t=Ca();xe(0,"button",9),rn("click",function(){rr(t);const i=or().$implicit;return Ar(or().updateGiftStatus(i))}),Le()}2&n&&Da("ticked",or().$implicit.claimed)}function IZ(n,e){if(1&n&&(xe(0,"tr")(1,"td",5),gs(2,vZ,1,2,"button",6),Le(),xe(3,"td",7)(4,"a",8),st(5),Le()()()),2&n){const t=e.$implicit,r=or();Mt(2),Rn("ngIf","single"===t.quantity),Mt(1),Rn("ngStyle",r.getGiftStyle(t)),Mt(1),nd("href",t.link,Gu),Mt(1),ba(" ",t.name,"")}}function EZ(n,e){if(1&n){const t=Ca();xe(0,"button",9),rn("click",function(){rr(t);const i=or().$implicit;return Ar(or().updateGiftStatus(i))}),Le()}2&n&&Da("ticked",or().$implicit.claimed)}function wZ(n,e){if(1&n&&(xe(0,"tr")(1,"td",5),gs(2,EZ,1,2,"button",6),Le(),xe(3,"td",7)(4,"a",8),st(5),Le()()()),2&n){const t=e.$implicit,r=or();Mt(2),Rn("ngIf","single"===t.quantity),Mt(1),Rn("ngStyle",r.getGiftStyle(t)),Mt(1),nd("href",t.link,Gu),Mt(1),ba(" ",t.name,"")}}function AZ(n,e){if(1&n){const t=Ca();xe(0,"button",9),rn("click",function(){rr(t);const i=or().$implicit;return Ar(or().updateGiftStatus(i))}),Le()}2&n&&Da("ticked",or().$implicit.claimed)}function CZ(n,e){if(1&n&&(xe(0,"tr")(1,"td",5),gs(2,AZ,1,2,"button",6),Le(),xe(3,"td",7)(4,"a",8),st(5),Le()()()),2&n){const t=e.$implicit,r=or();Mt(2),Rn("ngIf","single"===t.quantity),Mt(1),Rn("ngStyle",r.getGiftStyle(t)),Mt(1),nd("href",t.link,Gu),Mt(1),ba(" ",t.name,"")}}const TZ=[{path:"",redirectTo:"Home",pathMatch:"full"},{path:"Home",component:lZ},{path:"About",component:dZ},{path:"Schedule",component:hZ},{path:"Registry",component:(()=>{class n{constructor(t){this.firebaseService=t,this.giftList=[]}ngOnInit(){this.fetchGifts()}fetchGifts(){this.firebaseService.fetchGifts().subscribe(t=>{this.giftList=t,console.log(this.giftList)})}sortGifts(t){let r=[];return this.giftList.forEach(i=>{i.category===t&&r.push(i)}),r}updateGiftStatus(t){const r=`gifts/gift_${t.id}`;this.firebaseService.updateClaim(r,{claimed:!t.claimed}).subscribe(()=>{try{console.log("Update: "+r+" successful"),this.ngOnInit()}catch(s){console.error("Update failed",s)}})}getGiftStyle(t){return{"text-decoration":t.claimed?"line-through":"none",color:t.claimed?"gray":"black"}}static{this.\u0275fac=function(r){return new(r||n)(pe(k2))}}static{this.\u0275cmp=yi({type:n,selectors:[["app-registry"]],decls:24,vars:4,consts:[[1,"page-headline"],[1,"container"],[1,"columns"],[1,"headline"],[4,"ngFor","ngForOf"],[1,"td-button"],["class","button",3,"ticked","click",4,"ngIf"],[3,"ngStyle"],["target","_blank",3,"href"],[1,"button",3,"click"]],template:function(r,i){1&r&&(xe(0,"div",0),st(1,"REGISTRY"),Le(),xe(2,"div",1)(3,"div",2)(4,"div",3),st(5,"Kitchen"),Le(),xe(6,"table")(7,"tbody"),gs(8,yZ,6,4,"tr",4),Le()(),xe(9,"div",3),st(10,"Living Room"),Le(),xe(11,"table")(12,"tbody"),gs(13,IZ,6,4,"tr",4),Le()(),xe(14,"div",3),st(15,"Bathroom"),Le(),xe(16,"table")(17,"tbody"),gs(18,wZ,6,4,"tr",4),Le()(),xe(19,"div",3),st(20,"Experience"),Le(),xe(21,"table")(22,"tbody"),gs(23,CZ,6,4,"tr",4),Le()()()()),2&r&&(Mt(8),Rn("ngForOf",i.sortGifts("kitchen")),Mt(5),Rn("ngForOf",i.sortGifts("living-room")),Mt(5),Rn("ngForOf",i.sortGifts("bathroom")),Mt(5),Rn("ngForOf",i.sortGifts("experience")))},dependencies:[uN,fy,hN],styles:['.page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{height:100vh;margin:2em}.columns[_ngcontent-%COMP%]{column-count:2;column-gap:20px;height:80vh;overflow-y:auto;column-fill:auto}table[_ngcontent-%COMP%]{width:100%;border-spacing:0 10px}.headline[_ngcontent-%COMP%]{display:flex;justify-content:center;background-color:#96a498;color:#fff;margin-top:10px;margin-bottom:10px;border-radius:5px;padding:3px;font-size:18px}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f2f2f2}.td-button[_ngcontent-%COMP%]{width:20px}td[_ngcontent-%COMP%]{padding-left:30px;font-size:16px}.button[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:0%;border:1px solid;box-shadow:2px 2px 5px #0009;padding:0;margin:0;display:flex;justify-content:center;cursor:pointer}.button[_ngcontent-%COMP%]:after{content:"";margin-left:20px;margin-top:4px;position:absolute;width:18px;height:6px;border-left:2px solid black;border-bottom:2px solid black;transform:rotate(-45deg) scale(0);transform-origin:bottom left;opacity:0}.button.ticked[_ngcontent-%COMP%]:after{transform:rotate(-45deg) scale(1);opacity:1}.button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:inherit;text-decoration:none}@media (max-width: 1200px){.headline[_ngcontent-%COMP%]{font-size:17px}td[_ngcontent-%COMP%]{padding-left:25px}}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}td[_ngcontent-%COMP%]{padding-left:20px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}.columns[_ngcontent-%COMP%]{column-gap:15px}.headline[_ngcontent-%COMP%]{font-size:16px}.button[_ngcontent-%COMP%]{width:15px;height:15px}td[_ngcontent-%COMP%]{padding-left:15px;font-size:15px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}.columns[_ngcontent-%COMP%]{column-count:1}.headline[_ngcontent-%COMP%]{font-size:14px}.button[_ngcontent-%COMP%]{width:13px;height:13px}td[_ngcontent-%COMP%]{padding-left:10px;font-size:13px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}td[_ngcontent-%COMP%]{padding-left:10px}}']})}}return n})()},{path:"Contact",component:fZ},{path:"Rsvp",component:mZ},{path:"**",component:pZ}];let DZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n,bootstrap:[k8]})}static{this.\u0275inj=dr({imports:[Y6,xJ,O8,wC.forRoot(TZ),tW.initializeApp(kY_firebase),OY,nZ]})}}return n})();K6().bootstrapModule(DZ).catch(n=>console.error(n))},574:(as,cr,rt)=>{rt.d(cr,{A:()=>Jn});var T=rt(401),We=rt(779),Pe=rt(979),ee=rt(398);class Ct{constructor(Ke,ot){this._delegate=Ke,this.firebase=ot,(0,Pe._addComponent)(Ke,new We.uA("app-compat",()=>this,"PUBLIC")),this.container=Ke.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ke){this._delegate.automaticDataCollectionEnabled=Ke}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ke=>{this._delegate.checkDestroyed(),Ke()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Pe.deleteApp)(this._delegate)))}_getService(Ke,ot=Pe._DEFAULT_ENTRY_NAME){var Zn;this._delegate.checkDestroyed();const Xn=this._delegate.container.getProvider(Ke);return!Xn.isInitialized()&&"EXPLICIT"===(null===(Zn=Xn.getComponent())||void 0===Zn?void 0:Zn.instantiationMode)&&Xn.initialize(),Xn.getImmediate({identifier:ot})}_removeServiceInstance(Ke,ot=Pe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ke).clearInstance(ot)}_addComponent(Ke){(0,Pe._addComponent)(this._delegate,Ke)}_addOrOverwriteComponent(Ke){(0,Pe._addOrOverwriteComponent)(this._delegate,Ke)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const mn=new T.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function ht(){const Tt=function Yn(Tt){const Ke={},ot={__esModule:!0,initializeApp:function Yt(ze,wn={}){const Ht=Pe.initializeApp(ze,wn);if((0,T.gR)(Ke,Ht.name))return Ke[Ht.name];const le=new Tt(Ht,ot);return Ke[Ht.name]=le,le},app:Xn,registerVersion:Pe.registerVersion,setLogLevel:Pe.setLogLevel,onLog:Pe.onLog,apps:null,SDK_VERSION:Pe.SDK_VERSION,INTERNAL:{registerComponent:function Ft(ze){const wn=ze.name,Ht=wn.replace("-compat","");if(Pe._registerComponent(ze)&&"PUBLIC"===ze.type){const le=(Jt=Xn())=>{if("function"!=typeof Jt[Ht])throw mn.create("invalid-app-argument",{appName:wn});return Jt[Ht]()};void 0!==ze.serviceProps&&(0,T.zw)(le,ze.serviceProps),ot[Ht]=le,Tt.prototype[Ht]=function(...Jt){return this._getService.bind(this,wn).apply(this,ze.multipleInstances?Jt:[])}}return"PUBLIC"===ze.type?ot[Ht]:null},removeApp:function Zn(ze){delete Ke[ze]},useAsService:function yr(ze,wn){return"serverAuth"===wn?null:wn},modularAPIs:Pe}};function Xn(ze){if(!(0,T.gR)(Ke,ze=ze||Pe._DEFAULT_ENTRY_NAME))throw mn.create("no-app",{appName:ze});return Ke[ze]}return ot.default=ot,Object.defineProperty(ot,"apps",{get:function bt(){return Object.keys(Ke).map(ze=>Ke[ze])}}),Xn.App=Tt,ot}(Ct);return Tt.INTERNAL=Object.assign(Object.assign({},Tt.INTERNAL),{createFirebaseNamespace:ht,extendNamespace:function Ke(ot){(0,T.zw)(Tt,ot)},createSubscribe:T.tD,ErrorFactory:T.FA,deepExtend:T.zw}),Tt}(),ge=new ee.Vy("@firebase/app-compat");try{const Tt=(0,T.mS)();if(void 0!==Tt.firebase){ge.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const Ke=Tt.firebase.SDK_VERSION;Ke&&Ke.indexOf("LITE")>=0&&ge.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Jn=oe;!function At(Tt){(0,Pe.registerVersion)("@firebase/app-compat","0.2.43",Tt)}()},979:(as,cr,rt)=>{rt.r(cr),rt.d(cr,{FirebaseError:()=>ee.g,SDK_VERSION:()=>so,_DEFAULT_ENTRY_NAME:()=>zi,_addComponent:()=>An,_addOrOverwriteComponent:()=>Gi,_apps:()=>mi,_clearComponents:()=>io,_components:()=>Or,_getProvider:()=>Xo,_isFirebaseApp:()=>ea,_isFirebaseServerApp:()=>kr,_registerComponent:()=>Cn,_removeServiceInstance:()=>qi,_serverApps:()=>Pn,deleteApp:()=>ra,getApp:()=>Nc,getApps:()=>na,initializeApp:()=>ta,initializeServerApp:()=>oo,onLog:()=>P,registerVersion:()=>S,setLogLevel:()=>k});var T=rt(467),We=rt(779),Pe=rt(398),ee=rt(401);const Ct=(Q,x)=>x.some(K=>Q instanceof K);let un,mn;const oe=new WeakMap,ge=new WeakMap,Oe=new WeakMap,lt=new WeakMap,At=new WeakMap;let Ke={get(Q,x,K){if(Q instanceof IDBTransaction){if("done"===x)return ge.get(Q);if("objectStoreNames"===x)return Q.objectStoreNames||Oe.get(Q);if("store"===x)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return Yt(Q[x])},set:(Q,x,K)=>(Q[x]=K,!0),has:(Q,x)=>Q instanceof IDBTransaction&&("done"===x||"store"===x)||x in Q};function Xn(Q){return"function"==typeof Q?function Zn(Q){return Q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ht(){return mn||(mn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Q)?function(...x){return Q.apply(bt(this),x),Yt(oe.get(this))}:function(...x){return Yt(Q.apply(bt(this),x))}:function(x,...K){const Ae=Q.call(bt(this),x,...K);return Oe.set(Ae,x.sort?x.sort():[x]),Yt(Ae)}}(Q):(Q instanceof IDBTransaction&&function Tt(Q){if(ge.has(Q))return;const x=new Promise((K,Ae)=>{const Je=()=>{Q.removeEventListener("complete",tt),Q.removeEventListener("error",nt),Q.removeEventListener("abort",nt)},tt=()=>{K(),Je()},nt=()=>{Ae(Q.error||new DOMException("AbortError","AbortError")),Je()};Q.addEventListener("complete",tt),Q.addEventListener("error",nt),Q.addEventListener("abort",nt)});ge.set(Q,x)}(Q),Ct(Q,function Yn(){return un||(un=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Q,Ke):Q)}function Yt(Q){if(Q instanceof IDBRequest)return function Jn(Q){const x=new Promise((K,Ae)=>{const Je=()=>{Q.removeEventListener("success",tt),Q.removeEventListener("error",nt)},tt=()=>{K(Yt(Q.result)),Je()},nt=()=>{Ae(Q.error),Je()};Q.addEventListener("success",tt),Q.addEventListener("error",nt)});return x.then(K=>{K instanceof IDBCursor&&oe.set(K,Q)}).catch(()=>{}),At.set(x,Q),x}(Q);if(lt.has(Q))return lt.get(Q);const x=Xn(Q);return x!==Q&&(lt.set(Q,x),At.set(x,Q)),x}const bt=Q=>At.get(Q),ze=["get","getKey","getAll","getAllKeys","count"],wn=["put","add","delete","clear"],Ht=new Map;function le(Q,x){if(!(Q instanceof IDBDatabase)||x in Q||"string"!=typeof x)return;if(Ht.get(x))return Ht.get(x);const K=x.replace(/FromIndex$/,""),Ae=x!==K,Je=wn.includes(K);if(!(K in(Ae?IDBIndex:IDBObjectStore).prototype)||!Je&&!ze.includes(K))return;const tt=function(){var nt=(0,T.A)(function*(_t,...cn){const ei=this.transaction(_t,Je?"readwrite":"readonly");let Pt=ei.store;return Ae&&(Pt=Pt.index(cn.shift())),(yield Promise.all([Pt[K](...cn),Je&&ei.done]))[0]});return function(cn){return nt.apply(this,arguments)}}();return Ht.set(x,tt),tt}!function ot(Q){Ke=Q(Ke)}(Q=>({...Q,get:(x,K,Ae)=>le(x,K)||Q.get(x,K,Ae),has:(x,K)=>!!le(x,K)||Q.has(x,K)}));class Jt{constructor(x){this.container=x}getPlatformInfoString(){return this.container.getProviders().map(K=>{if(function qt(Q){const x=Q.getComponent();return"VERSION"===x?.type}(K)){const Ae=K.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(K=>K).join(" ")}}const Mr="@firebase/app",gi="0.10.13",dt=new Pe.Vy("@firebase/app"),zi="[DEFAULT]",ro={[Mr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},mi=new Map,Pn=new Map,Or=new Map;function An(Q,x){try{Q.container.addComponent(x)}catch(K){dt.debug(`Component ${x.name} failed to register with FirebaseApp ${Q.name}`,K)}}function Gi(Q,x){Q.container.addOrOverwriteComponent(x)}function Cn(Q){const x=Q.name;if(Or.has(x))return dt.debug(`There were multiple attempts to register component ${x}.`),!1;Or.set(x,Q);for(const K of mi.values())An(K,Q);for(const K of Pn.values())An(K,Q);return!0}function Xo(Q,x){const K=Q.container.getProvider("heartbeat").getImmediate({optional:!0});return K&&K.triggerHeartbeat(),Q.container.getProvider(x)}function qi(Q,x,K=zi){Xo(Q,x).clearInstance(K)}function ea(Q){return void 0!==Q.options}function kr(Q){return void 0!==Q.settings}function io(){Or.clear()}const vr=new ee.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Xr{constructor(x,K,Ae){this._isDeleted=!1,this._options=Object.assign({},x),this._config=Object.assign({},K),this._name=K.name,this._automaticDataCollectionEnabled=K.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new We.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(x){this.checkDestroyed(),this._automaticDataCollectionEnabled=x}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(x){this._isDeleted=x}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}class Vr extends Xr{constructor(x,K,Ae,Je){const tt=void 0!==K.automaticDataCollectionEnabled&&K.automaticDataCollectionEnabled,nt={name:Ae,automaticDataCollectionEnabled:tt};super(void 0!==x.apiKey?x:x.options,nt,Je),this._serverConfig=Object.assign({automaticDataCollectionEnabled:tt},K),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,K.releaseOnDeref=void 0,S(Mr,gi,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(x){this.isDeleted||(this._refCount++,void 0!==x&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(x,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ra(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw vr.create("server-app-deleted")}}const so="10.14.1";function ta(Q,x={}){let K=Q;"object"!=typeof x&&(x={name:x});const Ae=Object.assign({name:zi,automaticDataCollectionEnabled:!1},x),Je=Ae.name;if("string"!=typeof Je||!Je)throw vr.create("bad-app-name",{appName:String(Je)});if(K||(K=(0,ee.T9)()),!K)throw vr.create("no-options");const tt=mi.get(Je);if(tt){if((0,ee.bD)(K,tt.options)&&(0,ee.bD)(Ae,tt.config))return tt;throw vr.create("duplicate-app",{appName:Je})}const nt=new We.h1(Je);for(const cn of Or.values())nt.addComponent(cn);const _t=new Xr(K,Ae,nt);return mi.set(Je,_t),_t}function oo(Q,x){if((0,ee.Bd)()&&!(0,ee.p7)())throw vr.create("invalid-server-app-environment");let K;void 0===x.automaticDataCollectionEnabled&&(x.automaticDataCollectionEnabled=!1),K=ea(Q)?Q.options:Q;const Ae=Object.assign(Object.assign({},x),K);if(void 0!==Ae.releaseOnDeref&&delete Ae.releaseOnDeref,void 0!==x.releaseOnDeref&&typeof FinalizationRegistry>"u")throw vr.create("finalization-registry-not-supported",{});const tt=""+(ei=JSON.stringify(Ae),[...ei].reduce((Pt,Ki)=>Math.imul(31,Pt)+Ki.charCodeAt(0)|0,0)),nt=Pn.get(tt);var ei;if(nt)return nt.incRefCount(x.releaseOnDeref),nt;const _t=new We.h1(tt);for(const ei of Or.values())_t.addComponent(ei);const cn=new Vr(K,x,tt,_t);return Pn.set(tt,cn),cn}function Nc(Q=zi){const x=mi.get(Q);if(!x&&Q===zi&&(0,ee.T9)())return ta();if(!x)throw vr.create("no-app",{appName:Q});return x}function na(){return Array.from(mi.values())}function ra(Q){return us.apply(this,arguments)}function us(){return(us=(0,T.A)(function*(Q){let x=!1;const K=Q.name;mi.has(K)?(x=!0,mi.delete(K)):Pn.has(K)&&Q.decRefCount()<=0&&(Pn.delete(K),x=!0),x&&(yield Promise.all(Q.container.getProviders().map(Ae=>Ae.delete())),Q.isDeleted=!0)})).apply(this,arguments)}function S(Q,x,K){var Ae;let Je=null!==(Ae=ro[Q])&&void 0!==Ae?Ae:Q;K&&(Je+=`-${K}`);const tt=Je.match(/\s|\//),nt=x.match(/\s|\//);if(tt||nt){const _t=[`Unable to register library "${Je}" with version "${x}":`];return tt&&_t.push(`library name "${Je}" contains illegal characters (whitespace or "/")`),tt&&nt&&_t.push("and"),nt&&_t.push(`version name "${x}" contains illegal characters (whitespace or "/")`),void dt.warn(_t.join(" "))}Cn(new We.uA(`${Je}-version`,()=>({library:Je,version:x}),"VERSION"))}function P(Q,x){if(null!==Q&&"function"!=typeof Q)throw vr.create("invalid-log-argument");(0,Pe.Ey)(Q,x)}function k(Q){(0,Pe.He)(Q)}const B="firebase-heartbeat-database",G=1,Se="firebase-heartbeat-store";let Te=null;function zt(){return Te||(Te=function Ft(Q,x,{blocked:K,upgrade:Ae,blocking:Je,terminated:tt}={}){const nt=indexedDB.open(Q,x),_t=Yt(nt);return Ae&&nt.addEventListener("upgradeneeded",cn=>{Ae(Yt(nt.result),cn.oldVersion,cn.newVersion,Yt(nt.transaction),cn)}),K&&nt.addEventListener("blocked",cn=>K(cn.oldVersion,cn.newVersion,cn)),_t.then(cn=>{tt&&cn.addEventListener("close",()=>tt()),Je&&cn.addEventListener("versionchange",ei=>Je(ei.oldVersion,ei.newVersion,ei))}).catch(()=>{}),_t}(B,G,{upgrade:(Q,x)=>{if(0===x)try{Q.createObjectStore(Se)}catch(K){console.warn(K)}}}).catch(Q=>{throw vr.create("idb-open",{originalErrorMessage:Q.message})})),Te}function $e(){return($e=(0,T.A)(function*(Q){try{const K=(yield zt()).transaction(Se),Ae=yield K.objectStore(Se).get(tr(Q));return yield K.done,Ae}catch(x){if(x instanceof ee.g)dt.warn(x.message);else{const K=vr.create("idb-get",{originalErrorMessage:x?.message});dt.warn(K.message)}}})).apply(this,arguments)}function Tn(Q,x){return He.apply(this,arguments)}function He(){return(He=(0,T.A)(function*(Q,x){try{const Ae=(yield zt()).transaction(Se,"readwrite");yield Ae.objectStore(Se).put(x,tr(Q)),yield Ae.done}catch(K){if(K instanceof ee.g)dt.warn(K.message);else{const Ae=vr.create("idb-set",{originalErrorMessage:K?.message});dt.warn(Ae.message)}}})).apply(this,arguments)}function tr(Q){return`${Q.name}!${Q.options.appId}`}class Ge{constructor(x){this.container=x,this._heartbeatsCache=null;const K=this.container.getProvider("app").getImmediate();this._storage=new _h(K),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var x=this;return(0,T.A)(function*(){var K,Ae;try{const tt=x.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),nt=Wi();return null==(null===(K=x._heartbeatsCache)||void 0===K?void 0:K.heartbeats)&&(x._heartbeatsCache=yield x._heartbeatsCachePromise,null==(null===(Ae=x._heartbeatsCache)||void 0===Ae?void 0:Ae.heartbeats))||x._heartbeatsCache.lastSentHeartbeatDate===nt||x._heartbeatsCache.heartbeats.some(_t=>_t.date===nt)?void 0:(x._heartbeatsCache.heartbeats.push({date:nt,agent:tt}),x._heartbeatsCache.heartbeats=x._heartbeatsCache.heartbeats.filter(_t=>{const cn=new Date(_t.date).valueOf();return Date.now()-cn<=2592e6}),x._storage.overwrite(x._heartbeatsCache))}catch(Je){dt.warn(Je)}})()}getHeartbeatsHeader(){var x=this;return(0,T.A)(function*(){var K;try{if(null===x._heartbeatsCache&&(yield x._heartbeatsCachePromise),null==(null===(K=x._heartbeatsCache)||void 0===K?void 0:K.heartbeats)||0===x._heartbeatsCache.heartbeats.length)return"";const Ae=Wi(),{heartbeatsToSend:Je,unsentEntries:tt}=function ia(Q,x=1024){const K=[];let Ae=Q.slice();for(const Je of Q){const tt=K.find(nt=>nt.agent===Je.agent);if(tt){if(tt.dates.push(Je.date),ls(K)>x){tt.dates.pop();break}}else if(K.push({agent:Je.agent,dates:[Je.date]}),ls(K)>x){K.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:K,unsentEntries:Ae}}(x._heartbeatsCache.heartbeats),nt=(0,ee.Uj)(JSON.stringify({version:2,heartbeats:Je}));return x._heartbeatsCache.lastSentHeartbeatDate=Ae,tt.length>0?(x._heartbeatsCache.heartbeats=tt,yield x._storage.overwrite(x._heartbeatsCache)):(x._heartbeatsCache.heartbeats=[],x._storage.overwrite(x._heartbeatsCache)),nt}catch(Ae){return dt.warn(Ae),""}})()}}function Wi(){return(new Date).toISOString().substring(0,10)}class _h{constructor(x){this.app=x,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.A)(function*(){return!!(0,ee.zW)()&&(0,ee.eX)().then(()=>!0).catch(()=>!1)})()}read(){var x=this;return(0,T.A)(function*(){if(yield x._canUseIndexedDBPromise){const Ae=yield function Mn(Q){return $e.apply(this,arguments)}(x.app);return Ae?.heartbeats?Ae:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(x){var K=this;return(0,T.A)(function*(){var Ae;if(yield K._canUseIndexedDBPromise){const tt=yield K.read();return Tn(K.app,{lastSentHeartbeatDate:null!==(Ae=x.lastSentHeartbeatDate)&&void 0!==Ae?Ae:tt.lastSentHeartbeatDate,heartbeats:x.heartbeats})}})()}add(x){var K=this;return(0,T.A)(function*(){var Ae;if(yield K._canUseIndexedDBPromise){const tt=yield K.read();return Tn(K.app,{lastSentHeartbeatDate:null!==(Ae=x.lastSentHeartbeatDate)&&void 0!==Ae?Ae:tt.lastSentHeartbeatDate,heartbeats:[...tt.heartbeats,...x.heartbeats]})}})()}}function ls(Q){return(0,ee.Uj)(JSON.stringify({version:2,heartbeats:Q})).length}!function de(Q){Cn(new We.uA("platform-logger",x=>new Jt(x),"PRIVATE")),Cn(new We.uA("heartbeat",x=>new Ge(x),"PRIVATE")),S(Mr,gi,Q),S(Mr,gi,"esm2017"),S("fire-js","")}("")},779:(as,cr,rt)=>{rt.d(cr,{h1:()=>Yn,uA:()=>Pe});var T=rt(467),We=rt(401);class Pe{constructor(oe,ge,Oe){this.name=oe,this.instanceFactory=ge,this.type=Oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const ee="[DEFAULT]";class Ct{constructor(oe,ge){this.name=oe,this.container=ge,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const ge=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(ge)){const Oe=new We.cY;if(this.instancesDeferred.set(ge,Oe),this.isInitialized(ge)||this.shouldAutoInitialize())try{const lt=this.getOrInitializeService({instanceIdentifier:ge});lt&&Oe.resolve(lt)}catch{}}return this.instancesDeferred.get(ge).promise}getImmediate(oe){var ge;const Oe=this.normalizeInstanceIdentifier(oe?.identifier),lt=null!==(ge=oe?.optional)&&void 0!==ge&&ge;if(!this.isInitialized(Oe)&&!this.shouldAutoInitialize()){if(lt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Oe})}catch(At){if(lt)return null;throw At}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function mn(ht){return"EAGER"===ht.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[ge,Oe]of this.instancesDeferred.entries()){const lt=this.normalizeInstanceIdentifier(ge);try{const At=this.getOrInitializeService({instanceIdentifier:lt});Oe.resolve(At)}catch{}}}}clearInstance(oe=ee){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,T.A)(function*(){const ge=Array.from(oe.instances.values());yield Promise.all([...ge.filter(Oe=>"INTERNAL"in Oe).map(Oe=>Oe.INTERNAL.delete()),...ge.filter(Oe=>"_delete"in Oe).map(Oe=>Oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=ee){return this.instances.has(oe)}getOptions(oe=ee){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:ge={}}=oe,Oe=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(Oe))throw Error(`${this.name}(${Oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const lt=this.getOrInitializeService({instanceIdentifier:Oe,options:ge});for(const[At,Jn]of this.instancesDeferred.entries())Oe===this.normalizeInstanceIdentifier(At)&&Jn.resolve(lt);return lt}onInit(oe,ge){var Oe;const lt=this.normalizeInstanceIdentifier(ge),At=null!==(Oe=this.onInitCallbacks.get(lt))&&void 0!==Oe?Oe:new Set;At.add(oe),this.onInitCallbacks.set(lt,At);const Jn=this.instances.get(lt);return Jn&&oe(Jn,lt),()=>{At.delete(oe)}}invokeOnInitCallbacks(oe,ge){const Oe=this.onInitCallbacks.get(ge);if(Oe)for(const lt of Oe)try{lt(oe,ge)}catch{}}getOrInitializeService({instanceIdentifier:oe,options:ge={}}){let Oe=this.instances.get(oe);if(!Oe&&this.component&&(Oe=this.component.instanceFactory(this.container,{instanceIdentifier:(ht=oe,ht===ee?void 0:ht),options:ge}),this.instances.set(oe,Oe),this.instancesOptions.set(oe,ge),this.invokeOnInitCallbacks(Oe,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,Oe)}catch{}var ht;return Oe||null}normalizeInstanceIdentifier(oe=ee){return this.component?this.component.multipleInstances?oe:ee:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Yn{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const ge=this.getProvider(oe.name);if(ge.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);ge.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const ge=new Ct(oe,this);return this.providers.set(oe,ge),ge}getProviders(){return Array.from(this.providers.values())}}},398:(as,cr,rt)=>{rt.d(cr,{$b:()=>We,Ey:()=>ht,He:()=>Yn,Vy:()=>mn});const T=[];var We=function(oe){return oe[oe.DEBUG=0]="DEBUG",oe[oe.VERBOSE=1]="VERBOSE",oe[oe.INFO=2]="INFO",oe[oe.WARN=3]="WARN",oe[oe.ERROR=4]="ERROR",oe[oe.SILENT=5]="SILENT",oe}(We||{});const Pe={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},ee=We.INFO,Ct={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},un=(oe,ge,...Oe)=>{if(ge<oe.logLevel)return;const lt=(new Date).toISOString(),At=Ct[ge];if(!At)throw new Error(`Attempted to log a message with an invalid logType (value: ${ge})`);console[At](`[${lt}]  ${oe.name}:`,...Oe)};class mn{constructor(ge){this.name=ge,this._logLevel=ee,this._logHandler=un,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(ge){if(!(ge in We))throw new TypeError(`Invalid value "${ge}" assigned to \`logLevel\``);this._logLevel=ge}setLogLevel(ge){this._logLevel="string"==typeof ge?Pe[ge]:ge}get logHandler(){return this._logHandler}set logHandler(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge}get userLogHandler(){return this._userLogHandler}set userLogHandler(ge){this._userLogHandler=ge}debug(...ge){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...ge),this._logHandler(this,We.DEBUG,...ge)}log(...ge){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...ge),this._logHandler(this,We.VERBOSE,...ge)}info(...ge){this._userLogHandler&&this._userLogHandler(this,We.INFO,...ge),this._logHandler(this,We.INFO,...ge)}warn(...ge){this._userLogHandler&&this._userLogHandler(this,We.WARN,...ge),this._logHandler(this,We.WARN,...ge)}error(...ge){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...ge),this._logHandler(this,We.ERROR,...ge)}}function Yn(oe){T.forEach(ge=>{ge.setLogLevel(oe)})}function ht(oe,ge){for(const Oe of T){let lt=null;ge&&ge.level&&(lt=Pe[ge.level]),Oe.userLogHandler=null===oe?null:(At,Jn,...Tt)=>{const Ke=Tt.map(ot=>{if(null==ot)return null;if("string"==typeof ot)return ot;if("number"==typeof ot||"boolean"==typeof ot)return ot.toString();if(ot instanceof Error)return ot.message;try{return JSON.stringify(ot)}catch{return null}}).filter(ot=>ot).join(" ");Jn>=(lt??At.logLevel)&&oe({level:We[Jn].toLowerCase(),message:Ke,args:Tt,type:At.name})}}}},324:(as,cr,rt)=>{var T=rt(467),We=rt(574),Pe=rt(979),ee=rt(401),Ct=rt(398),un=rt(635),mn=rt(779);const ht={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Jn=function lt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Tt=function At(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ke=new ee.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Zn=new Ct.Vy("@firebase/auth");function Yt(f,...c){Zn.logLevel<=Ct.$b.ERROR&&Zn.error(`Auth (${Pe.SDK_VERSION}): ${f}`,...c)}function bt(f,...c){throw Ht(f,...c)}function Ft(f,...c){return Ht(f,...c)}function yr(f,c,l){const p=Object.assign(Object.assign({},Tt()),{[c]:l});return new ee.FA("auth","Firebase",p).create(c,{appName:f.name})}function ze(f){return yr(f,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wn(f,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&bt(f,"argument-error"),yr(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ht(f,...c){if("string"!=typeof f){const l=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(l,...p)}return Ke.create(f,...c)}function le(f,c,...l){if(!f)throw Ht(c,...l)}function Jt(f){const c="INTERNAL ASSERTION FAILED: "+f;throw Yt(c),new Error(c)}function qt(f,c){f||Jt(c)}function Mr(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function gi(){return"http:"===dt()||"https:"===dt()}function dt(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Y{constructor(c,l){this.shortDelay=c,this.longDelay=l,qt(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,ee.jZ)()||(0,ee.lV)()}get(){return function As(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(gi()||(0,ee.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Z(f,c){qt(f.emulator,"Emulator should always be set here");const{url:l}=f.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class te{static initialize(c,l,p){this.fetchImpl=c,l&&(this.headersImpl=l),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Jt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Jt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Jt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const se={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ie=new Y(3e4,6e4);function ne(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function fe(f,c,l,p){return ft.apply(this,arguments)}function ft(){return(ft=(0,T.A)(function*(f,c,l,p,y={}){return ke(f,y,(0,T.A)(function*(){let E={},R={};p&&("GET"===c?R=p:E={body:JSON.stringify(p)});const U=(0,ee.Am)(Object.assign({key:f.config.apiKey},R)).slice(1),re=yield f._getAdditionalHeaders();re["Content-Type"]="application/json",f.languageCode&&(re["X-Firebase-Locale"]=f.languageCode);const ve=Object.assign({method:c,headers:re},E);return(0,ee.c1)()||(ve.referrerPolicy="no-referrer"),te.fetch()(Rt(f,f.config.apiHost,l,U),ve)}))})).apply(this,arguments)}function ke(f,c,l){return je.apply(this,arguments)}function je(){return(je=(0,T.A)(function*(f,c,l){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},se),c);try{const y=new xr(f),E=yield Promise.race([l(),y.promise]);y.clearNetworkTimeout();const R=yield E.json();if("needConfirmation"in R)throw er(f,"account-exists-with-different-credential",R);if(E.ok&&!("errorMessage"in R))return R;{const U=E.ok?R.errorMessage:R.error.message,[re,ve]=U.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===re)throw er(f,"credential-already-in-use",R);if("EMAIL_EXISTS"===re)throw er(f,"email-already-in-use",R);if("USER_DISABLED"===re)throw er(f,"user-disabled",R);const Me=p[re]||re.toLowerCase().replace(/[_\s]+/g,"-");if(ve)throw yr(f,Me,ve);bt(f,Me)}}catch(y){if(y instanceof ee.g)throw y;bt(f,"network-request-failed",{message:String(y)})}})).apply(this,arguments)}function pt(f,c,l,p){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,T.A)(function*(f,c,l,p,y={}){const E=yield fe(f,c,l,p,y);return"mfaPendingCredential"in E&&bt(f,"multi-factor-auth-required",{_serverResponse:E}),E})).apply(this,arguments)}function Rt(f,c,l,p){const y=`${c}${l}?${p}`;return f.config.emulator?Z(f.config,y):`${f.config.apiScheme}://${y}`}function lr(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xr{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,p)=>{this.timer=setTimeout(()=>p(Ft(this.auth,"network-request-failed")),Ie.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function er(f,c,l){const p={appName:f.name};l.email&&(p.email=l.email),l.phoneNumber&&(p.phoneNumber=l.phoneNumber);const y=Ft(f,c,p);return y.customData._tokenResponse=l,y}function Nr(f){return void 0!==f&&void 0!==f.getResponse}function Zr(f){return void 0!==f&&void 0!==f.enterprise}class Jo{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return lr(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function zn(){return(zn=(0,T.A)(function*(f){return(yield fe(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function to(f,c){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,T.A)(function*(f,c){return fe(f,"GET","/v2/recaptchaConfig",ne(f,c))})).apply(this,arguments)}function no(){return(no=(0,T.A)(function*(f,c){return fe(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function ro(){return(ro=(0,T.A)(function*(f,c){return fe(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function mi(f,c){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,T.A)(function*(f,c){return fe(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Or(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Cn(){return(Cn=(0,T.A)(function*(f,c=!1){const l=(0,ee.Ku)(f),p=yield l.getIdToken(c),y=qi(p);le(y&&y.exp&&y.auth_time&&y.iat,l.auth,"internal-error");const E="object"==typeof y.firebase?y.firebase:void 0,R=E?.sign_in_provider;return{claims:y,token:p,authTime:Or(Xo(y.auth_time)),issuedAtTime:Or(Xo(y.iat)),expirationTime:Or(Xo(y.exp)),signInProvider:R||null,signInSecondFactor:E?.sign_in_second_factor||null}})).apply(this,arguments)}function Xo(f){return 1e3*Number(f)}function qi(f){const[c,l,p]=f.split(".");if(void 0===c||void 0===l||void 0===p)return Yt("JWT malformed, contained fewer than 3 sections"),null;try{const y=(0,ee.u)(l);return y?JSON.parse(y):(Yt("Failed to decode base64 JWT payload"),null)}catch(y){return Yt("Caught error parsing JWT payload as JSON",y?.toString()),null}}function ea(f){const c=qi(f);return le(c,"internal-error"),le(typeof c.exp<"u","internal-error"),le(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function kr(f,c){return io.apply(this,arguments)}function io(){return(io=(0,T.A)(function*(f,c,l=!1){if(l)return c;try{return yield c}catch(p){throw p instanceof ee.g&&function Ts({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class vr{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const y=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,y)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,T.A)(function*(){yield l.iteration()}),p)}iteration(){var c=this;return(0,T.A)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class Xr{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=Or(this.lastLoginAt),this.creationTime=Or(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vr(f){return so.apply(this,arguments)}function so(){return(so=(0,T.A)(function*(f){var c;const l=f.auth,p=yield f.getIdToken(),y=yield kr(f,mi(l,{idToken:p}));le(y?.users.length,l,"internal-error");const E=y.users[0];f._notifyReloadListener(E);const R=null!==(c=E.providerUserInfo)&&void 0!==c&&c.length?na(E.providerUserInfo):[],U=function Nc(f,c){return[...f.filter(p=>!c.some(y=>y.providerId===p.providerId)),...c]}(f.providerData,R),Me=!!f.isAnonymous&&!(f.email&&E.passwordHash||U?.length),Re={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:U,metadata:new Xr(E.createdAt,E.lastLoginAt),isAnonymous:Me};Object.assign(f,Re)})).apply(this,arguments)}function oo(){return(oo=(0,T.A)(function*(f){const c=(0,ee.Ku)(f);yield Vr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function na(f){return f.map(c=>{var{providerId:l}=c,p=(0,un.Tt)(c,["providerId"]);return{providerId:l,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}function us(){return(us=(0,T.A)(function*(f,c){const l=yield ke(f,{},(0,T.A)(function*(){const p=(0,ee.Am)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:y,apiKey:E}=f.config,R=Rt(f,y,"/v1/token",`key=${E}`),U=yield f._getAdditionalHeaders();return U["Content-Type"]="application/x-www-form-urlencoded",te.fetch()(R,{method:"POST",headers:U,body:p})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function P(){return(P=(0,T.A)(function*(f,c){return fe(f,"POST","/v2/accounts:revokeToken",ne(f,c))})).apply(this,arguments)}class k{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){le(c.idToken,"internal-error"),le(typeof c.idToken<"u","internal-error"),le(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):ea(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}updateFromIdToken(c){le(0!==c.length,"internal-error");const l=ea(c);this.updateTokensAndExpiration(c,null,l)}getToken(c,l=!1){var p=this;return(0,T.A)(function*(){return l||!p.accessToken||p.isExpired?(le(p.refreshToken,c,"user-token-expired"),p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null):p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var p=this;return(0,T.A)(function*(){const{accessToken:y,refreshToken:E,expiresIn:R}=yield function ra(f,c){return us.apply(this,arguments)}(c,l);p.updateTokensAndExpiration(y,E,Number(R))})()}updateTokensAndExpiration(c,l,p){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,l){const{refreshToken:p,accessToken:y,expirationTime:E}=l,R=new k;return p&&(le("string"==typeof p,"internal-error",{appName:c}),R.refreshToken=p),y&&(le("string"==typeof y,"internal-error",{appName:c}),R.accessToken=y),E&&(le("number"==typeof E,"internal-error",{appName:c}),R.expirationTime=E),R}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new k,this.toJSON())}_performRefresh(){return Jt("not implemented")}}function B(f,c){le("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class G{constructor(c){var{uid:l,auth:p,stsTokenManager:y}=c,E=(0,un.Tt)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=p,this.stsTokenManager=y,this.accessToken=y.accessToken,this.displayName=E.displayName||null,this.email=E.email||null,this.emailVerified=E.emailVerified||!1,this.phoneNumber=E.phoneNumber||null,this.photoURL=E.photoURL||null,this.isAnonymous=E.isAnonymous||!1,this.tenantId=E.tenantId||null,this.providerData=E.providerData?[...E.providerData]:[],this.metadata=new Xr(E.createdAt||void 0,E.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,T.A)(function*(){const p=yield kr(l,l.stsTokenManager.getToken(l.auth,c));return le(p,l.auth,"internal-error"),l.accessToken!==p&&(l.accessToken=p,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),p})()}getIdTokenResult(c){return function Gi(f){return Cn.apply(this,arguments)}(this,c)}reload(){return function ta(f){return oo.apply(this,arguments)}(this)}_assign(c){this!==c&&(le(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new G(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var p=this;return(0,T.A)(function*(){let y=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),y=!0),l&&(yield Vr(p)),yield p.auth._persistUserIfCurrent(p),y&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,T.A)(function*(){if((0,Pe._isFirebaseServerApp)(c.auth.app))return Promise.reject(ze(c.auth));const l=yield c.getIdToken();return yield kr(c,function xc(f,c){return no.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var p,y,E,R,U,re,ve,Me;const Re=null!==(p=l.displayName)&&void 0!==p?p:void 0,dn=null!==(y=l.email)&&void 0!==y?y:void 0,xi=null!==(E=l.phoneNumber)&&void 0!==E?E:void 0,To=null!==(R=l.photoURL)&&void 0!==R?R:void 0,bf=null!==(U=l.tenantId)&&void 0!==U?U:void 0,Sf=null!==(re=l._redirectEventId)&&void 0!==re?re:void 0,Rf=null!==(ve=l.createdAt)&&void 0!==ve?ve:void 0,wE=null!==(Me=l.lastLoginAt)&&void 0!==Me?Me:void 0,{uid:Ml,emailVerified:AE,isAnonymous:t_,providerData:Pf,stsTokenManager:xl}=l;le(Ml&&xl,c,"internal-error");const Rb=k.fromJSON(this.name,xl);le("string"==typeof Ml,c,"internal-error"),B(Re,c.name),B(dn,c.name),le("boolean"==typeof AE,c,"internal-error"),le("boolean"==typeof t_,c,"internal-error"),B(xi,c.name),B(To,c.name),B(bf,c.name),B(Sf,c.name),B(Rf,c.name),B(wE,c.name);const n_=new G({uid:Ml,auth:c,email:dn,emailVerified:AE,displayName:Re,isAnonymous:t_,photoURL:To,phoneNumber:xi,tenantId:bf,stsTokenManager:Rb,createdAt:Rf,lastLoginAt:wE});return Pf&&Array.isArray(Pf)&&(n_.providerData=Pf.map(Mf=>Object.assign({},Mf))),Sf&&(n_._redirectEventId=Sf),n_}static _fromIdTokenResponse(c,l,p=!1){return(0,T.A)(function*(){const y=new k;y.updateFromServerResponse(l);const E=new G({uid:l.localId,auth:c,stsTokenManager:y,isAnonymous:p});return yield Vr(E),E})()}static _fromGetAccountInfoResponse(c,l,p){return(0,T.A)(function*(){const y=l.users[0];le(void 0!==y.localId,"internal-error");const E=void 0!==y.providerUserInfo?na(y.providerUserInfo):[],R=!(y.email&&y.passwordHash||E?.length),U=new k;U.updateFromIdToken(p);const re=new G({uid:y.localId,auth:c,stsTokenManager:U,isAnonymous:R}),ve={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:E,metadata:new Xr(y.createdAt,y.lastLoginAt),isAnonymous:!(y.email&&y.passwordHash||E?.length)};return Object.assign(re,ve),re})()}}const Se=new Map;function Te(f){qt(f instanceof Function,"Expected a class definition");let c=Se.get(f);return c?(qt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,Se.set(f,c),c)}const Mn=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.A)(function*(){return!0})()}_set(l,p){var y=this;return(0,T.A)(function*(){y.storage[l]=p})()}_get(l){var p=this;return(0,T.A)(function*(){const y=p.storage[l];return void 0===y?null:y})()}_remove(l){var p=this;return(0,T.A)(function*(){delete p.storage[l]})()}_addListener(l,p){}_removeListener(l,p){}}return f.type="NONE",f})();function $e(f,c,l){return`firebase:${f}:${c}:${l}`}class Tn{constructor(c,l,p){this.persistence=c,this.auth=l,this.userKey=p;const{config:y,name:E}=this.auth;this.fullUserKey=$e(this.userKey,y.apiKey,E),this.fullPersistenceKey=$e("persistence",y.apiKey,E),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,T.A)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?G._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,T.A)(function*(){if(l.persistence===c)return;const p=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,p?l.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,p="authUser"){return(0,T.A)(function*(){if(!l.length)return new Tn(Te(Mn),c,p);const y=(yield Promise.all(l.map(function(){var ve=(0,T.A)(function*(Me){if(yield Me._isAvailable())return Me});return function(Me){return ve.apply(this,arguments)}}()))).filter(ve=>ve);let E=y[0]||Te(Mn);const R=$e(p,c.config.apiKey,c.name);let U=null;for(const ve of l)try{const Me=yield ve._get(R);if(Me){const Re=G._fromJSON(c,Me);ve!==E&&(U=Re),E=ve;break}}catch{}const re=y.filter(ve=>ve._shouldAllowMigration);return E._shouldAllowMigration&&re.length?(E=re[0],U&&(yield E._set(R,U.toJSON())),yield Promise.all(l.map(function(){var ve=(0,T.A)(function*(Me){if(Me!==E)try{yield Me._remove(R)}catch{}});return function(Me){return ve.apply(this,arguments)}}())),new Tn(E,c,p)):new Tn(E,c,p)})()}}function He(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Ge(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(tr(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(ia(c))return"Blackberry";if(_h(c))return"Webos";if(cs(c))return"Safari";if((c.includes("chrome/")||St(c))&&!c.includes("edge/"))return"Chrome";if(Wi(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function tr(f=(0,ee.ZQ)()){return/firefox\//i.test(f)}function cs(f=(0,ee.ZQ)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function St(f=(0,ee.ZQ)()){return/crios\//i.test(f)}function Ge(f=(0,ee.ZQ)()){return/iemobile/i.test(f)}function Wi(f=(0,ee.ZQ)()){return/android/i.test(f)}function ia(f=(0,ee.ZQ)()){return/blackberry/i.test(f)}function _h(f=(0,ee.ZQ)()){return/webos/i.test(f)}function ls(f=(0,ee.ZQ)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function K(f=(0,ee.ZQ)()){return ls(f)||Wi(f)||_h(f)||ia(f)||/windows phone/i.test(f)||Ge(f)}function Ae(f,c=[]){let l;switch(f){case"Browser":l=He((0,ee.ZQ)());break;case"Worker":l=`${He((0,ee.ZQ)())}-${f}`;break;default:l=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Pe.SDK_VERSION}/${p}`}class Je{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const p=E=>new Promise((R,U)=>{try{R(c(E))}catch(re){U(re)}});p.onAbort=l,this.queue.push(p);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,T.A)(function*(){if(l.auth.currentUser===c)return;const p=[];try{for(const y of l.queue)yield y(c),y.onAbort&&p.push(y.onAbort)}catch(y){p.reverse();for(const E of p)try{E()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:y?.message})}})()}}function nt(){return(nt=(0,T.A)(function*(f,c={}){return fe(f,"GET","/v2/passwordPolicy",ne(f,c))})).apply(this,arguments)}class cn{constructor(c){var l,p,y,E;const R=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=R.minPasswordLength)&&void 0!==l?l:6,R.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=R.maxPasswordLength),void 0!==R.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=R.containsLowercaseCharacter),void 0!==R.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=R.containsUppercaseCharacter),void 0!==R.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=R.containsNumericCharacter),void 0!==R.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=R.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(y=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==y?y:"",this.forceUpgradeOnSignin=null!==(E=c.forceUpgradeOnSignin)&&void 0!==E&&E,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,p,y,E,R,U;const re={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,re),this.validatePasswordCharacterOptions(c,re),re.isValid&&(re.isValid=null===(l=re.meetsMinPasswordLength)||void 0===l||l),re.isValid&&(re.isValid=null===(p=re.meetsMaxPasswordLength)||void 0===p||p),re.isValid&&(re.isValid=null===(y=re.containsLowercaseLetter)||void 0===y||y),re.isValid&&(re.isValid=null===(E=re.containsUppercaseLetter)||void 0===E||E),re.isValid&&(re.isValid=null===(R=re.containsNumericCharacter)||void 0===R||R),re.isValid&&(re.isValid=null===(U=re.containsNonAlphanumericCharacter)||void 0===U||U),re}validatePasswordLengthOptions(c,l){const p=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;p&&(l.meetsMinPasswordLength=c.length>=p),y&&(l.meetsMaxPasswordLength=c.length<=y)}validatePasswordCharacterOptions(c,l){let p;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let y=0;y<c.length;y++)p=c.charAt(y),this.updatePasswordCharacterOptionsStatuses(l,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,l,p,y,E){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=E))}}class ei{constructor(c,l,p,y){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=p,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ki(this),this.idTokenSubscription=new Ki(this),this.beforeStateQueue=new Je(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ke,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(c,l){var p=this;return l&&(this._popupRedirectResolver=Te(l)),this._initializationPromise=this.queue((0,T.A)(function*(){var y,E;if(!p._deleted&&(p.persistenceManager=yield Tn.create(p,c),!p._deleted)){if(null!==(y=p._popupRedirectResolver)&&void 0!==y&&y._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(l),p.lastNotifiedUid=(null===(E=p.currentUser)||void 0===E?void 0:E.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,T.A)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUserFromIdToken(c){var l=this;return(0,T.A)(function*(){try{const p=yield mi(l,{idToken:c}),y=yield G._fromGetAccountInfoResponse(l,p,c);yield l.directlySetCurrentUser(y)}catch(p){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",p),yield l.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var l=this;return(0,T.A)(function*(){var p;if((0,Pe._isFirebaseServerApp)(l.app)){const U=l.app.settings.authIdToken;return U?new Promise(re=>{setTimeout(()=>l.initializeCurrentUserFromIdToken(U).then(re,re))}):l.directlySetCurrentUser(null)}const y=yield l.assertedPersistence.getCurrentUser();let E=y,R=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const U=null===(p=l.redirectUser)||void 0===p?void 0:p._redirectEventId,re=E?._redirectEventId,ve=yield l.tryRedirectSignIn(c);(!U||U===re)&&ve?.user&&(E=ve.user,R=!0)}if(!E)return l.directlySetCurrentUser(null);if(!E._redirectEventId){if(R)try{yield l.beforeStateQueue.runMiddleware(E)}catch(U){E=y,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(U))}return E?l.reloadAndSetCurrentUserOrClear(E):l.directlySetCurrentUser(null)}return le(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===E._redirectEventId?l.directlySetCurrentUser(E):l.reloadAndSetCurrentUserOrClear(E)})()}tryRedirectSignIn(c){var l=this;return(0,T.A)(function*(){let p=null;try{p=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,T.A)(function*(){try{yield Vr(c)}catch(p){if("auth/network-request-failed"!==p?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function cu(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,T.A)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,T.A)(function*(){if((0,Pe._isFirebaseServerApp)(l.app))return Promise.reject(ze(l));const p=c?(0,ee.Ku)(c):null;return p&&le(p.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(p&&p._clone(l))})()}_updateCurrentUser(c,l=!1){var p=this;return(0,T.A)(function*(){if(!p._deleted)return c&&le(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),l||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,T.A)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,T.A)(function*(){return(0,Pe._isFirebaseServerApp)(c.app)?Promise.reject(ze(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var l=this;return(0,Pe._isFirebaseServerApp)(this.app)?Promise.reject(ze(this)):this.queue((0,T.A)(function*(){yield l.assertedPersistence.setPersistence(Te(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,T.A)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const p=l._getPasswordPolicyInternal();return p.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,T.A)(function*(){const l=yield function tt(f){return nt.apply(this,arguments)}(c),p=new cn(l);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new ee.FA("auth","Firebase",c())}onAuthStateChanged(c,l,p){return this.registerStateListener(this.authStateSubscription,c,l,p)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,p){return this.registerStateListener(this.idTokenSubscription,c,l,p)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,T.A)(function*(){if(l.currentUser){const p=yield l.currentUser.getIdToken(),y={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=l.tenantId&&(y.tenantId=l.tenantId),yield function S(f,c){return P.apply(this,arguments)}(l,y)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var p=this;return(0,T.A)(function*(){const y=yield p.getOrInitRedirectPersistenceManager(l);return null===c?y.removeCurrentUser():y.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,T.A)(function*(){if(!l.redirectPersistenceManager){const p=c&&Te(c)||l._popupRedirectResolver;le(p,l,"argument-error"),l.redirectPersistenceManager=yield Tn.create(l,[Te(p._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,T.A)(function*(){var p,y;return l._isInitialized&&(yield l.queue((0,T.A)(function*(){}))),(null===(p=l._currentUser)||void 0===p?void 0:p._redirectEventId)===c?l._currentUser:(null===(y=l.redirectUser)||void 0===y?void 0:y._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,T.A)(function*(){if(c===l.currentUser)return l.queue((0,T.A)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,p,y){if(this._deleted)return()=>{};const E="function"==typeof l?l:l.next.bind(l);let R=!1;const U=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(U,this,"internal-error"),U.then(()=>{R||E(this.currentUser)}),"function"==typeof l){const re=c.addObserver(l,p,y);return()=>{R=!0,re()}}{const re=c.addObserver(l);return()=>{R=!0,re()}}}directlySetCurrentUser(c){var l=this;return(0,T.A)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Ae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,T.A)(function*(){var l;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const y=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();y&&(p["X-Firebase-Client"]=y);const E=yield c._getAppCheckToken();return E&&(p["X-Firebase-AppCheck"]=E),p})()}_getAppCheckToken(){var c=this;return(0,T.A)(function*(){var l;const p=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return p?.error&&function Xn(f,...c){Zn.logLevel<=Ct.$b.WARN&&Zn.warn(`Auth (${Pe.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Pt(f){return(0,ee.Ku)(f)}class Ki{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,ee.tD)(l=>this.observer=l)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Oc={loadJS:()=>(0,T.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zg(f){return Oc.loadJS(f)}function Gg(f){return`__${f}${Math.floor(1e6*Math.random())}`}class Qe{constructor(c){this.type="recaptcha-enterprise",this.auth=Pt(c)}verify(c="verify",l=!1){var p=this;return(0,T.A)(function*(){function E(){return E=(0,T.A)(function*(U){if(!l){if(null==U.tenantId&&null!=U._agentRecaptchaConfig)return U._agentRecaptchaConfig.siteKey;if(null!=U.tenantId&&void 0!==U._tenantRecaptchaConfigs[U.tenantId])return U._tenantRecaptchaConfigs[U.tenantId].siteKey}return new Promise(function(){var re=(0,T.A)(function*(ve,Me){to(U,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Re=>{if(void 0!==Re.recaptchaKey){const dn=new Jo(Re);return null==U.tenantId?U._agentRecaptchaConfig=dn:U._tenantRecaptchaConfigs[U.tenantId]=dn,ve(dn.siteKey)}Me(new Error("recaptcha Enterprise site key undefined"))}).catch(Re=>{Me(Re)})});return function(ve,Me){return re.apply(this,arguments)}}())}),E.apply(this,arguments)}function R(U,re,ve){const Me=window.grecaptcha;Zr(Me)?Me.enterprise.ready(()=>{Me.enterprise.execute(U,{action:c}).then(Re=>{re(Re)}).catch(()=>{re("NO_RECAPTCHA")})}):ve(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((U,re)=>{(function y(U){return E.apply(this,arguments)})(p.auth).then(ve=>{if(!l&&Zr(window.grecaptcha))R(ve,U,re);else{if(typeof window>"u")return void re(new Error("RecaptchaVerifier is only supported in browser"));let Me=function AI(){return Oc.recaptchaEnterpriseScript}();0!==Me.length&&(Me+=ve),zg(Me).then(()=>{R(ve,U,re)}).catch(Re=>{re(Re)})}}).catch(ve=>{re(ve)})})})()}}function CI(f,c,l){return qg.apply(this,arguments)}function qg(){return(qg=(0,T.A)(function*(f,c,l,p=!1){const y=new Qe(f);let E;try{E=yield y.verify(l)}catch{E=yield y.verify(l,!0)}const R=Object.assign({},c);return Object.assign(R,p?{captchaResp:E}:{captchaResponse:E}),Object.assign(R,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(R,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),R})).apply(this,arguments)}function kc(f,c,l,p){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,T.A)(function*(f,c,l,p){var y;if(null!==(y=f._getRecaptchaConfig())&&void 0!==y&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const E=yield CI(f,c,l,"getOobCode"===l);return p(f,E)}return p(f,c).catch(function(){var E=(0,T.A)(function*(R){if("auth/missing-recaptcha-token"===R.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const U=yield CI(f,c,l,"getOobCode"===l);return p(f,U)}return Promise.reject(R)});return function(R){return E.apply(this,arguments)}}())}),Fe.apply(this,arguments)}function Wg(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function lu(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class ao{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return Jt("not implemented")}_getIdTokenResponse(c){return Jt("not implemented")}_linkToIdToken(c,l){return Jt("not implemented")}_getReauthenticationResolver(c){return Jt("not implemented")}}function Kg(f,c){return ct.apply(this,arguments)}function ct(){return(ct=(0,T.A)(function*(f,c){return fe(f,"POST","/v1/accounts:resetPassword",ne(f,c))})).apply(this,arguments)}function Lc(){return(Lc=(0,T.A)(function*(f,c){return fe(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Fr(f,c){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,T.A)(function*(f,c){return fe(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Lt(){return(Lt=(0,T.A)(function*(f,c){return fe(f,"POST","/v1/accounts:update",ne(f,c))})).apply(this,arguments)}function nb(f,c){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,T.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signInWithPassword",ne(f,c))})).apply(this,arguments)}function _e(f,c){return du.apply(this,arguments)}function du(){return(du=(0,T.A)(function*(f,c){return fe(f,"POST","/v1/accounts:sendOobCode",ne(f,c))})).apply(this,arguments)}function Bc(){return(Bc=(0,T.A)(function*(f,c){return _e(f,c)})).apply(this,arguments)}function wh(f,c){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,T.A)(function*(f,c){return _e(f,c)})).apply(this,arguments)}function Ch(f,c){return Yg.apply(this,arguments)}function Yg(){return(Yg=(0,T.A)(function*(f,c){return _e(f,c)})).apply(this,arguments)}function Jg(){return(Jg=(0,T.A)(function*(f,c){return _e(f,c)})).apply(this,arguments)}function Zg(){return(Zg=(0,T.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signInWithEmailLink",ne(f,c))})).apply(this,arguments)}function fu(){return(fu=(0,T.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signInWithEmailLink",ne(f,c))})).apply(this,arguments)}class Ds extends ao{constructor(c,l,p,y=null){super("password",p),this._email=c,this._password=l,this._tenantId=y}static _fromEmailAndPassword(c,l){return new Ds(c,l,"password")}static _fromEmailAndCode(c,l,p=null){return new Ds(c,l,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,T.A)(function*(){switch(l.signInMethod){case"password":return kc(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",nb);case"emailLink":return function ib(f,c){return Zg.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:bt(c,"internal-error")}})()}_linkToIdToken(c,l){var p=this;return(0,T.A)(function*(){switch(p.signInMethod){case"password":return kc(c,{idToken:l,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fr);case"emailLink":return function hu(f,c){return fu.apply(this,arguments)}(c,{idToken:l,email:p._email,oobCode:p._password});default:bt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function ds(f,c){return Th.apply(this,arguments)}function Th(){return(Th=(0,T.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signInWithIdp",ne(f,c))})).apply(this,arguments)}class Si extends ao{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Si(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):bt("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:y}=l,E=(0,un.Tt)(l,["providerId","signInMethod"]);if(!p||!y)return null;const R=new Si(p,y);return R.idToken=E.idToken||void 0,R.accessToken=E.accessToken||void 0,R.secret=E.secret,R.nonce=E.nonce,R.pendingToken=E.pendingToken||null,R}_getIdTokenResponse(c){return ds(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,ds(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,ds(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,ee.Am)(l)}return c}}function Dh(){return(Dh=(0,T.A)(function*(f,c){return fe(f,"POST","/v1/accounts:sendVerificationCode",ne(f,c))})).apply(this,arguments)}function bh(){return(bh=(0,T.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signInWithPhoneNumber",ne(f,c))})).apply(this,arguments)}function jc(){return(jc=(0,T.A)(function*(f,c){const l=yield pt(f,"POST","/v1/accounts:signInWithPhoneNumber",ne(f,c));if(l.temporaryProof)throw er(f,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const be={USER_NOT_FOUND:"user-not-found"};function pu(){return(pu=(0,T.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signInWithPhoneNumber",ne(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),be)})).apply(this,arguments)}class Ri extends ao{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new Ri({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new Ri({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function bs(f,c){return bh.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function me(f,c){return jc.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function $c(f,c){return pu.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:p,verificationCode:y}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:p,code:y}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:p,phoneNumber:y,temporaryProof:E}=c;return p||l||y||E?new Ri({verificationId:l,verificationCode:p,phoneNumber:y,temporaryProof:E}):null}}class gu{constructor(c){var l,p,y,E,R,U;const re=(0,ee.I9)((0,ee.hp)(c)),ve=null!==(l=re.apiKey)&&void 0!==l?l:null,Me=null!==(p=re.oobCode)&&void 0!==p?p:null,Re=function bI(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(y=re.mode)&&void 0!==y?y:null);le(ve&&Me&&Re,"argument-error"),this.apiKey=ve,this.operation=Re,this.code=Me,this.continueUrl=null!==(E=re.continueUrl)&&void 0!==E?E:null,this.languageCode=null!==(R=re.languageCode)&&void 0!==R?R:null,this.tenantId=null!==(U=re.tenantId)&&void 0!==U?U:null}static parseLink(c){const l=function SI(f){const c=(0,ee.I9)((0,ee.hp)(f)).link,l=c?(0,ee.I9)((0,ee.hp)(c)).deep_link_id:null,p=(0,ee.I9)((0,ee.hp)(f)).deep_link_id;return(p?(0,ee.I9)((0,ee.hp)(p)).link:null)||p||l||c||f}(c);try{return new gu(l)}catch{return null}}}let oa=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(l,p){return Ds._fromEmailAndPassword(l,p)}static credentialWithLink(l,p){const y=gu.parseLink(p);return le(y,"argument-error"),Ds._fromEmailAndCode(l,y.code,y.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Ln{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Ir extends Ln{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class gt extends Ir{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return le("providerId"in l&&"signInMethod"in l,"argument-error"),Si._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return le(c.idToken||c.accessToken,"argument-error"),Si._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return gt.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return gt.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:p,oauthTokenSecret:y,pendingToken:E,nonce:R,providerId:U}=c;if(!p&&!y&&!l&&!E||!U)return null;try{return new gt(U)._credential({idToken:l,accessToken:p,nonce:R,pendingToken:E})}catch{return null}}}let mu=(()=>{class f extends Ir{constructor(){super("facebook.com")}static credential(l){return Si._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),Hc=(()=>{class f extends Ir{constructor(){super("google.com"),this.addScope("profile")}static credential(l,p){return Si._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:p})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:p,oauthAccessToken:y}=l;if(!p&&!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),zc=(()=>{class f extends Ir{constructor(){super("github.com")}static credential(l){return Si._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class Lr extends ao{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return ds(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,ds(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,ds(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:y,pendingToken:E}=l;return p&&y&&E&&p===y?new Lr(p,E):null}static _create(c,l){return new Lr(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class yu extends Ln{constructor(c){le(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return yu.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return yu.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=Lr.fromJSON(c);return le(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:p}=c;if(!l||!p)return null;try{return Lr._create(p,l)}catch{return null}}}let Sh=(()=>{class f extends Ir{constructor(){super("twitter.com")}static credential(l,p){return Si._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:p})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:p,oauthTokenSecret:y}=l;if(!p||!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Gc(f,c){return qc.apply(this,arguments)}function qc(){return(qc=(0,T.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signUp",ne(f,c))})).apply(this,arguments)}class ti{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,p,y=!1){return(0,T.A)(function*(){const E=yield G._fromIdTokenResponse(c,p,y),R=aa(p);return new ti({user:E,providerId:R,_tokenResponse:p,operationType:l})})()}static _forOperation(c,l,p){return(0,T.A)(function*(){yield c._updateTokensIfNecessary(p,!0);const y=aa(p);return new ti({user:c,providerId:y,_tokenResponse:p,operationType:l})})()}}function aa(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function Wc(){return(Wc=(0,T.A)(function*(f){var c;if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const l=Pt(f);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new ti({user:l.currentUser,providerId:null,operationType:"signIn"});const p=yield Gc(l,{returnSecureToken:!0}),y=yield ti._fromIdTokenResponse(l,"signIn",p,!0);return yield l._updateCurrentUser(y.user),y})).apply(this,arguments)}class Kc extends ee.g{constructor(c,l,p,y){var E;super(l.code,l.message),this.operationType=p,this.user=y,Object.setPrototypeOf(this,Kc.prototype),this.customData={appName:c.name,tenantId:null!==(E=c.tenantId)&&void 0!==E?E:void 0,_serverResponse:l.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,l,p,y){return new Kc(c,l,p,y)}}function Rh(f,c,l,p){return("reauthenticate"===c?l._getReauthenticationResolver(f):l._getIdTokenResponse(f)).catch(E=>{throw"auth/multi-factor-auth-required"===E.code?Kc._fromErrorAndOperation(f,E,c,p):E})}function tm(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function ni(){return ni=(0,T.A)(function*(f,c){const l=(0,ee.Ku)(f);yield Yc(!0,l,c);const{providerUserInfo:p}=yield function zi(f,c){return ro.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),y=tm(p||[]);return l.providerData=l.providerData.filter(E=>y.has(E.providerId)),y.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),ni.apply(this,arguments)}function Ph(f,c){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,T.A)(function*(f,c,l=!1){const p=yield kr(f,c._linkToIdToken(f.auth,yield f.getIdToken()),l);return ti._forOperation(f,"link",p)})).apply(this,arguments)}function Yc(f,c,l){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,T.A)(function*(f,c,l){yield Vr(c);const y=!1===f?"provider-already-linked":"no-such-provider";le(tm(c.providerData).has(l)===f,c.auth,y)})).apply(this,arguments)}function nm(f,c){return xh.apply(this,arguments)}function xh(){return(xh=(0,T.A)(function*(f,c,l=!1){const{auth:p}=f;if((0,Pe._isFirebaseServerApp)(p.app))return Promise.reject(ze(p));const y="reauthenticate";try{const E=yield kr(f,Rh(p,y,c,f),l);le(E.idToken,p,"internal-error");const R=qi(E.idToken);le(R,p,"internal-error");const{sub:U}=R;return le(f.uid===U,p,"user-mismatch"),ti._forOperation(f,y,E)}catch(E){throw"auth/user-not-found"===E?.code&&bt(p,"user-mismatch"),E}})).apply(this,arguments)}function Nh(f,c){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,T.A)(function*(f,c,l=!1){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const p="signIn",y=yield Rh(f,p,c),E=yield ti._fromIdTokenResponse(f,p,y);return l||(yield f._updateCurrentUser(E.user)),E})).apply(this,arguments)}function Jc(f,c){return kh.apply(this,arguments)}function kh(){return(kh=(0,T.A)(function*(f,c){return Nh(Pt(f),c)})).apply(this,arguments)}function yi(f,c){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,T.A)(function*(f,c){const l=(0,ee.Ku)(f);return yield Yc(!1,l,c.providerId),Ph(l,c)})).apply(this,arguments)}function rm(f,c){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,T.A)(function*(f,c){return nm((0,ee.Ku)(f),c)})).apply(this,arguments)}function Lh(){return(Lh=(0,T.A)(function*(f,c){return pt(f,"POST","/v1/accounts:signInWithCustomToken",ne(f,c))})).apply(this,arguments)}function Ye(){return Ye=(0,T.A)(function*(f,c){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const l=Pt(f),p=yield function ri(f,c){return Lh.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),y=yield ti._fromIdTokenResponse(l,"signIn",p);return yield l._updateCurrentUser(y.user),y}),Ye.apply(this,arguments)}class Gn{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?yt._fromServerResponse(c,l):"totpInfo"in l?Un._fromServerResponse(c,l):bt(c,"internal-error")}}class yt extends Gn{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new yt(l)}}class Un extends Gn{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new Un(l)}}function qn(f,c,l){var p;le((null===(p=l.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),le(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(le(l.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(le(l.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function Rs(f){return Er.apply(this,arguments)}function Er(){return(Er=(0,T.A)(function*(f){const c=Pt(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function Zc(){return(Zc=(0,T.A)(function*(f,c,l){const p=Pt(f),y={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&qn(p,y,l),yield kc(p,y,"getOobCode",wh)})).apply(this,arguments)}function Uh(){return Uh=(0,T.A)(function*(f,c,l){yield Kg((0,ee.Ku)(f),{oobCode:c,newPassword:l}).catch(function(){var p=(0,T.A)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&Rs(f),y});return function(y){return p.apply(this,arguments)}}())}),Uh.apply(this,arguments)}function Xt(){return Xt=(0,T.A)(function*(f,c){yield function tb(f,c){return Lt.apply(this,arguments)}((0,ee.Ku)(f),{oobCode:c})}),Xt.apply(this,arguments)}function De(f,c){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,T.A)(function*(f,c){const l=(0,ee.Ku)(f),p=yield Kg(l,{oobCode:c}),y=p.requestType;switch(le(y,l,"internal-error"),y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(p.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(p.mfaInfo,l,"internal-error");default:le(p.email,l,"internal-error")}let E=null;return p.mfaInfo&&(E=Gn._fromServerResponse(Pt(l),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:E},operation:y}})).apply(this,arguments)}function ii(){return(ii=(0,T.A)(function*(f,c){const{data:l}=yield De((0,ee.Ku)(f),c);return l.email})).apply(this,arguments)}function Wn(){return(Wn=(0,T.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const p=Pt(f),R=yield kc(p,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gc).catch(re=>{throw"auth/password-does-not-meet-requirements"===re.code&&Rs(f),re}),U=yield ti._fromIdTokenResponse(p,"signIn",R);return yield p._updateCurrentUser(U.user),U})).apply(this,arguments)}function Qi(){return(Qi=(0,T.A)(function*(f,c,l){const p=Pt(f),y={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function E(R,U){le(U.handleCodeInApp,p,"argument-error"),U&&qn(p,R,U)})(y,l),yield kc(p,y,"getOobCode",Ch)})).apply(this,arguments)}function uo(){return(uo=(0,T.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const p=(0,ee.Ku)(f),y=oa.credentialWithLink(c,l||Mr());return le(y._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),Jc(p,y)})).apply(this,arguments)}function Ps(){return(Ps=(0,T.A)(function*(f,c){return fe(f,"POST","/v1/accounts:createAuthUri",ne(f,c))})).apply(this,arguments)}function co(){return co=(0,T.A)(function*(f,c){const p={identifier:c,continueUri:gi()?Mr():"http://localhost"},{signinMethods:y}=yield function om(f,c){return Ps.apply(this,arguments)}((0,ee.Ku)(f),p);return y||[]}),co.apply(this,arguments)}function vi(){return vi=(0,T.A)(function*(f,c){const l=(0,ee.Ku)(f),y={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&qn(l.auth,y,c);const{email:E}=yield function Eh(f,c){return Bc.apply(this,arguments)}(l.auth,y);E!==f.email&&(yield f.reload())}),vi.apply(this,arguments)}function el(){return el=(0,T.A)(function*(f,c,l){const p=(0,ee.Ku)(f),E={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};l&&qn(p.auth,E,l);const{email:R}=yield function rb(f,c){return Jg.apply(this,arguments)}(p.auth,E);R!==f.email&&(yield f.reload())}),el.apply(this,arguments)}function Pi(){return(Pi=(0,T.A)(function*(f,c){return fe(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function lo(){return lo=(0,T.A)(function*(f,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const p=(0,ee.Ku)(f),E={idToken:yield p.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},R=yield kr(p,function Ms(f,c){return Pi.apply(this,arguments)}(p.auth,E));p.displayName=R.displayName||null,p.photoURL=R.photoUrl||null;const U=p.providerData.find(({providerId:re})=>"password"===re);U&&(U.displayName=p.displayName,U.photoURL=p.photoURL),yield p._updateTokensIfNecessary(R)}),lo.apply(this,arguments)}function tl(f,c,l){return nl.apply(this,arguments)}function nl(){return nl=(0,T.A)(function*(f,c,l){const{auth:p}=f,E={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(E.email=c),l&&(E.password=l);const R=yield kr(f,function Ih(f,c){return Lc.apply(this,arguments)}(p,E));yield f._updateTokensIfNecessary(R,!0)}),nl.apply(this,arguments)}class hs{constructor(c,l,p={}){this.isNewUser=c,this.providerId=l,this.profile=p}}class ho extends hs{constructor(c,l,p,y){super(c,l,p),this.username=y}}class wu extends hs{constructor(c,l){super(c,"facebook.com",l)}}class nr extends ho{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class ob extends hs{constructor(c,l){super(c,"google.com",l)}}class Ur extends ho{constructor(c,l,p){super(c,"twitter.com",l,p)}}function wr(f){const{user:c,_tokenResponse:l}=f;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function Yi(f){var c,l;if(!f)return null;const{providerId:p}=f,y=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},E=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const R=null===(l=null===(c=qi(f.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(R)return new hs(E,"anonymous"!==R&&"custom"!==R?R:null)}if(!p)return null;switch(p){case"facebook.com":return new wu(E,y);case"github.com":return new nr(E,y);case"google.com":return new ob(E,y);case"twitter.com":return new Ur(E,y,f.screenName||null);case"custom":case"anonymous":return new hs(E,null);default:return new hs(E,p,y)}}(l)}class ha{constructor(c,l,p){this.type=c,this.credential=l,this.user=p}static _fromIdtoken(c,l){return new ha("enroll",c,l)}static _fromMfaPendingCredential(c){return new ha("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,p;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return ha._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return ha._fromIdtoken(c.multiFactorSession.idToken)}return null}}class cm{constructor(c,l,p){this.session=c,this.hints=l,this.signInResolver=p}static _fromError(c,l){const p=Pt(c),y=l.customData._serverResponse,E=(y.mfaInfo||[]).map(U=>Gn._fromServerResponse(p,U));le(y.mfaPendingCredential,p,"internal-error");const R=ha._fromMfaPendingCredential(y.mfaPendingCredential);return new cm(R,E,function(){var U=(0,T.A)(function*(re){const ve=yield re._process(p,R);delete y.mfaInfo,delete y.mfaPendingCredential;const Me=Object.assign(Object.assign({},y),{idToken:ve.idToken,refreshToken:ve.refreshToken});switch(l.operationType){case"signIn":const Re=yield ti._fromIdTokenResponse(p,l.operationType,Me);return yield p._updateCurrentUser(Re.user),Re;case"reauthenticate":return le(l.user,p,"internal-error"),ti._forOperation(l.user,l.operationType,Me);default:bt(p,"internal-error")}});return function(re){return U.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,T.A)(function*(){return l.signInResolver(c)})()}}class lm{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(p=>Gn._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new lm(c)}getSession(){var c=this;return(0,T.A)(function*(){return ha._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var p=this;return(0,T.A)(function*(){const y=c,E=yield p.getSession(),R=yield kr(p.user,y._process(p.user.auth,E,l));return yield p.user._updateTokensIfNecessary(R),p.user.reload()})()}unenroll(c){var l=this;return(0,T.A)(function*(){const p="string"==typeof c?c:c.uid,y=yield l.user.getIdToken();try{const E=yield kr(l.user,function pb(f,c){return fe(f,"POST","/v2/accounts/mfaEnrollment:withdraw",ne(f,c))}(l.user.auth,{idToken:y,mfaEnrollmentId:p}));l.enrolledFactors=l.enrolledFactors.filter(({uid:R})=>R!==p),yield l.user._updateTokensIfNecessary(E),yield l.user.reload()}catch(E){throw E}})()}}const rl=new WeakMap,$h="__sak";class xI{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Hh=(()=>{class f extends xI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,p)=>this.onStorageEvent(l,p),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=K(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const p of Object.keys(this.listeners)){const y=this.storage.getItem(p),E=this.localCache[p];y!==E&&l(p,E,y)}}onStorageEvent(l,p=!1){if(!l.key)return void this.forAllChangedKeys((U,re,ve)=>{this.notifyListeners(U,ve)});const y=l.key;p?this.detachListener():this.stopPolling();const E=()=>{const U=this.storage.getItem(y);!p&&this.localCache[y]===U||this.notifyListeners(y,U)},R=this.storage.getItem(y);!function x(){return(0,ee.lT)()&&10===document.documentMode}()||R===l.newValue||l.newValue===l.oldValue?E():setTimeout(E,10)}notifyListeners(l,p){this.localCache[l]=p;const y=this.listeners[l];if(y)for(const E of Array.from(y))E(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,p,y)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:p,newValue:y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,p){var y=()=>super._set,E=this;return(0,T.A)(function*(){yield y().call(E,l,p),E.localCache[l]=JSON.stringify(p)})()}_get(l){var p=()=>super._get,y=this;return(0,T.A)(function*(){const E=yield p().call(y,l);return y.localCache[l]=JSON.stringify(E),E})()}_remove(l){var p=()=>super._remove,y=this;return(0,T.A)(function*(){yield p().call(y,l),delete y.localCache[l]})()}}return f.type="LOCAL",f})(),tn=(()=>{class f extends xI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,p){}_removeListener(l,p){}}return f.type="SESSION",f})();let Ii=(()=>{class f{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const p=this.receivers.find(E=>E.isListeningto(l));if(p)return p;const y=new f(l);return this.receivers.push(y),y}isListeningto(l){return this.eventTarget===l}handleEvent(l){var p=this;return(0,T.A)(function*(){const y=l,{eventId:E,eventType:R,data:U}=y.data,re=p.handlersMap[R];if(!re?.size)return;y.ports[0].postMessage({status:"ack",eventId:E,eventType:R});const ve=Array.from(re).map(function(){var Re=(0,T.A)(function*(dn){return dn(y.origin,U)});return function(dn){return Re.apply(this,arguments)}}()),Me=yield function il(f){return Promise.all(f.map(function(){var c=(0,T.A)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(p){return{fulfilled:!1,reason:p}}});return function(l){return c.apply(this,arguments)}}()))}(ve);y.ports[0].postMessage({status:"done",eventId:E,eventType:R,response:Me})})()}_subscribe(l,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(p)}_unsubscribe(l,p){this.handlersMap[l]&&p&&this.handlersMap[l].delete(p),(!p||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function fa(f="",c=10){let l="";for(let p=0;p<c;p++)l+=Math.floor(10*Math.random());return f+l}class hm{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,p=50){var y=this;return(0,T.A)(function*(){const E=typeof MessageChannel<"u"?new MessageChannel:null;if(!E)throw new Error("connection_unavailable");let R,U;return new Promise((re,ve)=>{const Me=fa("",20);E.port1.start();const Re=setTimeout(()=>{ve(new Error("unsupported_event"))},p);U={messageChannel:E,onMessage(dn){const xi=dn;if(xi.data.eventId===Me)switch(xi.data.status){case"ack":clearTimeout(Re),R=setTimeout(()=>{ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(R),re(xi.data.response);break;default:clearTimeout(Re),clearTimeout(R),ve(new Error("invalid_response"))}}},y.handlers.add(U),E.port1.addEventListener("message",U.onMessage),y.target.postMessage({eventType:c,eventId:Me,data:l},[E.port2])}).finally(()=>{U&&y.removeMessageHandler(U)})})()}}function Sn(){return window}function Au(){return typeof Sn().WorkerGlobalScope<"u"&&"function"==typeof Sn().importScripts}function Cu(){return(Cu=(0,T.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Gh="firebaseLocalStorageDb",go="firebaseLocalStorage",pa="fbase_key";class Ji{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function Tu(f,c){return f.transaction([go],c?"readwrite":"readonly").objectStore(go)}function _m(){const f=indexedDB.open(Gh,1);return new Promise((c,l)=>{f.addEventListener("error",()=>{l(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(go,{keyPath:pa})}catch(y){l(y)}}),f.addEventListener("success",(0,T.A)(function*(){const p=f.result;p.objectStoreNames.contains(go)?c(p):(p.close(),yield function mb(){const f=indexedDB.deleteDatabase(Gh);return new Ji(f).toPromise()}(),c(yield _m()))}))})}function NI(f,c,l){return qh.apply(this,arguments)}function qh(){return(qh=(0,T.A)(function*(f,c,l){const p=Tu(f,!0).put({[pa]:c,value:l});return new Ji(p).toPromise()})).apply(this,arguments)}function ym(){return(ym=(0,T.A)(function*(f,c){const l=Tu(f,!1).get(c),p=yield new Ji(l).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Wh(f,c){const l=Tu(f,!0).delete(c);return new Ji(l).toPromise()}const Du=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,T.A)(function*(){return l.db||(l.db=yield _m()),l.db})()}_withRetries(l){var p=this;return(0,T.A)(function*(){let y=0;for(;;)try{const E=yield p._openDb();return yield l(E)}catch(E){if(y++>3)throw E;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,T.A)(function*(){return Au()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,T.A)(function*(){l.receiver=Ii._getInstance(function gm(){return Au()?self:null}()),l.receiver._subscribe("keyChanged",function(){var p=(0,T.A)(function*(y,E){return{keyProcessed:(yield l._poll()).includes(E.key)}});return function(y,E){return p.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var p=(0,T.A)(function*(y,E){return["keyChanged"]});return function(y,E){return p.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,T.A)(function*(){var p,y;if(l.activeServiceWorker=yield function pm(){return Cu.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new hm(l.activeServiceWorker);const E=yield l.sender._send("ping",{},800);E&&null!==(p=E[0])&&void 0!==p&&p.fulfilled&&null!==(y=E[0])&&void 0!==y&&y.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var p=this;return(0,T.A)(function*(){if(p.sender&&p.activeServiceWorker&&function zh(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:l},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,T.A)(function*(){try{if(!indexedDB)return!1;const l=yield _m();return yield NI(l,$h,"1"),yield Wh(l,$h),!0}catch{}return!1})()}_withPendingWrite(l){var p=this;return(0,T.A)(function*(){p.pendingWrites++;try{yield l()}finally{p.pendingWrites--}})()}_set(l,p){var y=this;return(0,T.A)(function*(){return y._withPendingWrite((0,T.A)(function*(){return yield y._withRetries(E=>NI(E,l,p)),y.localCache[l]=p,y.notifyServiceWorker(l)}))})()}_get(l){var p=this;return(0,T.A)(function*(){const y=yield p._withRetries(E=>function OI(f,c){return ym.apply(this,arguments)}(E,l));return p.localCache[l]=y,y})()}_remove(l){var p=this;return(0,T.A)(function*(){return p._withPendingWrite((0,T.A)(function*(){return yield p._withRetries(y=>Wh(y,l)),delete p.localCache[l],p.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,T.A)(function*(){const p=yield l._withRetries(R=>{const U=Tu(R,!1).getAll();return new Ji(U).toPromise()});if(!p)return[];if(0!==l.pendingWrites)return[];const y=[],E=new Set;if(0!==p.length)for(const{fbase_key:R,value:U}of p)E.add(R),JSON.stringify(l.localCache[R])!==JSON.stringify(U)&&(l.notifyListeners(R,U),y.push(R));for(const R of Object.keys(l.localCache))l.localCache[R]&&!E.has(R)&&(l.notifyListeners(R,null),y.push(R));return y})()}notifyListeners(l,p){this.localCache[l]=p;const y=this.listeners[l];if(y)for(const E of Array.from(y))E(p)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,T.A)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),sl=1e12;class LI{constructor(c){this.auth=c,this.counter=sl,this._widgets=new Map}render(c,l){const p=this.counter;return this._widgets.set(p,new wm(c,this.auth.name,l||{})),this.counter++,p}reset(c){var l;const p=c||sl;null===(l=this._widgets.get(p))||void 0===l||l.delete(),this._widgets.delete(p)}getResponse(c){var l;return(null===(l=this._widgets.get(c||sl))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,T.A)(function*(){var p;return null===(p=l._widgets.get(c||sl))||void 0===p||p.execute(),""})()}}class wm{constructor(c,l,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const y="string"==typeof c?document.getElementById(c):c;le(y,"argument-error",{appName:l}),this.container=y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function UI(f){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ol=Gg("rcb"),BI=new Y(3e4,6e4);class yb{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Sn().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return le(function jI(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&Nr(Sn().grecaptcha)?Promise.resolve(Sn().grecaptcha):new Promise((p,y)=>{const E=Sn().setTimeout(()=>{y(Ft(c,"network-request-failed"))},BI.get());Sn()[ol]=()=>{Sn().clearTimeout(E),delete Sn()[ol];const U=Sn().grecaptcha;if(!U||!Nr(U))return void y(Ft(c,"internal-error"));const re=U.render;U.render=(ve,Me)=>{const Re=re(ve,Me);return this.counter++,Re},this.hostLanguage=l,p(U)},zg(`${function JD(){return Oc.recaptchaV2Script}()}?${(0,ee.Am)({onload:ol,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(E),y(Ft(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=Sn().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ei{load(c){return(0,T.A)(function*(){return new LI(c)})()}clearedOneInstance(){}}const Qh="recaptcha",$I={theme:"light",type:"image"};class HI{constructor(c,l,p=Object.assign({},$I)){this.parameters=p,this.type=Qh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pt(c),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const y="string"==typeof l?document.getElementById(l):l;le(y,this.auth,"argument-error"),this.container=y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ei:new yb,this.validateStartingState()}verify(){var c=this;return(0,T.A)(function*(){c.assertNotDestroyed();const l=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(l)||new Promise(E=>{const R=U=>{U&&(c.tokenChangeListeners.delete(R),E(U))};c.tokenChangeListeners.add(R),c.isInvisible&&p.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(p=>p(l)),"function"==typeof c)c(l);else if("string"==typeof c){const p=Sn()[c];"function"==typeof p&&p(l)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,T.A)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const p=document.createElement("div");l.appendChild(p),l=p}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,T.A)(function*(){le(gi()&&!Au(),c.auth,"internal-error"),yield function Am(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function Zo(f){return zn.apply(this,arguments)}(c.auth);le(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class al{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=Ri._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function bu(){return(bu=(0,T.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const p=Pt(f),y=yield Nt(p,c,(0,ee.Ku)(l));return new al(y,E=>Jc(p,E))})).apply(this,arguments)}function wi(){return(wi=(0,T.A)(function*(f,c,l){const p=(0,ee.Ku)(f);yield Yc(!1,p,"phone");const y=yield Nt(p.auth,c,(0,ee.Ku)(l));return new al(y,E=>yi(p,E))})).apply(this,arguments)}function ul(){return(ul=(0,T.A)(function*(f,c,l){const p=(0,ee.Ku)(f);if((0,Pe._isFirebaseServerApp)(p.auth.app))return Promise.reject(ze(p.auth));const y=yield Nt(p.auth,c,(0,ee.Ku)(l));return new al(y,E=>rm(p,E))})).apply(this,arguments)}function Nt(f,c,l){return Su.apply(this,arguments)}function Su(){return Su=(0,T.A)(function*(f,c,l){var p;const y=yield l.verify();try{let E;if(le("string"==typeof y,f,"argument-error"),le(l.type===Qh,f,"argument-error"),E="string"==typeof c?{phoneNumber:c}:c,"session"in E){const R=E.session;if("phoneNumber"in E)return le("enroll"===R.type,f,"internal-error"),(yield function db(f,c){return fe(f,"POST","/v2/accounts/mfaEnrollment:start",ne(f,c))}(f,{idToken:R.credential,phoneEnrollmentInfo:{phoneNumber:E.phoneNumber,recaptchaToken:y}})).phoneSessionInfo.sessionInfo;{le("signin"===R.type,f,"internal-error");const U=(null===(p=E.multiFactorHint)||void 0===p?void 0:p.uid)||E.multiFactorUid;return le(U,f,"missing-multi-factor-info"),(yield function _b(f,c){return fe(f,"POST","/v2/accounts/mfaSignIn:start",ne(f,c))}(f,{mfaPendingCredential:R.credential,mfaEnrollmentId:U,phoneSignInInfo:{recaptchaToken:y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:R}=yield function sa(f,c){return Dh.apply(this,arguments)}(f,{phoneNumber:E.phoneNumber,recaptchaToken:y});return R}}finally{l._reset()}}),Su.apply(this,arguments)}function hr(){return(hr=(0,T.A)(function*(f,c){const l=(0,ee.Ku)(f);if((0,Pe._isFirebaseServerApp)(l.auth.app))return Promise.reject(ze(l.auth));yield Ph(l,c)})).apply(this,arguments)}let Ru=(()=>{class f{constructor(l){this.providerId=f.PROVIDER_ID,this.auth=Pt(l)}verifyPhoneNumber(l,p){return Nt(this.auth,l,(0,ee.Ku)(p))}static credential(l,p){return Ri._fromVerification(l,p)}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:p,temporaryProof:y}=l;return p&&y?Ri._fromTokenResponse(p,y):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function xs(f,c){return c?Te(c):(le(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class Ns extends ao{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return ds(c,this._buildIdpRequest())}_linkToIdToken(c,l){return ds(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return ds(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function oi(f){return Nh(f.auth,new Ns(f),f.bypassAuthState)}function qI(f){const{auth:c,user:l}=f;return le(l,c,"internal-error"),nm(l,new Ns(f),f.bypassAuthState)}function WI(f){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,T.A)(function*(f){const{auth:c,user:l}=f;return le(l,c,"internal-error"),Ph(l,new Ns(f),f.bypassAuthState)})).apply(this,arguments)}class fs{constructor(c,l,p,y,E=!1){this.auth=c,this.resolver=p,this.user=y,this.bypassAuthState=E,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,T.A)(function*(p,y){c.pendingPromise={resolve:p,reject:y};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(E){c.reject(E)}});return function(p,y){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,T.A)(function*(){const{urlResponse:p,sessionId:y,postBody:E,tenantId:R,error:U,type:re}=c;if(U)return void l.reject(U);const ve={auth:l.auth,requestUri:p,sessionId:y,tenantId:R||void 0,postBody:E||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(re)(ve))}catch(Me){l.reject(Me)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return oi;case"linkViaPopup":case"linkViaRedirect":return WI;case"reauthViaPopup":case"reauthViaRedirect":return qI;default:bt(this.auth,"internal-error")}}resolve(c){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Tm=new Y(2e3,1e4);function ll(){return(ll=(0,T.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(Ft(f,"operation-not-supported-in-this-environment"));const p=Pt(f);wn(f,c,Ln);const y=xs(p,l);return new hl(p,"signInViaPopup",c,y).executeNotNull()})).apply(this,arguments)}function dl(){return(dl=(0,T.A)(function*(f,c,l){const p=(0,ee.Ku)(f);if((0,Pe._isFirebaseServerApp)(p.auth.app))return Promise.reject(Ft(p.auth,"operation-not-supported-in-this-environment"));wn(p.auth,c,Ln);const y=xs(p.auth,l);return new hl(p.auth,"reauthViaPopup",c,y,p).executeNotNull()})).apply(this,arguments)}function qe(){return(qe=(0,T.A)(function*(f,c,l){const p=(0,ee.Ku)(f);wn(p.auth,c,Ln);const y=xs(p.auth,l);return new hl(p.auth,"linkViaPopup",c,y,p).executeNotNull()})).apply(this,arguments)}let hl=(()=>{class f extends fs{constructor(l,p,y,E,R){super(l,p,E,R),this.provider=y,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var l=this;return(0,T.A)(function*(){const p=yield l.execute();return le(p,l.auth,"internal-error"),p})()}onExecution(){var l=this;return(0,T.A)(function*(){qt(1===l.filter.length,"Popup operations only handle one event");const p=fa();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],p),l.authWindow.associatedEvent=p,l.resolver._originValidation(l.auth).catch(y=>{l.reject(y)}),l.resolver._isIframeWebStorageSupported(l.auth,y=>{y||l.reject(Ft(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(Ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const l=()=>{var p,y;this.pollId=null!==(y=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==y&&y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ft(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,Tm.get())};l()}}return f.currentPopupAction=null,f})();const vb="pendingRedirect",Pu=new Map;class YI extends fs{constructor(c,l,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,T.A)(function*(){let p=Pu.get(l.auth._key());if(!p){try{const E=(yield function JI(f,c){return fl.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;p=()=>Promise.resolve(E)}catch(y){p=()=>Promise.reject(y)}Pu.set(l.auth._key(),p)}return l.bypassAuthState||Pu.set(l.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,p=this;return(0,T.A)(function*(){if("signInViaRedirect"===c.type)return l().call(p,c);if("unknown"!==c.type){if(c.eventId){const y=yield p.auth._redirectUserForId(c.eventId);if(y)return p.user=y,l().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,T.A)(function*(){})()}cleanUp(){}}function fl(){return(fl=(0,T.A)(function*(f,c){const l=Sm(c),p=bm(f);if(!(yield p._isAvailable()))return!1;const y="true"===(yield p._get(l));return yield p._remove(l),y})).apply(this,arguments)}function Os(f,c){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,T.A)(function*(f,c){return bm(f)._set(Sm(c),"true")})).apply(this,arguments)}function Zh(f,c){Pu.set(f._key(),c)}function bm(f){return Te(f._redirectPersistence)}function Sm(f){return $e(vb,f.config.apiKey,f.name)}function ue(f,c,l){return function It(f,c,l){return rr.apply(this,arguments)}(f,c,l)}function rr(){return(rr=(0,T.A)(function*(f,c,l){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const p=Pt(f);wn(f,c,Ln),yield p._initializationPromise;const y=xs(p,l);return yield Os(y,p),y._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function Ar(f,c,l){return function ir(f,c,l){return pl.apply(this,arguments)}(f,c,l)}function pl(){return(pl=(0,T.A)(function*(f,c,l){const p=(0,ee.Ku)(f);if(wn(p.auth,c,Ln),(0,Pe._isFirebaseServerApp)(p.auth.app))return Promise.reject(ze(p.auth));yield p.auth._initializationPromise;const y=xs(p.auth,l);yield Os(y,p.auth);const E=yield fr(p);return y._openRedirect(p.auth,c,"reauthViaRedirect",E)})).apply(this,arguments)}function Mu(f,c,l){return function Zi(f,c,l){return xu.apply(this,arguments)}(f,c,l)}function xu(){return(xu=(0,T.A)(function*(f,c,l){const p=(0,ee.Ku)(f);wn(p.auth,c,Ln),yield p.auth._initializationPromise;const y=xs(p.auth,l);yield Yc(!1,p,c.providerId),yield Os(y,p.auth);const E=yield fr(p);return y._openRedirect(p.auth,c,"linkViaRedirect",E)})).apply(this,arguments)}function ef(){return(ef=(0,T.A)(function*(f,c){return yield Pt(f)._initializationPromise,tf(f,c,!1)})).apply(this,arguments)}function tf(f,c){return gl.apply(this,arguments)}function gl(){return(gl=(0,T.A)(function*(f,c,l=!1){if((0,Pe._isFirebaseServerApp)(f.app))return Promise.reject(ze(f));const p=Pt(f),y=xs(p,c),R=yield new YI(p,y,l).execute();return R&&!l&&(delete R.user._redirectEventId,yield p._persistUserIfCurrent(R.user),yield p._setRedirectUser(null,c)),R})).apply(this,arguments)}function fr(f){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,T.A)(function*(f){const c=fa(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class mo{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(l=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Mm(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Pm(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var p;if(c.error&&!Pm(c)){const y=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";l.onError(Ft(this.auth,y))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const p=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xi(c))}saveEventToCache(c){this.cachedEventUids.add(Xi(c)),this.lastProcessedEventTime=Date.now()}}function Xi(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function Pm({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function xm(f){return nf.apply(this,arguments)}function nf(){return(nf=(0,T.A)(function*(f,c={}){return fe(f,"GET","/v1/projects",c)})).apply(this,arguments)}const rf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sf=/^https?/;function Nu(){return(Nu=(0,T.A)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield xm(f);for(const l of c)try{if(XI(l))return}catch{}bt(f,"unauthorized-domain")})).apply(this,arguments)}function XI(f){const c=Mr(),{protocol:l,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const R=new URL(f);return""===R.hostname&&""===p?"chrome-extension:"===l&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&R.hostname===p}if(!sf.test(l))return!1;if(rf.test(f))return p===f;const y=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(p)}const Om=new Y(3e4,6e4);function ml(){const f=Sn().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let l=0;l<f.CP.length;l++)f.CP[l]=null}let Ou=null;const Fm=new Y(5e3,15e3),af="__/auth/iframe",eE="emulator/auth/iframe",tE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _o(f){const c=f.config;le(c.authDomain,f,"auth-domain-config-required");const l=c.emulator?Z(c,eE):`https://${f.config.authDomain}/${af}`,p={apiKey:c.apiKey,appName:f.name,v:Pe.SDK_VERSION},y=Cr.get(f.config.apiHost);y&&(p.eid=y);const E=f._getFrameworks();return E.length&&(p.fw=E.join(",")),`${l}?${(0,ee.Am)(p).slice(1)}`}function uf(){return uf=(0,T.A)(function*(f){const c=yield function Vm(f){return Ou=Ou||function km(f){return new Promise((c,l)=>{var p,y,E;function R(){ml(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{ml(),l(Ft(f,"network-request-failed"))},timeout:Om.get()})}if(null!==(y=null===(p=Sn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==y&&y.Iframe)c(gapi.iframes.getContext());else{if(null===(E=Sn().gapi)||void 0===E||!E.load){const U=Gg("iframefcb");return Sn()[U]=()=>{gapi.load?R():l(Ft(f,"network-request-failed"))},zg(`${function ZD(){return Oc.gapiScript}()}?onload=${U}`).catch(re=>l(re))}R()}}).catch(c=>{throw Ou=null,c})}(f),Ou}(f),l=Sn().gapi;return le(l,f,"internal-error"),c.open({where:document.body,url:_o(f),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tE,dontclear:!0},p=>new Promise(function(){var y=(0,T.A)(function*(E,R){yield p.restyle({setHideOnLeave:!1});const U=Ft(f,"network-request-failed"),re=Sn().setTimeout(()=>{R(U)},Fm.get());function ve(){Sn().clearTimeout(re),E(p)}p.ping(ve).then(ve,()=>{R(U)})});return function(E,R){return y.apply(this,arguments)}}()))}),uf.apply(this,arguments)}const nE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ku{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const _l="__/auth/handler",yl="emulator/auth/handler",vl=encodeURIComponent("fac");function Vu(f,c,l,p,y,E){return Il.apply(this,arguments)}function Il(){return(Il=(0,T.A)(function*(f,c,l,p,y,E){le(f.config.authDomain,f,"auth-domain-config-required"),le(f.config.apiKey,f,"invalid-api-key");const R={apiKey:f.config.apiKey,appName:f.name,authType:l,redirectUrl:p,v:Pe.SDK_VERSION,eventId:y};if(c instanceof Ln){c.setDefaultLanguage(f.languageCode),R.providerId=c.providerId||"",(0,ee.Im)(c.getCustomParameters())||(R.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Me,Re]of Object.entries(E||{}))R[Me]=Re}if(c instanceof Ir){const Me=c.getScopes().filter(Re=>""!==Re);Me.length>0&&(R.scopes=Me.join(","))}f.tenantId&&(R.tid=f.tenantId);const U=R;for(const Me of Object.keys(U))void 0===U[Me]&&delete U[Me];const re=yield f._getAppCheckToken(),ve=re?`#${vl}=${encodeURIComponent(re)}`:"";return`${function Bm({config:f}){return f.emulator?Z(f,yl):`https://${f.authDomain}/${_l}`}(f)}?${(0,ee.Am)(U).slice(1)}${ve}`})).apply(this,arguments)}const cf="webStorageSupport",ma=class ga{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tn,this._completeRedirectFn=tf,this._overrideRedirectResult=Zh}_openPopup(c,l,p,y){var E=this;return(0,T.A)(function*(){var R;qt(null===(R=E.eventManagers[c._key()])||void 0===R?void 0:R.manager,"_initialize() not called before _openPopup()");const U=yield Vu(c,l,p,Mr(),y);return function ks(f,c,l,p=500,y=600){const E=Math.max((window.screen.availHeight-y)/2,0).toString(),R=Math.max((window.screen.availWidth-p)/2,0).toString();let U="";const re=Object.assign(Object.assign({},nE),{width:p.toString(),height:y.toString(),top:E,left:R}),ve=(0,ee.ZQ)().toLowerCase();l&&(U=St(ve)?"_blank":l),tr(ve)&&(c=c||"http://localhost",re.scrollbars="yes");const Me=Object.entries(re).reduce((dn,[xi,To])=>`${dn}${xi}=${To},`,"");if(function Q(f=(0,ee.ZQ)()){var c;return ls(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(ve)&&"_self"!==U)return function sE(f,c){const l=document.createElement("a");l.href=f,l.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(p)}(c||"",U),new ku(null);const Re=window.open(c||"",U,Me);le(Re,f,"popup-blocked");try{Re.focus()}catch{}return new ku(Re)}(c,U,fa())})()}_openRedirect(c,l,p,y){var E=this;return(0,T.A)(function*(){return yield E._originValidation(c),function fm(f){Sn().location.href=f}(yield Vu(c,l,p,Mr(),y)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:y,promise:E}=this.eventManagers[l];return y?Promise.resolve(y):(qt(E,"If manager is not set, promise should be"),E)}const p=this.initAndGetManager(c);return this.eventManagers[l]={promise:p},p.catch(()=>{delete this.eventManagers[l]}),p}initAndGetManager(c){var l=this;return(0,T.A)(function*(){const p=yield function ln(f){return uf.apply(this,arguments)}(c),y=new mo(c);return p.register("authEvent",E=>(le(E?.authEvent,c,"invalid-auth-event"),{status:y.onEvent(E.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:y},l.iframes[c._key()]=p,y})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(cf,{type:cf},y=>{var E;const R=null===(E=y?.[0])||void 0===E?void 0:E[cf];void 0!==R&&l(!!R),bt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Nm(f){return Nu.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return K()||cs()||ls()}};class jm{constructor(c){this.factorId=c}_process(c,l,p){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,p);case"signin":return this._finalizeSignIn(c,l.credential);default:return Jt("unexpected MultiFactorSessionType")}}}class $m extends jm{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new $m(c)}_finalizeEnroll(c,l,p){return function hb(f,c){return fe(f,"POST","/v2/accounts/mfaEnrollment:finalize",ne(f,c))}(c,{idToken:l,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function VI(f,c){return fe(f,"POST","/v2/accounts/mfaSignIn:finalize",ne(f,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let lf=(()=>{class f{constructor(){}static assertion(l){return $m._fromCredential(l)}}return f.FACTOR_ID="phone",f})();var oE="@firebase/auth";class Fu{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,T.A)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pr(){return window}(0,ee.XA)("authIdTokenMaxAge"),function YD(f){Oc=f}({loadJS:f=>new Promise((c,l)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=y=>{const E=Ft("internal-error");E.customData=y,l(E)},p.type="text/javascript",p.charset="UTF-8",function lE(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Lu(f){(0,Pe._registerComponent)(new mn.uA("auth",(c,{options:l})=>{const p=c.getProvider("app").getImmediate(),y=c.getProvider("heartbeat"),E=c.getProvider("app-check-internal"),{apiKey:R,authDomain:U}=p.options;le(R&&!R.includes(":"),"invalid-api-key",{appName:p.name});const re={apiKey:R,authDomain:U,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ae(f)},ve=new ei(p,y,E,re);return function TI(f,c){const l=c?.persistence||[],p=(Array.isArray(l)?l:[l]).map(Te);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(ve,l),ve},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,p)=>{c.getProvider("auth-internal").initialize()})),(0,Pe._registerComponent)(new mn.uA("auth-internal",c=>{const l=Pt(c.getProvider("auth").getImmediate());return new Fu(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Pe.registerVersion)(oE,"1.7.9",function aE(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,Pe.registerVersion)(oE,"1.7.9","esm2017")}("Browser");function Uu(){return Uu=(0,T.A)(function*(f,c,l){var p;const{BuildInfo:y}=pr();qt(c.sessionId,"AuthEvent did not contain a session ID");const E=yield function Wm(f){return Tl.apply(this,arguments)}(c.sessionId),R={};return ls()?R.ibi=y.packageName:Wi()?R.apn=y.packageName:bt(f,"operation-not-supported-in-this-environment"),y.displayName&&(R.appDisplayName=y.displayName),R.sessionId=E,Vu(f,l,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,R)}),Uu.apply(this,arguments)}function _a(){return(_a=(0,T.A)(function*(f){const{BuildInfo:c}=pr(),l={};ls()?l.iosBundleId=c.packageName:Wi()?l.androidPackageName=c.packageName:bt(f,"operation-not-supported-in-this-environment"),yield xm(f,l)})).apply(this,arguments)}function Cl(){return(Cl=(0,T.A)(function*(f,c,l){const{cordova:p}=pr();let y=()=>{};try{yield new Promise((E,R)=>{let U=null;function re(){var Re;E();const dn=null===(Re=p.plugins.browsertab)||void 0===Re?void 0:Re.close;"function"==typeof dn&&dn(),"function"==typeof l?.close&&l.close()}function ve(){U||(U=window.setTimeout(()=>{R(Ft(f,"redirect-cancelled-by-user"))},2e3))}function Me(){"visible"===document?.visibilityState&&ve()}c.addPassiveListener(re),document.addEventListener("resume",ve,!1),Wi()&&document.addEventListener("visibilitychange",Me,!1),y=()=>{c.removePassiveListener(re),document.removeEventListener("resume",ve,!1),document.removeEventListener("visibilitychange",Me,!1),U&&window.clearTimeout(U)}})}finally{y()}})).apply(this,arguments)}function Tl(){return(Tl=(0,T.A)(function*(f){const c=function fE(f){if(qt(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const c=new ArrayBuffer(f.length),l=new Uint8Array(c);for(let p=0;p<f.length;p++)l[p]=f.charCodeAt(p);return l}(f),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(y=>y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class yo extends mo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInitialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInitialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,T.A)(function*(){yield c.initPromise})()}}function gf(f){return vo.apply(this,arguments)}function vo(){return(vo=(0,T.A)(function*(f){const c=yield mf()._get(Bn(f));return c&&(yield mf()._remove(Bn(f))),c})).apply(this,arguments)}function Tr(){const f=[];for(let l=0;l<20;l++){const p=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return f.join("")}function mf(){return Te(Hh)}function Bn(f){return $e("authEvent",f.config.apiKey,f.name)}function Bu(f){if(!f?.includes("?"))return{};const[c,...l]=f.split("?");return(0,ee.I9)(l.join("?"))}const va=class ya{constructor(){this._redirectPersistence=tn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=tf,this._overrideRedirectResult=Zh}_initialize(c){var l=this;return(0,T.A)(function*(){const p=c._key();let y=l.eventManagers.get(p);return y||(y=new yo(c),l.eventManagers.set(p,y),l.attachCallbackListeners(c,y)),y})()}_openPopup(c){bt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,p,y){var E=this;return(0,T.A)(function*(){!function qm(f){var c,l,p,y,E,R,U,re,ve,Me;const Re=pr();le("function"==typeof(null===(c=Re?.universalLinks)||void 0===c?void 0:c.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(typeof(null===(l=Re?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le("function"==typeof(null===(E=null===(y=null===(p=Re?.cordova)||void 0===p?void 0:p.plugins)||void 0===y?void 0:y.browsertab)||void 0===E?void 0:E.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(re=null===(U=null===(R=Re?.cordova)||void 0===R?void 0:R.plugins)||void 0===U?void 0:U.browsertab)||void 0===re?void 0:re.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(Me=null===(ve=Re?.cordova)||void 0===ve?void 0:ve.InAppBrowser)||void 0===Me?void 0:Me.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const R=yield E._initialize(c);yield R.initialized(),R.resetRedirect(),function ZI(){Pu.clear()}(),yield E._originValidation(c);const U=function pE(f,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:Tr(),postBody:null,tenantId:f.tenantId,error:Ft(f,"no-auth-event")}}(c,p,y);yield function Km(f,c){return mf()._set(Bn(f),c)}(c,U);const re=yield function Al(f,c,l){return Uu.apply(this,arguments)}(c,U,l),ve=yield function pf(f){const{cordova:c}=pr();return new Promise(l=>{c.plugins.browsertab.isAvailable(p=>{let y=null;p?c.plugins.browsertab.openUrl(f):y=c.InAppBrowser.open(f,function de(f=(0,ee.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),l(y)})})}(re);return function hE(f,c,l){return Cl.apply(this,arguments)}(c,R,ve)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Gm(f){return _a.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:p,handleOpenURL:y,BuildInfo:E}=pr(),R=setTimeout((0,T.A)(function*(){yield gf(c),l.onEvent(Io())}),500),U=function(){var Me=(0,T.A)(function*(Re){clearTimeout(R);const dn=yield gf(c);let xi=null;dn&&Re?.url&&(xi=function gE(f,c){var l,p;const y=function mE(f){const c=Bu(f),l=c.link?decodeURIComponent(c.link):void 0,p=Bu(l).link,y=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Bu(y).link||y||p||l||f}(c);if(y.includes("/__/auth/callback")){const E=Bu(y),R=E.firebaseError?function _f(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(E.firebaseError)):null,U=null===(p=null===(l=R?.code)||void 0===l?void 0:l.split("auth/"))||void 0===p?void 0:p[1],re=U?Ft(U):null;return re?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:re,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:y,postBody:null}}return null}(dn,Re.url)),l.onEvent(xi||Io())});return function(dn){return Me.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,U);const re=y,ve=`${E.packageName.toLowerCase()}://`;pr().handleOpenURL=function(){var Me=(0,T.A)(function*(Re){if(Re.toLowerCase().startsWith(ve)&&U({url:Re}),"function"==typeof re)try{re(Re)}catch(dn){console.error(dn)}});return function(Re){return Me.apply(this,arguments)}}()}};function Io(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ft("no-auth-event")}}function ju(){var f;return(null===(f=self?.location)||void 0===f?void 0:f.protocol)||null}function _E(f=(0,ee.ZQ)()){return!("file:"!==ju()&&"ionic:"!==ju()&&"capacitor:"!==ju()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function Eo(){try{const f=self.localStorage,c=fa();if(f)return f.setItem(c,"1"),f.removeItem(c),!function Tb(f=(0,ee.ZQ)()){return function Ab(){return(0,ee.lT)()&&11===document?.documentMode}()||function Cb(f=(0,ee.ZQ)()){return/Edge\/\d+/.test(f)}(f)}()||(0,ee.zW)()}catch{return vf()&&(0,ee.zW)()}return!1}function vf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function If(){return(function Eb(){return"http:"===ju()||"https:"===ju()}()||(0,ee.sr)()||_E())&&!function wb(){return(0,ee.lV)()||(0,ee.Ll)()}()&&Eo()&&!vf()}function xn(){return _E()&&typeof document<"u"}function wo(){return(wo=(0,T.A)(function*(){return!!xn()&&new Promise(f=>{const c=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),f(!0)})})})).apply(this,arguments)}const nn={LOCAL:"local",NONE:"none",SESSION:"session"},es=le,Ef="persistence";function Ao(f){return wf.apply(this,arguments)}function wf(){return(wf=(0,T.A)(function*(f){yield f._initializationPromise;const c=Ym(),l=$e(Ef,f.config.apiKey,f.name);c&&c.setItem(l,f._getPersistence())})).apply(this,arguments)}function Ym(){var f;try{return(null===(f=function vE(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const bb=le;class Nn{constructor(){this.browserResolver=Te(ma),this.cordovaResolver=Te(va),this.underlyingResolver=null,this._redirectPersistence=tn,this._completeRedirectFn=tf,this._overrideRedirectResult=Zh}_initialize(c){var l=this;return(0,T.A)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,p,y){var E=this;return(0,T.A)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._openPopup(c,l,p,y)})()}_openRedirect(c,l,p,y){var E=this;return(0,T.A)(function*(){return yield E.selectUnderlyingResolver(),E.assertedUnderlyingResolver._openRedirect(c,l,p,y)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return xn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return bb(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,T.A)(function*(){if(c.underlyingResolver)return;const l=yield function yE(){return wo.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function Rl(f){return f.unwrap()}function Sb(f){return Zm(f)}function Zm(f){const{_tokenResponse:c}=f instanceof ee.g?f.customData:f;if(!c)return null;if(!(f instanceof ee.g)&&"temporaryProof"in c&&"phoneNumber"in c)return Ru.credentialFromResult(f);const l=c.providerId;if(!l||l===ht.PASSWORD)return null;let p;switch(l){case ht.GOOGLE:p=Hc;break;case ht.FACEBOOK:p=mu;break;case ht.GITHUB:p=zc;break;case ht.TWITTER:p=Sh;break;default:const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:R,pendingToken:U,nonce:re}=c;return E||R||y||U?U?l.startsWith("saml.")?Lr._create(l,U):Si._fromParams({providerId:l,signInMethod:l,pendingToken:U,idToken:y,accessToken:E}):new gt(l).credential({idToken:y,accessToken:E,rawNonce:re}):null}return f instanceof ee.g?p.credentialFromError(f):p.credentialFromResult(f)}function Br(f,c){return c.catch(l=>{throw l instanceof ee.g&&function Jm(f,c){var l;const p=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new IE(f,function lb(f,c){var l;const p=(0,ee.Ku)(f),y=c;return le(c.customData.operationType,p,"argument-error"),le(null===(l=y.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,p,"argument-error"),cm._fromError(p,y)}(f,c));else if(p){const y=Zm(c),E=c;y&&(E.credential=y,E.tenantId=p.tenantId||void 0,E.email=p.email||void 0,E.phoneNumber=p.phoneNumber||void 0)}}(f,l),l}).then(l=>{const y=l.user;return{operationType:l.operationType,credential:Sb(l),additionalUserInfo:wr(l),user:ps.getOrCreate(y)}})}function Af(f,c){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,T.A)(function*(f,c){const l=yield c;return{verificationId:l.verificationId,confirm:p=>Br(f,l.confirm(p))}})).apply(this,arguments)}class IE{constructor(c,l){this.resolver=l,this.auth=function Ea(f){return f.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Br(Rl(this.auth),this.resolver.resolveSignIn(c))}}class ps{constructor(c){this._delegate=c,this.multiFactor=function dm(f){const c=(0,ee.Ku)(f);return rl.has(c)||rl.set(c,lm._fromUser(c)),rl.get(c)}(c)}static getOrCreate(c){return ps.USER_MAP.has(c)||ps.USER_MAP.set(c,new ps(c)),ps.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,T.A)(function*(){return Br(l.auth,yi(l._delegate,c))})()}linkWithPhoneNumber(c,l){var p=this;return(0,T.A)(function*(){return Af(p.auth,function GI(f,c,l){return wi.apply(this,arguments)}(p._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,T.A)(function*(){return Br(l.auth,function QI(f,c,l){return qe.apply(this,arguments)}(l._delegate,c,Nn))})()}linkWithRedirect(c){var l=this;return(0,T.A)(function*(){return yield Ao(Pt(l.auth)),Mu(l._delegate,c,Nn)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,T.A)(function*(){return Br(l.auth,rm(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return Af(this.auth,function Cm(f,c,l){return ul.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return Br(this.auth,function Dm(f,c,l){return dl.apply(this,arguments)}(this._delegate,c,Nn))}reauthenticateWithRedirect(c){var l=this;return(0,T.A)(function*(){return yield Ao(Pt(l.auth)),Ar(l._delegate,c,Nn)})()}sendEmailVerification(c){return function la(f,c){return vi.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,T.A)(function*(){return yield function RI(f,c){return ni.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function mt(f,c){const l=(0,ee.Ku)(f);return(0,Pe._isFirebaseServerApp)(l.auth.app)?Promise.reject(ze(l.auth)):tl(l,c,null)}(this._delegate,c)}updatePassword(c){return function sb(f,c){return tl((0,ee.Ku)(f),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function cl(f,c){return hr.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Eu(f,c){return lo.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function Iu(f,c,l){return el.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ps.USER_MAP=new WeakMap;const Co=le;let $u=(()=>{class f{constructor(l,p){if(this.app=l,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:y}=l.options;Co(y,"invalid-api-key",{appName:l.name}),Co(y,"invalid-api-key",{appName:l.name});const E=typeof window<"u"?Nn:void 0;this._delegate=p.initialize({options:{persistence:Hu(y,l.name),popupRedirectResolver:E}}),this._delegate._updateErrorMap(Jn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ps.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,p){!function yh(f,c,l){const p=Pt(f);le(p._canInitEmulator,p,"emulator-config-failed"),le(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const y=!!l?.disableWarnings,E=Wg(c),{host:R,port:U}=function Fc(f){const c=Wg(f),l=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!l)return{host:"",port:null};const p=l[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(p);if(y){const E=y[1];return{host:E,port:lu(p.substr(E.length+1))}}{const[E,R]=p.split(":");return{host:E,port:lu(R)}}}(c);p.config.emulator={url:`${E}//${R}${null===U?"":`:${U}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:R,port:U,protocol:E.replace(":",""),options:Object.freeze({disableWarnings:y})}),y||function vh(){function f(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,l,p)}applyActionCode(l){return function PI(f,c){return Xt.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return De(this._delegate,l)}confirmPasswordReset(l,p){return function Xc(f,c,l){return Uh.apply(this,arguments)}(this._delegate,l,p)}createUserWithEmailAndPassword(l,p){var y=this;return(0,T.A)(function*(){return Br(y._delegate,function vu(f,c,l){return Wn.apply(this,arguments)}(y._delegate,l,p))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function bn(f,c){return co.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function ca(f,c){const l=gu.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,T.A)(function*(){Co(If(),l._delegate,"operation-not-supported-in-this-environment");const p=yield function Xh(f,c){return ef.apply(this,arguments)}(l._delegate,Nn);return p?Br(l._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function Qm(f,c){Pt(f)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,p,y){const{next:E,error:R,complete:U}=Xm(l,p,y);return this._delegate.onAuthStateChanged(E,R,U)}onIdTokenChanged(l,p,y){const{next:E,error:R,complete:U}=Xm(l,p,y);return this._delegate.onIdTokenChanged(E,R,U)}sendSignInLinkToEmail(l,p){return function Dn(f,c,l){return Qi.apply(this,arguments)}(this._delegate,l,p)}sendPasswordResetEmail(l,p){return function sm(f,c,l){return Zc.apply(this,arguments)}(this._delegate,l,p||void 0)}setPersistence(l){var p=this;return(0,T.A)(function*(){let y;switch(function Sl(f,c){es(Object.values(nn).includes(c),f,"invalid-persistence-type"),(0,ee.lV)()?es(c!==nn.SESSION,f,"unsupported-persistence-type"):(0,ee.Ll)()?es(c===nn.NONE,f,"unsupported-persistence-type"):vf()?es(c===nn.NONE||c===nn.LOCAL&&(0,ee.zW)(),f,"unsupported-persistence-type"):es(c===nn.NONE||Eo(),f,"unsupported-persistence-type")}(p._delegate,l),l){case nn.SESSION:y=tn;break;case nn.LOCAL:y=(yield Te(Du)._isAvailable())?Du:Hh;break;case nn.NONE:y=Mn;break;default:return bt("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(y)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return Br(this._delegate,function em(f){return Wc.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return Br(this._delegate,Jc(this._delegate,l))}signInWithCustomToken(l){return Br(this._delegate,function im(f,c){return Ye.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,p){return Br(this._delegate,function ua(f,c,l){return(0,Pe._isFirebaseServerApp)(f.app)?Promise.reject(ze(f)):Jc((0,ee.Ku)(f),oa.credential(c,l)).catch(function(){var p=(0,T.A)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&Rs(f),y});return function(y){return p.apply(this,arguments)}}())}(this._delegate,l,p))}signInWithEmailLink(l,p){return Br(this._delegate,function Xe(f,c,l){return uo.apply(this,arguments)}(this._delegate,l,p))}signInWithPhoneNumber(l,p){return Af(this._delegate,function zI(f,c,l){return bu.apply(this,arguments)}(this._delegate,l,p))}signInWithPopup(l){var p=this;return(0,T.A)(function*(){return Co(If(),p._delegate,"operation-not-supported-in-this-environment"),Br(p._delegate,function KI(f,c,l){return ll.apply(this,arguments)}(p._delegate,l,Nn))})()}signInWithRedirect(l){var p=this;return(0,T.A)(function*(){return Co(If(),p._delegate,"operation-not-supported-in-this-environment"),yield Ao(p._delegate),ue(p._delegate,l,Nn)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function en(f,c){return ii.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=nn,f})();function Xm(f,c,l){let p=f;"function"!=typeof f&&({next:p,error:c,complete:l}=f);const y=p;return{next:R=>y(R&&ps.getOrCreate(R)),error:c,complete:l}}function Hu(f,c){const l=function Db(f,c){const l=Ym();if(!l)return[];const p=$e(Ef,f,c);switch(l.getItem(p)){case nn.NONE:return[Mn];case nn.LOCAL:return[Du,tn];case nn.SESSION:return[tn];default:return[]}}(f,c);if(typeof self<"u"&&!l.includes(Du)&&l.push(Du),typeof window<"u")for(const p of[Hh,tn])l.includes(p)||l.push(p);return l.includes(Mn)||l.push(Mn),l}class Tf{constructor(){this.providerId="phone",this._delegate=new Ru(Rl(We.A.auth()))}static credential(c,l){return Ru.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}Tf.PHONE_SIGN_IN_METHOD=Ru.PHONE_SIGN_IN_METHOD,Tf.PROVIDER_ID=Ru.PROVIDER_ID;const Pl=le;class EE{constructor(c,l,p=We.A.app()){var y;Pl(null===(y=p.options)||void 0===y?void 0:y.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new HI(p.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Df(f){f.INTERNAL.registerComponent(new mn.uA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new $u(l,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:oa,FacebookAuthProvider:mu,GithubAuthProvider:zc,GoogleAuthProvider:Hc,OAuthProvider:gt,SAMLAuthProvider:yu,PhoneAuthProvider:Tf,PhoneMultiFactorGenerator:lf,RecaptchaVerifier:EE,TwitterAuthProvider:Sh,Auth:$u,AuthCredential:ao,Error:ee.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.14")}(We.A)},467:(as,cr,rt)=>{function T(Pe,ee,Ct,un,mn,Yn,ht){try{var oe=Pe[Yn](ht),ge=oe.value}catch(Oe){return void Ct(Oe)}oe.done?ee(ge):Promise.resolve(ge).then(un,mn)}function We(Pe){return function(){var ee=this,Ct=arguments;return new Promise(function(un,mn){var Yn=Pe.apply(ee,Ct);function ht(ge){T(Yn,un,mn,ht,oe,"next",ge)}function oe(ge){T(Yn,un,mn,ht,oe,"throw",ge)}ht(void 0)})}}rt.d(cr,{A:()=>We})},635:(as,cr,rt)=>{function ee(Y,Z){var te={};for(var se in Y)Object.prototype.hasOwnProperty.call(Y,se)&&Z.indexOf(se)<0&&(te[se]=Y[se]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var Ie=0;for(se=Object.getOwnPropertySymbols(Y);Ie<se.length;Ie++)Z.indexOf(se[Ie])<0&&Object.prototype.propertyIsEnumerable.call(Y,se[Ie])&&(te[se[Ie]]=Y[se[Ie]])}return te}function Oe(Y,Z,te,se){return new(te||(te=Promise))(function(ne,fe){function ft(pt){try{je(se.next(pt))}catch(Zt){fe(Zt)}}function ke(pt){try{je(se.throw(pt))}catch(Zt){fe(Zt)}}function je(pt){pt.done?ne(pt.value):function Ie(ne){return ne instanceof te?ne:new te(function(fe){fe(ne)})}(pt.value).then(ft,ke)}je((se=se.apply(Y,Z||[])).next())})}function Yt(Y){return this instanceof Yt?(this.v=Y,this):new Yt(Y)}function bt(Y,Z,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,se=te.apply(Y,Z||[]),ne=[];return Ie={},fe("next"),fe("throw"),fe("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie;function fe(Rt){se[Rt]&&(Ie[Rt]=function(lr){return new Promise(function(xr,er){ne.push([Rt,lr,xr,er])>1||ft(Rt,lr)})})}function ft(Rt,lr){try{!function ke(Rt){Rt.value instanceof Yt?Promise.resolve(Rt.value.v).then(je,pt):Zt(ne[0][2],Rt)}(se[Rt](lr))}catch(xr){Zt(ne[0][3],xr)}}function je(Rt){ft("next",Rt)}function pt(Rt){ft("throw",Rt)}function Zt(Rt,lr){Rt(lr),ne.shift(),ne.length&&ft(ne[0][0],ne[0][1])}}function yr(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,Z=Y[Symbol.asyncIterator];return Z?Z.call(Y):(Y=function Tt(Y){var Z="function"==typeof Symbol&&Symbol.iterator,te=Z&&Y[Z],se=0;if(te)return te.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&se>=Y.length&&(Y=void 0),{value:Y&&Y[se++],done:!Y}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),te={},se("next"),se("throw"),se("return"),te[Symbol.asyncIterator]=function(){return this},te);function se(ne){te[ne]=Y[ne]&&function(fe){return new Promise(function(ft,ke){!function Ie(ne,fe,ft,ke){Promise.resolve(ke).then(function(je){ne({value:je,done:ft})},fe)}(ft,ke,(fe=Y[ne](fe)).done,fe.value)})}}}rt.d(cr,{AQ:()=>bt,N3:()=>Yt,Tt:()=>ee,sH:()=>Oe,xN:()=>yr}),"function"==typeof SuppressedError&&SuppressedError}},as=>{as(as.s=176)}]);
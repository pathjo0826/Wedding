"use strict";(self.webpackChunkwedding_app=self.webpackChunkwedding_app||[]).push([[792],{443:(ps,ar,Ge)=>{Ge.d(ar,{$:()=>uv,A:()=>ge,G:()=>At,K:()=>ev,L:()=>No,N:()=>Bs,P:()=>Ei,R:()=>FT,U:()=>He,V:()=>_s,W:()=>Ht,X:()=>bd,Y:()=>Dp,Z:()=>_i,_:()=>ko,a:()=>bv,a0:()=>jc,a1:()=>Dd,a2:()=>pv,a3:()=>gv,a4:()=>TT,a5:()=>Bi,a6:()=>mv,a7:()=>bT,a8:()=>Un,a9:()=>lt,aA:()=>Qy,aB:()=>Gt,aC:()=>K,aD:()=>sg,aE:()=>oe,aF:()=>Dt,aG:()=>rg,aH:()=>zv,aI:()=>jT,aJ:()=>Vn,aN:()=>Wr,aQ:()=>Ta,aa:()=>ys,ab:()=>zr,ac:()=>pl,ad:()=>Lo,ae:()=>gl,af:()=>ml,ag:()=>Wc,ah:()=>$s,ak:()=>uo,al:()=>Gc,am:()=>It,ap:()=>wT,aq:()=>yi,as:()=>nO,at:()=>Tv,au:()=>it,av:()=>vp,aw:()=>Ze,ax:()=>Wt,ay:()=>Tl,az:()=>og,b:()=>ho,c:()=>Bv,d:()=>$v,e:()=>jv,f:()=>$T,g:()=>qv,h:()=>ur,i:()=>kd,j:()=>ng,k:()=>Pa,l:()=>Qp,m:()=>fO,p:()=>kt,r:()=>zs,s:()=>Vv,u:()=>Jp});var R=Ge(467),Ae=Ge(631),M=Ge(401),Fe=Ge(398),Ot=Ge(635),pn=Ge(779);const kt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ge={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const At=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},nr=function at(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},mt=new M.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new Fe.Vy("@firebase/auth");function gn(g,...u){qe.logLevel<=Fe.$b.ERROR&&qe.error(`Auth (${Ae.SDK_VERSION}): ${g}`,...u)}function Wt(g,...u){throw Ie(g,...u)}function Gt(g,...u){return Ie(g,...u)}function Ur(g,u,h){const m=Object.assign(Object.assign({},nr()),{[u]:h});return new M.FA("auth","Firebase",m).create(u,{appName:g.name})}function vt(g){return Ur(g,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rt(g,u,h){if(!(u instanceof h))throw h.name!==u.constructor.name&&Wt(g,"argument-error"),Ur(g,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ie(g,...u){if("string"!=typeof g){const h=u[0],m=[...u.slice(1)];return m[0]&&(m[0].appName=g.name),g._errorFactory.create(h,...m)}return mt.create(g,...u)}function K(g,u,...h){if(!g)throw Ie(u,...h)}function je(g){const u="INTERNAL ASSERTION FAILED: "+g;throw gn(u),new Error(u)}function it(g,u){g||je(u)}function St(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function kn(){return"http:"===an()||"https:"===an()}function an(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class _r{constructor(u,h){this.shortDelay=u,this.longDelay=h,it(h>u,"Short delay should be less than long delay!"),this.isMobile=(0,M.jZ)()||(0,M.lV)()}get(){return function ct(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(kn()||(0,M.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ti(g,u){it(g.emulator,"Emulator should always be set here");const{url:h}=g.emulator;return u?`${h}${u.startsWith("/")?u.slice(1):u}`:h}class Fs{static initialize(u,h,m){this.fetchImpl=u,h&&(this.headersImpl=h),m&&(this.responseImpl=m)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const W={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},te=new _r(3e4,6e4);function Q(g,u){return g.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:g.tenantId}):u}function $(g,u,h,m){return se.apply(this,arguments)}function se(){return(se=(0,R.A)(function*(g,u,h,m,w={}){return ye(g,w,(0,R.A)(function*(){let A={},L={};m&&("GET"===u?L=m:A={body:JSON.stringify(m)});const Z=(0,M.Am)(Object.assign({key:g.config.apiKey},L)).slice(1),de=yield g._getAdditionalHeaders();de["Content-Type"]="application/json",g.languageCode&&(de["X-Firebase-Locale"]=g.languageCode);const Ne=Object.assign({method:u,headers:de},A);return(0,M.c1)()||(Ne.referrerPolicy="no-referrer"),Fs.fetch()(Ke(g,g.config.apiHost,h,Z),Ne)}))})).apply(this,arguments)}function ye(g,u,h){return pe.apply(this,arguments)}function pe(){return(pe=(0,R.A)(function*(g,u,h){g._canInitEmulator=!1;const m=Object.assign(Object.assign({},W),u);try{const w=new _n(g),A=yield Promise.race([h(),w.promise]);w.clearNetworkTimeout();const L=yield A.json();if("needConfirmation"in L)throw yr(g,"account-exists-with-different-credential",L);if(A.ok&&!("errorMessage"in L))return L;{const Z=A.ok?L.errorMessage:L.error.message,[de,Ne]=Z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===de)throw yr(g,"credential-already-in-use",L);if("EMAIL_EXISTS"===de)throw yr(g,"email-already-in-use",L);if("USER_DISABLED"===de)throw yr(g,"user-disabled",L);const ze=m[de]||de.toLowerCase().replace(/[_\s]+/g,"-");if(Ne)throw Ur(g,ze,Ne);Wt(g,ze)}}catch(w){if(w instanceof M.g)throw w;Wt(g,"network-request-failed",{message:String(w)})}})).apply(this,arguments)}function Qe(g,u,h,m){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,R.A)(function*(g,u,h,m,w={}){const A=yield $(g,u,h,m,w);return"mfaPendingCredential"in A&&Wt(g,"multi-factor-auth-required",{_serverResponse:A}),A})).apply(this,arguments)}function Ke(g,u,h,m){const w=`${u}${h}?${m}`;return g.config.emulator?ti(g.config,w):`${g.config.apiScheme}://${w}`}function Vt(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _n{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((h,m)=>{this.timer=setTimeout(()=>m(Gt(this.auth,"network-request-failed")),te.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yr(g,u,h){const m={appName:g.name};h.email&&(m.email=h.email),h.phoneNumber&&(m.phoneNumber=h.phoneNumber);const w=Gt(g,u,m);return w.customData._tokenResponse=h,w}function Ft(g){return void 0!==g&&void 0!==g.getResponse}function Lt(g){return void 0!==g&&void 0!==g.enterprise}class qn{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const h of this.recaptchaEnforcementState)if(h.provider&&h.provider===u)return Vt(h.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function Tr(){return(Tr=(0,R.A)(function*(g){return(yield $(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function jt(g,u){return pi.apply(this,arguments)}function pi(){return(pi=(0,R.A)(function*(g,u){return $(g,"GET","/v2/recaptchaConfig",Q(g,u))})).apply(this,arguments)}function Po(){return(Po=(0,R.A)(function*(g,u){return $(g,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function gi(){return(gi=(0,R.A)(function*(g,u){return $(g,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function es(g,u){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,R.A)(function*(g,u){return $(g,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function vr(g){if(g)try{const u=new Date(Number(g));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function br(){return(br=(0,R.A)(function*(g,u=!1){const h=(0,M.Ku)(g),m=yield h.getIdToken(u),w=io(m);K(w&&w.exp&&w.auth_time&&w.iat,h.auth,"internal-error");const A="object"==typeof w.firebase?w.firebase:void 0,L=A?.sign_in_provider;return{claims:w,token:m,authTime:vr(Kn(w.auth_time)),issuedAtTime:vr(Kn(w.iat)),expirationTime:vr(Kn(w.exp)),signInProvider:L||null,signInSecondFactor:A?.sign_in_second_factor||null}})).apply(this,arguments)}function Kn(g){return 1e3*Number(g)}function io(g){const[u,h,m]=g.split(".");if(void 0===u||void 0===h||void 0===m)return gn("JWT malformed, contained fewer than 3 sections"),null;try{const w=(0,M.u)(h);return w?JSON.parse(w):(gn("Failed to decode base64 JWT payload"),null)}catch(w){return gn("Caught error parsing JWT payload as JSON",w?.toString()),null}}function ts(g){const u=io(g);return K(u,"internal-error"),K(typeof u.exp<"u","internal-error"),K(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}function Xt(g,u){return ki.apply(this,arguments)}function ki(){return(ki=(0,R.A)(function*(g,u,h=!1){if(h)return u;try{return yield u}catch(m){throw m instanceof M.g&&function gs({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(m)&&g.auth.currentUser===g&&(yield g.auth.signOut()),m}})).apply(this,arguments)}class ns{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var h;if(u){const m=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),m}{this.errorBackoff=3e4;const w=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,w)}}schedule(u=!1){var h=this;if(!this.isRunning)return;const m=this.getInterval(u);this.timerId=setTimeout((0,R.A)(function*(){yield h.iteration()}),m)}iteration(){var u=this;return(0,R.A)(function*(){try{yield u.user.getIdToken(!0)}catch(h){return void("auth/network-request-failed"===h?.code&&u.schedule(!0))}u.schedule()})()}}class xr{constructor(u,h){this.createdAt=u,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=vr(this.lastLoginAt),this.creationTime=vr(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rr(g){return Br.apply(this,arguments)}function Br(){return(Br=(0,R.A)(function*(g){var u;const h=g.auth,m=yield g.getIdToken(),w=yield Xt(g,es(h,{idToken:m}));K(w?.users.length,h,"internal-error");const A=w.users[0];g._notifyReloadListener(A);const L=null!==(u=A.providerUserInfo)&&void 0!==u&&u.length?Mo(A.providerUserInfo):[],Z=function ao(g,u){return[...g.filter(m=>!u.some(w=>w.providerId===m.providerId)),...u]}(g.providerData,L),ze=!!g.isAnonymous&&!(g.email&&A.passwordHash||Z?.length),_t={uid:A.localId,displayName:A.displayName||null,photoURL:A.photoUrl||null,email:A.email||null,emailVerified:A.emailVerified||!1,phoneNumber:A.phoneNumber||null,tenantId:A.tenantId||null,providerData:Z,metadata:new xr(A.createdAt,A.lastLoginAt),isAnonymous:ze};Object.assign(g,_t)})).apply(this,arguments)}function oo(){return(oo=(0,R.A)(function*(g){const u=(0,M.Ku)(g);yield rr(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function Mo(g){return g.map(u=>{var{providerId:h}=u,m=(0,Ot.Tt)(u,["providerId"]);return{providerId:h,uid:m.rawId||"",displayName:m.displayName||null,email:m.email||null,phoneNumber:m.phoneNumber||null,photoURL:m.photoUrl||null}})}function xe(){return(xe=(0,R.A)(function*(g,u){const h=yield ye(g,{},(0,R.A)(function*(){const m=(0,M.Am)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:w,apiKey:A}=g.config,L=Ke(g,w,"/v1/token",`key=${A}`),Z=yield g._getAdditionalHeaders();return Z["Content-Type"]="application/x-www-form-urlencoded",Fs.fetch()(L,{method:"POST",headers:Z,body:m})}));return{accessToken:h.access_token,expiresIn:h.expires_in,refreshToken:h.refresh_token}})).apply(this,arguments)}function C(){return(C=(0,R.A)(function*(g,u){return $(g,"POST","/v2/accounts:revokeToken",Q(g,u))})).apply(this,arguments)}class E{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){K(u.idToken,"internal-error"),K(typeof u.idToken<"u","internal-error"),K(typeof u.refreshToken<"u","internal-error");const h="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):ts(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,h)}updateFromIdToken(u){K(0!==u.length,"internal-error");const h=ts(u);this.updateTokensAndExpiration(u,null,h)}getToken(u,h=!1){var m=this;return(0,R.A)(function*(){return h||!m.accessToken||m.isExpired?(K(m.refreshToken,u,"user-token-expired"),m.refreshToken?(yield m.refresh(u,m.refreshToken),m.accessToken):null):m.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,h){var m=this;return(0,R.A)(function*(){const{accessToken:w,refreshToken:A,expiresIn:L}=yield function Ia(g,u){return xe.apply(this,arguments)}(u,h);m.updateTokensAndExpiration(w,A,Number(L))})()}updateTokensAndExpiration(u,h,m){this.refreshToken=h||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*m}static fromJSON(u,h){const{refreshToken:m,accessToken:w,expirationTime:A}=h,L=new E;return m&&(K("string"==typeof m,"internal-error",{appName:u}),L.refreshToken=m),w&&(K("string"==typeof w,"internal-error",{appName:u}),L.accessToken=w),A&&(K("number"==typeof A,"internal-error",{appName:u}),L.expirationTime=A),L}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new E,this.toJSON())}_performRefresh(){return je("not implemented")}}function T(g,u){K("string"==typeof g||typeof g>"u","internal-error",{appName:u})}class x{constructor(u){var{uid:h,auth:m,stsTokenManager:w}=u,A=(0,Ot.Tt)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ns(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=m,this.stsTokenManager=w,this.accessToken=w.accessToken,this.displayName=A.displayName||null,this.email=A.email||null,this.emailVerified=A.emailVerified||!1,this.phoneNumber=A.phoneNumber||null,this.photoURL=A.photoURL||null,this.isAnonymous=A.isAnonymous||!1,this.tenantId=A.tenantId||null,this.providerData=A.providerData?[...A.providerData]:[],this.metadata=new xr(A.createdAt||void 0,A.lastLoginAt||void 0)}getIdToken(u){var h=this;return(0,R.A)(function*(){const m=yield Xt(h,h.stsTokenManager.getToken(h.auth,u));return K(m,h.auth,"internal-error"),h.accessToken!==m&&(h.accessToken=m,yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)),m})()}getIdTokenResult(u){return function Fn(g){return br.apply(this,arguments)}(this,u)}reload(){return function so(g){return oo.apply(this,arguments)}(this)}_assign(u){this!==u&&(K(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(h=>Object.assign({},h)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const h=new x(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(u){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,h=!1){var m=this;return(0,R.A)(function*(){let w=!1;u.idToken&&u.idToken!==m.stsTokenManager.accessToken&&(m.stsTokenManager.updateFromServerResponse(u),w=!0),h&&(yield rr(m)),yield m.auth._persistUserIfCurrent(m),w&&m.auth._notifyListenersIfCurrent(m)})()}delete(){var u=this;return(0,R.A)(function*(){if((0,Ae._isFirebaseServerApp)(u.auth.app))return Promise.reject(vt(u.auth));const h=yield u.getIdToken();return yield Xt(u,function ro(g,u){return Po.apply(this,arguments)}(u.auth,{idToken:h})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,h){var m,w,A,L,Z,de,Ne,ze;const _t=null!==(m=h.displayName)&&void 0!==m?m:void 0,oi=null!==(w=h.email)&&void 0!==w?w:void 0,$o=null!==(A=h.phoneNumber)&&void 0!==A?A:void 0,Ma=null!==(L=h.photoURL)&&void 0!==L?L:void 0,Ho=null!==(Z=h.tenantId)&&void 0!==Z?Z:void 0,yg=null!==(de=h._redirectEventId)&&void 0!==de?de:void 0,vg=null!==(Ne=h.createdAt)&&void 0!==Ne?Ne:void 0,Eg=null!==(ze=h.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:Na,emailVerified:iE,isAnonymous:Gr,providerData:Ig,stsTokenManager:Ar}=h;K(Na&&Ar,u,"internal-error");const wg=E.fromJSON(this.name,Ar);K("string"==typeof Na,u,"internal-error"),T(_t,u.name),T(oi,u.name),K("boolean"==typeof iE,u,"internal-error"),K("boolean"==typeof Gr,u,"internal-error"),T($o,u.name),T(Ma,u.name),T(Ho,u.name),T(yg,u.name),T(vg,u.name),T(Eg,u.name);const Cg=new x({uid:Na,auth:u,email:oi,emailVerified:iE,displayName:_t,isAnonymous:Gr,photoURL:Ma,phoneNumber:$o,tenantId:Ho,stsTokenManager:wg,createdAt:vg,lastLoginAt:Eg});return Ig&&Array.isArray(Ig)&&(Cg.providerData=Ig.map(sE=>Object.assign({},sE))),yg&&(Cg._redirectEventId=yg),Cg}static _fromIdTokenResponse(u,h,m=!1){return(0,R.A)(function*(){const w=new E;w.updateFromServerResponse(h);const A=new x({uid:h.localId,auth:u,stsTokenManager:w,isAnonymous:m});return yield rr(A),A})()}static _fromGetAccountInfoResponse(u,h,m){return(0,R.A)(function*(){const w=h.users[0];K(void 0!==w.localId,"internal-error");const A=void 0!==w.providerUserInfo?Mo(w.providerUserInfo):[],L=!(w.email&&w.passwordHash||A?.length),Z=new E;Z.updateFromIdToken(m);const de=new x({uid:w.localId,auth:u,stsTokenManager:Z,isAnonymous:L}),Ne={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:A,metadata:new xr(w.createdAt,w.lastLoginAt),isAnonymous:!(w.email&&w.passwordHash||A?.length)};return Object.assign(de,Ne),de})()}}const O=new Map;function oe(g){it(g instanceof Function,"Expected a class definition");let u=O.get(g);return u?(it(u instanceof g,"Instance stored in cache mismatched with class"),u):(u=new g,O.set(g,u),u)}const He=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,R.A)(function*(){return!0})()}_set(h,m){var w=this;return(0,R.A)(function*(){w.storage[h]=m})()}_get(h){var m=this;return(0,R.A)(function*(){const w=m.storage[h];return void 0===w?null:w})()}_remove(h){var m=this;return(0,R.A)(function*(){delete m.storage[h]})()}_addListener(h,m){}_removeListener(h,m){}}return g.type="NONE",g})();function Dt(g,u,h){return`firebase:${g}:${u}:${h}`}class Ve{constructor(u,h,m){this.persistence=u,this.auth=h,this.userKey=m;const{config:w,name:A}=this.auth;this.fullUserKey=Dt(this.userKey,w.apiKey,A),this.fullPersistenceKey=Dt("persistence",w.apiKey,A),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,R.A)(function*(){const h=yield u.persistence._get(u.fullUserKey);return h?x._fromJSON(u.auth,h):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var h=this;return(0,R.A)(function*(){if(h.persistence===u)return;const m=yield h.getCurrentUser();return yield h.removeCurrentUser(),h.persistence=u,m?h.setCurrentUser(m):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,h,m="authUser"){return(0,R.A)(function*(){if(!h.length)return new Ve(oe(He),u,m);const w=(yield Promise.all(h.map(function(){var Ne=(0,R.A)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return Ne.apply(this,arguments)}}()))).filter(Ne=>Ne);let A=w[0]||oe(He);const L=Dt(m,u.config.apiKey,u.name);let Z=null;for(const Ne of h)try{const ze=yield Ne._get(L);if(ze){const _t=x._fromJSON(u,ze);Ne!==A&&(Z=_t),A=Ne;break}}catch{}const de=w.filter(Ne=>Ne._shouldAllowMigration);return A._shouldAllowMigration&&de.length?(A=de[0],Z&&(yield A._set(L,Z.toJSON())),yield Promise.all(h.map(function(){var Ne=(0,R.A)(function*(ze){if(ze!==A)try{yield ze._remove(L)}catch{}});return function(ze){return Ne.apply(this,arguments)}}())),new Ve(A,u,m)):new Ve(A,u,m)})()}}function yn(g){const u=g.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(Zt(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(Se(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(vd(u))return"Blackberry";if(Ed(u))return"Webos";if(Ln(u))return"Safari";if((u.includes("chrome/")||Us(u))&&!u.includes("edge/"))return"Chrome";if(Ze(u))return"Android";{const m=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===m?.length)return m[1]}return"Other"}function Se(g=(0,M.ZQ)()){return/firefox\//i.test(g)}function Ln(g=(0,M.ZQ)()){const u=g.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function Us(g=(0,M.ZQ)()){return/crios\//i.test(g)}function Zt(g=(0,M.ZQ)()){return/iemobile/i.test(g)}function Ze(g=(0,M.ZQ)()){return/android/i.test(g)}function vd(g=(0,M.ZQ)()){return/blackberry/i.test(g)}function Ed(g=(0,M.ZQ)()){return/webos/i.test(g)}function vp(g=(0,M.ZQ)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function Qy(g=(0,M.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}function st(g=(0,M.ZQ)()){return vp(g)||Ze(g)||Ed(g)||vd(g)||/windows phone/i.test(g)||Zt(g)}function qt(g,u=[]){let h;switch(g){case"Browser":h=yn((0,M.ZQ)());break;case"Worker":h=`${yn((0,M.ZQ)())}-${g}`;break;default:h=g}const m=u.length?u.join(","):"FirebaseCore-web";return`${h}/JsCore/${Ae.SDK_VERSION}/${m}`}class dT{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,h){const m=A=>new Promise((L,Z)=>{try{L(u(A))}catch(de){Z(de)}});m.onAbort=h,this.queue.push(m);const w=this.queue.length-1;return()=>{this.queue[w]=()=>Promise.resolve()}}runMiddleware(u){var h=this;return(0,R.A)(function*(){if(h.auth.currentUser===u)return;const m=[];try{for(const w of h.queue)yield w(u),w.onAbort&&m.push(w.onAbort)}catch(w){m.reverse();for(const A of m)try{A()}catch{}throw h.auth._errorFactory.create("login-blocked",{originalMessage:w?.message})}})()}}function Ep(){return(Ep=(0,R.A)(function*(g,u={}){return $(g,"GET","/v2/passwordPolicy",Q(g,u))})).apply(this,arguments)}class Fi{constructor(u){var h,m,w,A;const L=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(h=L.minPasswordLength)&&void 0!==h?h:6,L.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=L.maxPasswordLength),void 0!==L.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=L.containsLowercaseCharacter),void 0!==L.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=L.containsUppercaseCharacter),void 0!==L.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=L.containsNumericCharacter),void 0!==L.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=L.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(w=null===(m=u.allowedNonAlphanumericCharacters)||void 0===m?void 0:m.join(""))&&void 0!==w?w:"",this.forceUpgradeOnSignin=null!==(A=u.forceUpgradeOnSignin)&&void 0!==A&&A,this.schemaVersion=u.schemaVersion}validatePassword(u){var h,m,w,A,L,Z;const de={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,de),this.validatePasswordCharacterOptions(u,de),de.isValid&&(de.isValid=null===(h=de.meetsMinPasswordLength)||void 0===h||h),de.isValid&&(de.isValid=null===(m=de.meetsMaxPasswordLength)||void 0===m||m),de.isValid&&(de.isValid=null===(w=de.containsLowercaseLetter)||void 0===w||w),de.isValid&&(de.isValid=null===(A=de.containsUppercaseLetter)||void 0===A||A),de.isValid&&(de.isValid=null===(L=de.containsNumericCharacter)||void 0===L||L),de.isValid&&(de.isValid=null===(Z=de.containsNonAlphanumericCharacter)||void 0===Z||Z),de}validatePasswordLengthOptions(u,h){const m=this.customStrengthOptions.minPasswordLength,w=this.customStrengthOptions.maxPasswordLength;m&&(h.meetsMinPasswordLength=u.length>=m),w&&(h.meetsMaxPasswordLength=u.length<=w)}validatePasswordCharacterOptions(u,h){let m;this.updatePasswordCharacterOptionsStatuses(h,!1,!1,!1,!1);for(let w=0;w<u.length;w++)m=u.charAt(w),this.updatePasswordCharacterOptionsStatuses(h,m>="a"&&m<="z",m>="A"&&m<="Z",m>="0"&&m<="9",this.allowedNonAlphanumericCharacters.includes(m))}updatePasswordCharacterOptionsStatuses(u,h,m,w,A){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=h)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=m)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=w)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=A))}}class $1{constructor(u,h,m,w){this.app=u,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hT(this),this.idTokenSubscription=new hT(this),this.beforeStateQueue=new dT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(u,h){var m=this;return h&&(this._popupRedirectResolver=oe(h)),this._initializationPromise=this.queue((0,R.A)(function*(){var w,A;if(!m._deleted&&(m.persistenceManager=yield Ve.create(m,u),!m._deleted)){if(null!==(w=m._popupRedirectResolver)&&void 0!==w&&w._shouldInitProactively)try{yield m._popupRedirectResolver._initialize(m)}catch{}yield m.initializeCurrentUser(h),m.lastNotifiedUid=(null===(A=m.currentUser)||void 0===A?void 0:A.uid)||null,!m._deleted&&(m._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,R.A)(function*(){if(u._deleted)return;const h=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||h){if(u.currentUser&&h&&u.currentUser.uid===h.uid)return u._currentUser._assign(h),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(h,!0)}})()}initializeCurrentUserFromIdToken(u){var h=this;return(0,R.A)(function*(){try{const m=yield es(h,{idToken:u}),w=yield x._fromGetAccountInfoResponse(h,m,u);yield h.directlySetCurrentUser(w)}catch(m){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",m),yield h.directlySetCurrentUser(null)}})()}initializeCurrentUser(u){var h=this;return(0,R.A)(function*(){var m;if((0,Ae._isFirebaseServerApp)(h.app)){const Z=h.app.settings.authIdToken;return Z?new Promise(de=>{setTimeout(()=>h.initializeCurrentUserFromIdToken(Z).then(de,de))}):h.directlySetCurrentUser(null)}const w=yield h.assertedPersistence.getCurrentUser();let A=w,L=!1;if(u&&h.config.authDomain){yield h.getOrInitRedirectPersistenceManager();const Z=null===(m=h.redirectUser)||void 0===m?void 0:m._redirectEventId,de=A?._redirectEventId,Ne=yield h.tryRedirectSignIn(u);(!Z||Z===de)&&Ne?.user&&(A=Ne.user,L=!0)}if(!A)return h.directlySetCurrentUser(null);if(!A._redirectEventId){if(L)try{yield h.beforeStateQueue.runMiddleware(A)}catch(Z){A=w,h._popupRedirectResolver._overrideRedirectResult(h,()=>Promise.reject(Z))}return A?h.reloadAndSetCurrentUserOrClear(A):h.directlySetCurrentUser(null)}return K(h._popupRedirectResolver,h,"argument-error"),yield h.getOrInitRedirectPersistenceManager(),h.redirectUser&&h.redirectUser._redirectEventId===A._redirectEventId?h.directlySetCurrentUser(A):h.reloadAndSetCurrentUserOrClear(A)})()}tryRedirectSignIn(u){var h=this;return(0,R.A)(function*(){let m=null;try{m=yield h._popupRedirectResolver._completeRedirectFn(h,u,!0)}catch{yield h._setRedirectUser(null)}return m})()}reloadAndSetCurrentUserOrClear(u){var h=this;return(0,R.A)(function*(){try{yield rr(u)}catch(m){if("auth/network-request-failed"!==m?.code)return h.directlySetCurrentUser(null)}return h.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function mn(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var u=this;return(0,R.A)(function*(){u._deleted=!0})()}updateCurrentUser(u){var h=this;return(0,R.A)(function*(){if((0,Ae._isFirebaseServerApp)(h.app))return Promise.reject(vt(h));const m=u?(0,M.Ku)(u):null;return m&&K(m.auth.config.apiKey===h.config.apiKey,h,"invalid-user-token"),h._updateCurrentUser(m&&m._clone(h))})()}_updateCurrentUser(u,h=!1){var m=this;return(0,R.A)(function*(){if(!m._deleted)return u&&K(m.tenantId===u.tenantId,m,"tenant-id-mismatch"),h||(yield m.beforeStateQueue.runMiddleware(u)),m.queue((0,R.A)(function*(){yield m.directlySetCurrentUser(u),m.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,R.A)(function*(){return(0,Ae._isFirebaseServerApp)(u.app)?Promise.reject(vt(u)):(yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0))})()}setPersistence(u){var h=this;return(0,Ae._isFirebaseServerApp)(this.app)?Promise.reject(vt(this)):this.queue((0,R.A)(function*(){yield h.assertedPersistence.setPersistence(oe(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var h=this;return(0,R.A)(function*(){h._getPasswordPolicyInternal()||(yield h._updatePasswordPolicy());const m=h._getPasswordPolicyInternal();return m.schemaVersion!==h.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(h._errorFactory.create("unsupported-password-policy-schema-version",{})):m.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,R.A)(function*(){const h=yield function j1(g){return Ep.apply(this,arguments)}(u),m=new Fi(h);null===u.tenantId?u._projectPasswordPolicy=m:u._tenantPasswordPolicies[u.tenantId]=m})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new M.FA("auth","Firebase",u())}onAuthStateChanged(u,h,m){return this.registerStateListener(this.authStateSubscription,u,h,m)}beforeAuthStateChanged(u,h){return this.beforeStateQueue.pushCallback(u,h)}onIdTokenChanged(u,h,m){return this.registerStateListener(this.idTokenSubscription,u,h,m)}authStateReady(){return new Promise((u,h)=>{if(this.currentUser)u();else{const m=this.onAuthStateChanged(()=>{m(),u()},h)}})}revokeAccessToken(u){var h=this;return(0,R.A)(function*(){if(h.currentUser){const m=yield h.currentUser.getIdToken(),w={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:m};null!=h.tenantId&&(w.tenantId=h.tenantId),yield function le(g,u){return C.apply(this,arguments)}(h,w)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,h){var m=this;return(0,R.A)(function*(){const w=yield m.getOrInitRedirectPersistenceManager(h);return null===u?w.removeCurrentUser():w.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var h=this;return(0,R.A)(function*(){if(!h.redirectPersistenceManager){const m=u&&oe(u)||h._popupRedirectResolver;K(m,h,"argument-error"),h.redirectPersistenceManager=yield Ve.create(h,[oe(m._redirectPersistence)],"redirectUser"),h.redirectUser=yield h.redirectPersistenceManager.getCurrentUser()}return h.redirectPersistenceManager})()}_redirectUserForId(u){var h=this;return(0,R.A)(function*(){var m,w;return h._isInitialized&&(yield h.queue((0,R.A)(function*(){}))),(null===(m=h._currentUser)||void 0===m?void 0:m._redirectEventId)===u?h._currentUser:(null===(w=h.redirectUser)||void 0===w?void 0:w._redirectEventId)===u?h.redirectUser:null})()}_persistUserIfCurrent(u){var h=this;return(0,R.A)(function*(){if(u===h.currentUser)return h.queue((0,R.A)(function*(){return h.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const m=null!==(h=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==m&&(this.lastNotifiedUid=m,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,h,m,w){if(this._deleted)return()=>{};const A="function"==typeof h?h:h.next.bind(h);let L=!1;const Z=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(Z,this,"internal-error"),Z.then(()=>{L||A(this.currentUser)}),"function"==typeof h){const de=u.addObserver(h,m,w);return()=>{L=!0,de()}}{const de=u.addObserver(h);return()=>{L=!0,de()}}}directlySetCurrentUser(u){var h=this;return(0,R.A)(function*(){h.currentUser&&h.currentUser!==u&&h._currentUser._stopProactiveRefresh(),u&&h.isProactiveRefreshEnabled&&u._startProactiveRefresh(),h.currentUser=u,u?yield h.assertedPersistence.setCurrentUser(u):yield h.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=qt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,R.A)(function*(){var h;const m={"X-Client-Version":u.clientVersion};u.app.options.appId&&(m["X-Firebase-gmpid"]=u.app.options.appId);const w=yield null===(h=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader();w&&(m["X-Firebase-Client"]=w);const A=yield u._getAppCheckToken();return A&&(m["X-Firebase-AppCheck"]=A),m})()}_getAppCheckToken(){var u=this;return(0,R.A)(function*(){var h;const m=yield null===(h=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken();return m?.error&&function Gn(g,...u){qe.logLevel<=Fe.$b.WARN&&qe.warn(`Auth (${Ae.SDK_VERSION}): ${g}`,...u)}(`Error while retrieving App Check token: ${m.error}`),m?.token})()}}function Vn(g){return(0,M.Ku)(g)}class hT{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,M.tD)(h=>this.observer=h)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ms={loadJS:()=>(0,R.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yy(g){return ms.loadJS(g)}function pT(g){return`__${g}${Math.floor(1e6*Math.random())}`}class Li{constructor(u){this.type="recaptcha-enterprise",this.auth=Vn(u)}verify(u="verify",h=!1){var m=this;return(0,R.A)(function*(){function A(){return A=(0,R.A)(function*(Z){if(!h){if(null==Z.tenantId&&null!=Z._agentRecaptchaConfig)return Z._agentRecaptchaConfig.siteKey;if(null!=Z.tenantId&&void 0!==Z._tenantRecaptchaConfigs[Z.tenantId])return Z._tenantRecaptchaConfigs[Z.tenantId].siteKey}return new Promise(function(){var de=(0,R.A)(function*(Ne,ze){jt(Z,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(_t=>{if(void 0!==_t.recaptchaKey){const oi=new qn(_t);return null==Z.tenantId?Z._agentRecaptchaConfig=oi:Z._tenantRecaptchaConfigs[Z.tenantId]=oi,Ne(oi.siteKey)}ze(new Error("recaptcha Enterprise site key undefined"))}).catch(_t=>{ze(_t)})});return function(Ne,ze){return de.apply(this,arguments)}}())}),A.apply(this,arguments)}function L(Z,de,Ne){const ze=window.grecaptcha;Lt(ze)?ze.enterprise.ready(()=>{ze.enterprise.execute(Z,{action:u}).then(_t=>{de(_t)}).catch(()=>{de("NO_RECAPTCHA")})}):Ne(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Z,de)=>{(function w(Z){return A.apply(this,arguments)})(m.auth).then(Ne=>{if(!h&&Lt(window.grecaptcha))L(Ne,Z,de);else{if(typeof window>"u")return void de(new Error("RecaptchaVerifier is only supported in browser"));let ze=function W1(){return ms.recaptchaEnterpriseScript}();0!==ze.length&&(ze+=Ne),Yy(ze).then(()=>{L(Ne,Z,de)}).catch(_t=>{de(_t)})}}).catch(Ne=>{de(Ne)})})})()}}function et(g,u,h){return Jy.apply(this,arguments)}function Jy(){return(Jy=(0,R.A)(function*(g,u,h,m=!1){const w=new Li(g);let A;try{A=yield w.verify(h)}catch{A=yield w.verify(h,!0)}const L=Object.assign({},u);return Object.assign(L,m?{captchaResp:A}:{captchaResponse:A}),Object.assign(L,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(L,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),L})).apply(this,arguments)}function wd(g,u,h,m){return Xy.apply(this,arguments)}function Xy(){return Xy=(0,R.A)(function*(g,u,h,m){var w;if(null!==(w=g._getRecaptchaConfig())&&void 0!==w&&w.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const A=yield et(g,u,h,"getOobCode"===h);return m(g,A)}return m(g,u).catch(function(){var A=(0,R.A)(function*(L){if("auth/missing-recaptcha-token"===L.code){console.log(`${h} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Z=yield et(g,u,h,"getOobCode"===h);return m(g,Z)}return Promise.reject(L)});return function(L){return A.apply(this,arguments)}}())}),Xy.apply(this,arguments)}function ev(g,u,h){const m=Vn(g);K(m._canInitEmulator,m,"emulator-config-failed"),K(/^https?:\/\//.test(u),m,"invalid-emulator-scheme");const w=!!h?.disableWarnings,A=wp(u),{host:L,port:Z}=function mT(g){const u=wp(g),h=/(\/\/)?([^?#/]+)/.exec(g.substr(u.length));if(!h)return{host:"",port:null};const m=h[2].split("@").pop()||"",w=/^(\[[^\]]+\])(:|$)/.exec(m);if(w){const A=w[1];return{host:A,port:Nc(m.substr(A.length+1))}}{const[A,L]=m.split(":");return{host:A,port:Nc(L)}}}(u);m.config.emulator={url:`${A}//${L}${null===Z?"":`:${Z}`}/`},m.settings.appVerificationDisabledForTesting=!0,m.emulatorConfig=Object.freeze({host:L,port:Z,protocol:A.replace(":",""),options:Object.freeze({disableWarnings:w})}),w||function Td(){function g(){const u=document.createElement("p"),h=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}function wp(g){const u=g.indexOf(":");return u<0?"":g.substr(0,u+1)}function Nc(g){if(!g)return null;const u=Number(g);return isNaN(u)?null:u}class No{constructor(u,h){this.providerId=u,this.signInMethod=h}toJSON(){return je("not implemented")}_getIdTokenResponse(u){return je("not implemented")}_linkToIdToken(u,h){return je("not implemented")}_getReauthenticationResolver(u){return je("not implemented")}}function Cp(g,u){return Tp.apply(this,arguments)}function Tp(){return(Tp=(0,R.A)(function*(g,u){return $(g,"POST","/v1/accounts:resetPassword",Q(g,u))})).apply(this,arguments)}function Oc(){return(Oc=(0,R.A)(function*(g,u){return $(g,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function tv(g,u){return jr.apply(this,arguments)}function jr(){return(jr=(0,R.A)(function*(g,u){return $(g,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function rv(){return(rv=(0,R.A)(function*(g,u){return $(g,"POST","/v1/accounts:update",Q(g,u))})).apply(this,arguments)}function dn(g,u){return iv.apply(this,arguments)}function iv(){return(iv=(0,R.A)(function*(g,u){return Qe(g,"POST","/v1/accounts:signInWithPassword",Q(g,u))})).apply(this,arguments)}function bp(g,u){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,R.A)(function*(g,u){return $(g,"POST","/v1/accounts:sendOobCode",Q(g,u))})).apply(this,arguments)}function kc(){return(kc=(0,R.A)(function*(g,u){return bp(g,u)})).apply(this,arguments)}function sv(g,u){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,R.A)(function*(g,u){return bp(g,u)})).apply(this,arguments)}function _T(g,u){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,R.A)(function*(g,u){return bp(g,u)})).apply(this,arguments)}function ov(){return(ov=(0,R.A)(function*(g,u){return bp(g,u)})).apply(this,arguments)}function av(){return(av=(0,R.A)(function*(g,u){return Qe(g,"POST","/v1/accounts:signInWithEmailLink",Q(g,u))})).apply(this,arguments)}function wa(){return(wa=(0,R.A)(function*(g,u){return Qe(g,"POST","/v1/accounts:signInWithEmailLink",Q(g,u))})).apply(this,arguments)}class Ca extends No{constructor(u,h,m,w=null){super("password",m),this._email=u,this._password=h,this._tenantId=w}static _fromEmailAndPassword(u,h){return new Ca(u,h,"password")}static _fromEmailAndCode(u,h,m=null){return new Ca(u,h,"emailLink",m)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const h="string"==typeof u?JSON.parse(u):u;if(h?.email&&h?.password){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}_getIdTokenResponse(u){var h=this;return(0,R.A)(function*(){switch(h.signInMethod){case"password":return wd(u,{returnSecureToken:!0,email:h._email,password:h._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",dn);case"emailLink":return function K1(g,u){return av.apply(this,arguments)}(u,{email:h._email,oobCode:h._password});default:Wt(u,"internal-error")}})()}_linkToIdToken(u,h){var m=this;return(0,R.A)(function*(){switch(m.signInMethod){case"password":return wd(u,{idToken:h,returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tv);case"emailLink":return function Q1(g,u){return wa.apply(this,arguments)}(u,{idToken:h,email:m._email,oobCode:m._password});default:Wt(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function rs(g,u){return Sp.apply(this,arguments)}function Sp(){return(Sp=(0,R.A)(function*(g,u){return Qe(g,"POST","/v1/accounts:signInWithIdp",Q(g,u))})).apply(this,arguments)}class Bs extends No{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const h=new Bs(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(h.idToken=u.idToken),u.accessToken&&(h.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(h.nonce=u.nonce),u.pendingToken&&(h.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(h.accessToken=u.oauthToken,h.secret=u.oauthTokenSecret):Wt("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const h="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:w}=h,A=(0,Ot.Tt)(h,["providerId","signInMethod"]);if(!m||!w)return null;const L=new Bs(m,w);return L.idToken=A.idToken||void 0,L.accessToken=A.accessToken||void 0,L.secret=A.secret,L.nonce=A.nonce,L.pendingToken=A.pendingToken||null,L}_getIdTokenResponse(u){return rs(u,this.buildRequest())}_linkToIdToken(u,h){const m=this.buildRequest();return m.idToken=h,rs(u,m)}_getReauthenticationResolver(u){const h=this.buildRequest();return h.autoCreate=!1,rs(u,h)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),u.postBody=(0,M.Am)(h)}return u}}function Oo(){return(Oo=(0,R.A)(function*(g,u){return $(g,"POST","/v1/accounts:sendVerificationCode",Q(g,u))})).apply(this,arguments)}function js(){return(js=(0,R.A)(function*(g,u){return Qe(g,"POST","/v1/accounts:signInWithPhoneNumber",Q(g,u))})).apply(this,arguments)}function we(){return(we=(0,R.A)(function*(g,u){const h=yield Qe(g,"POST","/v1/accounts:signInWithPhoneNumber",Q(g,u));if(h.temporaryProof)throw yr(g,"account-exists-with-different-credential",h);return h})).apply(this,arguments)}const cv={USER_NOT_FOUND:"user-not-found"};function hl(){return(hl=(0,R.A)(function*(g,u){return Qe(g,"POST","/v1/accounts:signInWithPhoneNumber",Q(g,Object.assign(Object.assign({},u),{operation:"REAUTH"})),cv)})).apply(this,arguments)}class lo extends No{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,h){return new lo({verificationId:u,verificationCode:h})}static _fromTokenResponse(u,h){return new lo({phoneNumber:u,temporaryProof:h})}_getIdTokenResponse(u){return function vT(g,u){return js.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,h){return function ET(g,u){return we.apply(this,arguments)}(u,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function Oe(g,u){return hl.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:h,verificationId:m,verificationCode:w}=this.params;return u&&h?{temporaryProof:u,phoneNumber:h}:{sessionInfo:m,code:w}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:h,verificationCode:m,phoneNumber:w,temporaryProof:A}=u;return m||h||w||A?new lo({verificationId:h,verificationCode:m,phoneNumber:w,temporaryProof:A}):null}}class Uc{constructor(u){var h,m,w,A,L,Z;const de=(0,M.I9)((0,M.hp)(u)),Ne=null!==(h=de.apiKey)&&void 0!==h?h:null,ze=null!==(m=de.oobCode)&&void 0!==m?m:null,_t=function Vc(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(w=de.mode)&&void 0!==w?w:null);K(Ne&&ze&&_t,"argument-error"),this.apiKey=Ne,this.operation=_t,this.code=ze,this.continueUrl=null!==(A=de.continueUrl)&&void 0!==A?A:null,this.languageCode=null!==(L=de.languageCode)&&void 0!==L?L:null,this.tenantId=null!==(Z=de.tenantId)&&void 0!==Z?Z:null}static parseLink(u){const h=function IT(g){const u=(0,M.I9)((0,M.hp)(g)).link,h=u?(0,M.I9)((0,M.hp)(u)).deep_link_id:null,m=(0,M.I9)((0,M.hp)(g)).deep_link_id;return(m?(0,M.I9)((0,M.hp)(m)).link:null)||m||h||u||g}(u);try{return new Uc(h)}catch{return null}}}let _s=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(h,m){return Ca._fromEmailAndPassword(h,m)}static credentialWithLink(h,m){const w=Uc.parseLink(m);return K(w,"argument-error"),Ca._fromEmailAndCode(h,w.code,w.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class is{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class $r extends is{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class _i extends $r{static credentialFromJSON(u){const h="string"==typeof u?JSON.parse(u):u;return K("providerId"in h&&"signInMethod"in h,"argument-error"),Bs._fromParams(h)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return K(u.idToken||u.accessToken,"argument-error"),Bs._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return _i.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return _i.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:h,oauthAccessToken:m,oauthTokenSecret:w,pendingToken:A,nonce:L,providerId:Z}=u;if(!m&&!w&&!h&&!A||!Z)return null;try{return new _i(Z)._credential({idToken:h,accessToken:m,nonce:L,pendingToken:A})}catch{return null}}}let Ht=(()=>{class g extends $r{constructor(){super("facebook.com")}static credential(h){return Bs._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return g.credential(h.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),bd=(()=>{class g extends $r{constructor(){super("google.com"),this.addScope("profile")}static credential(h,m){return Bs._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:m})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:m,oauthAccessToken:w}=h;if(!m&&!w)return null;try{return g.credential(m,w)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),Dp=(()=>{class g extends $r{constructor(){super("github.com")}static credential(h){return Bs._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return g.credential(h.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class Ta extends No{constructor(u,h){super(u,u),this.pendingToken=h}_getIdTokenResponse(u){return rs(u,this.buildRequest())}_linkToIdToken(u,h){const m=this.buildRequest();return m.idToken=h,rs(u,m)}_getReauthenticationResolver(u){const h=this.buildRequest();return h.autoCreate=!1,rs(u,h)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const h="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:w,pendingToken:A}=h;return m&&w&&A&&m===w?new Ta(m,A):null}static _create(u,h){return new Ta(u,h)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ko extends is{constructor(u){K(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return ko.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return ko.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const h=Ta.fromJSON(u);return K(h,"argument-error"),h}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:h,providerId:m}=u;if(!h||!m)return null;try{return Ta._create(m,h)}catch{return null}}}let uv=(()=>{class g extends $r{constructor(){super("twitter.com")}static credential(h,m){return Bs._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:m})}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthAccessToken:m,oauthTokenSecret:w}=h;if(!m||!w)return null;try{return g.credential(m,w)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function Rp(g,u){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,R.A)(function*(g,u){return Qe(g,"POST","/v1/accounts:signUp",Q(g,u))})).apply(this,arguments)}class Vi{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,h,m,w=!1){return(0,R.A)(function*(){const A=yield x._fromIdTokenResponse(u,m,w),L=Pp(m);return new Vi({user:A,providerId:L,_tokenResponse:m,operationType:h})})()}static _forOperation(u,h,m){return(0,R.A)(function*(){yield u._updateTokensIfNecessary(m,!0);const w=Pp(m);return new Vi({user:u,providerId:w,_tokenResponse:m,operationType:h})})()}}function Pp(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function jc(g){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,R.A)(function*(g){var u;if((0,Ae._isFirebaseServerApp)(g.app))return Promise.reject(vt(g));const h=Vn(g);if(yield h._initializationPromise,null!==(u=h.currentUser)&&void 0!==u&&u.isAnonymous)return new Vi({user:h.currentUser,providerId:null,operationType:"signIn"});const m=yield Rp(h,{returnSecureToken:!0}),w=yield Vi._fromIdTokenResponse(h,"signIn",m,!0);return yield h._updateCurrentUser(w.user),w})).apply(this,arguments)}class $c extends M.g{constructor(u,h,m,w){var A;super(h.code,h.message),this.operationType=m,this.user=w,Object.setPrototypeOf(this,$c.prototype),this.customData={appName:u.name,tenantId:null!==(A=u.tenantId)&&void 0!==A?A:void 0,_serverResponse:h.customData._serverResponse,operationType:m}}static _fromErrorAndOperation(u,h,m,w){return new $c(u,h,m,w)}}function dv(g,u,h,m){return("reauthenticate"===u?h._getReauthenticationResolver(g):h._getIdTokenResponse(g)).catch(A=>{throw"auth/multi-factor-auth-required"===A.code?$c._fromErrorAndOperation(g,A,u,m):A})}function Mp(g){return new Set(g.map(({providerId:u})=>u).filter(u=>!!u))}function wT(g,u){return Np.apply(this,arguments)}function Np(){return Np=(0,R.A)(function*(g,u){const h=(0,M.Ku)(g);yield Hc(!0,h,u);const{providerUserInfo:m}=yield function Ls(g,u){return gi.apply(this,arguments)}(h.auth,{idToken:yield h.getIdToken(),deleteProvider:[u]}),w=Mp(m||[]);return h.providerData=h.providerData.filter(A=>w.has(A.providerId)),w.has("phone")||(h.phoneNumber=null),yield h.auth._persistUserIfCurrent(h),h}),Np.apply(this,arguments)}function Ui(g,u){return Op.apply(this,arguments)}function Op(){return(Op=(0,R.A)(function*(g,u,h=!1){const m=yield Xt(g,u._linkToIdToken(g.auth,yield g.getIdToken()),h);return Vi._forOperation(g,"link",m)})).apply(this,arguments)}function Hc(g,u,h){return kp.apply(this,arguments)}function kp(){return(kp=(0,R.A)(function*(g,u,h){yield rr(u);const w=!1===g?"provider-already-linked":"no-such-provider";K(Mp(u.providerData).has(h)===g,u.auth,w)})).apply(this,arguments)}function hv(g,u){return Fp.apply(this,arguments)}function Fp(){return(Fp=(0,R.A)(function*(g,u,h=!1){const{auth:m}=g;if((0,Ae._isFirebaseServerApp)(m.app))return Promise.reject(vt(m));const w="reauthenticate";try{const A=yield Xt(g,dv(m,w,u,g),h);K(A.idToken,m,"internal-error");const L=io(A.idToken);K(L,m,"internal-error");const{sub:Z}=L;return K(g.uid===Z,m,"user-mismatch"),Vi._forOperation(g,w,A)}catch(A){throw"auth/user-not-found"===A?.code&&Wt(m,"user-mismatch"),A}})).apply(this,arguments)}function fv(g,u){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,R.A)(function*(g,u,h=!1){if((0,Ae._isFirebaseServerApp)(g.app))return Promise.reject(vt(g));const m="signIn",w=yield dv(g,m,u),A=yield Vi._fromIdTokenResponse(g,m,w);return h||(yield g._updateCurrentUser(A.user)),A})).apply(this,arguments)}function Dd(g,u){return Lp.apply(this,arguments)}function Lp(){return(Lp=(0,R.A)(function*(g,u){return fv(Vn(g),u)})).apply(this,arguments)}function pv(g,u){return ni.apply(this,arguments)}function ni(){return(ni=(0,R.A)(function*(g,u){const h=(0,M.Ku)(g);return yield Hc(!1,h,u.providerId),Ui(h,u)})).apply(this,arguments)}function gv(g,u){return Vp.apply(this,arguments)}function Vp(){return(Vp=(0,R.A)(function*(g,u){return hv((0,M.Ku)(g),u)})).apply(this,arguments)}function ri(){return(ri=(0,R.A)(function*(g,u){return Qe(g,"POST","/v1/accounts:signInWithCustomToken",Q(g,u))})).apply(this,arguments)}function TT(g,u){return xd.apply(this,arguments)}function xd(){return xd=(0,R.A)(function*(g,u){if((0,Ae._isFirebaseServerApp)(g.app))return Promise.reject(vt(g));const h=Vn(g),m=yield function CT(g,u){return ri.apply(this,arguments)}(h,{token:u,returnSecureToken:!0}),w=yield Vi._fromIdTokenResponse(h,"signIn",m);return yield h._updateCurrentUser(w.user),w}),xd.apply(this,arguments)}class Ye{constructor(u,h){this.factorId=u,this.uid=h.mfaEnrollmentId,this.enrollmentTime=new Date(h.enrolledAt).toUTCString(),this.displayName=h.displayName}static _fromServerResponse(u,h){return"phoneInfo"in h?Hr._fromServerResponse(u,h):"totpInfo"in h?xt._fromServerResponse(u,h):Wt(u,"internal-error")}}class Hr extends Ye{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,h){return new Hr(h)}}class xt extends Ye{constructor(u){super("totp",u)}static _fromServerResponse(u,h){return new xt(h)}}function cr(g,u,h){var m;K((null===(m=h.url)||void 0===m?void 0:m.length)>0,g,"invalid-continue-uri"),K(typeof h.dynamicLinkDomain>"u"||h.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),u.continueUrl=h.url,u.dynamicLinkDomain=h.dynamicLinkDomain,u.canHandleCodeInApp=h.handleCodeInApp,h.iOS&&(K(h.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),u.iOSBundleId=h.iOS.bundleId),h.android&&(K(h.android.packageName.length>0,g,"missing-android-pkg-name"),u.androidInstallApp=h.android.installApp,u.androidMinimumVersionCode=h.android.minimumVersion,u.androidPackageName=h.android.packageName)}function Rr(g){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,R.A)(function*(g){const u=Vn(g);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function Bi(g,u,h){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,R.A)(function*(g,u,h){const m=Vn(g),w={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};h&&cr(m,w,h),yield wd(m,w,"getOobCode",sv)})).apply(this,arguments)}function mv(g,u,h){return fl.apply(this,arguments)}function fl(){return fl=(0,R.A)(function*(g,u,h){yield Cp((0,M.Ku)(g),{oobCode:u,newPassword:h}).catch(function(){var m=(0,R.A)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&Rr(g),w});return function(w){return m.apply(this,arguments)}}())}),fl.apply(this,arguments)}function bT(g,u){return Up.apply(this,arguments)}function Up(){return Up=(0,R.A)(function*(g,u){yield function nv(g,u){return rv.apply(this,arguments)}((0,M.Ku)(g),{oobCode:u})}),Up.apply(this,arguments)}function Un(g,u){return Me.apply(this,arguments)}function Me(){return(Me=(0,R.A)(function*(g,u){const h=(0,M.Ku)(g),m=yield Cp(h,{oobCode:u}),w=m.requestType;switch(K(w,h,"internal-error"),w){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":K(m.newEmail,h,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":K(m.mfaInfo,h,"internal-error");default:K(m.email,h,"internal-error")}let A=null;return m.mfaInfo&&(A=Ye._fromServerResponse(Vn(h),m.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.newEmail:m.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.email:m.newEmail)||null,multiFactorInfo:A},operation:w}})).apply(this,arguments)}function lt(g,u){return hn.apply(this,arguments)}function hn(){return(hn=(0,R.A)(function*(g,u){const{data:h}=yield Un((0,M.Ku)(g),u);return h.email})).apply(this,arguments)}function ys(g,u,h){return ba.apply(this,arguments)}function ba(){return(ba=(0,R.A)(function*(g,u,h){if((0,Ae._isFirebaseServerApp)(g.app))return Promise.reject(vt(g));const m=Vn(g),L=yield wd(m,{returnSecureToken:!0,email:u,password:h,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Rp).catch(de=>{throw"auth/password-does-not-meet-requirements"===de.code&&Rr(g),de}),Z=yield Vi._fromIdTokenResponse(m,"signIn",L);return yield m._updateCurrentUser(Z.user),Z})).apply(this,arguments)}function zr(g,u,h){return(0,Ae._isFirebaseServerApp)(g.app)?Promise.reject(vt(g)):Dd((0,M.Ku)(g),_s.credential(u,h)).catch(function(){var m=(0,R.A)(function*(w){throw"auth/password-does-not-meet-requirements"===w.code&&Rr(g),w});return function(w){return m.apply(this,arguments)}}())}function pl(g,u,h){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,R.A)(function*(g,u,h){const m=Vn(g),w={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function A(L,Z){K(Z.handleCodeInApp,m,"argument-error"),Z&&cr(m,L,Z)})(w,h),yield wd(m,w,"getOobCode",_T)})).apply(this,arguments)}function Lo(g,u){const h=Uc.parseLink(u);return"EMAIL_SIGNIN"===h?.operation}function gl(g,u,h){return nt.apply(this,arguments)}function nt(){return(nt=(0,R.A)(function*(g,u,h){if((0,Ae._isFirebaseServerApp)(g.app))return Promise.reject(vt(g));const m=(0,M.Ku)(g),w=_s.credentialWithLink(u,h||St());return K(w._tenantId===(m.tenantId||null),m,"tenant-id-mismatch"),Dd(m,w)})).apply(this,arguments)}function Pd(){return(Pd=(0,R.A)(function*(g,u){return $(g,"POST","/v1/accounts:createAuthUri",Q(g,u))})).apply(this,arguments)}function ml(g,u){return jn.apply(this,arguments)}function jn(){return jn=(0,R.A)(function*(g,u){const m={identifier:u,continueUri:kn()?St():"http://localhost"},{signinMethods:w}=yield function zc(g,u){return Pd.apply(this,arguments)}((0,M.Ku)(g),m);return w||[]}),jn.apply(this,arguments)}function Wc(g,u){return Vo.apply(this,arguments)}function Vo(){return Vo=(0,R.A)(function*(g,u){const h=(0,M.Ku)(g),w={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};u&&cr(h.auth,w,u);const{email:A}=yield function Ap(g,u){return kc.apply(this,arguments)}(h.auth,w);A!==g.email&&(yield g.reload())}),Vo.apply(this,arguments)}function $s(g,u,h){return Aa.apply(this,arguments)}function Aa(){return Aa=(0,R.A)(function*(g,u,h){const m=(0,M.Ku)(g),A={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:u};h&&cr(m.auth,A,h);const{email:L}=yield function q1(g,u){return ov.apply(this,arguments)}(m.auth,A);L!==g.email&&(yield g.reload())}),Aa.apply(this,arguments)}function Hs(){return(Hs=(0,R.A)(function*(g,u){return $(g,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function uo(g,u){return Sa.apply(this,arguments)}function Sa(){return Sa=(0,R.A)(function*(g,{displayName:u,photoURL:h}){if(void 0===u&&void 0===h)return;const m=(0,M.Ku)(g),A={idToken:yield m.getIdToken(),displayName:u,photoUrl:h,returnSecureToken:!0},L=yield Xt(m,function _v(g,u){return Hs.apply(this,arguments)}(m.auth,A));m.displayName=L.displayName||null,m.photoURL=L.photoUrl||null;const Z=m.providerData.find(({providerId:de})=>"password"===de);Z&&(Z.displayName=m.displayName,Z.photoURL=m.photoURL),yield m._updateTokensIfNecessary(L)}),Sa.apply(this,arguments)}function Gc(g,u){const h=(0,M.Ku)(g);return(0,Ae._isFirebaseServerApp)(h.auth.app)?Promise.reject(vt(h.auth)):AT(h,u,null)}function It(g,u){return AT((0,M.Ku)(g),null,u)}function AT(g,u,h){return qc.apply(this,arguments)}function qc(){return qc=(0,R.A)(function*(g,u,h){const{auth:m}=g,A={idToken:yield g.getIdToken(),returnSecureToken:!0};u&&(A.email=u),h&&(A.password=h);const L=yield Xt(g,function Et(g,u){return Oc.apply(this,arguments)}(m,A));yield g._updateTokensIfNecessary(L,!0)}),qc.apply(this,arguments)}class ii{constructor(u,h,m={}){this.isNewUser=u,this.providerId=h,this.profile=m}}class Kc extends ii{constructor(u,h,m,w){super(u,h,m),this.username=w}}class _l extends ii{constructor(u,h){super(u,"facebook.com",h)}}class Qc extends Kc{constructor(u,h){super(u,"github.com",h,"string"==typeof h?.login?h?.login:null)}}class Pr extends ii{constructor(u,h){super(u,"google.com",h)}}class J1 extends Kc{constructor(u,h,m){super(u,"twitter.com",h,m)}}function yi(g){const{user:u,_tokenResponse:h}=g;return u.isAnonymous&&!h?{providerId:null,isNewUser:!1,profile:null}:function yv(g){var u,h;if(!g)return null;const{providerId:m}=g,w=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},A=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!m&&g?.idToken){const L=null===(h=null===(u=io(g.idToken))||void 0===u?void 0:u.firebase)||void 0===h?void 0:h.sign_in_provider;if(L)return new ii(A,"anonymous"!==L&&"custom"!==L?L:null)}if(!m)return null;switch(m){case"facebook.com":return new _l(A,w);case"github.com":return new Qc(A,w);case"google.com":return new Pr(A,w);case"twitter.com":return new J1(A,w,g.screenName||null);case"custom":case"anonymous":return new ii(A,null);default:return new ii(A,m,w)}}(h)}class El{constructor(u,h,m){this.type=u,this.credential=h,this.user=m}static _fromIdtoken(u,h){return new El("enroll",u,h)}static _fromMfaPendingCredential(u){return new El("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var h,m;if(u?.multiFactorSession){if(null!==(h=u.multiFactorSession)&&void 0!==h&&h.pendingCredential)return El._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(m=u.multiFactorSession)&&void 0!==m&&m.idToken)return El._fromIdtoken(u.multiFactorSession.idToken)}return null}}class Iv{constructor(u,h,m){this.session=u,this.hints=h,this.signInResolver=m}static _fromError(u,h){const m=Vn(u),w=h.customData._serverResponse,A=(w.mfaInfo||[]).map(Z=>Ye._fromServerResponse(m,Z));K(w.mfaPendingCredential,m,"internal-error");const L=El._fromMfaPendingCredential(w.mfaPendingCredential);return new Iv(L,A,function(){var Z=(0,R.A)(function*(de){const Ne=yield de._process(m,L);delete w.mfaInfo,delete w.mfaPendingCredential;const ze=Object.assign(Object.assign({},w),{idToken:Ne.idToken,refreshToken:Ne.refreshToken});switch(h.operationType){case"signIn":const _t=yield Vi._fromIdTokenResponse(m,h.operationType,ze);return yield m._updateCurrentUser(_t.user),_t;case"reauthenticate":return K(h.user,m,"internal-error"),Vi._forOperation(h.user,h.operationType,ze);default:Wt(m,"internal-error")}});return function(de){return Z.apply(this,arguments)}}())}resolveSignIn(u){var h=this;return(0,R.A)(function*(){return h.signInResolver(u)})()}}function nO(g,u){var h;const m=(0,M.Ku)(g),w=u;return K(u.customData.operationType,m,"argument-error"),K(null===(h=w.customData._serverResponse)||void 0===h?void 0:h.mfaPendingCredential,m,"argument-error"),Iv._fromError(m,w)}class wv{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(h=>{h.mfaInfo&&(this.enrolledFactors=h.mfaInfo.map(m=>Ye._fromServerResponse(u.auth,m)))})}static _fromUser(u){return new wv(u)}getSession(){var u=this;return(0,R.A)(function*(){return El._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,h){var m=this;return(0,R.A)(function*(){const w=u,A=yield m.getSession(),L=yield Xt(m.user,w._process(m.user.auth,A,h));return yield m.user._updateTokensIfNecessary(L),m.user.reload()})()}unenroll(u){var h=this;return(0,R.A)(function*(){const m="string"==typeof u?u:u.uid,w=yield h.user.getIdToken();try{const A=yield Xt(h.user,function oO(g,u){return $(g,"POST","/v2/accounts/mfaEnrollment:withdraw",Q(g,u))}(h.user.auth,{idToken:w,mfaEnrollmentId:m}));h.enrolledFactors=h.enrolledFactors.filter(({uid:L})=>L!==m),yield h.user._updateTokensIfNecessary(A),yield h.user.reload()}catch(A){throw A}})()}}const Cv=new WeakMap;function Tv(g){const u=(0,M.Ku)(g);return Cv.has(u)||Cv.set(u,wv._fromUser(u)),Cv.get(u)}const Yc="__sak";class ST{constructor(u,h){this.storageRetriever=u,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(Yc,"1"),this.storage.removeItem(Yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,h){return this.storage.setItem(u,JSON.stringify(h)),Promise.resolve()}_get(u){const h=this.storage.getItem(u);return Promise.resolve(h?JSON.parse(h):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const ho=(()=>{class g extends ST{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,m)=>this.onStorageEvent(h,m),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=st(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(const m of Object.keys(this.listeners)){const w=this.storage.getItem(m),A=this.localCache[m];w!==A&&h(m,A,w)}}onStorageEvent(h,m=!1){if(!h.key)return void this.forAllChangedKeys((Z,de,Ne)=>{this.notifyListeners(Z,Ne)});const w=h.key;m?this.detachListener():this.stopPolling();const A=()=>{const Z=this.storage.getItem(w);!m&&this.localCache[w]===Z||this.notifyListeners(w,Z)},L=this.storage.getItem(w);!function Id(){return(0,M.lT)()&&10===document.documentMode}()||L===h.newValue||h.newValue===h.oldValue?A():setTimeout(A,10)}notifyListeners(h,m){this.localCache[h]=m;const w=this.listeners[h];if(w)for(const A of Array.from(w))A(m&&JSON.parse(m))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,m,w)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:m,newValue:w}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,m){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(m)}_removeListener(h,m){this.listeners[h]&&(this.listeners[h].delete(m),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(h,m){var w=()=>super._set,A=this;return(0,R.A)(function*(){yield w().call(A,h,m),A.localCache[h]=JSON.stringify(m)})()}_get(h){var m=()=>super._get,w=this;return(0,R.A)(function*(){const A=yield m().call(w,h);return w.localCache[h]=JSON.stringify(A),A})()}_remove(h){var m=()=>super._remove,w=this;return(0,R.A)(function*(){yield m().call(w,h),delete w.localCache[h]})()}}return g.type="LOCAL",g})(),bv=(()=>{class g extends ST{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,m){}_removeListener(h,m){}}return g.type="SESSION",g})();let Md=(()=>{class g{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){const m=this.receivers.find(A=>A.isListeningto(h));if(m)return m;const w=new g(h);return this.receivers.push(w),w}isListeningto(h){return this.eventTarget===h}handleEvent(h){var m=this;return(0,R.A)(function*(){const w=h,{eventId:A,eventType:L,data:Z}=w.data,de=m.handlersMap[L];if(!de?.size)return;w.ports[0].postMessage({status:"ack",eventId:A,eventType:L});const Ne=Array.from(de).map(function(){var _t=(0,R.A)(function*(oi){return oi(w.origin,Z)});return function(oi){return _t.apply(this,arguments)}}()),ze=yield function Mr(g){return Promise.all(g.map(function(){var u=(0,R.A)(function*(h){try{return{fulfilled:!0,value:yield h}}catch(m){return{fulfilled:!1,reason:m}}});return function(h){return u.apply(this,arguments)}}()))}(Ne);w.ports[0].postMessage({status:"done",eventId:A,eventType:L,response:ze})})()}_subscribe(h,m){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(m)}_unsubscribe(h,m){this.handlersMap[h]&&m&&this.handlersMap[h].delete(m),(!m||0===this.handlersMap[h].size)&&delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function Wr(g="",u=10){let h="";for(let m=0;m<u;m++)h+=Math.floor(10*Math.random());return g+h}class Av{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,h,m=50){var w=this;return(0,R.A)(function*(){const A=typeof MessageChannel<"u"?new MessageChannel:null;if(!A)throw new Error("connection_unavailable");let L,Z;return new Promise((de,Ne)=>{const ze=Wr("",20);A.port1.start();const _t=setTimeout(()=>{Ne(new Error("unsupported_event"))},m);Z={messageChannel:A,onMessage(oi){const $o=oi;if($o.data.eventId===ze)switch($o.data.status){case"ack":clearTimeout(_t),L=setTimeout(()=>{Ne(new Error("timeout"))},3e3);break;case"done":clearTimeout(L),de($o.data.response);break;default:clearTimeout(_t),clearTimeout(L),Ne(new Error("invalid_response"))}}},w.handlers.add(Z),A.port1.addEventListener("message",Z.onMessage),w.target.postMessage({eventType:u,eventId:ze,data:h},[A.port2])}).finally(()=>{Z&&w.removeMessageHandler(Z)})})()}}function ir(){return window}function Nd(){return typeof ir().WorkerGlobalScope<"u"&&"function"==typeof ir().importScripts}function Od(){return(Od=(0,R.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const zp="firebaseLocalStorageDb",Jc="firebaseLocalStorage",Xc="fbase_key";class fo{constructor(u){this.request=u}toPromise(){return new Promise((u,h)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{h(this.request.error)})})}}function po(g,u){return g.transaction([Jc],u?"readwrite":"readonly").objectStore(Jc)}function Rv(){const g=indexedDB.open(zp,1);return new Promise((u,h)=>{g.addEventListener("error",()=>{h(g.error)}),g.addEventListener("upgradeneeded",()=>{const m=g.result;try{m.createObjectStore(Jc,{keyPath:Xc})}catch(w){h(w)}}),g.addEventListener("success",(0,R.A)(function*(){const m=g.result;m.objectStoreNames.contains(Jc)?u(m):(m.close(),yield function xv(){const g=indexedDB.deleteDatabase(zp);return new fo(g).toPromise()}(),u(yield Rv()))}))})}function DT(g,u,h){return Pv.apply(this,arguments)}function Pv(){return(Pv=(0,R.A)(function*(g,u,h){const m=po(g,!0).put({[Xc]:u,value:h});return new fo(m).toPromise()})).apply(this,arguments)}function Wp(){return(Wp=(0,R.A)(function*(g,u){const h=po(g,!1).get(u),m=yield new fo(h).toPromise();return void 0===m?null:m.value})).apply(this,arguments)}function RT(g,u){const h=po(g,!0).delete(u);return new fo(h).toPromise()}const kd=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var h=this;return(0,R.A)(function*(){return h.db||(h.db=yield Rv()),h.db})()}_withRetries(h){var m=this;return(0,R.A)(function*(){let w=0;for(;;)try{const A=yield m._openDb();return yield h(A)}catch(A){if(w++>3)throw A;m.db&&(m.db.close(),m.db=void 0)}})()}initializeServiceWorkerMessaging(){var h=this;return(0,R.A)(function*(){return Nd()?h.initializeReceiver():h.initializeSender()})()}initializeReceiver(){var h=this;return(0,R.A)(function*(){h.receiver=Md._getInstance(function Hp(){return Nd()?self:null}()),h.receiver._subscribe("keyChanged",function(){var m=(0,R.A)(function*(w,A){return{keyProcessed:(yield h._poll()).includes(A.key)}});return function(w,A){return m.apply(this,arguments)}}()),h.receiver._subscribe("ping",function(){var m=(0,R.A)(function*(w,A){return["keyChanged"]});return function(w,A){return m.apply(this,arguments)}}())})()}initializeSender(){var h=this;return(0,R.A)(function*(){var m,w;if(h.activeServiceWorker=yield function jp(){return Od.apply(this,arguments)}(),!h.activeServiceWorker)return;h.sender=new Av(h.activeServiceWorker);const A=yield h.sender._send("ping",{},800);A&&null!==(m=A[0])&&void 0!==m&&m.fulfilled&&null!==(w=A[0])&&void 0!==w&&w.value.includes("keyChanged")&&(h.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(h){var m=this;return(0,R.A)(function*(){if(m.sender&&m.activeServiceWorker&&function $p(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===m.activeServiceWorker)try{yield m.sender._send("keyChanged",{key:h},m.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,R.A)(function*(){try{if(!indexedDB)return!1;const h=yield Rv();return yield DT(h,Yc,"1"),yield RT(h,Yc),!0}catch{}return!1})()}_withPendingWrite(h){var m=this;return(0,R.A)(function*(){m.pendingWrites++;try{yield h()}finally{m.pendingWrites--}})()}_set(h,m){var w=this;return(0,R.A)(function*(){return w._withPendingWrite((0,R.A)(function*(){return yield w._withRetries(A=>DT(A,h,m)),w.localCache[h]=m,w.notifyServiceWorker(h)}))})()}_get(h){var m=this;return(0,R.A)(function*(){const w=yield m._withRetries(A=>function xT(g,u){return Wp.apply(this,arguments)}(A,h));return m.localCache[h]=w,w})()}_remove(h){var m=this;return(0,R.A)(function*(){return m._withPendingWrite((0,R.A)(function*(){return yield m._withRetries(w=>RT(w,h)),delete m.localCache[h],m.notifyServiceWorker(h)}))})()}_poll(){var h=this;return(0,R.A)(function*(){const m=yield h._withRetries(L=>{const Z=po(L,!1).getAll();return new fo(Z).toPromise()});if(!m)return[];if(0!==h.pendingWrites)return[];const w=[],A=new Set;if(0!==m.length)for(const{fbase_key:L,value:Z}of m)A.add(L),JSON.stringify(h.localCache[L])!==JSON.stringify(Z)&&(h.notifyListeners(L,Z),w.push(L));for(const L of Object.keys(h.localCache))h.localCache[L]&&!A.has(L)&&(h.notifyListeners(L,null),w.push(L));return w})()}notifyListeners(h,m){this.localCache[h]=m;const w=this.listeners[h];if(w)for(const A of Array.from(w))A(m)}startPolling(){var h=this;this.stopPolling(),this.pollTimer=setInterval((0,R.A)(function*(){return h._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,m){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(m)}_removeListener(h,m){this.listeners[h]&&(this.listeners[h].delete(m),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})(),Fd=1e12;class MT{constructor(u){this.auth=u,this.counter=Fd,this._widgets=new Map}render(u,h){const m=this.counter;return this._widgets.set(m,new NT(u,this.auth.name,h||{})),this.counter++,m}reset(u){var h;const m=u||Fd;null===(h=this._widgets.get(m))||void 0===h||h.delete(),this._widgets.delete(m)}getResponse(u){var h;return(null===(h=this._widgets.get(u||Fd))||void 0===h?void 0:h.getResponse())||""}execute(u){var h=this;return(0,R.A)(function*(){var m;return null===(m=h._widgets.get(u||Fd))||void 0===m||m.execute(),""})()}}class NT{constructor(u,h,m){this.params=m,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const w="string"==typeof u?document.getElementById(u):u;K(w,"argument-error",{appName:h}),this.container=w,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function kv(g){const u=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<g;m++)u.push(h.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":h}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,h)try{h()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qp=pT("rcb"),Fv=new _r(3e4,6e4);class OT{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=ir().grecaptcha)||void 0===u||!u.render)}load(u,h=""){return K(function hO(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(h),u,"argument-error"),this.shouldResolveImmediately(h)&&Ft(ir().grecaptcha)?Promise.resolve(ir().grecaptcha):new Promise((m,w)=>{const A=ir().setTimeout(()=>{w(Gt(u,"network-request-failed"))},Fv.get());ir()[qp]=()=>{ir().clearTimeout(A),delete ir()[qp];const Z=ir().grecaptcha;if(!Z||!Ft(Z))return void w(Gt(u,"internal-error"));const de=Z.render;Z.render=(Ne,ze)=>{const _t=de(Ne,ze);return this.counter++,_t},this.hostLanguage=h,m(Z)},Yy(`${function z1(){return ms.recaptchaV2Script}()}?${(0,M.Am)({onload:qp,render:"explicit",hl:h})}`).catch(()=>{clearTimeout(A),w(Gt(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var h;return!(null===(h=ir().grecaptcha)||void 0===h||!h.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kT{load(u){return(0,R.A)(function*(){return new MT(u)})()}clearedOneInstance(){}}const ji="recaptcha",Lv={theme:"light",type:"image"};class FT{constructor(u,h,m=Object.assign({},Lv)){this.parameters=m,this.type=ji,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Vn(u),this.isInvisible="invisible"===this.parameters.size,K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const w="string"==typeof h?document.getElementById(h):h;K(w,this.auth,"argument-error"),this.container=w,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kT:new OT,this.validateStartingState()}verify(){var u=this;return(0,R.A)(function*(){u.assertNotDestroyed();const h=yield u.render(),m=u.getAssertedRecaptcha();return m.getResponse(h)||new Promise(A=>{const L=Z=>{Z&&(u.tokenChangeListeners.delete(L),A(Z))};u.tokenChangeListeners.add(L),u.isInvisible&&m.execute(h)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){K(!this.parameters.sitekey,this.auth,"argument-error"),K(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),K(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return h=>{if(this.tokenChangeListeners.forEach(m=>m(h)),"function"==typeof u)u(h);else if("string"==typeof u){const m=ir()[u];"function"==typeof m&&m(h)}}}assertNotDestroyed(){K(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,R.A)(function*(){if(yield u.init(),!u.widgetId){let h=u.container;if(!u.isInvisible){const m=document.createElement("div");h.appendChild(m),h=m}u.widgetId=u.getAssertedRecaptcha().render(h,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,R.A)(function*(){K(kn()&&!Nd(),u.auth,"internal-error"),yield function LT(){let g=null;return new Promise(u=>{"complete"!==document.readyState?(g=()=>u(),window.addEventListener("load",g)):u()}).catch(u=>{throw g&&window.removeEventListener("load",g),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const h=yield function lr(g){return Tr.apply(this,arguments)}(u.auth);K(h,u.auth,"internal-error"),u.parameters.sitekey=h})()}getAssertedRecaptcha(){return K(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ld{constructor(u,h){this.verificationId=u,this.onConfirmation=h}confirm(u){const h=lo._fromVerification(this.verificationId,u);return this.onConfirmation(h)}}function Vv(g,u,h){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,R.A)(function*(g,u,h){if((0,Ae._isFirebaseServerApp)(g.app))return Promise.reject(vt(g));const m=Vn(g),w=yield Zc(m,u,(0,M.Ku)(h));return new Ld(w,A=>Dd(m,A))})).apply(this,arguments)}function Qp(g,u,h){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,R.A)(function*(g,u,h){const m=(0,M.Ku)(g);yield Hc(!1,m,"phone");const w=yield Zc(m.auth,u,(0,M.Ku)(h));return new Ld(w,A=>pv(m,A))})).apply(this,arguments)}function zs(g,u,h){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,R.A)(function*(g,u,h){const m=(0,M.Ku)(g);if((0,Ae._isFirebaseServerApp)(m.auth.app))return Promise.reject(vt(m.auth));const w=yield Zc(m.auth,u,(0,M.Ku)(h));return new Ld(w,A=>gv(m,A))})).apply(this,arguments)}function Zc(g,u,h){return rn.apply(this,arguments)}function rn(){return rn=(0,R.A)(function*(g,u,h){var m;const w=yield h.verify();try{let A;if(K("string"==typeof w,g,"argument-error"),K(h.type===ji,g,"argument-error"),A="string"==typeof u?{phoneNumber:u}:u,"session"in A){const L=A.session;if("phoneNumber"in A)return K("enroll"===L.type,g,"internal-error"),(yield function rO(g,u){return $(g,"POST","/v2/accounts/mfaEnrollment:start",Q(g,u))}(g,{idToken:L.credential,phoneEnrollmentInfo:{phoneNumber:A.phoneNumber,recaptchaToken:w}})).phoneSessionInfo.sessionInfo;{K("signin"===L.type,g,"internal-error");const Z=(null===(m=A.multiFactorHint)||void 0===m?void 0:m.uid)||A.multiFactorUid;return K(Z,g,"missing-multi-factor-info"),(yield function uO(g,u){return $(g,"POST","/v2/accounts/mfaSignIn:start",Q(g,u))}(g,{mfaPendingCredential:L.credential,mfaEnrollmentId:Z,phoneSignInInfo:{recaptchaToken:w}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:L}=yield function lv(g,u){return Oo.apply(this,arguments)}(g,{phoneNumber:A.phoneNumber,recaptchaToken:w});return L}}finally{h._reset()}}),rn.apply(this,arguments)}function Jp(g,u){return wl.apply(this,arguments)}function wl(){return(wl=(0,R.A)(function*(g,u){const h=(0,M.Ku)(g);if((0,Ae._isFirebaseServerApp)(h.auth.app))return Promise.reject(vt(h.auth));yield Ui(h,u)})).apply(this,arguments)}let Ei=(()=>{class g{constructor(h){this.providerId=g.PROVIDER_ID,this.auth=Vn(h)}verifyPhoneNumber(h,m){return Zc(this.auth,h,(0,M.Ku)(m))}static credential(h,m){return lo._fromVerification(h,m)}static credentialFromResult(h){return g.credentialFromTaggedObject(h)}static credentialFromError(h){return g.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{phoneNumber:m,temporaryProof:w}=h;return m&&w?lo._fromTokenResponse(m,w):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Da(g,u){return u?oe(u):(K(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class Ud extends No{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return rs(u,this._buildIdpRequest())}_linkToIdToken(u,h){return rs(u,this._buildIdpRequest(h))}_getReauthenticationResolver(u){return rs(u,this._buildIdpRequest())}_buildIdpRequest(u){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(h.idToken=u),h}}function Cl(g){return fv(g.auth,new Ud(g),g.bypassAuthState)}function $i(g){const{auth:u,user:h}=g;return K(h,u,"internal-error"),hv(h,new Ud(g),g.bypassAuthState)}function VT(g){return Xp.apply(this,arguments)}function Xp(){return(Xp=(0,R.A)(function*(g){const{auth:u,user:h}=g;return K(h,u,"internal-error"),Ui(h,new Ud(g),g.bypassAuthState)})).apply(this,arguments)}class Uv{constructor(u,h,m,w,A=!1){this.auth=u,this.resolver=m,this.user=w,this.bypassAuthState=A,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){var u=this;return new Promise(function(){var h=(0,R.A)(function*(m,w){u.pendingPromise={resolve:m,reject:w};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(A){u.reject(A)}});return function(m,w){return h.apply(this,arguments)}}())}onAuthEvent(u){var h=this;return(0,R.A)(function*(){const{urlResponse:m,sessionId:w,postBody:A,tenantId:L,error:Z,type:de}=u;if(Z)return void h.reject(Z);const Ne={auth:h.auth,requestUri:m,sessionId:w,tenantId:L||void 0,postBody:A||void 0,user:h.user,bypassAuthState:h.bypassAuthState};try{h.resolve(yield h.getIdpTask(de)(Ne))}catch(ze){h.reject(ze)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return Cl;case"linkViaPopup":case"linkViaRedirect":return VT;case"reauthViaPopup":case"reauthViaRedirect":return $i;default:Wt(this.auth,"internal-error")}}resolve(u){it(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){it(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Uo=new _r(2e3,1e4);function Bv(g,u,h){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,R.A)(function*(g,u,h){if((0,Ae._isFirebaseServerApp)(g.app))return Promise.reject(Gt(g,"operation-not-supported-in-this-environment"));const m=Vn(g);rt(g,u,is);const w=Da(m,h);return new Je(m,"signInViaPopup",u,w).executeNotNull()})).apply(this,arguments)}function jv(g,u,h){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,R.A)(function*(g,u,h){const m=(0,M.Ku)(g);if((0,Ae._isFirebaseServerApp)(m.auth.app))return Promise.reject(Gt(m.auth,"operation-not-supported-in-this-environment"));rt(m.auth,u,is);const w=Da(m.auth,h);return new Je(m.auth,"reauthViaPopup",u,w,m).executeNotNull()})).apply(this,arguments)}function $v(g,u,h){return eg.apply(this,arguments)}function eg(){return(eg=(0,R.A)(function*(g,u,h){const m=(0,M.Ku)(g);rt(m.auth,u,is);const w=Da(m.auth,h);return new Je(m.auth,"linkViaPopup",u,w,m).executeNotNull()})).apply(this,arguments)}let Je=(()=>{class g extends Uv{constructor(h,m,w,A,L){super(h,m,A,L),this.provider=w,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var h=this;return(0,R.A)(function*(){const m=yield h.execute();return K(m,h.auth,"internal-error"),m})()}onExecution(){var h=this;return(0,R.A)(function*(){it(1===h.filter.length,"Popup operations only handle one event");const m=Wr();h.authWindow=yield h.resolver._openPopup(h.auth,h.provider,h.filter[0],m),h.authWindow.associatedEvent=m,h.resolver._originValidation(h.auth).catch(w=>{h.reject(w)}),h.resolver._isIframeWebStorageSupported(h.auth,w=>{w||h.reject(Gt(h.auth,"web-storage-unsupported"))}),h.pollUserCancellation()})()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(Gt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const h=()=>{var m,w;this.pollId=null!==(w=null===(m=this.authWindow)||void 0===m?void 0:m.window)&&void 0!==w&&w.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Gt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(h,Uo.get())};h()}}return g.currentPopupAction=null,g})();const Hv="pendingRedirect",jd=new Map;class UT extends Uv{constructor(u,h,m=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,m),this.eventId=null}execute(){var u=()=>super.execute,h=this;return(0,R.A)(function*(){let m=jd.get(h.auth._key());if(!m){try{const A=(yield function BT(g,u){return tg.apply(this,arguments)}(h.resolver,h.auth))?yield u().call(h):null;m=()=>Promise.resolve(A)}catch(w){m=()=>Promise.reject(w)}jd.set(h.auth._key(),m)}return h.bypassAuthState||jd.set(h.auth._key(),()=>Promise.resolve(null)),m()})()}onAuthEvent(u){var h=()=>super.onAuthEvent,m=this;return(0,R.A)(function*(){if("signInViaRedirect"===u.type)return h().call(m,u);if("unknown"!==u.type){if(u.eventId){const w=yield m.auth._redirectUserForId(u.eventId);if(w)return m.user=w,h().call(m,u);m.resolve(null)}}else m.resolve(null)})()}onExecution(){return(0,R.A)(function*(){})()}cleanUp(){}}function tg(){return(tg=(0,R.A)(function*(g,u){const h=Gv(u),m=Wv(g);if(!(yield m._isAvailable()))return!1;const w="true"===(yield m._get(h));return yield m._remove(h),w})).apply(this,arguments)}function $d(g,u){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,R.A)(function*(g,u){return Wv(g)._set(Gv(u),"true")})).apply(this,arguments)}function jT(){jd.clear()}function zv(g,u){jd.set(g._key(),u)}function Wv(g){return oe(g._redirectPersistence)}function Gv(g){return Dt(Hv,g.config.apiKey,g.name)}function $T(g,u,h){return function he(g,u,h){return Rt.apply(this,arguments)}(g,u,h)}function Rt(){return(Rt=(0,R.A)(function*(g,u,h){if((0,Ae._isFirebaseServerApp)(g.app))return Promise.reject(vt(g));const m=Vn(g);rt(g,u,is),yield m._initializationPromise;const w=Da(m,h);return yield $d(w,m),w._openRedirect(m,u,"signInViaRedirect")})).apply(this,arguments)}function ur(g,u,h){return function dr(g,u,h){return Er.apply(this,arguments)}(g,u,h)}function Er(){return(Er=(0,R.A)(function*(g,u,h){const m=(0,M.Ku)(g);if(rt(m.auth,u,is),(0,Ae._isFirebaseServerApp)(m.auth.app))return Promise.reject(vt(m.auth));yield m.auth._initializationPromise;const w=Da(m.auth,h);yield $d(w,m.auth);const A=yield ig(m);return w._openRedirect(m.auth,u,"reauthViaRedirect",A)})).apply(this,arguments)}function qv(g,u,h){return function eu(g,u,h){return ss.apply(this,arguments)}(g,u,h)}function ss(){return(ss=(0,R.A)(function*(g,u,h){const m=(0,M.Ku)(g);rt(m.auth,u,is),yield m.auth._initializationPromise;const w=Da(m.auth,h);yield Hc(!1,m,u.providerId),yield $d(w,m.auth);const A=yield ig(m);return w._openRedirect(m.auth,u,"linkViaRedirect",A)})).apply(this,arguments)}function ng(g,u){return tu.apply(this,arguments)}function tu(){return(tu=(0,R.A)(function*(g,u){return yield Vn(g)._initializationPromise,rg(g,u,!1)})).apply(this,arguments)}function rg(g,u){return Kv.apply(this,arguments)}function Kv(){return(Kv=(0,R.A)(function*(g,u,h=!1){if((0,Ae._isFirebaseServerApp)(g.app))return Promise.reject(vt(g));const m=Vn(g),w=Da(m,u),L=yield new UT(m,w,h).execute();return L&&!h&&(delete L.user._redirectEventId,yield m._persistUserIfCurrent(L.user),yield m._setRedirectUser(null,u)),L})).apply(this,arguments)}function ig(g){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,R.A)(function*(g){const u=Wr(`${g.uid}:::`);return g._redirectEventId=u,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),u})).apply(this,arguments)}class sg{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let h=!1;return this.consumers.forEach(m=>{this.isEventForConsumer(u,m)&&(h=!0,this.sendToConsumer(u,m),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function HT(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ws(g);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=u,h=!0)),h}sendToConsumer(u,h){var m;if(u.error&&!Ws(u)){const w=(null===(m=u.error.code)||void 0===m?void 0:m.split("auth/")[1])||"internal-error";h.onError(Gt(this.auth,w))}else h.onAuthEvent(u)}isEventForConsumer(u,h){const m=null===h.eventId||!!u.eventId&&u.eventId===h.eventId;return h.filter.includes(u.type)&&m}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xa(u))}saveEventToCache(u){this.cachedEventUids.add(xa(u)),this.lastProcessedEventTime=Date.now()}}function xa(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(u=>u).join("-")}function Ws({type:g,error:u}){return"unknown"===g&&"auth/no-auth-event"===u?.code}function og(g){return ag.apply(this,arguments)}function ag(){return(ag=(0,R.A)(function*(g,u={}){return $(g,"GET","/v1/projects",u)})).apply(this,arguments)}const zT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lg=/^https?/;function Hd(){return(Hd=(0,R.A)(function*(g){if(g.config.emulator)return;const{authorizedDomains:u}=yield og(g);for(const h of u)try{if(ug(h))return}catch{}Wt(g,"unauthorized-domain")})).apply(this,arguments)}function ug(g){const u=St(),{protocol:h,hostname:m}=new URL(u);if(g.startsWith("chrome-extension://")){const L=new URL(g);return""===L.hostname&&""===m?"chrome-extension:"===h&&g.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===h&&L.hostname===m}if(!lg.test(h))return!1;if(zT.test(g))return m===g;const w=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+w+"|"+w+")$","i").test(m)}const WT=new _r(3e4,6e4);function dg(){const g=ir().___jsl;if(g?.H)for(const u of Object.keys(g.H))if(g.H[u].r=g.H[u].r||[],g.H[u].L=g.H[u].L||[],g.H[u].r=[...g.H[u].L],g.CP)for(let h=0;h<g.CP.length;h++)g.CP[h]=null}let nu=null;const Yv=new _r(5e3,15e3),Jv="__/auth/iframe",fg="emulator/auth/iframe",GT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function si(g){const u=g.config;K(u.authDomain,g,"auth-domain-config-required");const h=u.emulator?ti(u,fg):`https://${g.config.authDomain}/${Jv}`,m={apiKey:u.apiKey,appName:g.name,v:Ae.SDK_VERSION},w=qT.get(g.config.apiHost);w&&(m.eid=w);const A=g._getFrameworks();return A.length&&(m.fw=A.join(",")),`${h}?${(0,M.Am)(m).slice(1)}`}function vn(){return vn=(0,R.A)(function*(g){const u=yield function Qv(g){return nu=nu||function hg(g){return new Promise((u,h)=>{var m,w,A;function L(){dg(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{dg(),h(Gt(g,"network-request-failed"))},timeout:WT.get()})}if(null!==(w=null===(m=ir().gapi)||void 0===m?void 0:m.iframes)&&void 0!==w&&w.Iframe)u(gapi.iframes.getContext());else{if(null===(A=ir().gapi)||void 0===A||!A.load){const Z=pT("iframefcb");return ir()[Z]=()=>{gapi.load?L():h(Gt(g,"network-request-failed"))},Yy(`${function fT(){return ms.gapiScript}()}?onload=${Z}`).catch(de=>h(de))}L()}}).catch(u=>{throw nu=null,u})}(g),nu}(g),h=ir().gapi;return K(h,g,"internal-error"),u.open({where:document.body,url:si(g),messageHandlersFilter:h.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GT,dontclear:!0},m=>new Promise(function(){var w=(0,R.A)(function*(A,L){yield m.restyle({setHideOnLeave:!1});const Z=Gt(g,"network-request-failed"),de=ir().setTimeout(()=>{L(Z)},Yv.get());function Ne(){ir().clearTimeout(de),A(m)}m.ping(Ne).then(Ne,()=>{L(Z)})});return function(A,L){return w.apply(this,arguments)}}()))}),vn.apply(this,arguments)}const KT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class pg{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const XT="__/auth/handler",Wd="emulator/auth/handler",Gd=encodeURIComponent("fac");function Tl(g,u,h,m,w,A){return ru.apply(this,arguments)}function ru(){return(ru=(0,R.A)(function*(g,u,h,m,w,A){K(g.config.authDomain,g,"auth-domain-config-required"),K(g.config.apiKey,g,"invalid-api-key");const L={apiKey:g.config.apiKey,appName:g.name,authType:h,redirectUrl:m,v:Ae.SDK_VERSION,eventId:w};if(u instanceof is){u.setDefaultLanguage(g.languageCode),L.providerId=u.providerId||"",(0,M.Im)(u.getCustomParameters())||(L.customParameters=JSON.stringify(u.getCustomParameters()));for(const[ze,_t]of Object.entries(A||{}))L[ze]=_t}if(u instanceof $r){const ze=u.getScopes().filter(_t=>""!==_t);ze.length>0&&(L.scopes=ze.join(","))}g.tenantId&&(L.tid=g.tenantId);const Z=L;for(const ze of Object.keys(Z))void 0===Z[ze]&&delete Z[ze];const de=yield g._getAppCheckToken(),Ne=de?`#${Gd}=${encodeURIComponent(de)}`:"";return`${function Zv({config:g}){return g.emulator?ti(g,Wd):`https://${g.authDomain}/${XT}`}(g)}?${(0,M.Am)(Z).slice(1)}${Ne}`})).apply(this,arguments)}const qd="webStorageSupport",Pa=class ZT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bv,this._completeRedirectFn=rg,this._overrideRedirectResult=zv}_openPopup(u,h,m,w){var A=this;return(0,R.A)(function*(){var L;it(null===(L=A.eventManagers[u._key()])||void 0===L?void 0:L.manager,"_initialize() not called before _openPopup()");const Z=yield Tl(u,h,m,St(),w);return function zd(g,u,h,m=500,w=600){const A=Math.max((window.screen.availHeight-w)/2,0).toString(),L=Math.max((window.screen.availWidth-m)/2,0).toString();let Z="";const de=Object.assign(Object.assign({},KT),{width:m.toString(),height:w.toString(),top:A,left:L}),Ne=(0,M.ZQ)().toLowerCase();h&&(Z=Us(Ne)?"_blank":h),Se(Ne)&&(u=u||"http://localhost",de.scrollbars="yes");const ze=Object.entries(de).reduce((oi,[$o,Ma])=>`${oi}${$o}=${Ma},`,"");if(function _e(g=(0,M.ZQ)()){var u;return vp(g)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(Ne)&&"_self"!==Z)return function jo(g,u){const h=document.createElement("a");h.href=g,h.target=u;const m=document.createEvent("MouseEvent");m.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),h.dispatchEvent(m)}(u||"",Z),new pg(null);const _t=window.open(u||"",Z,ze);K(_t,g,"popup-blocked");try{_t.focus()}catch{}return new pg(_t)}(u,Z,Wr())})()}_openRedirect(u,h,m,w){var A=this;return(0,R.A)(function*(){return yield A._originValidation(u),function Sv(g){ir().location.href=g}(yield Tl(u,h,m,St(),w)),new Promise(()=>{})})()}_initialize(u){const h=u._key();if(this.eventManagers[h]){const{manager:w,promise:A}=this.eventManagers[h];return w?Promise.resolve(w):(it(A,"If manager is not set, promise should be"),A)}const m=this.initAndGetManager(u);return this.eventManagers[h]={promise:m},m.catch(()=>{delete this.eventManagers[h]}),m}initAndGetManager(u){var h=this;return(0,R.A)(function*(){const m=yield function Ra(g){return vn.apply(this,arguments)}(u),w=new sg(u);return m.register("authEvent",A=>(K(A?.authEvent,u,"invalid-auth-event"),{status:w.onEvent(A.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),h.eventManagers[u._key()]={manager:w},h.iframes[u._key()]=m,w})()}_isIframeWebStorageSupported(u,h){this.iframes[u._key()].send(qd,{type:qd},w=>{var A;const L=null===(A=w?.[0])||void 0===A?void 0:A[qd];void 0!==L&&h(!!L),Wt(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const h=u._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=function cg(g){return Hd.apply(this,arguments)}(u)),this.originValidationPromises[h]}get _shouldInitProactively(){return st()||Ln()||vp()}};class bl{constructor(u){this.factorId=u}_process(u,h,m){switch(h.type){case"enroll":return this._finalizeEnroll(u,h.credential,m);case"signin":return this._finalizeSignIn(u,h.credential);default:return je("unexpected MultiFactorSessionType")}}}class gg extends bl{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new gg(u)}_finalizeEnroll(u,h,m){return function iO(g,u){return $(g,"POST","/v2/accounts/mfaEnrollment:finalize",Q(g,u))}(u,{idToken:h,displayName:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,h){return function dO(g,u){return $(g,"POST","/v2/accounts/mfaSignIn:finalize",Q(g,u))}(u,{mfaPendingCredential:h,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let fO=(()=>{class g{constructor(){}static assertion(h){return gg._fromCredential(h)}}return g.FACTOR_ID="phone",g})();var eb="@firebase/auth";class mg{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var h=this;return(0,R.A)(function*(){return h.assertAuthConfigured(),yield h.auth._initializationPromise,h.auth.currentUser?{accessToken:yield h.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const h=this.auth.onIdTokenChanged(m=>{u(m?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,h),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const h=this.internalListeners.get(u);h&&(this.internalListeners.delete(u),h(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,M.XA)("authIdTokenMaxAge"),function H1(g){ms=g}({loadJS:g=>new Promise((u,h)=>{const m=document.createElement("script");m.setAttribute("src",g),m.onload=u,m.onerror=w=>{const A=Gt("internal-error");A.customData=w,h(A)},m.type="text/javascript",m.charset="UTF-8",function rE(){var g,u;return null!==(u=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==u?u:document}().appendChild(m)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function nb(g){(0,Ae._registerComponent)(new pn.uA("auth",(u,{options:h})=>{const m=u.getProvider("app").getImmediate(),w=u.getProvider("heartbeat"),A=u.getProvider("app-check-internal"),{apiKey:L,authDomain:Z}=m.options;K(L&&!L.includes(":"),"invalid-api-key",{appName:m.name});const de={apiKey:L,authDomain:Z,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qt(g)},Ne=new $1(m,w,A,de);return function Cd(g,u){const h=u?.persistence||[],m=(Array.isArray(h)?h:[h]).map(oe);u?.errorMap&&g._updateErrorMap(u.errorMap),g._initializeWithPersistence(m,u?.popupRedirectResolver)}(Ne,h),Ne},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,h,m)=>{u.getProvider("auth-internal").initialize()})),(0,Ae._registerComponent)(new pn.uA("auth-internal",u=>{const h=Vn(u.getProvider("auth").getImmediate());return new mg(h)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ae.registerVersion)(eb,"1.7.9",function iu(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(g)),(0,Ae.registerVersion)(eb,"1.7.9","esm2017")}("Browser")},401:(ps,ar,Ge)=>{Ge.d(ar,{$L:()=>Jt,$g:()=>ti,A4:()=>ge,Am:()=>Ls,As:()=>Ke,Bd:()=>je,Cv:()=>Ft,FA:()=>ye,Fy:()=>vt,Hk:()=>M,I9:()=>gi,Im:()=>Tr,K3:()=>pn,KA:()=>kt,Ku:()=>le,Ll:()=>K,OE:()=>xr,T9:()=>Wt,Uj:()=>ft,XA:()=>Gt,ZQ:()=>rt,bD:()=>pi,c1:()=>St,cY:()=>Ur,dI:()=>ts,eX:()=>te,g:()=>se,gR:()=>qn,gz:()=>Vs,hp:()=>es,jZ:()=>Ie,kH:()=>jt,kj:()=>ns,lT:()=>mn,lV:()=>an,mS:()=>At,nr:()=>Fs,p7:()=>it,qc:()=>Lt,sr:()=>kn,tD:()=>vr,u:()=>ae,vA:()=>Ae,yU:()=>gn,yw:()=>lr,zW:()=>W,zw:()=>Le});const R={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Ae=function(C,E){if(!C)throw M(E)},M=function(C){return new Error("Firebase Database ("+R.SDK_VERSION+") INTERNAL ASSERT FAILED: "+C)},Fe=function(C){const E=[];let T=0;for(let x=0;x<C.length;x++){let O=C.charCodeAt(x);O<128?E[T++]=O:O<2048?(E[T++]=O>>6|192,E[T++]=63&O|128):55296==(64512&O)&&x+1<C.length&&56320==(64512&C.charCodeAt(x+1))?(O=65536+((1023&O)<<10)+(1023&C.charCodeAt(++x)),E[T++]=O>>18|240,E[T++]=O>>12&63|128,E[T++]=O>>6&63|128,E[T++]=63&O|128):(E[T++]=O>>12|224,E[T++]=O>>6&63|128,E[T++]=63&O|128)}return E},pn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(C,E){if(!Array.isArray(C))throw Error("encodeByteArray takes an array as a parameter");this.init_();const T=E?this.byteToCharMapWebSafe_:this.byteToCharMap_,x=[];for(let O=0;O<C.length;O+=3){const oe=C[O],Ee=O+1<C.length,He=Ee?C[O+1]:0,Dt=O+2<C.length,Ve=Dt?C[O+2]:0;let Ln=(15&He)<<2|Ve>>6,Us=63&Ve;Dt||(Us=64,Ee||(Ln=64)),x.push(T[oe>>2],T[(3&oe)<<4|He>>4],T[Ln],T[Us])}return x.join("")},encodeString(C,E){return this.HAS_NATIVE_SUPPORT&&!E?btoa(C):this.encodeByteArray(Fe(C),E)},decodeString(C,E){return this.HAS_NATIVE_SUPPORT&&!E?atob(C):function(C){const E=[];let T=0,x=0;for(;T<C.length;){const O=C[T++];if(O<128)E[x++]=String.fromCharCode(O);else if(O>191&&O<224){const oe=C[T++];E[x++]=String.fromCharCode((31&O)<<6|63&oe)}else if(O>239&&O<365){const Dt=((7&O)<<18|(63&C[T++])<<12|(63&C[T++])<<6|63&C[T++])-65536;E[x++]=String.fromCharCode(55296+(Dt>>10)),E[x++]=String.fromCharCode(56320+(1023&Dt))}else{const oe=C[T++],Ee=C[T++];E[x++]=String.fromCharCode((15&O)<<12|(63&oe)<<6|63&Ee)}}return E.join("")}(this.decodeStringToByteArray(C,E))},decodeStringToByteArray(C,E){this.init_();const T=E?this.charToByteMapWebSafe_:this.charToByteMap_,x=[];for(let O=0;O<C.length;){const oe=T[C.charAt(O++)],He=O<C.length?T[C.charAt(O)]:0;++O;const Ve=O<C.length?T[C.charAt(O)]:64;++O;const Se=O<C.length?T[C.charAt(O)]:64;if(++O,null==oe||null==He||null==Ve||null==Se)throw new bn;x.push(oe<<2|He>>4),64!==Ve&&(x.push(He<<4&240|Ve>>2),64!==Se&&x.push(Ve<<6&192|Se))}return x},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let C=0;C<this.ENCODED_VALS.length;C++)this.byteToCharMap_[C]=this.ENCODED_VALS.charAt(C),this.charToByteMap_[this.byteToCharMap_[C]]=C,this.byteToCharMapWebSafe_[C]=this.ENCODED_VALS_WEBSAFE.charAt(C),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[C]]=C,C>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(C)]=C,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(C)]=C)}}};class bn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kt=function(C){const E=Fe(C);return pn.encodeByteArray(E,!0)},ft=function(C){return kt(C).replace(/\./g,"")},ae=function(C){try{return pn.decodeString(C,!0)}catch(E){console.error("base64Decode failed: ",E)}return null};function ge(C){return Le(void 0,C)}function Le(C,E){if(!(E instanceof Object))return E;switch(E.constructor){case Date:return new Date(E.getTime());case Object:void 0===C&&(C={});break;case Array:C=[];break;default:return E}for(const T in E)!E.hasOwnProperty(T)||!at(T)||(C[T]=Le(C[T],E[T]));return C}function at(C){return"__proto__"!==C}function At(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const qe=()=>{try{return At().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const C=process.env.__FIREBASE_DEFAULTS__;return C?JSON.parse(C):void 0})()||(()=>{if(typeof document>"u")return;let C;try{C=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const E=C&&ae(C[1]);return E&&JSON.parse(E)})()}catch(C){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${C}`)}},gn=C=>{const E=(C=>{var E,T;return null===(T=null===(E=qe())||void 0===E?void 0:E.emulatorHosts)||void 0===T?void 0:T[C]})(C);if(!E)return;const T=E.lastIndexOf(":");if(T<=0||T+1===E.length)throw new Error(`Invalid host ${E} with no separate hostname and port!`);const x=parseInt(E.substring(T+1),10);return"["===E[0]?[E.substring(1,T-1),x]:[E.substring(0,T),x]},Wt=()=>{var C;return null===(C=qe())||void 0===C?void 0:C.config},Gt=C=>{var E;return null===(E=qe())||void 0===E?void 0:E[`_${C}`]};class Ur{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((E,T)=>{this.resolve=E,this.reject=T})}wrapCallback(E){return(T,x)=>{T?this.reject(T):this.resolve(x),"function"==typeof E&&(this.promise.catch(()=>{}),1===E.length?E(T):E(T,x))}}}function vt(C,E){if(C.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const x=E||"demo-project",O=C.iat||0,oe=C.sub||C.user_id;if(!oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ee=Object.assign({iss:`https://securetoken.google.com/${x}`,aud:x,iat:O,exp:O+3600,auth_time:O,sub:oe,user_id:oe,firebase:{sign_in_provider:"custom",identities:{}}},C);return[ft(JSON.stringify({alg:"none",type:"JWT"})),ft(JSON.stringify(Ee)),""].join(".")}function rt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ie(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function K(){var C;const E=null===(C=qe())||void 0===C?void 0:C.forceEnvironment;if("node"===E)return!0;if("browser"===E)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function je(){return typeof window<"u"||it()}function it(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function St(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function kn(){const C="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof C&&void 0!==C.id}function an(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function mn(){const C=rt();return C.indexOf("MSIE ")>=0||C.indexOf("Trident/")>=0}function ti(){return!0===R.NODE_CLIENT||!0===R.NODE_ADMIN}function Fs(){return!K()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W(){try{return"object"==typeof indexedDB}catch{return!1}}function te(){return new Promise((C,E)=>{try{let T=!0;const x="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(x);O.onsuccess=()=>{O.result.close(),T||self.indexedDB.deleteDatabase(x),C(!0)},O.onupgradeneeded=()=>{T=!1},O.onerror=()=>{var oe;E((null===(oe=O.error)||void 0===oe?void 0:oe.message)||"")}}catch(T){E(T)}})}class se extends Error{constructor(E,T,x){super(T),this.code=E,this.customData=x,this.name="FirebaseError",Object.setPrototypeOf(this,se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ye.prototype.create)}}class ye{constructor(E,T,x){this.service=E,this.serviceName=T,this.errors=x}create(E,...T){const x=T[0]||{},O=`${this.service}/${E}`,oe=this.errors[E],Ee=oe?function pe(C,E){return C.replace(Qe,(T,x)=>{const O=E[x];return null!=O?String(O):`<${x}?>`})}(oe,x):"Error";return new se(O,`${this.serviceName}: ${Ee} (${O}).`,x)}}const Qe=/\{\$([^}]+)}/g;function Jt(C){return JSON.parse(C)}function Ke(C){return JSON.stringify(C)}const Vt=function(C){let E={},T={},x={},O="";try{const oe=C.split(".");E=Jt(ae(oe[0])||""),T=Jt(ae(oe[1])||""),O=oe[2],x=T.d||{},delete T.d}catch{}return{header:E,claims:T,data:x,signature:O}},Ft=function(C){const T=Vt(C).claims;return!!T&&"object"==typeof T&&T.hasOwnProperty("iat")},Lt=function(C){const E=Vt(C).claims;return"object"==typeof E&&!0===E.admin};function qn(C,E){return Object.prototype.hasOwnProperty.call(C,E)}function lr(C,E){if(Object.prototype.hasOwnProperty.call(C,E))return C[E]}function Tr(C){for(const E in C)if(Object.prototype.hasOwnProperty.call(C,E))return!1;return!0}function jt(C,E,T){const x={};for(const O in C)Object.prototype.hasOwnProperty.call(C,O)&&(x[O]=E.call(T,C[O],O,C));return x}function pi(C,E){if(C===E)return!0;const T=Object.keys(C),x=Object.keys(E);for(const O of T){if(!x.includes(O))return!1;const oe=C[O],Ee=E[O];if(ro(oe)&&ro(Ee)){if(!pi(oe,Ee))return!1}else if(oe!==Ee)return!1}for(const O of x)if(!T.includes(O))return!1;return!0}function ro(C){return null!==C&&"object"==typeof C}function Ls(C){const E=[];for(const[T,x]of Object.entries(C))Array.isArray(x)?x.forEach(O=>{E.push(encodeURIComponent(T)+"="+encodeURIComponent(O))}):E.push(encodeURIComponent(T)+"="+encodeURIComponent(x));return E.length?"&"+E.join("&"):""}function gi(C){const E={};return C.replace(/^\?/,"").split("&").forEach(x=>{if(x){const[O,oe]=x.split("=");E[decodeURIComponent(O)]=decodeURIComponent(oe)}}),E}function es(C){const E=C.indexOf("?");if(!E)return"";const T=C.indexOf("#",E);return C.substring(E,T>0?T:void 0)}class Vs{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let E=1;E<this.blockSize;++E)this.pad_[E]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(E,T){T||(T=0);const x=this.W_;if("string"==typeof E)for(let Se=0;Se<16;Se++)x[Se]=E.charCodeAt(T)<<24|E.charCodeAt(T+1)<<16|E.charCodeAt(T+2)<<8|E.charCodeAt(T+3),T+=4;else for(let Se=0;Se<16;Se++)x[Se]=E[T]<<24|E[T+1]<<16|E[T+2]<<8|E[T+3],T+=4;for(let Se=16;Se<80;Se++){const Ln=x[Se-3]^x[Se-8]^x[Se-14]^x[Se-16];x[Se]=4294967295&(Ln<<1|Ln>>>31)}let Ve,yn,O=this.chain_[0],oe=this.chain_[1],Ee=this.chain_[2],He=this.chain_[3],Dt=this.chain_[4];for(let Se=0;Se<80;Se++){Se<40?Se<20?(Ve=He^oe&(Ee^He),yn=1518500249):(Ve=oe^Ee^He,yn=1859775393):Se<60?(Ve=oe&Ee|He&(oe|Ee),yn=2400959708):(Ve=oe^Ee^He,yn=3395469782);const Ln=(O<<5|O>>>27)+Ve+Dt+yn+x[Se]&4294967295;Dt=He,He=Ee,Ee=4294967295&(oe<<30|oe>>>2),oe=O,O=Ln}this.chain_[0]=this.chain_[0]+O&4294967295,this.chain_[1]=this.chain_[1]+oe&4294967295,this.chain_[2]=this.chain_[2]+Ee&4294967295,this.chain_[3]=this.chain_[3]+He&4294967295,this.chain_[4]=this.chain_[4]+Dt&4294967295}update(E,T){if(null==E)return;void 0===T&&(T=E.length);const x=T-this.blockSize;let O=0;const oe=this.buf_;let Ee=this.inbuf_;for(;O<T;){if(0===Ee)for(;O<=x;)this.compress_(E,O),O+=this.blockSize;if("string"==typeof E){for(;O<T;)if(oe[Ee]=E.charCodeAt(O),++Ee,++O,Ee===this.blockSize){this.compress_(oe),Ee=0;break}}else for(;O<T;)if(oe[Ee]=E[O],++Ee,++O,Ee===this.blockSize){this.compress_(oe),Ee=0;break}}this.inbuf_=Ee,this.total_+=T}digest(){const E=[];let T=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let O=this.blockSize-1;O>=56;O--)this.buf_[O]=255&T,T/=256;this.compress_(this.buf_);let x=0;for(let O=0;O<5;O++)for(let oe=24;oe>=0;oe-=8)E[x]=this.chain_[O]>>oe&255,++x;return E}}function vr(C,E){const T=new Oi(C,E);return T.subscribe.bind(T)}class Oi{constructor(E,T){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=T,this.task.then(()=>{E(this)}).catch(x=>{this.error(x)})}next(E){this.forEachObserver(T=>{T.next(E)})}error(E){this.forEachObserver(T=>{T.error(E)}),this.close(E)}complete(){this.forEachObserver(E=>{E.complete()}),this.close()}subscribe(E,T,x){let O;if(void 0===E&&void 0===T&&void 0===x)throw new Error("Missing Observer.");O=function br(C,E){if("object"!=typeof C||null===C)return!1;for(const T of E)if(T in C&&"function"==typeof C[T])return!0;return!1}(E,["next","error","complete"])?E:{next:E,error:T,complete:x},void 0===O.next&&(O.next=Kn),void 0===O.error&&(O.error=Kn),void 0===O.complete&&(O.complete=Kn);const oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?O.error(this.finalError):O.complete()}catch{}}),this.observers.push(O),oe}unsubscribeOne(E){void 0===this.observers||void 0===this.observers[E]||(delete this.observers[E],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(E){if(!this.finalized)for(let T=0;T<this.observers.length;T++)this.sendOne(T,E)}sendOne(E,T){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[E])try{T(this.observers[E])}catch(x){typeof console<"u"&&console.error&&console.error(x)}})}close(E){this.finalized||(this.finalized=!0,void 0!==E&&(this.finalError=E),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kn(){}function ts(C,E){return`${C} failed: ${E} argument `}const ns=function(C){const E=[];let T=0;for(let x=0;x<C.length;x++){let O=C.charCodeAt(x);if(O>=55296&&O<=56319){const oe=O-55296;x++,Ae(x<C.length,"Surrogate pair missing trail surrogate."),O=65536+(oe<<10)+(C.charCodeAt(x)-56320)}O<128?E[T++]=O:O<2048?(E[T++]=O>>6|192,E[T++]=63&O|128):O<65536?(E[T++]=O>>12|224,E[T++]=O>>6&63|128,E[T++]=63&O|128):(E[T++]=O>>18|240,E[T++]=O>>12&63|128,E[T++]=O>>6&63|128,E[T++]=63&O|128)}return E},xr=function(C){let E=0;for(let T=0;T<C.length;T++){const x=C.charCodeAt(T);x<128?E++:x<2048?E+=2:x>=55296&&x<=56319?(E+=4,T++):E+=3}return E};function le(C){return C&&C._delegate?C._delegate:C}},26:(ps,ar,Ge)=>{function R(n){return"function"==typeof n}function Ae(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const M=Ae(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Fe(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Ot{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(R(r))try{r()}catch(s){e=s instanceof M?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{kt(s)}catch(o){e=e??[],o instanceof M?e=[...e,...o.errors]:e.push(o)}}if(e)throw new M(e)}}add(e){var t;if(e&&e!==this)if(this.closed)kt(e);else{if(e instanceof Ot){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Fe(t,e)}remove(e){const{_finalizers:t}=this;t&&Fe(t,e),e instanceof Ot&&e._removeParent(this)}}Ot.EMPTY=(()=>{const n=new Ot;return n.closed=!0,n})();const pn=Ot.EMPTY;function bn(n){return n instanceof Ot||n&&"closed"in n&&R(n.remove)&&R(n.add)&&R(n.unsubscribe)}function kt(n){R(n)?n():n.unsubscribe()}const ft={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ae={setTimeout(n,e,...t){const{delegate:r}=ae;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ae;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ge(n){ae.setTimeout(()=>{const{onUnhandledError:e}=ft;if(!e)throw n;e(n)})}function Le(){}const at=mt("C",void 0,void 0);function mt(n,e,t){return{kind:n,value:e,error:t}}let Xe=null;function qe(n){if(ft.useDeprecatedSynchronousErrorHandling){const e=!Xe;if(e&&(Xe={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Xe;if(Xe=null,t)throw r}}else n()}class gn extends Ot{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,bn(e)&&e.add(this)):this.destination=je}static create(e,t,r){return new vt(e,t,r)}next(e){this.isStopped?K(function nr(n){return mt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?K(function At(n){return mt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?K(at,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Wt=Function.prototype.bind;function Gt(n,e){return Wt.call(n,e)}class Ur{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){rt(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){rt(r)}else rt(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){rt(t)}}}class vt extends gn{constructor(e,t,r){let i;if(super(),R(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ft.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Gt(e.next,s),error:e.error&&Gt(e.error,s),complete:e.complete&&Gt(e.complete,s)}):i=e}this.destination=new Ur(i)}}function rt(n){ft.useDeprecatedSynchronousErrorHandling?function Gn(n){ft.useDeprecatedSynchronousErrorHandling&&Xe&&(Xe.errorThrown=!0,Xe.error=n)}(n):ge(n)}function K(n,e){const{onStoppedNotification:t}=ft;t&&ae.setTimeout(()=>t(n,e))}const je={closed:!0,next:Le,error:function Ie(n){throw n},complete:Le},it="function"==typeof Symbol&&Symbol.observable||"@@observable";function St(n){return n}function an(n){return 0===n.length?St:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let ct=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function ti(n){return n&&n instanceof gn||function _r(n){return n&&R(n.next)&&R(n.error)&&R(n.complete)}(n)&&bn(n)}(t)?t:new vt(t,r,i);return qe(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=mn(r))((i,s)=>{const o=new vt({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[it](){return this}pipe(...t){return an(t)(this)}toPromise(t){return new(t=mn(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function mn(n){var e;return null!==(e=n??ft.Promise)&&void 0!==e?e:Promise}const Fs=Ae(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let W=(()=>{class n extends ct{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new te(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Fs}next(t){qe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){qe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){qe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?pn:(this.currentObservers=null,s.push(t),new Ot(()=>{this.currentObservers=null,Fe(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new ct;return t.source=this,t}}return n.create=(e,t)=>new te(e,t),n})();class te extends W{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:pn}}function Q(n){return R(n?.lift)}function $(n){return e=>{if(Q(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(n,e,t,r,i){return new ye(n,e,t,r,i)}class ye extends gn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function pe(n,e){return $((t,r)=>{let i=0;t.subscribe(se(r,s=>{r.next(n.call(e,s,i++))}))})}var Qe=Ge(635);const Jt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ke(n){return R(n?.then)}function Vt(n){return R(n[it])}function _n(n){return Symbol.asyncIterator&&R(n?.[Symbol.asyncIterator])}function yr(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Lt=function Ft(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function qn(n){return R(n?.[Lt])}function lr(n){return(0,Qe.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Qe.N3)(t.read());if(i)return yield(0,Qe.N3)(void 0);yield yield(0,Qe.N3)(r)}}finally{t.releaseLock()}})}function Tr(n){return R(n?.getReader)}function jt(n){if(n instanceof ct)return n;if(null!=n){if(Vt(n))return function pi(n){return new ct(e=>{const t=n[it]();if(R(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Jt(n))return function ro(n){return new ct(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Ke(n))return function Po(n){return new ct(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ge)})}(n);if(_n(n))return gi(n);if(qn(n))return function Ls(n){return new ct(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Tr(n))return function es(n){return gi(lr(n))}(n)}throw yr(n)}function gi(n){return new ct(e=>{(function Vs(n,e){var t,r,i,s;return(0,Qe.sH)(this,void 0,void 0,function*(){try{for(t=(0,Qe.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function vr(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Fn(n,e,t=1/0){return R(e)?Fn((r,i)=>pe((s,o)=>e(r,s,i,o))(jt(n(r,i))),t):("number"==typeof e&&(t=e),$((r,i)=>function Oi(n,e,t,r,i,s,o,a){const l=[];let c=0,d=0,p=!1;const _=()=>{p&&!l.length&&!c&&e.complete()},v=D=>c<r?b(D):l.push(D),b=D=>{s&&e.next(D),c++;let P=!1;jt(t(D,d++)).subscribe(se(e,H=>{i?.(H),s?v(H):e.next(H)},()=>{P=!0},void 0,()=>{if(P)try{for(c--;l.length&&c<r;){const H=l.shift();o?vr(e,o,()=>b(H)):b(H)}_()}catch(H){e.error(H)}}))};return n.subscribe(se(e,v,()=>{p=!0,_()})),()=>{a?.()}}(r,i,n,t)))}function br(n=1/0){return Fn(St,n)}const Kn=new ct(n=>n.complete());function ki(n){return n[n.length-1]}function gs(n){return R(ki(n))?n.pop():void 0}function ns(n){return function Xt(n){return n&&R(n.schedule)}(ki(n))?n.pop():void 0}function rr(n,e=0){return $((t,r)=>{t.subscribe(se(r,i=>vr(r,n,()=>r.next(i),e),()=>vr(r,n,()=>r.complete(),e),i=>vr(r,n,()=>r.error(i),e)))})}function Br(n,e=0){return $((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Ia(n,e){if(!n)throw new Error("Iterable cannot be null");return new ct(t=>{vr(t,e,()=>{const r=n[Symbol.asyncIterator]();vr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function C(n,e){return e?function le(n,e){if(null!=n){if(Vt(n))return function so(n,e){return jt(n).pipe(Br(e),rr(e))}(n,e);if(Jt(n))return function ao(n,e){return new ct(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Ke(n))return function oo(n,e){return jt(n).pipe(Br(e),rr(e))}(n,e);if(_n(n))return Ia(n,e);if(qn(n))return function Mo(n,e){return new ct(t=>{let r;return vr(t,e,()=>{r=n[Lt](),vr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>R(r?.return)&&r.return()})}(n,e);if(Tr(n))return function xe(n,e){return Ia(lr(n),e)}(n,e)}throw yr(n)}(n,e):jt(n)}function E(...n){const e=ns(n),t=function xr(n,e){return"number"==typeof ki(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?jt(r[0]):br(t)(C(r,e)):Kn}class T extends W{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function x(...n){return C(n,ns(n))}function O(n={}){const{connector:e=(()=>new W),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,d=!1,p=!1;const _=()=>{a?.unsubscribe(),a=void 0},v=()=>{_(),o=l=void 0,d=p=!1},b=()=>{const D=o;v(),D?.unsubscribe()};return $((D,P)=>{c++,!p&&!d&&_();const H=l=l??e();P.add(()=>{c--,0===c&&!p&&!d&&(a=oe(b,i))}),H.subscribe(P),!o&&c>0&&(o=new vt({next:V=>H.next(V),error:V=>{p=!0,_(),a=oe(v,t,V),H.error(V)},complete:()=>{d=!0,_(),a=oe(v,r),H.complete()}}),jt(D).subscribe(o))})(s)}}function oe(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new vt({next:()=>{r.unsubscribe(),n()}});return jt(e(...t)).subscribe(r)}function Ee(n,e){return $((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(se(r,l=>{i?.unsubscribe();let c=0;const d=s++;jt(n(l,d)).subscribe(i=se(r,p=>r.next(e?e(l,p,d,c++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function He(n,e=St){return n=n??Dt,$((t,r)=>{let i,s=!0;t.subscribe(se(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Dt(n,e){return n===e}function Ve(n){for(let e in n)if(n[e]===Ve)return e;throw Error("Could not find renamed property on target object.")}function yn(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Se(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Se).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Ln(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Us=Ve({__forward_ref__:Ve});function Zt(n){return n.__forward_ref__=Zt,n.toString=function(){return Se(this())},n}function Ze(n){return vd(n)?n():n}function vd(n){return"function"==typeof n&&n.hasOwnProperty(Us)&&n.__forward_ref__===Zt}function Ed(n){return n&&!!n.\u0275providers}const Qy="https://g.co/ng/security#xss";class _e extends Error{constructor(e,t){super(function Id(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function st(n){return"string"==typeof n?n:null==n?"":String(n)}function Ip(n,e){throw new _e(-201,!1)}function Li(n,e){null==n&&function et(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Be(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function mi(n){return{providers:n.providers||[],imports:n.imports||[]}}function Cd(n){return wp(n,Td)||wp(n,Cp)}function wp(n,e){return n.hasOwnProperty(e)?n[e]:null}function Nc(n){return n&&(n.hasOwnProperty(No)||n.hasOwnProperty(Tp))?n[No]:null}const Td=Ve({\u0275prov:Ve}),No=Ve({\u0275inj:Ve}),Cp=Ve({ngInjectableDef:Ve}),Tp=Ve({ngInjectorDef:Ve});var Et=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Et||{});let Oc;function jr(n){const e=Oc;return Oc=n,e}function nv(n,e,t){const r=Cd(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Et.Optional?null:void 0!==e?e:void Ip(Se(n))}const dn=globalThis;class Ce{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Be({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const wa={},Ca="__NG_DI_FLAG__",rs="ngTempTokenPath",yT=/\n/gm,lv="__source";let Oo;function js(n){const e=Oo;return Oo=n,e}function ET(n,e=Et.Default){if(void 0===Oo)throw new _e(-203,!1);return null===Oo?nv(n,void 0,e):Oo.get(n,e&Et.Optional?null:void 0,e)}function we(n,e=Et.Default){return(function tv(){return Oc}()||ET)(Ze(n),e)}function Oe(n,e=Et.Default){return we(n,hl(e))}function hl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function lo(n){const e=[];for(let t=0;t<n.length;t++){const r=Ze(n[t]);if(Array.isArray(r)){if(0===r.length)throw new _e(900,!1);let i,s=Et.Default;for(let o=0;o<r.length;o++){const a=r[o],l=IT(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(we(i,s))}else e.push(we(r))}return e}function Vc(n,e){return n[Ca]=e,n.prototype[Ca]=e,n}function IT(n){return n[Ca]}function _s(n){return{toString:n}.toString()}var is=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(is||{}),$r=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}($r||{});const _i={},Ht=[],bd=Ve({\u0275cmp:Ve}),Dp=Ve({\u0275dir:Ve}),xp=Ve({\u0275pipe:Ve}),Ta=Ve({\u0275mod:Ve}),co=Ve({\u0275fac:Ve}),ko=Ve({__NG_ELEMENT_ID__:Ve}),uv=Ve({__NG_ENV_ID__:Ve});function Rp(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Bc(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Pp(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Vi(n){return 3===n||4===n||6===n}function Pp(n){return 64===n.charCodeAt(0)}function jc(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Ad(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Ad(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const $c="ng-template";function dv(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==Rp(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Mp(n){return 4===n.type&&n.value!==$c}function wT(n,e,t){return e===(4!==n.type||t?n.value:$c)}function Np(n,e,t){let r=4;const i=n.attrs||[],s=function hv(n){for(let e=0;e<n.length;e++)if(Vi(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!wT(n,l,t)||""===l&&1===e.length){if(Ui(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!dv(n.attrs,c,t)){if(Ui(r))return!1;o=!0}continue}const p=Op(8&r?"class":l,i,Mp(n),t);if(-1===p){if(Ui(r))return!1;o=!0;continue}if(""!==c){let _;_=p>s?"":i[p+1].toLowerCase();const v=8&r?_:null;if(v&&-1!==Rp(v,c,0)||2&r&&c!==_){if(Ui(r))return!1;o=!0}}}}else{if(!o&&!Ui(r)&&!Ui(l))return!1;if(o&&Ui(l))continue;o=!1,r=l|1&r}}return Ui(r)||o}function Ui(n){return 0==(1&n)}function Op(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Fp(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Hc(n,e,t=!1){for(let r=0;r<e.length;r++)if(Np(n,e[r],t))return!0;return!1}function Sd(n,e){return n?":not("+e.trim()+")":e}function Dd(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Ui(o)&&(e+=Sd(s,i),i=""),r=o,s=s||!Ui(r);t++}return""!==i&&(e+=Sd(s,i)),e}function ni(n){return _s(()=>{const e=Rd(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===is.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||$r.Emulated,styles:n.styles||Ht,_:null,schemas:n.schemas||null,tView:null,id:""};mv(t);const r=n.dependencies;return t.directiveDefs=fl(r,!1),t.pipeDefs=fl(r,!0),t.id=function Up(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Vp(n){return xt(n)||cr(n)}function CT(n){return null!==n}function ri(n){return _s(()=>({type:n.type,bootstrap:n.bootstrap||Ht,declarations:n.declarations||Ht,imports:n.imports||Ht,exports:n.exports||Ht,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function xd(n,e){if(null==n)return _i;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Ye(n){return _s(()=>{const e=Rd(n);return mv(e),e})}function xt(n){return n[bd]||null}function cr(n){return n[Dp]||null}function Rr(n){return n[xp]||null}function Bi(n,e){const t=n[Ta]||null;if(!t&&!0===e)throw new Error(`Type ${Se(n)} does not have '\u0275mod' property.`);return t}function Rd(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||_i,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Ht,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:xd(n.inputs,e),outputs:xd(n.outputs)}}function mv(n){n.features?.forEach(e=>e(n))}function fl(n,e){if(!n)return null;const t=e?Rr:Vp;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(CT)}const Un=0,Me=1,lt=2,hn=3,ys=4,ba=5,zr=6,pl=7,Bn=8,Lo=9,gl=10,nt=11,zc=12,Pd=13,ml=14,jn=15,Wc=16,Vo=17,$s=18,Aa=19,_v=20,Hs=21,uo=22,Sa=23,Gc=24,It=25,qc=1,yv=2,ii=7,_l=9,Pr=11;function yi(n){return Array.isArray(n)&&"object"==typeof n[qc]}function vi(n){return Array.isArray(n)&&!0===n[qc]}function vv(n){return 0!=(4&n.flags)}function yl(n){return n.componentOffset>-1}function vl(n){return 1==(1&n.flags)}function vs(n){return!!n.template}function Bp(n){return 0!=(512&n[lt])}function Il(n,e){return n.hasOwnProperty(co)?n[co]:null}let Mr=null,Md=!1;function Wr(n){const e=Mr;return Mr=n,e}const Av={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Sv(n){if(!fo(n)||n.dirty){if(!n.producerMustRecompute(n)&&!zp(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function Od(n){n.dirty=!0,function Nd(n){if(void 0===n.liveConsumerNode)return;const e=Md;Md=!0;try{for(const t of n.liveConsumerNode)t.dirty||Od(t)}finally{Md=e}}(n),n.consumerMarkedDirty?.(n)}function $p(n){return n&&(n.nextProducerIndex=0),Wr(n)}function Hp(n,e){if(Wr(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(fo(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Xc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function zp(n){po(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Sv(t),r!==t.version))return!0}return!1}function Dv(n){if(po(n),fo(n))for(let e=0;e<n.producerNode.length;e++)Xc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Xc(n,e){if(function xv(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),po(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Xc(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];po(i),i.producerIndexOfThis[r]=e}}function fo(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function po(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Mv=null;const Fv=()=>{},OT=(()=>({...Av,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:Fv}))();class kT{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ji(){return Lv}function Lv(n){return n.type.prototype.ngOnChanges&&(n.setInput=LT),FT}function FT(){const n=Vv(this),e=n?.current;if(e){const t=n.previous;if(t===_i)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function LT(n,e,t,r){const i=this.declaredInputs[t],s=Vv(n)||function Kp(n,e){return n[Ld]=e}(n,{previous:_i,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new kT(l&&l.currentValue,e,a===_i),n[r]=e}ji.ngInherit=!0;const Ld="__ngSimpleChanges__";function Vv(n){return n[Ld]||null}const zs=function(n,e,t){};function rn(n){for(;Array.isArray(n);)n=n[Un];return n}function wl(n,e){return rn(e[n])}function Ei(n,e){return rn(e[n.index])}function Ud(n,e){return n.data[e]}function $i(n,e){const t=e[n];return yi(t)?t:t[Un]}function Uo(n,e){return null==e?null:n[e]}function Bv(n){n[Vo]=0}function Zp(n){1024&n[lt]||(n[lt]|=1024,Bd(n,1))}function jv(n){1024&n[lt]&&(n[lt]&=-1025,Bd(n,-1))}function Bd(n,e){let t=n[hn];if(null===t)return;t[ba]+=e;let r=t;for(t=t[hn];null!==t&&(1===e&&1===r[ba]||-1===e&&0===r[ba]);)t[ba]+=e,r=t,t=t[hn]}const Je={lFrame:Qv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function $d(){return Je.bindingsEnabled}function he(){return Je.lFrame.lView}function Rt(){return Je.lFrame.tView}function ur(n){return Je.lFrame.contextLView=n,n[Bn]}function dr(n){return Je.lFrame.contextLView=null,n}function Er(){let n=qv();for(;null!==n&&64===n.type;)n=n.parent;return n}function qv(){return Je.lFrame.currentTNode}function ss(n,e){const t=Je.lFrame;t.currentTNode=n,t.isParent=e}function ng(){return Je.lFrame.isParent}function xa(){return Je.lFrame.bindingIndex++}function Ws(n){const e=Je.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ag(n,e){const t=Je.lFrame;t.bindingIndex=t.bindingRootIndex=n,lg(e)}function lg(n){Je.lFrame.currentDirectiveIndex=n}function ug(n){Je.lFrame.currentQueryIndex=n}function WT(n){const e=n[Me];return 2===e.type?e.declTNode:1===e.type?n[zr]:null}function dg(n,e,t){if(t&Et.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Et.Host||(i=WT(s),null===i||(s=s[ml],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Je.lFrame=nu();return r.currentTNode=e,r.lView=n,!0}function hg(n){const e=nu(),t=n[Me];Je.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function nu(){const n=Je.lFrame,e=null===n?null:n.child;return null===e?Qv(n):e}function Qv(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Yv(){const n=Je.lFrame;return Je.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Jv=Yv;function fg(){const n=Yv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function si(){return Je.lFrame.selectedIndex}function Ra(n){Je.lFrame.selectedIndex=n}function vn(){const n=Je.lFrame;return Ud(n.tView,n.selectedIndex)}let pg=!0;function zd(){return pg}function jo(n){pg=n}function Wd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=d&&(n.destroyHooks??=[]).push(t,d)}}function Gd(n,e,t){Zv(n,e,3,t)}function Tl(n,e,t,r){(3&n[lt])===t&&Zv(n,e,t,r)}function ru(n,e){let t=n[lt];(3&t)===e&&(t&=8191,t+=1,n[lt]=t)}function Zv(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[Vo]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[Vo]+=65536),(a<s||-1==s)&&(ZT(n,t,e,l),n[Vo]=(4294901760&n[Vo])+l+2),l++}function qd(n,e){zs(4,n,e);const t=Wr(null);try{e.call(n)}finally{Wr(t),zs(5,n,e)}}function ZT(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[lt]>>13<n[Vo]>>16&&(3&n[lt])===e&&(n[lt]+=8192,qd(a,s)):qd(a,s)}const Pa=-1;class bl{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function mg(n){return n!==Pa}function iu(n){return 32767&n}function su(n,e){let t=function nb(n){return n>>16}(n),r=e;for(;t>0;)r=r[ml],t--;return r}let _g=!0;function ou(n){const e=_g;return _g=n,e}const rb=255,rE=5;let g=0;const u={};function m(n,e){const t=A(n,e);if(-1!==t)return t;const r=e[Me];r.firstCreatePass&&(n.injectorIndex=e.length,w(r.data,n),w(e,null),w(r.blueprint,null));const i=L(n,e),s=n.injectorIndex;if(mg(i)){const o=iu(i),a=su(i,e),l=a[Me].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function w(n,e){n.push(0,0,0,0,0,0,0,0,e)}function A(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function L(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=sE(i),null===r)return Pa;if(t++,i=i[ml],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Pa}function Z(n,e,t){!function h(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ko)&&(r=t[ko]),null==r&&(r=t[ko]=g++);const i=r&rb;e.data[n+(i>>rE)]|=1<<i}(n,e,t)}function Ne(n,e,t){if(t&Et.Optional||void 0!==n)return n;Ip()}function ze(n,e,t,r){if(t&Et.Optional&&void 0===r&&(r=null),!(t&(Et.Self|Et.Host))){const i=n[Lo],s=jr(void 0);try{return i?i.get(e,r,t&Et.Optional):nv(e,r,t&Et.Optional)}finally{jr(s)}}return Ne(r,0,t)}function _t(n,e,t,r=Et.Default,i){if(null!==n){if(2048&e[lt]&&!(r&Et.Self)){const o=function Cg(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[lt]&&!(512&o[lt]);){const a=oi(s,o,t,r|Et.Self,u);if(a!==u)return a;let l=s.parent;if(!l){const c=o[_v];if(c){const d=c.get(t,u,r);if(d!==u)return d}l=sE(o),o=o[ml]}s=l}return i}(n,e,t,r,u);if(o!==u)return o}const s=oi(n,e,t,r,u);if(s!==u)return s}return ze(e,t,r,i)}function oi(n,e,t,r,i){const s=function yg(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ko)?n[ko]:void 0;return"number"==typeof e?e>=0?e&rb:Ig:e}(t);if("function"==typeof s){if(!dg(e,n,r))return r&Et.Host?Ne(i,0,r):ze(e,t,r,i);try{let o;if(o=s(r),null!=o||r&Et.Optional)return o;Ip()}finally{Jv()}}else if("number"==typeof s){let o=null,a=A(n,e),l=Pa,c=r&Et.Host?e[jn][zr]:null;for((-1===a||r&Et.SkipSelf)&&(l=-1===a?L(n,e):e[a+8],l!==Pa&&Eg(r,!1)?(o=e[Me],a=iu(l),e=su(l,e)):a=-1);-1!==a;){const d=e[Me];if(vg(s,a,d.data)){const p=$o(a,e,t,o,r,c);if(p!==u)return p}l=e[a+8],l!==Pa&&Eg(r,e[Me].data[a+8]===c)&&vg(s,a,e)?(o=d,a=iu(l),e=su(l,e)):a=-1}}return i}function $o(n,e,t,r,i,s){const o=e[Me],a=o.data[n+8],d=function Ma(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,d=s>>20,_=i?a+d:n.directiveEnd;for(let v=r?a:a+d;v<_;v++){const b=o[v];if(v<l&&t===b||v>=l&&b.type===t)return v}if(i){const v=o[l];if(v&&vs(v)&&v.type===t)return l}return null}(a,o,t,null==r?yl(a)&&_g:r!=o&&0!=(3&a.type),i&Et.Host&&s===a);return null!==d?Ho(e,o,d,a):u}function Ho(n,e,t,r){let i=n[t];const s=e.data;if(function gg(n){return n instanceof bl}(i)){const o=i;o.resolving&&function dT(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new _e(-200,`Circular dependency in DI detected for ${n}${t}`)}(function qt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():st(n)}(s[t]));const a=ou(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?jr(o.injectImpl):null;dg(n,r,Et.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function XT(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Lv(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&jr(c),ou(a),o.resolving=!1,Jv()}}return i}function vg(n,e,t){return!!(t[e+(n>>rE)]&1<<n)}function Eg(n,e){return!(n&Et.Self||n&Et.Host&&e)}class Gr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return _t(this._tNode,this._lView,e,hl(r),t)}}function Ig(){return new Gr(Er(),he())}function Ar(n){return _s(()=>{const e=n.prototype.constructor,t=e[co]||wg(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[co]||wg(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function wg(n){return vd(n)?()=>{const e=wg(Ze(n));return e&&e()}:Il(n)}function sE(n){const e=n[Me],t=e.type;return 2===t?e.declTNode:1===t?n[zr]:null}const Yd="__parameters__";function Xd(n,e,t){return _s(()=>{const r=function ib(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,d){const p=l.hasOwnProperty(Yd)?l[Yd]:Object.defineProperty(l,Yd,{value:[]})[Yd];for(;p.length<=d;)p.push(null);return(p[d]=p[d]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function eh(n,e){n.forEach(t=>Array.isArray(t)?eh(t,e):e(t))}function mO(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function aE(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Es(n,e,t){let r=th(n,e);return r>=0?n[1|r]=t:(r=~r,function S5(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function sb(n,e){const t=th(n,e);if(t>=0)return n[1|t]}function th(n,e){return function _O(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Is=Vc(Xd("Optional"),8),cE=Vc(Xd("SkipSelf"),4);function pE(n){return 128==(128&n.flags)}var Al=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Al||{});const ub=new Map;let J5=0;const hb="__ngContext__";function Ii(n,e){yi(e)?(n[hb]=e[Aa],function Z5(n){ub.set(n[Aa],n)}(e)):n[hb]=e}let fb;function pb(n,e){return fb(n,e)}function Dg(n){const e=n[hn];return vi(e)?e[hn]:e}function LO(n){return UO(n[zc])}function VO(n){return UO(n[ys])}function UO(n){for(;null!==n&&!vi(n);)n=n[ys];return n}function ih(n,e,t,r,i){if(null!=r){let s,o=!1;vi(r)?s=r:yi(r)&&(o=!0,r=r[Un]);const a=rn(r);0===n&&null!==t?null==i?HO(e,t,a):au(e,t,a,i||null,!0):1===n&&null!==t?au(e,t,a,i||null,!0):2===n?function IE(n,e,t){const r=vE(n,e);r&&function y9(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function I9(n,e,t,r,i){const s=t[ii];s!==rn(t)&&ih(e,n,r,s,i);for(let a=Pr;a<t.length;a++){const l=t[a];Rg(l[Me],l,n,e,r,s)}}(e,n,s,t,i)}}function _E(n,e,t){return n.createElement(e,t)}function jO(n,e){const t=n[_l],r=t.indexOf(e);jv(e),t.splice(r,1)}function yE(n,e){if(n.length<=Pr)return;const t=Pr+e,r=n[t];if(r){const i=r[Wc];null!==i&&i!==n&&jO(i,r),e>0&&(n[t-1][ys]=r[ys]);const s=aE(n,Pr+e);!function u9(n,e){Rg(n,e,e[nt],2,null,null),e[Un]=null,e[zr]=null}(r[Me],r);const o=s[$s];null!==o&&o.detachView(s[Me]),r[hn]=null,r[ys]=null,r[lt]&=-129}return r}function mb(n,e){if(!(256&e[lt])){const t=e[nt];e[Sa]&&Dv(e[Sa]),e[Gc]&&Dv(e[Gc]),t.destroyNode&&Rg(n,e,t,3,null,null),function f9(n){let e=n[zc];if(!e)return _b(n[Me],n);for(;e;){let t=null;if(yi(e))t=e[zc];else{const r=e[Pr];r&&(t=r)}if(!t){for(;e&&!e[ys]&&e!==n;)yi(e)&&_b(e[Me],e),e=e[hn];null===e&&(e=n),yi(e)&&_b(e[Me],e),t=e&&e[ys]}e=t}}(e)}}function _b(n,e){if(!(256&e[lt])){e[lt]&=-129,e[lt]|=256,function _9(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof bl)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];zs(4,a,l);try{l.call(a)}finally{zs(5,a,l)}}else{zs(4,i,s);try{s.call(i)}finally{zs(5,i,s)}}}}}(n,e),function m9(n,e){const t=n.cleanup,r=e[pl];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[pl]=null);const i=e[Hs];if(null!==i){e[Hs]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Me].type&&e[nt].destroy();const t=e[Wc];if(null!==t&&vi(e[hn])){t!==e[hn]&&jO(t,e);const r=e[$s];null!==r&&r.detachView(n)}!function e9(n){ub.delete(n[Aa])}(e)}}function yb(n,e,t){return function $O(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Un];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===$r.None||s===$r.Emulated)return null}return Ei(r,t)}}(n,e.parent,t)}function au(n,e,t,r,i){n.insertBefore(e,t,r,i)}function HO(n,e,t){n.appendChild(e,t)}function zO(n,e,t,r,i){null!==r?au(n,e,t,r,i):HO(n,e,t)}function vE(n,e){return n.parentNode(e)}let vb,Cb,CE,qO=function GO(n,e,t){return 40&n.type?Ei(n,t):null};function EE(n,e,t,r){const i=yb(n,r,e),s=e[nt],a=function WO(n,e,t){return qO(n,e,t)}(r.parent||e[zr],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)zO(s,i,t[l],a,!1);else zO(s,i,t,a,!1);void 0!==vb&&vb(s,r,e,t,i)}function xg(n,e){if(null!==e){const t=e.type;if(3&t)return Ei(e,n);if(4&t)return Eb(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return xg(n,r);{const i=n[e.index];return vi(i)?Eb(-1,i):rn(i)}}if(32&t)return pb(e,n)()||rn(n[e.index]);{const r=QO(n,e);return null!==r?Array.isArray(r)?r[0]:xg(Dg(n[jn]),r):xg(n,e.next)}}return null}function QO(n,e){return null!==e?n[jn][zr].projection[e.projection]:null}function Eb(n,e){const t=Pr+n+1;if(t<e.length){const r=e[t],i=r[Me].firstChild;if(null!==i)return xg(r,i)}return e[ii]}function Ib(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Ii(rn(a),r),t.flags|=2),32!=(32&t.flags))if(8&l)Ib(n,e,t.child,r,i,s,!1),ih(e,n,i,a,s);else if(32&l){const c=pb(t,r);let d;for(;d=c();)ih(e,n,i,d,s);ih(e,n,i,a,s)}else 16&l?JO(n,e,r,t,i,s):ih(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Rg(n,e,t,r,i,s){Ib(t,r,n.firstChild,e,i,s,!1)}function JO(n,e,t,r,i,s){const o=t[jn],l=o[zr].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)ih(e,n,i,l[c],s);else{let c=l;const d=o[hn];pE(r)&&(c.flags|=128),Ib(n,e,c,d,i,s,!0)}}function XO(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ZO(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Bc(n,e,r),null!==i&&XO(n,e,i),null!==s&&function C9(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function nk(n){return function Tb(){if(void 0===CE&&(CE=null,dn.trustedTypes))try{CE=dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return CE}()?.createScriptURL(n)||n}class rk{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qy})`}}function Sl(n){return n instanceof rk?n.changingThisBreaksApplicationSecurity:n}function Pg(n,e){const t=function N9(n){return n instanceof rk&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Qy})`)}return t===e}const L9=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ah=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ah||{});function lu(n){const e=Ng();return e?e.sanitize(ah.URL,n)||"":Pg(n,"URL")?Sl(n):function bb(n){return(n=String(n)).match(L9)?n:"unsafe:"+n}(st(n))}function uk(n){const e=Ng();if(e)return nk(e.sanitize(ah.RESOURCE_URL,n)||"");if(Pg(n,"ResourceURL"))return nk(Sl(n));throw new _e(904,!1)}function Ng(){const n=he();return n&&n[gl].sanitizer}const Og=new Ce("ENVIRONMENT_INITIALIZER"),hk=new Ce("INJECTOR",-1),fk=new Ce("INJECTOR_DEF_TYPES");class xb{get(e,t=wa){if(t===wa){const r=new Error(`NullInjectorError: No provider for ${Se(e)}!`);throw r.name="NullInjectorError",r}return t}}function bE(n){return{\u0275providers:n}}function Y9(...n){return{\u0275providers:pk(0,n),\u0275fromNgModule:!0}}function pk(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return eh(e,o=>{const a=o;AE(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&gk(i,s),t}function gk(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];Rb(i,s=>{e(s,r)})}}function AE(n,e,t,r){if(!(n=Ze(n)))return!1;let i=null,s=Nc(n);const o=!s&&xt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=Nc(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)AE(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{eh(s.imports,d=>{AE(d,e,t,r)&&(c||=[],c.push(d))})}finally{}void 0!==c&&gk(c,e)}if(!a){const c=Il(i)||(()=>new i);e({provide:i,useFactory:c,deps:Ht},i),e({provide:fk,useValue:i,multi:!0},i),e({provide:Og,useValue:()=>we(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const c=n;Rb(l,d=>{e(d,c)})}}}return i!==n&&void 0!==n.providers}function Rb(n,e){for(let t of n)Ed(t)&&(t=t.\u0275providers),Array.isArray(t)?Rb(t,e):e(t)}const J9=Ve({provide:String,useValue:Ve});function Pb(n){return null!==n&&"object"==typeof n&&J9 in n}function cu(n){return"function"==typeof n}const Mb=new Ce("Set Injector scope."),SE={},Z9={};let Nb;function DE(){return void 0===Nb&&(Nb=new xb),Nb}class ws{}class lh extends ws{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,kb(e,o=>this.processProvider(o)),this.records.set(hk,ch(void 0,this)),i.has("environment")&&this.records.set(ws,ch(void 0,this));const s=this.records.get(Mb);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(fk.multi,Ht,Et.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=js(this),r=jr(void 0);try{return e()}finally{js(t),jr(r)}}get(e,t=wa,r=Et.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(uv))return e[uv](this);r=hl(r);const s=js(this),o=jr(void 0);try{if(!(r&Et.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function i8(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ce}(e)&&Cd(e);l=c&&this.injectableDefInScope(c)?ch(Ob(e),SE):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&Et.Self?DE():this.parent).get(e,t=r&Et.Optional&&t===wa?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[rs]=a[rs]||[]).unshift(Se(e)),s)throw a;return function Uc(n,e,t,r){const i=n[rs];throw e[lv]&&i.unshift(e[lv]),n.message=function Y1(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Se(e);if(Array.isArray(e))i=e.map(Se).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Se(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(yT,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[rs]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{jr(o),js(s)}}resolveInjectorInitializers(){const e=js(this),t=jr(void 0);try{const i=this.get(Og.multi,Ht,Et.Self);for(const s of i)s()}finally{js(e),jr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Se(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(e){let t=cu(e=Ze(e))?e:Ze(e&&e.provide);const r=function t8(n){return Pb(n)?ch(void 0,n.useValue):ch(yk(n),SE)}(e);if(cu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=ch(void 0,SE,!0),i.factory=()=>lo(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===SE&&(t.value=Z9,t.value=t.factory()),"object"==typeof t.value&&t.value&&function r8(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ze(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Ob(n){const e=Cd(n),t=null!==e?e.factory:Il(n);if(null!==t)return t;if(n instanceof Ce)throw new _e(204,!1);if(n instanceof Function)return function e8(n){const e=n.length;if(e>0)throw function bg(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new _e(204,!1);const t=function mT(n){return n&&(n[Td]||n[Cp])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new _e(204,!1)}function yk(n,e,t){let r;if(cu(n)){const i=Ze(n);return Il(i)||Ob(i)}if(Pb(n))r=()=>Ze(n.useValue);else if(function _k(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...lo(n.deps||[]));else if(function mk(n){return!(!n||!n.useExisting)}(n))r=()=>we(Ze(n.useExisting));else{const i=Ze(n&&(n.useClass||n.provide));if(!function n8(n){return!!n.deps}(n))return Il(i)||Ob(i);r=()=>new i(...lo(n.deps))}return r}function ch(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function kb(n,e){for(const t of n)Array.isArray(t)?kb(t,e):t&&Ed(t)?kb(t.\u0275providers,e):e(t)}const xE=new Ce("AppId",{providedIn:"root",factory:()=>s8}),s8="ng",vk=new Ce("Platform Initializer"),zo=new Ce("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ek=new Ce("CSP nonce",{providedIn:"root",factory:()=>function oh(){if(void 0!==Cb)return Cb;if(typeof document<"u")return document;throw new _e(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Ik=(n,e,t)=>null;function Hb(n,e,t=!1){return Ik(n,e,t)}class g8{}class Tk{}class _8{resolveComponentFactory(e){throw function m8(n){const e=Error(`No component factory found for ${Se(n)}.`);return e.ngComponent=n,e}(e)}}let kE=(()=>{class n{static{this.NULL=new _8}}return n})();function y8(){return hh(Er(),he())}function hh(n,e){return new Cs(Ei(n,e))}let Cs=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=y8}}return n})();class Ak{}let ka=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function E8(){const n=he(),t=$i(Er().index,n);return(yi(t)?t:n)[nt]}()}}return n})(),I8=(()=>{class n{static{this.\u0275prov=Be({token:n,providedIn:"root",factory:()=>null})}}return n})();class fh{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Sk=new fh("16.2.12"),Gb={};function Pk(n,e=null,t=null,r){const i=Mk(n,e,t,r);return i.resolveInjectorInitializers(),i}function Mk(n,e=null,t=null,r,i=new Set){const s=[t||Ht,Y9(n)];return r=r||("object"==typeof n?void 0:Se(n)),new lh(s,e||DE(),r||null,i)}let as=(()=>{class n{static{this.THROW_IF_NOT_FOUND=wa}static{this.NULL=new xb}static create(t,r){if(Array.isArray(t))return Pk({name:""},r,t,"");{const i=t.name??"";return Pk({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Be({token:n,providedIn:"any",factory:()=>we(hk)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function Kb(n){return n.ngOriginalError}class Fa{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Kb(e);for(;t&&Kb(t);)t=Kb(t);return t||null}}function Qb(n){return e=>{setTimeout(n,void 0,e)}}const hr=class x8 extends W{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Qb(s),i&&(i=Qb(i)),o&&(o=Qb(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ot&&e.add(a),a}};function Ok(...n){}class en{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hr(!1),this.onMicrotaskEmpty=new hr(!1),this.onStable=new hr(!1),this.onError=new hr(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function R8(){const n="function"==typeof dn.requestAnimationFrame;let e=dn[n?"requestAnimationFrame":"setTimeout"],t=dn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function N8(n){const e=()=>{!function M8(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(dn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Jb(n),n.isCheckStableRunning=!0,Yb(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Jb(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function k8(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return kk(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),Fk(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return kk(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),Fk(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Jb(n),Yb(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!en.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(en.isInAngularZone())throw new _e(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,P8,Ok,Ok);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const P8={};function Yb(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Jb(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function kk(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Fk(n){n._nesting--,Yb(n)}class O8{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hr,this.onMicrotaskEmpty=new hr,this.onStable=new hr,this.onError=new hr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const Lk=new Ce("",{providedIn:"root",factory:Vk});function Vk(){const n=Oe(en);let e=!0;return E(new ct(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new ct(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{en.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{en.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(O()))}function La(n){return n instanceof Function?n():n}let Xb=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Be({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Lg(n){for(;n;){n[lt]|=64;const e=Dg(n);if(Bp(n)&&!e)return n;n=e}return null}const Hk=new Ce("",{providedIn:"root",factory:()=>!1});let VE=null;function qk(n,e){return n[e]??Yk()}function Kk(n,e){const t=Yk();t.producerNode?.length&&(n[e]=VE,t.lView=n,VE=Qk())}const W8={...Av,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Lg(n.lView)},lView:null};function Qk(){return Object.create(W8)}function Yk(){return VE??=Qk(),VE}const ut={};function tt(n){Jk(Rt(),he(),si()+n,!1)}function Jk(n,e,t,r){if(!r)if(3==(3&e[lt])){const s=n.preOrderCheckHooks;null!==s&&Gd(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Tl(e,s,0,t)}Ra(t)}function ve(n,e=Et.Default){const t=he();return null===t?we(n,e):_t(Er(),t,Ze(n),e)}function UE(n,e,t,r,i,s,o,a,l,c,d){const p=e.blueprint.slice();return p[Un]=i,p[lt]=140|r,(null!==c||n&&2048&n[lt])&&(p[lt]|=2048),Bv(p),p[hn]=p[ml]=n,p[Bn]=t,p[gl]=o||n&&n[gl],p[nt]=a||n&&n[nt],p[Lo]=l||n&&n[Lo]||null,p[zr]=s,p[Aa]=function X5(){return J5++}(),p[uo]=d,p[_v]=c,p[jn]=2==e.type?n[jn]:p,p}function mh(n,e,t,r,i){let s=n.data[e];if(null===s)s=function Zb(n,e,t,r,i){const s=qv(),o=ng(),l=n.data[e]=function Z8(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Bo(){return null!==Je.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function HT(){return Je.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function eu(){const n=Je.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ss(s,!0),s}function Vg(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Zk(n,e,t,r,i){const s=qk(e,Sa),o=si(),a=2&r;try{Ra(-1),a&&e.length>It&&Jk(n,e,It,!1),zs(a?2:0,i);const c=a?s:null,d=$p(c);try{null!==c&&(c.dirty=!1),t(r,i)}finally{Hp(c,d)}}finally{a&&null===e[Sa]&&Kk(e,Sa),Ra(o),zs(a?3:1,i)}}function eA(n,e,t){if(vv(e)){const r=Wr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Wr(r)}}}function tA(n,e,t){$d()&&(function oK(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;yl(t)&&function fK(n,e,t){const r=Ei(e,n),i=eF(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=BE(n,UE(n,i,null,o,r,e,null,n[gl].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||m(t,e),Ii(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=Ho(e,n,a,t);Ii(c,e),null!==o&&pK(0,a-i,c,l,0,o),vs(l)&&($i(t.index,e)[Bn]=Ho(e,n,a,t))}}(n,e,t,Ei(t,e)),64==(64&t.flags)&&sF(n,e,t))}function nA(n,e,t=Ei){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function eF(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=rA(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function rA(n,e,t,r,i,s,o,a,l,c,d){const p=It+r,_=p+i,v=function q8(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:ut);return t}(p,_),b="function"==typeof c?c():c;return v[Me]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1,ssrId:d}}let tF=n=>null;function nF(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?rF(t,e,i,s):r.hasOwnProperty(i)&&rF(t,e,r[i],s)}return t}function rF(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Ts(n,e,t,r,i,s,o,a){const l=Ei(e,t);let d,c=e.inputs;!a&&null!=c&&(d=c[r])?(lA(n,t,d,r,i),yl(e)&&function nK(n,e){const t=$i(e,n);16&t[lt]||(t[lt]|=64)}(t,e.index)):3&e.type&&(r=function tK(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function iA(n,e,t,r){if($d()){const i=null===r?null:{"":-1},s=function lK(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Hc(e,o.selectors,!1))if(r||(r=[]),vs(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),sA(n,e,a.length)}else r.unshift(o),sA(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&iF(n,e,t,o,i,a),i&&function cK(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new _e(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=jc(t.mergedAttrs,t.attrs)}function iF(n,e,t,r,i,s){for(let c=0;c<r.length;c++)Z(m(t,e),n,r[c].type);!function dK(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const d=r[c];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,l=Vg(n,e,r.length,null);for(let c=0;c<r.length;c++){const d=r[c];t.mergedAttrs=jc(t.mergedAttrs,d.hostAttrs),hK(n,t,e,l,d),uK(l,d,i),null!==d.contentQueries&&(t.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=64);const p=d.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function eK(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let d=e.directiveStart;d<i;d++){const p=s[d],_=t?t.get(p):null,b=_?_.outputs:null;l=nF(p.inputs,d,l,_?_.inputs:null),c=nF(p.outputs,d,c,b);const D=null===l||null===o||Mp(e)?null:gK(l,d,o);a.push(D)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function sF(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function zT(){return Je.lFrame.currentDirectiveIndex}();try{Ra(s);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];lg(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&aK(l,c)}}finally{Ra(-1),lg(o)}}function aK(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function sA(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function uK(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;vs(e)&&(t[""]=n)}}function hK(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Il(i.type)),o=new bl(s,vs(i),ve);n.blueprint[r]=o,t[r]=o,function iK(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function sK(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Vg(n,t,i.hostVars,ut),i)}function Wo(n,e,t,r,i,s){const o=Ei(n,e);!function oA(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?st(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[nt],o,s,n.value,t,r,i)}function pK(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)oF(r,t,o[a++],o[a++],o[a++])}function oF(n,e,t,r,i){const s=Wr(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{Wr(s)}}function gK(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function aF(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function lF(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];ug(t[r]),o.contentQueries(2,e[s],s)}}}function BE(n,e){return n[zc]?n[Pd][ys]=e:n[zc]=e,n[Pd]=e,e}function aA(n,e,t){ug(0);const r=Wr(null);try{e(n,t)}finally{Wr(r)}}function hF(n,e){const t=n[Lo],r=t?t.get(Fa,null):null;r&&r.handleError(e)}function lA(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];oF(n.data[o],e[o],r,a,i)}}function Va(n,e,t){const r=wl(e,n);!function BO(n,e,t){n.setValue(e,t)}(n[nt],r,t)}function mK(n,e){const t=$i(e,n),r=t[Me];!function _K(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Un];null!==i&&null===t[uo]&&(t[uo]=Hb(i,t[Lo])),cA(r,t,t[Bn])}function cA(n,e,t){hg(e);try{const r=n.viewQuery;null!==r&&aA(1,r,t);const i=n.template;null!==i&&Zk(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&lF(n,e),n.staticViewQueries&&aA(2,n.viewQuery,t);const s=n.components;null!==s&&function yK(n,e){for(let t=0;t<e.length;t++)mK(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[lt]&=-5,fg()}}let fF=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function qp(n,e,t){const r=Object.create(OT);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Od(r),run:()=>{if(r.dirty=!1,r.hasRun&&!zp(r))return;r.hasRun=!0;const o=$p(r);try{r.cleanupFn(),r.cleanupFn=Fv,r.fn(i)}finally{Hp(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,c=>{this.all.has(c)&&this.queue.set(c,s)},i);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Be({token:n,providedIn:"root",factory:()=>new n})}}return n})();function jE(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Ln(i,a):2==s&&(r=Ln(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ug(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(rn(s)),vi(s)&&pF(s,r);const o=t.type;if(8&o)Ug(n,e,t.child,r);else if(32&o){const a=pb(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=QO(e,t);if(Array.isArray(a))r.push(...a);else{const l=Dg(e[jn]);Ug(l[Me],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function pF(n,e){for(let t=Pr;t<n.length;t++){const r=n[t],i=r[Me].firstChild;null!==i&&Ug(r[Me],r,i,e)}n[ii]!==n[Un]&&e.push(n[ii])}function $E(n,e,t,r=!0){const i=e[gl],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{gF(n,e,n.template,t)}catch(l){throw r&&hF(e,l),l}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function gF(n,e,t,r){const i=e[lt];if(256!=(256&i)){e[gl].effectManager?.flush(),hg(e);try{Bv(e),function sg(n){return Je.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Zk(n,e,t,2,r);const o=3==(3&i);if(o){const c=n.preOrderCheckHooks;null!==c&&Gd(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Tl(e,c,0,null),ru(e,0)}if(function IK(n){for(let e=LO(n);null!==e;e=VO(e)){if(!e[yv])continue;const t=e[_l];for(let r=0;r<t.length;r++){Zp(t[r])}}}(e),mF(e,2),null!==n.contentQueries&&lF(n,e),o){const c=n.contentCheckHooks;null!==c&&Gd(e,c)}else{const c=n.contentHooks;null!==c&&Tl(e,c,1),ru(e,1)}!function G8(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=qk(e,Gc);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Ra(~s);else{const o=s,a=t[++i],l=t[++i];ag(a,o),r.dirty=!1;const c=$p(r);try{l(2,e[o])}finally{Hp(r,c)}}}}finally{null===e[Gc]&&Kk(e,Gc),Ra(-1)}}(n,e);const a=n.components;null!==a&&yF(e,a,0);const l=n.viewQuery;if(null!==l&&aA(2,l,r),o){const c=n.viewCheckHooks;null!==c&&Gd(e,c)}else{const c=n.viewHooks;null!==c&&Tl(e,c,2),ru(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[lt]&=-73,jv(e)}finally{fg()}}}function mF(n,e){for(let t=LO(n);null!==t;t=VO(t))for(let r=Pr;r<t.length;r++)_F(t[r],e)}function wK(n,e,t){_F($i(e,n),t)}function _F(n,e){if(!function Xp(n){return 128==(128&n[lt])}(n))return;const t=n[Me],r=n[lt];if(80&r&&0===e||1024&r||2===e)gF(t,n,t.template,n[Bn]);else if(n[ba]>0){mF(n,1);const i=t.components;null!==i&&yF(n,i,1)}}function yF(n,e,t){for(let r=0;r<e.length;r++)wK(n,e[r],t)}class Bg{get rootNodes(){const e=this._lView,t=e[Me];return Ug(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bn]}set context(e){this._lView[Bn]=e}get destroyed(){return 256==(256&this._lView[lt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[hn];if(vi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(yE(e,r),aE(t,r))}this._attachedToViewContainer=!1}mb(this._lView[Me],this._lView)}onDestroy(e){!function $v(n,e){if(256==(256&n[lt]))throw new _e(911,!1);null===n[Hs]&&(n[Hs]=[]),n[Hs].push(e)}(this._lView,e)}markForCheck(){Lg(this._cdRefInjectingView||this._lView)}detach(){this._lView[lt]&=-129}reattach(){this._lView[lt]|=128}detectChanges(){$E(this._lView[Me],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function h9(n,e){Rg(n,e,e[nt],2,null,null)}(this._lView[Me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=e}}class CK extends Bg{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;$E(e[Me],e,e[Bn],!1)}checkNoChanges(){}get context(){return null}}class vF extends kE{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=xt(e);return new jg(t,this.ngModule)}}function EF(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class bK{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=hl(r);const i=this.injector.get(e,Gb,r);return i!==Gb||t===Gb?i:this.parentInjector.get(e,t,r)}}class jg extends Tk{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=EF(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return EF(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Lp(n){return n.map(Dd).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof ws?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new bK(e,s):e,a=o.get(Ak,null);if(null===a)throw new _e(407,!1);const p={rendererFactory:a,sanitizer:o.get(I8,null),effectManager:o.get(fF,null),afterRenderEventManager:o.get(Xb,null)},_=a.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?function K8(n,e,t,r){const s=r.get(Hk,!1)||t===$r.ShadowDom,o=n.selectRootElement(e,s);return function Q8(n){tF(n)}(o),o}(_,r,this.componentDef.encapsulation,o):_E(_,v,function TK(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(v)),H=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let V=null;null!==b&&(V=Hb(b,o,!0));const Y=rA(0,null,null,1,0,null,null,null,null,null,null),ue=UE(null,Y,null,H,null,null,p,_,o,null,V);let be,$e;hg(ue);try{const U=this.componentDef;let N,F=null;U.findHostDirectiveDefs?(N=[],F=new Map,U.findHostDirectiveDefs(U,N,F),N.push(U)):N=[U];const j=function SK(n,e){const t=n[Me],r=It;return n[r]=e,mh(t,r,2,"#host",null)}(ue,b),z=function DK(n,e,t,r,i,s,o){const a=i[Me];!function xK(n,e,t,r){for(const i of n)e.mergedAttrs=jc(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(jE(e,e.mergedAttrs,!0),null!==t&&ZO(r,t,e))}(r,n,e,o);let l=null;null!==e&&(l=Hb(e,i[Lo]));const c=s.rendererFactory.createRenderer(e,t);let d=16;t.signals?d=4096:t.onPush&&(d=64);const p=UE(i,eF(t),null,d,i[n.index],n,s,c,null,null,l);return a.firstCreatePass&&sA(a,n,r.length-1),BE(i,p),i[n.index]=p}(j,b,U,N,ue,p,_);$e=Ud(Y,It),b&&function PK(n,e,t,r){if(r)Bc(n,t,["ng-version",Sk.full]);else{const{attrs:i,classes:s}=function pv(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Ui(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Bc(n,t,i),s&&s.length>0&&XO(n,t,s.join(" "))}}(_,U,b,r),void 0!==t&&function MK(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}($e,this.ngContentSelectors,t),be=function RK(n,e,t,r,i,s){const o=Er(),a=i[Me],l=Ei(o,i);iF(a,i,o,t,null,r);for(let d=0;d<t.length;d++)Ii(Ho(i,a,o.directiveStart+d,o),i);sF(a,i,o),l&&Ii(l,i);const c=Ho(i,a,o.directiveStart+o.componentOffset,o);if(n[Bn]=i[Bn]=c,null!==s)for(const d of s)d(c,e);return eA(a,o,n),c}(z,U,N,F,ue,[NK]),cA(Y,ue,null)}finally{fg()}return new AK(this.componentType,be,hh($e,ue),ue,$e)}}class AK extends g8{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new CK(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;lA(s[Me],s,i,e,t),this.previousInputValues.set(e,t),Lg($i(this._tNode.index,s))}}get injector(){return new Gr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function NK(){const n=Er();Wd(he()[Me],n)}function ln(n){let e=function IF(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(vs(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new _e(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=HE(n.inputs),o.inputTransforms=HE(n.inputTransforms),o.declaredInputs=HE(n.declaredInputs),o.outputs=HE(n.outputs);const a=i.hostBindings;a&&LK(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&kK(n,l),c&&FK(n,c),yn(n.inputs,i.inputs),yn(n.declaredInputs,i.declaredInputs),yn(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),yn(o.inputTransforms,i.inputTransforms)),vs(i)&&i.data.animation){const d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===ln&&(t=!1)}}e=Object.getPrototypeOf(e)}!function OK(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=jc(i.hostAttrs,t=jc(t,i.hostAttrs))}}(r)}function HE(n){return n===_i?{}:n===Ht?[]:n}function kK(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function FK(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function LK(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function bF(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function zE(n){return!!uA(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function uA(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function wi(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function uu(n,e,t,r){const i=wi(n,e,t);return wi(n,e+1,r)||i}function qo(n,e,t,r){const i=he();return wi(i,xa(),e)&&(Rt(),Wo(vn(),i,n,e,t,r)),qo}function yh(n,e,t,r){return wi(n,xa(),t)?e+st(t)+r:ut}function Ih(n,e,t,r,i,s,o,a,l,c){const p=function qs(n,e,t,r,i,s){const o=uu(n,e,t,r);return uu(n,e+2,i,s)||o}(n,function go(){return Je.lFrame.bindingIndex}(),t,i,o,l);return Ws(4),p?e+st(t)+r+st(i)+s+st(o)+a+st(l)+c:ut}function qr(n,e,t,r,i,s,o,a){const l=he(),c=Rt(),d=n+It,p=c.firstCreatePass?function lQ(n,e,t,r,i,s,o,a,l){const c=e.consts,d=mh(e,n,4,o||null,Uo(c,a));iA(e,t,d,Uo(c,l)),Wd(e,d);const p=d.tView=rA(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,d),p.queries=e.queries.embeddedTView(d)),d}(d,c,l,e,t,r,i,s,o):c.data[d];ss(p,!1);const _=VF(c,l,p,n);zd()&&EE(c,l,_,p),Ii(_,l),BE(l,l[d]=aF(_,l,_,p)),vl(p)&&tA(c,l,p),null!=o&&nA(l,p,a)}let VF=function UF(n,e,t,r){return jo(!0),e[nt].createComment("")};function Ko(n){return function Cl(n,e){return n[e]}(function rg(){return Je.lFrame.contextLView}(),It+n)}function yt(n,e,t){const r=he();return wi(r,xa(),e)&&Ts(Rt(),vn(),r,n,e,r[nt],t,!1),yt}function mA(n,e,t,r,i){const o=i?"class":"style";lA(n,t,e.inputs[o],o,r)}function ee(n,e,t,r){const i=he(),s=Rt(),o=It+n,a=i[nt],l=s.firstCreatePass?function hQ(n,e,t,r,i,s){const o=e.consts,l=mh(e,n,2,r,Uo(o,i));return iA(e,t,l,Uo(o,s)),null!==l.attrs&&jE(l,l.attrs,!1),null!==l.mergedAttrs&&jE(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],c=BF(s,i,l,a,e,n);i[o]=c;const d=vl(l);return ss(l,!0),ZO(a,c,l),32!=(32&l.flags)&&zd()&&EE(s,i,c,l),0===function UT(){return Je.lFrame.elementDepthCount}()&&Ii(c,i),function BT(){Je.lFrame.elementDepthCount++}(),d&&(tA(s,i,l),eA(s,l,i)),null!==r&&nA(i,l),ee}function re(){let n=Er();ng()?function tu(){Je.lFrame.isParent=!1}():(n=n.parent,ss(n,!1));const e=n;(function jT(n){return Je.skipHydrationRootTNode===n})(e)&&function $T(){Je.skipHydrationRootTNode=null}(),function tg(){Je.lFrame.elementDepthCount--}();const t=Rt();return t.firstCreatePass&&(Wd(t,n),vv(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function nE(n){return 0!=(8&n.flags)}(e)&&mA(t,e,he(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Kd(n){return 0!=(16&n.flags)}(e)&&mA(t,e,he(),e.stylesWithoutHost,!1),re}function kr(n,e,t,r){return ee(n,e,t,r),re(),kr}let BF=(n,e,t,r,i,s)=>(jo(!0),_E(r,i,function Xv(){return Je.lFrame.currentNamespace}()));function Qo(){return he()}function Gg(n){return!!n&&"function"==typeof n.then}function HF(n){return!!n&&"function"==typeof n.subscribe}function $t(n,e,t,r){const i=he(),s=Rt(),o=Er();return function WF(n,e,t,r,i,s,o){const a=vl(r),c=n.firstCreatePass&&function uF(n){return n.cleanup||(n.cleanup=[])}(n),d=e[Bn],p=function cF(n){return n[pl]||(n[pl]=[])}(e);let _=!0;if(3&r.type||o){const D=Ei(r,e),P=o?o(D):D,H=p.length,V=o?ue=>o(rn(ue[r.index])):r.index;let Y=null;if(!o&&a&&(Y=function yQ(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[pl],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==Y)(Y.__ngLastListenerFn__||Y).__ngNextListenerFn__=s,Y.__ngLastListenerFn__=s,_=!1;else{s=qF(r,e,d,s,!1);const ue=t.listen(P,i,s);p.push(s,ue),c&&c.push(i,V,H,H+1)}}else s=qF(r,e,d,s,!1);const v=r.outputs;let b;if(_&&null!==v&&(b=v[i])){const D=b.length;if(D)for(let P=0;P<D;P+=2){const be=e[b[P]][b[P+1]].subscribe(s),$e=p.length;p.push(s,be),c&&c.push(i,r.index,$e,-($e+1))}}}(s,i,i[nt],o,n,e,r),$t}function GF(n,e,t,r){try{return zs(6,e,t),!1!==t(r)}catch(i){return hF(n,i),!1}finally{zs(7,e,t)}}function qF(n,e,t,r,i){return function s(o){if(o===Function)return r;Lg(n.componentOffset>-1?$i(n.index,e):e);let l=GF(e,t,r,o),c=s.__ngNextListenerFn__;for(;c;)l=GF(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&o.preventDefault(),l}}function An(n=1){return function GT(n){return(Je.lFrame.contextLView=function qT(n,e){for(;n>0;)e=e[ml],n--;return e}(n,Je.lFrame.contextLView))[Bn]}(n)}function Ah(n,e,t){return QE(n,"",e,"",t),Ah}function QE(n,e,t,r,i){const s=he(),o=yh(s,e,t,r);return o!==ut&&Ts(Rt(),vn(),s,n,o,s[nt],i,!1),QE}function YE(n,e){return n<<17|e<<2}function Dl(n){return n>>17&32767}function vA(n){return 2|n}function du(n){return(131068&n)>>2}function EA(n,e){return-131069&n|e<<2}function IA(n){return 1|n}function nL(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Dl(s):du(s),l=!1;for(;0!==a&&(!1===l||o);){const d=n[a+1];SQ(n[a],e)&&(l=!0,n[a+1]=r?IA(d):vA(d)),a=r?Dl(d):du(d)}l&&(n[t+1]=r?vA(s):IA(s))}function SQ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&th(n,e)>=0}function xl(n,e){return function mo(n,e,t,r){const i=he(),s=Rt(),o=Ws(2);s.firstUpdatePass&&function dL(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[si()],o=function uL(n,e){return e>=n.expandoStartIndex}(n,t);(function gL(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function FQ(n,e,t,r){const i=function cg(n){const e=Je.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=qg(t=wA(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=wA(i,n,e,t,r),null===s){let l=function LQ(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==du(r))return n[Dl(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=wA(null,n,e,l[1],r),l=qg(l,e.attrs,r),function VQ(n,e,t,r){n[Dl(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function UQ(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=qg(r,n[s].hostAttrs,t);return qg(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function bQ(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Dl(o),l=du(o);n[r]=t;let d,c=!1;if(Array.isArray(t)?(d=t[1],(null===d||th(t,d)>0)&&(c=!0)):d=t,i)if(0!==l){const _=Dl(n[a+1]);n[r+1]=YE(_,a),0!==_&&(n[_+1]=EA(n[_+1],r)),n[a+1]=function CQ(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=YE(a,0),0!==a&&(n[a+1]=EA(n[a+1],r)),a=r;else n[r+1]=YE(l,0),0===a?a=r:n[l+1]=EA(n[l+1],r),l=r;c&&(n[r+1]=vA(n[r+1])),nL(n,d,r,!0),nL(n,d,r,!1),function AQ(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&th(s,e)>=0&&(t[r+1]=IA(t[r+1]))}(e,d,n,r,s),o=YE(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==ut&&wi(i,o,e)&&function fL(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],d=function TQ(n){return 1==(1&n)}(c)?pL(l,e,t,i,du(c),o):void 0;JE(d)||(JE(s)||function wQ(n){return 2==(2&n)}(c)&&(s=pL(l,null,t,i,a,o)),function w9(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Al.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Al.Important),n.setStyle(t,r,i,s))}}(r,o,wl(si(),t),i,s))}(s,s.data[si()],i,i[nt],n,i[o+1]=function HQ(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Se(Sl(n)))),n}(e,t),r,o)}(n,e,null,!0),xl}function wA(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=qg(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function qg(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Es(n,o,!!t||e[++s]))}return void 0===n?null:n}function pL(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),d=c?l[1]:l,p=null===d;let _=t[i+1];_===ut&&(_=p?Ht:void 0);let v=p?sb(_,r):d===r?_:void 0;if(c&&!JE(v)&&(v=sb(l,r)),JE(v)&&(a=v,o))return a;const b=n[i+1];i=o?Dl(b):du(b)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=sb(l,r))}return a}function JE(n){return void 0!==n}function ce(n,e=""){const t=he(),r=Rt(),i=n+It,s=r.firstCreatePass?mh(r,i,1,e,null):r.data[i],o=mL(r,t,s,e,n);t[i]=o,zd()&&EE(r,t,o,s),ss(s,!1)}let mL=(n,e,t,r,i)=>(jo(!0),function mE(n,e){return n.createText(e)}(e[nt],r));function Ua(n,e,t){const r=he(),i=yh(r,n,e,t);return i!==ut&&Va(r,si(),i),Ua}function CA(n,e,t,r,i,s,o,a,l){const c=he(),d=Ih(c,n,e,t,r,i,s,o,a,l);return d!==ut&&Va(c,si(),d),CA}const xh="en-US";let VL=xh;function AA(n,e,t,r,i){if(n=Ze(n),Array.isArray(n))for(let s=0;s<n.length;s++)AA(n[s],e,t,r,i);else{const s=Rt(),o=he(),a=Er();let l=cu(n)?n:Ze(n.provide);const c=yk(n),d=1048575&a.providerIndexes,p=a.directiveStart,_=a.providerIndexes>>20;if(cu(n)||!n.multi){const v=new bl(c,i,ve),b=DA(l,e,i?d:d+_,p);-1===b?(Z(m(a,o),s,l),SA(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),o.push(v)):(t[b]=v,o[b]=v)}else{const v=DA(l,e,d+_,p),b=DA(l,e,d,d+_),P=b>=0&&t[b];if(i&&!P||!i&&!(v>=0&&t[v])){Z(m(a,o),s,l);const H=function uJ(n,e,t,r,i){const s=new bl(n,t,ve);return s.multi=[],s.index=e,s.componentProviders=0,cV(s,i,r&&!t),s}(i?cJ:lJ,t.length,i,r,c);!i&&P&&(t[b].providerFactory=H),SA(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(H),o.push(H)}else SA(s,n,v>-1?v:b,cV(t[i?b:v],c,!i&&r));!i&&r&&P&&t[b].componentProviders++}}}function SA(n,e,t,r){const i=cu(e),s=function X9(n){return!!n.useClass}(e);if(i||s){const l=(s?Ze(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const d=c.indexOf(t);-1===d?c.push(t,[r,l]):c[d+1].push(r,l)}else c.push(t,l)}}}function cV(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function DA(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function lJ(n,e,t,r){return xA(this.multi,[])}function cJ(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ho(t,t[Me],this.providerFactory.index,r);s=a.slice(0,o),xA(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],xA(i,s);return s}function xA(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Qn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function aJ(n,e,t){const r=Rt();if(r.firstCreatePass){const i=vs(n);AA(t,r.data,r.blueprint,i,!0),AA(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class fu{}class uV{}class RA extends fu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vF(this);const i=Bi(e);this._bootstrapComponents=La(i.bootstrap),this._r3Injector=Mk(e,t,[{provide:fu,useValue:this},{provide:kE,useValue:this.componentFactoryResolver},...r],Se(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class PA extends uV{constructor(e){super(),this.moduleType=e}create(e){return new RA(this.moduleType,e,[])}}class dV extends fu{constructor(e){super(),this.componentFactoryResolver=new vF(this),this.instance=null;const t=new lh([...e.providers,{provide:fu,useValue:this},{provide:kE,useValue:this.componentFactoryResolver}],e.parent||DE(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function MA(n,e,t=null){return new dV({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let fJ=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=pk(0,t.type),i=r.length>0?MA([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Be({token:n,providedIn:"environment",factory:()=>new n(we(ws))})}}return n})();function hV(n){n.getStandaloneInjector=e=>e.get(fJ).getOrCreateStandaloneInjector(n)}function jJ(n,e,t,r=!0){const i=e[Me];if(function p9(n,e,t,r){const i=Pr+r,s=t.length;r>0&&(t[i-1][ys]=e),r<s-Pr?(e[ys]=t[i],mO(t,Pr+r,e)):(t.push(e),e[ys]=null),e[hn]=t;const o=e[Wc];null!==o&&t!==o&&function g9(n,e){const t=n[_l];e[jn]!==e[hn][hn][jn]&&(n[yv]=!0),null===t?n[_l]=[e]:t.push(e)}(o,e);const a=e[$s];null!==a&&a.insertView(n),e[lt]|=128}(i,e,n,t),r){const s=Eb(t,n),o=e[nt],a=vE(o,n[ii]);null!==a&&function d9(n,e,t,r,i,s){r[Un]=i,r[zr]=e,Rg(n,r,t,1,i,s)}(i,n[zr],o,e,a,s)}}let Ba=(()=>{class n{static{this.__NG_ELEMENT_ID__=zJ}}return n})();const $J=Ba,HJ=class extends $J{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function BJ(n,e,t,r){const i=e.tView,a=UE(n,i,t,4096&n[lt]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Wc]=n[e.index];const c=n[$s];return null!==c&&(a[$s]=c.createEmbeddedView(i)),cA(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Bg(i)}};function zJ(){return function nI(n,e){return 4&n.type?new HJ(e,n,hh(n,e)):null}(Er(),he())}let yo=(()=>{class n{static{this.__NG_ELEMENT_ID__=YJ}}return n})();function YJ(){return function RV(n,e){let t;const r=e[n.index];return vi(r)?t=r:(t=aF(r,e,null,n),e[n.index]=t,BE(e,t)),PV(t,e,n,r),new DV(t,n,e)}(Er(),he())}const JJ=yo,DV=class extends JJ{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return hh(this._hostTNode,this._hostLView)}get injector(){return new Gr(this._hostTNode,this._hostLView)}get parentInjector(){const e=L(this._hostTNode,this._hostLView);if(mg(e)){const t=su(e,this._hostLView),r=iu(e);return new Gr(t[Me].data[r+8],t)}return new Gr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=xV(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Pr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Tg(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const D=t||{};a=D.index,r=D.injector,i=D.projectableNodes,s=D.environmentInjector||D.ngModuleRef}const l=o?e:new jg(xt(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const P=(o?c:this.parentInjector).get(ws,null);P&&(s=P)}xt(l.componentType??{});const v=l.create(c,i,null,s);return this.insertImpl(v.hostView,a,false),v}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function Uv(n){return vi(n[hn])}(i)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=i[hn],d=new DV(c,c[zr],c[hn]);d.detach(d.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return jJ(a,i,o,!r),e.attachToViewContainerRef(),mO(kA(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=xV(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=yE(this._lContainer,t);r&&(aE(kA(this._lContainer),t),mb(r[Me],r))}detach(e){const t=this._adjustIndex(e,-1),r=yE(this._lContainer,t);return r&&null!=aE(kA(this._lContainer),t)?new Bg(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function xV(n){return n[8]}function kA(n){return n[8]||(n[8]=[])}let PV=function MV(n,e,t,r){if(n[ii])return;let i;i=8&t.type?rn(r):function XJ(n,e){const t=n[nt],r=t.createComment(""),i=Ei(e,n);return au(t,vE(t,i),r,function v9(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[ii]=i};const GA=new Ce("Application Initializer");let qA=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Oe(GA,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Gg(s))t.push(s);else if(HF(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),r2=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const ja=new Ce("LocaleId",{providedIn:"root",factory:()=>Oe(ja,Et.Optional|Et.SkipSelf)||function xX(){return typeof $localize<"u"&&$localize.locale||xh}()});let sI=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new T(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class MX{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let i2=(()=>{class n{compileModuleSync(t){return new PA(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=La(Bi(t).declarations).reduce((o,a)=>{const l=xt(a);return l&&o.push(new jg(l)),o},[]);return new MX(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const l2=new Ce(""),aI=new Ce("");let XA,YA=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,XA||(function eZ(n){XA=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{en.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(we(en),we(JA),we(aI))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})(),JA=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return XA?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Rl=null;const c2=new Ce("AllowMultipleToken"),ZA=new Ce("PlatformDestroyListeners"),eS=new Ce("appBootstrapListener");class d2{constructor(e,t){this.name=e,this.token=t}}function f2(n,e,t=[]){const r=`Platform: ${e}`,i=new Ce(r);return(s=[])=>{let o=tS();if(!o||o.injector.get(c2,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function rZ(n){if(Rl&&!Rl.get(c2,!1))throw new _e(400,!1);(function u2(){!function cO(n){Mv=n}(()=>{throw new _e(600,!1)})})(),Rl=n;const e=n.get(g2);(function h2(n){n.get(vk,null)?.forEach(t=>t())})(n)}(function p2(n=[],e){return as.create({name:e,providers:[{provide:Mb,useValue:"platform"},{provide:ZA,useValue:new Set([()=>Rl=null])},...n]})}(a,r))}return function sZ(n){const e=tS();if(!e)throw new _e(401,!1);return e}()}}function tS(){return Rl?.get(g2)??null}let g2=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function oZ(n="zone.js",e){return"noop"===n?new O8:"zone.js"===n?new en(e):n}(r?.ngZone,function m2(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function hJ(n,e,t){return new RA(n,e,t)}(t.moduleType,this.injector,function I2(n){return[{provide:en,useFactory:n},{provide:Og,multi:!0,useFactory:()=>{const e=Oe(lZ,{optional:!0});return()=>e.initialize()}},{provide:E2,useFactory:aZ},{provide:Lk,useFactory:Vk}]}(()=>i)),o=s.injector.get(Fa,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{lI(this._modules,s),a.unsubscribe()})}),function _2(n,e,t){try{const r=t();return Gg(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(qA);return a.runInitializers(),a.donePromise.then(()=>(function UL(n){Li(n,"Expected localeId to be defined"),"string"==typeof n&&(VL=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(ja,xh)||xh),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=y2({},r);return function tZ(n,e,t){const r=new PA(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Mh);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new _e(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(ZA,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(we(as))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function y2(n,e){return Array.isArray(e)?e.reduce(y2,n):{...n,...e}}let Mh=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Oe(E2),this.zoneIsStable=Oe(Lk),this.componentTypes=[],this.components=[],this.isStable=Oe(sI).hasPendingTasks.pipe(Ee(t=>t?x(!1):this.zoneIsStable),He(),O()),this._injector=Oe(ws)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof Tk;if(!this._injector.get(qA).done)throw!i&&function Fo(n){const e=xt(n)||cr(n)||Rr(n);return null!==e&&e.standalone}(t),new _e(405,!1);let o;o=i?t:this._injector.get(kE).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function nZ(n){return n.isBoundToModule}(o)?void 0:this._injector.get(fu),c=o.create(as.NULL,[],r||o.selector,a),d=c.location.nativeElement,p=c.injector.get(l2,null);return p?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),lI(this.components,c),p?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;lI(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(eS,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>lI(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new _e(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const E2=new Ce("",{providedIn:"root",factory:()=>Oe(Fa).handleError.bind(void 0)});function aZ(){const n=Oe(en),e=Oe(Fa);return t=>n.runOutsideAngular(()=>e.handleError(t))}let lZ=(()=>{class n{constructor(){this.zone=Oe(en),this.applicationRef=Oe(Mh)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let cI=(()=>{class n{static{this.__NG_ELEMENT_ID__=uZ}}return n})();function uZ(n){return function dZ(n,e,t){if(yl(n)&&!t){const r=$i(n.index,e);return new Bg(r,r)}return 47&n.type?new Bg(e[jn],e):null}(Er(),he(),16==(16&n))}class S2{constructor(){}supports(e){return zE(e)}create(e){return new mZ(e)}}const gZ=(n,e)=>e;class mZ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||gZ}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<x2(r,i,s)?t:r,a=x2(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,d=l-i;if(c!=d){for(let _=0;_<c;_++){const v=_<s.length?s[_]:s[_]=0,b=v+_;d<=b&&b<c&&(s[_]=v+1)}s[o.previousIndex]=d-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!zE(e))throw new _e(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function zK(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new _Z(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new D2),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new D2),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class _Z{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yZ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class D2{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new yZ,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function x2(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class R2{constructor(){}supports(e){return e instanceof Map||uA(e)}create(){return new vZ}}class vZ{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||uA(e)))throw new _e(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new EZ(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class EZ{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function P2(){return new hI([new S2])}let hI=(()=>{class n{static{this.\u0275prov=Be({token:n,providedIn:"root",factory:P2})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||P2()),deps:[[n,new cE,new Is]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new _e(901,!1)}}return n})();function M2(){return new rm([new R2])}let rm=(()=>{class n{static{this.\u0275prov=Be({token:n,providedIn:"root",factory:M2})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||M2()),deps:[[n,new cE,new Is]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new _e(901,!1)}}return n})();const CZ=f2(null,"core",[]);let TZ=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(we(Mh))}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=mi({})}}return n})();function Nh(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let aS=null;function Pl(){return aS}class VZ{}const bs=new Ce("DocumentToken");let lS=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:function(){return Oe(BZ)},providedIn:"platform"})}}return n})();const UZ=new Ce("Location Initialized");let BZ=(()=>{class n extends lS{constructor(){super(),this._doc=Oe(bs),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pl().getBaseHref(this._doc)}onPopState(t){const r=Pl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Pl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function cS(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function j2(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function $a(n){return n&&"?"!==n[0]?"?"+n:n}let gu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:function(){return Oe(H2)},providedIn:"root"})}}return n})();const $2=new Ce("appBaseHref");let H2=(()=>{class n extends gu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Oe(bs).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return cS(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+$a(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+$a(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+$a(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(we(lS),we($2,8))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jZ=(()=>{class n extends gu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=cS(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+$a(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+$a(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(we(lS),we($2,8))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})(),uS=(()=>{class n{constructor(t){this._subject=new hr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function zZ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(j2(z2(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+$a(r))}normalize(t){return n.stripTrailingSlash(function HZ(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,z2(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$a(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+$a(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=$a}static{this.joinWithSlash=cS}static{this.stripTrailingSlash=j2}static{this.\u0275fac=function(r){return new(r||n)(we(gu))}}static{this.\u0275prov=Be({token:n,factory:function(){return function $Z(){return new uS(we(gu))}()},providedIn:"root"})}}return n})();function z2(n){return n.replace(/\/index.html$/,"")}function Z2(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class Ree{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let IS=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Ree(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),nU(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{nU(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ve(yo),ve(Ba),ve(hI))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function nU(n,e){n.context.$implicit=e.item}let om=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Pee,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){rU("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){rU("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ve(yo),ve(Ba))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class Pee{constructor(){this.$implicit=null,this.ngIf=null}}function rU(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Se(e)}'.`)}let sU=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:Al.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(ve(Cs),ve(rm),ve(ka))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),rte=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=mi({})}}return n})();function TI(n){return"server"===n}let ate=(()=>{class n{static{this.\u0275prov=Be({token:n,providedIn:"root",factory:()=>new lte(we(bs),window)})}}return n})();class lte{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function cte(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class lU{}class Mte extends VZ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class DS extends Mte{static makeCurrent(){!function LZ(n){aS||(aS=n)}(new DS)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Nte(){return lm=lm||document.querySelector("base"),lm?lm.getAttribute("href"):null}();return null==t?null:function Ote(n){SI=SI||document.createElement("a"),SI.setAttribute("href",n);const e=SI.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){lm=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Z2(document.cookie,e)}}let SI,lm=null,Fte=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();const xS=new Ce("EventManagerPlugins");let fU=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new _e(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(we(xS),we(en))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();class pU{constructor(e){this._doc=e}}const RS="ng-app-id";let gU=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=TI(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${RS}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(RS),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(RS,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(we(bs),we(xE),we(Ek,8),we(zo))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();const PS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},MS=/%COMP%/g,Bte=new Ce("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function _U(n,e){return e.map(t=>t.replace(MS,n))}let yU=(()=>{class n{constructor(t,r,i,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=TI(a),this.defaultRenderer=new NS(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===$r.ShadowDom&&(r={...r,encapsulation:$r.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof EU?i.applyToHost(t):i instanceof OS&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case $r.Emulated:s=new EU(l,c,r,this.appId,d,o,a,p);break;case $r.ShadowDom:return new zte(l,c,t,r,o,a,this.nonce,p);default:s=new OS(l,c,r,d,o,a,p)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(we(fU),we(gU),we(xE),we(Bte),we(bs),we(zo),we(en),we(Ek))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();class NS{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(PS[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(vU(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(vU(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new _e(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=PS[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=PS[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Al.DashCase|Al.Important)?e.style.setProperty(t,r,i&Al.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Al.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Pl().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function vU(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class zte extends NS{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=_U(i.id,i.styles);for(const d of c){const p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=d,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class OS extends NS{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?_U(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class EU extends OS{constructor(e,t,r,i,s,o,a,l){const c=i+"-"+r.id;super(e,t,r,s,o,a,l,c),this.contentAttr=function jte(n){return"_ngcontent-%COMP%".replace(MS,n)}(c),this.hostAttr=function $te(n){return"_nghost-%COMP%".replace(MS,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Wte=(()=>{class n extends pU{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(we(bs))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();const IU=["alt","control","meta","shift"],Gte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qte={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Kte=(()=>{class n extends pU{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pl().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),IU.forEach(c=>{const d=r.indexOf(c);d>-1&&(r.splice(d,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=Gte[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),IU.forEach(o=>{o!==i&&(0,qte[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(we(bs))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();const Xte=f2(CZ,"browser",[{provide:zo,useValue:"browser"},{provide:vk,useValue:function Qte(){DS.makeCurrent()},multi:!0},{provide:bs,useFactory:function Jte(){return function S9(n){Cb=n}(document),document},deps:[]}]),Zte=new Ce(""),TU=[{provide:aI,useClass:class kte{addToWindow(e){dn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new _e(5103,!1);return s},dn.getAllAngularTestabilities=()=>e.getAllTestabilities(),dn.getAllAngularRootElements=()=>e.getAllRootElements(),dn.frameworkStabilizers||(dn.frameworkStabilizers=[]),dn.frameworkStabilizers.push(r=>{const i=dn.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Pl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:l2,useClass:YA,deps:[en,JA,aI]},{provide:YA,useClass:YA,deps:[en,JA,aI]}],bU=[{provide:Mb,useValue:"root"},{provide:Fa,useFactory:function Yte(){return new Fa},deps:[]},{provide:xS,useClass:Wte,multi:!0,deps:[bs,en,zo]},{provide:xS,useClass:Kte,multi:!0,deps:[bs]},yU,gU,fU,{provide:Ak,useExisting:yU},{provide:lU,useClass:Fte,deps:[]},[]];let ene=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:xE,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(we(Zte,12))}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=mi({providers:[...bU,...TU],imports:[rte,TZ]})}}return n})(),AU=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(we(bs))}}static{this.\u0275prov=Be({token:n,factory:function(r){let i=null;return i=r?new r:function nne(){return new AU(we(bs))}(),i},providedIn:"root"})}}return n})();typeof window<"u"&&window;const{isArray:lne}=Array,{getPrototypeOf:cne,prototype:une,keys:dne}=Object;function RU(n){if(1===n.length){const e=n[0];if(lne(e))return{args:e,keys:null};if(function hne(n){return n&&"object"==typeof n&&cne(n)===une}(e)){const t=dne(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:fne}=Array;function PU(n){return pe(e=>function pne(n,e){return fne(e)?n(...e):n(e)}(n,e))}function MU(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function FS(...n){const e=ns(n),t=gs(n),{args:r,keys:i}=RU(n);if(0===r.length)return C([],e);const s=new ct(function gne(n,e,t=St){return r=>{NU(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)NU(e,()=>{const c=C(n[l],e);let d=!1;c.subscribe(se(r,p=>{s[l]=p,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>MU(i,o):St));return t?s.pipe(PU(t)):s}function NU(n,e,t){n?vr(t,n,e):e()}const DI=Ae(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function LS(...n){return function mne(){return br(1)}()(C(n,ns(n)))}function OU(n){return new ct(e=>{jt(n()).subscribe(e)})}function cm(n,e){const t=R(n)?n:()=>n,r=i=>i.error(t());return new ct(e?i=>e.schedule(r,0,i):r)}function VS(){return $((n,e)=>{let t=null;n._refCount++;const r=se(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class kU extends ct{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Q(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ot;const t=this.getSubject();e.add(this.source.subscribe(se(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ot.EMPTY)}return e}refCount(){return VS()(this)}}function kh(n){return n<=0?()=>Kn:$((e,t)=>{let r=0;e.subscribe(se(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function xI(...n){const e=ns(n);return $((t,r)=>{(e?LS(n,t,e):LS(n,t)).subscribe(r)})}function Ys(n,e){return $((t,r)=>{let i=0;t.subscribe(se(r,s=>n.call(e,s,i++)&&r.next(s)))})}function RI(n){return $((e,t)=>{let r=!1;e.subscribe(se(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function FU(n=_ne){return $((e,t)=>{let r=!1;e.subscribe(se(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function _ne(){return new DI}function Nl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ys((i,s)=>n(i,s,r)):St,kh(1),t?RI(e):FU(()=>new DI))}function Fh(n,e){return R(e)?Fn(n,e,1):Fn(n,1)}function ai(n,e,t){const r=R(n)||e||t?{next:n,error:e,complete:t}:n;return r?$((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(se(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):St}function mu(n){return $((e,t)=>{let s,r=null,i=!1;r=e.subscribe(se(t,void 0,void 0,o=>{s=jt(n(o,mu(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function PI(n,e){return $(function yne(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(se(o,d=>{const p=c++;l=a?n(l,d,p):(a=!0,d),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function US(n){return n<=0?()=>Kn:$((e,t)=>{let r=[];e.subscribe(se(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function um(n){return $((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const pt="primary",dm=Symbol("RouteTitle");class wne{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Lh(n){return new wne(n)}function Cne(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Xo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!LU(n[i],e[i]))return!1;return!0}function LU(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function VU(n){return n.length>0?n[n.length-1]:null}function Ol(n){return function ane(n){return!!n&&(n instanceof ct||R(n.lift)&&R(n.subscribe))}(n)?n:Gg(n)?C(Promise.resolve(n)):x(n)}const bne={exact:function jU(n,e,t){if(!_u(n.segments,e.segments)||!MI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!jU(n.children[r],e.children[r],t))return!1;return!0},subset:$U},UU={exact:function Ane(n,e){return Xo(n,e)},subset:function Sne(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>LU(n[t],e[t]))},ignored:()=>!0};function BU(n,e,t){return bne[t.paths](n.root,e.root,t.matrixParams)&&UU[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function $U(n,e,t){return HU(n,e,e.segments,t)}function HU(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!_u(i,t)||e.hasChildren()||!MI(i,t,r))}if(n.segments.length===t.length){if(!_u(n.segments,t)||!MI(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!$U(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(_u(n.segments,i)&&MI(n.segments,i,r)&&n.children[pt])&&HU(n.children[pt],e,s,r)}}function MI(n,e,t){return e.every((r,i)=>UU[t](n[i].parameters,r.parameters))}class Vh{constructor(e=new cn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lh(this.queryParams)),this._queryParamMap}toString(){return Rne.serialize(this)}}class cn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return NI(this)}}class hm{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Lh(this.parameters)),this._parameterMap}toString(){return GU(this)}}function _u(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let fm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:function(){return new BS},providedIn:"root"})}}return n})();class BS{parse(e){const t=new jne(e);return new Vh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${pm(e.root,!0)}`,r=function Nne(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${OI(t)}=${OI(i)}`).join("&"):`${OI(t)}=${OI(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Pne(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Rne=new BS;function NI(n){return n.segments.map(e=>GU(e)).join("/")}function pm(n,e){if(!n.hasChildren())return NI(n);if(e){const t=n.children[pt]?pm(n.children[pt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==pt&&r.push(`${i}:${pm(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function xne(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===pt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==pt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===pt?[pm(n.children[pt],!1)]:[`${i}:${pm(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[pt]?`${NI(n)}/${t[0]}`:`${NI(n)}/(${t.join("//")})`}}function zU(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function OI(n){return zU(n).replace(/%3B/gi,";")}function jS(n){return zU(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kI(n){return decodeURIComponent(n)}function WU(n){return kI(n.replace(/\+/g,"%20"))}function GU(n){return`${jS(n.path)}${function Mne(n){return Object.keys(n).map(e=>`;${jS(e)}=${jS(n[e])}`).join("")}(n.parameters)}`}const One=/^[^\/()?;#]+/;function $S(n){const e=n.match(One);return e?e[0]:""}const kne=/^[^\/()?;=#]+/,Lne=/^[^=?&#]+/,Une=/^[^&#]+/;class jne{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new cn([],{}):new cn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[pt]=new cn(e,t)),r}parseSegment(){const e=$S(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new _e(4009,!1);return this.capture(e),new hm(kI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Fne(n){const e=n.match(kne);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=$S(this.remaining);i&&(r=i,this.capture(r))}e[kI(t)]=kI(r)}parseQueryParam(e){const t=function Vne(n){const e=n.match(Lne);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Bne(n){const e=n.match(Une);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=WU(t),s=WU(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=$S(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new _e(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=pt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[pt]:new cn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new _e(4011,!1)}}function qU(n){return n.segments.length>0?new cn([],{[pt]:n}):n}function KU(n){const e={};for(const r of Object.keys(n.children)){const s=KU(n.children[r]);if(r===pt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function $ne(n){if(1===n.numberOfChildren&&n.children[pt]){const e=n.children[pt];return new cn(n.segments.concat(e.segments),e.children)}return n}(new cn(n.segments,e))}function yu(n){return n instanceof Vh}function QU(n){let e;const i=qU(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new cn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function YU(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return HS(i,i,i,t,r);const s=function zne(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new XU(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new XU(t,e,r)}(e);if(s.toRoot())return HS(i,i,new cn([],{}),t,r);const o=function Wne(n,e,t){if(n.isAbsolute)return new LI(e,!0,0);if(!t)return new LI(e,!1,NaN);if(null===t.parent)return new LI(t,!0,0);const r=FI(n.commands[0])?0:1;return function Gne(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new _e(4005,!1);i=r.segments.length}return new LI(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?mm(o.segmentGroup,o.index,s.commands):ZU(o.segmentGroup,o.index,s.commands);return HS(i,o.segmentGroup,a,t,r)}function FI(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function gm(n){return"object"==typeof n&&null!=n&&n.outlets}function HS(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`}),o=n===e?t:JU(n,e,t);const a=qU(KU(o));return new Vh(a,s,i)}function JU(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:JU(s,e,t)}),new cn(n.segments,r)}class XU{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&FI(r[0]))throw new _e(4003,!1);const i=r.find(gm);if(i&&i!==VU(r))throw new _e(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class LI{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ZU(n,e,t){if(n||(n=new cn([],{})),0===n.segments.length&&n.hasChildren())return mm(n,e,t);const r=function Kne(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(gm(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!tB(l,c,o))return s;r+=2}else{if(!tB(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new cn(n.segments.slice(0,r.pathIndex),{});return s.children[pt]=new cn(n.segments.slice(r.pathIndex),n.children),mm(s,0,i)}return r.match&&0===i.length?new cn(n.segments,{}):r.match&&!n.hasChildren()?zS(n,e,t):r.match?mm(n,0,i):zS(n,e,t)}function mm(n,e,t){if(0===t.length)return new cn(n.segments,{});{const r=function qne(n){return gm(n[0])?n[0].outlets:{[pt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==pt)&&n.children[pt]&&1===n.numberOfChildren&&0===n.children[pt].segments.length){const s=mm(n.children[pt],e,t);return new cn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=ZU(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new cn(n.segments,i)}}function zS(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(gm(s)){const l=Qne(s.outlets);return new cn(r,l)}if(0===i&&FI(t[0])){r.push(new hm(n.segments[e].path,eB(t[0]))),i++;continue}const o=gm(s)?s.outlets[pt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&FI(a)?(r.push(new hm(o,eB(a))),i+=2):(r.push(new hm(o,{})),i++)}return new cn(r,{})}function Qne(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=zS(new cn([],{}),0,r))}),e}function eB(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function tB(n,e,t){return n==t.path&&Xo(e,t.parameters)}const _m="imperative";class Zo{constructor(e,t){this.id=e,this.url=t}}class VI extends Zo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kl extends Zo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ym extends Zo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Uh extends Zo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class UI extends Zo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nB extends Zo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yne extends Zo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jne extends Zo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Xne extends Zo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zne extends Zo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ere{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class tre{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nre{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rre{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ire{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sre{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rB{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class WS{}class GS{constructor(e){this.url=e}}class ore{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new vm,this.attachRef=null}}let vm=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ore,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class iB{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=qS(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=qS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=KS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return KS(e,this._root).map(t=>t.value)}}function qS(n,e){if(n===e.value)return e;for(const t of e.children){const r=qS(n,t);if(r)return r}return null}function KS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=KS(n,t);if(r.length)return r.unshift(e),r}return[]}class Wa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Bh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sB extends iB{constructor(e,t){super(e),this.snapshot=t,QS(this,e)}toString(){return this.snapshot.toString()}}function oB(n,e){const t=function are(n,e){const o=new BI([],{},{},"",{},pt,e,null,{});return new lB("",new Wa(o,[]))}(0,e),r=new T([new hm("",{})]),i=new T({}),s=new T({}),o=new T({}),a=new T(""),l=new jh(r,i,o,a,s,pt,e,t.root);return l.snapshot=t.root,new sB(new Wa(l,[]),t)}class jh{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(pe(c=>c[dm]))??x(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(pe(e=>Lh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(pe(e=>Lh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function aB(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function lre(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class BI{get title(){return this.data?.[dm]}constructor(e,t,r,i,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Lh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lB extends iB{constructor(e,t){super(t),this.url=e,QS(this,t)}toString(){return cB(this._root)}}function QS(n,e){e.value._routerState=n,e.children.forEach(t=>QS(n,t))}function cB(n){const e=n.children.length>0?` { ${n.children.map(cB).join(", ")} } `:"";return`${n.value}${e}`}function YS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Xo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Xo(e.params,t.params)||n.paramsSubject.next(t.params),function Tne(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Xo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Xo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function JS(n,e){const t=Xo(n.params,e.params)&&function Dne(n,e){return _u(n,e)&&n.every((t,r)=>Xo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||JS(n.parent,e.parent))}let XS=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=pt,this.activateEvents=new hr,this.deactivateEvents=new hr,this.attachEvents=new hr,this.detachEvents=new hr,this.parentContexts=Oe(vm),this.location=Oe(yo),this.changeDetector=Oe(cI),this.environmentInjector=Oe(ws),this.inputBinder=Oe(jI,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _e(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _e(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _e(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new _e(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new cre(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ji]})}}return n})();class cre{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===jh?this.route:e===vm?this.childContexts:this.parent.get(e,t)}}const jI=new Ce("");let uB=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=FS([r.queryParams,r.params,r.data]).pipe(Ee(([s,o,a],l)=>(a={...s,...o,...a},0===l?x(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function FZ(n){const e=xt(n);if(!e)return null;const t=new jg(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();function Em(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function dre(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Em(n,r,i);return Em(n,r)})}(n,e,t);return new Wa(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Em(n,a)),o}}const r=function hre(n){return new jh(new T(n.url),new T(n.params),new T(n.queryParams),new T(n.fragment),new T(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Em(n,s));return new Wa(r,i)}}const ZS="ngNavigationCancelingError";function dB(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=yu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=hB(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function hB(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ZS]=!0,r.cancellationCode=e,t&&(r.url=t),r}function fB(n){return n&&n[ZS]}let pB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ni({type:n,selectors:[["ng-component"]],standalone:!0,features:[hV],decls:1,vars:0,template:function(r,i){1&r&&kr(0,"router-outlet")},dependencies:[XS],encapsulation:2})}}return n})();function eD(n){const e=n.children&&n.children.map(eD),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==pt&&(t.component=pB),t}function Io(n){return n.outlet||pt}function Im(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Ere{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),YS(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Bh(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Bh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Bh(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Bh(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new sre(s.value.snapshot))}),e.children.length&&this.forwardEvent(new rre(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(YS(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),YS(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Im(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class gB{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $I{constructor(e,t){this.component=e,this.route=t}}function Ire(n,e,t){const r=n._root;return wm(r,e?e._root:null,t,[r.value])}function $h(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function ev(n){return null!==Cd(n)}(n)?e.get(n):n:r}function wm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Bh(e);return n.children.forEach(o=>{(function Cre(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Tre(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!_u(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_u(n.url,e.url)||!Xo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!JS(n,e)||!Xo(n.queryParams,e.queryParams);default:return!JS(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new gB(r)):(s.data=o.data,s._resolvedData=o._resolvedData),wm(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $I(a.outlet.component,o))}else o&&Cm(e,a,i),i.canActivateChecks.push(new gB(r)),wm(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Cm(a,t.getContext(o),i)),i}function Cm(n,e,t){const r=Bh(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Cm(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new $I(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Tm(n){return"function"==typeof n}function mB(n){return n instanceof DI||"EmptyError"===n?.name}const HI=Symbol("INITIAL_VALUE");function Hh(){return Ee(n=>FS(n.map(e=>e.pipe(kh(1),xI(HI)))).pipe(pe(e=>{for(const t of e)if(!0!==t){if(t===HI)return HI;if(!1===t||t instanceof Vh)return t}return!0}),Ys(e=>e!==HI),kh(1)))}function _B(n){return function kn(...n){return an(n)}(ai(e=>{if(yu(e))throw dB(0,e)}),pe(e=>!0===e))}class zI{constructor(e){this.segmentGroup=e||null}}class yB{constructor(e){this.urlTree=e}}function zh(n){return cm(new zI(n))}function vB(n){return cm(new yB(n))}class zre{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new _e(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return x(r);if(i.numberOfChildren>1||!i.children[pt])return cm(new _e(4e3,!1));i=i.children[pt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Vh(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new cn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new _e(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const tD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Wre(n,e,t,r,i){const s=nD(n,e,t);return s.matched?(r=function pre(n,e){return n.providers&&!n._injector&&(n._injector=MA(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function jre(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?x(i.map(o=>{const a=$h(o,n);return Ol(function Rre(n){return n&&Tm(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Hh(),_B()):x(!0)}(r,e,t).pipe(pe(o=>!0===o?s:{...tD}))):x(s)}function nD(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...tD}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Cne)(t,n,e);if(!i)return{...tD};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function EB(n,e,t,r){return t.length>0&&function Kre(n,e,t){return t.some(r=>WI(n,e,r)&&Io(r)!==pt)}(n,t,r)?{segmentGroup:new cn(e,qre(r,new cn(t,n.children))),slicedSegments:[]}:0===t.length&&function Qre(n,e,t){return t.some(r=>WI(n,e,r))}(n,t,r)?{segmentGroup:new cn(n.segments,Gre(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new cn(n.segments,n.children),slicedSegments:t}}function Gre(n,e,t,r,i){const s={};for(const o of r)if(WI(n,t,o)&&!i[Io(o)]){const a=new cn([],{});s[Io(o)]=a}return{...i,...s}}function qre(n,e){const t={};t[pt]=e;for(const r of n)if(""===r.path&&Io(r)!==pt){const i=new cn([],{});t[Io(r)]=i}return t}function WI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Zre{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new zre(this.urlSerializer,this.urlTree)}noMatchError(e){return new _e(4002,!1)}recognize(){const e=EB(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,pt).pipe(mu(t=>{if(t instanceof yB)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof zI?this.noMatchError(t):t}),pe(t=>{const r=new BI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pt,this.rootComponentType,null,{}),i=new Wa(r,t),s=new lB("",i),o=function Hne(n,e,t=null,r=null){return YU(QU(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,pt).pipe(mu(r=>{throw r instanceof zI?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=aB(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return C(i).pipe(Fh(s=>{const o=r.children[s],a=function yre(n,e){const t=n.filter(r=>Io(r)===e);return t.push(...n.filter(r=>Io(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),PI((s,o)=>(s.push(...o),s)),RI(null),function vne(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ys((i,s)=>n(i,s,r)):St,US(1),t?RI(e):FU(()=>new DI))}(),Fn(s=>{if(null===s)return zh(r);const o=IB(s);return function eie(n){n.sort((e,t)=>e.value.outlet===pt?-1:t.value.outlet===pt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),x(o)}))}processSegment(e,t,r,i,s,o){return C(t).pipe(Fh(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(mu(l=>{if(l instanceof zI)return x(null);throw l}))),Nl(a=>!!a),mu(a=>{if(mB(a))return function Jre(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?x([]):zh(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function Yre(n,e,t,r){return!!(Io(n)===r||r!==pt&&WI(e,t,n))&&("**"===n.path||nD(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):zh(i):zh(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?vB(s):this.applyRedirects.lineralizeSegments(r,s).pipe(Fn(o=>{const a=new cn(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:d}=nD(t,i,s);if(!a)return zh(t);const p=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,d);return i.redirectTo.startsWith("/")?vB(p):this.applyRedirects.lineralizeSegments(i,p).pipe(Fn(_=>this.processSegment(e,r,t,_.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const l=i.length>0?VU(i).parameters:{};a=x({snapshot:new BI(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wB(r),Io(r),r.component??r._loadedComponent??null,r,CB(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=Wre(t,r,i,e).pipe(pe(({matched:l,consumedSegments:c,remainingSegments:d,parameters:p})=>l?{snapshot:new BI(c,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,wB(r),Io(r),r.component??r._loadedComponent??null,r,CB(r)),consumedSegments:c,remainingSegments:d}:null));return a.pipe(Ee(l=>null===l?zh(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Ee(({routes:c})=>{const d=r._loadedInjector??e,{snapshot:p,consumedSegments:_,remainingSegments:v}=l,{segmentGroup:b,slicedSegments:D}=EB(t,_,v,c);if(0===D.length&&b.hasChildren())return this.processChildren(d,c,b).pipe(pe(H=>null===H?null:[new Wa(p,H)]));if(0===c.length&&0===D.length)return x([new Wa(p,[])]);const P=Io(r)===s;return this.processSegment(d,c,b,D,P?pt:s,!0).pipe(pe(H=>[new Wa(p,H)]))}))))}getChildConfig(e,t,r){return t.children?x({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?x({routes:t._loadedRoutes,injector:t._loadedInjector}):function Bre(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?x(!0):x(i.map(o=>{const a=$h(o,n);return Ol(function Are(n){return n&&Tm(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Hh(),_B())}(e,t,r).pipe(Fn(i=>i?this.configLoader.loadChildren(e,t).pipe(ai(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Hre(n){return cm(hB(!1,3))}())):x({routes:[],injector:e})}}function tie(n){const e=n.value.routeConfig;return e&&""===e.path}function IB(n){const e=[],t=new Set;for(const r of n){if(!tie(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=IB(r.children);e.push(new Wa(r.value,i))}return e.filter(r=>!t.has(r))}function wB(n){return n.data||{}}function CB(n){return n.resolve||{}}function TB(n){return"string"==typeof n.title||null===n.title}function rD(n){return Ee(e=>{const t=n(e);return t?C(t).pipe(pe(()=>e)):x(e)})}const Wh=new Ce("ROUTES");let iD=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Oe(i2)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return x(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ol(t.loadComponent()).pipe(pe(bB),ai(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),um(()=>{this.componentLoaders.delete(t)})),i=new kU(r,()=>new W).pipe(VS());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return x({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function lie(n,e,t,r){return Ol(n.loadChildren()).pipe(pe(bB),Fn(i=>i instanceof uV||Array.isArray(i)?x(i):C(e.compileModuleAsync(i))),pe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Wh,[],{optional:!0,self:!0}).flat()),{routes:o.map(eD),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(um(()=>{this.childrenLoaders.delete(r)})),o=new kU(s,()=>new W).pipe(VS());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bB(n){return function cie(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let GI=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new W,this.transitionAbortSubject=new W,this.configLoader=Oe(iD),this.environmentInjector=Oe(ws),this.urlSerializer=Oe(fm),this.rootContexts=Oe(vm),this.inputBindingEnabled=null!==Oe(jI,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>x(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new tre(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new ere(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new T({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:_m,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ys(s=>0!==s.id),pe(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Ee(s=>{this.currentTransition=s;let o=!1,a=!1;return x(s).pipe(ai(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ee(l=>{const c=l.currentBrowserUrl.toString(),d=!t.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!d&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const _="";return this.events.next(new Uh(l.id,this.urlSerializer.serialize(l.rawUrl),_,0)),l.resolve(null),Kn}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return x(l).pipe(Ee(_=>{const v=this.transitions?.getValue();return this.events.next(new VI(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),v!==this.transitions?.getValue()?Kn:Promise.resolve(_)}),function nie(n,e,t,r,i,s){return Fn(o=>function Xre(n,e,t,r,i,s,o="emptyOnly"){return new Zre(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(pe(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),ai(_=>{s.targetSnapshot=_.targetSnapshot,s.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects};const v=new nB(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(v)}));if(d&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:_,extractedUrl:v,source:b,restoredState:D,extras:P}=l,H=new VI(_,this.urlSerializer.serialize(v),b,D);this.events.next(H);const V=oB(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:V,urlAfterRedirects:v,extras:{...P,skipLocationChange:!1,replaceUrl:!1}},x(s)}{const _="";return this.events.next(new Uh(l.id,this.urlSerializer.serialize(l.extractedUrl),_,1)),l.resolve(null),Kn}}),ai(l=>{const c=new Yne(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),pe(l=>(this.currentTransition=s={...l,guards:Ire(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function Mre(n,e){return Fn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?x({...t,guardsResult:!0}):function Nre(n,e,t,r){return C(n).pipe(Fn(i=>function Ure(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?x(s.map(a=>{const l=Im(e)??i,c=$h(a,l);return Ol(function xre(n){return n&&Tm(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):l.runInContext(()=>c(n,e,t,r))).pipe(Nl())})).pipe(Hh()):x(!0)}(i.component,i.route,t,e,r)),Nl(i=>!0!==i,!0))}(o,r,i,n).pipe(Fn(a=>a&&function bre(n){return"boolean"==typeof n}(a)?function Ore(n,e,t,r){return C(e).pipe(Fh(i=>LS(function Fre(n,e){return null!==n&&e&&e(new nre(n)),x(!0)}(i.route.parent,r),function kre(n,e){return null!==n&&e&&e(new ire(n)),x(!0)}(i.route,r),function Vre(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function wre(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>OU(()=>x(o.guards.map(l=>{const c=Im(o.node)??t,d=$h(l,c);return Ol(function Dre(n){return n&&Tm(n.canActivateChild)}(d)?d.canActivateChild(r,n):c.runInContext(()=>d(r,n))).pipe(Nl())})).pipe(Hh())));return x(s).pipe(Hh())}(n,i.path,t),function Lre(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return x(!0);const i=r.map(s=>OU(()=>{const o=Im(e)??t,a=$h(s,o);return Ol(function Sre(n){return n&&Tm(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Nl())}));return x(i).pipe(Hh())}(n,i.route,t))),Nl(i=>!0!==i,!0))}(r,s,n,e):x(a)),pe(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),ai(l=>{if(s.guardsResult=l.guardsResult,yu(l.guardsResult))throw dB(0,l.guardsResult);const c=new Jne(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Ys(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),rD(l=>{if(l.guards.canActivateChecks.length)return x(l).pipe(ai(c=>{const d=new Xne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),Ee(c=>{let d=!1;return x(c).pipe(function rie(n,e){return Fn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return x(t);let s=0;return C(i).pipe(Fh(o=>function iie(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!TB(i)&&(s[dm]=i.title),function sie(n,e,t,r){const i=function oie(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return x({});const s={};return C(i).pipe(Fn(o=>function aie(n,e,t,r){const i=Im(e)??r,s=$h(n,i);return Ol(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Nl(),ai(a=>{s[o]=a}))),US(1),function Ene(n){return pe(()=>n)}(s),mu(o=>mB(o)?Kn:cm(o)))}(s,n,e,r).pipe(pe(o=>(n._resolvedData=o,n.data=aB(n,t).resolve,i&&TB(i)&&(n.data[dm]=i.title),null)))}(o.route,r,n,e)),ai(()=>s++),US(1),Fn(o=>s===i.length?x(t):Kn))})}(t.paramsInheritanceStrategy,this.environmentInjector),ai({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",2)}}))}),ai(c=>{const d=new Zne(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),rD(l=>{const c=d=>{const p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(ai(_=>{d.component=_}),pe(()=>{})));for(const _ of d.children)p.push(...c(_));return p};return FS(c(l.targetSnapshot.root)).pipe(RI(),kh(1))}),rD(()=>this.afterPreactivation()),pe(l=>{const c=function ure(n,e,t){const r=Em(n,e._root,t?t._root:void 0);return new sB(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},s}),ai(()=>{this.events.next(new WS)}),((n,e,t,r)=>pe(i=>(new Ere(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),kh(1),ai({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new kl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),function Ine(n){return $((e,t)=>{jt(n).subscribe(se(t,()=>t.complete(),Le)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(ai(l=>{throw l}))),um(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),mu(l=>{if(a=!0,fB(l))this.events.next(new ym(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function fre(n){return fB(n)&&yu(n.url)}(l)?this.events.next(new GS(l.url)):s.resolve(!1);else{this.events.next(new UI(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(c){s.reject(c)}}return Kn}))}))}cancelNavigationTransition(t,r,i){const s=new ym(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function AB(n){return n!==_m}let SB=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===pt);return r}getResolvedTitleForRoute(t){return t.data[dm]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:function(){return Oe(uie)},providedIn:"root"})}}return n})(),uie=(()=>{class n extends SB{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(we(AU))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),die=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:function(){return Oe(fie)},providedIn:"root"})}}return n})();class hie{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let fie=(()=>{class n extends hie{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Ar(n)))(i||n)}}()}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const qI=new Ce("",{providedIn:"root",factory:()=>({})});let pie=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:function(){return Oe(gie)},providedIn:"root"})}}return n})(),gie=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var bm=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(bm||{});function DB(n,e){n.events.pipe(Ys(t=>t instanceof kl||t instanceof ym||t instanceof UI||t instanceof Uh),pe(t=>t instanceof kl||t instanceof Uh?bm.COMPLETE:t instanceof ym&&(0===t.code||1===t.code)?bm.REDIRECTING:bm.FAILED),Ys(t=>t!==bm.REDIRECTING),kh(1)).subscribe(()=>{e()})}function mie(n){throw n}function _ie(n,e,t){return e.parse("/")}const yie={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vie={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Js=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Oe(r2),this.isNgZoneEnabled=!1,this._events=new W,this.options=Oe(qI,{optional:!0})||{},this.pendingTasks=Oe(sI),this.errorHandler=this.options.errorHandler||mie,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||_ie,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Oe(pie),this.routeReuseStrategy=Oe(die),this.titleStrategy=Oe(SB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Oe(Wh,{optional:!0})?.flat()??[],this.navigationTransitions=Oe(GI),this.urlSerializer=Oe(fm),this.location=Oe(uS),this.componentInputBindingEnabled=!!Oe(jI,{optional:!0}),this.eventsSubscription=new Ot,this.isNgZoneEnabled=Oe(en)instanceof en&&en.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Vh,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=oB(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(xB(r)&&this._events.next(r));if(r instanceof VI)AB(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Uh)this.rawUrlTree=i.rawUrl;else if(r instanceof nB){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof WS)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof ym)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof GS){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||AB(i.source)};this.scheduleNavigation(s,_m,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof UI&&this.restoreHistory(i,!0),r instanceof kl&&(this.navigated=!0),xB(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),_m,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(eD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o;let p,d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}null!==d&&(d=this.removeEmptyProps(d));try{p=QU(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),p=this.currentUrlTree.root}return YU(p,t,d,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=yu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,_m,null,r)}navigate(t,r={skipLocationChange:!1}){return function Eie(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new _e(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...yie}:!1===r?{...vie}:r,yu(t))return BU(this.currentUrlTree,t,i);const s=this.parseUrl(t);return BU(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((p,_)=>{a=p,l=_});const d=this.pendingTasks.add();return DB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function xB(n){return!(n instanceof WS||n instanceof GS)}let Gh=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new W,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof kl&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function dk(n,e,t){return function Q9(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?uk:lu}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(ve(Js),ve(jh),function oE(n){return function de(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Vi(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Er(),n)}("tabindex"),ve(ka),ve(Cs),ve(gu))}}static{this.\u0275dir=Ye({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&$t("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&qo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Nh],skipLocationChange:["skipLocationChange","skipLocationChange",Nh],replaceUrl:["replaceUrl","replaceUrl",Nh],routerLink:"routerLink"},standalone:!0,features:[bF,ji]})}}return n})();class RB{}let Cie=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ys(t=>t instanceof kl),Fh(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=MA(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return C(i).pipe(br())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):x(null);const s=i.pipe(Fn(o=>null===o?x(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?C([s,this.loader.loadComponent(r)]).pipe(br()):s})}static{this.\u0275fac=function(r){return new(r||n)(we(Js),we(i2),we(ws),we(RB),we(iD))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const sD=new Ce("");let PB=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof VI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof kl?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Uh&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof rB&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new rB(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function Xk(){throw new Error("invalid")}()}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();function Ga(n,e){return{\u0275kind:n,\u0275providers:e}}function NB(){const n=Oe(as);return e=>{const t=n.get(Mh);if(e!==t.components[0])return;const r=n.get(Js),i=n.get(OB);1===n.get(oD)&&r.initialNavigation(),n.get(kB,null,Et.Optional)?.setUpPreloading(),n.get(sD,null,Et.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const OB=new Ce("",{factory:()=>new W}),oD=new Ce("",{providedIn:"root",factory:()=>1}),kB=new Ce("");function Sie(n){return Ga(0,[{provide:kB,useExisting:Cie},{provide:RB,useExisting:n}])}const FB=new Ce("ROUTER_FORROOT_GUARD"),xie=[uS,{provide:fm,useClass:BS},Js,vm,{provide:jh,useFactory:function MB(n){return n.routerState.root},deps:[Js]},iD,[]];function Rie(){return new d2("Router",Js)}let aD=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[xie,[],{provide:Wh,multi:!0,useValue:t},{provide:FB,useFactory:Oie,deps:[[Js,new Is,new cE]]},{provide:qI,useValue:r||{}},r?.useHash?{provide:gu,useClass:jZ}:{provide:gu,useClass:H2},{provide:sD,useFactory:()=>{const n=Oe(ate),e=Oe(en),t=Oe(qI),r=Oe(GI),i=Oe(fm);return t.scrollOffset&&n.setOffset(t.scrollOffset),new PB(i,r,n,e,t)}},r?.preloadingStrategy?Sie(r.preloadingStrategy).\u0275providers:[],{provide:d2,multi:!0,useFactory:Rie},r?.initialNavigation?kie(r):[],r?.bindToComponentInputs?Ga(8,[uB,{provide:jI,useExisting:uB}]).\u0275providers:[],[{provide:LB,useFactory:NB},{provide:eS,multi:!0,useExisting:LB}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Wh,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(we(FB,8))}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=mi({})}}return n})();function Oie(n){return"guarded"}function kie(n){return["disabled"===n.initialNavigation?Ga(3,[{provide:GA,multi:!0,useFactory:()=>{const e=Oe(Js);return()=>{e.setUpLocationChangeListener()}}},{provide:oD,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ga(2,[{provide:oD,useValue:0},{provide:GA,multi:!0,deps:[as],useFactory:e=>{const t=e.get(UZ,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Js),s=e.get(OB);DB(i,()=>{r(!0)}),e.get(GI).afterPreactivation=()=>(r(!0),s.closed?x(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const LB=new Ce(""),Lie=[];let Vie=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=mi({imports:[aD.forRoot(Lie),aD]})}}return n})(),Uie=(()=>{class n{constructor(){this.title="wedding-app"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ni({type:n,selectors:[["app-root"]],decls:29,vars:7,consts:[[1,"grid-container"],[1,"grid-item1"],[1,"avatar-container"],[1,"circular-frame"],["src","assets/images/ratio1-1/picture3-1_1.jpg"],[3,"routerLink"],[1,"grid-item2"]],template:function(r,i){1&r&&(ee(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),kr(4,"img",4),re()(),ee(5,"ul")(6,"li")(7,"a",5),ce(8,"HOME"),re()(),ee(9,"li")(10,"a",5),ce(11,"ABOUT"),re()(),ee(12,"li")(13,"a",5),ce(14,"SCHEDULE"),re()(),ee(15,"li")(16,"a",5),ce(17,"REGISTRY"),re()(),ee(18,"li")(19,"a",5),ce(20,"FAQ"),re()(),ee(21,"li")(22,"a",5),ce(23,"CONTACT"),re()(),ee(24,"li")(25,"a",5),ce(26,"RSVP"),re()()()(),ee(27,"div",6),kr(28,"router-outlet"),re()()),2&r&&(tt(7),yt("routerLink","Home"),tt(3),yt("routerLink","About"),tt(3),yt("routerLink","Schedule"),tt(3),yt("routerLink","Registry"),tt(3),yt("routerLink","FAQ"),tt(3),yt("routerLink","Contact"),tt(3),yt("routerLink","Rsvp"))},dependencies:[XS,Gh],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:16% auto}.grid-item1[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;font-family:Lora,cursive;background-color:#96a498;color:#fff;min-height:100vh}.grid-item2[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;background-color:#fcfbf4;font-family:Lora,cursive}.avatar-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.circular-frame[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:20px;width:180px;height:180px;border-radius:50%;overflow:hidden}.circular-frame[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:26px;list-style-type:none;margin-top:1em}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:inherit;text-decoration:none}@media (max-width: 1200px){.circular-frame[_ngcontent-%COMP%]{width:140px;height:140px}ul[_ngcontent-%COMP%]{padding-left:2em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 1000px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:18% auto}.circular-frame[_ngcontent-%COMP%]{width:120px;height:120px}ul[_ngcontent-%COMP%]{padding-left:1.5em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 800px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:22% auto}.circular-frame[_ngcontent-%COMP%]{width:110px;height:110px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 600px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:25% auto}.circular-frame[_ngcontent-%COMP%]{width:90px;height:90px}ul[_ngcontent-%COMP%]{padding-left:1em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 450px){.circular-frame[_ngcontent-%COMP%]{width:80px;height:80px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 450px){.circular-frame[_ngcontent-%COMP%]{width:70px;height:70px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px}}"]})}}return n})();var Gi=Ge(631);(0,Gi.registerVersion)("firebase","10.14.1","app");class $ie extends Ot{constructor(e,t){super()}schedule(e,t=0){return this}}const KI={setInterval(n,e,...t){const{delegate:r}=KI;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=KI;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class VB extends $ie{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return KI.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&KI.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Fe(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const lD={now:()=>(lD.delegate||Date).now(),delegate:void 0};class Am{constructor(e,t=Am.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Am.now=lD.now;class UB extends Am{constructor(e,t=Am.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Wie=new class zie extends UB{}(class Hie extends VB{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),BB=new UB(VB),QI=new fh("ANGULARFIRE2_VERSION");const cD=(n,e)=>{const t=e?[e]:(0,Gi.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};class uD{constructor(){return cD(Gie)}}const Gie="app-check";function qh(){}class $B{zone;delegate;constructor(e,t=Wie){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class qie{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qh,{},qh,qh)),t.pipe(ai({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let dD=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new $B(Zone.current)),this.insideAngular=t.run(()=>new $B(Zone.current,BB)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(we(en))};static \u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Kh(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function vu(n){return Kh().ngZone.run(()=>n())}function Ss(n){return function Qie(n){return function(t){return(t=t.lift(new qie(n.ngZone))).pipe(Br(n.outsideAngular),rr(n.insideAngular))}}(Kh())(n)}const Yie=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),vu(()=>n.apply(void 0,r))},Jie=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||=vu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qh,{},qh,qh))),r[s]=Yie(r[s],t));const i=function Kie(n){return Kh().ngZone.runOutsideAngular(()=>n())}(()=>n.apply(this,r));if(!e){if(i instanceof ct){const s=Kh();return i.pipe(Br(s.outsideAngular),rr(s.insideAngular))}return vu(()=>i)}return i instanceof ct?i.pipe(Ss):i instanceof Promise?vu(()=>new Promise((s,o)=>i.then(a=>vu(()=>s(a)),a=>vu(()=>o(a))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:vu(()=>i)};var Fl=Ge(574);Fl.A.registerVersion("firebase","10.14.1","app-compat");const ese=["ngOnDestroy"];class HB{constructor(e){return e}}const YI=new Ce("angularfire2.app.options"),JI=new Ce("angularfire2.app.name");function hD(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Fl.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Fl.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;rse("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new HB(o)}const rse=(n,...e)=>{},ise={provide:HB,useFactory:hD,deps:[YI,en,[new Is,JI]]};let sse=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:YI,useValue:t},{provide:JI,useValue:r}]}}constructor(t){Fl.A.registerVersion("angularfire",QI.full,"core"),Fl.A.registerVersion("angularfire",QI.full,"app-compat"),Fl.A.registerVersion("angular",Sk.full,t.toString())}static \u0275fac=function(r){return new(r||n)(we(zo))};static \u0275mod=ri({type:n});static \u0275inj=mi({providers:[ise]})}return n})();function zB(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function ose(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(WB("error",`${e} was already initialized on the ${t} Firebase App with different settings.${ase?" You may need to reload as Firebase is not HMR aware.":""}`),WB("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const ase=typeof module<"u"&&!!module.hot,WB=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Ge(46);class lse extends W{constructor(e=1/0,t=1/0,r=lD){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function GB(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,O({connector:()=>new lse(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function qB(n,e){return R(e)?Ee(()=>n,e):Ee(()=>n)}const KB=new Ce("angularfire2.auth.use-emulator"),QB=new Ce("angularfire2.auth.settings"),YB=new Ce("angularfire2.auth.tenant-id"),JB=new Ce("angularfire2.auth.langugage-code"),XB=new Ce("angularfire2.auth.use-device-language"),ZB=new Ce("angularfire.auth.persistence"),ej=(n,e,t,r,i,s,o,a)=>zB(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[c,d]of Object.entries(o))l.settings[c]=d;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]);let tj=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,c,d,p,_,v){const b=new W,D=x(void 0).pipe(rr(o.outsideAngular),Ee(()=>s.runOutsideAngular(()=>Promise.resolve().then(Ge.bind(Ge,46)))),pe(()=>hD(t,s,r)),pe(P=>ej(P,s,a,c,d,p,l,_)),GB({bufferSize:1,refCount:!1}));if(TI(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=x(null);else{D.pipe(Nl()).subscribe();const P=D.pipe(Ee(Y=>Y.getRedirectResult().then(ue=>ue,()=>null)),Ss,GB({bufferSize:1,refCount:!1})),H=D.pipe(Ee(Y=>new ct(ue=>({unsubscribe:s.runOutsideAngular(()=>Y.onAuthStateChanged(be=>ue.next(be),be=>ue.error(be),()=>ue.complete()))})))),V=D.pipe(Ee(Y=>new ct(ue=>({unsubscribe:s.runOutsideAngular(()=>Y.onIdTokenChanged(be=>ue.next(be),be=>ue.error(be),()=>ue.complete()))}))));this.authState=P.pipe(qB(H),Br(o.outsideAngular),rr(o.insideAngular)),this.user=P.pipe(qB(V),Br(o.outsideAngular),rr(o.insideAngular)),this.idToken=this.user.pipe(Ee(Y=>Y?C(Y.getIdToken()):x(null))),this.idTokenResult=this.user.pipe(Ee(Y=>Y?C(Y.getIdTokenResult()):x(null))),this.credential=E(P,b,this.authState.pipe(Ys(Y=>!Y))).pipe(pe(Y=>Y?.user?Y:null),Br(o.outsideAngular),rr(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(ese.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(d=>{const p=d?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,p),p})})})}))(this,D,s,{spy:{apply:(P,H,V)=>{(P.startsWith("signIn")||P.startsWith("createUser"))&&V.then(Y=>b.next(Y))}}})}static \u0275fac=function(r){return new(r||n)(we(YI),we(JI,8),we(zo),we(en),we(dD),we(KB,8),we(QB,8),we(YB,8),we(JB,8),we(XB,8),we(ZB,8),we(uD,8))};static \u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function fD(){return $((n,e)=>{let t,r=!1;n.subscribe(se(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var Eu,ij,J=Ge(467),pD=Ge(779),Xs=Ge(398),B=Ge(401),nj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rj={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(U,N,F){F||(F=0);var j=Array(16);if("string"==typeof N)for(var z=0;16>z;++z)j[z]=N.charCodeAt(F++)|N.charCodeAt(F++)<<8|N.charCodeAt(F++)<<16|N.charCodeAt(F++)<<24;else for(z=0;16>z;++z)j[z]=N[F++]|N[F++]<<8|N[F++]<<16|N[F++]<<24;var X=U.g[3],k=(N=U.g[0])+(X^(F=U.g[1])&((z=U.g[2])^X))+j[0]+3614090360&4294967295;k=(F=(z=(X=(N=(F=(z=(X=(N=(F=(z=(X=(N=(F=(z=(X=(N=(F=(z=(X=(N=(F=(z=(X=(N=(F=(z=(X=(N=(F=(z=(X=(N=(F=(z=(X=(N=(F=(z=(X=(N=(F=(z=(X=(N=(F=(z=(X=(N=(F=(z=(X=(N=(F=(z=(X=(N=(F=(z=(X=(N=F+(k<<7&4294967295|k>>>25))+((k=X+(z^N&(F^z))+j[1]+3905402710&4294967295)<<12&4294967295|k>>>20))+((k=z+(F^X&(N^F))+j[2]+606105819&4294967295)<<17&4294967295|k>>>15))+((k=F+(N^z&(X^N))+j[3]+3250441966&4294967295)<<22&4294967295|k>>>10))+((k=N+(X^F&(z^X))+j[4]+4118548399&4294967295)<<7&4294967295|k>>>25))+((k=X+(z^N&(F^z))+j[5]+1200080426&4294967295)<<12&4294967295|k>>>20))+((k=z+(F^X&(N^F))+j[6]+2821735955&4294967295)<<17&4294967295|k>>>15))+((k=F+(N^z&(X^N))+j[7]+4249261313&4294967295)<<22&4294967295|k>>>10))+((k=N+(X^F&(z^X))+j[8]+1770035416&4294967295)<<7&4294967295|k>>>25))+((k=X+(z^N&(F^z))+j[9]+2336552879&4294967295)<<12&4294967295|k>>>20))+((k=z+(F^X&(N^F))+j[10]+4294925233&4294967295)<<17&4294967295|k>>>15))+((k=F+(N^z&(X^N))+j[11]+2304563134&4294967295)<<22&4294967295|k>>>10))+((k=N+(X^F&(z^X))+j[12]+1804603682&4294967295)<<7&4294967295|k>>>25))+((k=X+(z^N&(F^z))+j[13]+4254626195&4294967295)<<12&4294967295|k>>>20))+((k=z+(F^X&(N^F))+j[14]+2792965006&4294967295)<<17&4294967295|k>>>15))+((k=F+(N^z&(X^N))+j[15]+1236535329&4294967295)<<22&4294967295|k>>>10))+((k=N+(z^X&(F^z))+j[1]+4129170786&4294967295)<<5&4294967295|k>>>27))+((k=X+(F^z&(N^F))+j[6]+3225465664&4294967295)<<9&4294967295|k>>>23))+((k=z+(N^F&(X^N))+j[11]+643717713&4294967295)<<14&4294967295|k>>>18))+((k=F+(X^N&(z^X))+j[0]+3921069994&4294967295)<<20&4294967295|k>>>12))+((k=N+(z^X&(F^z))+j[5]+3593408605&4294967295)<<5&4294967295|k>>>27))+((k=X+(F^z&(N^F))+j[10]+38016083&4294967295)<<9&4294967295|k>>>23))+((k=z+(N^F&(X^N))+j[15]+3634488961&4294967295)<<14&4294967295|k>>>18))+((k=F+(X^N&(z^X))+j[4]+3889429448&4294967295)<<20&4294967295|k>>>12))+((k=N+(z^X&(F^z))+j[9]+568446438&4294967295)<<5&4294967295|k>>>27))+((k=X+(F^z&(N^F))+j[14]+3275163606&4294967295)<<9&4294967295|k>>>23))+((k=z+(N^F&(X^N))+j[3]+4107603335&4294967295)<<14&4294967295|k>>>18))+((k=F+(X^N&(z^X))+j[8]+1163531501&4294967295)<<20&4294967295|k>>>12))+((k=N+(z^X&(F^z))+j[13]+2850285829&4294967295)<<5&4294967295|k>>>27))+((k=X+(F^z&(N^F))+j[2]+4243563512&4294967295)<<9&4294967295|k>>>23))+((k=z+(N^F&(X^N))+j[7]+1735328473&4294967295)<<14&4294967295|k>>>18))+((k=F+(X^N&(z^X))+j[12]+2368359562&4294967295)<<20&4294967295|k>>>12))+((k=N+(F^z^X)+j[5]+4294588738&4294967295)<<4&4294967295|k>>>28))+((k=X+(N^F^z)+j[8]+2272392833&4294967295)<<11&4294967295|k>>>21))+((k=z+(X^N^F)+j[11]+1839030562&4294967295)<<16&4294967295|k>>>16))+((k=F+(z^X^N)+j[14]+4259657740&4294967295)<<23&4294967295|k>>>9))+((k=N+(F^z^X)+j[1]+2763975236&4294967295)<<4&4294967295|k>>>28))+((k=X+(N^F^z)+j[4]+1272893353&4294967295)<<11&4294967295|k>>>21))+((k=z+(X^N^F)+j[7]+4139469664&4294967295)<<16&4294967295|k>>>16))+((k=F+(z^X^N)+j[10]+3200236656&4294967295)<<23&4294967295|k>>>9))+((k=N+(F^z^X)+j[13]+681279174&4294967295)<<4&4294967295|k>>>28))+((k=X+(N^F^z)+j[0]+3936430074&4294967295)<<11&4294967295|k>>>21))+((k=z+(X^N^F)+j[3]+3572445317&4294967295)<<16&4294967295|k>>>16))+((k=F+(z^X^N)+j[6]+76029189&4294967295)<<23&4294967295|k>>>9))+((k=N+(F^z^X)+j[9]+3654602809&4294967295)<<4&4294967295|k>>>28))+((k=X+(N^F^z)+j[12]+3873151461&4294967295)<<11&4294967295|k>>>21))+((k=z+(X^N^F)+j[15]+530742520&4294967295)<<16&4294967295|k>>>16))+((k=F+(z^X^N)+j[2]+3299628645&4294967295)<<23&4294967295|k>>>9))+((k=N+(z^(F|~X))+j[0]+4096336452&4294967295)<<6&4294967295|k>>>26))+((k=X+(F^(N|~z))+j[7]+1126891415&4294967295)<<10&4294967295|k>>>22))+((k=z+(N^(X|~F))+j[14]+2878612391&4294967295)<<15&4294967295|k>>>17))+((k=F+(X^(z|~N))+j[5]+4237533241&4294967295)<<21&4294967295|k>>>11))+((k=N+(z^(F|~X))+j[12]+1700485571&4294967295)<<6&4294967295|k>>>26))+((k=X+(F^(N|~z))+j[3]+2399980690&4294967295)<<10&4294967295|k>>>22))+((k=z+(N^(X|~F))+j[10]+4293915773&4294967295)<<15&4294967295|k>>>17))+((k=F+(X^(z|~N))+j[1]+2240044497&4294967295)<<21&4294967295|k>>>11))+((k=N+(z^(F|~X))+j[8]+1873313359&4294967295)<<6&4294967295|k>>>26))+((k=X+(F^(N|~z))+j[15]+4264355552&4294967295)<<10&4294967295|k>>>22))+((k=z+(N^(X|~F))+j[6]+2734768916&4294967295)<<15&4294967295|k>>>17))+((k=F+(X^(z|~N))+j[13]+1309151649&4294967295)<<21&4294967295|k>>>11))+((X=(N=F+((k=N+(z^(F|~X))+j[4]+4149444226&4294967295)<<6&4294967295|k>>>26))+((k=X+(F^(N|~z))+j[11]+3174756917&4294967295)<<10&4294967295|k>>>22))^((z=X+((k=z+(N^(X|~F))+j[2]+718787259&4294967295)<<15&4294967295|k>>>17))|~N))+j[9]+3951481745&4294967295,U.g[0]=U.g[0]+N&4294967295,U.g[1]=U.g[1]+(z+(k<<21&4294967295|k>>>11))&4294967295,U.g[2]=U.g[2]+z&4294967295,U.g[3]=U.g[3]+X&4294967295}function o(U,N){this.h=N;for(var F=[],j=!0,z=U.length-1;0<=z;z--){var X=0|U[z];j&&X==N||(F[z]=X,j=!1)}this.g=F}(function e(U,N){function F(){}F.prototype=N.prototype,U.D=N.prototype,U.prototype=new F,U.prototype.constructor=U,U.C=function(j,z,X){for(var k=Array(arguments.length-2),cl=2;cl<arguments.length;cl++)k[cl-2]=arguments[cl];return N.prototype[z].apply(j,k)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(U,N){void 0===N&&(N=U.length);for(var F=N-this.blockSize,j=this.B,z=this.h,X=0;X<N;){if(0==z)for(;X<=F;)i(this,U,X),X+=this.blockSize;if("string"==typeof U){for(;X<N;)if(j[z++]=U.charCodeAt(X++),z==this.blockSize){i(this,j),z=0;break}}else for(;X<N;)if(j[z++]=U[X++],z==this.blockSize){i(this,j),z=0;break}}this.h=z,this.o+=N},r.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var N=1;N<U.length-8;++N)U[N]=0;var F=8*this.o;for(N=U.length-8;N<U.length;++N)U[N]=255&F,F/=256;for(this.u(U),U=Array(16),N=F=0;4>N;++N)for(var j=0;32>j;j+=8)U[F++]=this.g[N]>>>j&255;return U};var a={};function l(U){return-128<=U&&128>U?function s(U,N){var F=a;return Object.prototype.hasOwnProperty.call(F,U)?F[U]:F[U]=N(U)}(U,function(N){return new o([0|N],0>N?-1:0)}):new o([0|U],0>U?-1:0)}function c(U){if(isNaN(U)||!isFinite(U))return p;if(0>U)return P(c(-U));for(var N=[],F=1,j=0;U>=F;j++)N[j]=U/F|0,F*=4294967296;return new o(N,0)}var p=l(0),_=l(1),v=l(16777216);function b(U){if(0!=U.h)return!1;for(var N=0;N<U.g.length;N++)if(0!=U.g[N])return!1;return!0}function D(U){return-1==U.h}function P(U){for(var N=U.g.length,F=[],j=0;j<N;j++)F[j]=~U.g[j];return new o(F,~U.h).add(_)}function H(U,N){return U.add(P(N))}function V(U,N){for(;(65535&U[N])!=U[N];)U[N+1]+=U[N]>>>16,U[N]&=65535,N++}function Y(U,N){this.g=U,this.h=N}function ue(U,N){if(b(N))throw Error("division by zero");if(b(U))return new Y(p,p);if(D(U))return N=ue(P(U),N),new Y(P(N.g),P(N.h));if(D(N))return N=ue(U,P(N)),new Y(P(N.g),N.h);if(30<U.g.length){if(D(U)||D(N))throw Error("slowDivide_ only works with positive integers.");for(var F=_,j=N;0>=j.l(U);)F=be(F),j=be(j);var z=$e(F,1),X=$e(j,1);for(j=$e(j,2),F=$e(F,2);!b(j);){var k=X.add(j);0>=k.l(U)&&(z=z.add(F),X=k),j=$e(j,1),F=$e(F,1)}return N=H(U,z.j(N)),new Y(z,N)}for(z=p;0<=U.l(N);){for(F=Math.max(1,Math.floor(U.m()/N.m())),j=48>=(j=Math.ceil(Math.log(F)/Math.LN2))?1:Math.pow(2,j-48),k=(X=c(F)).j(N);D(k)||0<k.l(U);)k=(X=c(F-=j)).j(N);b(X)&&(X=_),z=z.add(X),U=H(U,k)}return new Y(z,U)}function be(U){for(var N=U.g.length+1,F=[],j=0;j<N;j++)F[j]=U.i(j)<<1|U.i(j-1)>>>31;return new o(F,U.h)}function $e(U,N){var F=N>>5;N%=32;for(var j=U.g.length-F,z=[],X=0;X<j;X++)z[X]=0<N?U.i(X+F)>>>N|U.i(X+F+1)<<32-N:U.i(X+F);return new o(z,U.h)}(n=o.prototype).m=function(){if(D(this))return-P(this).m();for(var U=0,N=1,F=0;F<this.g.length;F++){var j=this.i(F);U+=(0<=j?j:4294967296+j)*N,N*=4294967296}return U},n.toString=function(U){if(2>(U=U||10)||36<U)throw Error("radix out of range: "+U);if(b(this))return"0";if(D(this))return"-"+P(this).toString(U);for(var N=c(Math.pow(U,6)),F=this,j="";;){var z=ue(F,N).g,X=((0<(F=H(F,z.j(N))).g.length?F.g[0]:F.h)>>>0).toString(U);if(b(F=z))return X+j;for(;6>X.length;)X="0"+X;j=X+j}},n.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h},n.l=function(U){return D(U=H(this,U))?-1:b(U)?0:1},n.abs=function(){return D(this)?P(this):this},n.add=function(U){for(var N=Math.max(this.g.length,U.g.length),F=[],j=0,z=0;z<=N;z++){var X=j+(65535&this.i(z))+(65535&U.i(z)),k=(X>>>16)+(this.i(z)>>>16)+(U.i(z)>>>16);j=k>>>16,F[z]=(k&=65535)<<16|(X&=65535)}return new o(F,-2147483648&F[F.length-1]?-1:0)},n.j=function(U){if(b(this)||b(U))return p;if(D(this))return D(U)?P(this).j(P(U)):P(P(this).j(U));if(D(U))return P(this.j(P(U)));if(0>this.l(v)&&0>U.l(v))return c(this.m()*U.m());for(var N=this.g.length+U.g.length,F=[],j=0;j<2*N;j++)F[j]=0;for(j=0;j<this.g.length;j++)for(var z=0;z<U.g.length;z++){var X=this.i(j)>>>16,k=65535&this.i(j),cl=U.i(z)>>>16,Ry=65535&U.i(z);F[2*j+2*z]+=k*Ry,V(F,2*j+2*z),F[2*j+2*z+1]+=X*Ry,V(F,2*j+2*z+1),F[2*j+2*z+1]+=k*cl,V(F,2*j+2*z+1),F[2*j+2*z+2]+=X*cl,V(F,2*j+2*z+2)}for(j=0;j<N;j++)F[j]=F[2*j+1]<<16|F[2*j];for(j=N;j<2*N;j++)F[j]=0;return new o(F,0)},n.A=function(U){return ue(this,U).h},n.and=function(U){for(var N=Math.max(this.g.length,U.g.length),F=[],j=0;j<N;j++)F[j]=this.i(j)&U.i(j);return new o(F,this.h&U.h)},n.or=function(U){for(var N=Math.max(this.g.length,U.g.length),F=[],j=0;j<N;j++)F[j]=this.i(j)|U.i(j);return new o(F,this.h|U.h)},n.xor=function(U){for(var N=Math.max(this.g.length,U.g.length),F=[],j=0;j<N;j++)F[j]=this.i(j)^U.i(j);return new o(F,this.h^U.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ij=rj.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function d(U,N){if(0==U.length)throw Error("number format error: empty string");if(2>(N=N||10)||36<N)throw Error("radix out of range: "+N);if("-"==U.charAt(0))return P(d(U.substring(1),N));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=c(Math.pow(N,8)),j=p,z=0;z<U.length;z+=8){var X=Math.min(8,U.length-z),k=parseInt(U.substring(z,z+X),N);8>X?(X=c(Math.pow(N,X)),j=j.j(X).add(c(k))):j=(j=j.j(F)).add(c(k))}return j},Eu=rj.Integer=o}).apply(typeof nj<"u"?nj:typeof self<"u"?self:typeof window<"u"?window:{});var sj,Sm,oj,ZI,gD,aj,lj,cj,XI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qa={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(f,y,I){return f==Array.prototype||f==Object.prototype||(f[y]=I.value),f},r=function t(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof XI&&XI];for(var y=0;y<f.length;++y){var I=f[y];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(f,y){if(y)e:{var I=r;f=f.split(".");for(var S=0;S<f.length-1;S++){var G=f[S];if(!(G in I))break e;I=I[G]}(y=y(S=I[f=f[f.length-1]]))!=S&&null!=y&&e(I,f,{configurable:!0,writable:!0,value:y})}}("Array.prototype.values",function(f){return f||function(){return function s(f,y){f instanceof String&&(f+="");var I=0,S=!1,G={next:function(){if(!S&&I<f.length){var ie=I++;return{value:y(ie,f[ie]),done:!1}}return S=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}(this,function(y,I){return I})}});var o=o||{},a=this||self;function l(f){var y=typeof f;return"array"==(y="object"!=y?y:f?Array.isArray(f)?"array":y:"null")||"object"==y&&"number"==typeof f.length}function c(f){var y=typeof f;return"object"==y&&null!=f||"function"==y}function d(f,y,I){return f.call.apply(f.bind,arguments)}function p(f,y,I){if(!f)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,S),f.apply(y,G)}}return function(){return f.apply(y,arguments)}}function _(f,y,I){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:p).apply(null,arguments)}function v(f,y){var I=Array.prototype.slice.call(arguments,1);return function(){var S=I.slice();return S.push.apply(S,arguments),f.apply(this,S)}}function b(f,y){function I(){}I.prototype=y.prototype,f.aa=y.prototype,f.prototype=new I,f.prototype.constructor=f,f.Qb=function(S,G,ie){for(var Re=Array(arguments.length-2),Tn=2;Tn<arguments.length;Tn++)Re[Tn-2]=arguments[Tn];return y.prototype[G].apply(S,Re)}}function D(f){const y=f.length;if(0<y){const I=Array(y);for(let S=0;S<y;S++)I[S]=f[S];return I}return[]}function P(f,y){for(let I=1;I<arguments.length;I++){const S=arguments[I];if(l(S)){const G=f.length||0,ie=S.length||0;f.length=G+ie;for(let Re=0;Re<ie;Re++)f[G+Re]=S[Re]}else f.push(S)}}function V(f){return/^[\s\xa0]*$/.test(f)}function Y(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function ue(f){return ue[" "](f),f}ue[" "]=function(){};var be=!(-1==Y().indexOf("Gecko")||-1!=Y().toLowerCase().indexOf("webkit")&&-1==Y().indexOf("Edge")||-1!=Y().indexOf("Trident")||-1!=Y().indexOf("MSIE")||-1!=Y().indexOf("Edge"));function $e(f,y,I){for(const S in f)y.call(I,f[S],S,f)}function N(f){const y={};for(const I in f)y[I]=f[I];return y}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(f,y){let I,S;for(let G=1;G<arguments.length;G++){for(I in S=arguments[G],S)f[I]=S[I];for(let ie=0;ie<F.length;ie++)I=F[ie],Object.prototype.hasOwnProperty.call(S,I)&&(f[I]=S[I])}}function z(f){var y=1;f=f.split(":");const I=[];for(;0<y&&f.length;)I.push(f.shift()),y--;return f.length&&I.push(f.join(":")),I}function X(f){a.setTimeout(()=>{throw f},0)}function k(){var f=m1;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}var Ry=new class H{constructor(y,I){this.i=y,this.j=I,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}(()=>new hIe,f=>f.reset());class hIe{constructor(){this.next=this.g=this.h=null}set(y,I){this.h=y,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let Py,My=!1,m1=new class cl{constructor(){this.h=this.g=null}add(y,I){const S=Ry.get();S.set(y,I),this.h?this.h.next=S:this.g=S,this.h=S}},m6=()=>{const f=a.Promise.resolve(void 0);Py=()=>{f.then(fIe)}};var fIe=()=>{for(var f;f=k();){try{f.h.call(f.g)}catch(I){X(I)}var y=Ry;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}My=!1};function xc(){this.s=this.s,this.C=this.C}function Ri(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}xc.prototype.s=!1,xc.prototype.ma=function(){this.s||(this.s=!0,this.N())},xc.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Ri.prototype.h=function(){this.defaultPrevented=!0};var pIe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const I=()=>{};a.addEventListener("test",I,y),a.removeEventListener("test",I,y)}catch{}return f}();function Ny(f,y){if(Ri.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var I=this.type=f.type,S=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(be){e:{try{ue(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else"mouseover"==I?y=f.fromElement:"mouseout"==I&&(y=f.toElement);this.relatedTarget=y,S?(this.clientX=void 0!==S.clientX?S.clientX:S.pageX,this.clientY=void 0!==S.clientY?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=void 0!==f.clientX?f.clientX:f.pageX,this.clientY=void 0!==f.clientY?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType="string"==typeof f.pointerType?f.pointerType:gIe[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Ny.aa.h.call(this)}}b(Ny,Ri);var gIe={2:"touch",3:"pen",4:"mouse"};Ny.prototype.h=function(){Ny.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Oy="closure_listenable_"+(1e6*Math.random()|0),mIe=0;function _Ie(f,y,I,S,G){this.listener=f,this.proxy=null,this.src=y,this.type=I,this.capture=!!S,this.ha=G,this.key=++mIe,this.da=this.fa=!1}function K0(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Q0(f){this.src=f,this.g={},this.h=0}function _1(f,y){var I=y.type;if(I in f.g){var ie,S=f.g[I],G=Array.prototype.indexOf.call(S,y,void 0);(ie=0<=G)&&Array.prototype.splice.call(S,G,1),ie&&(K0(y),0==f.g[I].length&&(delete f.g[I],f.h--))}}function y1(f,y,I,S){for(var G=0;G<f.length;++G){var ie=f[G];if(!ie.da&&ie.listener==y&&ie.capture==!!I&&ie.ha==S)return G}return-1}Q0.prototype.add=function(f,y,I,S,G){var ie=f.toString();(f=this.g[ie])||(f=this.g[ie]=[],this.h++);var Re=y1(f,y,S,G);return-1<Re?(y=f[Re],I||(y.fa=!1)):((y=new _Ie(y,this.src,ie,!!S,G)).fa=I,f.push(y)),y};var v1="closure_lm_"+(1e6*Math.random()|0),E1={};function _6(f,y,I,S,G){if(S&&S.once)return v6(f,y,I,S,G);if(Array.isArray(y)){for(var ie=0;ie<y.length;ie++)_6(f,y[ie],I,S,G);return null}return I=T1(I),f&&f[Oy]?f.K(y,I,c(S)?!!S.capture:!!S,G):y6(f,y,I,!1,S,G)}function y6(f,y,I,S,G,ie){if(!y)throw Error("Invalid event type");var Re=c(G)?!!G.capture:!!G,Tn=w1(f);if(Tn||(f[v1]=Tn=new Q0(f)),(I=Tn.add(y,I,S,Re,ie)).proxy)return I;if(S=function yIe(){const y=vIe;return function f(I){return y.call(f.src,f.listener,I)}}(),I.proxy=S,S.src=f,S.listener=I,f.addEventListener)pIe||(G=Re),void 0===G&&(G=!1),f.addEventListener(y.toString(),S,G);else if(f.attachEvent)f.attachEvent(I6(y.toString()),S);else{if(!f.addListener||!f.removeListener)throw Error("addEventListener and attachEvent are unavailable.");f.addListener(S)}return I}function v6(f,y,I,S,G){if(Array.isArray(y)){for(var ie=0;ie<y.length;ie++)v6(f,y[ie],I,S,G);return null}return I=T1(I),f&&f[Oy]?f.L(y,I,c(S)?!!S.capture:!!S,G):y6(f,y,I,!0,S,G)}function E6(f,y,I,S,G){if(Array.isArray(y))for(var ie=0;ie<y.length;ie++)E6(f,y[ie],I,S,G);else S=c(S)?!!S.capture:!!S,I=T1(I),f&&f[Oy]?(f=f.i,(y=String(y).toString())in f.g&&-1<(I=y1(ie=f.g[y],I,S,G))&&(K0(ie[I]),Array.prototype.splice.call(ie,I,1),0==ie.length&&(delete f.g[y],f.h--))):f&&(f=w1(f))&&(y=f.g[y.toString()],f=-1,y&&(f=y1(y,I,S,G)),(I=-1<f?y[f]:null)&&I1(I))}function I1(f){if("number"!=typeof f&&f&&!f.da){var y=f.src;if(y&&y[Oy])_1(y.i,f);else{var I=f.type,S=f.proxy;y.removeEventListener?y.removeEventListener(I,S,f.capture):y.detachEvent?y.detachEvent(I6(I),S):y.addListener&&y.removeListener&&y.removeListener(S),(I=w1(y))?(_1(I,f),0==I.h&&(I.src=null,y[v1]=null)):K0(f)}}}function I6(f){return f in E1?E1[f]:E1[f]="on"+f}function vIe(f,y){if(f.da)f=!0;else{y=new Ny(y,this);var I=f.listener,S=f.ha||f.src;f.fa&&I1(f),f=I.call(S,y)}return f}function w1(f){return(f=f[v1])instanceof Q0?f:null}var C1="__closure_events_fn_"+(1e9*Math.random()>>>0);function T1(f){return"function"==typeof f?f:(f[C1]||(f[C1]=function(y){return f.handleEvent(y)}),f[C1])}function Pi(){xc.call(this),this.i=new Q0(this),this.M=this,this.F=null}function Xi(f,y){var I,S=f.F;if(S)for(I=[];S;S=S.F)I.push(S);if(f=f.M,S=y.type||y,"string"==typeof y)y=new Ri(y,f);else if(y instanceof Ri)y.target=y.target||f;else{var G=y;j(y=new Ri(S,f),G)}if(G=!0,I)for(var ie=I.length-1;0<=ie;ie--){var Re=y.g=I[ie];G=Y0(Re,S,!0,y)&&G}if(G=Y0(Re=y.g=f,S,!0,y)&&G,G=Y0(Re,S,!1,y)&&G,I)for(ie=0;ie<I.length;ie++)G=Y0(Re=y.g=I[ie],S,!1,y)&&G}function Y0(f,y,I,S){if(!(y=f.i.g[String(y)]))return!0;y=y.concat();for(var G=!0,ie=0;ie<y.length;++ie){var Re=y[ie];if(Re&&!Re.da&&Re.capture==I){var Tn=Re.listener,fi=Re.ha||Re.src;Re.fa&&_1(f.i,Re),G=!1!==Tn.call(fi,S)&&G}}return G&&!S.defaultPrevented}function w6(f,y,I){if("function"==typeof f)I&&(f=_(f,I));else{if(!f||"function"!=typeof f.handleEvent)throw Error("Invalid listener argument");f=_(f.handleEvent,f)}return 2147483647<Number(y)?-1:a.setTimeout(f,y||0)}function C6(f){f.g=w6(()=>{f.g=null,f.i&&(f.i=!1,C6(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}b(Pi,xc),Pi.prototype[Oy]=!0,Pi.prototype.removeEventListener=function(f,y,I,S){E6(this,f,y,I,S)},Pi.prototype.N=function(){if(Pi.aa.N.call(this),this.i){var y,f=this.i;for(y in f.g){for(var I=f.g[y],S=0;S<I.length;S++)K0(I[S]);delete f.g[y],f.h--}}this.F=null},Pi.prototype.K=function(f,y,I,S){return this.i.add(String(f),y,!1,I,S)},Pi.prototype.L=function(f,y,I,S){return this.i.add(String(f),y,!0,I,S)};class EIe extends xc{constructor(y,I){super(),this.m=y,this.l=I,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:C6(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ky(f){xc.call(this),this.h=f,this.g={}}b(ky,xc);var T6=[];function b6(f){$e(f.g,function(y,I){this.g.hasOwnProperty(I)&&I1(y)},f),f.g={}}ky.prototype.N=function(){ky.aa.N.call(this),b6(this)},ky.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var b1=a.JSON.stringify,IIe=a.JSON.parse,wIe=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function A1(){}function S6(){}A1.prototype.h=null;var Fy={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function S1(){Ri.call(this,"d")}function D1(){Ri.call(this,"c")}b(S1,Ri),b(D1,Ri);var gd={},D6=null;function J0(){return D6=D6||new Pi}function x6(f){Ri.call(this,gd.La,f)}function Ly(f){const y=J0();Xi(y,new x6(y))}function R6(f,y){Ri.call(this,gd.STAT_EVENT,f),this.stat=y}function Zi(f){const y=J0();Xi(y,new R6(y,f))}function P6(f,y){Ri.call(this,gd.Ma,f),this.size=y}function Vy(f,y){if("function"!=typeof f)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},y)}function Uy(){this.g=!0}function gp(f,y,I,S){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+function AIe(f,y){if(!f.g)return y;if(!y)return null;try{var I=JSON.parse(y);if(I)for(f=0;f<I.length;f++)if(Array.isArray(I[f])){var S=I[f];if(!(2>S.length)){var G=S[1];if(Array.isArray(G)&&!(1>G.length)){var ie=G[0];if("noop"!=ie&&"stop"!=ie&&"close"!=ie)for(var Re=1;Re<G.length;Re++)G[Re]=""}}}return b1(I)}catch{return y}}(f,I)+(S?" "+S:"")})}gd.La="serverreachability",b(x6,Ri),gd.STAT_EVENT="statevent",b(R6,Ri),gd.Ma="timingevent",b(P6,Ri),Uy.prototype.xa=function(){this.g=!1},Uy.prototype.info=function(){};var x1,X0={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},M6={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Z0(){}function Rc(f,y,I,S){this.j=f,this.i=y,this.l=I,this.R=S||1,this.U=new ky(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new N6}function N6(){this.i=null,this.g="",this.h=!1}b(Z0,A1),Z0.prototype.g=function(){return new XMLHttpRequest},Z0.prototype.i=function(){return{}},x1=new Z0;var O6={},R1={};function P1(f,y,I){f.L=1,f.v=rT(ul(y)),f.m=I,f.P=!0,k6(f,null)}function k6(f,y){f.F=Date.now(),eT(f),f.A=ul(f.v);var I=f.A,S=f.R;Array.isArray(S)||(S=[String(S)]),Q6(I.i,"t",S),f.C=0,I=f.j.J,f.h=new N6,f.g=f5(f.j,I?y:null,!f.m),0<f.O&&(f.M=new EIe(_(f.Y,f,f.g),f.O)),y=f.U,I=f.g,S=f.ca;var G="readystatechange";Array.isArray(G)||(G&&(T6[0]=G.toString()),G=T6);for(var ie=0;ie<G.length;ie++){var Re=_6(I,G[ie],S||y.handleEvent,!1,y.h||y);if(!Re)break;y.g[Re.key]=Re}y=f.H?N(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),Ly(),function CIe(f,y,I,S,G,ie){f.info(function(){if(f.g)if(ie)for(var Re="",Tn=ie.split("&"),fi=0;fi<Tn.length;fi++){var Yt=Tn[fi].split("=");if(1<Yt.length){var Mi=Yt[0];Yt=Yt[1];var Ni=Mi.split("_");Re=2<=Ni.length&&"type"==Ni[1]?Re+(Mi+"=")+Yt+"&":Re+(Mi+"=redacted&")}}else Re=null;else Re=ie;return"XMLHTTP REQ ("+S+") [attempt "+G+"]: "+y+"\n"+I+"\n"+Re})}(f.i,f.u,f.A,f.l,f.R,f.m)}function F6(f){return!!f.g&&"GET"==f.u&&2!=f.L&&f.j.Ca}function SIe(f,y){var I=f.C,S=y.indexOf("\n",I);return-1==S?R1:(I=Number(y.substring(I,S)),isNaN(I)?O6:(S+=1)+I>y.length?R1:(y=y.slice(S,S+I),f.C=S+I,y))}function eT(f){f.S=Date.now()+f.I,L6(f,f.I)}function L6(f,y){if(null!=f.B)throw Error("WatchDog timer not null");f.B=Vy(_(f.ba,f),y)}function M1(f){f.B&&(a.clearTimeout(f.B),f.B=null)}function By(f){0==f.j.G||f.J||c5(f.j,f)}function md(f){M1(f);var y=f.M;y&&"function"==typeof y.ma&&y.ma(),f.M=null,b6(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function N1(f,y){try{var I=f.j;if(0!=I.G&&(I.g==f||O1(I.h,f)))if(!f.K&&O1(I.h,f)&&3==I.G){try{var S=I.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&3==S.length){var G=S;if(0==G[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<f.F))break e;lT(I),oT(I)}V1(I),Zi(18)}}else I.za=G[1],0<I.za-I.T&&37500>G[2]&&I.F&&0==I.v&&!I.C&&(I.C=Vy(_(I.Za,I),6e3));if(1>=B6(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else yd(I,11)}else if((f.K||I.g==f)&&lT(I),!V(y))for(G=I.Da.g.parse(y),y=0;y<G.length;y++){let Yt=G[y];if(I.T=Yt[0],Yt=Yt[1],2==I.G)if("c"==Yt[0]){I.K=Yt[1],I.ia=Yt[2];const Mi=Yt[3];null!=Mi&&(I.la=Mi,I.j.info("VER="+I.la));const Ni=Yt[4];null!=Ni&&(I.Aa=Ni,I.j.info("SVER="+I.Aa));const yp=Yt[5];null!=yp&&"number"==typeof yp&&0<yp&&(I.L=S=1.5*yp,I.j.info("backChannelRequestTimeoutMs_="+S)),S=I;const Ro=f.g;if(Ro){const uT=Ro.g?Ro.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uT){var ie=S.h;ie.g||-1==uT.indexOf("spdy")&&-1==uT.indexOf("quic")&&-1==uT.indexOf("h2")||(ie.j=ie.l,ie.g=new Set,ie.h&&(k1(ie,ie.h),ie.h=null))}if(S.D){const B1=Ro.g?Ro.g.getResponseHeader("X-HTTP-Session-Id"):null;B1&&(S.ya=B1,Wn(S.I,S.D,B1))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-f.F,I.j.info("Handshake RTT: "+I.R+"ms"));var Re=f;if((S=I).qa=h5(S,S.J?S.ia:null,S.W),Re.K){j6(S.h,Re);var Tn=Re,fi=S.L;fi&&(Tn.I=fi),Tn.B&&(M1(Tn),eT(Tn)),S.g=Re}else a5(S);0<I.i.length&&aT(I)}else"stop"!=Yt[0]&&"close"!=Yt[0]||yd(I,7);else 3==I.G&&("stop"==Yt[0]||"close"==Yt[0]?"stop"==Yt[0]?yd(I,7):L1(I):"noop"!=Yt[0]&&I.l&&I.l.ta(Yt),I.v=0)}Ly()}catch{}}function V6(f){this.l=f||10,f=a.PerformanceNavigationTiming?0<(f=a.performance.getEntriesByType("navigation")).length&&("hq"==f[0].nextHopProtocol||"h2"==f[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function U6(f){return!!f.h||!!f.g&&f.g.size>=f.j}function B6(f){return f.h?1:f.g?f.g.size:0}function O1(f,y){return f.h?f.h==y:!!f.g&&f.g.has(y)}function k1(f,y){f.g?f.g.add(y):f.h=y}function j6(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}function $6(f){if(null!=f.h)return f.i.concat(f.h.D);if(null!=f.g&&0!==f.g.size){let y=f.i;for(const I of f.g.values())y=y.concat(I.D);return y}return D(f.i)}function H6(f,y){if(f.forEach&&"function"==typeof f.forEach)f.forEach(y,void 0);else if(l(f)||"string"==typeof f)Array.prototype.forEach.call(f,y,void 0);else for(var I=function RIe(f){if(f.na&&"function"==typeof f.na)return f.na();if(!f.V||"function"!=typeof f.V){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||"string"==typeof f){var y=[];f=f.length;for(var I=0;I<f;I++)y.push(I);return y}y=[],I=0;for(const S in f)y[I++]=S;return y}}}(f),S=function xIe(f){if(f.V&&"function"==typeof f.V)return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if("string"==typeof f)return f.split("");if(l(f)){for(var y=[],I=f.length,S=0;S<I;S++)y.push(f[S]);return y}for(S in y=[],I=0,f)y[I++]=f[S];return y}(f),G=S.length,ie=0;ie<G;ie++)y.call(void 0,S[ie],I&&I[ie],f)}Rc.prototype.ca=function(f){f=f.target;const y=this.M;y&&3==dl(f)?y.j():this.Y(f)},Rc.prototype.Y=function(f){try{if(f==this.g)e:{const Ni=dl(this.g);var y=this.g.Ba();if(this.g.Z(),!(3>Ni)&&(3!=Ni||this.g&&(this.h.h||this.g.oa()||n5(this.g)))){this.J||4!=Ni||7==y||Ly(),M1(this);var I=this.g.Z();this.X=I;t:if(F6(this)){var S=n5(this.g);f="";var G=S.length,ie=4==dl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){md(this),By(this);var Re="";break t}this.h.i=new a.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,f+=this.h.i.decode(S[y],{stream:!(ie&&y==G-1)});S.length=0,this.h.g+=f,this.C=0,Re=this.h.g}else Re=this.g.oa();if(this.o=200==I,function TIe(f,y,I,S,G,ie,Re){f.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+G+"]: "+y+"\n"+I+"\n"+ie+" "+Re})}(this.i,this.u,this.A,this.l,this.R,Ni,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Tn,fi=this.g;if((Tn=fi.g?fi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Tn)){var Yt=Tn;break t}}Yt=null}if(!(I=Yt)){this.o=!1,this.s=3,Zi(12),md(this),By(this);break e}gp(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,N1(this,I)}if(this.P){let Ro;for(I=!0;!this.J&&this.C<Re.length;){if(Ro=SIe(this,Re),Ro==R1){4==Ni&&(this.s=4,Zi(14),I=!1),gp(this.i,this.l,null,"[Incomplete Response]");break}if(Ro==O6){this.s=4,Zi(15),gp(this.i,this.l,Re,"[Invalid Chunk]"),I=!1;break}gp(this.i,this.l,Ro,null),N1(this,Ro)}if(F6(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Ni||0!=Re.length||this.h.h||(this.s=1,Zi(16),I=!1),this.o=this.o&&I,I){if(0<Re.length&&!this.W){this.W=!0;var Mi=this.j;Mi.g==this&&Mi.ba&&!Mi.M&&(Mi.j.info("Great, no buffering proxy detected. Bytes received: "+Re.length),U1(Mi),Mi.M=!0,Zi(11))}}else gp(this.i,this.l,Re,"[Invalid Chunked Response]"),md(this),By(this)}else gp(this.i,this.l,Re,null),N1(this,Re);4==Ni&&md(this),this.o&&!this.J&&(4==Ni?c5(this.j,this):(this.o=!1,eT(this)))}else(function zIe(f){const y={};f=(f.g&&2<=dl(f)&&f.g.getAllResponseHeaders()||"").split("\r\n");for(let S=0;S<f.length;S++){if(V(f[S]))continue;var I=z(f[S]);const G=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const ie=y[G]||[];y[G]=ie,ie.push(I)}!function U(f,y){for(const I in f)y.call(void 0,f[I],I,f)}(y,function(S){return S.join(", ")})})(this.g),400==I&&0<Re.indexOf("Unknown SID")?(this.s=3,Zi(12)):(this.s=0,Zi(13)),md(this),By(this)}}}catch{}},Rc.prototype.cancel=function(){this.J=!0,md(this)},Rc.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(function bIe(f,y){f.info(function(){return"TIMEOUT: "+y})}(this.i,this.A),2!=this.L&&(Ly(),Zi(17)),md(this),this.s=2,By(this)):L6(this,this.S-f)},V6.prototype.cancel=function(){if(this.i=$6(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const f of this.g.values())f.cancel();this.g.clear()}};var z6=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _d(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof _d){this.h=f.h,tT(this,f.j),this.o=f.o,this.g=f.g,nT(this,f.s),this.l=f.l;var y=f.i,I=new Hy;I.i=y.i,y.g&&(I.g=new Map(y.g),I.h=y.h),W6(this,I),this.m=f.m}else f&&(y=String(f).match(z6))?(this.h=!1,tT(this,y[1]||"",!0),this.o=jy(y[2]||""),this.g=jy(y[3]||"",!0),nT(this,y[4]),this.l=jy(y[5]||"",!0),W6(this,y[6]||"",!0),this.m=jy(y[7]||"")):(this.h=!1,this.i=new Hy(null,this.h))}function ul(f){return new _d(f)}function tT(f,y,I){f.j=I?jy(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function nT(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function W6(f,y,I){y instanceof Hy?(f.i=y,function LIe(f,y){y&&!f.j&&(Pc(f),f.i=null,f.g.forEach(function(I,S){var G=S.toLowerCase();S!=G&&(q6(this,S),Q6(this,G,I))},f)),f.j=y}(f.i,f.h)):(I||(y=$y(y,kIe)),f.i=new Hy(y,f.h))}function Wn(f,y,I){f.i.set(y,I)}function rT(f){return Wn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function jy(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function $y(f,y,I){return"string"==typeof f?(f=encodeURI(f).replace(y,MIe),I&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function MIe(f){return"%"+((f=f.charCodeAt(0))>>4&15).toString(16)+(15&f).toString(16)}_d.prototype.toString=function(){var f=[],y=this.j;y&&f.push($y(y,G6,!0),":");var I=this.g;return(I||"file"==y)&&(f.push("//"),(y=this.o)&&f.push($y(y,G6,!0),"@"),f.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&f.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&f.push("/"),f.push($y(I,"/"==I.charAt(0)?OIe:NIe,!0))),(I=this.i.toString())&&f.push("?",I),(I=this.m)&&f.push("#",$y(I,FIe)),f.join("")};var f,G6=/[#\/\?@]/g,NIe=/[#\?:]/g,OIe=/[#\?]/g,kIe=/[#\?@]/g,FIe=/#/g;function Hy(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function Pc(f){f.g||(f.g=new Map,f.h=0,f.i&&function PIe(f,y){if(f){f=f.split("&");for(var I=0;I<f.length;I++){var S=f[I].indexOf("="),G=null;if(0<=S){var ie=f[I].substring(0,S);G=f[I].substring(S+1)}else ie=f[I];y(ie,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}(f.i,function(y,I){f.add(decodeURIComponent(y.replace(/\+/g," ")),I)}))}function q6(f,y){Pc(f),y=mp(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function K6(f,y){return Pc(f),y=mp(f,y),f.g.has(y)}function Q6(f,y,I){q6(f,y),0<I.length&&(f.i=null,f.g.set(mp(f,y),D(I)),f.h+=I.length)}function mp(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function Mc(f,y,I,S,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),S(I)}catch{}}function BIe(){this.g=new wIe}function jIe(f,y,I){const S=I||"";try{H6(f,function(G,ie){let Re=G;c(G)&&(Re=b1(G)),y.push(S+ie+"="+encodeURIComponent(Re))})}catch(G){throw y.push(S+"type="+encodeURIComponent("_badmap")),G}}function zy(f){this.l=f.Ub||null,this.j=f.eb||!1}function iT(f,y){Pi.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Y6(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}function Wy(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Gy(f)}function Gy(f){f.onreadystatechange&&f.onreadystatechange.call(f)}function J6(f){let y="";return $e(f,function(I,S){y+=S,y+=":",y+=I,y+="\r\n"}),y}function F1(f,y,I){e:{for(S in I){var S=!1;break e}S=!0}S||(I=J6(I),"string"==typeof f?null!=I&&encodeURIComponent(String(I)):Wn(f,y,I))}function mr(f){Pi.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Hy.prototype).add=function(f,y){Pc(this),this.i=null,f=mp(this,f);var I=this.g.get(f);return I||this.g.set(f,I=[]),I.push(y),this.h+=1,this},n.forEach=function(f,y){Pc(this),this.g.forEach(function(I,S){I.forEach(function(G){f.call(y,G,S,this)},this)},this)},n.na=function(){Pc(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),I=[];for(let S=0;S<y.length;S++){const G=f[S];for(let ie=0;ie<G.length;ie++)I.push(y[S])}return I},n.V=function(f){Pc(this);let y=[];if("string"==typeof f)K6(this,f)&&(y=y.concat(this.g.get(mp(this,f))));else{f=Array.from(this.g.values());for(let I=0;I<f.length;I++)y=y.concat(f[I])}return y},n.set=function(f,y){return Pc(this),this.i=null,K6(this,f=mp(this,f))&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f&&0<(f=this.V(f)).length?String(f[0]):y},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var I=0;I<y.length;I++){var S=y[I];const ie=encodeURIComponent(String(S)),Re=this.V(S);for(S=0;S<Re.length;S++){var G=ie;""!==Re[S]&&(G+="="+encodeURIComponent(String(Re[S]))),f.push(G)}}return this.i=f.join("&")},b(zy,A1),zy.prototype.g=function(){return new iT(this.l,this.j)},zy.prototype.i=(f={},function(){return f}),b(iT,Pi),(n=iT.prototype).open=function(f,y){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,Gy(this)},n.send=function(f){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wy(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Gy(this)),this.g&&(this.readyState=3,Gy(this),this.g)))if("arraybuffer"===this.responseType)f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Y6(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?Wy(this):Gy(this),3==this.readyState&&Y6(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Wy(this))},n.Qa=function(f){this.g&&(this.response=f,Wy(this))},n.ga=function(){this.g&&Wy(this)},n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var I=y.next();!I.done;)f.push((I=I.value)[0]+": "+I[1]),I=y.next();return f.join("\r\n")},Object.defineProperty(iT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(f){this.m=f?"include":"same-origin"}}),b(mr,Pi);var $Ie=/^https?$/i,HIe=["POST","PUT"];function X6(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,Z6(f),sT(f)}function Z6(f){f.A||(f.A=!0,Xi(f,"complete"),Xi(f,"error"))}function e5(f){if(f.h&&typeof o<"u"&&(!f.v[1]||4!=dl(f)||2!=f.Z()))if(f.u&&4==dl(f))w6(f.Ea,0,f);else if(Xi(f,"readystatechange"),4==dl(f)){f.h=!1;try{const Re=f.Z();e:switch(Re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var I;if(!(I=y)){var S;if(S=0===Re){var G=String(f.D).match(z6)[1]||null;!G&&a.self&&a.self.location&&(G=a.self.location.protocol.slice(0,-1)),S=!$Ie.test(G?G.toLowerCase():"")}I=S}if(I)Xi(f,"complete"),Xi(f,"success");else{f.m=6;try{var ie=2<dl(f)?f.g.statusText:""}catch{ie=""}f.l=ie+" ["+f.Z()+"]",Z6(f)}}finally{sT(f)}}}function sT(f,y){if(f.g){t5(f);const I=f.g,S=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||Xi(f,"ready");try{I.onreadystatechange=S}catch{}}}function t5(f){f.I&&(a.clearTimeout(f.I),f.I=null)}function dl(f){return f.g?f.g.readyState:0}function n5(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function qy(f,y,I){return I&&I.internalChannelParams&&I.internalChannelParams[f]||y}function r5(f){this.Aa=0,this.i=[],this.j=new Uy,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qy("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qy("baseRetryDelayMs",5e3,f),this.cb=qy("retryDelaySeedMs",1e4,f),this.Wa=qy("forwardChannelMaxRetries",2,f),this.wa=qy("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new V6(f&&f.concurrentRequestLimit),this.Da=new BIe,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function L1(f){if(i5(f),3==f.G){var y=f.U++,I=ul(f.I);if(Wn(I,"SID",f.K),Wn(I,"RID",y),Wn(I,"TYPE","terminate"),Ky(f,I),(y=new Rc(f,f.j,y)).L=2,y.v=rT(ul(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=y.v,I=!0),I||(y.g=f5(y.j,null),y.g.ea(y.v)),y.F=Date.now(),eT(y)}d5(f)}function oT(f){f.g&&(U1(f),f.g.cancel(),f.g=null)}function i5(f){oT(f),f.u&&(a.clearTimeout(f.u),f.u=null),lT(f),f.h.cancel(),f.s&&("number"==typeof f.s&&a.clearTimeout(f.s),f.s=null)}function aT(f){if(!U6(f.h)&&!f.s){f.s=!0;var y=f.Ga;Py||m6(),My||(Py(),My=!0),m1.add(y,f),f.B=0}}function s5(f,y){var I;I=y?y.l:f.U++;const S=ul(f.I);Wn(S,"SID",f.K),Wn(S,"RID",I),Wn(S,"AID",f.T),Ky(f,S),f.m&&f.o&&F1(S,f.m,f.o),I=new Rc(f,f.j,I,f.B+1),null===f.m&&(I.H=f.o),y&&(f.i=y.D.concat(f.i)),y=o5(f,I,1e3),I.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),k1(f.h,I),P1(I,S,y)}function Ky(f,y){f.H&&$e(f.H,function(I,S){Wn(y,S,I)}),f.l&&H6({},function(I,S){Wn(y,S,I)})}function o5(f,y,I){I=Math.min(f.i.length,I);var S=f.l?_(f.l.Na,f.l,f):null;e:{var G=f.i;let ie=-1;for(;;){const Re=["count="+I];-1==ie?0<I?(ie=G[0].g,Re.push("ofs="+ie)):ie=0:Re.push("ofs="+ie);let Tn=!0;for(let fi=0;fi<I;fi++){let Yt=G[fi].g;const Mi=G[fi].map;if(Yt-=ie,0>Yt)ie=Math.max(0,G[fi].g-100),Tn=!1;else try{jIe(Mi,Re,"req"+Yt+"_")}catch{S&&S(Mi)}}if(Tn){S=Re.join("&");break e}}}return f=f.i.splice(0,I),y.D=f,S}function a5(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;Py||m6(),My||(Py(),My=!0),m1.add(y,f),f.v=0}}function V1(f){return!(f.g||f.u||3<=f.v||(f.Y++,f.u=Vy(_(f.Fa,f),u5(f,f.v)),f.v++,0))}function U1(f){null!=f.A&&(a.clearTimeout(f.A),f.A=null)}function l5(f){f.g=new Rc(f,f.j,"rpc",f.Y),null===f.m&&(f.g.H=f.o),f.g.O=0;var y=ul(f.qa);Wn(y,"RID","rpc"),Wn(y,"SID",f.K),Wn(y,"AID",f.T),Wn(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&Wn(y,"TO",f.ja),Wn(y,"TYPE","xmlhttp"),Ky(f,y),f.m&&f.o&&F1(y,f.m,f.o),f.L&&(f.g.I=f.L);var I=f.g;f=f.ia,I.L=1,I.v=rT(ul(y)),I.m=null,I.P=!0,k6(I,f)}function lT(f){null!=f.C&&(a.clearTimeout(f.C),f.C=null)}function c5(f,y){var I=null;if(f.g==y){lT(f),U1(f),f.g=null;var S=2}else{if(!O1(f.h,y))return;I=y.D,j6(f.h,y),S=1}if(0!=f.G)if(y.o)if(1==S){I=y.m?y.m.length:0,y=Date.now()-y.F;var G=f.B;Xi(S=J0(),new P6(S,I)),aT(f)}else a5(f);else if(3==(G=y.s)||0==G&&0<y.X||!(1==S&&function WIe(f,y){return!(B6(f.h)>=f.h.j-(f.s?1:0)||(f.s?(f.i=y.D.concat(f.i),0):1==f.G||2==f.G||f.B>=(f.Va?0:f.Wa)||(f.s=Vy(_(f.Ga,f,y),u5(f,f.B)),f.B++,0)))}(f,y)||2==S&&V1(f)))switch(I&&0<I.length&&(y=f.h,y.i=y.i.concat(I)),G){case 1:yd(f,5);break;case 4:yd(f,10);break;case 3:yd(f,6);break;default:yd(f,2)}}function u5(f,y){let I=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(I*=2),I*y}function yd(f,y){if(f.j.info("Error code "+y),2==y){var I=_(f.fb,f),S=f.Xa;const G=!S;S=new _d(S||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||tT(S,"https"),rT(S),G?function VIe(f,y){const I=new Uy;if(a.Image){const S=new Image;S.onload=v(Mc,I,"TestLoadImage: loaded",!0,y,S),S.onerror=v(Mc,I,"TestLoadImage: error",!1,y,S),S.onabort=v(Mc,I,"TestLoadImage: abort",!1,y,S),S.ontimeout=v(Mc,I,"TestLoadImage: timeout",!1,y,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=f}else y(!1)}(S.toString(),I):function UIe(f,y){new Uy;const S=new AbortController,G=setTimeout(()=>{S.abort(),Mc(0,0,!1,y)},1e4);fetch(f,{signal:S.signal}).then(ie=>{clearTimeout(G),Mc(0,0,!!ie.ok,y)}).catch(()=>{clearTimeout(G),Mc(0,0,!1,y)})}(S.toString(),I)}else Zi(2);f.G=0,f.l&&f.l.sa(y),d5(f),i5(f)}function d5(f){if(f.G=0,f.ka=[],f.l){const y=$6(f.h);(0!=y.length||0!=f.i.length)&&(P(f.ka,y),P(f.ka,f.i),f.h.i.length=0,D(f.i),f.i.length=0),f.l.ra()}}function h5(f,y,I){var S=I instanceof _d?ul(I):new _d(I);if(""!=S.g)y&&(S.g=y+"."+S.g),nT(S,S.s);else{var G=a.location;S=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var ie=new _d(null);S&&tT(ie,S),y&&(ie.g=y),G&&nT(ie,G),I&&(ie.l=I),S=ie}return y=f.ya,(I=f.D)&&y&&Wn(S,I,y),Wn(S,"VER",f.la),Ky(f,S),S}function f5(f,y,I){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return(y=new mr(f.Ca&&!f.pa?new zy({eb:I}):f.pa)).Ha(f.J),y}function p5(){}function cT(){}function ks(f,y){Pi.call(this),this.g=new r5(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!V(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!V(y)&&(this.g.D=y,null!==(f=this.h)&&y in f&&y in(f=this.h)&&delete f[y]),this.j=new _p(this)}function g5(f){S1.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const I in y){f=I;break e}f=void 0}(this.i=f)&&(f=this.i,y=null!==y&&f in y?y[f]:void 0),this.data=y}else this.data=f}function m5(){D1.call(this),this.status=1}function _p(f){this.g=f}(n=mr.prototype).Ha=function(f){this.J=f},n.ea=function(f,y,I,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():x1.g(),this.v=function A6(f){return f.h||(f.h=f.i())}(this.o?this.o:x1),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(ie){return void X6(this,ie)}if(f=I||"",I=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var G in S)I.set(G,S[G]);else{if("function"!=typeof S.keys||"function"!=typeof S.get)throw Error("Unknown input type for opt_headers: "+String(S));for(const ie of S.keys())I.set(ie,S.get(ie))}S=Array.from(I.keys()).find(ie=>"content-type"==ie.toLowerCase()),G=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(HIe,y,void 0))||S||G||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,Re]of I)this.g.setRequestHeader(ie,Re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{t5(this),this.u=!0,this.g.send(f),this.u=!1}catch(ie){X6(this,ie)}},n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Xi(this,"complete"),Xi(this,"abort"),sT(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sT(this,!0)),mr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?e5(this):this.bb())},n.bb=function(){e5(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<dl(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&0==y.indexOf(f)&&(y=y.substring(f.length)),IIe(y)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=r5.prototype).la=8,n.G=1,n.connect=function(f,y,I,S){Zi(0),this.W=f,this.H=y||{},I&&void 0!==S&&(this.H.OSID=I,this.H.OAID=S),this.F=this.X,this.I=h5(this,null,this.W),aT(this)},n.Ga=function(f){if(this.s)if(this.s=null,1==this.G){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const G=new Rc(this,this.j,f);let ie=this.o;if(this.S&&(ie?(ie=N(ie),j(ie,this.S)):ie=this.S),null!==this.m||this.O||(G.H=ie,ie=null),this.P)e:{for(var y=0,I=0;I<this.i.length;I++){var S=this.i[I];if(void 0===(S="__data__"in S.map&&"string"==typeof(S=S.map.__data__)?S.length:void 0))break;if(4096<(y+=S)){y=I;break e}if(4096===y||I===this.i.length-1){y=I+1;break e}}y=1e3}else y=1e3;y=o5(this,G,y),Wn(I=ul(this.I),"RID",f),Wn(I,"CVER",22),this.D&&Wn(I,"X-HTTP-Session-Id",this.D),Ky(this,I),ie&&(this.O?y="headers="+encodeURIComponent(String(J6(ie)))+"&"+y:this.m&&F1(I,this.m,ie)),k1(this.h,G),this.Ua&&Wn(I,"TYPE","init"),this.P?(Wn(I,"$req",y),Wn(I,"SID","null"),G.T=!0,P1(G,I,null)):P1(G,I,y),this.G=2}}else 3==this.G&&(f?s5(this,f):0==this.i.length||U6(this.h)||s5(this))},n.Fa=function(){if(this.u=null,l5(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Vy(_(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Zi(10),oT(this),l5(this))},n.Za=function(){null!=this.C&&(this.C=null,oT(this),V1(this),Zi(19))},n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Zi(2)):(this.j.info("Failed to ping google.com"),Zi(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=p5.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},cT.prototype.g=function(f,y){return new ks(f,y)},b(ks,Pi),ks.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ks.prototype.close=function(){L1(this.g)},ks.prototype.o=function(f){var y=this.g;if("string"==typeof f){var I={};I.__data__=f,f=I}else this.u&&((I={}).__data__=b1(f),f=I);y.i.push(new class{constructor(f,y){this.g=f,this.map=y}}(y.Ya++,f)),3==y.G&&aT(y)},ks.prototype.N=function(){this.g.l=null,delete this.j,L1(this.g),delete this.g,ks.aa.N.call(this)},b(g5,S1),b(m5,D1),b(_p,p5),_p.prototype.ua=function(){Xi(this.g,"a")},_p.prototype.ta=function(f){Xi(this.g,new g5(f))},_p.prototype.sa=function(f){Xi(this.g,new m5)},_p.prototype.ra=function(){Xi(this.g,"b")},cT.prototype.createWebChannel=cT.prototype.g,ks.prototype.send=ks.prototype.o,ks.prototype.open=ks.prototype.m,ks.prototype.close=ks.prototype.close,cj=qa.createWebChannelTransport=function(){return new cT},lj=qa.getStatEventTarget=function(){return J0()},aj=qa.Event=gd,gD=qa.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},X0.NO_ERROR=0,X0.TIMEOUT=8,X0.HTTP_ERROR=6,ZI=qa.ErrorCode=X0,M6.COMPLETE="complete",oj=qa.EventType=M6,S6.EventType=Fy,Fy.OPEN="a",Fy.CLOSE="b",Fy.ERROR="c",Fy.MESSAGE="d",Pi.prototype.listen=Pi.prototype.K,Sm=qa.WebChannel=S6,qa.FetchXmlHttpFactory=zy,mr.prototype.listenOnce=mr.prototype.L,mr.prototype.getLastError=mr.prototype.Ka,mr.prototype.getLastErrorCode=mr.prototype.Ba,mr.prototype.getStatus=mr.prototype.Z,mr.prototype.getResponseJson=mr.prototype.Oa,mr.prototype.getResponseText=mr.prototype.oa,mr.prototype.send=mr.prototype.ea,mr.prototype.setWithCredentials=mr.prototype.Ha,sj=qa.XhrIo=mr}).apply(typeof XI<"u"?XI:typeof self<"u"?self:typeof window<"u"?window:{});const uj="@firebase/firestore";class Kr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kr.UNAUTHENTICATED=new Kr(null),Kr.GOOGLE_CREDENTIALS=new Kr("google-credentials-uid"),Kr.FIRST_PARTY=new Kr("first-party-uid"),Kr.MOCK_USER=new Kr("mock-user");let Qh="10.14.0";const Ll=new Xs.Vy("@firebase/firestore");function Yh(){return Ll.logLevel}function me(n,...e){if(Ll.logLevel<=Xs.$b.DEBUG){const t=e.map(mD);Ll.debug(`Firestore (${Qh}): ${n}`,...t)}}function wr(n,...e){if(Ll.logLevel<=Xs.$b.ERROR){const t=e.map(mD);Ll.error(`Firestore (${Qh}): ${n}`,...t)}}function Ds(n,...e){if(Ll.logLevel<=Xs.$b.WARN){const t=e.map(mD);Ll.warn(`Firestore (${Qh}): ${n}`,...t)}}function mD(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ke(n="Unexpected state"){const e=`FIRESTORE (${Qh}) INTERNAL ASSERTION FAILED: `+n;throw wr(e),new Error(e)}function Ue(n,e){n||ke()}function De(n,e){return n}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends B.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class dj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fse{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kr.UNAUTHENTICATED))}shutdown(){}}class pse{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gse{constructor(e){this.t=e,this.currentUser=Kr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;Ue(void 0===this.o);let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,J.A)(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue("string"==typeof r.accessToken),new dj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(null===e||"string"==typeof e),new Kr(e)}}class mse{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Kr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _se{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new mse(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Kr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yse{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ue(void 0===this.o);const r=s=>{null!=s.error&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ue("string"==typeof t.token),this.R=t.token,new hj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function vse(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class fj{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=vse(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function ot(n,e){return n<e?-1:n>e?1:0}function Jh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function pj(n){return n+"\0"}class Yn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class We{constructor(e){this.timestamp=e}static fromTimestamp(e){return new We(e)}static min(){return new We(new Yn(0,0))}static max(){return new We(new Yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Dm{constructor(e,t,r){void 0===t?t=0:t>e.length&&ke(),void 0===r?r=e.length-t:r>e.length-t&&ke(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Dm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ut extends Dm{construct(e,t,r){return new Ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ut(t)}static emptyPath(){return new Ut([])}}const Ese=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $n extends Dm{construct(e,t,r){return new $n(e,t,r)}static isValidIdentifier(e){return Ese.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $n(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new fe(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new fe(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new fe(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new fe(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $n(t)}static emptyPath(){return new $n([])}}class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(Ut.fromString(e))}static fromName(e){return new Pe(Ut.fromString(e).popFirst(5))}static empty(){return new Pe(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ut.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new Ut(e.slice()))}}class Xh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function _D(n){return n.fields.find(e=>2===e.kind)}function Iu(n){return n.fields.filter(e=>2!==e.kind)}Xh.UNKNOWN_ID=-1;class wu{constructor(e,t){this.fieldPath=e,this.kind=t}}class Zh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Zh(0,xs.min())}}function gj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=We.fromTimestamp(1e9===r?new Yn(t+1,0):new Yn(t,r));return new xs(i,Pe.empty(),e)}function mj(n){return new xs(n.readTime,n.key,-1)}class xs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xs(We.min(),Pe.empty(),-1)}static max(){return new xs(We.max(),Pe.empty(),-1)}}function yD(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Pe.comparator(n.documentKey,e.documentKey),0!==t?t:ot(n.largestBatchId,e.largestBatchId))}const _j="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Vl(n){return vD.apply(this,arguments)}function vD(){return(vD=(0,J.A)(function*(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==_j)throw n;me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,r)=>{t(e)})}static reject(e){return new q((t,r)=>{r(e)})}static waitFor(e){return new q((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next(i=>i?q.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new q((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class ew{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Qr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new xm(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=ED(r.target.error);this.V.reject(new xm(e,i))}}static open(e,t,r,i){try{return new ew(t,e.transaction(i,r))}catch(s){throw new xm(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Tse(t)}}class ea{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===ea.S((0,B.ZQ)())&&wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return me("SimpleDb","Removing database:",e),Cu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,B.zW)())return!1;if(ea.v())return!0;const e=(0,B.ZQ)(),t=ea.S(e),r=0<t&&t<10,i=vj(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,J.A)(function*(){return t.db||(me("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new xm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new fe(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new fe(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new xm(e,a))},s.onupgradeneeded=o=>{me("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{me("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,J.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const l=ew.open(s.db,e,o?"readonly":"readwrite",r),c=i(l).next(d=>(l.g(),d)).catch(d=>(l.abort(d),q.reject(d))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,d="FirebaseError"!==c.name&&a<3;if(me("SimpleDb","Transaction failed with error:",c.message,"Retrying:",d),s.close(),!d)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function vj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Cse{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Cu(this.B.delete())}}class xm extends fe{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ul(n){return"IndexedDbTransactionError"===n.name}class Tse{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(me("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(me("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cu(r)}add(e){return me("SimpleDb","ADD",this.store.name,e,e),Cu(this.store.add(e))}get(e){return Cu(this.store.get(e)).next(t=>(void 0===t&&(t=null),me("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return me("SimpleDb","DELETE",this.store.name,e),Cu(this.store.delete(e))}count(){return me("SimpleDb","COUNT",this.store.name),Cu(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new q((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new q((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){me("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new q((r,i)=>{t.onerror=s=>{const o=ED(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new q((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new Cse(a),c=t(a.primaryKey,a.value,l);if(c instanceof q){const d=c.catch(p=>(l.done(),q.reject(p)));r.push(d)}l.isDone?i():null===l.K?a.continue():a.continue(l.K)}}).next(()=>q.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cu(n){return new q((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=ED(r.target.error);t(i)}})}let Ej=!1;function ED(n){const e=ea.S((0,B.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ej||(Ej=!0,setTimeout(()=>{throw r},0)),r}}return n}class bse{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;me("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,J.A)(function*(){t.task=null;try{me("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Ul(r)?me("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Vl(r)}yield t.X(6e4)}))}}class Ase{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,J.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return q.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return me("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(me("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=mj(s);yD(o,r)>0&&(r=o)}),new xs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Rs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Rm(n){return null==n}function Pm(n){return 0===n&&1/n==-1/0}function Ij(n){return"number"==typeof n&&Number.isInteger(n)&&!Pm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ci(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wj(e)),e=Sse(n.get(t),e);return wj(e)}function Sse(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function wj(n){return n+"\x01\x01"}function ta(n){const e=n.length;if(Ue(e>=2),2===e)return Ue("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ut.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&ke(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:ke()}s=o+2}return new Ut(r)}const Cj=["userId","batchId"];function tw(n,e){return[n,Ci(e)]}function Tj(n,e,t){return[n,Ci(e),t]}const Dse={},xse=["prefixPath","collectionGroup","readTime","documentId"],Rse=["prefixPath","collectionGroup","documentId"],Pse=["collectionGroup","readTime","prefixPath","documentId"],Mse=["canonicalId","targetId"],Nse=["targetId","path"],Ose=["path","targetId"],kse=["collectionId","parent"],Fse=["indexId","uid"],Lse=["uid","sequenceNumber"],Vse=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Use=["indexId","uid","orderedDocumentKey"],Bse=["userId","collectionPath","documentId"],jse=["userId","collectionPath","largestBatchId"],$se=["userId","collectionGroup","largestBatchId"],bj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Hse=[...bj,"documentOverlays"],Aj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Sj=Aj,ID=[...Sj,"indexConfiguration","indexState","indexEntries"],zse=ID,Wse=[...ID,"globals"];class wD extends yj{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Lr(n,e){const t=De(n);return ea.F(t._e,e)}function Dj(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Rj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class xn{constructor(e,t){this.comparator=e,this.root=t||li.EMPTY}insert(e,t){return new xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,li.BLACK,null,null))}remove(e){return new xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nw(this.root,e,this.comparator,!1)}getReverseIterator(){return new nw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nw(this.root,e,this.comparator,!0)}}class nw{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class li{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??li.RED,this.left=i??li.EMPTY,this.right=s??li.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new li(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return li.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return li.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,li.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,li.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ke();const e=this.left.check();if(e!==this.right.check())throw ke();return e+(this.isRed()?0:1)}}li.EMPTY=null,li.RED=!0,li.BLACK=!1,li.EMPTY=new class{constructor(){this.size=0}get key(){throw ke()}get value(){throw ke()}get color(){throw ke()}get left(){throw ke()}get right(){throw ke()}copy(e,t,r,i,s){return this}insert(e,t,r){return new li(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fn{constructor(e){this.comparator=e,this.data=new xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pj(this.data.getIterator())}getIteratorFrom(e){return new Pj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof fn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fn(this.comparator);return t.data=e,t}}class Pj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ef(n){return n.hasNext()?n.getNext():void 0}class us{constructor(e){this.fields=e,e.sort($n.comparator)}static empty(){return new us([])}unionWith(e){let t=new fn($n.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new us(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Mj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Mj("Invalid base64 string: "+s):s}}(e);return new pr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const qse=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ka(n){if(Ue(!!n),"string"==typeof n){let e=0;const t=qse.exec(n);if(Ue(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Jn(n.seconds),nanos:Jn(n.nanos)}}function Jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Qa(n){return"string"==typeof n?pr.fromBase64String(n):pr.fromUint8Array(n)}function rw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function iw(n){const e=n.mapValue.fields.__previous_value__;return rw(e)?iw(e):e}function Mm(n){const e=Ka(n.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}class Kse{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class jl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new jl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jl&&e.projectId===this.projectId&&e.database===this.database}}const $l={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sw={nullValue:"NULL_VALUE"};function Hl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rw(n)?4:Lj(n)?9007199254740991:lw(n)?10:11:ke()}function na(n,e){if(n===e)return!0;const t=Hl(n);if(t!==Hl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mm(n).isEqual(Mm(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ka(i.timestampValue),a=Ka(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Qa(n.bytesValue).isEqual(Qa(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Jn(i.geoPointValue.latitude)===Jn(s.geoPointValue.latitude)&&Jn(i.geoPointValue.longitude)===Jn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Jn(i.integerValue)===Jn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Jn(i.doubleValue),a=Jn(s.doubleValue);return o===a?Pm(o)===Pm(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Jh(n.arrayValue.values||[],e.arrayValue.values||[],na);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Dj(o)!==Dj(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!na(o[l],a[l])))return!1;return!0}(n,e);default:return ke()}var s}function Nm(n,e){return void 0!==(n.values||[]).find(t=>na(t,e))}function zl(n,e){if(n===e)return 0;const t=Hl(n),r=Hl(e);if(t!==r)return ot(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ot(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Jn(s.integerValue||s.doubleValue),l=Jn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Nj(n.timestampValue,e.timestampValue);case 4:return Nj(Mm(n),Mm(e));case 5:return ot(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Qa(s),l=Qa(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=ot(a[c],l[c]);if(0!==d)return d}return ot(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ot(Jn(s.latitude),Jn(o.latitude));return 0!==a?a:ot(Jn(s.longitude),Jn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Oj(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const v=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,b=null===(l=(o.fields||{}).value)||void 0===l?void 0:l.arrayValue,D=ot((null===(c=v?.values)||void 0===c?void 0:c.length)||0,(null===(d=b?.values)||void 0===d?void 0:d.length)||0);return 0!==D?D:Oj(v,b)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===$l.mapValue&&o===$l.mapValue)return 0;if(s===$l.mapValue)return 1;if(o===$l.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const _=ot(l[p],d[p]);if(0!==_)return _;const v=zl(a[l[p]],c[d[p]]);if(0!==v)return v}return ot(l.length,d.length)}(n.mapValue,e.mapValue);default:throw ke()}}function Nj(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ot(n,e);const t=Ka(n),r=Ka(e),i=ot(t.seconds,r.seconds);return 0!==i?i:ot(t.nanos,r.nanos)}function Oj(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=zl(t[i],r[i]);if(s)return s}return ot(t.length,r.length)}function tf(n){return CD(n)}function CD(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ka(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Qa(n.bytesValue).toBase64():"referenceValue"in n?Pe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=CD(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${CD(t.fields[o])}`;return i+"}"}(n.mapValue):ke()}function Tu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function TD(n){return!!n&&"integerValue"in n}function Om(n){return!!n&&"arrayValue"in n}function kj(n){return!!n&&"nullValue"in n}function Fj(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function aw(n){return!!n&&"mapValue"in n}function lw(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function km(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=km(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=km(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Lj(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const Vj={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Qse(n){return"nullValue"in n?sw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Tu(jl.empty(),Pe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?lw(n)?Vj:{mapValue:{}}:ke()}function Yse(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Tu(jl.empty(),Pe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Vj:"mapValue"in n?lw(n)?{mapValue:{}}:$l:ke()}function Uj(n,e){const t=zl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Bj(n,e){const t=zl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ci{constructor(e){this.value=e}static empty(){return new ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!aw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=km(t)}setAll(e){let t=$n.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=km(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());aw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return na(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];aw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Bl(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ci(km(this.value))}}function jj(n){const e=[];return Bl(n.fields,(t,r)=>{const i=new $n([t]);if(aw(r)){const s=jj(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new us(e)}class Hn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Hn(e,0,We.min(),We.min(),We.min(),ci.empty(),0)}static newFoundDocument(e,t,r,i){return new Hn(e,1,t,We.min(),r,i,0)}static newNoDocument(e,t){return new Hn(e,2,t,We.min(),We.min(),ci.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,We.min(),We.min(),ci.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(We.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wl{constructor(e,t){this.position=e,this.inclusive=t}}function $j(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Pe.comparator(Pe.fromName(o.referenceValue),t.key):zl(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Hj(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!na(n.position[t],e.position[t]))return!1;return!0}class Fm{constructor(e,t="asc"){this.field=e,this.dir=t}}function Jse(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class zj{}class Bt extends zj{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Xse(e,t,r):"array-contains"===t?new toe(e,r):"in"===t?new Yj(e,r):"not-in"===t?new noe(e,r):"array-contains-any"===t?new roe(e,r):new Bt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Zse(e,r):new eoe(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(zl(t,this.value)):null!==t&&Hl(this.value)===Hl(t)&&this.matchesComparison(zl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends zj{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new un(e,t)}matches(e){return nf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function nf(n){return"and"===n.op}function bD(n){return"or"===n.op}function AD(n){return Wj(n)&&nf(n)}function Wj(n){for(const e of n.filters)if(e instanceof un)return!1;return!0}function SD(n){if(n instanceof Bt)return n.field.canonicalString()+n.op.toString()+tf(n.value);if(AD(n))return n.filters.map(e=>SD(e)).join(",");{const e=n.filters.map(t=>SD(t)).join(",");return`${n.op}(${e})`}}function Gj(n,e){return n instanceof Bt?(r=n,(i=e)instanceof Bt&&r.op===i.op&&r.field.isEqual(i.field)&&na(r.value,i.value)):n instanceof un?function(r,i){return i instanceof un&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&Gj(o,i.filters[a]),!0)}(n,e):void ke();var r,i}function qj(n,e){const t=n.filters.concat(e);return un.create(t,n.op)}function Kj(n){return n instanceof Bt?`${(t=n).field.canonicalString()} ${t.op} ${tf(t.value)}`:n instanceof un?function(t){return t.op.toString()+" {"+t.getFilters().map(Kj).join(" ,")+"}"}(n):"Filter";var t}class Xse extends Bt{constructor(e,t,r){super(e,t,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Zse extends Bt{constructor(e,t){super(e,"in",t),this.keys=Qj(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class eoe extends Bt{constructor(e,t){super(e,"not-in",t),this.keys=Qj(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Qj(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class toe extends Bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Om(t)&&Nm(t.arrayValue,this.value)}}class Yj extends Bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Nm(this.value.arrayValue,t)}}class noe extends Bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Nm(this.value.arrayValue,t)}}class roe extends Bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Om(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Nm(this.value.arrayValue,r))}}class ioe{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function DD(n,e=null,t=[],r=[],i=null,s=null,o=null){return new ioe(n,e,t,r,i,s,o)}function bu(n){const e=De(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>SD(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Rm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>tf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>tf(r)).join(",")),e.ue=t}return e.ue}function Lm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Jse(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Gj(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Hj(n.startAt,e.startAt)&&Hj(n.endAt,e.endAt)}function cw(n){return Pe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function uw(n,e){return n.filters.filter(t=>t instanceof Bt&&t.field.isEqual(e))}function Jj(n,e,t){let r=sw,i=!0;for(const s of uw(n,e)){let o=sw,a=!0;switch(s.op){case"<":case"<=":o=Qse(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=sw}Uj({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Uj({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function Xj(n,e,t){let r=$l,i=!0;for(const s of uw(n,e)){let o=$l,a=!0;switch(s.op){case">=":case">":o=Yse(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=$l}Bj({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Bj({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Ya{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null}}function Zj(n,e,t,r,i,s,o,a){return new Ya(n,e,t,r,i,s,o,a)}function rf(n){return new Ya(n)}function e$(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function xD(n){return null!==n.collectionGroup}function sf(n){const e=De(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new fn($n.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Fm(s,r))}),t.has($n.keyField().canonicalString())||e.ce.push(new Fm($n.keyField(),r))}return e.ce}function Ti(n){const e=De(n);return e.le||(e.le=function n$(n,e){if("F"===n.limitType)return DD(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Fm(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Wl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Wl(n.startAt.position,n.startAt.inclusive):null;return DD(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,sf(n))),e.le}function RD(n,e){const t=n.filters.concat([e]);return new Ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function dw(n,e,t){return new Ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vm(n,e){return Lm(Ti(n),Ti(e))&&n.limitType===e.limitType}function r$(n){return`${bu(Ti(n))}|lt:${n.limitType}`}function af(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Kj(i)).join(", ")}]`),Rm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>tf(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>tf(i)).join(",")),`Target(${r})`}(Ti(n))}; limitType=${n.limitType})`}function Um(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of sf(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,l){const c=$j(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,sf(r),i)||r.endAt&&!function(o,a,l){const c=$j(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,sf(r),i)));var r,i}function i$(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function s$(n){return(e,t)=>{let r=!1;for(const i of sf(n)){const s=soe(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function soe(n,e,t){const r=n.field.isKeyField()?Pe.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?zl(l,c):ke()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ke()}}class Ja{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bl(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Rj(this.inner)}size(){return this.innerSize}}const ooe=new xn(Pe.comparator);function ds(){return ooe}const o$=new xn(Pe.comparator);function Bm(...n){let e=o$;for(const t of n)e=e.insert(t.key,t);return e}function a$(n){let e=o$;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ra(){return jm()}function l$(){return jm()}function jm(){return new Ja(n=>n.toString(),(n,e)=>n.isEqual(e))}const aoe=new xn(Pe.comparator),loe=new fn(Pe.comparator);function gt(...n){let e=loe;for(const t of n)e=e.add(t);return e}const coe=new fn(ot);function PD(){return coe}function MD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pm(e)?"-0":e}}function c$(n){return{integerValue:""+n}}function u$(n,e){return Ij(e)?c$(e):MD(n,e)}class hw{constructor(){this._=void 0}}function uoe(n,e,t){return n instanceof lf?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&rw(s)&&(s=iw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Au?h$(n,e):n instanceof Su?f$(n,e):function(i,s){const o=d$(i,s),a=p$(o)+p$(i.Pe);return TD(o)&&TD(i.Pe)?c$(a):MD(i.serializer,a)}(n,e)}function doe(n,e,t){return n instanceof Au?h$(n,e):n instanceof Su?f$(n,e):t}function d$(n,e){return n instanceof cf?TD(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class lf extends hw{}class Au extends hw{constructor(e){super(),this.elements=e}}function h$(n,e){const t=g$(e);for(const r of n.elements)t.some(i=>na(i,r))||t.push(r);return{arrayValue:{values:t}}}class Su extends hw{constructor(e){super(),this.elements=e}}function f$(n,e){let t=g$(e);for(const r of n.elements)t=t.filter(i=>!na(i,r));return{arrayValue:{values:t}}}class cf extends hw{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function p$(n){return Jn(n.integerValue||n.doubleValue)}function g$(n){return Om(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $m{constructor(e,t){this.field=e,this.transform=t}}class foe{constructor(e,t){this.version=e,this.transformResults=t}}class Xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fw(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class pw{}function m$(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new df(n.key,Xn.none()):new uf(n.key,n.data,Xn.none());{const t=n.data,r=ci.empty();let i=new fn($n.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Xa(n.key,r,new us(i.toArray()),Xn.none())}}function poe(n,e,t){n instanceof uf?function(i,s,o){const a=i.value.clone(),l=v$(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Xa?function(i,s,o){if(!fw(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=v$(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(y$(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Hm(n,e,t,r){return n instanceof uf?function(s,o,a,l){if(!fw(s.precondition,o))return a;const c=s.value.clone(),d=E$(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Xa?function(s,o,a,l){if(!fw(s.precondition,o))return a;const c=E$(s.fieldTransforms,l,o),d=o.data;return d.setAll(y$(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):(a=t,fw(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function goe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=d$(r.transform,i||null);null!=s&&(null===t&&(t=ci.empty()),t.set(r.field,s))}return t||null}function _$(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Jh(r,i,(s,o)=>function hoe(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Au&&i instanceof Au||r instanceof Su&&i instanceof Su?Jh(r.elements,i.elements,na):r instanceof cf&&i instanceof cf?na(r.Pe,i.Pe):r instanceof lf&&i instanceof lf);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class uf extends pw{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xa extends pw{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function y$(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function v$(n,e,t){const r=new Map;Ue(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,doe(o,a,t[i]))}return r}function E$(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,uoe(s,o,e))}return r}class df extends pw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ND extends pw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class OD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&poe(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Hm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Hm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=l$();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=m$(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(We.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gt())}isEqual(e){return this.batchId===e.batchId&&Jh(this.mutations,e.mutations,(t,r)=>_$(t,r))&&Jh(this.baseMutations,e.baseMutations,(t,r)=>_$(t,r))}}class kD{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ue(e.mutations.length===r.length);let i=aoe;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new kD(e,t,r,i)}}class FD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class moe{constructor(e,t){this.count=e,this.unchangedNames=t}}var Dr,zt;function w$(n){switch(n){default:return ke();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0}}function C$(n){if(void 0===n)return wr("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Dr.OK:return ne.OK;case Dr.CANCELLED:return ne.CANCELLED;case Dr.UNKNOWN:return ne.UNKNOWN;case Dr.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Dr.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Dr.INTERNAL:return ne.INTERNAL;case Dr.UNAVAILABLE:return ne.UNAVAILABLE;case Dr.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Dr.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Dr.NOT_FOUND:return ne.NOT_FOUND;case Dr.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Dr.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Dr.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Dr.ABORTED:return ne.ABORTED;case Dr.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Dr.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Dr.DATA_LOSS:return ne.DATA_LOSS;default:return ke()}}(zt=Dr||(Dr={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";function T$(){return new TextEncoder}const _oe=new Eu([4294967295,4294967295],0);function b$(n){const e=T$().encode(n),t=new ij;return t.update(e),new Uint8Array(t.digest())}function A$(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Eu([t,r],0),new Eu([i,s],0)]}class LD{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new zm(`Invalid padding: ${t}`);if(r<0)throw new zm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new zm(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new zm(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Eu.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Eu.fromNumber(r)));return 1===i.compare(_oe)&&(i=new Eu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=b$(e),[r,i]=A$(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new LD(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=b$(e),[r,i]=A$(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class zm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wm{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Gm.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wm(We.min(),i,new xn(ot),ds(),gt())}}class Gm{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Gm(r,t,gt(),gt(),gt())}}class mw{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class S${constructor(e,t){this.targetId=e,this.me=t}}class D${constructor(e,t,r=pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class x${constructor(){this.fe=0,this.ge=P$(),this.pe=pr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=gt(),t=gt(),r=gt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ke()}}),new Gm(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=P$()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yoe{constructor(e){this.Le=e,this.Be=new Map,this.ke=ds(),this.qe=R$(),this.Qe=new xn(ot)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ke()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(cw(s))if(0===r){const o=new Pe(s.path);this.Ue(t,o,Hn.newNoDocument(o,We.min()))}else Ue(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;0!==l&&(this.je(t),this.Qe=this.Qe.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Qa(r).toUint8Array()}catch(l){if(l instanceof Mj)return Ds("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new LD(o,i,s)}catch(l){return Ds(l instanceof zm?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&cw(a.target)){const l=new Pe(a.target.path);null!==this.ke.get(l)||this.it(o,l)||this.Ue(o,l,Hn.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=gt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Wm(e,t,this.Qe,this.ke,r);return this.ke=ds(),this.qe=R$(),this.Qe=new xn(ot),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new x$,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new fn(ot),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||me("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new x$),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function R$(){return new xn(Pe.comparator)}function P$(){return new xn(Pe.comparator)}const voe={asc:"ASCENDING",desc:"DESCENDING"},Eoe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ioe={and:"AND",or:"OR"};class woe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function VD(n,e){return n.useProto3Json||Rm(e)?e:{value:e}}function hf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M$(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Coe(n,e){return hf(n,e.toTimestamp())}function Cr(n){return Ue(!!n),We.fromTimestamp(function(t){const r=Ka(t);return new Yn(r.seconds,r.nanos)}(n))}function UD(n,e){return BD(n,e).canonicalString()}function BD(n,e){const t=(i=n,new Ut(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function N$(n){const e=Ut.fromString(n);return Ue(z$(e)),e}function qm(n,e){return UD(n.databaseId,e.path)}function ia(n,e){const t=N$(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(F$(t))}function O$(n,e){return UD(n.databaseId,e)}function k$(n){const e=N$(n);return 4===e.length?Ut.emptyPath():F$(e)}function jD(n){return new Ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function F$(n){return Ue(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function L$(n,e,t){return{name:qm(n,e),fields:t.value.mapValue.fields}}function V$(n,e,t){const r=ia(n,e.name),i=Cr(e.updateTime),s=e.createTime?Cr(e.createTime):We.min(),o=new ci({mapValue:{fields:e.fields}}),a=Hn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Km(n,e){let t;if(e instanceof uf)t={update:L$(n,e.key,e.value)};else if(e instanceof df)t={delete:qm(n,e.key)};else if(e instanceof Xa)t={update:L$(n,e.key,e.data),updateMask:Poe(e.fieldMask)};else{if(!(e instanceof ND))return ke();t={verify:qm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof lf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Au)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Su)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof cf)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ke()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Coe(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ke()),t;var s}function $D(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Xn.updateTime(Cr(s.updateTime)):void 0!==s.exists?Xn.exists(s.exists):Xn.none():Xn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;"setToServerValue"in a?(Ue("REQUEST_TIME"===a.setToServerValue),l=new lf):"appendMissingElements"in a?l=new Au(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new Su(a.removeAllFromArray.values||[]):"increment"in a?l=new cf(o,a.increment):ke();const c=$n.fromServerFormat(a.fieldPath);return new $m(c,l)}(n,i)):[];var s;if(e.update){const i=ia(n,e.update.name),s=new ci({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new us((e.updateMask.fieldPaths||[]).map(d=>$n.fromServerFormat(d)));return new Xa(i,s,o,t,r)}return new uf(i,s,t,r)}if(e.delete){const i=ia(n,e.delete);return new df(i,t)}if(e.verify){const i=ia(n,e.verify);return new ND(i,t)}return ke()}function U$(n,e){return{documents:[O$(n,e.path)]}}function _w(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=O$(n,i);const s=function(c){if(0!==c.length)return H$(un.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(d=>{return{field:Gl((_=d).field),direction:Doe(_.dir)};var _})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=VD(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i};var c}function j$(n){let e=k$(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ue(1===r);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(p){const _=$$(p);return _ instanceof un&&AD(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(_=>{return new Fm(ff((b=_).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;t.limit&&(a=function(p){let _;return _="object"==typeof p?p.value:p,Rm(_)?null:_}(t.limit));let l=null;var p;t.startAt&&(l=new Wl((p=t.startAt).values||[],!!p.before));let c=null;return t.endAt&&(c=function(p){return new Wl(p.values||[],!p.before)}(t.endAt)),Zj(e,i,o,s,a,"F",l,c)}function $$(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ff(t.unaryFilter.field);return Bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ff(t.unaryFilter.field);return Bt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ff(t.unaryFilter.field);return Bt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ff(t.unaryFilter.field);return Bt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ke()}}(n):void 0!==n.fieldFilter?Bt.create(ff((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ke()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return un.create(t.compositeFilter.filters.map(r=>$$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ke()}}(t.compositeFilter.op))}(n):ke();var t}function Doe(n){return voe[n]}function xoe(n){return Eoe[n]}function Roe(n){return Ioe[n]}function Gl(n){return{fieldPath:n.canonicalString()}}function ff(n){return $n.fromServerFormat(n.fieldPath)}function H$(n){return n instanceof Bt?function(t){if("=="===t.op){if(Fj(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NAN"}};if(kj(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Fj(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NAN"}};if(kj(t.value))return{unaryFilter:{field:Gl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(t.field),op:xoe(t.op),value:t.value}}}(n):n instanceof un?function(t){const r=t.getFilters().map(i=>H$(i));return 1===r.length?r[0]:{compositeFilter:{op:Roe(t.op),filters:r}}}(n):ke()}function Poe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function z$(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Za{constructor(e,t,r,i,s=We.min(),o=We.min(),a=pr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class W${constructor(e){this.ct=e}}function G$(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:yw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:qm(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:hf(s,o.version.toTimestamp()),createTime:hf(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Du(e.version)};else{if(!e.isUnknownDocument())return ke();r.unknownDocument={path:t.path.toArray(),version:Du(e.version)}}var s,o;return r}function yw(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Du(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xu(n){const e=new Yn(n.seconds,n.nanoseconds);return We.fromTimestamp(e)}function Ru(n,e){const t=(e.baseMutations||[]).map(s=>$D(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>$D(n.ct,s)),i=Yn.fromMillis(e.localWriteTimeMs);return new OD(e.batchId,i,t,r)}function Qm(n){const e=xu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?xu(n.lastLimboFreeSnapshotVersion):We.min();let r;return r=void 0!==n.query.documents?(Ue(1===(s=n.query).documents.length),Ti(rf(k$(s.documents[0])))):function(s){return Ti(j$(s))}(n.query),new Za(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,pr.fromBase64String(n.resumeToken));var s}function q$(n,e){const t=Du(e.snapshotVersion),r=Du(e.lastLimboFreeSnapshotVersion);let i;i=cw(e.target)?U$(n.ct,e.target):_w(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:bu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function HD(n){const e=j$({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?dw(e,e.limit,"L"):e}function zD(n,e){return new FD(e.largestBatchId,$D(n.ct,e.overlayMutation))}function K$(n,e){const t=e.path.lastSegment();return[n,Ci(e.path.popLast()),t]}function Q$(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Du(r.readTime),documentKey:Ci(r.documentKey.path),largestBatchId:r.largestBatchId}}class Noe{getBundleMetadata(e,t){return Y$(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:xu(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Y$(e).put({bundleId:(i=t).id,createTime:Du(Cr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return J$(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:HD(s.bundledQuery),readTime:xu(s.readTime)};var s})}saveNamedQuery(e,t){return J$(e).put({name:(i=t).name,readTime:Du(Cr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Y$(n){return Lr(n,"bundles")}function J$(n){return Lr(n,"namedQueries")}class vw{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new vw(e,t.uid||"")}getOverlay(e,t){return Ym(e).get(K$(this.userId,t)).next(r=>r?zD(this.serializer,r):null)}getOverlays(e,t){const r=ra();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new FD(t,o);i.push(this.ht(e,a))}),q.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Ci(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Ym(e).j("collectionPathOverlayIndex",a))}),q.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ra(),s=Ci(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ym(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=zD(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=ra();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ym(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{const p=zD(this.serializer,c);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return Ym(e).put(function(i,s,o){const[a,l,c]=K$(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Km(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function Ym(n){return Lr(n,"documentOverlays")}class Ooe{Pt(e){return Lr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?pr.fromUint8Array(r):pr.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Pu{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Jn(e.integerValue));else if("doubleValue"in e){const r=Jn(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Pm(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Ka(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Qa(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Lj(e)?this.dt(t,Number.MAX_SAFE_INTEGER):lw(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ke()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(Jn(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Pe.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function koe(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function X$(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=koe(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}Pu.vt=new Pu;class Foe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=X$(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=X$(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Loe{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Voe{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Jm{constructor(){this.jt=new Foe,this.Ht=new Loe(this.jt),this.Jt=new Voe(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Mu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Mu(this.indexId,this.documentKey,this.arrayValue,r)}}function ql(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Z$(n.arrayValue,e.arrayValue),0!==t?t:(t=Z$(n.directionalValue,e.directionalValue),0!==t?t:Pe.comparator(n.documentKey,e.documentKey)))}function Z$(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class eH{constructor(e){this.Xt=new fn((t,r)=>$n.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Ue(e.collectionGroup===this.collectionId),this.nn)return!1;const t=_D(e);if(void 0!==t&&!this.sn(t))return!1;const r=Iu(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.on(a,l)||!this._n(this.en[o++],l))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new fn($n.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new wu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new wu(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new wu(r.field,"asc"===r.dir?0:1)));return new Xh(Xh.UNKNOWN_ID,this.collectionId,t,Zh.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function tH(n){var e,t;if(Ue(n instanceof Bt||n instanceof un),n instanceof Bt){if(n instanceof Yj){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Bt.create(n.field,"==",s)))||[];return un.create(i,"or")}return n}const r=n.filters.map(i=>tH(i));return un.create(r,n.op)}function Uoe(n){if(0===n.getFilters().length)return[];const e=qD(tH(n));return Ue(nH(e)),WD(e)||GD(e)?[e]:e.getFilters()}function WD(n){return n instanceof Bt}function GD(n){return n instanceof un&&AD(n)}function nH(n){return WD(n)||GD(n)||function(t){if(t instanceof un&&bD(t)){for(const r of t.getFilters())if(!WD(r)&&!GD(r))return!1;return!0}return!1}(n)}function qD(n){if(Ue(n instanceof Bt||n instanceof un),n instanceof Bt)return n;if(1===n.filters.length)return qD(n.filters[0]);const e=n.filters.map(r=>qD(r));let t=un.create(e,n.op);return t=Ew(t),nH(t)?t:(Ue(t instanceof un),Ue(nf(t)),Ue(t.filters.length>1),t.filters.reduce((r,i)=>KD(r,i)))}function KD(n,e){let t;return Ue(n instanceof Bt||n instanceof un),Ue(e instanceof Bt||e instanceof un),t=n instanceof Bt?e instanceof Bt?un.create([n,e],"and"):rH(n,e):e instanceof Bt?rH(e,n):function(i,s){if(Ue(i.filters.length>0&&s.filters.length>0),nf(i)&&nf(s))return qj(i,s.getFilters());const o=bD(i)?i:s,a=bD(i)?s:i,l=o.filters.map(c=>KD(c,a));return un.create(l,"or")}(n,e),Ew(t)}function rH(n,e){if(nf(e))return qj(e,n.getFilters());{const t=e.filters.map(r=>KD(n,r));return un.create(t,"or")}}function Ew(n){if(Ue(n instanceof Bt||n instanceof un),n instanceof Bt)return n;const e=n.getFilters();if(1===e.length)return Ew(e[0]);if(Wj(n))return n;const t=e.map(i=>Ew(i)),r=[];return t.forEach(i=>{i instanceof Bt?r.push(i):i instanceof un&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:un.create(r,n.op)}class Boe{constructor(){this.un=new QD}addToCollectionParentIndex(e,t){return this.un.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(xs.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(xs.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class QD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new fn(Ut.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new fn(Ut.comparator)).toArray()}}const Iw=new Uint8Array(0);class joe{constructor(e,t){this.databaseId=t,this.cn=new QD,this.ln=new Ja(r=>bu(r),(r,i)=>Lm(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Ci(i)};return iH(e).put(s)}return q.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[pj(t),""],!1,!0);return iH(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(ta(o.parent))}return r})}addFieldIndex(e,t){const r=Xm(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=gf(e);return s.next(a=>{o.put(Q$(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Xm(e),i=gf(e),s=pf(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Xm(e),r=pf(e),i=gf(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return q.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new eH(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=pf(e);let i=!0;const s=new Map;return q.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=gt();const a=[];return q.forEach(s,(l,c)=>{var Y;me("IndexedDbIndexManager",`Using index ${Y=l,`id=${Y.indexId}|cg=${Y.collectionGroup}|f=${Y.fields.map(ue=>`${ue.fieldPath}:${ue.kind}`).join(",")}`} to execute ${bu(t)}`);const d=function(Y,ue){const be=_D(ue);if(void 0===be)return null;for(const $e of uw(Y,be.fieldPath))switch($e.op){case"array-contains-any":return $e.value.arrayValue.values||[];case"array-contains":return[$e.value]}return null}(c,l),p=function(Y,ue){const be=new Map;for(const $e of Iu(ue))for(const U of uw(Y,$e.fieldPath))switch(U.op){case"==":case"in":be.set($e.fieldPath.canonicalString(),U.value);break;case"not-in":case"!=":return be.set($e.fieldPath.canonicalString(),U.value),Array.from(be.values())}return null}(c,l),_=function(Y,ue){const be=[];let $e=!0;for(const U of Iu(ue)){const N=0===U.kind?Jj(Y,U.fieldPath,Y.startAt):Xj(Y,U.fieldPath,Y.startAt);be.push(N.value),$e&&($e=N.inclusive)}return new Wl(be,$e)}(c,l),v=function(Y,ue){const be=[];let $e=!0;for(const U of Iu(ue)){const N=0===U.kind?Xj(Y,U.fieldPath,Y.endAt):Jj(Y,U.fieldPath,Y.endAt);be.push(N.value),$e&&($e=N.inclusive)}return new Wl(be,$e)}(c,l),b=this.In(l,c,_),D=this.In(l,c,v),P=this.Tn(l,c,p),H=this.En(l.indexId,d,b,_.inclusive,D,v.inclusive,P);return q.forEach(H,V=>r.G(V,t.limit).next(Y=>{Y.forEach(ue=>{const be=Pe.fromSegments(ue.documentKey);o.has(be)||(o=o.add(be),a.push(be))})}))}).next(()=>a)}return q.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:Uoe(un.create(e.filters,"and")).map(r=>DD(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const l=(null!=t?t.length:1)*Math.max(r.length,s.length),c=l/(null!=t?t.length:1),d=[];for(let p=0;p<l;++p){const _=t?this.dn(t[p/c]):Iw,v=this.An(e,_,r[p%c],i),b=this.Rn(e,_,s[p%c],o),D=a.map(P=>this.An(e,_,P,!0));d.push(...this.createRange(v,b,D))}return d}An(e,t,r,i){const s=new Mu(e,Pe.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Mu(e,Pe.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new eH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return q.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(l){let c=new fn($n.comparator),d=!1;for(const p of l.filters)for(const _ of p.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?d=!0:c=c.add(_.field));for(const p of l.orderBy)p.field.isKeyField()||(c=c.add(p.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new Jm;for(const i of Iu(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);Pu.vt.It(s,o)}return r.zt()}dn(e){const t=new Jm;return Pu.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Jm;return Pu.vt.It(Tu(this.databaseId,t),r.Yt(function(s){const o=Iu(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new Jm);let s=0;for(const o of Iu(e)){const a=r[s++];for(const l of i)if(this.fn(t,o.fieldPath)&&Om(a))i=this.gn(i,o,a);else{const c=l.Yt(o.kind);Pu.vt.It(a,c)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Jm;l.seed(a.zt()),Pu.vt.It(o,l.Yt(t.kind)),s.push(l)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Bt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Xm(e),i=gf(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return q.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,p){const _=p?new Zh(p.sequenceNumber,new xs(xu(p.readTime),new Pe(ta(p.documentKey)),p.largestBatchId)):Zh.empty(),v=d.fields.map(([b,D])=>new wu($n.fromServerFormat(b),D));return new Xh(d.indexId,d.collectionGroup,v,_)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:ot(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Xm(e),s=gf(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>q.forEach(a,l=>s.put(Q$(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?q.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),q.forEach(a,l=>this.wn(e,i,l).next(c=>{const d=this.Sn(s,l);return c.isEqual(d)?q.resolve():this.bn(e,s,l,c,d)}))))})}Dn(e,t,r,i){return pf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return pf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=pf(e);let s=new fn(ql);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Mu(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new fn(ql);const i=this.Vn(t,e);if(null==i)return r;const s=_D(t);if(null!=s){const o=e.data.field(s.fieldPath);if(Om(o))for(const a of o.arrayValue.values||[])r=r.add(new Mu(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Mu(t.indexId,e.key,Iw,i));return r}bn(e,t,r,i,s){me("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,d,p,_){const v=l.getIterator(),b=c.getIterator();let D=ef(v),P=ef(b);for(;D||P;){let H=!1,V=!1;if(D&&P){const Y=d(D,P);Y<0?V=!0:Y>0&&(H=!0)}else null!=D?V=!0:H=!0;H?(p(P),P=ef(b)):V?(_(D),D=ef(v)):(D=ef(v),P=ef(b))}}(i,s,ql,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),q.waitFor(o)}yn(e){let t=1;return gf(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>ql(o,a)).filter((o,a,l)=>!a||0!==ql(o,l[a-1]));const i=[];i.push(e);for(const o of r){const a=ql(o,e),l=ql(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&l<0)i.push(o),i.push(o.Zt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Iw,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Iw,[]]))}return s}Cn(e,t){return ql(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(sH)}getMinOffset(e,t){return q.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||ke())).next(sH)}}function iH(n){return Lr(n,"collectionParents")}function pf(n){return Lr(n,"indexEntries")}function Xm(n){return Lr(n,"indexConfiguration")}function gf(n){return Lr(n,"indexState")}function sH(n){Ue(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;yD(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new xs(e.readTime,e.documentKey,t)}const oH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new bi(e,bi.DEFAULT_COLLECTION_PERCENTILE,bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function aH(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(d,p,_)=>(a++,_.delete()));s.push(l.next(()=>{Ue(1===a)}));const c=[];for(const d of t.mutations){const p=Tj(e,d.key.path,t.batchId);s.push(i.delete(p)),c.push(d.key)}return q.waitFor(s).next(()=>c)}function ww(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ke();e=n.noDocument}return JSON.stringify(e).length}bi.DEFAULT_COLLECTION_PERCENTILE=10,bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bi.DEFAULT=new bi(41943040,bi.DEFAULT_COLLECTION_PERCENTILE,bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bi.DISABLED=new bi(-1,0,0);class Cw{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Ue(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Cw(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kl(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=mf(e),o=Kl(e);return o.add({}).next(a=>{Ue("number"==typeof a);const l=new OD(a,t,r,i),c=function(v,b,D){const P=D.baseMutations.map(V=>Km(v.ct,V)),H=D.mutations.map(V=>Km(v.ct,V));return{userId:b,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:P,mutations:H}}(this.serializer,this.userId,l),d=[];let p=new fn((_,v)=>ot(_.canonicalString(),v.canonicalString()));for(const _ of i){const v=Tj(this.userId,_.key.path,a);p=p.add(_.key.path.popLast()),d.push(o.put(c)),d.push(s.put(v,Dse))}return p.forEach(_=>{d.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),q.waitFor(d).next(()=>l)})}lookupMutationBatch(e,t){return Kl(e).get(t).next(r=>r?(Ue(r.userId===this.userId),Ru(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?q.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Kl(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Ue(a.batchId>=r),s=Ru(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Kl(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kl(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ru(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=tw(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return mf(e).J({range:i},(o,a,l)=>{const[c,d,p]=o,_=ta(d);if(c===this.userId&&t.path.isEqual(_))return Kl(e).get(p).next(v=>{if(!v)throw ke();Ue(v.userId===this.userId),s.push(Ru(this.serializer,v))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fn(ot);const i=[];return t.forEach(s=>{const o=tw(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=mf(e).J({range:a},(c,d,p)=>{const[_,v,b]=c,D=ta(v);_===this.userId&&s.path.isEqual(D)?r=r.add(b):p.done()});i.push(l)}),q.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=tw(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new fn(ot);return mf(e).J({range:o},(l,c,d)=>{const[p,_,v]=l,b=ta(_);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Kl(e).get(s).next(o=>{if(null===o)throw ke();Ue(o.userId===this.userId),r.push(Ru(this.serializer,o))}))}),q.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return aH(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return mf(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=ta(s[1]);i.push(l)}else a.done()}).next(()=>{Ue(0===i.length)})})}containsKey(e,t){return lH(e,this.userId,t)}Nn(e){return cH(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lH(n,e,t){const r=tw(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return mf(n).J({range:s,H:!0},(a,l,c)=>{const[d,p,_]=a;d===e&&p===i&&(o=!0),c.done()}).next(()=>o)}function Kl(n){return Lr(n,"mutations")}function mf(n){return Lr(n,"documentMutations")}function cH(n){return Lr(n,"mutationQueues")}class Nu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Nu(0)}static kn(){return new Nu(-1)}}class $oe{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new Nu(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>We.fromTimestamp(new Yn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>_f(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Ue(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return _f(e).J((o,a)=>{const l=Qm(a);l.sequenceNumber<=t&&null===r.get(l.targetId)&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>q.waitFor(s)).next(()=>i)}forEachTarget(e,t){return _f(e).J((r,i)=>{const s=Qm(i);t(s)})}qn(e){return uH(e).get("targetGlobalKey").next(t=>(Ue(null!==t),t))}Qn(e,t){return uH(e).put("targetGlobalKey",t)}Kn(e,t){return _f(e).put(q$(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=bu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return _f(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Qm(a);Lm(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Ql(e);return t.forEach(o=>{const a=Ci(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),q.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ql(e);return q.forEach(t,s=>{const o=Ci(s.path);return q.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Ql(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ql(e);let s=gt();return i.J({range:r,H:!0},(o,a,l)=>{const c=ta(o[1]),d=new Pe(c);s=s.add(d)}).next(()=>s)}containsKey(e,t){const r=Ci(t.path),i=IDBKeyRange.bound([r],[pj(r)],!1,!0);let s=0;return Ql(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return _f(e).get(t).next(r=>r?Qm(r):null)}}function _f(n){return Lr(n,"targets")}function uH(n){return Lr(n,"targetGlobal")}function Ql(n){return Lr(n,"targetDocuments")}function dH([n,e],[t,r]){const i=ot(n,t);return 0===i?ot(e,r):i}class Hoe{constructor(e){this.Un=e,this.buffer=new fn(dH),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();dH(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hH{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;me("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,J.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ul(r)?me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Vl(r)}yield t.Hn(3e5)}))}}class zoe{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return q.resolve(Rs.oe);const r=new Hoe(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(oH)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oH):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(c=Date.now(),Yh()<=Xs.$b.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-d}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${p} documents in `+(c-l)+`ms\nTotal Duration: ${c-d}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}class Woe{constructor(e,t){this.db=e,this.garbageCollector=function fH(n,e){return new zoe(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Tw(e,r)}removeReference(e,t,r){return Tw(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Tw(e,t)}nr(e,t){return function(i,s){let o=!1;return cH(i).Y(a=>lH(i,a,s).next(l=>(l&&(o=!0),q.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const l=this.nr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,We.min()),Ql(e).delete([0,Ci(o.path)])))});i.push(l)}}).next(()=>q.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Tw(e,t)}tr(e,t){const r=Ql(e);let i,s=Rs.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==Rs.oe&&t(new Pe(ta(i)),s),s=c,i=l):s=Rs.oe}).next(()=>{s!==Rs.oe&&t(new Pe(ta(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Tw(n,e){return Ql(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ci(e.path),sequenceNumber:i}));var i}class pH{constructor(){this.changes=new Ja(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Goe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ou(e).put(r)}removeEntry(e,t,r){return Ou(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],yw(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Hn.newInvalidDocument(t);return Ou(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zm(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Hn.newInvalidDocument(t)};return Ou(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zm(t))},(i,s)=>{r={document:this.ir(t,s),size:ww(s)}}).next(()=>r)}getEntries(e,t){let r=ds();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=ds(),i=new xn(Pe.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,ww(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return q.resolve();let i=new fn(yH);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Zm(i.first()),Zm(i.last())),o=i.getIterator();let a=o.getNext();return Ou(e).J({index:"documentKeyIndex",range:s},(l,c,d)=>{const p=Pe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&yH(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.$(Zm(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),yw(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ou(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let d=ds();for(const p of c){const _=this.ir(Pe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);_.isFoundDocument()&&(Um(t,_)||i.has(_.key))&&(d=d.insert(_.key,_))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=ds();const o=_H(t,r),a=_H(t,xs.max());return Ou(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const p=this.ir(Pe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(p.key,p),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new qoe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return mH(e).get("remoteDocumentGlobalKey").next(t=>(Ue(!!t),t))}rr(e,t){return mH(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function Moe(n,e){let t;if(e.document)t=V$(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Pe.fromSegments(e.noDocument.path),i=xu(e.noDocument.readTime);t=Hn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ke();{const r=Pe.fromSegments(e.unknownDocument.path),i=xu(e.unknownDocument.version);t=Hn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Yn(i[0],i[1]);return We.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(We.min()))return r}return Hn.newInvalidDocument(e)}}function gH(n){return new Goe(n)}class qoe extends pH{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Ja(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new fn((s,o)=>ot(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=G$(this.cr.serializer,o);i=i.add(s.path.popLast());const c=ww(l);r+=c-a.size,t.push(this.cr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=G$(this.cr.serializer,o.convertToNoDocument(We.min()));t.push(this.cr.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function mH(n){return Lr(n,"remoteDocumentGlobal")}function Ou(n){return Lr(n,"remoteDocumentsV14")}function Zm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function _H(n,e){const t=e.documentKey.path.toArray();return[n,yw(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function yH(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ot(t[s],r[s]),i)return i;return i=ot(t.length,r.length),i||(i=ot(t[t.length-2],r[r.length-2]),i||ot(t[t.length-1],r[r.length-1]))}class Koe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class vH{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Hm(r.mutation,i,us.empty(),Yn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=gt()){const i=ra();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Bm();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=ra();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,gt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=ds();const o=jm(),a=jm();return t.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(void 0===d||d.mutation instanceof Xa)?s=s.insert(c.key,c):void 0!==d?(o.set(c.key,d.mutation.getFieldMask()),Hm(d.mutation,c,d.mutation.getFieldMask(),Yn.now())):o.set(c.key,us.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),t.forEach((c,d)=>{var p;return a.set(c,new Koe(d,null!==(p=o.get(c))&&void 0!==p?p:null))}),a))}recalculateAndSaveOverlays(e,t){const r=jm();let i=new xn((o,a)=>o-a),s=gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let d=r.get(l)||us.empty();d=a.applyToLocalView(c,d),r.set(l,d);const p=(i.get(a.batchId)||gt()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,p=l$();d.forEach(_=>{if(!s.has(_)){const v=m$(t.get(_),r.get(_));null!==v&&p.set(_,v),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Pe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):xD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):q.resolve(ra());let a=-1,l=s;return o.next(c=>q.forEach(c,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(d)?q.resolve():this.remoteDocumentCache.getEntry(e,d).next(_=>{l=l.insert(d,_)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,gt())).next(d=>({batchId:a,changes:a$(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next(r=>{let i=Bm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Bm();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,l=>{const c=(p=t,_=l.child(s),new Ya(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt));var p,_;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((p,_)=>{o=o.insert(p,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();null===o.get(d)&&(o=o.insert(d,Hn.newInvalidDocument(d)))});let a=Bm();return o.forEach((l,c)=>{const d=s.get(l);void 0!==d&&Hm(d.mutation,c,us.empty(),Yn.now()),Um(t,c)&&(a=a.insert(l,c))}),a})}}class Qoe{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return q.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Cr(i.createTime)}),q.resolve();var i}getNamedQuery(e,t){return q.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:HD(i.bundledQuery),readTime:Cr(i.readTime)}),q.resolve();var i}}class Yoe{constructor(){this.overlays=new xn(Pe.comparator),this.Ir=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ra();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const i=ra(),s=t.length+1,o=new Pe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new xn((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let d=s.get(c.largestBatchId);null===d&&(d=ra(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ra(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return q.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new FD(t,r));let s=this.Ir.get(t);void 0===s&&(s=gt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class Joe{constructor(){this.sessionToken=pr.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}class YD{constructor(){this.Tr=new fn(Yr.Er),this.dr=new fn(Yr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Yr(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Yr(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Pe(new Ut([])),r=new Yr(t,e),i=new Yr(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Pe(new Ut([])),r=new Yr(t,e),i=new Yr(t,e+1);let s=gt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Yr(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Yr{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Pe.comparator(e.key,t.key)||ot(e.wr,t.wr)}static Ar(e,t){return ot(e.wr,t.wr)||Pe.comparator(e.key,t.key)}}class Xoe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new fn(Yr.Er)}checkEmpty(e){return q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new OD(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Yr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,t){return q.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Yr(t,0),i=new Yr(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fn(ot);return t.forEach(i=>{const s=new Yr(i,0),o=new Yr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Pe.isDocumentKey(s)||(s=s.child(""));const o=new Yr(new Pe(s),0);let a=new fn(ot);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),q.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ue(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return q.forEach(t.mutations,i=>{const s=new Yr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Yr(t,0),i=this.br.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return q.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Zoe{constructor(e){this.Mr=e,this.docs=new xn(Pe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=ds();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Hn.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ds();const o=t.path,a=new Pe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||yD(mj(d),r)<=0||(i.has(d.key)||Um(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ke()}Or(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new eae(this)}getSize(e){return q.resolve(this.size)}}class eae extends pH{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class tae{constructor(e){this.persistence=e,this.Nr=new Ja(t=>bu(t),Lm),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.Lr=0,this.Br=new YD,this.targetCount=0,this.kr=Nu.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),q.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Nu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Kn(t),q.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.Br.containsKey(t))}}class JD{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Rs(0),this.Kr=!1,this.Kr=!0,this.$r=new Joe,this.referenceDelegate=e(this),this.Ur=new tae(this),this.indexManager=new Boe,this.remoteDocumentCache=new Zoe(r=>this.referenceDelegate.Wr(r)),this.serializer=new W$(t),this.Gr=new Qoe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Yoe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Xoe(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){me("MemoryPersistence","Starting transaction:",e);const i=new nae(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class nae extends yj{constructor(e){super(),this.currentSequenceNumber=e}}class bw{constructor(e){this.persistence=e,this.Jr=new YD,this.Yr=null}static Zr(e){return new bw(e)}get Xr(){if(this.Yr)return this.Yr;throw ke()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),q.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,r=>{const i=Pe.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,We.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return q.or([()=>q.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class rae{constructor(e){this.serializer=e}O(e,t,r,i){const s=new ew("createOrUpgrade",t);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Cj,{unique:!0}),l.createObjectStore("documentMutations"),EH(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=q.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),EH(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:We.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Cj,{unique:!0});const p=c.store("mutations"),_=d.map(v=>p.put(v));return q.waitFor(_)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:Bse});c.createIndex("collectionPathOverlayIndex",jse,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",$se,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:xse});c.createIndex("documentKeyIndex",Rse),c.createIndex("collectionGroupIndex",Pse)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Fse}).createIndex("sequenceNumberIndex",Lse,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Vse}).createIndex("documentKeyIndex",Use,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(l){l.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=ww(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>q.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>q.forEach(a,l=>{Ue(l.userId===s.userId);const c=Ru(this.serializer,l);return aH(e,s.userId,c).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Ut(o),c=[0,Ci(l)];s.push(t.get(c).next(d=>d?q.resolve():t.put({targetId:0,path:Ci(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>q.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:kse});const r=t.store("collectionParents"),i=new QD,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Ci(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Ut(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const d=ta(a);return s(d.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=Qm(i),o=q$(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(p=o,p.document?new Pe(Ut.fromString(p.document.name).popFirst(5)):p.noDocument?Pe.fromSegments(p.noDocument.path):p.unknownDocument?Pe.fromSegments(p.unknownDocument.path):ke()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var p;i.push(a.put(c))}).next(()=>q.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=gH(this.serializer),s=new JD(bw.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=null!==(c=a.get(l.userId))&&void 0!==c?c:gt();Ru(this.serializer,l).keys().forEach(p=>d=d.add(p)),a.set(l.userId,d)}),q.forEach(a,(l,c)=>{const d=new Kr(c),p=vw.lt(this.serializer,d),_=s.getIndexManager(d),v=Cw.lt(d,this.serializer,_,s.referenceDelegate);return new vH(i,v,p,_).recalculateAndSaveOverlaysForDocumentKeys(new wD(t,Rs.oe),l).next()})})}}function EH(n){n.createObjectStore("targetDocuments",{keyPath:Nse}).createIndex("documentTargetsIndex",Ose,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Mse,{unique:!0}),n.createObjectStore("targetGlobal")}const XD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ZD{constructor(e,t,r,i,s,o,a,l,c,d,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=c,this.li=d,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=_=>Promise.resolve(),!ZD.D())throw new fe(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Woe(this,i),this.Ai=t+"main",this.serializer=new W$(l),this.Ri=new ea(this.Ai,this.hi,new rae(this.serializer)),this.$r=new Ooe,this.Ur=new $oe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gH(this.serializer),this.Gr=new Noe,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===d&&wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new fe(ne.FAILED_PRECONDITION,XD);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Rs(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,J.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,J.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,J.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sw(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Ul(e))return me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return e_(e).get("owner").next(t=>q.resolve(this.vi(t)))}Ci(e){return Sw(e).delete(this.clientId)}Fi(){var e=this;return(0,J.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Lr(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return q.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?q.resolve(!0):e_(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new fe(ne.FAILED_PRECONDITION,XD);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sw(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&me("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,J.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new wD(t,Rs.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Sw(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Cw.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new joe(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return vw.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){me("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(l=this.hi)?Wse:16===l?zse:15===l?ID:14===l?Sj:13===l?Aj:12===l?Hse:11===l?bj:void ke();var l;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new wD(a,this.Qr?this.Qr.next():Rs.oe),"readwrite-primary"===t?this.wi(o).next(l=>!!l||this.Si(o)).next(l=>{if(!l)throw wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new fe(ne.FAILED_PRECONDITION,_j);return r(o)}).next(l=>this.Di(o).next(()=>l)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return e_(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new fe(ne.FAILED_PRECONDITION,XD)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return e_(e).put("owner",t)}static D(){return ea.D()}bi(e){const t=e_(e);return t.get("owner").next(r=>this.vi(r)?(me("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):q.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(wr(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,B.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return me("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return wr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){wr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function e_(n){return Lr(n,"owner")}function Sw(n){return Lr(n,"clientMetadata")}function ex(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class tx{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=gt(),i=gt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new tx(e,t.fromCache,r,i)}}class iae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class IH{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,B.nr)()?8:vj((0,B.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new iae;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Yh()<=Xs.$b.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",af(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(Yh()<=Xs.$b.DEBUG&&me("QueryEngine","Query:",af(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Yh()<=Xs.$b.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",af(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(t))):q.resolve())}Yi(e,t){if(e$(t))return q.resolve(null);let r=Ti(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=dw(t,null,"F"),r=Ti(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=gt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(t,a);return this.ns(t,c,o,l.readTime)?this.Yi(e,dw(t,null,"F")):this.rs(e,c,t,l)}))})))}Zi(e,t,r,i){return e$(t)||i.isEqual(We.min())?q.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?q.resolve(null):(Yh()<=Xs.$b.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),af(t)),this.rs(e,o,t,gj(i,-1)).next(a=>a))})}ts(e,t){let r=new fn(s$(e));return t.forEach((i,s)=>{Um(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Yh()<=Xs.$b.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",af(t)),this.Ji.getDocumentsMatchingQuery(e,t,xs.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class sae{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new xn(ot),this._s=new Ja(s=>bu(s),Lm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vH(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function wH(n,e,t,r){return new sae(n,e,t,r)}function CH(n,e){return nx.apply(this,arguments)}function nx(){return(nx=(0,J.A)(function*(n,e){const t=De(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=gt();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function TH(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function bH(n,e,t){let r=gt(),i=gt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=ds();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(We.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):me("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function lae(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yf(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Za(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function vf(n,e,t){return rx.apply(this,arguments)}function rx(){return(rx=(0,J.A)(function*(n,e,t){const r=De(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ul(o))throw o;me("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function Dw(n,e,t){const r=De(n);let i=We.min(),s=gt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const p=De(l),_=p._s.get(d);return void 0!==_?q.resolve(p.os.get(_)):p.Ur.getTargetData(c,d)}(r,o,Ti(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:We.min(),t?s:gt())).next(a=>(DH(r,i$(e),a),{documents:a,Ts:s})))}function AH(n,e){const t=De(n),r=De(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function SH(n,e){const t=De(n),r=t.us.get(e)||We.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,gj(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(DH(t,e,i),i))}function DH(n,e,t){let r=n.us.get(e)||We.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function ix(){return(ix=(0,J.A)(function*(n,e,t,r){const i=De(n);let s=gt(),o=ds();for(const c of t){const d=e.Es(c.metadata.name);c.document&&(s=s.add(d));const p=e.ds(c);p.setReadTime(e.As(c.metadata.readTime)),o=o.insert(d,p)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),l=yield yf(i,(d=r,Ti(rf(Ut.fromString(`__bundle__/docs/${d}`)))));var d;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>bH(c,a,o).next(d=>(a.apply(c),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Ur.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,d.Ps,d.Is)).next(()=>d.Ps)))})).apply(this,arguments)}function uae(n,e){return sx.apply(this,arguments)}function sx(){return(sx=(0,J.A)(function*(n,e,t=gt()){const r=yield yf(n,Ti(HD(e.bundledQuery))),i=De(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Cr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(pr.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function xH(n,e){return`firestore_clients_${n}_${e}`}function RH(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ox(n,e){return`firestore_targets_${n}_${e}`}class xw{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new fe(i.error.code,i.error.message))),o?new xw(e,t,i.state,s):(wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class t_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new fe(r.error.code,r.error.message))),s?new t_(e,r.state,i):(wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=PD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Ij(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Rw(e,s):(wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ax{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ax(t.clientId,t.onlineState):(wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lx{constructor(){this.activeTargetIds=PD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cx{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new xn(ot),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=xH(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new lx),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,J.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(xH(e.persistenceKey,i));if(s){const o=Rw.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(ox(this.persistenceKey,e));if(i){const s=t_.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ox(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return me("SharedClientState","READ",e,t),t}setItem(e,t){me("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(me("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,J.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=Rs.oe;if(null!=o)try{const l=JSON.parse(o);Ue("number"==typeof l),a=l}catch(l){wr("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==Rs.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new xw(this.currentUser,e,t,r),s=RH(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=RH(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=ox(this.persistenceKey,e),s=new t_(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return Rw.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return xw.Rs(new Kr(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return t_.Rs(i,t)}Ls(e){return ax.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,J.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=PD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class PH{constructor(){this.so=new lx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new lx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class dae{_o(e){}shutdown(){}}class MH{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Pw=null;function ux(){return null===Pw?Pw=268435456+Math.round(2147483648*Math.random()):Pw++,"0x"+Pw.toString(16)}const hae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fae{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Ai="WebChannelConnection";class pae extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=ux(),l=this.xo(t,r.toUriEncodedString());me("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(t,l,c,i).then(d=>(me("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Ds("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Qh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${hae[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=ux();return new Promise((o,a)=>{const l=new sj;l.setWithCredentials(!0),l.listenOnce(oj.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ZI.NO_ERROR:const d=l.getResponseJson();me(Ai,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case ZI.TIMEOUT:me(Ai,`RPC '${e}' ${s} timed out`),a(new fe(ne.DEADLINE_EXCEEDED,"Request time out"));break;case ZI.HTTP_ERROR:const p=l.getStatus();if(me(Ai,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let _=l.getResponseJson();Array.isArray(_)&&(_=_[0]);const v=_?.error;if(v&&v.status&&v.message){const b=function(P){const H=P.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(H)>=0?H:ne.UNKNOWN}(v.status);a(new fe(b,v.message))}else a(new fe(ne.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new fe(ne.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{me(Ai,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);me(Ai,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Bo(e,t,r){const i=ux(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=cj(),a=lj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const d=s.join("");me(Ai,`Creating RPC '${e}' stream ${i}: ${d}`,l);const p=o.createWebChannel(d,l);let _=!1,v=!1;const b=new fae({Io:P=>{v?me(Ai,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(_||(me(Ai,`Opening RPC '${e}' stream ${i} transport.`),p.open(),_=!0),me(Ai,`RPC '${e}' stream ${i} sending:`,P),p.send(P))},To:()=>p.close()}),D=(P,H,V)=>{P.listen(H,Y=>{try{V(Y)}catch(ue){setTimeout(()=>{throw ue},0)}})};return D(p,Sm.EventType.OPEN,()=>{v||(me(Ai,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),D(p,Sm.EventType.CLOSE,()=>{v||(v=!0,me(Ai,`RPC '${e}' stream ${i} transport closed`),b.So())}),D(p,Sm.EventType.ERROR,P=>{v||(v=!0,Ds(Ai,`RPC '${e}' stream ${i} transport errored:`,P),b.So(new fe(ne.UNAVAILABLE,"The operation could not be completed")))}),D(p,Sm.EventType.MESSAGE,P=>{var H;if(!v){const V=P.data[0];Ue(!!V);const ue=V.error||(null===(H=V[0])||void 0===H?void 0:H.error);if(ue){me(Ai,`RPC '${e}' stream ${i} received error:`,ue);const be=ue.status;let $e=function(F){const j=Dr[F];if(void 0!==j)return C$(j)}(be),U=ue.message;void 0===$e&&($e=ne.INTERNAL,U="Unknown error status: "+be+" with message "+ue.message),v=!0,b.So(new fe($e,U)),p.close()}else me(Ai,`RPC '${e}' stream ${i} received:`,V),b.bo(V)}}),D(a,aj.STAT_EVENT,P=>{P.stat===gD.PROXY?me(Ai,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===gD.NOPROXY&&me(Ai,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function NH(){return typeof window<"u"?window:null}function Mw(){return typeof document<"u"?document:null}function n_(n){return new woe(n,!0)}class dx{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class OH{constructor(e,t,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new dx(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,J.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,J.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,J.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(wr(t.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===ne.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new fe(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,J.A)(function*(){e.state=0,e.start()}))}I_(e){return me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gae extends OH{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function boe(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:ke(),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Ue(void 0===d||"string"==typeof d),pr.fromBase64String(d||"")):(Ue(void 0===d||d instanceof Buffer||d instanceof Uint8Array),pr.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=void 0===c.code?ne.UNKNOWN:C$(c.code);return new fe(d,c.message||"")}(o);t=new D$(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ia(n,r.document.name),s=Cr(r.document.updateTime),o=r.document.createTime?Cr(r.document.createTime):We.min(),a=new ci({mapValue:{fields:r.document.fields}}),l=Hn.newFoundDocument(i,s,o,a);t=new mw(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=ia(n,r.document),s=r.readTime?Cr(r.readTime):We.min(),o=Hn.newNoDocument(i,s);t=new mw([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ia(n,r.document);t=new mw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ke();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new moe(i,s);t=new S$(r.targetId,o)}}var c;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return We.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?We.min():o.readTime?Cr(o.readTime):We.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=jD(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=cw(l)?{documents:U$(s,l)}:{query:_w(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=M$(s,o.resumeToken);const c=VD(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(We.min())>0){a.readTime=hf(s,o.snapshotVersion.toTimestamp());const c=VD(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function Soe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=jD(this.serializer),t.removeTarget=e,this.a_(t)}}class mae extends OH{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function Aoe(n,e){return n&&n.length>0?(Ue(void 0!==e),n.map(t=>function(i,s){let o=Cr(i.updateTime?i.updateTime:s);return o.isEqual(We.min())&&(o=Cr(s)),new foe(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Cr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=jD(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Km(this.serializer,r))};this.a_(t)}}class _ae extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,BD(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(ne.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,BD(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(ne.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class yae{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(wr(t),this.D_=!1):me("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class vae{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,J.A)(function*(){var l;Yl(o)&&(me("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,J.A)(function*(d){const p=De(d);p.L_.add(4),yield Ef(p),p.q_.set("Unknown"),p.L_.delete(4),yield r_(p)}),function c(d){return l.apply(this,arguments)})(o))}))}),this.q_=new yae(r,i)}}function r_(n){return hx.apply(this,arguments)}function hx(){return(hx=(0,J.A)(function*(n){if(Yl(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function Ef(n){return fx.apply(this,arguments)}function fx(){return(fx=(0,J.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function Nw(n,e){const t=De(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),mx(t)?gx(t):Cf(t).r_()&&px(t,e))}function If(n,e){const t=De(n),r=Cf(t);t.N_.delete(e),r.r_()&&kH(t,e),0===t.N_.size&&(r.r_()?r.o_():Yl(t)&&t.q_.set("Unknown"))}function px(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cf(n).A_(e)}function kH(n,e){n.Q_.xe(e),Cf(n).R_(e)}function gx(n){n.Q_=new yoe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Cf(n).start(),n.q_.v_()}function mx(n){return Yl(n)&&!Cf(n).n_()&&n.N_.size>0}function Yl(n){return 0===De(n).L_.size}function FH(n){n.Q_=void 0}function Eae(n){return _x.apply(this,arguments)}function _x(){return(_x=(0,J.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function Iae(n){return yx.apply(this,arguments)}function yx(){return(yx=(0,J.A)(function*(n){n.N_.forEach((e,t)=>{px(n,e)})})).apply(this,arguments)}function wae(n,e){return vx.apply(this,arguments)}function vx(){return(vx=(0,J.A)(function*(n,e){FH(n),mx(n)?(n.q_.M_(e),gx(n)):n.q_.set("Unknown")})).apply(this,arguments)}function Cae(n,e,t){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,J.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof D$&&2===e.state&&e.cause)try{yield(r=(0,J.A)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.N_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ow(n,r)}else if(e instanceof mw?n.Q_.Ke(e):e instanceof S$?n.Q_.He(e):n.Q_.We(e),!t.isEqual(We.min()))try{const r=yield TH(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(pr.EMPTY_BYTE_STRING,d.snapshotVersion)),kH(s,l);const p=new Za(d.target,l,c,d.sequenceNumber);px(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){me("RemoteStore","Failed to raise snapshot:",r),yield Ow(n,r)}var r}),Ex.apply(this,arguments)}function Ow(n,e,t){return Ix.apply(this,arguments)}function Ix(){return(Ix=(0,J.A)(function*(n,e,t){if(!Ul(e))throw e;n.L_.add(1),yield Ef(n),n.q_.set("Offline"),t||(t=()=>TH(n.localStore)),n.asyncQueue.enqueueRetryable((0,J.A)(function*(){me("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield r_(n)}))})).apply(this,arguments)}function LH(n,e){return e().catch(t=>Ow(n,t,e))}function wf(n){return wx.apply(this,arguments)}function wx(){return(wx=(0,J.A)(function*(n){const e=De(n),t=Jl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Tae(e);)try{const i=yield lae(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,bae(e,i)}catch(i){yield Ow(e,i)}VH(e)&&UH(e)})).apply(this,arguments)}function Tae(n){return Yl(n)&&n.O_.length<10}function bae(n,e){n.O_.push(e);const t=Jl(n);t.r_()&&t.V_&&t.m_(e.mutations)}function VH(n){return Yl(n)&&!Jl(n).n_()&&n.O_.length>0}function UH(n){Jl(n).start()}function Aae(n){return Cx.apply(this,arguments)}function Cx(){return(Cx=(0,J.A)(function*(n){Jl(n).p_()})).apply(this,arguments)}function Sae(n){return Tx.apply(this,arguments)}function Tx(){return(Tx=(0,J.A)(function*(n){const e=Jl(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function Dae(n,e,t){return bx.apply(this,arguments)}function bx(){return(bx=(0,J.A)(function*(n,e,t){const r=n.O_.shift(),i=kD.from(r,e,t);yield LH(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield wf(n)})).apply(this,arguments)}function xae(n,e){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,J.A)(function*(n,e){var t;e&&Jl(n).V_&&(yield(t=(0,J.A)(function*(i,s){if(w$(a=s.code)&&a!==ne.ABORTED){const o=i.O_.shift();Jl(i).s_(),yield LH(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield wf(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),VH(n)&&UH(n)}),Ax.apply(this,arguments)}function BH(n,e){return Sx.apply(this,arguments)}function Sx(){return(Sx=(0,J.A)(function*(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials");const r=Yl(t);t.L_.add(3),yield Ef(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield r_(t)})).apply(this,arguments)}function Dx(n,e){return xx.apply(this,arguments)}function xx(){return(xx=(0,J.A)(function*(n,e){const t=De(n);e?(t.L_.delete(2),yield r_(t)):e||(t.L_.add(2),yield Ef(t),t.q_.set("Unknown"))})).apply(this,arguments)}function Cf(n){return n.K_||(n.K_=function(t,r,i){const s=De(t);return s.w_(),new gae(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Eae.bind(null,n),Ro:Iae.bind(null,n),mo:wae.bind(null,n),d_:Cae.bind(null,n)}),n.B_.push(function(){var e=(0,J.A)(function*(t){t?(n.K_.s_(),mx(n)?gx(n):n.q_.set("Unknown")):(yield n.K_.stop(),FH(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function Jl(n){return n.U_||(n.U_=function(t,r,i){const s=De(t);return s.w_(),new mae(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Aae.bind(null,n),mo:xae.bind(null,n),f_:Sae.bind(null,n),g_:Dae.bind(null,n)}),n.B_.push(function(){var e=(0,J.A)(function*(t){t?(n.U_.s_(),yield wf(n)):(yield n.U_.stop(),n.O_.length>0&&(me("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class Rx{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Rx(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fe(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tf(n,e){if(wr("AsyncQueue",`${e}: ${n}`),Ul(n))return new fe(ne.UNAVAILABLE,`${e}: ${n}`);throw n}class bf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pe.comparator(t.key,r.key):(t,r)=>Pe.comparator(t.key,r.key),this.keyedMap=Bm(),this.sortedSet=new xn(this.comparator)}static emptySet(e){return new bf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new bf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class jH{constructor(){this.W_=new xn(Pe.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ke():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Af{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Af(e,t,bf.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Rae{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Pae{constructor(){this.queries=$H(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=De(t),s=i.queries;i.queries=$H(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})}(this,new fe(ne.ABORTED,"Firestore shutting down"))}}function $H(){return new Ja(n=>r$(n),Vm)}function Px(n,e){return Mx.apply(this,arguments)}function Mx(){return(Mx=(0,J.A)(function*(n,e){const t=De(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Rae,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=Tf(o,`Initialization of query '${af(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&kx(t)})).apply(this,arguments)}function Nx(n,e){return Ox.apply(this,arguments)}function Ox(){return(Ox=(0,J.A)(function*(n,e){const t=De(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Mae(n,e){const t=De(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&kx(t)}function Nae(n,e,t){const r=De(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function kx(n){n.Y_.forEach(e=>{e.next()})}var Fx,HH;(HH=Fx||(Fx={})).ea="default",HH.Cache="cache";class Lx{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Af(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=Af.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Fx.Cache}}class Oae{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class zH{constructor(e){this.serializer=e}Es(e){return ia(this.serializer,e)}ds(e){return e.metadata.exists?V$(this.serializer,e.document,!1):Hn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Cr(e)}}class kae{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=WH(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=Ut.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new zH(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||gt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,J.A)(function*(){const t=yield function cae(n,e,t,r){return ix.apply(this,arguments)}(e.localStore,new zH(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield uae(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function WH(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class GH{constructor(e){this.key=e}}class qH{constructor(e){this.key=e}}class KH{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=gt(),this.mutatedKeys=gt(),this.Aa=s$(e),this.Ra=new bf(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new jH,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const _=i.get(d),v=Um(this.query,p)?p:null,b=!!_&&this.mutatedKeys.has(_.key),D=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let P=!1;_&&v?_.data.isEqual(v.data)?b!==D&&(r.track({type:3,doc:v}),P=!0):this.ga(_,v)||(r.track({type:2,doc:v}),P=!0,(l&&this.Aa(v,l)>0||c&&this.Aa(v,c)<0)&&(a=!0)):!_&&v?(r.track({type:0,doc:v}),P=!0):_&&!v&&(r.track({type:1,doc:_}),P=!0,(l||c)&&(a=!0)),P&&(v?(o=o.add(v),s=D?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const d="F"===this.query.limitType?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,p)=>function(v,b){const D=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}};return D(v)-D(b)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],l=0===this.da.size&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,0!==o.length||c?{snapshot:new Af(this.query,e.Ra,s,o,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new jH,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=gt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new qH(r))}),this.da.forEach(r=>{e.has(r)||t.push(new GH(r))}),t}ba(e){this.Ta=e.Ts,this.da=gt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Af.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Fae{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Lae{constructor(e){this.key=e,this.va=!1}}class Vae{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ja(a=>r$(a),Vm),this.Ma=new Map,this.xa=new Set,this.Oa=new xn(Pe.comparator),this.Na=new Map,this.La=new YD,this.Ba={},this.ka=new Map,this.qa=Nu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function Uae(n,e){return Vx.apply(this,arguments)}function Vx(){return(Vx=(0,J.A)(function*(n,e,t=!0){const r=kw(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield QH(r,e,t,!0),i})).apply(this,arguments)}function Bae(n,e){return Ux.apply(this,arguments)}function Ux(){return(Ux=(0,J.A)(function*(n,e){const t=kw(n);yield QH(t,e,!0,!1)})).apply(this,arguments)}function QH(n,e,t,r){return Bx.apply(this,arguments)}function Bx(){return(Bx=(0,J.A)(function*(n,e,t,r){const i=yield yf(n.localStore,Ti(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield jx(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&Nw(n.remoteStore,i),a})).apply(this,arguments)}function jx(n,e,t,r,i){return $x.apply(this,arguments)}function $x(){return $x=(0,J.A)(function*(n,e,t,r,i){n.Ka=(p,_,v)=>{return(b=(0,J.A)(function*(P,H,V,Y){let ue=H.view.ma(V);ue.ns&&(ue=yield Dw(P.localStore,H.query,!1).then(({documents:N})=>H.view.ma(N,ue)));const be=Y&&Y.targetChanges.get(H.targetId),$e=Y&&null!=Y.targetMismatches.get(H.targetId),U=H.view.applyChanges(ue,P.isPrimaryClient,be,$e);return Zx(P,H.targetId,U.wa),U.snapshot}),function D(P,H,V,Y){return b.apply(this,arguments)})(n,p,_,v);var b};const s=yield Dw(n.localStore,e,!0),o=new KH(e,s.Ts),a=o.ma(s.documents),l=Gm.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=o.applyChanges(a,n.isPrimaryClient,l);Zx(n,t,c.wa);const d=new Fae(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),c.snapshot}),$x.apply(this,arguments)}function jae(n,e,t){return Hx.apply(this,arguments)}function Hx(){return(Hx=(0,J.A)(function*(n,e,t){const r=De(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Vm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield vf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&If(r.remoteStore,i.targetId),Sf(r,i.targetId)}).catch(Vl))):(Sf(r,i.targetId),yield vf(r.localStore,i.targetId,!0))})).apply(this,arguments)}function $ae(n,e){return zx.apply(this,arguments)}function zx(){return(zx=(0,J.A)(function*(n,e){const t=De(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),If(t.remoteStore,r.targetId))})).apply(this,arguments)}function Wx(){return(Wx=(0,J.A)(function*(n,e,t){const r=uR(n);try{const i=yield function(o,a){const l=De(o),c=Yn.now(),d=a.reduce((v,b)=>v.add(b.key),gt());let p,_;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=ds(),D=gt();return l.cs.getEntries(v,d).next(P=>{b=P,b.forEach((H,V)=>{V.isValidDocument()||(D=D.add(H))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,b)).next(P=>{p=P;const H=[];for(const V of a){const Y=goe(V,p.get(V.key).overlayedDocument);null!=Y&&H.push(new Xa(V.key,Y,jj(Y.value.mapValue),Xn.exists(!0)))}return l.mutationQueue.addMutationBatch(v,c,H,a)}).next(P=>{_=P;const H=P.applyToLocalDocumentSet(p,D);return l.documentOverlayCache.saveOverlays(v,P.batchId,H)})}).then(()=>({batchId:_.batchId,changes:a$(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new xn(ot)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,t),yield el(r,i.changes),yield wf(r.remoteStore)}catch(i){const s=Tf(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function YH(n,e){return Gx.apply(this,arguments)}function Gx(){return(Gx=(0,J.A)(function*(n,e){const t=De(n);try{const r=yield function aae(n,e){const t=De(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((d,p)=>{const _=i.get(p);if(!_)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,p)));let v=_.withSequenceNumber(s.currentSequenceNumber);var D,P,H;null!==e.targetMismatches.get(p)?v=v.withResumeToken(pr.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(p,v),P=v,H=d,(0===(D=_).resumeToken.approximateByteSize()||P.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8||H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,v))});let l=ds(),c=gt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(bH(s,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(We.min())){const d=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(Ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ue(o.va):i.removedDocuments.size>0&&(Ue(o.va),o.va=!1))}),yield el(t,r,e)}catch(r){yield Vl(r)}})).apply(this,arguments)}function JH(n,e,t){const r=De(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=De(o);l.onlineState=a;let c=!1;l.queries.forEach((d,p)=>{for(const _ of p.j_)_.Z_(a)&&(c=!0)}),c&&kx(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zae(n,e,t){return qx.apply(this,arguments)}function qx(){return(qx=(0,J.A)(function*(n,e,t){const r=De(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new xn(Pe.comparator);o=o.insert(s,Hn.newNoDocument(s,We.min()));const a=gt().add(s),l=new Wm(We.min(),new Map,new xn(ot),o,a);yield YH(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),eR(r)}else yield vf(r.localStore,e,!1).then(()=>Sf(r,e,t)).catch(Vl)})).apply(this,arguments)}function Wae(n,e){return Kx.apply(this,arguments)}function Kx(){return(Kx=(0,J.A)(function*(n,e){const t=De(n),r=e.batch.batchId;try{const i=yield function oae(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const p=c.batch,_=p.keys();let v=q.resolve();return _.forEach(b=>{v=v.next(()=>d.getEntry(l,b)).next(D=>{const P=c.docVersions.get(b);Ue(null!==P),D.version.compareTo(P)<0&&(p.applyToRemoteDocument(D,c),D.isValidDocument()&&(D.setReadTime(c.commitVersion),d.addEntry(D)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=gt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);Xx(t,r,null),Jx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield el(t,i)}catch(i){yield Vl(i)}})).apply(this,arguments)}function Gae(n,e,t){return Qx.apply(this,arguments)}function Qx(){return(Qx=(0,J.A)(function*(n,e,t){const r=De(n);try{const i=yield function(o,a){const l=De(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(Ue(null!==p),d=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);Xx(r,e,t),Jx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield el(r,i)}catch(i){yield Vl(i)}})).apply(this,arguments)}function Yx(){return(Yx=(0,J.A)(function*(n,e){const t=De(n);Yl(t.remoteStore)||me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=De(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=Tf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function Jx(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Xx(n,e,t){const r=De(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Sf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||XH(n,r)})}function XH(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(If(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),eR(n))}function Zx(n,e,t){for(const r of t)r instanceof GH?(n.La.addReference(r.key,e),Kae(n,r)):r instanceof qH?(me("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||XH(n,r.key)):ke()}function Kae(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(me("SyncEngine","New document in limbo: "+t),n.xa.add(r),eR(n))}function eR(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Pe(Ut.fromString(e)),r=n.qa.next();n.Na.set(r,new Lae(t)),n.Oa=n.Oa.insert(t,r),Nw(n.remoteStore,new Za(Ti(rf(t.path)),r,"TargetPurposeLimboResolution",Rs.oe))}}function el(n,e,t){return tR.apply(this,arguments)}function tR(){return tR=(0,J.A)(function*(n,e,t){const r=De(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,t).then(c=>{var d;if((c||t)&&r.isPrimaryClient){const p=c?!c.fromCache:null===(d=t?.targetChanges.get(l.targetId))||void 0===d?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){i.push(c);const p=tx.Wi(l.targetId,c);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,J.A)(function*(c,d){const p=De(c);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>q.forEach(d,v=>q.forEach(v.$i,b=>p.persistence.referenceDelegate.addReference(_,v.targetId,b)).next(()=>q.forEach(v.Ui,b=>p.persistence.referenceDelegate.removeReference(_,v.targetId,b)))))}catch(_){if(!Ul(_))throw _;me("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of d){const v=_.targetId;if(!_.fromCache){const b=p.os.get(v),P=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);p.os=p.os.insert(v,P)}}}),function l(c,d){return a.apply(this,arguments)})(r.localStore,s))}),tR.apply(this,arguments)}function Qae(n,e){return nR.apply(this,arguments)}function nR(){return(nR=(0,J.A)(function*(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){me("SyncEngine","User change. New user:",e.toKey());const r=yield CH(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(l=>{l.reject(new fe(ne.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield el(t,r.hs)}var s})).apply(this,arguments)}function Yae(n,e){const t=De(n),r=t.Na.get(e);if(r&&r.va)return gt().add(r.key);{let i=gt();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function Jae(n,e){return rR.apply(this,arguments)}function rR(){return(rR=(0,J.A)(function*(n,e){const t=De(n),r=yield Dw(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Zx(t,e.targetId,i.wa),i})).apply(this,arguments)}function Xae(n,e){return iR.apply(this,arguments)}function iR(){return(iR=(0,J.A)(function*(n,e){const t=De(n);return SH(t.localStore,e).then(r=>el(t,r))})).apply(this,arguments)}function Zae(n,e,t,r){return sR.apply(this,arguments)}function sR(){return(sR=(0,J.A)(function*(n,e,t,r){const i=De(n),s=yield function(a,l){const c=De(a),d=De(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",p=>d.Mn(p,l).next(_=>_?c.localDocuments.getDocuments(p,_):q.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield wf(i.remoteStore):"acknowledged"===t||"rejected"===t?(Xx(i,e,r||null),Jx(i,e),l=e,De(De(i.localStore).mutationQueue).On(l)):ke(),yield el(i,s)):me("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function oR(){return(oR=(0,J.A)(function*(n,e){const t=De(n);if(kw(t),uR(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield ZH(t,r.toArray());t.Qa=!0,yield Dx(t.remoteStore,!0);for(const s of i)Nw(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Sf(t,o),vf(t.localStore,o,!0))),If(t.remoteStore,o)}),yield i,yield ZH(t,r),function(o){const a=De(o);a.Na.forEach((l,c)=>{If(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new xn(Pe.comparator)}(t),t.Qa=!1,yield Dx(t.remoteStore,!1)}})).apply(this,arguments)}function ZH(n,e,t){return aR.apply(this,arguments)}function aR(){return(aR=(0,J.A)(function*(n,e,t){const r=De(n),i=[],s=[];for(const o of e){let a;const l=r.Ma.get(o);if(l&&0!==l.length){a=yield yf(r.localStore,Ti(l[0]));for(const c of l){const d=r.Fa.get(c),p=yield Jae(r,d);p.snapshot&&s.push(p.snapshot)}}else{const c=yield AH(r.localStore,o);a=yield yf(r.localStore,c),yield jx(r,ez(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function ez(n){return Zj(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function tle(n){return t=De(n).localStore,De(De(t).persistence).Qi();var t}function nle(n,e,t,r){return lR.apply(this,arguments)}function lR(){return(lR=(0,J.A)(function*(n,e,t,r){const i=De(n);if(i.Qa)return void me("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield SH(i.localStore,i$(s[0])),a=Wm.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,pr.EMPTY_BYTE_STRING);yield el(i,o,a);break}case"rejected":yield vf(i.localStore,e,!0),Sf(i,e,r);break;default:ke()}})).apply(this,arguments)}function rle(n,e,t){return cR.apply(this,arguments)}function cR(){return(cR=(0,J.A)(function*(n,e,t){const r=kw(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){me("SyncEngine","Adding an already active target "+i);continue}const s=yield AH(r.localStore,i),o=yield yf(r.localStore,s);yield jx(r,ez(s),o.targetId,!1,o.resumeToken),Nw(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield vf(r.localStore,i,!1).then(()=>{If(r.remoteStore,i),Sf(r,i)}).catch(Vl))}})).apply(this,arguments)}function kw(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yae.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zae.bind(null,e),e.Ca.d_=Mae.bind(null,e.eventManager),e.Ca.$a=Nae.bind(null,e.eventManager),e}function uR(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wae.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Gae.bind(null,e),e}let Df=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,J.A)(function*(){r.serializer=n_(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return wH(this.persistence,new IH,t.initialUser,this.serializer)}Ga(t){return new JD(bw.Zr,this.serializer)}Wa(t){return new PH}terminate(){var t=this;return(0,J.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class dR extends Df{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,J.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield uR(r.Ja.syncEngine),yield wf(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return wH(this.persistence,new IH,e.initialUser,this.serializer)}ja(e,t){return new hH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new Ase(t,this.persistence);return new bse(e.asyncQueue,r)}Ga(e){const t=ex(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?bi.withCacheSize(this.cacheSizeBytes):bi.DEFAULT;return new ZD(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,NH(),Mw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new PH}}class tz extends dR{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,J.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof cx&&(r.sharedClientState.syncEngine={no:Zae.bind(null,i),ro:nle.bind(null,i),io:rle.bind(null,i),Qi:tle.bind(null,i),eo:Xae.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,J.A)(function*(o){yield function ele(n,e){return oR.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=NH();if(!cx.D(t))throw new fe(ne.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ex(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let xf=(()=>{class n{initialize(t,r){var i=this;return(0,J.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>JH(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=Qae.bind(null,i.syncEngine),yield Dx(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Pae}createDatastore(t){const r=n_(t.databaseInfo.databaseId),i=new pae(t.databaseInfo);return new _ae(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>JH(this.syncEngine,r,0),l=MH.D()?new MH:new dae,new vae(i,s,o,a,l);var i,s,o,a,l}createSyncEngine(t,r){return function(s,o,a,l,c,d,p){const _=new Vae(s,o,a,l,c,d);return p&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,J.A)(function*(){var r,i,s;yield(s=(0,J.A)(function*(a){const l=De(a);me("RemoteStore","RemoteStore shutting down."),l.L_.add(5),yield Ef(l),l.k_.shutdown(),l.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function nz(n,e=10240){let t=0;return{read:()=>(0,J.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,J.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Fw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class ole{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Qr,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,J.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,J.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,J.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new Oae(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,J.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,J.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,J.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class ale{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,J.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new fe(ne.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,J.A)(function*(o,a){const l=De(o),c={documents:a.map(v=>qm(l.serializer,v))},d=yield l.Lo("BatchGetDocuments",l.serializer.databaseId,Ut.emptyPath(),c,a.length),p=new Map;d.forEach(v=>{const b=function Toe(n,e){return"found"in e?function(r,i){Ue(!!i.found);const s=ia(r,i.found.name),o=Cr(i.found.updateTime),a=i.found.createTime?Cr(i.found.createTime):We.min(),l=new ci({mapValue:{fields:i.found.fields}});return Hn.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){Ue(!!i.missing),Ue(!!i.readTime);const s=ia(r,i.missing),o=Cr(i.readTime);return Hn.newNoDocument(s,o)}(n,e):ke()}(l.serializer,v);p.set(b.key.toString(),b)});const _=[];return a.forEach(v=>{const b=p.get(v.toString());Ue(!!b),_.push(b)}),_}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new df(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,J.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Pe.fromPath(i);e.mutations.push(new ND(s,e.precondition(s)))}),yield(r=(0,J.A)(function*(s,o){const a=De(s),l={writes:o.map(c=>Km(a.serializer,c))};yield a.Mo("Commit",a.serializer.databaseId,Ut.emptyPath(),l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ke();t=We.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new fe(ne.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(We.min())?Xn.exists(!1):Xn.updateTime(t):Xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(We.min()))throw new fe(ne.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xn.updateTime(t)}return Xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class lle{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new dx(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,J.A)(function*(){const t=new ale(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!Rm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!w$(t)}return!1}}class cle{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Kr.UNAUTHENTICATED,this.clientId=fj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,J.A)(function*(l){me("FirestoreClient","Received user=",l.uid),yield o.authCredentialListener(l),o.user=l});return function(l){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(me("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,J.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Tf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function hR(n,e){return fR.apply(this,arguments)}function fR(){return fR=(0,J.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,J.A)(function*(s){r.isEqual(s)||(yield CH(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),fR.apply(this,arguments)}function rz(n,e){return pR.apply(this,arguments)}function pR(){return(pR=(0,J.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield gR(n);me("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>BH(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>BH(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function gR(n){return mR.apply(this,arguments)}function mR(){return(mR=(0,J.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me("FirestoreClient","Using user provided OfflineComponentProvider");try{yield hR(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Ds("Error using user provided cache. Falling back to memory cache: "+e),yield hR(n,new Df)}}else me("FirestoreClient","Using default OfflineComponentProvider"),yield hR(n,new Df);var i;return n._offlineComponents})).apply(this,arguments)}function Lw(n){return _R.apply(this,arguments)}function _R(){return(_R=(0,J.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me("FirestoreClient","Using user provided OnlineComponentProvider"),yield rz(n,n._uninitializedComponentsProvider._online)):(me("FirestoreClient","Using default OnlineComponentProvider"),yield rz(n,new xf))),n._onlineComponents})).apply(this,arguments)}function iz(n){return gR(n).then(e=>e.persistence)}function Rf(n){return gR(n).then(e=>e.localStore)}function sz(n){return Lw(n).then(e=>e.remoteStore)}function yR(n){return Lw(n).then(e=>e.syncEngine)}function Pf(n){return vR.apply(this,arguments)}function vR(){return(vR=(0,J.A)(function*(n){const e=yield Lw(n),t=e.eventManager;return t.onListen=Uae.bind(null,e.syncEngine),t.onUnlisten=jae.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Bae.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$ae.bind(null,e.syncEngine),t})).apply(this,arguments)}function az(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,J.A)(function*(){return function(s,o,a,l,c){const d=new Fw({next:_=>{d.Za(),o.enqueueAndForget(()=>Nx(s,p));const v=_.docs.has(a);!v&&_.fromCache?c.reject(new fe(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&l&&"server"===l.source?c.reject(new fe(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(_)},error:_=>c.reject(_)}),p=new Lx(rf(a.path),d,{includeMetadataChanges:!0,_a:!0});return Px(s,p)}(yield Pf(n),n.asyncQueue,e,t,r)})),r.promise}function lz(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,J.A)(function*(){return function(s,o,a,l,c){const d=new Fw({next:_=>{d.Za(),o.enqueueAndForget(()=>Nx(s,p)),_.fromCache&&"server"===l.source?c.reject(new fe(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(_)},error:_=>c.reject(_)}),p=new Lx(a,d,{includeMetadataChanges:!0,_a:!0});return Px(s,p)}(yield Pf(n),n.asyncQueue,e,t,r)})),r.promise}function cz(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const uz=new Map;function ER(n,e,t){if(!t)throw new fe(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dz(n,e,t,r){if(!0===e&&!0===r)throw new fe(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hz(n){if(!Pe.isDocumentKey(n))throw new fe(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fz(n){if(Pe.isDocumentKey(n))throw new fe(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vw(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":ke()}function Pt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vw(n);throw new fe(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function pz(n,e){if(e<=0)throw new fe(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class gz{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new fe(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new fe(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dz("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=cz(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class i_{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gz({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new fe(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gz(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new fse;switch(r.type){case"firstParty":return new _se(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,J.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=uz.get(t);r&&(me("ComponentProvider","Removing Datastore"),uz.delete(t),r.terminate())}(this),Promise.resolve()}}class ui{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ui(this.firestore,e,this._query)}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class sa extends ui{constructor(e,t,r){super(e,t,rf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new Pe(e))}withConverter(e){return new sa(this.firestore,e,this._path)}}function _z(n,e,...t){if(n=(0,B.Ku)(n),ER("collection","path",e),n instanceof i_){const r=Ut.fromString(e,...t);return fz(r),new sa(n,null,r)}{if(!(n instanceof zn||n instanceof sa))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ut.fromString(e,...t));return fz(r),new sa(n.firestore,null,r)}}function Uw(n,e,...t){if(n=(0,B.Ku)(n),1===arguments.length&&(e=fj.newId()),ER("doc","path",e),n instanceof i_){const r=Ut.fromString(e,...t);return hz(r),new zn(n,null,new Pe(r))}{if(!(n instanceof zn||n instanceof sa))throw new fe(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ut.fromString(e,...t));return hz(r),new zn(n.firestore,n instanceof sa?n.converter:null,new Pe(r))}}function yz(n,e){return n=(0,B.Ku)(n),e=(0,B.Ku)(e),(n instanceof zn||n instanceof sa)&&(e instanceof zn||e instanceof sa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function IR(n,e){return n=(0,B.Ku)(n),e=(0,B.Ku)(e),n instanceof ui&&e instanceof ui&&n.firestore===e.firestore&&Vm(n._query,e._query)&&n.converter===e.converter}class vz{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new dx(this,"async_queue_retry"),this.Vu=()=>{const r=Mw();r&&me("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Mw();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Mw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Qr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,J.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!Ul(t))throw t;me("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,wr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=Rx.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ke()}verifyOperationInProgress(){}wu(){var e=this;return(0,J.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function wR(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class wle{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class In extends i_{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new vz,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,J.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new vz(t),e._firestoreClient=void 0,yield t}})()}}function Zn(n){if(n._terminated)throw new fe(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Ez(n),n._firestoreClient}function Ez(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Kse(n._databaseId,l,n._persistenceKey,(d=i).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,cz(d.experimentalLongPollingOptions),d.useFetchStreams));var l,d;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new cle(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}function CR(){return(CR=(0,J.A)(function*(n){Ds("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();Iz(n,xf.provider,{build:t=>new tz(t,e.cacheSizeBytes)})})).apply(this,arguments)}function Iz(n,e,t){if((n=Pt(n,In))._firestoreClient||n._terminated)throw new fe(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new fe(ne.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Ez(n)}class oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oa(pr.fromBase64String(e))}catch(t){throw new fe(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oa(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class tl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new fe(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ku{constructor(e){this._methodName=e}}class Bw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}}class jw{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const Nle=/^__.*__$/;class Ole{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms):new uf(e,this.data,t,this.fieldTransforms)}}class wz{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Xa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Cz(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke()}}class $w{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new $w(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ww(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Cz(this.Cu)&&Nle.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class kle{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||n_(e)}Qu(e,t,r,i=!1){return new $w({Cu:e,methodName:t,qu:r,path:$n.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fu(n){const e=n._freezeSettings(),t=n_(n._databaseId);return new kle(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Hw(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);RR("Data must be an object, but it was:",o,r);const a=Az(r,o);let l,c;if(s.merge)l=new us(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const _=a_(e,p,t);if(!o.contains(_))throw new fe(ne.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Dz(d,_)||d.push(_)}l=new us(d),c=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=o.fieldTransforms;return new Ole(new ci(a),l,c)}class o_ extends ku{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof o_}}function Tz(n,e,t){return new $w({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class TR extends ku{_toFieldTransform(e){return new $m(e.path,new lf)}isEqual(e){return e instanceof TR}}class bR extends ku{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Tz(this,e,!0),r=this.Ku.map(s=>Lu(s,t)),i=new Au(r);return new $m(e.path,i)}isEqual(e){return e instanceof bR&&(0,B.bD)(this.Ku,e.Ku)}}class AR extends ku{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Tz(this,e,!0),r=this.Ku.map(s=>Lu(s,t)),i=new Su(r);return new $m(e.path,i)}isEqual(e){return e instanceof AR&&(0,B.bD)(this.Ku,e.Ku)}}class SR extends ku{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new cf(e.serializer,u$(e.serializer,this.$u));return new $m(e.path,t)}isEqual(e){return e instanceof SR&&this.$u===e.$u}}function DR(n,e,t,r){const i=n.Qu(1,e,t);RR("Data must be an object, but it was:",i,r);const s=[],o=ci.empty();Bl(r,(l,c)=>{const d=zw(e,l,t);c=(0,B.Ku)(c);const p=i.Nu(d);if(c instanceof o_)s.push(d);else{const _=Lu(c,p);null!=_&&(s.push(d),o.set(d,_))}});const a=new us(s);return new wz(o,a,i.fieldTransforms)}function xR(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[a_(e,r,t)],l=[i];if(s.length%2!=0)throw new fe(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(a_(e,s[_])),l.push(s[_+1]);const c=[],d=ci.empty();for(let _=a.length-1;_>=0;--_)if(!Dz(c,a[_])){const v=a[_];let b=l[_];b=(0,B.Ku)(b);const D=o.Nu(v);if(b instanceof o_)c.push(v);else{const P=Lu(b,D);null!=P&&(c.push(v),d.set(v,P))}}const p=new us(c);return new wz(d,p,o.fieldTransforms)}function bz(n,e,t,r=!1){return Lu(t,n.Qu(r?4:3,e))}function Lu(n,e){if(Sz(n=(0,B.Ku)(n)))return RR("Unsupported field value:",e,n),Az(n,e);if(n instanceof ku)return function(r,i){if(!Cz(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Lu(a,i.Lu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,B.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return u$(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=Yn.fromDate(r);return{timestampValue:hf(i.serializer,s)}}if(r instanceof Yn){const s=new Yn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hf(i.serializer,s)}}if(r instanceof Bw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oa)return{bytesValue:M$(i.serializer,r._byteString)};if(r instanceof zn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:UD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jw)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(l=>{if("number"!=typeof l)throw a.Bu("VectorValues must only contain numeric values.");return MD(a.serializer,l)})}}}}};var a;throw i.Bu(`Unsupported field value: ${Vw(r)}`)}(n,e)}function Az(n,e){const t={};return Rj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bl(n,(r,i)=>{const s=Lu(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Sz(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Yn||n instanceof Bw||n instanceof oa||n instanceof zn||n instanceof ku||n instanceof jw)}function RR(n,e,t){if(!Sz(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Vw(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function a_(n,e,t){if((e=(0,B.Ku)(e))instanceof tl)return e._internalPath;if("string"==typeof e)return zw(n,e);throw Ww("Field path arguments must be of type string or ",n,!1,void 0,t)}const Fle=new RegExp("[~\\*/\\[\\]]");function zw(n,e,t){if(e.search(Fle)>=0)throw Ww(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new tl(...e.split("."))._internalPath}catch{throw Ww(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ww(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new fe(ne.INVALID_ARGUMENT,a+n+l)}function Dz(n,e){return n.some(t=>t.isEqual(e))}class l_{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Lle(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Gw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Lle extends l_{data(){return super.data()}}function Gw(n,e){return"string"==typeof e?zw(n,e):e instanceof tl?e._internalPath:e._delegate._internalPath}function xz(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new fe(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PR{}class c_ extends PR{}function Xl(n,e,...t){let r=[];e instanceof PR&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Mf).length,a=s.filter(l=>l instanceof u_).length;if(o>1||o>0&&a>0)throw new fe(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class u_ extends c_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new u_(e,t,r)}_apply(e){const t=this._parse(e);return Nz(e._query,t),new ui(e.firestore,e.converter,RD(e._query,t))}_parse(e){const t=Fu(e.firestore);return function(s,o,a,l,c,d,p){let _;if(c.isKeyField()){if("array-contains"===d||"array-contains-any"===d)throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if("in"===d||"not-in"===d){Mz(p,d);const v=[];for(const b of p)v.push(Pz(l,s,b));_={arrayValue:{values:v}}}else _=Pz(l,s,p)}else"in"!==d&&"not-in"!==d&&"array-contains-any"!==d||Mz(p,d),_=bz(a,"where",p,"in"===d||"not-in"===d);return Bt.create(c,d,_)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Mf extends PR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Mf(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Nz(o,l),o=RD(o,l)}(e._query,t),new ui(e.firestore,e.converter,RD(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class MR extends c_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new MR(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fm(s,o)}(e._query,this._field,this._direction);return new ui(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ya(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class qw extends c_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new qw(e,t,r)}_apply(e){return new ui(e.firestore,e.converter,dw(e._query,this._limit,this._limitType))}}class Kw extends c_{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Kw(e,t,r)}_apply(e){const t=Rz(e,this.type,this._docOrFields,this._inclusive);return new ui(e.firestore,e.converter,(s=t,new Ya((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Qw extends c_{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Qw(e,t,r)}_apply(e){const t=Rz(e,this.type,this._docOrFields,this._inclusive);return new ui(e.firestore,e.converter,(s=t,new Ya((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function Rz(n,e,t,r){if(t[0]=(0,B.Ku)(t[0]),t[0]instanceof l_)return function(s,o,a,l,c){if(!l)throw new fe(ne.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const p of sf(s))if(p.field.isKeyField())d.push(Tu(o,l.key));else{const _=l.data.field(p.field);if(rw(_))throw new fe(ne.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const v=p.field.canonicalString();throw new fe(ne.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}d.push(_)}return new Wl(d,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Fu(n.firestore);return function(o,a,l,c,d,p){const _=o.explicitOrderBy;if(d.length>_.length)throw new fe(ne.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let b=0;b<d.length;b++){const D=d[b];if(_[b].field.isKeyField()){if("string"!=typeof D)throw new fe(ne.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof D}`);if(!xD(o)&&-1!==D.indexOf("/"))throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${D}' contains a slash.`);const P=o.path.child(Ut.fromString(D));if(!Pe.isDocumentKey(P))throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const H=new Pe(P);v.push(Tu(a,H))}else{const P=bz(l,c,D);v.push(P)}}return new Wl(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Pz(n,e,t){if("string"==typeof(t=(0,B.Ku)(t))){if(""===t)throw new fe(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xD(e)&&-1!==t.indexOf("/"))throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ut.fromString(t));if(!Pe.isDocumentKey(r))throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tu(n,new Pe(r))}if(t instanceof zn)return Tu(n,t._key);throw new fe(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vw(t)}.`)}function Mz(n,e){if(!Array.isArray(n)||0===n.length)throw new fe(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Nz(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new fe(ne.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class NR{convertValue(e,t="none"){switch(Hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Bl(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>Jn(o.doubleValue));return new jw(s)}convertGeoPoint(e){return new Bw(Jn(e.latitude),Jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=iw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Mm(e));default:return null}}convertTimestamp(e){const t=Ka(e);return new Yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ut.fromString(e);Ue(z$(r));const i=new jl(r.get(1),r.get(3)),s=new Pe(r.popFirst(5));return i.isEqual(t)||wr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Yw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Gle extends NR{constructor(e){super(),this.firestore=e}convertBytes(e){return new oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}class Vu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nl extends l_{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new d_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Gw("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class d_ extends nl{data(e={}){return super.data(e)}}class Zl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Vu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new d_(this._firestore,this._userDataWriter,r.key,r,new Vu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new d_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new d_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:Kle(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Kle(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke()}}function kz(n,e){return n instanceof nl&&e instanceof nl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Zl&&e instanceof Zl&&n._firestore===e._firestore&&IR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ec extends NR{constructor(e){super(),this.firestore=e}convertBytes(e){return new oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function Fz(n,e,t){n=Pt(n,zn);const r=Pt(n.firestore,In),i=Yw(n.converter,e,t);return Nf(r,[Hw(Fu(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Xn.none())])}function Lz(n,e,t,...r){n=Pt(n,zn);const i=Pt(n.firestore,In),s=Fu(i);let o;return o="string"==typeof(e=(0,B.Ku)(e))||e instanceof tl?xR(s,"updateDoc",n._key,e,t,r):DR(s,"updateDoc",n._key,e),Nf(i,[o.toMutation(n._key,Xn.exists(!0))])}function Vz(n,...e){var t,r,i;n=(0,B.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||wR(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(wR(e[o])){const p=e[o];e[o]=null===(t=p.next)||void 0===t?void 0:t.bind(p),e[o+1]=null===(r=p.error)||void 0===r?void 0:r.bind(p),e[o+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}let l,c,d;if(n instanceof zn)c=Pt(n.firestore,In),d=rf(n._key.path),l={next:p=>{e[o]&&e[o](OR(c,n,p))},error:e[o+1],complete:e[o+2]};else{const p=Pt(n,ui);c=Pt(p.firestore,In),d=p._query;const _=new ec(c);l={next:v=>{e[o]&&e[o](new Zl(c,_,p,v))},error:e[o+1],complete:e[o+2]},xz(n._query)}return function(_,v,b,D){const P=new Fw(D),H=new Lx(v,P,b);return _.asyncQueue.enqueueAndForget((0,J.A)(function*(){return Px(yield Pf(_),H)})),()=>{P.Za(),_.asyncQueue.enqueueAndForget((0,J.A)(function*(){return Nx(yield Pf(_),H)}))}}(Zn(c),d,a,l)}function Nf(n,e){return function(r,i){const s=new Qr;return r.asyncQueue.enqueueAndForget((0,J.A)(function*(){return function Hae(n,e,t){return Wx.apply(this,arguments)}(yield yR(r),i,s)})),s.promise}(Zn(n),e)}function OR(n,e,t){const r=t.docs.get(e._key),i=new ec(n);return new nl(n,i,e._key,r,new Vu(t.hasPendingWrites,t.fromCache),e.converter)}const hce={maxAttempts:5};class Uz{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fu(e)}set(e,t,r){this._verifyNotCommitted();const i=tc(e,this._firestore),s=Yw(i.converter,t,r),o=Hw(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Xn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=tc(e,this._firestore);let o;return o="string"==typeof(t=(0,B.Ku)(t))||t instanceof tl?xR(this._dataReader,"WriteBatch.update",s._key,t,r,i):DR(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tc(e,this._firestore);return this._mutations=this._mutations.concat(new df(t._key,Xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tc(n,e){if((n=(0,B.Ku)(n)).firestore!==e)throw new fe(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class fce extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Fu(t)}get(t){const r=tc(t,this._firestore),i=new Gle(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return ke();const o=s[0];if(o.isFoundDocument())return new l_(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new l_(this._firestore,i,r._key,null,r.converter);throw ke()})}set(t,r,i){const s=tc(t,this._firestore),o=Yw(s.converter,r,i),a=Hw(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=tc(t,this._firestore);let a;return a="string"==typeof(r=(0,B.Ku)(r))||r instanceof tl?xR(this._dataReader,"Transaction.update",o._key,r,i,s):DR(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=tc(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tc(e,this._firestore),r=new ec(this._firestore);return super.get(e).then(i=>new nl(this._firestore,r,t._key,i._document,new Vu(!1,!1),t.converter))}}function FR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Hz(){if(typeof Uint8Array>"u")throw new fe("unimplemented","Uint8Arrays are not available in this environment.")}function zz(){if(!function Gse(){return typeof atob<"u"}())throw new fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Qh=Gi.SDK_VERSION,(0,Gi._registerComponent)(new pD.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new In(new gse(r.getProvider("auth-internal")),new yse(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new fe(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Gi.registerVersion)(uj,"4.7.3",e),(0,Gi.registerVersion)(uj,"4.7.3","esm2017")}();class h_{constructor(e){this._delegate=e}static fromBase64String(e){return zz(),new h_(oa.fromBase64String(e))}static fromUint8Array(e){return Hz(),new h_(oa.fromUint8Array(e))}toBase64(){return zz(),this._delegate.toBase64()}toUint8Array(){return Hz(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function LR(n){return function Cce(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Tce{enableIndexedDbPersistence(e,t){return function Tle(n,e){Ds("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return Iz(n,xf.provider,{build:r=>new dR(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function ble(n){return CR.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function Ale(n){if(n._initialized&&!n._terminated)throw new fe(ne.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,J.A)(function*(){try{yield(t=(0,J.A)(function*(i){if(!ea.D())return Promise.resolve();const s=i+"main";yield ea.delete(s)}),function r(i){return t.apply(this,arguments)})(ex(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Wz{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof jl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ds("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function mz(n,e,t,r={}){var i;const s=(n=Pt(n,i_))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=Kr.MOCK_USER;else{a=(0,B.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new fe(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Kr(c)}n._authCredentials=new pse(new dj(a,l))}}(this._delegate,e,t,r)}enableNetwork(){return function Dle(n){return function ule(n){return n.asyncQueue.enqueue((0,J.A)(function*(){const e=yield iz(n),t=yield sz(n);return e.setNetworkEnabled(!0),function(i){const s=De(i);return s.L_.delete(0),r_(s)}(t)}))}(Zn(n=Pt(n,In)))}(this._delegate)}disableNetwork(){return function xle(n){return function dle(n){return n.asyncQueue.enqueue((0,J.A)(function*(){const e=yield iz(n),t=yield sz(n);return e.setNetworkEnabled(!1),(r=(0,J.A)(function*(s){const o=De(s);o.L_.add(0),yield Ef(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Zn(n=Pt(n,In)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,dz("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Sle(n){return function(t){const r=new Qr;return t.asyncQueue.enqueueAndForget((0,J.A)(function*(){return function qae(n,e){return Yx.apply(this,arguments)}(yield yR(t),r)})),r.promise}(Zn(n=Pt(n,In)))}(this._delegate)}onSnapshotsInSync(e){return function rce(n,e){return function gle(n,e){const t=new Fw(e);return n.asyncQueue.enqueueAndForget((0,J.A)(function*(){return i=yield Pf(n),s=t,De(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,J.A)(function*(){return i=yield Pf(n),s=t,void De(i).Y_.delete(s);var i,s}))}}(Zn(n=Pt(n,In)),wR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Of(this,_z(this._delegate,e))}catch(t){throw qi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Zs(this,Uw(this._delegate,e))}catch(t){throw qi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ki(this,function Ile(n,e){if(n=Pt(n,i_),ER("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new fe(ne.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ui(n,null,(r=e,new Ya(Ut.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw qi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function pce(n,e,t){n=Pt(n,In);const r=Object.assign(Object.assign({},hce),t);return function(s){if(s.maxAttempts<1)throw new fe(ne.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Qr;return s.asyncQueue.enqueueAndForget((0,J.A)(function*(){const c=yield function oz(n){return Lw(n).then(e=>e.datastore)}(s);new lle(s.asyncQueue,c,a,o,l).au()})),l.promise}(Zn(n),i=>e(new fce(n,i)),r)}(this._delegate,t=>e(new Gz(this,t)))}batch(){return Zn(this._delegate),new qz(new Uz(this._delegate,e=>Nf(this._delegate,e)))}loadBundle(e){return function Rle(n,e){const t=Zn(n=Pt(n,In)),r=new wle;return function mle(n,e,t,r){const i=function(o,a){let l;return l="string"==typeof o?T$().encode(o):o,d=function(d,p){if(d instanceof Uint8Array)return nz(d,p);if(d instanceof ArrayBuffer)return nz(new Uint8Array(d),p);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new ole(d,a);var d}(t,n_(e));n.asyncQueue.enqueueAndForget((0,J.A)(function*(){!function ile(n,e,t){const r=De(n);var i;(i=(0,J.A)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(b,D){const P=De(b),H=Cr(D.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",V=>P.Gr.getBundleMetadata(V,D.id)).then(V=>!!V&&V.createTime.compareTo(H)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(b=c).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);l._updateProgress(WH(c));const d=new kae(c,o.localStore,a.serializer);let p=yield a.Ua();for(;p;){const v=yield d.la(p);v&&l._updateProgress(v),p=yield a.Ua()}const _=yield d.complete();return yield el(o,_.Ia,void 0),yield function(b,D){const P=De(b);return P.persistence.runTransaction("Save bundle","readwrite",H=>P.Gr.saveBundleMetadata(H,D))}(o.localStore,c),l._completeWith(_.progress),Promise.resolve(_.Pa)}catch(c){return Ds("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var b}),function s(o,a,l){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield yR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Ple(n,e){return function _le(n,e){return n.asyncQueue.enqueue((0,J.A)(function*(){return function(r,i){const s=De(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield Rf(n),e)}))}(Zn(n=Pt(n,In)),e).then(t=>t?new ui(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ki(this,t):null)}}class Xw extends NR{constructor(e){super(),this.firestore=e}convertBytes(e){return new h_(new oa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Zs.forKey(t,this.firestore,null)}}class Gz{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Xw(e)}get(e){const t=Bu(e);return this._delegate.get(t).then(r=>new f_(this._firestore,new nl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Bu(e);return r?(FR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Bu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Bu(e);return this._delegate.delete(t),this}}class qz{constructor(e){this._delegate=e}set(e,t,r){const i=Bu(e);return r?(FR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Bu(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Bu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Uu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new d_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new p_(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Uu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Uu(e,new Xw(e),t),i.set(t,s)),s}}Uu.INSTANCES=new WeakMap;class Zs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xw(e)}static forPath(e,t,r){if(e.length%2!=0)throw new fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Zs(t,new zn(t._delegate,r,new Pe(e)))}static forKey(e,t,r){return new Zs(t,new zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Of(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Of(this.firestore,_z(this._delegate,e))}catch(t){throw qi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,B.Ku)(e))instanceof zn&&yz(this._delegate,e)}set(e,t){t=FR("DocumentReference.set",t);try{return t?Fz(this._delegate,e,t):Fz(this._delegate,e)}catch(r){throw qi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Lz(this._delegate,e):Lz(this._delegate,e,t,...r)}catch(i){throw qi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function tce(n){return Nf(Pt(n.firestore,In),[new df(n._key,Xn.none())])}(this._delegate)}onSnapshot(...e){const t=Kz(e),r=Qz(e,i=>new f_(this.firestore,new nl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Vz(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Yle(n){n=Pt(n,zn);const e=Pt(n.firestore,In),t=Zn(e),r=new ec(e);return function hle(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,J.A)(function*(){return(r=(0,J.A)(function*(s,o,a){try{const l=yield function(d,p){const _=De(d);return _.persistence.runTransaction("read document","readonly",v=>_.localDocuments.getDocument(v,p))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new fe(ne.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=Tf(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Rf(n),e,t);var r})),t.promise}(t,n._key).then(i=>new nl(e,r,n._key,i,new Vu(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Jle(n){n=Pt(n,zn);const e=Pt(n.firestore,In);return az(Zn(e),n._key,{source:"server"}).then(t=>OR(e,n,t))}(this._delegate):function Qle(n){n=Pt(n,zn);const e=Pt(n.firestore,In);return az(Zn(e),n._key).then(t=>OR(e,n,t))}(this._delegate),t.then(r=>new f_(this.firestore,new nl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Zs(this.firestore,this._delegate.withConverter(e?Uu.getInstance(this.firestore,e):null))}}function qi(n,e,t){return n.message=n.message.replace(e,t),n}function Kz(n){for(const e of n)if("object"==typeof e&&!LR(e))return e;return{}}function Qz(n,e){var t,r;let i;return i=LR(n[0])?n[0]:LR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class f_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Zs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return kz(this._delegate,e._delegate)}}class p_ extends f_{data(e){const t=this._delegate.data(e);return this._delegate._converter||function hse(n,e){n||ke()}(void 0!==t),t}}class Ki{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Xw(e)}where(e,t,r){try{return new Ki(this.firestore,Xl(this._delegate,function Vle(n,e,t){const r=e,i=Gw("where",n);return u_._create(i,r,t)}(e,t,r)))}catch(i){throw qi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ki(this.firestore,Xl(this._delegate,function Ule(n,e="asc"){const t=e,r=Gw("orderBy",n);return MR._create(r,t)}(e,t)))}catch(r){throw qi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ki(this.firestore,Xl(this._delegate,function Ble(n){return pz("limit",n),qw._create("limit",n,"F")}(e)))}catch(t){throw qi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ki(this.firestore,Xl(this._delegate,function jle(n){return pz("limitToLast",n),qw._create("limitToLast",n,"L")}(e)))}catch(t){throw qi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ki(this.firestore,Xl(this._delegate,function $le(...n){return Kw._create("startAt",n,!0)}(...e)))}catch(t){throw qi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ki(this.firestore,Xl(this._delegate,function Hle(...n){return Kw._create("startAfter",n,!1)}(...e)))}catch(t){throw qi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ki(this.firestore,Xl(this._delegate,function zle(...n){return Qw._create("endBefore",n,!1)}(...e)))}catch(t){throw qi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ki(this.firestore,Xl(this._delegate,function Wle(...n){return Qw._create("endAt",n,!0)}(...e)))}catch(t){throw qi(t,"endAt()","Query.endAt()")}}isEqual(e){return IR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Zle(n){n=Pt(n,ui);const e=Pt(n.firestore,In),t=Zn(e),r=new ec(e);return function fle(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,J.A)(function*(){return(r=(0,J.A)(function*(s,o,a){try{const l=yield Dw(s,o,!0),c=new KH(o,l.Ts),d=c.ma(l.documents),p=c.applyChanges(d,!1);a.resolve(p.snapshot)}catch(l){const c=Tf(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Rf(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Zl(e,r,n,i))}(this._delegate):"server"===e?.source?function ece(n){n=Pt(n,ui);const e=Pt(n.firestore,In),t=Zn(e),r=new ec(e);return lz(t,n._query,{source:"server"}).then(i=>new Zl(e,r,n,i))}(this._delegate):function Xle(n){n=Pt(n,ui);const e=Pt(n.firestore,In),t=Zn(e),r=new ec(e);return xz(n._query),lz(t,n._query).then(i=>new Zl(e,r,n,i))}(this._delegate),t.then(r=>new VR(this.firestore,new Zl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Kz(e),r=Qz(e,i=>new VR(this.firestore,new Zl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Vz(this._delegate,t,r)}withConverter(e){return new Ki(this.firestore,this._delegate.withConverter(e?Uu.getInstance(this.firestore,e):null))}}class Ace{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new p_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class VR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ki(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new p_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ace(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new p_(this._firestore,r))})}isEqual(e){return kz(this._delegate,e._delegate)}}class Of extends Ki{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Zs(this.firestore,e):null}doc(e){try{return new Zs(this.firestore,void 0===e?Uw(this._delegate):Uw(this._delegate,e))}catch(t){throw qi(t,"doc()","CollectionReference.doc()")}}add(e){return function nce(n,e){const t=Pt(n.firestore,In),r=Uw(n),i=Yw(n.converter,e);return Nf(t,[Hw(Fu(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Zs(this.firestore,t))}isEqual(e){return yz(this._delegate,e._delegate)}withConverter(e){return new Of(this.firestore,this._delegate.withConverter(e?Uu.getInstance(this.firestore,e):null))}}function Bu(n){return Pt(n,zn)}class UR{constructor(...e){this._delegate=new tl(...e)}static documentId(){return new UR($n.keyField().canonicalString())}isEqual(e){return(e=(0,B.Ku)(e))instanceof tl&&this._delegate._internalPath.isEqual(e._internalPath)}}class ju{constructor(e){this._delegate=e}static serverTimestamp(){const e=function mce(){return new TR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ju(e)}static delete(){const e=function gce(){return new o_("deleteField")}();return e._methodName="FieldValue.delete",new ju(e)}static arrayUnion(...e){const t=function _ce(...n){return new bR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ju(t)}static arrayRemove(...e){const t=function yce(...n){return new AR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ju(t)}static increment(e){const t=function vce(n){return new SR("increment",n)}(e);return t._methodName="FieldValue.increment",new ju(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Sce={Firestore:Wz,GeoPoint:Bw,Timestamp:Yn,Blob:h_,Transaction:Gz,WriteBatch:qz,DocumentReference:Zs,DocumentSnapshot:f_,Query:Ki,QueryDocumentSnapshot:p_,QuerySnapshot:VR,CollectionReference:Of,FieldPath:UR,FieldValue:ju,setLogLevel:function bce(n){!function dse(n){Ll.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Yz(n,e){return function Rce(n,e=BB){return new ct(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function BR(n,e){return Yz(n,e).pipe(pe(t=>({payload:t,type:"query"})))}!function xce(n){(function Dce(n,e){n.INTERNAL.registerComponent(new pD.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Sce)))})(n,(e,t)=>new Wz(e,t,new Tce)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Fl.A);class Jz{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=r4(r,t);return new e4(i,s,this.afs)}snapshotChanges(){return function Pce(n,e){return Yz(n,e).pipe(xI(void 0),fD(),pe(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ss)}valueChanges(e={}){return this.snapshotChanges().pipe(pe(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return C(this.ref.get(e)).pipe(Ss)}}function Zw(n,e){return BR(n,e).pipe(xI(void 0),fD(),pe(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=s.find(p=>p.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function Xz(n,e,t){return Zw(n,t).pipe(PI((r,i)=>function Mce(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Nce(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),He(),pe(r=>r.map(i=>({type:i.type,payload:i}))))}function jR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Zz(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class e4{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Zw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(pe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(xI(void 0),fD(),Ys(([r,i])=>i.length>0||!r),pe(([,r])=>r),Ss)}auditTrail(e){return this.stateChanges(e).pipe(PI((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Zz(e);return Xz(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ss)}valueChanges(e={}){return BR(this.query,this.afs.schedulers.outsideAngular).pipe(pe(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ss)}get(e){return C(this.query.get(e)).pipe(Ss)}add(e){return this.ref.add(e)}doc(e){return new Jz(this.ref.doc(e),this.afs)}}class Oce{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Zw(this.query,this.afs.schedulers.outsideAngular).pipe(pe(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ys(t=>t.length>0),Ss):Zw(this.query,this.afs.schedulers.outsideAngular).pipe(Ss)}auditTrail(e){return this.stateChanges(e).pipe(PI((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Zz(e);return Xz(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ss)}valueChanges(e={}){return BR(this.query,this.afs.schedulers.outsideAngular).pipe(pe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ss)}get(e){return C(this.query.get(e)).pipe(Ss)}}const t4=new Ce("angularfire2.enableFirestorePersistence"),n4=new Ce("angularfire2.firestore.persistenceSettings"),kce=new Ce("angularfire2.firestore.settings"),Fce=new Ce("angularfire2.firestore.use-emulator");function r4(n,e=(t=>t)){return{query:e(n),ref:n}}let Lce=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,l,c,d,p,_,v,b,D,P,H,V){this.schedulers=l;const Y=hD(t,a,r),ue=d;p&&ej(Y,a,_,b,D,P,v,H),[this.firestore,this.persistenceEnabled$]=zB(`${Y.name}.firestore`,"AngularFirestore",Y.name,()=>{const be=a.runOutsideAngular(()=>Y.firestore());if(s&&be.settings(s),ue&&be.useEmulator(...ue),i&&!TI(o)){const $e=()=>{try{return C(be.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(U){return typeof console<"u"&&console.warn(U),x(!1)}};return[be,a.runOutsideAngular($e)]}return[be,x(!1)]},[s,ue,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=r4(i,r),a=this.schedulers.ngZone.run(()=>s);return new e4(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new Oce(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Jz(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(we(YI),we(JI,8),we(t4,8),we(kce,8),we(zo),we(en),we(dD),we(n4,8),we(Fce,8),we(tj,8),we(KB,8),we(QB,8),we(YB,8),we(JB,8),we(XB,8),we(ZB,8),we(uD,8))};static \u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Vce=(()=>{class n{constructor(){Fl.A.registerVersion("angularfire",QI.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:t4,useValue:!0},{provide:n4,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ri({type:n});static \u0275inj=mi({providers:[Lce]})}return n})();const i4_firebase={apiKey:"AIzaSyDWOb8hpZ7JQcpPzpcNw6SW53_pG0V5UE0",authDomain:"wedding-29b48.firebaseapp.com",databaseURL:"https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app",projectId:"wedding-29b48",storageBucket:"wedding-29b48.firebasestorage.app",messagingSenderId:"807343676966",appId:"1:807343676966:web:1c21870a5ee2dfbae790e7",measurementId:"YOUR_MEASUREMENT_ID"};let s4=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(ve(ka),ve(Cs))}}static{this.\u0275dir=Ye({type:n})}}return n})(),$u=(()=>{class n extends s4{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Ar(n)))(i||n)}}()}static{this.\u0275dir=Ye({type:n,features:[ln]})}}return n})();const aa=new Ce("NgValueAccessor"),jce={provide:aa,useExisting:Zt(()=>g_),multi:!0},Hce=new Ce("CompositionEventMode");let g_=(()=>{class n extends s4{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $ce(){const n=Pl()?Pl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(ve(ka),ve(Cs),ve(Hce,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&$t("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Qn([jce]),ln]})}}return n})();const Si=new Ce("NgValidators"),rc=new Ce("NgAsyncValidators");function m4(n){return null!=n}function _4(n){return Gg(n)?C(n):n}function y4(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function v4(n,e){return e.map(t=>t(n))}function E4(n){return n.map(e=>function Wce(n){return!n.validate}(e)?e:t=>e.validate(t))}function $R(n){return null!=n?function I4(n){if(!n)return null;const e=n.filter(m4);return 0==e.length?null:function(t){return y4(v4(t,e))}}(E4(n)):null}function HR(n){return null!=n?function w4(n){if(!n)return null;const e=n.filter(m4);return 0==e.length?null:function(t){return function Uce(...n){const e=gs(n),{args:t,keys:r}=RU(n),i=new ct(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let d=0;d<o;d++){let p=!1;jt(t[d]).subscribe(se(s,_=>{p||(p=!0,c--),a[d]=_},()=>l--,void 0,()=>{(!l||!p)&&(c||s.next(r?MU(r,a):a),s.complete())}))}});return e?i.pipe(PU(e)):i}(v4(t,e).map(_4)).pipe(pe(y4))}}(E4(n)):null}function C4(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function zR(n){return n?Array.isArray(n)?n:[n]:[]}function tC(n,e){return Array.isArray(n)?n.includes(e):n===e}function A4(n,e){const t=zR(e);return zR(n).forEach(i=>{tC(t,i)||t.push(i)}),t}function S4(n,e){return zR(e).filter(t=>!tC(n,t))}class D4{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$R(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=HR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Qi extends D4{get formDirective(){return null}get path(){return null}}class ic extends D4{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class x4{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let WR=(()=>{class n extends x4{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ve(ic,2))}}static{this.\u0275dir=Ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&xl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ln]})}}return n})(),GR=(()=>{class n extends x4{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ve(Qi,10))}}static{this.\u0275dir=Ye({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&xl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[ln]})}}return n})();const m_="VALID",rC="INVALID",kf="PENDING",__="DISABLED";function QR(n){return(iC(n)?n.validators:n)||null}function YR(n,e){return(iC(e)?e.asyncValidators:n)||null}function iC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class JR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===m_}get invalid(){return this.status===rC}get pending(){return this.status==kf}get disabled(){return this.status===__}get enabled(){return this.status!==__}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(A4(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(A4(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(S4(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(S4(e,this._rawAsyncValidators))}hasValidator(e){return tC(this._rawValidators,e)}hasAsyncValidator(e){return tC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=kf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=__,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=m_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===m_||this.status===kf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?__:m_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=kf,this._hasOwnPendingAsyncValidator=!0;const t=_4(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new hr,this.statusChanges=new hr}_calculateStatus(){return this._allControlsDisabled()?__:this.errors?rC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(kf)?kf:this._anyControlsHaveStatus(rC)?rC:m_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){iC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Qce(n){return Array.isArray(n)?$R(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Yce(n){return Array.isArray(n)?HR(n):n||null}(this._rawAsyncValidators)}}class XR extends JR{constructor(e,t,r){super(QR(t),YR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function M4(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new _e(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function P4(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new _e(1e3,"");if(!r[t])throw new _e(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Ff=new Ce("CallSetDisabledState",{providedIn:"root",factory:()=>sC}),sC="always";function y_(n,e,t=sC){ZR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Zce(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&N4(n,e)})}(n,e),function tue(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function eue(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&N4(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Xce(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function lC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ZR(n,e){const t=function T4(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(C4(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function b4(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(C4(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();lC(e._rawValidators,i),lC(e._rawAsyncValidators,i)}function N4(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const oue={provide:Qi,useExisting:Zt(()=>E_)},v_=(()=>Promise.resolve())();let E_=(()=>{class n extends Qi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new hr,this.form=new XR({},$R(t),HR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){v_.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),y_(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){v_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){v_.then(()=>{const r=this._findContainer(t.path),i=new XR({});(function O4(n,e){ZR(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){v_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){v_.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function k4(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(ve(Si,10),ve(rc,10),ve(Ff,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&$t("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qn([oue]),ln]})}}return n})();function F4(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function L4(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const V4=class extends JR{constructor(e=null,t,r){super(QR(t),YR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),iC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=L4(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){F4(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){F4(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){L4(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},cue={provide:ic,useExisting:Zt(()=>uC)},j4=(()=>Promise.resolve())();let uC=(()=>{class n extends ic{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new V4,this._registered=!1,this.name="",this.update=new hr,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function nP(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===g_?t=s:function iue(n){return Object.getPrototypeOf(n.constructor)===$u}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function tP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){y_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){j4.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&Nh(r);j4.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function oC(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(ve(Qi,9),ve(Si,10),ve(rc,10),ve(aa,10),ve(cI,8),ve(Ff,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Qn([cue]),ln,ji]})}}return n})(),rP=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();const due={provide:aa,useExisting:Zt(()=>iP),multi:!0};let H4=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=mi({})}}return n})(),hue=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:H4})}}return n})(),iP=(()=>{class n extends $u{constructor(t,r,i,s){super(t,r),this._registry=i,this._injector=s,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=Oe(Ff,{optional:!0})??sC}ngOnInit(){this._control=this._injector.get(ic),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static{this.\u0275fac=function(r){return new(r||n)(ve(ka),ve(Cs),ve(hue),ve(as))}}static{this.\u0275dir=Ye({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){1&r&&$t("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Qn([due]),ln]})}}return n})(),Nue=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=mi({imports:[H4]})}}return n})(),kue=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ff,useValue:t.callSetDisabledState??sC}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=mi({imports:[Nue]})}}return n})();class dC{}class hC{}class la{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof la?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new la;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof la?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Fue{encodeKey(e){return oW(e)}encodeValue(e){return oW(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Vue=/%(\d[a-f0-9])/gi,Uue={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function oW(n){return encodeURIComponent(n).replace(Vue,(e,t)=>Uue[t]??e)}function fC(n){return`${n}`}class sc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Fue,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Lue(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(fC):[fC(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new sc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(fC(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(fC(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Bue{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function aW(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function lW(n){return typeof Blob<"u"&&n instanceof Blob}function cW(n){return typeof FormData<"u"&&n instanceof FormData}class I_{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function jue(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new la),this.context||(this.context=new Bue),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new sc,this.urlWithParams=t}serializeBody(){return null===this.body?null:aW(this.body)||lW(this.body)||cW(this.body)||function $ue(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof sc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||cW(this.body)?null:lW(this.body)?this.body.type||null:aW(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof sc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((p,_)=>p.set(_,e.setHeaders[_]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((p,_)=>p.set(_,e.setParams[_]),c)),new I_(t,r,s,{params:c,headers:l,context:d,reportProgress:a,responseType:i,withCredentials:o})}}var Lf=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Lf||{});class dP{constructor(e,t=200,r="OK"){this.headers=e.headers||new la,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class hP extends dP{constructor(e={}){super(e),this.type=Lf.ResponseHeader}clone(e={}){return new hP({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Vf extends dP{constructor(e={}){super(e),this.type=Lf.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Vf({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class uW extends dP{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function fP(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Hue=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof I_)s=t;else{let l,c;l=i.headers instanceof la?i.headers:new la(i.headers),i.params&&(c=i.params instanceof sc?i.params:new sc({fromObject:i.params})),s=new I_(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=x(s).pipe(Fh(l=>this.handler.handle(l)));if(t instanceof I_||"events"===i.observe)return o;const a=o.pipe(Ys(l=>l instanceof Vf));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(pe(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(pe(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(pe(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(pe(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new sc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,fP(i,r))}post(t,r,i={}){return this.request("POST",t,fP(i,r))}put(t,r,i={}){return this.request("PUT",t,fP(i,r))}static{this.\u0275fac=function(r){return new(r||n)(we(dC))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();function fW(n,e){return e(n)}function Wue(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const que=new Ce(""),w_=new Ce(""),pW=new Ce("");function Kue(){let n=null;return(e,t)=>{null===n&&(n=(Oe(que,{optional:!0})??[]).reduceRight(Wue,fW));const r=Oe(sI),i=r.add();return n(e,t).pipe(um(()=>r.remove(i)))}}let gW=(()=>{class n extends dC{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=Oe(sI)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(w_),...this.injector.get(pW,[])]));this.chain=i.reduceRight((s,o)=>function Gue(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),fW)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(um(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(we(hC),we(ws))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();const Xue=/^\)\]\}',?\n/;let _W=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new _e(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?C(r.\u0275loadImpl()):x(null)).pipe(Ee(()=>new ct(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((D,P)=>o.setRequestHeader(D,P.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const D=t.detectContentTypeHeader();null!==D&&o.setRequestHeader("Content-Type",D)}if(t.responseType){const D=t.responseType.toLowerCase();o.responseType="json"!==D?D:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const D=o.statusText||"OK",P=new la(o.getAllResponseHeaders()),H=function Zue(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new hP({headers:P,status:o.status,statusText:D,url:H}),l},d=()=>{let{headers:D,status:P,statusText:H,url:V}=c(),Y=null;204!==P&&(Y=typeof o.response>"u"?o.responseText:o.response),0===P&&(P=Y?200:0);let ue=P>=200&&P<300;if("json"===t.responseType&&"string"==typeof Y){const be=Y;Y=Y.replace(Xue,"");try{Y=""!==Y?JSON.parse(Y):null}catch($e){Y=be,ue&&(ue=!1,Y={error:$e,text:Y})}}ue?(s.next(new Vf({body:Y,headers:D,status:P,statusText:H,url:V||void 0})),s.complete()):s.error(new uW({error:Y,headers:D,status:P,statusText:H,url:V||void 0}))},p=D=>{const{url:P}=c(),H=new uW({error:D,status:o.status||0,statusText:o.statusText||"Unknown Error",url:P||void 0});s.error(H)};let _=!1;const v=D=>{_||(s.next(c()),_=!0);let P={type:Lf.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(P.total=D.total),"text"===t.responseType&&o.responseText&&(P.partialText=o.responseText),s.next(P)},b=D=>{let P={type:Lf.UploadProgress,loaded:D.loaded};D.lengthComputable&&(P.total=D.total),s.next(P)};return o.addEventListener("load",d),o.addEventListener("error",p),o.addEventListener("timeout",p),o.addEventListener("abort",p),t.reportProgress&&(o.addEventListener("progress",v),null!==a&&o.upload&&o.upload.addEventListener("progress",b)),o.send(a),s.next({type:Lf.Sent}),()=>{o.removeEventListener("error",p),o.removeEventListener("abort",p),o.removeEventListener("load",d),o.removeEventListener("timeout",p),t.reportProgress&&(o.removeEventListener("progress",v),null!==a&&o.upload&&o.upload.removeEventListener("progress",b)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(we(lU))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();const pP=new Ce("XSRF_ENABLED"),yW=new Ce("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),vW=new Ce("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class EW{}let nde=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Z2(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(we(bs),we(zo),we(yW))}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac})}}return n})();function rde(n,e){const t=n.url.toLowerCase();if(!Oe(pP)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=Oe(EW).getToken(),i=Oe(vW);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var oc=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(oc||{});function zu(n,e){return{\u0275kind:n,\u0275providers:e}}function ide(...n){const e=[Hue,_W,gW,{provide:dC,useExisting:gW},{provide:hC,useExisting:_W},{provide:w_,useValue:rde,multi:!0},{provide:pP,useValue:!0},{provide:EW,useClass:nde}];for(const t of n)e.push(...t.\u0275providers);return bE(e)}const IW=new Ce("LEGACY_INTERCEPTOR_FN");let ode=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=mi({providers:[ide(zu(oc.LegacyInterceptors,[{provide:IW,useFactory:Kue},{provide:w_,useExisting:IW,multi:!0}]))]})}}return n})();const Te=function(n,e){if(!n)throw Uf(e)},Uf=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},wW=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},gC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,c=l?n[i+2]:0;let _=(15&a)<<2|c>>6,v=63&c;l||(v=64,o||(_=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[_],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(wW(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const l=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(1023&l))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==p)throw new fde;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==p&&r.push(c<<6&192|p))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fde extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CW=function(n){const e=wW(n);return gC.encodeByteArray(e,!0)},mC=function(n){return CW(n).replace(/\./g,"")},mP=function(n){try{return gC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function pde(n){return TW(void 0,n)}function TW(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!gde(t)||(n[t]=TW(n[t],e[t]));return n}function gde(n){return"__proto__"!==n}function bW(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const _C=()=>{try{return bW().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&mP(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},AW=()=>{var n;return null===(n=_C())||void 0===n?void 0:n.config};class ca{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function SW(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(function yC(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}())}function _P(){try{return"object"==typeof indexedDB}catch{return!1}}class C_ extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,C_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yP.prototype.create)}}class yP{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function Sde(n,e){return n.replace(Dde,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new C_(i,`${this.serviceName}: ${o} (${i}).`,r)}}const Dde=/\{\$([^}]+)}/g;function T_(n){return JSON.parse(n)}function Vr(n){return JSON.stringify(n)}const vC=function(n){let e={},t={},r={},i="";try{const s=n.split(".");e=T_(mP(s[0])||""),t=T_(mP(s[1])||""),i=s[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:i}};function ua(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Bf(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function DW(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function EC(n,e,t){const r={};for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=e.call(t,n[i],i,n));return r}function vP(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(xW(s)&&xW(o)){if(!vP(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function xW(n){return null!==n&&"object"==typeof n}class Mde{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let p=0;p<16;p++)r[p]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let p=0;p<16;p++)r[p]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let p=16;p<80;p++){const _=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=4294967295&(_<<1|_>>>31)}let c,d,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let p=0;p<80;p++){p<40?p<20?(c=a^s&(o^a),d=1518500249):(c=s^o^a,d=1859775393):p<60?(c=s&o|a&(s|o),d=2400959708):(c=s^o^a,d=3395469782);const _=(i<<5|i>>>27)+c+l+d+r[p]&4294967295;l=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=_}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const r=t-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<t;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<t;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Wu(n,e){return`${n} failed: ${e} argument `}const IC=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e},Fde=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=16*Math.random()|0;return("x"===n?e:3&e|8).toString(16)})};function ac(n){return n&&n._delegate?n._delegate:n}class Gu{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const qu="[DEFAULT]";class Hde{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ca;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Wde(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:qu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=qu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,J.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=qu){return this.instances.has(e)}getOptions(e=qu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===qu?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=qu){return this.component?this.component.multipleInstances?e:qu:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Gde{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Hde(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const IP=[];var Rn=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Rn||{});const RW={debug:Rn.DEBUG,verbose:Rn.VERBOSE,info:Rn.INFO,warn:Rn.WARN,error:Rn.ERROR,silent:Rn.SILENT},qde=Rn.INFO,Kde={[Rn.DEBUG]:"log",[Rn.VERBOSE]:"log",[Rn.INFO]:"info",[Rn.WARN]:"warn",[Rn.ERROR]:"error"},Qde=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=Kde[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class wP{constructor(e){this.name=e,this._logLevel=qde,this._logHandler=Qde,this._userLogHandler=null,IP.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?RW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rn.DEBUG,...e),this._logHandler(this,Rn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rn.VERBOSE,...e),this._logHandler(this,Rn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rn.INFO,...e),this._logHandler(this,Rn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rn.WARN,...e),this._logHandler(this,Rn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rn.ERROR,...e),this._logHandler(this,Rn.ERROR,...e)}}var Yde=Ge(749);class Jde{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function Xde(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const wC="@firebase/app",CP="0.10.17",il=new wP("@firebase/app"),CC="[DEFAULT]",Ahe={[wC]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Ku=new Map,b_=new Map,A_=new Map;function PW(n,e){try{n.container.addComponent(e)}catch(t){il.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function jf(n){const e=n.name;if(A_.has(e))return il.debug(`There were multiple attempts to register component ${e}.`),!1;A_.set(e,n);for(const t of Ku.values())PW(t,n);for(const t of b_.values())PW(t,n);return!0}function TC(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const eo=new yP("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class MW{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eo.create("app-deleted",{appName:this._name})}}function NW(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:CC,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw eo.create("bad-app-name",{appName:String(i)});if(t||(t=AW()),!t)throw eo.create("no-options");const s=Ku.get(i);if(s){if(vP(t,s.options)&&vP(r,s.config))return s;throw eo.create("duplicate-app",{appName:i})}const o=new Gde(i);for(const l of A_.values())o.addComponent(l);const a=new MW(t,r,o);return Ku.set(i,a),a}function OW(n=CC){const e=Ku.get(n);if(!e&&n===CC&&AW())return NW();if(!e)throw eo.create("no-app",{appName:n});return e}function lc(n,e,t){var r;let i=null!==(r=Ahe[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void il.warn(a.join(" "))}jf(new Gu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Mhe="firebase-heartbeat-database",Nhe=1,S_="firebase-heartbeat-store";let bP=null;function kW(){return bP||(bP=(0,Yde.P2)(Mhe,Nhe,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(S_)}catch(t){console.warn(t)}}}).catch(n=>{throw eo.create("idb-open",{originalErrorMessage:n.message})})),bP}function AP(){return(AP=(0,J.A)(function*(n){try{const t=(yield kW()).transaction(S_),r=yield t.objectStore(S_).get(LW(n));return yield t.done,r}catch(e){if(e instanceof C_)il.warn(e.message);else{const t=eo.create("idb-get",{originalErrorMessage:e?.message});il.warn(t.message)}}})).apply(this,arguments)}function FW(n,e){return SP.apply(this,arguments)}function SP(){return(SP=(0,J.A)(function*(n,e){try{const r=(yield kW()).transaction(S_,"readwrite");yield r.objectStore(S_).put(e,LW(n)),yield r.done}catch(t){if(t instanceof C_)il.warn(t.message);else{const r=eo.create("idb-set",{originalErrorMessage:t?.message});il.warn(r.message)}}})).apply(this,arguments)}function LW(n){return`${n.name}!${n.options.appId}`}class Lhe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Uhe(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,J.A)(function*(){var t,r;try{const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=VW();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===o||e._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(e._heartbeatsCache.heartbeats.push({date:o,agent:s}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){il.warn(i)}})()}getHeartbeatsHeader(){var e=this;return(0,J.A)(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=VW(),{heartbeatsToSend:i,unsentEntries:s}=function Vhe(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),UW(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),UW(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=mC(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o}catch(r){return il.warn(r),""}})()}}function VW(){return(new Date).toISOString().substring(0,10)}class Uhe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,J.A)(function*(){return!!_P()&&function bde(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,J.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function Ohe(n){return AP.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,J.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return FW(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,J.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return FW(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function UW(n){return mC(JSON.stringify({version:2,heartbeats:n})).length}!function Bhe(n){jf(new Gu("platform-logger",e=>new Jde(e),"PRIVATE")),jf(new Gu("heartbeat",e=>new Lhe(e),"PRIVATE")),lc(wC,CP,n),lc(wC,CP,"esm2017"),lc("fire-js","")}(""),lc("firebase","11.1.0","app");const DP=new Map,BW={activated:!1,tokenObservers:[]},Hhe={initialized:!1,enabled:!1};function gr(n){return DP.get(n)||Object.assign({},BW)}function bC(){return Hhe}const xP="https://content-firebaseappcheck.googleapis.com/v1",qhe="exchangeDebugToken",jW={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Qhe{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,J.A)(function*(){t.stop();try{t.pending=new ca,t.pending.promise.catch(r=>{}),yield function Yhe(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ca,t.pending.promise.catch(r=>{}),yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const di=new yP("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function AC(n=!1){var e;return n?null===(e=self.grecaptcha)||void 0===e?void 0:e.enterprise:self.grecaptcha}function RP(n){if(!gr(n).activated)throw di.create("use-before-activation",{appName:n.name})}function PP(n){const e=Math.round(n/1e3),t=Math.floor(e/86400),r=Math.floor((e-3600*t*24)/3600),i=Math.floor((e-3600*t*24-3600*r)/60),s=e-3600*t*24-3600*r-60*i;let o="";return t&&(o+=SC(t)+"d:"),r&&(o+=SC(r)+"h:"),o+=SC(i)+"m:"+SC(s)+"s",o}function SC(n){return 0===n?"00":n>=10?n.toString():"0"+n}function DC(n,e){return MP.apply(this,arguments)}function MP(){return(MP=(0,J.A)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const p=yield i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(n,s)}catch(p){throw di.create("fetch-network-error",{originalErrorMessage:p?.message})}if(200!==o.status)throw di.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(p){throw di.create("fetch-parse-error",{originalErrorMessage:p?.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw di.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(l[1]),d=Date.now();return{token:a.token,expireTimeMillis:d+c,issuedAtTimeMillis:d}})).apply(this,arguments)}function $W(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${xP}/projects/${t}/apps/${r}:${qhe}?key=${i}`,body:{debug_token:e}}}const efe="firebase-app-check-database",tfe=1,D_="firebase-app-check-store",HW="debug-token";let xC=null;function zW(){return xC||(xC=new Promise((n,e)=>{try{const t=indexedDB.open(efe,tfe);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(di.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(D_,{keyPath:"compositeKey"})}}catch(t){e(di.create("storage-open",{originalErrorMessage:t?.message}))}}),xC)}function WW(n,e){return NP.apply(this,arguments)}function NP(){return(NP=(0,J.A)(function*(n,e){const r=(yield zW()).transaction(D_,"readwrite"),s=r.objectStore(D_).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var c;a(di.create("storage-set",{originalErrorMessage:null===(c=l.target.error)||void 0===c?void 0:c.message}))}})})).apply(this,arguments)}function GW(n){return OP.apply(this,arguments)}function OP(){return(OP=(0,J.A)(function*(n){const t=(yield zW()).transaction(D_,"readonly"),i=t.objectStore(D_).get(n);return new Promise((s,o)=>{i.onsuccess=a=>{const l=a.target.result;s(l?l.value:void 0)},t.onerror=a=>{var l;o(di.create("storage-get",{originalErrorMessage:null===(l=a.target.error)||void 0===l?void 0:l.message}))}})})).apply(this,arguments)}function qW(n){return`${n.options.appId}-${n.name}`}const x_=new wP("@firebase/app-check");function kP(){return(kP=(0,J.A)(function*(n){if(_P()){let e;try{e=yield function nfe(n){return GW(qW(n))}(n)}catch(t){x_.warn(`Failed to read token from IndexedDB. Error: ${t}`)}return e}})).apply(this,arguments)}function FP(n,e){return _P()?function rfe(n,e){return WW(qW(n),e)}(n,e).catch(t=>{x_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function LP(){return(LP=(0,J.A)(function*(){let n;try{n=yield function sfe(){return GW(HW)}()}catch{}if(n)return n;{const e=Fde();return function ife(n){return WW(HW,n)}(e).catch(t=>x_.warn(`Failed to persist debug token to IndexedDB. Error: ${t}`)),e}})).apply(this,arguments)}function VP(){return bC().enabled}function UP(){return BP.apply(this,arguments)}function BP(){return(BP=(0,J.A)(function*(){const n=bC();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const cfe={error:"UNKNOWN_ERROR"};function ufe(n){return gC.encodeString(JSON.stringify(n),!1)}function RC(n){return jP.apply(this,arguments)}function jP(){return(jP=(0,J.A)(function*(n,e=!1){const t=n.app;RP(t);const r=gr(t);let s,i=r.token;if(i&&!$f(i)&&(r.token=void 0,i=void 0),!i){const l=yield r.cachedTokenPromise;l&&($f(l)?i=l:yield FP(t,void 0))}if(!e&&i&&$f(i))return{token:i.token};let a,o=!1;if(VP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=DC($W(t,yield UP()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const l=yield r.exchangeTokenPromise;return yield FP(t,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield gr(t).exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?x_.warn(l.message):x_.error(l),s=l}return i?s?a=$f(i)?{token:i.token,internalError:s}:JW(s):(a={token:i.token},r.token=i,yield FP(t,i)):a=JW(s),o&&YW(t,a),a})).apply(this,arguments)}function KW(n){return $P.apply(this,arguments)}function $P(){return($P=(0,J.A)(function*(n){const e=n.app;RP(e);const{provider:t}=gr(e);if(VP()){const r=yield UP(),{token:i}=yield DC($W(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function HP(n,e,t,r){const{app:i}=n,s=gr(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&$f(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),QW(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>QW(n))}function zP(n,e){const t=gr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function QW(n){const{app:e}=n,t=gr(e);let r=t.tokenRefresher;r||(r=function dfe(n){const{app:e}=n;return new Qhe((0,J.A)(function*(){let r;if(r=gr(e).token?yield RC(n,!0):yield RC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=gr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},jW.RETRIAL_MIN_WAIT,jW.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function YW(n,e){const t=gr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function $f(n){return n.expireTimeMillis-Date.now()>0}function JW(n){return{token:ufe(cfe),error:n}}class hfe{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=gr(this.app);for(const t of e)zP(this.app,t.next);return Promise.resolve()}}function vfe(n,e){const t=new ca;gr(n).reCAPTCHAState={initialized:t};const i=function XW(n){const e=`fire_app_check_${n.name}`,t=document.createElement("div");return t.id=e,t.style.display="none",document.body.appendChild(t),e}(n),s=AC(!1);return s?PC(n,e,s,i,t):function wfe(n){const e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js",e.onload=n,document.head.appendChild(e)}(()=>{const o=AC(!1);if(!o)throw new Error("no recaptcha");PC(n,e,o,i,t)}),t.promise}function PC(n,e,t,r,i){t.ready(()=>{(function Ife(n,e,t,r){const i=t.render(r,{sitekey:e,size:"invisible",callback:()=>{gr(n).reCAPTCHAState.succeeded=!0},"error-callback":()=>{gr(n).reCAPTCHAState.succeeded=!1}}),s=gr(n);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})})(n,e,t,r),i.resolve(t)})}function ZW(n){return WP.apply(this,arguments)}function WP(){return(WP=(0,J.A)(function*(n){RP(n);const t=yield gr(n).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=gr(n).reCAPTCHAState;t.ready(()=>{r(t.execute(s.widgetId,{action:"fire_app_check"}))})})})).apply(this,arguments)}class GP{constructor(e){this._siteKey=e,this._throttleData=null}getToken(){var e=this;return(0,J.A)(function*(){var t,r,i;!function rG(n){if(n&&Date.now()-n.allowRequestsAfter<=0)throw di.create("throttled",{time:PP(n.allowRequestsAfter-Date.now()),httpStatus:n.httpStatus})}(e._throttleData);const s=yield ZW(e._app).catch(a=>{throw di.create("recaptcha-error")});if(null===(t=gr(e._app).reCAPTCHAState)||void 0===t||!t.succeeded)throw di.create("recaptcha-error");let o;try{o=yield DC(function Xhe(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${xP}/projects/${t}/apps/${r}:exchangeRecaptchaV3Token?key=${i}`,body:{recaptcha_v3_token:e}}}(e._app,s),e._heartbeatServiceProvider)}catch(a){throw null!==(r=a.code)&&void 0!==r&&r.includes("fetch-status-error")?(e._throttleData=function nG(n,e){if(404===n||403===n)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:n};{const t=e?e.backoffCount:0,r=function jde(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}(t,1e3,2);return{backoffCount:t+1,allowRequestsAfter:Date.now()+r,httpStatus:n}}}(Number(null===(i=a.customData)||void 0===i?void 0:i.httpStatus),e._throttleData),di.create("throttled",{time:PP(e._throttleData.allowRequestsAfter-Date.now()),httpStatus:e._throttleData.httpStatus})):a}return e._throttleData=null,o})()}initialize(e){this._app=e,this._heartbeatServiceProvider=TC(e,"heartbeat"),vfe(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof GP&&this._siteKey===e._siteKey}}function Tfe(n=OW(),e){const t=TC(n=ac(n),"app-check");if(bC().initialized||function lfe(){const n=bW(),e=bC();if(e.initialized=!0,"string"!=typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==n.FIREBASE_APPCHECK_DEBUG_TOKEN)return;e.enabled=!0;const t=new ca;e.token=t,t.resolve("string"==typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN?n.FIREBASE_APPCHECK_DEBUG_TOKEN:function afe(){return LP.apply(this,arguments)}())}(),VP()&&UP().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw di.create("already-initialized",{appName:n.name})}const r=t.initialize({options:e});return function bfe(n,e,t){const r=function zhe(n,e){return DP.set(n,e),DP.get(n)}(n,Object.assign({},BW));r.activated=!0,r.provider=e,r.cachedTokenPromise=function ofe(n){return kP.apply(this,arguments)}(n).then(i=>(i&&$f(i)&&(r.token=i,YW(n,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=void 0===t?n.automaticDataCollectionEnabled:t,r.provider.initialize(n)}(n,e.provider,e.isTokenAutoRefreshEnabled),gr(n).isTokenAutoRefreshEnabled&&HP(r,"INTERNAL",()=>{}),r}function qP(){return(qP=(0,J.A)(function*(n,e){const t=yield RC(n,e);if(t.error)throw t.error;return{token:t.token}})).apply(this,arguments)}const iG="app-check-internal";!function Dfe(){jf(new Gu("app-check",n=>function ffe(n,e){return new hfe(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(iG).initialize()})),jf(new Gu(iG,n=>function pfe(n){return{getToken:e=>RC(n,e),getLimitedUseToken:()=>KW(n),addTokenListener:e=>HP(n,"INTERNAL",e),removeTokenListener:e=>zP(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),lc("@firebase/app-check","0.8.10")}();class sG{constructor(){return(0,Gi.getApps)()}}Ge(443);class aG{constructor(){return cD("auth")}}const lG="@firebase/database";let JP="";class Lfe{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,B.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,B.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Vfe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,B.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const dG=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Lfe(e)}}catch{}return new Vfe},Qu=dG("localStorage"),XP=dG("sessionStorage"),Hf=new Xs.Vy("@firebase/database"),hG=function(){let n=1;return function(){return n++}}(),fG=function(n){const e=(0,B.kj)(n),t=new B.gz;t.update(e);const r=t.digest();return B.K3.encodeByteArray(r)},P_=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=P_.apply(null,r):e+="object"==typeof r?(0,B.As)(r):r,e+=" "}return e};let Yu=null,pG=!0;const Jr=function(...n){if(!0===pG&&(pG=!1,null===Yu&&!0===XP.get("logging_enabled")&&function(n,e){(0,B.vA)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Hf.logLevel=Xs.$b.VERBOSE,Yu=Hf.log.bind(Hf),e&&XP.set("logging_enabled",!0)):"function"==typeof n?Yu=n:(Yu=null,XP.remove("logging_enabled"))}(!0)),Yu){const e=P_.apply(null,n);Yu(e)}},M_=function(n){return function(...e){Jr(n,...e)}},ZP=function(...n){const e="FIREBASE INTERNAL ERROR: "+P_(...n);Hf.error(e)},da=function(...n){const e=`FIREBASE FATAL ERROR: ${P_(...n)}`;throw Hf.error(e),new Error(e)},Di=function(...n){const e="FIREBASE WARNING: "+P_(...n);Hf.warn(e)},MC=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},cc="[MIN_NAME]",sl="[MAX_NAME]",Ju=function(n,e){if(n===e)return 0;if(n===cc||e===sl)return-1;if(e===cc||n===sl)return 1;{const t=yG(n),r=yG(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},jfe=function(n,e){return n===e?0:n<e?-1:1},N_=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,B.As)(e))},eM=function(n){if("object"!=typeof n||null===n)return(0,B.As)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,B.As)(e[r]),t+=":",t+=eM(n[e[r]]);return t+="}",t},mG=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Xr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const _G=function(n){(0,B.vA)(!MC(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const d=c.join("");let p="";for(l=0;l<64;l+=8){let _=parseInt(d.substr(l,8),2).toString(16);1===_.length&&(_="0"+_),p+=_}return p.toLowerCase()},Wfe=new RegExp("^-?(0*)\\d{1,10}$"),yG=function(n){if(Wfe.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},zf=function(n){try{n()}catch(e){setTimeout(()=>{throw Di("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},O_=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Qfe{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Di(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Yfe{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Jr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Di(e)}}let k_=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const CG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,AG="websocket",SG="long_polling";class nM{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qu.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Qu.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function DG(n,e,t){let r;if((0,B.vA)("string"==typeof e,"typeof type must == string"),(0,B.vA)("object"==typeof t,"typeof params must == object"),e===AG)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==SG)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Jfe(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Xr(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class Xfe{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,B.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,B.A4)(this.counters_)}}const rM={},iM={};function sM(n){const e=n.toString();return rM[e]||(rM[e]=new Xfe),rM[e]}class epe{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&zf(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class uc{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=M_(e),this.stats_=sM(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),DG(t,SG,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new epe(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,B.$g)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new oM((...s)=>{const[o,a,l,c,d]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&CG.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){uc.forceAllow_=!0}static forceDisallow(){uc.forceDisallow_=!0}static isAvailable(){return!((0,B.$g)()||!uc.forceAllow_&&(uc.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,B.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,B.KA)(t),i=mG(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,B.$g)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,B.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class oM{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,B.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=hG(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=oM.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Jr("frame writing exception"),a.stack&&Jr(a.stack),Jr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Jr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,B.$g)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Jr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let OC=null;typeof MozWebSocket<"u"?OC=MozWebSocket:typeof WebSocket<"u"&&(OC=WebSocket);let Wf=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=M_(this.connId),this.stats_=sM(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return!(0,B.$g)()&&typeof location<"u"&&location.hostname&&CG.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),DG(t,AG,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qu.set("previous_websocket_failure",!0);try{let i;if((0,B.$g)()){i={headers:{"User-Agent":`Firebase/5/${JP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new OC(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==OC&&!n.forceDisallow_}static previouslyFailed(){return Qu.isInMemoryStorage||!0===Qu.get("previous_websocket_failure")}markConnectionHealthy(){Qu.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,B.$L)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,B.vA)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,B.As)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=mG(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),kG=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[uc,Wf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Wf&&Wf.isAvailable();let i=r&&!Wf.previouslyFailed();if(t.webSocketOnly&&(r||Di("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Wf];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class $G{constructor(e,t,r,i,s,o,a,l,c,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=M_("c:"+this.id+":"),this.transportManager_=new kG(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=O_(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=N_("t",e),r=N_("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=N_("t",e),r=N_("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=N_("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?ZP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ZP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Di("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),O_(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):O_(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class HG{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class zG{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,B.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,B.vA)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class kC extends zG{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,B.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new kC}getInitialEvent(e){return(0,B.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class sn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Kt(){return new sn("")}function wt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function dc(n){return n.pieces_.length-n.pieceNum_}function wn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new sn(n.pieces_,e)}function lM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function F_(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function qG(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new sn(e,0)}function er(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof sn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new sn(t,0)}function Ct(n){return n.pieceNum_>=n.pieces_.length}function Yi(n,e){const t=wt(n),r=wt(e);if(null===t)return e;if(t===r)return Yi(wn(n),wn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function cM(n,e){if(dc(n)!==dc(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function to(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(dc(n)>dc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Cpe{constructor(e,t){this.errorPrefix_=t,this.parts_=F_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,B.OE)(this.parts_[r]);KG(this)}}function KG(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Xu(n))}function Xu(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class uM extends zG{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new uM}getInitialEvent(e){return(0,B.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const L_=1e3;let LC,Zu=(()=>{class n extends HG{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=M_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=L_,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,B.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");uM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&kC.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_((0,B.As)(o)),(0,B.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new B.cY,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,B.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,B.vA)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,d=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==d&&this.removeListen_(i,s),t.onComplete&&t.onComplete(d,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,B.gR)(t,"w")){const i=(0,B.yw)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Di(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,B.qc)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,B.Cv)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,B.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,B.As)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):ZP("Unrecognized action received from server: "+(0,B.As)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,B.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=L_,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=L_,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=L_),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,J.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const d=function(){c?c.close():(l=!0,s())};t.realtime_={close:d,sendRequest:function(v){(0,B.vA)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(v)}};const _=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[v,b]=yield Promise.all([t.authTokenProvider_.getToken(_),t.appCheckTokenProvider_.getToken(_)]);l?Jr("getToken() completed but was canceled"):(Jr("getToken() completed. Creating connection."),t.authToken_=v&&v.accessToken,t.appCheckToken_=b&&b.token,c=new $G(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,D=>{Di(D+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(v){t.log_("Failed to get token: "+v),l||(t.repoInfo_.nodeAdmin&&Di(v),d())}}})()}interrupt(t){Jr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Jr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,B.Im)(this.interruptReasons_)&&(this.reconnectDelay_=L_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>eM(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new sn(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Jr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Jr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,B.$g)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+JP.replace(/\./g,"-")]=1,(0,B.jZ)()?t["framework.cordova"]=1:(0,B.lV)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=kC.getInstance().currentlyOnline();return(0,B.Im)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Mt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Mt(e,t)}}class FC{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Mt(cc,e),i=new Mt(cc,t);return 0!==this.compare(r,i)}minPost(){return Mt.MIN}}class JG extends FC{static get __EMPTY_NODE(){return LC}static set __EMPTY_NODE(e){LC=e}compare(e,t){return Ju(e.name,t.name)}isDefinedOn(e){throw(0,B.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Mt.MIN}maxPost(){return new Mt(sl,LC)}makePost(e,t){return(0,B.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Mt(e,LC)}toString(){return".key"}}const ha=new JG;class VC{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let hM,wo=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??hs.EMPTY_NODE,this.right=o??hs.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return hs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return hs.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class hs{constructor(e,t=hs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new hs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,wo.BLACK,null,null))}remove(e){return new hs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,wo.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new VC(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new VC(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new VC(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new VC(this.root_,null,this.comparator_,!0,e)}}function Ppe(n,e){return Ju(n.name,e.name)}function dM(n,e){return Ju(n,e)}hs.EMPTY_NODE=new class Rpe{copy(e,t,r,i,s){return this}insert(e,t,r){return new wo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const XG=function(n){return"number"==typeof n?"number:"+_G(n):"string:"+n},ZG=function(n){if(n.isLeafNode()){const e=n.val();(0,B.vA)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,B.gR)(e,".sv"),"Priority must be a string or number.")}else(0,B.vA)(n===hM||n.isEmpty(),"priority of unexpected type.");(0,B.vA)(n===hM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let e3,t3,n3,Gf=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,B.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ZG(this.priorityNode_)}static set __childrenNodeConstructor(t){e3=t}static get __childrenNodeConstructor(){return e3}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ct(t)?this:".priority"===wt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=wt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,B.vA)(".priority"!==i||1===dc(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(wn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+XG(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?_G(this.value_):this.value_,this.lazyHash_=fG(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,B.vA)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return(0,B.vA)(s>=0,"Unknown leaf type: "+r),(0,B.vA)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Pn=new class kpe extends FC{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Ju(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Mt.MIN}maxPost(){return new Mt(sl,new Gf("[PRIORITY-POST]",n3))}makePost(e,t){const r=t3(e);return new Mt(t,new Gf("[PRIORITY-POST]",r))}toString(){return".priority"}},Fpe=Math.log(2);class Lpe{constructor(e){this.count=parseInt(Math.log(e+1)/Fpe,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const UC=function(n,e,t,r){n.sort(e);const i=function(l,c){const d=c-l;let p,_;if(0===d)return null;if(1===d)return p=n[l],_=t?t(p):p,new wo(_,p.node,wo.BLACK,null,null);{const v=parseInt(d/2,10)+l,b=i(l,v),D=i(v+1,c);return p=n[v],_=t?t(p):p,new wo(_,p.node,wo.BLACK,b,D)}},a=function(l){let c=null,d=null,p=n.length;const _=function(b,D){const P=p-b,H=p;p-=b;const V=i(P+1,H),Y=n[P],ue=t?t(Y):Y;v(new wo(ue,Y.node,D,null,V))},v=function(b){c?(c.left=b,c=b):(d=b,c=b)};for(let b=0;b<l.count;++b){const D=l.nextBitIsOne(),P=Math.pow(2,l.count-(b+1));D?_(P,wo.BLACK):(_(P,wo.BLACK),_(P,wo.RED))}return d}(new Lpe(n.length));return new hs(r||e,a)};let fM;const qf={};class ol{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,B.vA)(qf&&Pn,"ChildrenNode.ts has not been loaded"),fM=fM||new ol({".priority":qf},{".priority":Pn}),fM}get(e){const t=(0,B.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof hs?t:null}hasIndex(e){return(0,B.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,B.vA)(e!==ha,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Mt.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?UC(r,e.getCompare()):qf;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new ol(d,c)}addToIndexes(e,t){const r=(0,B.kH)(this.indexes_,(i,s)=>{const o=(0,B.yw)(this.indexSet_,s);if((0,B.vA)(o,"Missing index implementation for "+s),i===qf){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(Mt.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),UC(a,o.getCompare())}return qf}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new Mt(e.name,a))),l.insert(e,e.node)}});return new ol(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,B.kH)(this.indexes_,i=>{if(i===qf)return i;{const s=t.get(e.name);return s?i.remove(new Mt(e.name,s)):i}});return new ol(r,this.indexSet_)}}let V_,dt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&ZG(this.priorityNode_),this.children_.isEmpty()&&(0,B.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return V_||(V_=new n(new hs(dM),null,ol.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||V_}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?V_:r}}getChild(t){const r=wt(t);return null===r?this:this.getImmediateChild(r).getChild(wn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,B.vA)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Mt(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?V_:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=wt(t);if(null===i)return r;{(0,B.vA)(".priority"!==wt(t)||1===dc(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(wn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(Pn,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+XG(this.getPriority().val())+":"),this.forEachChild(Pn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":fG(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new Mt(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Mt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Mt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Mt.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Mt.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===U_?-1:0}withIndex(t){if(t===ha||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ha||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Pn),s=r.getIterator(Pn);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===ha?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const U_=new class Vpe extends dt{constructor(){super(new hs(dM),dt.EMPTY_NODE,ol.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return dt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Mt,{MIN:{value:new Mt(cc,dt.EMPTY_NODE)},MAX:{value:new Mt(sl,U_)}}),JG.__EMPTY_NODE=dt.EMPTY_NODE,Gf.__childrenNodeConstructor=dt,function Mpe(n){hM=n}(U_),function Ope(n){n3=n}(U_);const Upe=!0;function sr(n,e=null){if(null===n)return dt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,B.vA)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Gf(n,sr(e));if(n instanceof Array||!Upe){let t=dt.EMPTY_NODE;return Xr(n,(r,i)=>{if((0,B.gR)(n,r)&&"."!==r.substring(0,1)){const s=sr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(sr(e))}{const t=[];let r=!1;if(Xr(n,(o,a)=>{if("."!==o.substring(0,1)){const l=sr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new Mt(o,l)))}}),0===t.length)return dt.EMPTY_NODE;const s=UC(t,Ppe,o=>o.name,dM);if(r){const o=UC(t,Pn.getCompare());return new dt(s,sr(e),new ol({".priority":o},{".priority":Pn}))}return new dt(s,sr(e),ol.Default)}}!function Npe(n){t3=n}(sr);class pM extends FC{constructor(e){super(),this.indexPath_=e,(0,B.vA)(!Ct(e)&&".priority"!==wt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Ju(e.name,t.name):s}makePost(e,t){const r=sr(e),i=dt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Mt(t,i)}maxPost(){const e=dt.EMPTY_NODE.updateChild(this.indexPath_,U_);return new Mt(sl,e)}toString(){return F_(this.indexPath_,0).join("/")}}const gM=new class Bpe extends FC{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ju(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Mt.MIN}maxPost(){return Mt.MAX}makePost(e,t){const r=sr(e);return new Mt(t,r)}toString(){return".value"}};function j_(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class _M{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,B.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,B.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,B.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,B.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:sl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,B.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Pn}copy(){const e=new _M;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function i3(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Pn?t="$priority":n.index_===gM?t="$value":n.index_===ha?t="$key":((0,B.vA)(n.index_ instanceof pM,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,B.As)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,B.As)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,B.As)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,B.As)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,B.As)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function s3(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Pn&&(e.i=n.index_.toString()),e}class jC extends HG{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=M_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,B.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=jC.getListenId_(e,r),a={};this.listens_[o]=a;const l=i3(e._queryParams);this.restRequest_(s+".json",l,(c,d)=>{let p=d;if(404===c&&(p=null,c=null),null===c&&this.onDataUpdate_(s,p,!1,r),(0,B.yw)(this.listens_,o)===a){let _;_=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(_,null)}})}unlisten(e,t){const r=jC.getListenId_(e,t);delete this.listens_[r]}get(e){const t=i3(e._queryParams),r=e._path.toString(),i=new B.cY;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,B.Am)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,B.$L)(a.responseText)}catch{Di("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Di("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class Kpe{constructor(){this.rootNode_=dt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function $C(){return{value:null,children:new Map}}function Qf(n,e,t){if(Ct(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=wt(e);n.children.has(r)||n.children.set(r,$C()),Qf(n.children.get(r),e=wn(e),t)}}function IM(n,e,t){null!==n.value?t(e,n.value):function Qpe(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{IM(i,new sn(e.toString()+"/"+r),t)})}class Ype{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Xr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Zpe{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ype(e);const r=1e4+2e4*Math.random();O_(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Xr(e,(i,s)=>{s>0&&(0,B.gR)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),O_(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var fa=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(fa||{});function TM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class HC{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=fa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ct(this.path)){if(null!=this.affectedTree.value)return(0,B.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new sn(e));return new HC(Kt(),t,this.revert)}}return(0,B.vA)(wt(this.path)===e,"operationForChild called for unrelated child."),new HC(wn(this.path),this.affectedTree,this.revert)}}class ed{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=fa.OVERWRITE}operationForChild(e){return Ct(this.path)?new ed(this.source,Kt(),this.snap.getImmediateChild(e)):new ed(this.source,wn(this.path),this.snap)}}class Yf{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=fa.MERGE}operationForChild(e){if(Ct(this.path)){const t=this.children.subtree(new sn(e));return t.isEmpty()?null:t.value?new ed(this.source,Kt(),t.value):new Yf(this.source,Kt(),t)}return(0,B.vA)(wt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Yf(this.source,wn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class hc{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ct(e))return this.isFullyInitialized()&&!this.filtered_;const t=wt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function z_(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function rge(n,e,t){if(null==e.childName||null==t.childName)throw(0,B.Hk)("Should only compare child_ events.");const r=new Mt(e.childName,e.snapshotNode),i=new Mt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function nge(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function zC(n,e){return{eventCache:n,serverCache:e}}function W_(n,e,t,r){return zC(new hc(e,t,r),n.serverCache)}function a3(n,e,t,r){return zC(n.eventCache,new hc(e,t,r))}function WC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function td(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let bM;class Mn{constructor(e,t=(()=>(bM||(bM=new hs(jfe)),bM))()){this.value=e,this.children=t}static fromObject(e){let t=new Mn(null);return Xr(e,(r,i)=>{t=t.set(new sn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Kt(),value:this.value};if(Ct(e))return null;{const r=wt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(wn(e),t);return null!=s?{path:er(new sn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ct(e))return this;{const t=wt(e),r=this.children.get(t);return null!==r?r.subtree(wn(e)):new Mn(null)}}set(e,t){if(Ct(e))return new Mn(t,this.children);{const r=wt(e),s=(this.children.get(r)||new Mn(null)).set(wn(e),t),o=this.children.insert(r,s);return new Mn(this.value,o)}}remove(e){if(Ct(e))return this.children.isEmpty()?new Mn(null):new Mn(null,this.children);{const t=wt(e),r=this.children.get(t);if(r){const i=r.remove(wn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Mn(null):new Mn(this.value,s)}return this}}get(e){if(Ct(e))return this.value;{const t=wt(e),r=this.children.get(t);return r?r.get(wn(e)):null}}setTree(e,t){if(Ct(e))return t;{const r=wt(e),s=(this.children.get(r)||new Mn(null)).setTree(wn(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Mn(this.value,o)}}fold(e){return this.fold_(Kt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(er(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Kt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Ct(e))return null;{const s=wt(e),o=this.children.get(s);return o?o.findOnPath_(wn(e),er(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Kt(),t)}foreachOnPath_(e,t,r){if(Ct(e))return this;{this.value&&r(t,this.value);const i=wt(e),s=this.children.get(i);return s?s.foreachOnPath_(wn(e),er(t,i),r):new Mn(null)}}foreach(e){this.foreach_(Kt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(er(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Co{constructor(e){this.writeTree_=e}static empty(){return new Co(new Mn(null))}}function G_(n,e,t){if(Ct(e))return new Co(new Mn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Yi(i,e);return s=s.updateChild(o,t),new Co(n.writeTree_.set(i,s))}{const i=new Mn(t),s=n.writeTree_.setTree(e,i);return new Co(s)}}}function AM(n,e,t){let r=n;return Xr(t,(i,s)=>{r=G_(r,er(e,i),s)}),r}function l3(n,e){if(Ct(e))return Co.empty();{const t=n.writeTree_.setTree(e,new Mn(null));return new Co(t)}}function SM(n,e){return null!=nd(n,e)}function nd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Yi(t.path,e)):null}function c3(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Pn,(r,i)=>{e.push(new Mt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Mt(r,i.value))}),e}function fc(n,e){if(Ct(e))return n;{const t=nd(n,e);return new Co(null!=t?new Mn(t):n.writeTree_.subtree(e))}}function DM(n){return n.writeTree_.isEmpty()}function Jf(n,e){return u3(Kt(),n.writeTree_,e)}function u3(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,B.vA)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=u3(er(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(er(n,".priority"),r)),t}}function GC(n,e){return g3(e,n)}function cge(n,e){if(n.snap)return to(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&to(er(n.path,t),e))return!0;return!1}function dge(n){return n.visible}function d3(n,e,t){let r=Co.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)to(t,o)?(a=Yi(t,o),r=G_(r,a,s.snap)):to(o,t)&&(a=Yi(o,t),r=G_(r,Kt(),s.snap.getChild(a)));else{if(!s.children)throw(0,B.Hk)("WriteRecord should have .snap or .children");if(to(t,o))a=Yi(t,o),r=AM(r,a,s.children);else if(to(o,t))if(a=Yi(o,t),Ct(a))r=AM(r,Kt(),s.children);else{const l=(0,B.yw)(s.children,wt(a));if(l){const c=l.getChild(wn(a));r=G_(r,Kt(),c)}}}}}return r}function h3(n,e,t,r,i){if(r||i){const s=fc(n.visibleWrites,e);return!i&&DM(s)?t:i||null!=t||SM(s,Kt())?Jf(d3(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(to(c.path,e)||to(e,c.path))},e),t||dt.EMPTY_NODE):null}{const s=nd(n.visibleWrites,e);if(null!=s)return s;{const o=fc(n.visibleWrites,e);return DM(o)?t:null!=t||SM(o,Kt())?Jf(o,t||dt.EMPTY_NODE):null}}}function qC(n,e,t,r){return h3(n.writeTree,n.treePath,e,t,r)}function xM(n,e){return function hge(n,e,t){let r=dt.EMPTY_NODE;const i=nd(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Pn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=fc(n.visibleWrites,e);return t.forEachChild(Pn,(o,a)=>{const l=Jf(fc(s,new sn(o)),a);r=r.updateImmediateChild(o,l)}),c3(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return c3(fc(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function f3(n,e,t,r){return function fge(n,e,t,r,i){(0,B.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=er(e,t);if(SM(n.visibleWrites,s))return null;{const o=fc(n.visibleWrites,s);return DM(o)?i.getChild(t):Jf(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function KC(n,e){return function gge(n,e){return nd(n.visibleWrites,e)}(n.writeTree,er(n.treePath,e))}function RM(n,e,t){return function pge(n,e,t,r){const i=er(e,t),s=nd(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Jf(fc(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function p3(n,e){return g3(er(n.treePath,e),n.writeTree)}function g3(n,e){return{treePath:n,writeTree:e}}class vge{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,B.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,B.vA)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,j_(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,function B_(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,function Kf(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,B.Hk)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,j_(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const m3=new class Ege{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class PM{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new hc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return RM(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:td(this.viewCache_),s=function yge(n,e,t,r,i,s){return function mge(n,e,t,r,i,s,o){let a;const l=fc(n.visibleWrites,e),c=nd(l,Kt());if(null!=c)a=c;else{if(null==t)return[];a=Jf(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const d=[],p=o.getCompare(),_=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let v=_.getNext();for(;v&&d.length<i;)0!==p(v,r)&&d.push(v),v=_.getNext();return d}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function _3(n,e,t,r,i,s){const o=e.eventCache;if(null!=KC(r,t))return e;{let a,l;if(Ct(t))if((0,B.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=td(e),p=xM(r,c instanceof dt?c:dt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{const c=qC(r,td(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=wt(t);if(".priority"===c){(0,B.vA)(1===dc(t),"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const p=f3(r,t,d,l);a=null!=p?n.filter.updatePriority(d,p):o.getNode()}else{const d=wn(t);let p;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const _=f3(r,t,o.getNode(),l);p=null!=_?o.getNode().getImmediateChild(c).updateChild(d,_):o.getNode().getImmediateChild(c)}else p=RM(r,c,e.serverCache);a=null!=p?n.filter.updateChild(o.getNode(),c,p,d,i,s):o.getNode()}}return W_(e,a,o.isFullyInitialized()||Ct(t),n.filter.filtersNodes())}}function QC(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const d=o?n.filter:n.filter.getIndexedFilter();if(Ct(t))c=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const v=l.getNode().updateChild(t,r);c=d.updateFullNode(l.getNode(),v,null)}else{const v=wt(t);if(!l.isCompleteForPath(t)&&dc(t)>1)return e;const b=wn(t),P=l.getNode().getImmediateChild(v).updateChild(b,r);c=".priority"===v?d.updatePriority(l.getNode(),P):d.updateChild(l.getNode(),v,P,b,m3,null)}const p=a3(e,c,l.isFullyInitialized()||Ct(t),d.filtersNodes());return _3(n,p,t,i,new PM(i,p,s),a)}function MM(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const d=new PM(i,e,s);if(Ct(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=W_(e,c,!0,n.filter.filtersNodes());else{const p=wt(t);if(".priority"===p)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=W_(e,c,a.isFullyInitialized(),a.isFiltered());else{const _=wn(t),v=a.getNode().getImmediateChild(p);let b;if(Ct(_))b=r;else{const D=d.getCompleteChild(p);b=null!=D?".priority"===lM(_)&&D.getChild(qG(_)).isEmpty()?D:D.updateChild(_,r):dt.EMPTY_NODE}l=v.equals(b)?e:W_(e,n.filter.updateChild(a.getNode(),p,b,_,d,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function y3(n,e){return n.eventCache.isCompleteForChild(e)}function v3(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function NM(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=Ct(t)?r:new Mn(null).setTree(t,r);const d=e.serverCache.getNode();return c.children.inorderTraversal((p,_)=>{if(d.hasChild(p)){const b=v3(0,e.serverCache.getNode().getImmediateChild(p),_);l=QC(n,l,new sn(p),b,i,s,o,a)}}),c.children.inorderTraversal((p,_)=>{const v=!e.serverCache.isCompleteForChild(p)&&null===_.value;if(!d.hasChild(p)&&!v){const D=v3(0,e.serverCache.getNode().getImmediateChild(p),_);l=QC(n,l,new sn(p),D,i,s,o,a)}}),l}function Mge(n,e){const t=td(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ct(e)&&!t.getImmediateChild(wt(e)).isEmpty())?t.getChild(e):null}function w3(n,e,t,r){e.type===fa.MERGE&&null!==e.source.queryId&&((0,B.vA)(td(n.viewCache_),"We should always have a full cache before handling merges"),(0,B.vA)(WC(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function Cge(n,e,t,r,i){const s=new vge;let o,a;if(t.type===fa.OVERWRITE){const c=t;c.source.fromUser?o=MM(n,e,c.path,c.snap,r,i,s):((0,B.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Ct(c.path),o=QC(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===fa.MERGE){const c=t;c.source.fromUser?o=function bge(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const d=er(t,l);y3(e,wt(d))&&(a=MM(n,a,d,c,i,s,o))}),r.foreach((l,c)=>{const d=er(t,l);y3(e,wt(d))||(a=MM(n,a,d,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):((0,B.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=NM(n,e,c.path,c.children,r,i,a,s))}else if(t.type===fa.ACK_USER_WRITE){const c=t;o=c.revert?function Dge(n,e,t,r,i,s){let o;if(null!=KC(r,t))return e;{const a=new PM(r,e,i),l=e.eventCache.getNode();let c;if(Ct(t)||".priority"===wt(t)){let d;if(e.serverCache.isFullyInitialized())d=qC(r,td(e));else{const p=e.serverCache.getNode();(0,B.vA)(p instanceof dt,"serverChildren would be complete if leaf node"),d=xM(r,p)}c=n.filter.updateFullNode(l,d,s)}else{const d=wt(t);let p=RM(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=l.getImmediateChild(d)),c=null!=p?n.filter.updateChild(l,d,p,wn(t),a,s):e.eventCache.getNode().hasChild(d)?n.filter.updateChild(l,d,dt.EMPTY_NODE,wn(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=qC(r,td(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=KC(r,Kt()),W_(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function Age(n,e,t,r,i,s,o){if(null!=KC(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(Ct(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return QC(n,e,t,l.getNode().getChild(t),i,s,a,o);if(Ct(t)){let c=new Mn(null);return l.getNode().forEachChild(ha,(d,p)=>{c=c.set(new sn(d),p)}),NM(n,e,t,c,i,s,a,o)}return e}{let c=new Mn(null);return r.foreach((d,p)=>{const _=er(t,d);l.isCompleteForPath(_)&&(c=c.set(d,l.getNode().getChild(_)))}),NM(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==fa.LISTEN_COMPLETE)throw(0,B.Hk)("Unknown operation type: "+t.type);o=function Sge(n,e,t,r,i){const s=e.serverCache;return _3(n,a3(e,s.getNode(),s.isFullyInitialized()||Ct(t),s.isFiltered()),t,r,m3,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function Tge(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=WC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(function r3(n){return{type:"value",snapshotNode:n}}(WC(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function wge(n,e){(0,B.vA)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,B.vA)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,B.vA)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,function C3(n,e,t,r){return function tge(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function jpe(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),z_(n,i,"child_removed",e,r,t),z_(n,i,"child_added",e,r,t),z_(n,i,"child_moved",s,r,t),z_(n,i,"child_changed",e,r,t),z_(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,s.changes,s.viewCache.eventCache.getNode(),null)}let YC,XC;function OM(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,B.vA)(null!=s,"SyncTree gave us an op for an invalid query."),w3(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(w3(o,e,t,r));return s}}function pc(n,e){let t=null;for(const r of n.views.values())t=t||Mge(r,e);return t}class x3{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mn(null),this.pendingWriteTree_=function _ge(){return{visibleWrites:Co.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kM(n,e,t,r,i){return function sge(n,e,t,r,i){(0,B.vA)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=G_(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Xf(n,new ed({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function mc(n,e,t=!1){const r=function age(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function lge(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,B.vA)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&cge(a,r.path)?i=!1:to(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function uge(n){n.visibleWrites=d3(n.allWrites,dge,Kt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=l3(n.visibleWrites,r.path):Xr(r.children,l=>{n.visibleWrites=l3(n.visibleWrites,er(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new Mn(null);return null!=r.snap?s=s.set(Kt(),!0):Xr(r.children,o=>{s=s.set(new sn(o),!0)}),Xf(n,new HC(r.path,s,t))}return[]}function q_(n,e,t){return Xf(n,new ed({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function e0(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=pc(a,Yi(o,e));if(c)return c});return h3(i,e,s,t,!0)}function Xf(n,e){return P3(e,n.syncPointTree_,null,GC(n.pendingWriteTree_,Kt()))}function P3(n,e,t,r){if(Ct(n.path))return M3(n,e,t,r);{const i=e.get(Kt());null==t&&null!=i&&(t=pc(i,Kt()));let s=[];const o=wt(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,d=p3(r,o);s=s.concat(P3(a,l,c,d))}return i&&(s=s.concat(OM(i,n,r,t))),s}}function M3(n,e,t,r){const i=e.get(Kt());null==t&&null!=i&&(t=pc(i,Kt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=p3(r,o),d=n.operationForChild(o);d&&(s=s.concat(M3(d,a,l,c)))}),i&&(s=s.concat(OM(i,n,r,t))),s}function LM(n,e){return n.tagToQueryMap.get(e)}function VM(n){const e=n.indexOf("$");return(0,B.vA)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new sn(n.substr(0,e))}}function UM(n,e,t){const r=n.syncPointTree_.get(e);return(0,B.vA)(r,"Missing sync point for query tag that we're tracking"),OM(r,t,GC(n.pendingWriteTree_,e),null)}class BM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new BM(t)}node(){return this.node_}}class jM{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=er(this.path_,e);return new jM(this.syncTree_,t)}node(){return e0(this.syncTree_,this.path_)}}const Zge=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},O3=function(n,e,t){return n&&"object"==typeof n?((0,B.vA)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?eme(n[".sv"],e,t):"object"==typeof n[".sv"]?tme(n[".sv"],e):void(0,B.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},eme=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,B.vA)(!1,"Unexpected server value: "+n)},tme=function(n,e,t){n.hasOwnProperty("increment")||(0,B.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,B.vA)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,B.vA)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},k3=function(n,e,t,r){return HM(e,new jM(t,n),r)},$M=function(n,e,t){return HM(n,new BM(e),t)};function HM(n,e,t){const r=n.getPriority().val(),i=O3(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=O3(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Gf(a,sr(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Gf(i))),o.forEachChild(Pn,(a,l)=>{const c=HM(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class zM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function n0(n,e){let t=e instanceof sn?e:new sn(e),r=n,i=wt(t);for(;null!==i;){const s=(0,B.yw)(r.node.children,i)||{children:{},childCount:0};r=new zM(i,r,s),t=wn(t),i=wt(t)}return r}function rd(n){return n.node.value}function WM(n,e){n.node.value=e,GM(n)}function F3(n){return n.node.childCount>0}function r0(n,e){Xr(n.node.children,(t,r)=>{e(new zM(t,n,r))})}function L3(n,e,t,r){t&&!r&&e(n),r0(n,i=>{L3(i,e,!0,r)}),t&&r&&e(n)}function Y_(n){return new sn(null===n.parent?n.name:Y_(n.parent)+"/"+n.name)}function GM(n){null!==n.parent&&function ime(n,e,t){const r=function nme(n){return void 0===rd(n)&&!F3(n)}(t),i=(0,B.gR)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,GM(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,GM(n))}(n.parent,n.name,n)}const sme=/[\[\].#$\/\u0000-\u001F\u007F]/,ome=/[\[\].#$\u0000-\u001F\u007F]/,qM=10485760,s0=function(n){return"string"==typeof n&&0!==n.length&&!sme.test(n)},X_=function(n,e,t){const r=t instanceof sn?new Cpe(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Xu(r));if("function"==typeof e)throw new Error(n+"contains a function "+Xu(r)+" with contents = "+e.toString());if(MC(e))throw new Error(n+"contains "+e.toString()+" "+Xu(r));if("string"==typeof e&&e.length>qM/3&&(0,B.OE)(e)>qM)throw new Error(n+"contains a string greater than "+qM+" utf8 bytes "+Xu(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Xr(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!s0(o)))throw new Error(n+" contains an invalid key ("+o+") "+Xu(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Tpe(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,B.OE)(e),KG(n)})(r,o),X_(n,a,r),function bpe(n){const e=n.parts_.pop();n.byteLength_-=(0,B.OE)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Xu(r)+" in addition to actual children.")}},B3=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!s0(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!ome.test(n)}(n)}(t))throw new Error((0,B.dI)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ume{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ps(n,e,t){(function o0(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!cM(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function $3(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(dme(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>to(r,e)||to(e,r))}function dme(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Yu&&Jr("event: "+t.toString()),zf(r)}}}const hme=25;class fme{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ume,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$C(),this.transactionQueueTree_=new zM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function z3(n){const t=n.infoData_.getNode(new sn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ey(n){return Zge({timestamp:z3(n)})}function W3(n,e,t,r,i){n.dataUpdateCount++;const s=new sn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=(0,B.kH)(t,c=>sr(c));o=function qge(n,e,t,r){const i=LM(n,r);if(i){const s=VM(i),o=s.path,a=s.queryId,l=Yi(o,e),c=Mn.fromObject(t);return UM(n,o,new Yf(TM(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=sr(t);o=function R3(n,e,t,r){const i=LM(n,r);if(null!=i){const s=VM(i),o=s.path,a=s.queryId,l=Yi(o,e);return UM(n,o,new ed(TM(a),l,t))}return[]}(n.serverSyncTree_,s,l,i)}else if(r){const l=(0,B.kH)(t,c=>sr(c));o=function zge(n,e,t){const r=Mn.fromObject(t);return Xf(n,new Yf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=sr(t);o=q_(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=ep(n,s)),Ps(n.eventQueue_,a,o)}function G3(n,e){YM(n,"connected",e),!1===e&&function yme(n){Zf(n,"onDisconnectEvents");const e=ey(n),t=$C();IM(n.onDisconnect_,Kt(),(i,s)=>{const o=k3(i,s,n.serverSyncTree_,e);Qf(t,i,o)});let r=[];IM(t,Kt(),(i,s)=>{r=r.concat(q_(n.serverSyncTree_,i,s));const o=function eN(n,e){const t=Y_(Q3(n,e)),r=n0(n.transactionQueueTree_,e);return function rme(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{tN(n,i)}),tN(n,r),L3(r,i=>{tN(n,i)}),t}(n,i);ep(n,o)}),n.onDisconnect_=$C(),Ps(n.eventQueue_,Kt(),r)}(n)}function YM(n,e,t){const r=new sn("/.info/"+e),i=sr(t);n.infoData_.updateSnapshot(r,i);const s=q_(n.infoSyncTree_,r,i);Ps(n.eventQueue_,r,s)}function a0(n){return n.nextWriteId_++}function Zf(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Jr(t,...e)}function ZM(n,e,t){return e0(n.serverSyncTree_,e,t)||dt.EMPTY_NODE}function l0(n,e=n.transactionQueueTree_){if(e||c0(n,e),rd(e)){const t=Y3(n,e);(0,B.vA)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function bme(n,e,t){const r=t.map(c=>c.currentWriteId),i=ZM(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const d=t[c];(0,B.vA)(0===d.status,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const p=Yi(e,d.path);s=s.updateChild(p,d.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{Zf(n,"transaction put response",{path:l.toString(),status:c});let d=[];if("ok"===c){const p=[];for(let _=0;_<t.length;_++)t[_].status=2,d=d.concat(mc(n.serverSyncTree_,t[_].currentWriteId)),t[_].onComplete&&p.push(()=>t[_].onComplete(null,!0,t[_].currentOutputSnapshotResolved)),t[_].unwatcher();c0(n,n0(n.transactionQueueTree_,e)),l0(n,n.transactionQueueTree_),Ps(n.eventQueue_,e,d);for(let _=0;_<p.length;_++)zf(p[_])}else{if("datastale"===c)for(let p=0;p<t.length;p++)t[p].status=3===t[p].status?4:0;else{Di("transaction at "+l.toString()+" failed: "+c);for(let p=0;p<t.length;p++)t[p].status=4,t[p].abortReason=c}ep(n,e)}},o)}(n,Y_(e),t)}else F3(e)&&r0(e,t=>{l0(n,t)})}function ep(n,e){const t=Q3(n,e),r=Y_(t);return function Ame(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Yi(t,l.path);let p,d=!1;if((0,B.vA)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)d=!0,p=l.abortReason,i=i.concat(mc(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=hme)d=!0,p="maxretry",i=i.concat(mc(n.serverSyncTree_,l.currentWriteId,!0));else{const _=ZM(n,l.path,o);l.currentInputSnapshot=_;const v=e[a].update(_.val());if(void 0!==v){X_("transaction failed: Data returned ",v,l.path);let b=sr(v);"object"==typeof v&&null!=v&&(0,B.gR)(v,".priority")||(b=b.updatePriority(_.getPriority()));const P=l.currentWriteId,H=ey(n),V=$M(b,_,H);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=V,l.currentWriteId=a0(n),o.splice(o.indexOf(P),1),i=i.concat(kM(n.serverSyncTree_,l.path,V,l.currentWriteId,l.applyLocally)),i=i.concat(mc(n.serverSyncTree_,P,!0))}else d=!0,p="nodata",i=i.concat(mc(n.serverSyncTree_,l.currentWriteId,!0))}Ps(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===p?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(p),!1,null)))}c0(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)zf(r[a]);l0(n,n.transactionQueueTree_)}(n,Y3(n,t),r),r}function Q3(n,e){let t,r=n.transactionQueueTree_;for(t=wt(e);null!==t&&void 0===rd(r);)r=n0(r,t),t=wt(e=wn(e));return r}function Y3(n,e){const t=[];return J3(n,e,t),t.sort((r,i)=>r.order-i.order),t}function J3(n,e,t){const r=rd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);r0(e,i=>{J3(n,i,t)})}function c0(n,e){const t=rd(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,WM(e,t.length>0?t:void 0)}r0(e,r=>{c0(n,r)})}function tN(n,e){const t=rd(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,B.vA)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,B.vA)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(mc(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?WM(e,void 0):t.length=s+1,Ps(n.eventQueue_,Y_(e),i);for(let o=0;o<r.length;o++)zf(r[o])}}const nN=function(n,e){const t=xme(n),r=t.namespace;return"firebase.com"===t.domain&&da(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&da("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Di("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new nM(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new sn(t.pathString)}},xme=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let d=n.indexOf("/");-1===d&&(d=n.length);let p=n.indexOf("?");-1===p&&(p=n.length),e=n.substring(0,Math.min(d,p)),d<p&&(i=function Sme(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(d,p)));const _=function Dme(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Di(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,p)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const v=e.slice(0,c);if("localhost"===v.toLowerCase())t="localhost";else if(v.split(".").length<=2)t=v;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),s=r}"ns"in _&&(s=_.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class Ms{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ct(this._path)?null:lM(this._path)}get ref(){return new To(this._repo,this._path)}get _queryIdentifier(){const e=s3(this._queryParams),t=eM(e);return"{}"===t?"default":t}get _queryObject(){return s3(this._queryParams)}isEqual(e){if(!((e=(0,B.Ku)(e))instanceof Ms))return!1;const t=this._repo===e._repo,r=cM(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ipe(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class To extends Ms{constructor(e,t){super(e,t,new _M,!1)}get parent(){const e=qG(this._path);return null===e?null:new To(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function kge(n){(0,B.vA)(!YC,"__referenceConstructor has already been defined"),YC=n})(To),function Bge(n){(0,B.vA)(!XC,"__referenceConstructor has already been defined"),XC=n}(To);const iN={};class Kme{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function pme(n,e,t){if(n.stats_=sM(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new jC(n.repoInfo_,(r,i,s,o)=>{W3(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>G3(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,B.As)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Zu(n.repoInfo_,e,(r,i,s,o)=>{W3(n,r,i,s,o)},r=>{G3(n,r)},r=>{!function gme(n,e){Xr(e,(t,r)=>{YM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Zfe(n,e){const t=n.toString();return iM[t]||(iM[t]=e()),iM[t]}(n.repoInfo_,()=>new Zpe(n.stats_,n.server_)),n.infoData_=new Kpe,n.infoSyncTree_=new x3({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=q_(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),YM(n,"connected",!1),n.serverSyncTree_=new x3({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Ps(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new To(this._repo,Kt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Wme(n,e){const t=iN[e];(!t||t[n.key]!==n)&&da(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function K3(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&da("Cannot call "+e+" on a deleted database.")}}function Qme(n=(0,Gi.getApp)(),e){const t=(0,Gi._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(0,B.yU)("database");r&&function Yme(n,e,t,r={}){(n=(0,B.Ku)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&da("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&da('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new k_(k_.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,B.Fy)(r.mockUserToken,n.app.options.projectId);s=new k_(o)}!function zme(n,e,t,r){n.repoInfo_=new nM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(t,...r)}return t}Zu.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Zu.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Jme(n){(function uG(n){JP=n})(Gi.SDK_VERSION),(0,Gi._registerComponent)(new pD.uA("database",(e,{instanceIdentifier:t})=>function sq(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||da("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Jr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=nN(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=nN(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const d=i&&l?new k_(k_.OWNER):new Yfe(n.name,n.options,e);B3("Invalid Firebase Database URL",o),Ct(o.path)||da("Database URL must point to the root of a Firebase Database (not including a child path).");const p=function Gme(n,e,t,r){let i=iN[e.name];i||(i={},iN[e.name]=i);let s=i[n.toURLString()];return s&&da("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new fme(n,!1,t,r),i[n.toURLString()]=s,s}(a,n,d,new Qfe(n.name,t));return new Kme(p,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Gi.registerVersion)(lG,"1.0.8",n),(0,Gi.registerVersion)(lG,"1.0.8","esm2017")}();class sN{constructor(e){return e}}const aq="database",oN=new Ce("angularfire2.database-instances");function n_e(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new sN(r)}}const r_e={provide:class e_e{constructor(){return cD(aq)}},deps:[[new Is,oN]]},i_e={provide:sN,useFactory:function t_e(n,e){const t=function jB(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}(aq,n,e);return t&&new sN(t)},deps:[[new Is,oN],class R_{constructor(e){return e}}]};function s_e(n,...e){return(0,Gi.registerVersion)("angularfire",QI.full,"rtdb"),bE([i_e,r_e,{provide:oN,useFactory:n_e(n),multi:!0,deps:[en,as,dD,sG,[new Is,aG],[new Is,uD],...e]}])}const o_e=Jie(Qme,!0);let a_e=(()=>{class n{constructor(){this.target=new Date(2025,6,19,12,30),this.updateTimeDifference(),this.intervalId=setInterval(()=>{this.updateTimeDifference()},1e3)}updateTimeDifference(){const t=new Date(Date.now()),r=this.target.getTime()-t.getTime();r<=0?(clearInterval(this.intervalId),this.remDays=this.remHours=this.remMinutes=this.remSeconds=0):this.calculateDifference(r)}calculateDifference(t){try{this.remDays=Math.floor(t/864e5),t%=864e5,this.remHours=Math.floor(t/36e5),t%=36e5,this.remMinutes=Math.floor(t/6e4),t%=6e4,this.remSeconds=Math.floor(t/1e3)}catch(r){console.log("Error in calculateDifference",r)}}ngOnDestroy(){clearInterval(this.intervalId)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ni({type:n,selectors:[["app-timer"]],decls:3,vars:4,consts:[[1,"container"],[1,"clock"]],template:function(r,i){1&r&&(ee(0,"div",0)(1,"div",1),ce(2),re()()),2&r&&(tt(2),CA("",i.remDays," days, ",i.remHours," hrs ",i.remMinutes," min ",i.remSeconds," sec."))},styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;height:70px;width:50vw;background-color:#96a498;color:#fff;font-size:26px;padding-left:2em}@media (max-width: 1000px){.container[_ngcontent-%COMP%]{height:60px;font-size:20px}}@media (max-width: 800px){.container[_ngcontent-%COMP%]{height:50px;font-size:18px}}@media (max-width: 600px){.container[_ngcontent-%COMP%]{height:40px;width:45vw;font-size:12px;padding-left:1.5em}}@media (max-width: 450px){.container[_ngcontent-%COMP%]{height:30px;font-size:10px;padding-left:1em}}@media (max-width: 400px){.container[_ngcontent-%COMP%]{height:25px;padding-left:1em}}"]})}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function l_e(n,e){if(1&n){const t=Qo();ee(0,"div",35),$t("click",function(){return ur(t),dr(An().hideImage())}),kr(1,"img",36),re()}if(2&n){const t=An();tt(1),yt("src",t.enlargedImageSrc,lu)}}let c_e=(()=>{class n{constructor(){this.timer=new a_e,this.isImageVisible=!1,this.enlargedImageSrc=""}showImage(t){this.enlargedImageSrc=t.src,this.isImageVisible=!0}hideImage(){this.isImageVisible=!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ni({type:n,selectors:[["app-home"]],decls:62,vars:2,consts:[[1,"container"],[1,"welcome-text"],[1,"time-and-place"],[1,"dot"],[1,"our-story"],[1,"our-story-headline"],[1,"our-story-text"],[1,"collage-container"],[1,"collage-item-1",3,"click"],["src","assets/images/ratio1-1/picture5-1_1.jpg"],["collageItem1",""],[1,"overlay-text-1_1"],[1,"collage-item-2",3,"click"],["src","assets/images/ratio1-1/picture12-1_1.jpg"],["collageItem2",""],[1,"collage-item-3",3,"click"],["src","assets/images/ratio9-16/picture10-9_16.jpg"],["collageItem3",""],[1,"overlay-text-9_16"],[1,"collage-item-4",3,"click"],["src","assets/images/ratio9-16/picture6-9_16.jpg"],["collageItem4",""],[1,"collage-item-5",3,"click"],["src","assets/images/ratio9-16/picture18-9_16.jpg"],["collageItem5",""],[1,"collage-item-6",3,"click"],["src","assets/images/ratio9-16/picture17-9_16.jpg"],["collageItem6",""],[1,"collage-item-7",3,"click"],["src","assets/images/ratio1-1/picture8-1_1.jpg"],["collageItem7",""],[1,"collage-item-8",3,"click"],["src","assets/images/ratio1-1/picture14-1_1.jpg"],["collageItem8",""],["class","image-overlay",3,"click",4,"ngIf"],[1,"image-overlay",3,"click"],[3,"src"]],template:function(r,i){if(1&r){const s=Qo();ee(0,"div",0)(1,"div",1)(2,"div"),ce(3,"We are delighted to welcome you to"),re(),ee(4,"div"),ce(5,"Patrik & Claudia's"),re(),ee(6,"div"),ce(7,"wedding!"),re()(),ee(8,"div",2),ce(9," July 19 2025 "),kr(10,"span",3),ce(11," G\xf6teborg "),kr(12,"span",3),ee(13,"span"),ce(14),re()(),ee(15,"div",4)(16,"div",5),ce(17,"OUR STORY"),re(),ee(18,"p",6),ce(19," A simple message on a dating app would travel across Kattegat and become the beginning of our beautiful love story. \u201cHello there on the other side of the water\u201d Patrik wrote, and with those simple words, a Swedish Pilot and a Danish accountant would begin their very own fairytale. Our story proves that love knows no borders. Between Patrik\u2019s flights touching down all over Europe and my world of endless numbers and spreadsheets we have created a beautiful relationship based on mutual respect, curiosity and many interests that with time have become mutual. Patrik has introduced me to the beauty of the Gothenburg Archipelago, and I have shared with him my love for all things Italian. In our relationship we delight in teaching each other. Patrik patiently sits evening after evening explaining to me the intricate systems of jet aircraft \u2013 just ask me what might happen if you get on the back side of the drag curve... While I introduce him to the profound simplicity of Hemingway\u2019s prose, as well as the differences between the different philosophical schools. When I was younger, and wanted as young people tend to do \u2013 everything all at once, I would get annoyed when people told me to be patient, and that whoever waits for something good never waits in vain. Today I understand that they were right. Patrik and I might have found each other later in life, but in each other we have found a true soul mate, and a love that is both patient and enduring of any outside circumstances. On that magical Christmas Eve in 2023 when Patrik dropped to one knee and asked me to be his wife in Rome\u2019s beautiful Borghese Gardens I have never been more sure of an answer in my whole life. Patrik and I are so excited to embark on this next chapter of our lives as husband and wife together with our beloved children, and one far too spoiled miniature dachshund. Welcome to our wedding website. We can\u2019t wait to celebrate with all of you and hope you will find the information on this site useful. "),re()(),ee(20,"div",7)(21,"div",8),$t("click",function(){ur(s);const a=Ko(23);return dr(i.showImage(a))}),kr(22,"img",9,10),ee(24,"div",11),ce(25,"Dec 2023"),re()(),ee(26,"div",12),$t("click",function(){ur(s);const a=Ko(28);return dr(i.showImage(a))}),kr(27,"img",13,14),ee(29,"div",11),ce(30,"May 2023"),re()(),ee(31,"div",15),$t("click",function(){ur(s);const a=Ko(33);return dr(i.showImage(a))}),kr(32,"img",16,17),ee(34,"div",18),ce(35,"Aug 2023"),re()(),ee(36,"div",19),$t("click",function(){ur(s);const a=Ko(38);return dr(i.showImage(a))}),kr(37,"img",20,21),ee(39,"div",18),ce(40,"Dec 2023"),re()(),ee(41,"div",22),$t("click",function(){ur(s);const a=Ko(43);return dr(i.showImage(a))}),kr(42,"img",23,24),ee(44,"div",18),ce(45,"Feb 2023"),re()(),ee(46,"div",25),$t("click",function(){ur(s);const a=Ko(48);return dr(i.showImage(a))}),kr(47,"img",26,27),ee(49,"div",18),ce(50,"Sept 2024"),re()(),ee(51,"div",28),$t("click",function(){ur(s);const a=Ko(53);return dr(i.showImage(a))}),kr(52,"img",29,30),ee(54,"div",11),ce(55,"July 2024"),re()(),ee(56,"div",31),$t("click",function(){ur(s);const a=Ko(58);return dr(i.showImage(a))}),kr(57,"img",32,33),ee(59,"div",11),ce(60,"Dec 2022"),re()()(),qr(61,l_e,2,1,"div",34),re()}2&r&&(tt(14),Ua("",i.timer.remDays," days to go"),tt(47),yt("ngIf",i.isImageVisible))},dependencies:[om],styles:[".welcome-text[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:30px;font-family:Waterfall,cursive;font-size:80px;align-items:center;text-align:center}.time-and-place[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:auto;background-color:#96a498;color:#fff;padding:.5em;font-size:22px}.dot[_ngcontent-%COMP%]{height:5px;width:5px;background-color:#fff;border-radius:50%;display:inline-block;margin-left:1.5em;margin-right:1.5em}.our-story-headline[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:center;font-size:26px}.our-story-text[_ngcontent-%COMP%]{margin:15px 2em 2em;font-size:14px;column-count:2;column-gap:20px;column-fill:balance;overflow-y:auto}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:36px;float:left;margin-right:.1em;line-height:1}.collage-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:auto auto auto auto;grid-column-gap:3%;grid-row-gap:3%;margin:3% 5% 5%}.collage-item-1[_ngcontent-%COMP%]{grid-column:1/1;grid-row:1/2;position:relative}.collage-item-2[_ngcontent-%COMP%]{grid-column:2/2;grid-row:1/2;position:relative}.collage-item-3[_ngcontent-%COMP%]{grid-column:3/4;grid-row:1/3;position:relative}.collage-item-4[_ngcontent-%COMP%]{grid-column:4/5;grid-row:1/3;position:relative}.collage-item-5[_ngcontent-%COMP%]{grid-column:1/2;grid-row:2/4;position:relative}.collage-item-6[_ngcontent-%COMP%]{grid-column:2/3;grid-row:2/4;position:relative}.collage-item-7[_ngcontent-%COMP%]{grid-column:3/4;grid-row:3/4;position:relative}.collage-item-8[_ngcontent-%COMP%]{grid-column:4/5;grid-row:3/4;position:relative}.collage-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:auto;object-fit:cover;border-radius:5px;filter:grayscale(100%);transition:filter .3s ease}.collage-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{filter:grayscale(0%)}.overlay-text-1_1[_ngcontent-%COMP%]{position:absolute;top:85%;left:10%;color:#fff;text-shadow:2px 2px 5px rgb(0,0,0);font-size:16px;font-weight:700}.overlay-text-9_16[_ngcontent-%COMP%]{position:absolute;top:90%;left:10%;color:#fff;text-shadow:2px 2px 5px rgb(0,0,0);font-size:16px;font-weight:700}.image-overlay[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;max-height:100%;max-width:auto;transform:translate(-35%,-50%);background-color:#000c;padding:40px;display:flex;justify-content:center;align-items:center;z-index:2}.image-overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:90vh;box-shadow:0 0 20px #00000080;border:2px solid white}@media (max-width: 1200px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:70px}.time-and-place[_ngcontent-%COMP%]{font-size:20px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 1000px){.welcome-text[_ngcontent-%COMP%]{margin-top:60px;font-size:65px}.time-and-place[_ngcontent-%COMP%]{font-size:18px}.dot[_ngcontent-%COMP%]{height:4px;width:4px}.our-story-text[_ngcontent-%COMP%]{font-size:12px;column-gap:18px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:30px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 800px){.welcome-text[_ngcontent-%COMP%]{margin-top:60px;font-size:52px}.time-and-place[_ngcontent-%COMP%]{font-size:16px}.our-story-headline[_ngcontent-%COMP%]{margin-top:20px;font-size:22px}.our-story-text[_ngcontent-%COMP%]{font-size:10px;column-gap:12px;margin-top:10px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:25px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:10px}.image-overlay[_ngcontent-%COMP%]{padding:30px;transform:translate(-30%,-50%)}}@media (max-width: 600px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:30px;font-size:38px}.time-and-place[_ngcontent-%COMP%]{font-size:12px}.dot[_ngcontent-%COMP%]{height:3px;width:3px}.our-story-headline[_ngcontent-%COMP%]{margin-top:15px;font-size:18px}.our-story-text[_ngcontent-%COMP%]{font-size:8px;column-gap:8px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:20px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:8px}}@media (max-width: 450px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:35px}.time-and-place[_ngcontent-%COMP%]{font-size:10px}.our-story-headline[_ngcontent-%COMP%]{font-size:14px}.our-story-text[_ngcontent-%COMP%]{font-size:7px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:18px;column-gap:6px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:6px}.image-overlay[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 400px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:28px}.timer[_ngcontent-%COMP%]{margin-top:20px}}"]})}}return n})(),u_e=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ni({type:n,selectors:[["app-about"]],decls:29,vars:0,consts:[[1,"page-headline"],[1,"about-container"],[1,"content"],[1,"headline"]],template:function(r,i){1&r&&(ee(0,"div",0),ce(1,"ABOUT"),re(),ee(2,"div",1)(3,"div",2),ce(4," We are delighted to be welcoming you to our wedding which will take place in Gothenburg on "),ee(5,"b"),ce(6,"Saturday the 19th of July 2025."),re()(),ee(7,"div",3),ce(8,"WEDDING CERMONY"),re(),ee(9,"div",2)(10,"p"),ce(11,"The wedding ceremony will be held at Gothenburg Cathedral (G\xf6teborgs Domkyrka) which is located in the heart of Gothenburg. The church was originally consecrated in 1633 and later rebuilt in the 19th century. It is a stunning, historic landmark easily recognized by its elegant neoclassical architecture. The cathedral is the seat of the bishop of the diocese of Gothenburg in the Evangelical Lutheran Church of Sweden."),re(),ee(12,"p")(13,"u"),ce(14,"Address"),re(),ce(15,": Kyrkogatan 28, 411 15, Gothenburg, Sweden."),re(),ee(16,"p"),ce(17,"Gothenburg Cathedral is easily accessible by public transportation, and the closest bus stops are Domkyrkan, Gr\xf6ntsakstorget and Kungsportsplatsen."),re()(),ee(18,"div",3),ce(19,"WEDDING PARTY"),re(),ee(20,"div",2)(21,"p"),ce(22,"The wedding reception following the church ceremony will take place in Eriksberg at River Restaurant On The Pier. Eriksberg is located along the northern bank of Gothenburg\u2019s G\xf6ta River and was once a bustling shipyard. The area is easily recognizable by its iconic red shipyard crane which stands as a bright reminder of the neighborhood\u2019s rich industrial history. We have chosen this location to both honor Patrik\u2019s lifelong relationship with the maritime as well as pay homage to the waterway that connects us. From the Restaurant you can actually see Stena Line\u2019s ferries passing on their way to and from Denmark. The same exact ferries that carried Patrik to Denmark when we went on our very first date."),re(),ee(23,"p")(24,"u"),ce(25,"Address"),re(),ce(26,": Dockepiren, Eriksberg, 417 64, Gothenburg, Sweden."),re(),ee(27,"p"),ce(28,"River Restaurant on the Pier is easily accessible by public transportation as well. The closest stops are Eriksbergs F\xe4rjel\xe4ge and Eriksbergstorget."),re()()())},styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.about-container[_ngcontent-%COMP%]{font-size:16px}.headline[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:20px;color:#fff;background-color:#96a498;width:100%}.content[_ngcontent-%COMP%]{margin:2em}@media (max-width: 1000px){.headline[_ngcontent-%COMP%]{font-size:18px}.content[_ngcontent-%COMP%]{margin:1.9em;font-size:14px}}@media (max-width: 800px){.headline[_ngcontent-%COMP%]{font-size:16px}.content[_ngcontent-%COMP%]{margin:1.8em;font-size:12px}}@media (max-width: 600px){.headline[_ngcontent-%COMP%]{font-size:14px}.content[_ngcontent-%COMP%]{margin:1.7em;font-size:10px}}@media (max-width: 450px){.headline[_ngcontent-%COMP%]{font-size:12px}.content[_ngcontent-%COMP%]{margin:1.6em;font-size:8px}}"]})}}return n})(),d_e=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ni({type:n,selectors:[["app-schedule"]],decls:46,vars:1,consts:[[1,"page-headline"],[1,"schedule-container"],[1,"text",2,"margin","2em"],[1,"headline"],[1,"grid-system","text"],[1,"grid-item-1","left-column"],[1,"grid-item-2","right-column"],[1,"grid-item-3","left-column"],[1,"grid-item-4","right-column"],[1,"grid-item-5","left-column"],[1,"grid-item-6","right-column"],[1,"left-column"],[1,"right-column"],[3,"routerLink"]],template:function(r,i){1&r&&(ee(0,"div",0),ce(1,"SCHEDULE"),re(),ee(2,"div",1)(3,"div",2),ce(4,"This schedule gives a general outline of the wedding day. Apart from when the ceremony starts, and when the venue of the wedding party closes, times are only approximate. Our wish is for everyone to enjoy a day free of stress, in good company with the wedding couple, family and friends."),re(),ee(5,"div",3),ce(6,"WEDDING CERMONY"),re(),ee(7,"div",4)(8,"div",5),ce(9,"14:30"),re(),ee(10,"div",6),ce(11,"Wedding ceremony starts in Domkyrkan."),re(),ee(12,"div",7),ce(13,"15:30"),re(),ee(14,"div",8),ce(15,"Walk from Domkyrkan to Residensbron to embark on S/S F\xe4rjan 4. The walk is approximately 700 m."),re(),ee(16,"div",9),ce(17,"15:45"),re(),ee(18,"div",10),ce(19,"S/S F\xe4rjan 4 leaves Residensbron for a 1.5 - 2 hour tour of G\xf6teborg harbour. Drinks and snacks will be provided onboard. "),ee(20,"p")(21,"b"),ce(22,"Note:"),re(),ce(23," There is no toilet available onboard."),re()()(),ee(24,"div",3),ce(25,"WEDDING PARTY"),re(),ee(26,"div",4)(27,"div",11),ce(28,"17:30"),re(),ee(29,"div",12),ce(30,"Arrival at Restaurant River On The Pier. Welcome drinks and hang out on the docks. "),re(),ee(31,"div",11),ce(32,"19:00"),re(),ee(33,"div",12),ce(34,"Three course dinner and wedding cake. Anyone keen on holding a speech? This is your moment. Reach out to the toastmaster, details in the "),ee(35,"a",13),ce(36,"FAQ"),re(),ce(37,"."),re(),ee(38,"div",11),ce(39,"21:00"),re(),ee(40,"div",12),ce(41,"Music and live artists."),re(),ee(42,"div",11),ce(43,"02:00"),re(),ee(44,"div",12),ce(45,"The restaurant closes and we have to wrap up the party."),re()()()),2&r&&(tt(35),yt("routerLink","/FAQ"))},dependencies:[Gh],styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.headline[_ngcontent-%COMP%]{display:flex;justify-content:center;background-color:#96a498;color:#fff;font-size:22px}.schedule-container[_ngcontent-%COMP%]{font-size:16px}.grid-system[_ngcontent-%COMP%]{display:grid;grid-template-columns:10% auto;grid-template-rows:auto;margin:2em}.left-column[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:2em}.right-column[_ngcontent-%COMP%]{padding-left:2em;margin-bottom:2em;margin-right:15%}.right-column[_ngcontent-%COMP%]:last-child{margin-bottom:0}a[_ngcontent-%COMP%]{text-decoration:none;color:#00f}.schedule-container[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{font-size:20px}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}.schedule-container[_ngcontent-%COMP%]{font-size:14px}.schedule-container[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}.schedule-container[_ngcontent-%COMP%]{font-size:12px}.schedule-container[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}.schedule-container[_ngcontent-%COMP%]{font-size:10px}.schedule-container[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}.schedule-container[_ngcontent-%COMP%]{font-size:8px}.schedule-container[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{font-size:12px}}"]})}}return n})();class ry{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const hi={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}})()},aN=n=>n?"string"==typeof n?{publicKey:n}:"[object Object]"===n.toString()?n:{}:{},lq=function(){var n=(0,J.A)(function*(e,t,r={}){const i=yield fetch(hi.origin+e,{method:"POST",headers:r,body:t}),s=yield i.text(),o=new ry(i.status,s);if(i.ok)return o;throw o});return function(t,r){return n.apply(this,arguments)}}(),cq=(n,e,t)=>{if(!n||"string"!=typeof n)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||"string"!=typeof e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||"string"!=typeof t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},uq=n=>n.webdriver||!n.languages||0===n.languages.length,dq=()=>new ry(451,"Unavailable For Headless Browser"),hq=(n,e)=>{if((n=>!n.list?.length||!n.watchVariable)(n))return!1;((n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if("string"!=typeof e)throw"The BlockList watchVariable has to be a string"})(n.list,n.watchVariable);const t=((n,e)=>n instanceof FormData?n.get(e):n[e])(e,n.watchVariable);return"string"==typeof t&&n.list.includes(t)},fq=()=>new ry(403,"Forbidden"),y_e=function(){var n=(0,J.A)(function*(e,t,r){const i=Number((yield r.get(e))||0);return t-Date.now()+i});return function(t,r,i){return n.apply(this,arguments)}}(),pq=function(){var n=(0,J.A)(function*(e,t,r){if(!t.throttle||!r)return!1;((n,e)=>{if("number"!=typeof n||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&"string"!=typeof e)throw"The LimitRate ID has to be a non-empty string"})(t.throttle,t.id);const i=t.id||e;return(yield y_e(i,t.throttle,r))>0||(yield r.set(i,Date.now().toString()),!1)});return function(t,r,i){return n.apply(this,arguments)}}(),gq=()=>new ry(429,"Too Many Requests"),w_e={init:(n,e="https://api.emailjs.com")=>{if(!n)return;const t=aN(n);hi.publicKey=t.publicKey,hi.blockHeadless=t.blockHeadless,hi.storageProvider=t.storageProvider,hi.blockList=t.blockList,hi.limitRate=t.limitRate,hi.origin=t.origin||e},send:function(){var n=(0,J.A)(function*(e,t,r,i){const s=aN(i),o=s.publicKey||hi.publicKey,l=s.storageProvider||hi.storageProvider,c={...hi.blockList,...s.blockList},d={...hi.limitRate,...s.limitRate};return(s.blockHeadless||hi.blockHeadless)&&uq(navigator)?Promise.reject(dq()):(cq(o,e,t),(n=>{if(n&&"[object Object]"!==n.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"})(r),r&&hq(c,r)?Promise.reject(fq()):(yield pq(location.pathname,d,l))?Promise.reject(gq()):lq("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:e,template_id:t,template_params:r}),{"Content-type":"application/json"}))});return function(t,r,i,s){return n.apply(this,arguments)}}(),sendForm:function(){var n=(0,J.A)(function*(e,t,r,i){const s=aN(i),o=s.publicKey||hi.publicKey,l=hi.storageProvider||s.storageProvider,c={...hi.blockList,...s.blockList},d={...hi.limitRate,...s.limitRate};if((s.blockHeadless||hi.blockHeadless)&&uq(navigator))return Promise.reject(dq());const p=(n=>"string"==typeof n?document.querySelector(n):n)(r);cq(o,e,t),(n=>{if(!n||"FORM"!==n.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"})(p);const _=new FormData(p);return hq(c,_)?Promise.reject(fq()):(yield pq(location.pathname,d,l))?Promise.reject(gq()):(_.append("lib_version","4.4.1"),_.append("service_id",e),_.append("template_id",t),_.append("user_id",o),lq("/api/v1.0/email/send-form",_))});return function(t,r,i,s){return n.apply(this,arguments)}}(),EmailJSResponseStatus:ry};let C_e=(()=>{class n{constructor(){}sendEmail(t){w_e.send("service_s83ys0o","template_2mis1j9",{...t},"e7npe2TO5rF4cCeHS").then(r=>{console.log("Email sent succesfully",r)},r=>{console.error("Error sending email",r)})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function T_e(n,e){1&n&&(ee(0,"div",10),ce(1,"E-mail has been sent!"),re())}function b_e(n,e){1&n&&(ee(0,"div",23),ce(1,"Name missing"),re())}function A_e(n,e){1&n&&(ee(0,"div",23),ce(1,"E-mail missing"),re())}function S_e(n,e){1&n&&(ee(0,"div",23),ce(1,"Invalid e-mail"),re())}function D_e(n,e){1&n&&(ee(0,"div",23),ce(1,"No message"),re())}function x_e(n,e){if(1&n){const t=Qo();ee(0,"form",11,12),$t("ngSubmit",function(){return ur(t),dr(An().send())}),ee(2,"div",13)(3,"label",14),ce(4,"Name:"),re(),ee(5,"input",15),$t("ngModelChange",function(i){return ur(t),dr(An().form.name=i)}),re(),qr(6,b_e,2,0,"div",16),re(),ee(7,"div",17)(8,"label",14),ce(9,"E-mail:"),re(),ee(10,"input",18),$t("ngModelChange",function(i){return ur(t),dr(An().form.email=i)}),re(),qr(11,A_e,2,0,"div",16),qr(12,S_e,2,0,"div",16),re(),ee(13,"div",19)(14,"label",14),ce(15,"Message:"),re(),ee(16,"textarea",20),$t("ngModelChange",function(i){return ur(t),dr(An().form.message=i)}),re(),qr(17,D_e,2,0,"div",16),ee(18,"div",21)(19,"button",22),ce(20,"SEND"),re()()()()}if(2&n){const t=An();tt(5),yt("ngModel",t.form.name),tt(1),yt("ngIf",t.isNameMissing&&t.isFormSubmitted),tt(4),yt("ngModel",t.form.email),tt(1),yt("ngIf",t.isEmailMissing&&t.isFormSubmitted),tt(1),yt("ngIf",t.isEmailIncorrect&&t.isFormSubmitted),tt(4),yt("ngModel",t.form.message),tt(1),yt("ngIf",t.isMessageMissing&&t.isFormSubmitted)}}let R_e=(()=>{class n{constructor(t){this.emailService=t,this.form={name:"",email:"",message:""},this.isFormSubmitted=!1,this.isFormAccepted=!1}send(){this.isNameMissing=!1,this.isEmailMissing=!1,this.isEmailIncorrect=!1,this.isMessageMissing=!1,this.isFormSubmitted=!0;try{this.validateFormData(),this.emailService.sendEmail(this.form),this.acknowledgeSubmission()}catch{console.log("Validation failed.")}}validateFormData(){this.validateName(),this.validateEmail(),this.validateMessage()}validateName(){if(this.form.name.trim().length<1&&this.isFormSubmitted)throw this.isNameMissing=!0,Error}validateEmail(){if(!this.form.email&&this.isFormSubmitted)throw this.isEmailMissing=!0,Error;if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(this.form.email)&&this.isFormSubmitted)throw this.isEmailIncorrect=!0,Error}validateMessage(){if(this.form.message.trim().length<1&&this.isFormSubmitted)throw this.isMessageMissing=!0,Error}acknowledgeSubmission(){this.isFormAccepted=!0}static{this.\u0275fac=function(r){return new(r||n)(ve(C_e))}}static{this.\u0275cmp=ni({type:n,selectors:[["app-contact"]],decls:12,vars:2,consts:[[1,"page-headline"],[1,"contact-container"],[1,"left-column"],[1,"contact-text"],[1,"content"],[1,"image-container"],["src","assets/images/ratio1-1/picture16-1_1.jpg"],[1,"right-column"],["class","confirmation",4,"ngIf"],["class","form",3,"ngSubmit",4,"ngIf"],[1,"confirmation"],[1,"form",3,"ngSubmit"],["contactForm","ngForm"],[1,"name-field"],[1,"label"],["type","text","name","name","placeholder","Name",1,"input-field",3,"ngModel","ngModelChange"],["class","input-field-error",4,"ngIf"],[1,"email-field"],["type","email","name","email","placeholder","E-mail",1,"input-field",3,"ngModel","ngModelChange"],[1,"message-field"],["name","message",1,"input-textarea",3,"ngModel","ngModelChange"],[1,"send-button-container"],["type","submit",1,"send-button"],[1,"input-field-error"]],template:function(r,i){1&r&&(ee(0,"div",0),ce(1,"CONTACT"),re(),ee(2,"div",1)(3,"div",2)(4,"div",3)(5,"p",4),ce(6,"Reach out to us with any question, big or small. Use this form, call us or send a private text message. The toastmaster is also reachable through this form."),re()(),ee(7,"div",5),kr(8,"img",6),re()(),ee(9,"div",7),qr(10,T_e,2,0,"div",8),qr(11,x_e,21,7,"form",9),re()()),2&r&&(tt(10),yt("ngIf",i.isFormAccepted),tt(1),yt("ngIf",!i.isFormAccepted))},dependencies:[om,rP,g_,WR,GR,uC,E_],styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.contact-container[_ngcontent-%COMP%]{margin:2em;display:grid;grid-template-columns:3fr 7fr;column-gap:3%}.left-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh}.contact-text[_ngcontent-%COMP%]{display:flex;justify-content:center}.content[_ngcontent-%COMP%]{position:relative;font-size:16px}.content[_ngcontent-%COMP%]:first-letter{font-size:40px;float:left;margin-right:.12em;line-height:1}.image-container[_ngcontent-%COMP%]{display:flex;justify-content:center}img[_ngcontent-%COMP%]{margin-top:2em;width:70%;height:auto;opacity:.9;border:10px solid white;box-shadow:0 4px 6px #0003;transform:rotate(-3deg)}.right-column[_ngcontent-%COMP%]{margin-left:1em;padding-left:3em;border-left:1px solid rgb(150,164,152)}.name-field[_ngcontent-%COMP%], .email-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;width:100%}.message-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.label[_ngcontent-%COMP%]{font-size:16px;color:#616060;margin-top:1em;margin-bottom:.5em}.input-field[_ngcontent-%COMP%]{margin-bottom:.5em;width:60%;height:30px;font-size:16px;font-family:Lora,cursive;border:none;border-bottom:.5px solid black;color:#616060;background-color:#fcfbf4}.input-field-error[_ngcontent-%COMP%]{color:red;font-size:14px}.input-field[_ngcontent-%COMP%]::placeholder{font-family:Lora,cursive;font-size:14px}.input-textarea[_ngcontent-%COMP%]{font-size:14px;line-height:14px;width:60%;height:112px;font-family:Lora,cursive}.send-button[_ngcontent-%COMP%]{display:flex;justify-content:center;border-radius:5px;background-color:#96a498;color:#fff;border:none;font-family:Lora,cursive;font-size:14px;width:auto;height:auto;padding:.3em .7em;margin-top:.5em;margin-bottom:3em}.send-button[_ngcontent-%COMP%]:hover{cursor:pointer}.confirmation[_ngcontent-%COMP%]{margin-top:1em;font-size:16px}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}.contact-container[_ngcontent-%COMP%]{margin:1.6em;column-gap:2%}.content[_ngcontent-%COMP%]{font-size:14px}.content[_ngcontent-%COMP%]:first-letter{font-size:35px}img[_ngcontent-%COMP%]{margin-top:1.6em;border:8px solid white}.right-column[_ngcontent-%COMP%]{margin-left:.8em;padding-left:2.5em}.label[_ngcontent-%COMP%]{font-size:14px;margin-bottom:.4em}.input-field[_ngcontent-%COMP%]{font-size:14px;height:26px;margin-bottom:.4em}.input-field[_ngcontent-%COMP%]::placeholder{font-size:12px}.input-textarea[_ngcontent-%COMP%]{font-size:12px;height:96px}.send-button[_ngcontent-%COMP%]{font-size:12px}.confirmation[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}.contact-container[_ngcontent-%COMP%]{margin:1.2em;column-gap:1.5%}.content[_ngcontent-%COMP%]{font-size:12px}.content[_ngcontent-%COMP%]:first-letter{font-size:30px}img[_ngcontent-%COMP%]{margin-top:1.2em;border:6px solid white}.right-column[_ngcontent-%COMP%]{margin-left:.6em;padding-left:2em}.label[_ngcontent-%COMP%]{font-size:12px;margin-bottom:.3em}.input-field[_ngcontent-%COMP%]{font-size:12px;height:22px;margin-bottom:.3em}.input-field[_ngcontent-%COMP%]::placeholder{font-size:10px}.input-textarea[_ngcontent-%COMP%]{font-size:12px;height:80px}.send-button[_ngcontent-%COMP%]{border-radius:4px;font-size:10px;margin-top:.3em;padding:.3em .6em}.confirmation[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}.contact-container[_ngcontent-%COMP%]{margin:.8em;column-gap:1%}.content[_ngcontent-%COMP%]{font-size:10px}.content[_ngcontent-%COMP%]:first-letter{font-size:25px}img[_ngcontent-%COMP%]{margin-top:.8em;border:6px solid white}.right-column[_ngcontent-%COMP%]{margin-left:.4em;padding-left:1.5em}.label[_ngcontent-%COMP%]{font-size:10px;margin-bottom:.2em}.input-field[_ngcontent-%COMP%]{font-size:10px;height:18px;margin-bottom:.2em}.input-field[_ngcontent-%COMP%]::placeholder{font-size:9px}.input-textarea[_ngcontent-%COMP%]{font-size:10px;height:64px}.send-button[_ngcontent-%COMP%]{border-radius:3px;font-size:9px;margin-top:.2em;padding:.2em .5em}.confirmation[_ngcontent-%COMP%]{font-size:10px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}.contact-container[_ngcontent-%COMP%]{margin:.4em;column-gap:.5%}.content[_ngcontent-%COMP%]{font-size:8px}.content[_ngcontent-%COMP%]:first-letter{font-size:20px}img[_ngcontent-%COMP%]{margin-top:.4em;width:60%;border:4px solid white}.right-column[_ngcontent-%COMP%]{margin-left:.2em;padding-left:1em}.label[_ngcontent-%COMP%]{font-size:8px;margin-bottom:.1em}.input-field[_ngcontent-%COMP%]{font-size:8px;height:14px;margin-bottom:.1em}.input-field[_ngcontent-%COMP%]::placeholder{font-size:7px}.input-textarea[_ngcontent-%COMP%]{font-size:8px;height:48px}.send-button[_ngcontent-%COMP%]{border-radius:2px;font-size:7px;margin-top:0;padding:.2em .5em}.confirmation[_ngcontent-%COMP%]{font-size:8px}}"]})}}return n})(),P_e=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ni({type:n,selectors:[["app-error"]],decls:5,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(ee(0,"div",0)(1,"h1"),ce(2,"404: Page Not Found"),re(),ee(3,"p"),ce(4,"The page you are looking for cannot be found or you do not have access to this page."),re()())},styles:[".container[_ngcontent-%COMP%]{text-align:center;margin:30px 0}"]})}}return n})();const mq="@firebase/database";let lN="";class M_e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Vr(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:T_(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class N_e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return ua(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const vq=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new M_e(e)}}catch{}return new N_e},sd=vq("localStorage"),cN=vq("sessionStorage"),np=new wP("@firebase/database"),Eq=function(){let n=1;return function(){return n++}}(),Iq=function(n){const e=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,Te(r<n.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(n.charCodeAt(r)-56320)}i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):i<65536?(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e}(n),t=new Mde;t.update(e);const r=t.digest();return gC.encodeByteArray(r)},iy=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=iy.apply(null,r):e+="object"==typeof r?Vr(r):r,e+=" "}return e};let od=null,wq=!0;const Zr=function(...n){if(!0===wq&&(wq=!1,null===od&&!0===cN.get("logging_enabled")&&function(n,e){Te(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(np.logLevel=Rn.VERBOSE,od=np.log.bind(np),e&&cN.set("logging_enabled",!0)):"function"==typeof n?od=n:(od=null,cN.remove("logging_enabled"))}(!0)),od){const e=iy.apply(null,n);od(e)}},sy=function(n){return function(...e){Zr(n,...e)}},uN=function(...n){const e="FIREBASE INTERNAL ERROR: "+iy(...n);np.error(e)},ma=function(...n){const e=`FIREBASE FATAL ERROR: ${iy(...n)}`;throw np.error(e),new Error(e)},xi=function(...n){const e="FIREBASE WARNING: "+iy(...n);np.warn(e)},f0=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},vc="[MIN_NAME]",al="[MAX_NAME]",ad=function(n,e){if(n===e)return 0;if(n===vc||e===al)return-1;if(e===vc||n===al)return 1;{const t=Aq(n),r=Aq(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},F_e=function(n,e){return n===e?0:n<e?-1:1},oy=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Vr(e))},dN=function(n){if("object"!=typeof n||null===n)return Vr(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=Vr(e[r]),t+=":",t+=dN(n[e[r]]);return t+="}",t},Tq=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ei(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const bq=function(n){Te(!f0(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const d=c.join("");let p="";for(l=0;l<64;l+=8){let _=parseInt(d.substr(l,8),2).toString(16);1===_.length&&(_="0"+_),p+=_}return p.toLowerCase()},B_e=new RegExp("^-?(0*)\\d{1,10}$"),Aq=function(n){if(B_e.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},rp=function(n){try{n()}catch(e){setTimeout(()=>{throw xi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},ay=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class z_e{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){xi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class W_e{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Zr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xi(e)}}let ly=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Pq=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Oq="websocket",kq="long_polling";class fN{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sd.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&sd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Fq(n,e,t){let r;if(Te("string"==typeof e,"typeof type must == string"),Te("object"==typeof t,"typeof params must == object"),e===Oq)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==kq)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function G_e(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ei(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class q_e{constructor(){this.counters_={}}incrementCounter(e,t=1){ua(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return pde(this.counters_)}}const pN={},gN={};function mN(n){const e=n.toString();return pN[e]||(pN[e]=new q_e),pN[e]}class Q_e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&rp(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ec{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=sy(e),this.stats_=mN(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),Fq(t,kq,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Q_e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _N((...s)=>{const[o,a,l,c,d]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Pq.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ec.forceAllow_=!0}static forceDisallow(){Ec.forceDisallow_=!0}static isAvailable(){return!(!Ec.forceAllow_&&(Ec.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Vr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=CW(t),i=Tq(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Vr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class _N{constructor(e,t,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Eq(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=_N.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Zr("frame writing exception"),a.stack&&Zr(a.stack),Zr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Zr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Zr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let g0=null;typeof MozWebSocket<"u"?g0=MozWebSocket:typeof WebSocket<"u"&&(g0=WebSocket);let ip=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=sy(this.connId),this.stats_=mN(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&Pq.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),Fq(t,Oq,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sd.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new g0(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==g0&&!n.forceDisallow_}static previouslyFailed(){return sd.isInMemoryStorage||!0===sd.get("previous_websocket_failure")}markConnectionHealthy(){sd.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=T_(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Te(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=Vr(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Tq(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Hq=(()=>{class n{static get ALL_TRANSPORTS(){return[Ec,ip]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const r=ip&&ip.isAvailable();let i=r&&!ip.previouslyFailed();if(t.webSocketOnly&&(r||xi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ip];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Yq{constructor(e,t,r,i,s,o,a,l,c,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=sy("c:"+this.id+":"),this.transportManager_=new Hq(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ay(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=oy("t",e),r=oy("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=oy("t",e),r=oy("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=oy("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?uN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):uN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&xi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),ay(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ay(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Jq{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Xq{constructor(e){this.allowedEvents_=e,this.listeners_={},Te(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){Te(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class m0 extends Xq{static getInstance(){return new m0}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!SW()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Te("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class on{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Qt(){return new on("")}function Tt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ic(n){return n.pieces_.length-n.pieceNum_}function Cn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new on(n.pieces_,e)}function vN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function cy(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function t7(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new on(e,0)}function tr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof on)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new on(t,0)}function bt(n){return n.pieceNum_>=n.pieces_.length}function Ji(n,e){const t=Tt(n),r=Tt(e);if(null===t)return e;if(t===r)return Ji(Cn(n),Cn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function _ye(n,e){const t=cy(n,0),r=cy(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=ad(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function EN(n,e){if(Ic(n)!==Ic(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function no(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ic(n)>Ic(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class yye{constructor(e,t){this.errorPrefix_=t,this.parts_=cy(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=IC(this.parts_[r]);n7(this)}}function n7(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ld(n))}function ld(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class IN extends Xq{static getInstance(){return new IN}constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return Te("visible"===e,"Unknown event type: "+e),[this.visible_]}}const uy=1e3;let y0,cd=(()=>{class n extends Jq{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=sy("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=uy,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");IN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&m0.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Vr(o)),Te(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new ca,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),Te(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Te(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,d=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==d&&this.removeListen_(i,s),t.onComplete&&t.onComplete(d,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&ua(t,"w")){const i=Bf(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();xi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=vC(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=function(n){const t=vC(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),Te(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Vr(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):uN("Unrecognized action received from server: "+Vr(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Te(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=uy,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=uy,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=uy),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,J.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const d=function(){c?c.close():(l=!0,s())};t.realtime_={close:d,sendRequest:function(v){Te(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(v)}};const _=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[v,b]=yield Promise.all([t.authTokenProvider_.getToken(_),t.appCheckTokenProvider_.getToken(_)]);l?Zr("getToken() completed but was canceled"):(Zr("getToken() completed. Creating connection."),t.authToken_=v&&v.accessToken,t.appCheckToken_=b&&b.token,c=new Yq(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,D=>{xi(D+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(v){t.log_("Failed to get token: "+v),l||(t.repoInfo_.nodeAdmin&&xi(v),d())}}})()}interrupt(t){Zr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Zr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],DW(this.interruptReasons_)&&(this.reconnectDelay_=uy,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>dN(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new on(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Zr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Zr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+lN.replace(/\./g,"-")]=1,SW()?t["framework.cordova"]=1:function Tde(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=m0.getInstance().currentlyOnline();return DW(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Nt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Nt(e,t)}}class _0{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Nt(vc,e),i=new Nt(vc,t);return 0!==this.compare(r,i)}minPost(){return Nt.MIN}}class s7 extends _0{static get __EMPTY_NODE(){return y0}static set __EMPTY_NODE(e){y0=e}compare(e,t){return ad(e.name,t.name)}isDefinedOn(e){throw Uf("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Nt.MIN}maxPost(){return new Nt(al,y0)}makePost(e,t){return Te("string"==typeof e,"KeyIndex indexValue must always be a string."),new Nt(e,y0)}toString(){return".key"}}const _a=new s7;class v0{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let CN,Ao=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??fs.EMPTY_NODE,this.right=o??fs.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return fs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return fs.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class fs{constructor(e,t=fs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new fs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ao.BLACK,null,null))}remove(e){return new fs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ao.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new v0(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new v0(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new v0(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new v0(this.root_,null,this.comparator_,!0,e)}}function Aye(n,e){return ad(n.name,e.name)}function wN(n,e){return ad(n,e)}fs.EMPTY_NODE=new class bye{copy(e,t,r,i,s){return this}insert(e,t,r){return new Ao(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const o7=function(n){return"number"==typeof n?"number:"+bq(n):"string:"+n},a7=function(n){if(n.isLeafNode()){const e=n.val();Te("string"==typeof e||"number"==typeof e||"object"==typeof e&&ua(e,".sv"),"Priority must be a string or number.")}else Te(n===CN||n.isEmpty(),"priority of unexpected type.");Te(n===CN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let l7,c7,u7,sp=(()=>{class n{static set __childrenNodeConstructor(t){l7=t}static get __childrenNodeConstructor(){return l7}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,Te(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),a7(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return bt(t)?this:".priority"===Tt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Tt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:(Te(".priority"!==i||1===Ic(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Cn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+o7(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?bq(this.value_):this.value_,this.lazyHash_=Iq(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(Te(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return Te(s>=0,"Unknown leaf type: "+r),Te(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Nn=new class Rye extends _0{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?ad(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Nt.MIN}maxPost(){return new Nt(al,new sp("[PRIORITY-POST]",u7))}makePost(e,t){const r=c7(e);return new Nt(t,new sp("[PRIORITY-POST]",r))}toString(){return".priority"}},Pye=Math.log(2);class Mye{constructor(e){this.count=parseInt(Math.log(e+1)/Pye,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const E0=function(n,e,t,r){n.sort(e);const i=function(l,c){const d=c-l;let p,_;if(0===d)return null;if(1===d)return p=n[l],_=t?t(p):p,new Ao(_,p.node,Ao.BLACK,null,null);{const v=parseInt(d/2,10)+l,b=i(l,v),D=i(v+1,c);return p=n[v],_=t?t(p):p,new Ao(_,p.node,Ao.BLACK,b,D)}},a=function(l){let c=null,d=null,p=n.length;const _=function(b,D){const P=p-b,H=p;p-=b;const V=i(P+1,H),Y=n[P],ue=t?t(Y):Y;v(new Ao(ue,Y.node,D,null,V))},v=function(b){c?(c.left=b,c=b):(d=b,c=b)};for(let b=0;b<l.count;++b){const D=l.nextBitIsOne(),P=Math.pow(2,l.count-(b+1));D?_(P,Ao.BLACK):(_(P,Ao.BLACK),_(P,Ao.RED))}return d}(new Mye(n.length));return new fs(r||e,a)};let TN;const op={};class ll{static get Default(){return Te(op&&Nn,"ChildrenNode.ts has not been loaded"),TN=TN||new ll({".priority":op},{".priority":Nn}),TN}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Bf(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof fs?t:null}hasIndex(e){return ua(this.indexSet_,e.toString())}addIndex(e,t){Te(e!==_a,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Nt.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?E0(r,e.getCompare()):op;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new ll(d,c)}addToIndexes(e,t){const r=EC(this.indexes_,(i,s)=>{const o=Bf(this.indexSet_,s);if(Te(o,"Missing index implementation for "+s),i===op){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(Nt.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),E0(a,o.getCompare())}return op}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new Nt(e.name,a))),l.insert(e,e.node)}});return new ll(r,this.indexSet_)}removeFromIndexes(e,t){const r=EC(this.indexes_,i=>{if(i===op)return i;{const s=t.get(e.name);return s?i.remove(new Nt(e.name,s)):i}});return new ll(r,this.indexSet_)}}let dy,ht=(()=>{class n{static get EMPTY_NODE(){return dy||(dy=new n(new fs(wN),null,ll.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&a7(this.priorityNode_),this.children_.isEmpty()&&Te(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||dy}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?dy:r}}getChild(t){const r=Tt(t);return null===r?this:this.getImmediateChild(r).getChild(Cn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if(Te(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Nt(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?dy:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=Tt(t);if(null===i)return r;{Te(".priority"!==Tt(t)||1===Ic(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Cn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(Nn,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+o7(this.getPriority().val())+":"),this.forEachChild(Nn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":Iq(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new Nt(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Nt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Nt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Nt.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Nt.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===hy?-1:0}withIndex(t){if(t===_a||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===_a||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Nn),s=r.getIterator(Nn);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===_a?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const hy=new class Nye extends ht{constructor(){super(new fs(wN),ht.EMPTY_NODE,ll.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ht.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Nt,{MIN:{value:new Nt(vc,ht.EMPTY_NODE)},MAX:{value:new Nt(al,hy)}}),s7.__EMPTY_NODE=ht.EMPTY_NODE,sp.__childrenNodeConstructor=ht,function Sye(n){CN=n}(hy),function xye(n){u7=n}(hy);const Oye=!0;function or(n,e=null){if(null===n)return ht.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),Te(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new sp(n,or(e));if(n instanceof Array||!Oye){let t=ht.EMPTY_NODE;return ei(n,(r,i)=>{if(ua(n,r)&&"."!==r.substring(0,1)){const s=or(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(or(e))}{const t=[];let r=!1;if(ei(n,(o,a)=>{if("."!==o.substring(0,1)){const l=or(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new Nt(o,l)))}}),0===t.length)return ht.EMPTY_NODE;const s=E0(t,Aye,o=>o.name,wN);if(r){const o=E0(t,Nn.getCompare());return new ht(s,or(e),new ll({".priority":o},{".priority":Nn}))}return new ht(s,or(e),ll.Default)}}!function Dye(n){c7=n}(or);class bN extends _0{constructor(e){super(),this.indexPath_=e,Te(!bt(e)&&".priority"!==Tt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?ad(e.name,t.name):s}makePost(e,t){const r=or(e),i=ht.EMPTY_NODE.updateChild(this.indexPath_,r);return new Nt(t,i)}maxPost(){const e=ht.EMPTY_NODE.updateChild(this.indexPath_,hy);return new Nt(al,e)}toString(){return cy(this.indexPath_,0).join("/")}}const AN=new class kye extends _0{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?ad(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Nt.MIN}maxPost(){return Nt.MAX}makePost(e,t){const r=or(e);return new Nt(t,r)}toString(){return".value"}};function d7(n){return{type:"value",snapshotNode:n}}function ap(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function fy(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function py(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class SN{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){Te(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(fy(t,a)):Te(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ap(t,r)):o.trackChildChange(py(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Nn,(i,s)=>{t.hasChild(i)||r.trackChildChange(fy(i,s))}),t.isLeafNode()||t.forEachChild(Nn,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(py(i,s,o))}else r.trackChildChange(ap(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ht.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class gy{constructor(e){this.indexedFilter_=new SN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=gy.getStartPost_(e),this.endPost_=gy.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new Nt(t,r))||(r=ht.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=ht.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(ht.EMPTY_NODE);const s=this;return t.forEachChild(Nn,(o,a)=>{s.matches(new Nt(o,a))||(i=i.updateImmediateChild(o,ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Lye{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new gy(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new Nt(t,r))||(r=ht.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=ht.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(ht.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const p=this.index_.getCompare();o=(_,v)=>p(v,_)}else o=this.index_.getCompare();const a=e;Te(a.numChildren()===this.limit_,"");const l=new Nt(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(t)){const p=a.getImmediateChild(t);let _=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=_&&(_.name===t||a.hasChild(_.name));)_=i.getChildAfterChild(this.index_,_,this.reverse_);const v=null==_?1:o(_,l);if(d&&!r.isEmpty()&&v>=0)return s?.trackChildChange(py(t,r,p)),a.updateImmediateChild(t,r);{s?.trackChildChange(fy(t,p));const D=a.updateImmediateChild(t,ht.EMPTY_NODE);return null!=_&&this.rangedFilter_.matches(_)?(s?.trackChildChange(ap(_.name,_.node)),D.updateImmediateChild(_.name,_.node)):D}}return r.isEmpty()?e:d&&o(c,l)>=0?(null!=s&&(s.trackChildChange(fy(c.name,c.node)),s.trackChildChange(ap(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,ht.EMPTY_NODE)):e}}class DN{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Te(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Te(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vc}hasEnd(){return this.endSet_}getIndexEndValue(){return Te(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Te(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:al}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Te(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Nn}copy(){const e=new DN;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function h7(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Nn?t="$priority":n.index_===AN?t="$value":n.index_===_a?t="$key":(Te(n.index_ instanceof bN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Vr(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=Vr(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Vr(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Vr(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Vr(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function f7(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Nn&&(e.i=n.index_.toString()),e}class w0 extends Jq{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Te(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=sy("p:rest:"),this.listens_={}}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=w0.getListenId_(e,r),a={};this.listens_[o]=a;const l=h7(e._queryParams);this.restRequest_(s+".json",l,(c,d)=>{let p=d;if(404===c&&(p=null,c=null),null===c&&this.onDataUpdate_(s,p,!1,r),Bf(this.listens_,o)===a){let _;_=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(_,null)}})}unlisten(e,t){const r=w0.getListenId_(e,t);delete this.listens_[r]}get(e){const t=h7(e._queryParams),r=e._path.toString(),i=new ca;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function Pde(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=T_(a.responseText)}catch{xi("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&xi("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class Hye{constructor(){this.rootNode_=ht.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function C0(){return{value:null,children:new Map}}function lp(n,e,t){if(bt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Tt(e);n.children.has(r)||n.children.set(r,C0()),lp(n.children.get(r),e=Cn(e),t)}}function MN(n,e,t){null!==n.value?t(e,n.value):function zye(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{MN(i,new on(e.toString()+"/"+r),t)})}class Wye{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ei(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Kye{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Wye(e);const r=1e4+2e4*Math.random();ay(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ei(e,(i,s)=>{s>0&&ua(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),ay(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ya=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(ya||{});function kN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class T0{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ya.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(bt(this.path)){if(null!=this.affectedTree.value)return Te(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new on(e));return new T0(Qt(),t,this.revert)}}return Te(Tt(this.path)===e,"operationForChild called for unrelated child."),new T0(Cn(this.path),this.affectedTree,this.revert)}}class my{constructor(e,t){this.source=e,this.path=t,this.type=ya.LISTEN_COMPLETE}operationForChild(e){return bt(this.path)?new my(this.source,Qt()):new my(this.source,Cn(this.path))}}class ud{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ya.OVERWRITE}operationForChild(e){return bt(this.path)?new ud(this.source,Qt(),this.snap.getImmediateChild(e)):new ud(this.source,Cn(this.path),this.snap)}}class cp{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ya.MERGE}operationForChild(e){if(bt(this.path)){const t=this.children.subtree(new on(e));return t.isEmpty()?null:t.value?new ud(this.source,Qt(),t.value):new cp(this.source,Qt(),t)}return Te(Tt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new cp(this.source,Cn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class wc{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(bt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Tt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Qye{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function _y(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function Xye(n,e,t){if(null==e.childName||null==t.childName)throw Uf("Should only compare child_ events.");const r=new Nt(e.childName,e.snapshotNode),i=new Nt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function Jye(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function b0(n,e){return{eventCache:n,serverCache:e}}function yy(n,e,t,r){return b0(new wc(e,t,r),n.serverCache)}function g7(n,e,t,r){return b0(n.eventCache,new wc(e,t,r))}function A0(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function dd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let FN;class On{static fromObject(e){let t=new On(null);return ei(e,(r,i)=>{t=t.set(new on(r),i)}),t}constructor(e,t=(()=>(FN||(FN=new fs(F_e)),FN))()){this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Qt(),value:this.value};if(bt(e))return null;{const r=Tt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Cn(e),t);return null!=s?{path:tr(new on(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(bt(e))return this;{const t=Tt(e),r=this.children.get(t);return null!==r?r.subtree(Cn(e)):new On(null)}}set(e,t){if(bt(e))return new On(t,this.children);{const r=Tt(e),s=(this.children.get(r)||new On(null)).set(Cn(e),t),o=this.children.insert(r,s);return new On(this.value,o)}}remove(e){if(bt(e))return this.children.isEmpty()?new On(null):new On(null,this.children);{const t=Tt(e),r=this.children.get(t);if(r){const i=r.remove(Cn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new On(null):new On(this.value,s)}return this}}get(e){if(bt(e))return this.value;{const t=Tt(e),r=this.children.get(t);return r?r.get(Cn(e)):null}}setTree(e,t){if(bt(e))return t;{const r=Tt(e),s=(this.children.get(r)||new On(null)).setTree(Cn(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new On(this.value,o)}}fold(e){return this.fold_(Qt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(tr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Qt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(bt(e))return null;{const s=Tt(e),o=this.children.get(s);return o?o.findOnPath_(Cn(e),tr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Qt(),t)}foreachOnPath_(e,t,r){if(bt(e))return this;{this.value&&r(t,this.value);const i=Tt(e),s=this.children.get(i);return s?s.foreachOnPath_(Cn(e),tr(t,i),r):new On(null)}}foreach(e){this.foreach_(Qt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(tr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class So{constructor(e){this.writeTree_=e}static empty(){return new So(new On(null))}}function vy(n,e,t){if(bt(e))return new So(new On(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=Ji(i,e);return s=s.updateChild(o,t),new So(n.writeTree_.set(i,s))}{const i=new On(t),s=n.writeTree_.setTree(e,i);return new So(s)}}}function LN(n,e,t){let r=n;return ei(t,(i,s)=>{r=vy(r,tr(e,i),s)}),r}function m7(n,e){if(bt(e))return So.empty();{const t=n.writeTree_.setTree(e,new On(null));return new So(t)}}function VN(n,e){return null!=hd(n,e)}function hd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ji(t.path,e)):null}function _7(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Nn,(r,i)=>{e.push(new Nt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Nt(r,i.value))}),e}function Cc(n,e){if(bt(e))return n;{const t=hd(n,e);return new So(null!=t?new On(t):n.writeTree_.subtree(e))}}function UN(n){return n.writeTree_.isEmpty()}function up(n,e){return y7(Qt(),n.writeTree_,e)}function y7(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(Te(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=y7(tr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(tr(n,".priority"),r)),t}}function S0(n,e){return C7(e,n)}function ive(n,e){if(n.snap)return no(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&no(tr(n.path,t),e))return!0;return!1}function ove(n){return n.visible}function v7(n,e,t){let r=So.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)no(t,o)?(a=Ji(t,o),r=vy(r,a,s.snap)):no(o,t)&&(a=Ji(o,t),r=vy(r,Qt(),s.snap.getChild(a)));else{if(!s.children)throw Uf("WriteRecord should have .snap or .children");if(no(t,o))a=Ji(t,o),r=LN(r,a,s.children);else if(no(o,t))if(a=Ji(o,t),bt(a))r=LN(r,Qt(),s.children);else{const l=Bf(s.children,Tt(a));if(l){const c=l.getChild(Cn(a));r=vy(r,Qt(),c)}}}}}return r}function E7(n,e,t,r,i){if(r||i){const s=Cc(n.visibleWrites,e);return!i&&UN(s)?t:i||null!=t||VN(s,Qt())?up(v7(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(no(c.path,e)||no(e,c.path))},e),t||ht.EMPTY_NODE):null}{const s=hd(n.visibleWrites,e);if(null!=s)return s;{const o=Cc(n.visibleWrites,e);return UN(o)?t:null!=t||VN(o,Qt())?up(o,t||ht.EMPTY_NODE):null}}}function D0(n,e,t,r){return E7(n.writeTree,n.treePath,e,t,r)}function BN(n,e){return function ave(n,e,t){let r=ht.EMPTY_NODE;const i=hd(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Nn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=Cc(n.visibleWrites,e);return t.forEachChild(Nn,(o,a)=>{const l=up(Cc(s,new on(o)),a);r=r.updateImmediateChild(o,l)}),_7(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return _7(Cc(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function I7(n,e,t,r){return function lve(n,e,t,r,i){Te(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=tr(e,t);if(VN(n.visibleWrites,s))return null;{const o=Cc(n.visibleWrites,s);return UN(o)?i.getChild(t):up(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function x0(n,e){return function uve(n,e){return hd(n.visibleWrites,e)}(n.writeTree,tr(n.treePath,e))}function jN(n,e,t){return function cve(n,e,t,r){const i=tr(e,t),s=hd(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?up(Cc(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function w7(n,e){return C7(tr(n.treePath,e),n.writeTree)}function C7(n,e){return{treePath:n,writeTree:e}}class pve{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;Te("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Te(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,py(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,fy(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,ap(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw Uf("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,py(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const T7=new class gve{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class $N{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new wc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:dd(this.viewCache_),s=function fve(n,e,t,r,i,s){return function dve(n,e,t,r,i,s,o){let a;const l=Cc(n.visibleWrites,e),c=hd(l,Qt());if(null!=c)a=c;else{if(null==t)return[];a=up(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const d=[],p=o.getCompare(),_=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let v=_.getNext();for(;v&&d.length<i;)0!==p(v,r)&&d.push(v),v=_.getNext();return d}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function b7(n,e,t,r,i,s){const o=e.eventCache;if(null!=x0(r,t))return e;{let a,l;if(bt(t))if(Te(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=dd(e),p=BN(r,c instanceof ht?c:ht.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{const c=D0(r,dd(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Tt(t);if(".priority"===c){Te(1===Ic(t),"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const p=I7(r,t,d,l);a=null!=p?n.filter.updatePriority(d,p):o.getNode()}else{const d=Cn(t);let p;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const _=I7(r,t,o.getNode(),l);p=null!=_?o.getNode().getImmediateChild(c).updateChild(d,_):o.getNode().getImmediateChild(c)}else p=jN(r,c,e.serverCache);a=null!=p?n.filter.updateChild(o.getNode(),c,p,d,i,s):o.getNode()}}return yy(e,a,o.isFullyInitialized()||bt(t),n.filter.filtersNodes())}}function R0(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const d=o?n.filter:n.filter.getIndexedFilter();if(bt(t))c=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const v=l.getNode().updateChild(t,r);c=d.updateFullNode(l.getNode(),v,null)}else{const v=Tt(t);if(!l.isCompleteForPath(t)&&Ic(t)>1)return e;const b=Cn(t),P=l.getNode().getImmediateChild(v).updateChild(b,r);c=".priority"===v?d.updatePriority(l.getNode(),P):d.updateChild(l.getNode(),v,P,b,T7,null)}const p=g7(e,c,l.isFullyInitialized()||bt(t),d.filtersNodes());return b7(n,p,t,i,new $N(i,p,s),a)}function HN(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const d=new $N(i,e,s);if(bt(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=yy(e,c,!0,n.filter.filtersNodes());else{const p=Tt(t);if(".priority"===p)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=yy(e,c,a.isFullyInitialized(),a.isFiltered());else{const _=Cn(t),v=a.getNode().getImmediateChild(p);let b;if(bt(_))b=r;else{const D=d.getCompleteChild(p);b=null!=D?".priority"===vN(_)&&D.getChild(t7(_)).isEmpty()?D:D.updateChild(_,r):ht.EMPTY_NODE}l=v.equals(b)?e:yy(e,n.filter.updateChild(a.getNode(),p,b,_,d,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function A7(n,e){return n.eventCache.isCompleteForChild(e)}function S7(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function zN(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=bt(t)?r:new On(null).setTree(t,r);const d=e.serverCache.getNode();return c.children.inorderTraversal((p,_)=>{if(d.hasChild(p)){const b=S7(0,e.serverCache.getNode().getImmediateChild(p),_);l=R0(n,l,new on(p),b,i,s,o,a)}}),c.children.inorderTraversal((p,_)=>{const v=!e.serverCache.isCompleteForChild(p)&&null===_.value;if(!d.hasChild(p)&&!v){const D=S7(0,e.serverCache.getNode().getImmediateChild(p),_);l=R0(n,l,new on(p),D,i,s,o,a)}}),l}class Tve{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new SN(r.getIndex()),s=function Vye(n){return n.loadsAllData()?new SN(n.getIndex()):n.hasLimit()?new Lye(n):new gy(n)}(r);this.processor_=function mve(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(ht.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(ht.EMPTY_NODE,a.getNode(),null),d=new wc(l,o.isFullyInitialized(),i.filtersNodes()),p=new wc(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=b0(p,d),this.eventGenerator_=new Qye(this.query_)}get query(){return this.query_}}function Sve(n,e){const t=dd(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!bt(e)&&!t.getImmediateChild(Tt(e)).isEmpty())?t.getChild(e):null}function D7(n){return 0===n.eventRegistrations_.length}function x7(n,e,t){const r=[];if(t){Te(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function R7(n,e,t,r){e.type===ya.MERGE&&null!==e.source.queryId&&(Te(dd(n.viewCache_),"We should always have a full cache before handling merges"),Te(A0(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function yve(n,e,t,r,i){const s=new pve;let o,a;if(t.type===ya.OVERWRITE){const c=t;c.source.fromUser?o=HN(n,e,c.path,c.snap,r,i,s):(Te(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!bt(c.path),o=R0(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===ya.MERGE){const c=t;c.source.fromUser?o=function Eve(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const d=tr(t,l);A7(e,Tt(d))&&(a=HN(n,a,d,c,i,s,o))}),r.foreach((l,c)=>{const d=tr(t,l);A7(e,Tt(d))||(a=HN(n,a,d,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):(Te(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=zN(n,e,c.path,c.children,r,i,a,s))}else if(t.type===ya.ACK_USER_WRITE){const c=t;o=c.revert?function Cve(n,e,t,r,i,s){let o;if(null!=x0(r,t))return e;{const a=new $N(r,e,i),l=e.eventCache.getNode();let c;if(bt(t)||".priority"===Tt(t)){let d;if(e.serverCache.isFullyInitialized())d=D0(r,dd(e));else{const p=e.serverCache.getNode();Te(p instanceof ht,"serverChildren would be complete if leaf node"),d=BN(r,p)}c=n.filter.updateFullNode(l,d,s)}else{const d=Tt(t);let p=jN(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=l.getImmediateChild(d)),c=null!=p?n.filter.updateChild(l,d,p,Cn(t),a,s):e.eventCache.getNode().hasChild(d)?n.filter.updateChild(l,d,ht.EMPTY_NODE,Cn(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=D0(r,dd(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=x0(r,Qt()),yy(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function Ive(n,e,t,r,i,s,o){if(null!=x0(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(bt(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return R0(n,e,t,l.getNode().getChild(t),i,s,a,o);if(bt(t)){let c=new On(null);return l.getNode().forEachChild(_a,(d,p)=>{c=c.set(new on(d),p)}),zN(n,e,t,c,i,s,a,o)}return e}{let c=new On(null);return r.foreach((d,p)=>{const _=tr(t,d);l.isCompleteForPath(_)&&(c=c.set(d,l.getNode().getChild(_)))}),zN(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==ya.LISTEN_COMPLETE)throw Uf("Unknown operation type: "+t.type);o=function wve(n,e,t,r,i){const s=e.serverCache;return b7(n,g7(e,s.getNode(),s.isFullyInitialized()||bt(t),s.isFiltered()),t,r,T7,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function vve(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=A0(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(d7(A0(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function _ve(n,e){Te(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Te(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),Te(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,P7(n,s.changes,s.viewCache.eventCache.getNode(),null)}function P7(n,e,t,r){return function Yye(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function Fye(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),_y(n,i,"child_removed",e,r,t),_y(n,i,"child_added",e,r,t),_y(n,i,"child_moved",s,r,t),_y(n,i,"child_changed",e,r,t),_y(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let P0,N0;class M7{constructor(){this.views=new Map}}function WN(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return Te(null!=s,"SyncTree gave us an op for an invalid query."),R7(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(R7(o,e,t,r));return s}}function N7(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=D0(t,i?r:null),l=!1;a?l=!0:r instanceof ht?(a=BN(t,r),l=!1):(a=ht.EMPTY_NODE,l=!1);const c=b0(new wc(a,l,!1),new wc(r,i,!1));return new Tve(e,c)}return o}function O7(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Tc(n,e){let t=null;for(const r of n.views.values())t=t||Sve(r,e);return t}function k7(n,e){return e._queryParams.loadsAllData()?M0(n):n.views.get(e._queryIdentifier)}function F7(n,e){return null!=k7(n,e)}function bc(n){return null!=M0(n)}function M0(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Lve=1;class L7{constructor(e){this.listenProvider_=e,this.syncPointTree_=new On(null),this.pendingWriteTree_=function hve(){return{visibleWrites:So.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function GN(n,e,t,r,i){return function eve(n,e,t,r,i){Te(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=vy(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?dp(n,new ud({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Ac(n,e,t=!1){const r=function nve(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function rve(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);Te(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&ive(a,r.path)?i=!1:no(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function sve(n){n.visibleWrites=v7(n.allWrites,ove,Qt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=m7(n.visibleWrites,r.path):ei(r.children,l=>{n.visibleWrites=m7(n.visibleWrites,tr(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new On(null);return null!=r.snap?s=s.set(Qt(),!0):ei(r.children,o=>{s=s.set(new on(o),!0)}),dp(n,new T0(r.path,s,t))}return[]}function Ey(n,e,t){return dp(n,new ud({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function O0(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||F7(o,e))){const l=function Ove(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=bc(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(x7(c,t,r)),D7(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(x7(l,t,r)),D7(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!bc(n)&&s.push(new(function Pve(){return Te(P0,"Reference.ts has not been loaded"),P0}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function Mve(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const d=-1!==c.findIndex(_=>_._queryParams.loadsAllData()),p=n.syncPointTree_.findOnPath(s,(_,v)=>bc(v));if(d&&!p){const _=n.syncPointTree_.subtree(s);if(!_.isEmpty()){const v=function zve(n){return n.fold((e,t,r)=>{if(t&&bc(t))return[M0(t)];{let i=[];return t&&(i=O7(t)),ei(r,(s,o)=>{i=i.concat(o)}),i}})}(_);for(let b=0;b<v.length;++b){const D=v[b],P=D.query,H=j7(n,D);n.listenProvider_.startListening(wy(P),Iy(n,P),H.hashFn,H.onComplete)}}}!p&&c.length>0&&!r&&(d?n.listenProvider_.stopListening(wy(e),null):c.forEach(_=>{const v=n.queryToTagMap.get(F0(_));n.listenProvider_.stopListening(wy(_),v)}))}!function Wve(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=F0(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function V7(n,e,t,r){const i=KN(n,r);if(null!=i){const s=QN(i),o=s.path,a=s.queryId,l=Ji(o,e);return YN(n,o,new ud(kN(a),l,t))}return[]}function qN(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(_,v)=>{const b=Ji(_,i);s=s||Tc(v,b),o=o||bc(v)});let l,a=n.syncPointTree_.get(i);a?(o=o||bc(a),s=s||Tc(a,Qt())):(a=new M7,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=ht.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((v,b)=>{const D=Tc(b,Qt());D&&(s=s.updateImmediateChild(v,D))}));const c=F7(a,e);if(!c&&!e._queryParams.loadsAllData()){const _=F0(e);Te(!n.queryToTagMap.has(_),"View does not exist, but we have a tag");const v=function Gve(){return Lve++}();n.queryToTagMap.set(_,v),n.tagToQueryMap.set(v,_)}let p=function Nve(n,e,t,r,i,s){const o=N7(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function Dve(n,e){n.eventRegistrations_.push(e)}(o,t),function xve(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Nn,(s,o)=>{r.push(ap(s,o))}),t.isFullyInitialized()&&r.push(d7(t.getNode())),P7(n,r,t.getNode(),e)}(o,t)}(a,e,t,S0(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const _=k7(a,e);p=p.concat(function qve(n,e,t){const r=e._path,i=Iy(n,e),s=j7(n,t),o=n.listenProvider_.startListening(wy(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)Te(!bc(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,d,p)=>{if(!bt(c)&&d&&bc(d))return[M0(d).query];{let _=[];return d&&(_=_.concat(O7(d).map(v=>v.query))),ei(p,(v,b)=>{_=_.concat(b)}),_}});for(let c=0;c<l.length;++c){const d=l[c];n.listenProvider_.stopListening(wy(d),Iy(n,d))}}return o}(n,e,_))}return p}function k0(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=Tc(a,Ji(o,e));if(c)return c});return E7(i,e,s,t,!0)}function dp(n,e){return U7(e,n.syncPointTree_,null,S0(n.pendingWriteTree_,Qt()))}function U7(n,e,t,r){if(bt(n.path))return B7(n,e,t,r);{const i=e.get(Qt());null==t&&null!=i&&(t=Tc(i,Qt()));let s=[];const o=Tt(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,d=w7(r,o);s=s.concat(U7(a,l,c,d))}return i&&(s=s.concat(WN(i,n,r,t))),s}}function B7(n,e,t,r){const i=e.get(Qt());null==t&&null!=i&&(t=Tc(i,Qt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=w7(r,o),d=n.operationForChild(o);d&&(s=s.concat(B7(d,a,l,c)))}),i&&(s=s.concat(WN(i,n,r,t))),s}function j7(n,e){const t=e.query,r=Iy(n,t);return{hashFn:()=>(function bve(n){return n.viewCache_.serverCache.getNode()}(e)||ht.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function jve(n,e,t){const r=KN(n,t);if(r){const i=QN(r),s=i.path,o=i.queryId,a=Ji(s,e);return YN(n,s,new my(kN(o),a))}return[]}(n,t._path,r):function Bve(n,e){return dp(n,new my({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function U_e(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return O0(n,t,null,s)}}}}function Iy(n,e){const t=F0(e);return n.queryToTagMap.get(t)}function F0(n){return n._path.toString()+"$"+n._queryIdentifier}function KN(n,e){return n.tagToQueryMap.get(e)}function QN(n){const e=n.indexOf("$");return Te(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new on(n.substr(0,e))}}function YN(n,e,t){const r=n.syncPointTree_.get(e);return Te(r,"Missing sync point for query tag that we're tracking"),WN(r,t,S0(n.pendingWriteTree_,e),null)}function wy(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Fve(){return Te(N0,"Reference.ts has not been loaded"),N0}())(n._repo,n._path):n}class JN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new JN(t)}node(){return this.node_}}class XN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=tr(this.path_,e);return new XN(this.syncTree_,t)}node(){return k0(this.syncTree_,this.path_)}}const Kve=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},$7=function(n,e,t){return n&&"object"==typeof n?(Te(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Qve(n[".sv"],e,t):"object"==typeof n[".sv"]?Yve(n[".sv"],e):void Te(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Qve=function(n,e,t){if("timestamp"===n)return t.timestamp;Te(!1,"Unexpected server value: "+n)},Yve=function(n,e,t){n.hasOwnProperty("increment")||Te(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&Te(!1,"Unexpected increment value: "+r);const i=e.node();if(Te(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},H7=function(n,e,t,r){return e1(e,new XN(t,n),r)},ZN=function(n,e,t){return e1(n,new JN(e),t)};function e1(n,e,t){const r=n.getPriority().val(),i=$7(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=$7(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new sp(a,or(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new sp(i))),o.forEachChild(Nn,(a,l)=>{const c=e1(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class t1{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function L0(n,e){let t=e instanceof on?e:new on(e),r=n,i=Tt(t);for(;null!==i;){const s=Bf(r.node.children,i)||{children:{},childCount:0};r=new t1(i,r,s),t=Cn(t),i=Tt(t)}return r}function fd(n){return n.node.value}function n1(n,e){n.node.value=e,r1(n)}function z7(n){return n.node.childCount>0}function V0(n,e){ei(n.node.children,(t,r)=>{e(new t1(t,n,r))})}function W7(n,e,t,r){t&&!r&&e(n),V0(n,i=>{W7(i,e,!0,r)}),t&&r&&e(n)}function Cy(n){return new on(null===n.parent?n.name:Cy(n.parent)+"/"+n.name)}function r1(n){null!==n.parent&&function Zve(n,e,t){const r=function Jve(n){return void 0===fd(n)&&!z7(n)}(t),i=ua(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,r1(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,r1(n))}(n.parent,n.name,n)}const eEe=/[\[\].#$\/\u0000-\u001F\u007F]/,tEe=/[\[\].#$\u0000-\u001F\u007F]/,i1=10485760,U0=function(n){return"string"==typeof n&&0!==n.length&&!eEe.test(n)},G7=function(n){return"string"==typeof n&&0!==n.length&&!tEe.test(n)},va=function(n,e,t,r){r&&void 0===e||by(Wu(n,"value"),e,t)},by=function(n,e,t){const r=t instanceof on?new yye(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+ld(r));if("function"==typeof e)throw new Error(n+"contains a function "+ld(r)+" with contents = "+e.toString());if(f0(e))throw new Error(n+"contains "+e.toString()+" "+ld(r));if("string"==typeof e&&e.length>i1/3&&IC(e)>i1)throw new Error(n+"contains a string greater than "+i1+" utf8 bytes "+ld(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(ei(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!U0(o)))throw new Error(n+" contains an invalid key ("+o+") "+ld(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function vye(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=IC(e),n7(n)})(r,o),by(n,a,r),function Eye(n){const e=n.parts_.pop();n.byteLength_-=IC(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+ld(r)+" in addition to actual children.")}},q7=function(n,e,t,r){if(r&&void 0===e)return;const i=Wu(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ei(e,(o,a)=>{const l=new on(o);if(by(i,a,tr(t,l)),".priority"===vN(l)&&!function(n){return null===n||"string"==typeof n||"number"==typeof n&&!f0(n)||n&&"object"==typeof n&&ua(n,".sv")}(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=cy(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!U0(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(_ye);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&no(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},o1=function(n,e,t,r){if(!(r&&void 0===t||G7(t)))throw new Error(Wu(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},iEe=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),o1(n,e,t,r)},Ea=function(n,e){if(".info"===Tt(e))throw new Error(n+" failed = Can't modify data under /.info/")};class sEe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function B0(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!EN(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Ns(n,e,t){B0(n,t),function Y7(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(oEe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>no(r,e)||no(e,r))}function oEe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();od&&Zr("event: "+t.toString()),rp(r)}}}const aEe=25;class lEe{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sEe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=C0(),this.transactionQueueTree_=new t1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function X7(n){const t=n.infoData_.getNode(new on(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Sy(n){return Kve({timestamp:X7(n)})}function Z7(n,e,t,r,i){n.dataUpdateCount++;const s=new on(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=EC(t,c=>or(c));o=function $ve(n,e,t,r){const i=KN(n,r);if(i){const s=QN(i),o=s.path,a=s.queryId,l=Ji(o,e),c=On.fromObject(t);return YN(n,o,new cp(kN(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=or(t);o=V7(n.serverSyncTree_,s,l,i)}else if(r){const l=EC(t,c=>or(c));o=function Uve(n,e,t){const r=On.fromObject(t);return dp(n,new cp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=or(t);o=Ey(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=fp(n,s)),Ns(n.eventQueue_,a,o)}function e6(n,e){a1(n,"connected",e),!1===e&&function fEe(n){hp(n,"onDisconnectEvents");const e=Sy(n),t=C0();MN(n.onDisconnect_,Qt(),(i,s)=>{const o=H7(i,s,n.serverSyncTree_,e);lp(t,i,o)});let r=[];MN(t,Qt(),(i,s)=>{r=r.concat(Ey(n.serverSyncTree_,i,s));const o=d1(n,i);fp(n,o)}),n.onDisconnect_=C0(),Ns(n.eventQueue_,Qt(),r)}(n)}function a1(n,e,t){const r=new on("/.info/"+e),i=or(t);n.infoData_.updateSnapshot(r,i);const s=Ey(n.infoSyncTree_,r,i);Ns(n.eventQueue_,r,s)}function j0(n){return n.nextWriteId_++}function hp(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Zr(t,...e)}function Sc(n,e,t,r){e&&rp(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function u1(n,e,t){return k0(n.serverSyncTree_,e,t)||ht.EMPTY_NODE}function $0(n,e=n.transactionQueueTree_){if(e||H0(n,e),fd(e)){const t=i6(n,e);Te(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function EEe(n,e,t){const r=t.map(c=>c.currentWriteId),i=u1(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const d=t[c];Te(0===d.status,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const p=Ji(e,d.path);s=s.updateChild(p,d.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{hp(n,"transaction put response",{path:l.toString(),status:c});let d=[];if("ok"===c){const p=[];for(let _=0;_<t.length;_++)t[_].status=2,d=d.concat(Ac(n.serverSyncTree_,t[_].currentWriteId)),t[_].onComplete&&p.push(()=>t[_].onComplete(null,!0,t[_].currentOutputSnapshotResolved)),t[_].unwatcher();H0(n,L0(n.transactionQueueTree_,e)),$0(n,n.transactionQueueTree_),Ns(n.eventQueue_,e,d);for(let _=0;_<p.length;_++)rp(p[_])}else{if("datastale"===c)for(let p=0;p<t.length;p++)t[p].status=3===t[p].status?4:0;else{xi("transaction at "+l.toString()+" failed: "+c);for(let p=0;p<t.length;p++)t[p].status=4,t[p].abortReason=c}fp(n,e)}},o)}(n,Cy(e),t)}else z7(e)&&V0(e,t=>{$0(n,t)})}function fp(n,e){const t=r6(n,e),r=Cy(t);return function IEe(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Ji(t,l.path);let p,d=!1;if(Te(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)d=!0,p=l.abortReason,i=i.concat(Ac(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=aEe)d=!0,p="maxretry",i=i.concat(Ac(n.serverSyncTree_,l.currentWriteId,!0));else{const _=u1(n,l.path,o);l.currentInputSnapshot=_;const v=e[a].update(_.val());if(void 0!==v){by("transaction failed: Data returned ",v,l.path);let b=or(v);"object"==typeof v&&null!=v&&ua(v,".priority")||(b=b.updatePriority(_.getPriority()));const P=l.currentWriteId,H=Sy(n),V=ZN(b,_,H);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=V,l.currentWriteId=j0(n),o.splice(o.indexOf(P),1),i=i.concat(GN(n.serverSyncTree_,l.path,V,l.currentWriteId,l.applyLocally)),i=i.concat(Ac(n.serverSyncTree_,P,!0))}else d=!0,p="nodata",i=i.concat(Ac(n.serverSyncTree_,l.currentWriteId,!0))}Ns(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===p?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(p),!1,null)))}H0(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)rp(r[a]);$0(n,n.transactionQueueTree_)}(n,i6(n,t),r),r}function r6(n,e){let t,r=n.transactionQueueTree_;for(t=Tt(e);null!==t&&void 0===fd(r);)r=L0(r,t),t=Tt(e=Cn(e));return r}function i6(n,e){const t=[];return s6(n,e,t),t.sort((r,i)=>r.order-i.order),t}function s6(n,e,t){const r=fd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);V0(e,i=>{s6(n,i,t)})}function H0(n,e){const t=fd(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,n1(e,t.length>0?t:void 0)}V0(e,r=>{H0(n,r)})}function d1(n,e){const t=Cy(r6(n,e)),r=L0(n.transactionQueueTree_,e);return function Xve(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{h1(n,i)}),h1(n,r),W7(r,i=>{h1(n,i)}),t}function h1(n,e){const t=fd(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?(Te(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(Te(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(Ac(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?n1(e,void 0):t.length=s+1,Ns(n.eventQueue_,Cy(e),i);for(let o=0;o<r.length;o++)rp(r[o])}}const f1=function(n,e){const t=TEe(n),r=t.namespace;return"firebase.com"===t.domain&&ma(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ma("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&xi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new fN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new on(t.pathString)}},TEe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let d=n.indexOf("/");-1===d&&(d=n.length);let p=n.indexOf("?");-1===p&&(p=n.length),e=n.substring(0,Math.min(d,p)),d<p&&(i=function wEe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(d,p)));const _=function CEe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):xi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,p)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const v=e.slice(0,c);if("localhost"===v.toLowerCase())t="localhost";else if(v.split(".").length<=2)t=v;else{const b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),t=e.substring(b+1),s=r}"ns"in _&&(s=_.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},o6="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",bEe=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=o6.charAt(t%64),t=Math.floor(t/64);Te(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=o6.charAt(e[i]);return Te(20===o.length,"nextPushId: Length should be 20."),o}}();class a6{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Vr(this.snapshot.exportVal())}}class l6{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class p1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Te(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Os{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return bt(this._path)?null:vN(this._path)}get ref(){return new Do(this._repo,this._path)}get _queryIdentifier(){const e=f7(this._queryParams),t=dN(e);return"{}"===t?"default":t}get _queryObject(){return f7(this._queryParams)}isEqual(e){if(!((e=ac(e))instanceof Os))return!1;const t=this._repo===e._repo,r=EN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function mye(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Do extends Os{constructor(e,t){super(e,t,new DN,!1)}get parent(){const e=t7(this._path);return null===e?null:new Do(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class pd{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new on(e),r=pp(this.ref,e);return new pd(this._node.getChild(t),r,Nn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new pd(i,pp(this.ref,r),Nn)))}hasChild(e){const t=new on(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function G0(n,e){return(n=ac(n))._checkNotDeleted("ref"),void 0!==e?pp(n._root,e):n._root}function pp(n,e){return null===Tt((n=ac(n))._path)?iEe("child","path",e,!1):o1("child","path",e,!1),new Do(n._repo,tr(n._path,e))}function c6(n,e){n=ac(n),Ea("set",n._path),va("set",e,n._path,!1);const t=new ca;return function l1(n,e,t,r,i){hp(n,"set",{path:e.toString(),value:t,priority:r});const s=Sy(n),o=or(t,r),a=k0(n.serverSyncTree_,e),l=ZN(o,a,s),c=j0(n),d=GN(n.serverSyncTree_,e,l,c,!0);B0(n.eventQueue_,d),n.server_.put(e.toString(),o.val(!0),(_,v)=>{const b="ok"===_;b||xi("set at "+e+" failed: "+_);const D=Ac(n.serverSyncTree_,c,!b);Ns(n.eventQueue_,e,D),Sc(0,i,_,v)});const p=d1(n,e);fp(n,p),Ns(n.eventQueue_,p,[])}(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function DEe(n,e){q7("update",e,n._path,!1);const t=new ca;return function hEe(n,e,t,r){hp(n,"update",{path:e.toString(),value:t});let i=!0;const s=Sy(n),o={};if(ei(t,(a,l)=>{i=!1,o[a]=H7(tr(e,a),or(l),n.serverSyncTree_,s)}),i)Zr("update() called with empty data.  Don't do anything."),Sc(0,r,"ok",void 0);else{const a=j0(n),l=function Vve(n,e,t,r){!function tve(n,e,t,r){Te(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=LN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=On.fromObject(t);return dp(n,new cp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,o,a);B0(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,d)=>{const p="ok"===c;p||xi("update at "+e+" failed: "+c);const _=Ac(n.serverSyncTree_,a,!p),v=_.length>0?fp(n,e):e;Ns(n.eventQueue_,v,_),Sc(0,r,c,d)}),ei(t,c=>{const d=d1(n,tr(e,c));fp(n,d)}),Ns(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function xEe(n){n=ac(n);const e=new p1(()=>{}),t=new Dy(e);return function dEe(n,e,t){const r=function Hve(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,d)=>{const p=Ji(c,t);r=r||Tc(d,p)});let i=n.syncPointTree_.get(t);i?r=r||Tc(i,Qt()):(i=new M7,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new wc(r,!0,!1):null;return function Ave(n){return A0(n.viewCache_)}(N7(i,e,S0(n.pendingWriteTree_,e._path),s?o.getNode():ht.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=or(i).withIndex(e._queryParams.getIndex());let o;if(qN(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=Ey(n.serverSyncTree_,e._path,s);else{const a=Iy(n.serverSyncTree_,e);o=V7(n.serverSyncTree_,e._path,s,a)}return Ns(n.eventQueue_,e._path,o),O0(n.serverSyncTree_,e,t,null,!0),s},i=>(hp(n,"get for query "+Vr(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new pd(r,new Do(n._repo,n._path),n._queryParams.getIndex()))}class Dy{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new a6("value",this,new pd(e.snapshotNode,new Do(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new l6(this,e,t):null}matches(e){return e instanceof Dy&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}(function Rve(n){Te(!P0,"__referenceConstructor has already been defined"),P0=n})(Do),function kve(n){Te(!N0,"__referenceConstructor has already been defined"),N0=n}(Do);const g1={};function f6(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||ma("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=f1(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=f1(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const d=i&&l?new ly(ly.OWNER):new W_e(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!U0(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),G7(n)}(t))throw new Error(Wu(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),bt(o.path)||ma("Database URL must point to the root of a Firebase Database (not including a child path).");const p=function HEe(n,e,t,r){let i=g1[e.name];i||(i={},g1[e.name]=i);let s=i[n.toURLString()];return s&&ma("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new lEe(n,false,t,r),i[n.toURLString()]=s,s}(a,n,d,new z_e(n.name,t));return new WEe(p,n)}class WEe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function cEe(n,e,t){if(n.stats_=mN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new w0(n.repoInfo_,(r,i,s,o)=>{Z7(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>e6(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Vr(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new cd(n.repoInfo_,e,(r,i,s,o)=>{Z7(n,r,i,s,o)},r=>{e6(n,r)},r=>{!function uEe(n,e){ei(e,(t,r)=>{a1(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function K_e(n,e){const t=n.toString();return gN[t]||(gN[t]=e()),gN[t]}(n.repoInfo_,()=>new Kye(n.stats_,n.server_)),n.infoData_=new Hye,n.infoSyncTree_=new L7({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=Ey(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),a1(n,"connected",!1),n.serverSyncTree_=new L7({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Ns(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Do(this._repo,Qt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function $Ee(n,e){const t=g1[e];(!t||t[n.key]!==n)&&ma(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function n6(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ma("Cannot call "+e+" on a deleted database.")}}function g6(n=OW(),e){const t=TC(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=(n=>{const e=(n=>{var e,t;return null===(t=null===(e=_C())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]})(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})("database");r&&function GEe(n,e,t,r={}){(n=ac(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ma("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ma('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ly(ly.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:function Ide(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[mC(JSON.stringify({alg:"none",type:"JWT"})),mC(JSON.stringify(o)),""].join(".")}(r.mockUserToken,n.app.options.projectId);s=new ly(o)}!function jEe(n,e,t,r){n.repoInfo_=new fN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(t,...r)}return t}cd.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},cd.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function qEe(n){(function yq(n){lN=n})("11.1.0"),jf(new Gu("database",(e,{instanceIdentifier:t})=>f6(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),lc(mq,"1.0.10",n),lc(mq,"1.0.10","esm2017")}();let YEe=(()=>{class n{constructor(){this.database=g6()}addGuest(t){var r=this;return(0,J.A)(function*(){const i=G0(r.database,"/rsvp");try{yield function SEe(n,e){n=ac(n),Ea("push",n._path),va("push",e,n._path,!0);const t=X7(n._repo),r=bEe(t),i=pp(n,r),s=pp(n,r);let o;return o=null!=e?c6(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(i,t),console.log(`Rsvp ${t} added to database`)}catch(s){console.error("Error adding guest:",s)}})()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),JEe=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ni({type:n,selectors:[["app-plus-sign"]],decls:3,vars:0,consts:[[1,"ring"],[1,"plus-vertical-bar"],[1,"plus-horizontal-bar"]],template:function(r,i){1&r&&(ee(0,"div",0),kr(1,"div",1)(2,"div",2),re())},styles:[".ring[_ngcontent-%COMP%]{width:16px;height:16px;background-color:#96a498;border-radius:50%;position:relative;display:flex;align-items:center;justify-content:center}.plus-horizontal-bar[_ngcontent-%COMP%]{position:absolute;width:13%;height:70%;background-color:#fcfbf4;transform:rotate(90deg);z-index:1}.plus-vertical-bar[_ngcontent-%COMP%]{position:absolute;width:13%;height:70%;background-color:#fcfbf4;z-index:2}@media (max-width: 1200px){.ring[_ngcontent-%COMP%]{width:14px;height:14px}}@media (max-width: 1000px){.ring[_ngcontent-%COMP%]{width:13px;height:13px}}@media (max-width: 800px){.ring[_ngcontent-%COMP%]{width:12px;height:12px}}@media (max-width: 600px){.ring[_ngcontent-%COMP%]{width:11px;height:11px}}@media (max-width: 450px){.ring[_ngcontent-%COMP%]{width:10px;height:10px}}"]})}}return n})();function XEe(n,e){1&n&&(ee(0,"div",23),ce(1,"Name missing"),re())}function ZEe(n,e){if(1&n){const t=Qo();ee(0,"div",19)(1,"div",20)(2,"label",15),ce(3),re(),ee(4,"input",21),$t("ngModelChange",function(i){const o=ur(t).index;return dr(An().guests[o]=i)}),re(),qr(5,XEe,2,0,"div",22),re()()}if(2&n){const t=e.index,r=An();tt(3),Ua("Guest ",t+1,""),tt(1),QE("name","name",t,""),yt("ngModel",r.guests[t]),tt(1),yt("ngIf",r.validationErrors[t])}}let eIe=(()=>{class n{constructor(t){this.rsvpService=t,this.guests=[""],this.message="",this.validationErrors=[!1]}addGuest(t){var r=this;return(0,J.A)(function*(){try{const i={attending:r.attending,name:r.guests,message:r.message};if(r.validationErrors=r.guests.map(()=>!1),i.name.forEach((s,o)=>{try{r.validateName(s)}catch{r.validationErrors[o]=!0}}),r.validationErrors.some(s=>s))throw new Error("Validation failed");console.log("RSVP object: "+i.name+", "+i.attending+", "+i.message),yield r.rsvpService.addGuest(i),t.reset(),r.guests=[""],r.validationErrors=[!1]}catch(i){console.error("Update failed",i)}})()}addLine(){this.guests.push("")}trackByIndex(t){return t}validateName(t){if(!t||t.trim().length<1)throw Error}static{this.\u0275fac=function(r){return new(r||n)(ve(YEe))}}static{this.\u0275cmp=ni({type:n,selectors:[["app-rsvp"]],decls:37,vars:7,consts:[[1,"page-headline"],[1,"container"],[1,"text-container"],[1,"text"],[1,"add-symbol-text"],[1,"form-container"],[1,"form",3,"ngSubmit"],["guestForm","ngForm"],[1,"attending-container"],[1,"accept"],["type","radio","name","attending",3,"ngModel","value","ngModelChange"],[1,"decline"],["class","guest-container",4,"ngFor","ngForOf","ngForTrackBy"],[1,"add-symbol-form",3,"click"],[1,"message-container"],[1,"label"],["name","message",1,"input-textarea",3,"ngModel","ngModelChange"],[1,"send-button-container"],["type","submit",1,"send-button"],[1,"guest-container"],[1,"guest-field"],["type","text","placeholder","Name",1,"input-field",3,"name","ngModel","ngModelChange"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(r,i){if(1&r){const s=Qo();ee(0,"div",0),ce(1,"RSVP"),re(),ee(2,"div",1)(3,"div",2)(4,"div",3),ce(5,"Let us know if you will attend the wedding by RSVP before "),ee(6,"b"),ce(7,"15 May 2025"),re(),ce(8,"."),re(),ee(9,"div",3),ce(10,"Fill in all guests that will attend from your invitation. Add a line for each person by pressing the "),kr(11,"app-plus-sign",4),re(),ee(12,"div",3),ce(13,"If there is anything we should know, feel free to write us a message."),re()(),ee(14,"div",5)(15,"form",6,7),$t("ngSubmit",function(){ur(s);const a=Ko(16);return dr(i.addGuest(a))}),ee(17,"h1"),ce(18,"RSVP"),re(),ee(19,"div",8)(20,"div",9)(21,"label"),ce(22,"HAPPILY ACCEPTS"),re(),ee(23,"input",10),$t("ngModelChange",function(a){return i.attending=a}),re()(),ee(24,"div",11)(25,"label"),ce(26,"REGRETFULLY DECLINES"),re(),ee(27,"input",10),$t("ngModelChange",function(a){return i.attending=a}),re()()(),qr(28,ZEe,6,4,"div",12),ee(29,"app-plus-sign",13),$t("click",function(){return i.addLine()}),re(),ee(30,"div",14)(31,"label",15),ce(32,"Message"),re(),ee(33,"textarea",16),$t("ngModelChange",function(a){return i.message=a}),re(),ee(34,"div",17)(35,"button",18),ce(36,"SEND"),re()()()()()()}2&r&&(tt(23),yt("ngModel",i.attending)("value",!0),tt(4),yt("ngModel",i.attending)("value",!1),tt(1),yt("ngForOf",i.guests)("ngForTrackBy",i.trackByIndex),tt(5),yt("ngModel",i.message))},dependencies:[IS,om,rP,g_,iP,WR,GR,uC,E_,JEe],styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{height:100vh;margin:2em}.text-container[_ngcontent-%COMP%]{font-size:16px}.text[_ngcontent-%COMP%]{margin-bottom:1em;text-align:center}.add-symbol-text[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin-left:.15em}.form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2em}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:70%;height:auto;color:#616060;border:1px solid rgb(150,164,152);border-radius:5px;padding-top:1em}h1[_ngcontent-%COMP%]{display:flex;justify-content:space-around;color:#96a498;margin-top:0}.attending-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%;font-size:16px;letter-spacing:2px;margin-bottom:1em;width:100%}.accept[_ngcontent-%COMP%], .decline[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:.5em}input[type=radio][_ngcontent-%COMP%]{margin:0 0 0 1em;width:18px;height:18px}input[type=radio][_ngcontent-%COMP%]:hover{cursor:pointer}.guest-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;gap:4px;width:100%}.guest-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;width:55%}.label[_ngcontent-%COMP%]{font-size:16px;color:#616060;margin-top:1em;margin-bottom:.5em}.input-field[_ngcontent-%COMP%]{margin-bottom:.5em;width:100%;height:30px;font-size:16px;font-family:Lora,cursive;border:none;border-bottom:.5px solid black;color:#616060;background-color:#fcfbf4}.input-field[_ngcontent-%COMP%]::placeholder{font-family:Lora,cursive;font-size:14px}.error-message[_ngcontent-%COMP%]{font-size:14px;color:red;margin-bottom:.5em}.add-symbol-form[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;width:55%;margin:0;padding:0}.add-symbol-form[_ngcontent-%COMP%]:hover{cursor:pointer}.message-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;width:55%}.input-textarea[_ngcontent-%COMP%]{font-size:14px;line-height:14px;height:112px;font-family:Lora,cursive}.send-button[_ngcontent-%COMP%]{display:flex;justify-content:center;border-radius:5px;background-color:#96a498;color:#fff;border:none;font-family:Lora,cursive;font-size:14px;width:auto;height:auto;padding:.3em .7em;margin-top:.5em;margin-bottom:3em}.send-button[_ngcontent-%COMP%]:hover{cursor:pointer}@media (max-width: 1200px){.attending-container[_ngcontent-%COMP%]{font-size:14px;margin-bottom:1em;letter-spacing:2px}input[type=radio][_ngcontent-%COMP%]{width:15px;height:15px}}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}.text-container[_ngcontent-%COMP%]{font-size:14px}h1[_ngcontent-%COMP%]{font-size:26px}.attending-container[_ngcontent-%COMP%]{font-size:12px;letter-spacing:1px}input[type=radio][_ngcontent-%COMP%]{width:13px;height:13px}.label[_ngcontent-%COMP%]{font-size:14px;margin-bottom:.4em}.input-field[_ngcontent-%COMP%]{font-size:14px;height:25px}.input-textarea[_ngcontent-%COMP%]{font-size:14px;line-height:14px;height:112px}.send-button[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}.text-container[_ngcontent-%COMP%]{font-size:14px}h1[_ngcontent-%COMP%]{font-size:22px}.attending-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:.5em;letter-spacing:2px}.accept[_ngcontent-%COMP%], .decline[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.3em;margin-left:1em;margin-right:1em}.label[_ngcontent-%COMP%]{font-size:12px;margin-bottom:.3em}.input-field[_ngcontent-%COMP%]{font-size:12px;height:20px}.input-field[_ngcontent-%COMP%]::placeholder{font-size:12px}.input-textarea[_ngcontent-%COMP%]{font-size:12px;line-height:12px;height:96px}.send-button[_ngcontent-%COMP%]{border-radius:4px;font-size:10px;margin-top:.3em;padding:.3em .6em}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}.text-container[_ngcontent-%COMP%]{font-size:12px}h1[_ngcontent-%COMP%]{font-size:18px}.attending-container[_ngcontent-%COMP%]{font-size:8px;letter-spacing:1px}input[type=radio][_ngcontent-%COMP%]{width:10px;height:10px}.label[_ngcontent-%COMP%]{font-size:10px;margin-bottom:.2em}.input-field[_ngcontent-%COMP%]{font-size:10px;height:18px}.input-field[_ngcontent-%COMP%]::placeholder{font-size:10px}.input-textarea[_ngcontent-%COMP%]{font-size:10px;line-height:10px;height:70px}.send-button[_ngcontent-%COMP%]{border-radius:3px;font-size:9px;margin-top:.2em;padding:.2em .5em}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}.text-container[_ngcontent-%COMP%]{font-size:10px}h1[_ngcontent-%COMP%]{font-size:16px}.attending-container[_ngcontent-%COMP%]{font-size:7px;letter-spacing:1px}input[type=radio][_ngcontent-%COMP%]{width:8px;height:8px}.label[_ngcontent-%COMP%]{font-size:9px;margin-bottom:.1em}.input-field[_ngcontent-%COMP%]{font-size:9px;height:12px}.input-field[_ngcontent-%COMP%]::placeholder{font-size:9px}.input-textarea[_ngcontent-%COMP%]{font-size:8px;line-height:8px;height:48px}.send-button[_ngcontent-%COMP%]{border-radius:2px;font-size:7px;margin-top:0;padding:.2em .5em}}"]})}}return n})(),tIe=(()=>{class n{constructor(){this.database=g6()}fetchGifts(){var t=this;return(0,J.A)(function*(){const r=G0(t.database,"/gifts");try{const i=yield xEe(r),s=[];if(i.exists()){const o=i.val();for(const a in o)s.push({key:a,...o[a]})}else console.log("No data available");return s}catch(i){console.error("Error fetching data:",i)}})()}updateClaim(t,r){var i=this;return(0,J.A)(function*(){const s=G0(i.database,t);try{yield DEe(s,{claimed:r}),console.log(`Gift ${t} 'claimed' status updated to: ${r}`)}catch(o){console.error("Error updating gift status:",o)}})()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Be({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function nIe(n,e){if(1&n){const t=Qo();ee(0,"button",11),$t("click",function(){ur(t);const i=An().$implicit;return dr(An().updateGiftStatus(i))}),re()}2&n&&xl("ticked",An().$implicit.claimed)}function rIe(n,e){if(1&n&&(ee(0,"tr")(1,"td",7),qr(2,nIe,1,2,"button",8),re(),ee(3,"td",9)(4,"a",10),ce(5),re()()()),2&n){const t=e.$implicit,r=An();tt(2),yt("ngIf","single"===t.quantity),tt(1),yt("ngStyle",r.getGiftStyle(t)),tt(1),Ah("href",t.link,lu),tt(1),Ua(" ",t.name,"")}}function iIe(n,e){if(1&n){const t=Qo();ee(0,"button",11),$t("click",function(){ur(t);const i=An().$implicit;return dr(An().updateGiftStatus(i))}),re()}2&n&&xl("ticked",An().$implicit.claimed)}function sIe(n,e){if(1&n&&(ee(0,"tr")(1,"td",7),qr(2,iIe,1,2,"button",8),re(),ee(3,"td",9)(4,"a",10),ce(5),re()()()),2&n){const t=e.$implicit,r=An();tt(2),yt("ngIf","single"===t.quantity),tt(1),yt("ngStyle",r.getGiftStyle(t)),tt(1),Ah("href",t.link,lu),tt(1),Ua(" ",t.name,"")}}function oIe(n,e){if(1&n){const t=Qo();ee(0,"button",11),$t("click",function(){ur(t);const i=An().$implicit;return dr(An().updateGiftStatus(i))}),re()}2&n&&xl("ticked",An().$implicit.claimed)}function aIe(n,e){if(1&n&&(ee(0,"tr")(1,"td",7),qr(2,oIe,1,2,"button",8),re(),ee(3,"td",9)(4,"a",10),ce(5),re()()()),2&n){const t=e.$implicit,r=An();tt(2),yt("ngIf","single"===t.quantity),tt(1),yt("ngStyle",r.getGiftStyle(t)),tt(1),Ah("href",t.link,lu),tt(1),Ua(" ",t.name,"")}}function lIe(n,e){if(1&n){const t=Qo();ee(0,"button",11),$t("click",function(){ur(t);const i=An().$implicit;return dr(An().updateGiftStatus(i))}),re()}2&n&&xl("ticked",An().$implicit.claimed)}function cIe(n,e){if(1&n&&(ee(0,"tr")(1,"td",7),qr(2,lIe,1,2,"button",8),re(),ee(3,"td",9)(4,"a",10),ce(5),re()()()),2&n){const t=e.$implicit,r=An();tt(2),yt("ngIf","single"===t.quantity),tt(1),yt("ngStyle",r.getGiftStyle(t)),tt(1),Ah("href",t.link,lu),tt(1),Ua(" ",t.name,"")}}const uIe=[{path:"",redirectTo:"Home",pathMatch:"full"},{path:"Home",component:c_e},{path:"About",component:u_e},{path:"Schedule",component:d_e},{path:"Registry",component:(()=>{class n{constructor(t){this.giftService=t,this.giftList=[]}ngOnInit(){var t=this;return(0,J.A)(function*(){yield t.fetchGifts()})()}fetchGifts(){var t=this;return(0,J.A)(function*(){try{t.giftList=yield t.giftService.fetchGifts()}catch(r){throw console.log("Error in RegistryComponent fetching data",r),r}})()}sortGifts(t){let r=[];return this.giftList.forEach(i=>{i.category===t&&r.push(i)}),r}updateGiftStatus(t){var r=this;return(0,J.A)(function*(){const i=`gifts/gift_${t.id}`,s=!t.claimed;try{yield r.giftService.updateClaim(i,s),r.ngOnInit()}catch(o){console.error("Update failed",o)}})()}getGiftStyle(t){return{"text-decoration":t.claimed?"line-through":"none",color:t.claimed?"gray":"black"}}static{this.\u0275fac=function(r){return new(r||n)(ve(tIe))}}static{this.\u0275cmp=ni({type:n,selectors:[["app-registry"]],decls:31,vars:4,consts:[[1,"page-headline"],[1,"registry-container"],[1,"registry-introduction"],[1,"registry-introduction-comment"],[1,"registry-content"],[1,"category-headline"],[4,"ngFor","ngForOf"],[1,"td-checkbox"],["class","button",3,"ticked","click",4,"ngIf"],[3,"ngStyle"],["target","_blank",3,"href"],[1,"button",3,"click"]],template:function(r,i){1&r&&(ee(0,"div",0),ce(1,"REGISTRY"),re(),ee(2,"div",1)(3,"p",2),ce(4," Dear family and friends, "),re(),ee(5,"p",2),ce(6," Your presence at our wedding is truly the greatest gift we could ask for. The joy of celebrating this special day surrounded by the people we care for means everything to us. For those who have kindly expressed interest in giving a gift, we've created this registry simply as a source of inspiration. Please know that we have absolutely no expectations - sharing our day with you is more than enough. We're excited to begin this new chapter of our lives and are deeply grateful for your love and support. "),re(),ee(7,"p",3)(8,"i"),ce(9,"When you have selected an item please check the box on the left side. This will mark the item as taken. In case you change your mind it is also possible to uncheck the box by clicking it again. Items with no checkbox indicate that we are wishing more than one. "),re()(),ee(10,"div",4)(11,"div",5),ce(12,"Kitchen"),re(),ee(13,"table")(14,"tbody"),qr(15,rIe,6,4,"tr",6),re()(),ee(16,"div",5),ce(17,"Living Room"),re(),ee(18,"table")(19,"tbody"),qr(20,sIe,6,4,"tr",6),re()(),ee(21,"div",5),ce(22,"Bathroom"),re(),ee(23,"table")(24,"tbody"),qr(25,aIe,6,4,"tr",6),re()(),ee(26,"div",5),ce(27,"Other"),re(),ee(28,"table")(29,"tbody"),qr(30,cIe,6,4,"tr",6),re()()()()),2&r&&(tt(15),yt("ngForOf",i.sortGifts("kitchen")),tt(5),yt("ngForOf",i.sortGifts("living-room")),tt(5),yt("ngForOf",i.sortGifts("bathroom")),tt(5),yt("ngForOf",i.sortGifts("other")))},dependencies:[IS,om,sU],styles:['.page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.registry-container[_ngcontent-%COMP%]{margin:2em}.registry-introduction[_ngcontent-%COMP%]{font-size:16px}.registry-introduction-comment[_ngcontent-%COMP%]{font-size:14px}.registry-content[_ngcontent-%COMP%]{column-count:2;column-gap:20px;height:80vh;overflow-y:auto;column-fill:auto}table[_ngcontent-%COMP%]{width:100%;border-spacing:0 10px}.category-headline[_ngcontent-%COMP%]{display:flex;justify-content:center;background-color:#96a498;color:#fff;margin-top:10px;margin-bottom:10px;border-radius:3px;padding:3px;font-size:18px}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f2f2f2}td[_ngcontent-%COMP%]{padding-left:30px;font-size:14px}.td-checkbox[_ngcontent-%COMP%]{width:20px}.button[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:0%;border:1px solid;box-shadow:2px 2px 5px #0009;padding:0;margin:0;display:flex;justify-content:center;cursor:pointer}.button[_ngcontent-%COMP%]:after{content:"";margin-left:20px;margin-top:4px;position:absolute;width:18px;height:6px;border-left:2px solid black;border-bottom:2px solid black;transform:rotate(-45deg) scale(0);transform-origin:bottom left;opacity:0}.button.ticked[_ngcontent-%COMP%]:after{transform:rotate(-45deg) scale(1);opacity:1}.button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:inherit;text-decoration:none}@media (max-width: 1200px){.category-headline[_ngcontent-%COMP%]{font-size:16px}td[_ngcontent-%COMP%]{padding-left:25px;font-size:13px}.td-checkbox[_ngcontent-%COMP%]{width:18px}.button[_ngcontent-%COMP%]{width:13px;height:13px}}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}.registry-introduction[_ngcontent-%COMP%]{font-size:14px}.registry-introduction-comment[_ngcontent-%COMP%]{font-size:12px}.category-headline[_ngcontent-%COMP%]{font-size:15px;margin-top:8px;margin-bottom:8px;border-radius:3px;padding:3px}td[_ngcontent-%COMP%]{padding-left:20px;font-size:12px}.td-checkbox[_ngcontent-%COMP%]{width:16px}.button[_ngcontent-%COMP%]{width:12px;height:12px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}.registry-introduction[_ngcontent-%COMP%]{font-size:12px}.registry-introduction-comment[_ngcontent-%COMP%]{font-size:10px}.columns[_ngcontent-%COMP%]{column-gap:15px}.category-headline[_ngcontent-%COMP%]{margin-top:7px;margin-bottom:7px;border-radius:3px;padding:2px;font-size:14px}td[_ngcontent-%COMP%]{padding-left:15px;font-size:11px}.td-checkbox[_ngcontent-%COMP%]{width:14px}.button[_ngcontent-%COMP%]{width:11px;height:11px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}.registry-introduction[_ngcontent-%COMP%]{font-size:10px}.registry-introduction-comment[_ngcontent-%COMP%]{font-size:8px}.category-headline[_ngcontent-%COMP%]{margin-top:6px;margin-bottom:6px;border-radius:2px;padding:2px;font-size:13px}.registry-content[_ngcontent-%COMP%]{column-count:1}td[_ngcontent-%COMP%]{padding-left:10px;font-size:10px}.td-checkbox[_ngcontent-%COMP%]{width:12px}.button[_ngcontent-%COMP%]{width:10px;height:10px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}.registry-introduction[_ngcontent-%COMP%]{font-size:8px}.registry-introduction-comment[_ngcontent-%COMP%]{font-size:7px}.category-headline[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;border-radius:2px;padding:2px;font-size:12px}td[_ngcontent-%COMP%]{padding-left:10px;font-size:9px}.td-checkbox[_ngcontent-%COMP%]{width:10px}.button[_ngcontent-%COMP%]{width:9px;height:9px}}']})}}return n})()},{path:"FAQ",component:(()=>{class n{email(){return"patrikandclaudia2025@gmail.com"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ni({type:n,selectors:[["app-faq"]],decls:45,vars:1,consts:[[1,"page-headline"],[1,"faq-container"],[1,"intro"],[1,"question"],[1,"answer"],["href","https://www.google.com/maps/search/Hotels+near+Restaurant+River+on+The+Pier+Gothenburg","target","_blank"],[2,"margin-top","1em"],[3,"routerLink"]],template:function(r,i){1&r&&(ee(0,"div",0),ce(1,"FAQ"),re(),ee(2,"div",1)(3,"p",2),ce(4,"We know that many of you have gone to great lengths to make it to our wedding, travelling in from various parts around the world. For this we are truly grateful. In order to ease the stress we've put together this FAQ that hopefully will shine light on some practical aspects of your journey. If you have any other questions than those listed below, please be in touch with us through a channel of your choice."),re(),ee(5,"div",3),ce(6,"What suitable accomodation is available?"),re(),ee(7,"div",4),ce(8,'We recommend "Quality Hotel 11" located right next to the venue of the wedding party. The price is ca: 2000 SEK / 1300 DKK / 175 EUR per night for a double room including breakfast. Booking is made by contacting the hotel directly on +46 31 7791111. Use discount code '),ee(9,"i"),ce(10,"RIVER"),re(),ce(11,' to obtain 15 % discount on previously mentioned prices. Another option is "Hotel Villan", also very near the venue of the party. For other hotel options near Eriksberg click '),ee(12,"a",5),ce(13,"here."),re(),ee(14,"div",6)(15,"b"),ce(16,"Note:"),re(),ce(17," Due to the fact the finals of Gothia Cup, the largest youth football tournament in the world, are being played on our wedding weekend Quality Hotell 11 is not available until the 19th."),re()(),ee(18,"div",3),ce(19,"How do I transport myself to, from and around the wedding?"),re(),ee(20,"div",4),ce(21,'Public transportation is quite decent in Gothenburg, once you get the hang of it. Download the app "V\xe4sttrafik ToGo" and buy tickets directly using your bank card. There is no need to sign up for an account. The same ticket is valid on all V\xe4sttrafik buses, trams and ferries. The app language should pop up as English as long as your phone\'s language is not set to Swedish. The ceremony, held at Domkyrkan in the city center of Gothenburg, is right next to a bus stop with the same name, "Domkyrkan". Between the church and the wedding party transportation is arranged as we have chartered a boat that will take us on a scenic tour along the harbour of Gothenburg before dropping us off at Restaurant River On The Pier in Eriksberg. The restaurant closes at 02:00, if you are in need of transportation home or to your hotel, buses run every 10-15 min through the night from bus stop "Eriksbergtorget", some 200 meters from the restaurant, to the city center. If you prefer taxi, Taxi G\xf6teborg is a trustworthy and well established taxi company that can be reached on +46 31 650000. '),re(),ee(22,"div",3),ce(23,"I would like to hold a speech, who do I contact?"),re(),ee(24,"div",4),ce(25,"Please be in touch with toastmaster, Per Christian (PC) Reithe, using the "),ee(26,"a",7),ce(27,"Contact form"),re(),ce(28,"."),re(),ee(29,"div",3),ce(30,"Can I bring children to the wedding?"),re(),ee(31,"div",4),ce(32,"As much as we want to include the children in our life, for this occasion we are thinking an evening for grown-ups to enjoy. Of course, if you have a newborn or toddler dependent on their parents we expect them to come with you."),re(),ee(33,"div",3),ce(34,"What is the dresscode for the occasion?"),re(),ee(35,"div",4),ce(36,"Cocktail"),re(),ee(37,"div",3),ce(38,"If I have got an allergy, how do I let the kitchen know?"),re(),ee(39,"div",4),ce(40,"Please let us know through the RSVP form and we will accomodate that."),re(),ee(41,"div",3),ce(42,"What is the Registry?"),re(),ee(43,"div",4),ce(44,"Our deepest wish is you will find your way to attend the wedding. If, in addition to that, you want to share with us a wedding gift the Registry is nothing more than a wishlist of ours. It's the digital equivalent of a piece of paper on a pinboard - once you've selected something just click the checkbox and the item will be crossed out. That way we can avoid doubles. It's also possible to unclick an item, should you mark one accidently or change your mind."),re()()),2&r&&(tt(26),yt("routerLink","/Contact"))},dependencies:[Gh],styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.faq-container[_ngcontent-%COMP%]{margin:2em}.intro[_ngcontent-%COMP%]{font-size:16px;margin-bottom:2em}.question[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.answer[_ngcontent-%COMP%]{font-size:14px;margin-bottom:2em}a[_ngcontent-%COMP%]{text-decoration:none;color:#00f}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}.intro[_ngcontent-%COMP%], .question[_ngcontent-%COMP%]{font-size:14px}.answer[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}.intro[_ngcontent-%COMP%], .question[_ngcontent-%COMP%]{font-size:12px}.answer[_ngcontent-%COMP%]{font-size:10px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}.intro[_ngcontent-%COMP%], .question[_ngcontent-%COMP%]{font-size:11px}.answer[_ngcontent-%COMP%]{font-size:9px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}.intro[_ngcontent-%COMP%], .question[_ngcontent-%COMP%]{font-size:10px}.answer[_ngcontent-%COMP%]{font-size:8px}}"]})}}return n})()},{path:"Contact",component:R_e},{path:"Rsvp",component:eIe},{path:"**",component:P_e}];let dIe=(()=>{class n{constructor(){const t=NW(i4_firebase);try{const r=Tfe(t,{provider:new GP("6LeVw6YqAAAAAMSHu5q94FNCOdQgnV48JjOidVRE"),isTokenAutoRefreshEnabled:!0});console.log("AppCheck init OK"),function Afe(n,e){return qP.apply(this,arguments)}(r,!0).then(i=>{localStorage.setItem("firebaseAppCheckToken",i.token)}).catch(i=>{console.error("AppCheck Error:",i)})}catch(r){console.log("AppCheck init failed,"+r)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n,bootstrap:[Uie]})}static{this.\u0275inj=mi({providers:[s_e(()=>o_e())],imports:[ene,kue,Vie,aD.forRoot(uIe),sse.initializeApp(i4_firebase),Vce,ode]})}}return n})();Xte().bootstrapModule(dIe).catch(n=>console.error(n))},574:(ps,ar,Ge)=>{Ge.d(ar,{A:()=>nr});var R=Ge(401),Ae=Ge(779),M=Ge(631),Fe=Ge(398);class Ot{constructor(Xe,qe){this._delegate=Xe,this.firebase=qe,(0,M._addComponent)(Xe,new Ae.uA("app-compat",()=>this,"PUBLIC")),this.container=Xe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Xe){this._delegate.automaticDataCollectionEnabled=Xe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Xe=>{this._delegate.checkDestroyed(),Xe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,M.deleteApp)(this._delegate)))}_getService(Xe,qe=M._DEFAULT_ENTRY_NAME){var Gn;this._delegate.checkDestroyed();const gn=this._delegate.container.getProvider(Xe);return!gn.isInitialized()&&"EXPLICIT"===(null===(Gn=gn.getComponent())||void 0===Gn?void 0:Gn.instantiationMode)&&gn.initialize(),gn.getImmediate({identifier:qe})}_removeServiceInstance(Xe,qe=M._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Xe).clearInstance(qe)}_addComponent(Xe){(0,M._addComponent)(this._delegate,Xe)}_addOrOverwriteComponent(Xe){(0,M._addOrOverwriteComponent)(this._delegate,Xe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const bn=new R.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ae=function ft(){const mt=function kt(mt){const Xe={},qe={__esModule:!0,initializeApp:function Wt(rt,Ie={}){const K=M.initializeApp(rt,Ie);if((0,R.gR)(Xe,K.name))return Xe[K.name];const je=new mt(K,qe);return Xe[K.name]=je,je},app:gn,registerVersion:M.registerVersion,setLogLevel:M.setLogLevel,onLog:M.onLog,apps:null,SDK_VERSION:M.SDK_VERSION,INTERNAL:{registerComponent:function Ur(rt){const Ie=rt.name,K=Ie.replace("-compat","");if(M._registerComponent(rt)&&"PUBLIC"===rt.type){const je=(it=gn())=>{if("function"!=typeof it[K])throw bn.create("invalid-app-argument",{appName:Ie});return it[K]()};void 0!==rt.serviceProps&&(0,R.zw)(je,rt.serviceProps),qe[K]=je,mt.prototype[K]=function(...it){return this._getService.bind(this,Ie).apply(this,rt.multipleInstances?it:[])}}return"PUBLIC"===rt.type?qe[K]:null},removeApp:function Gn(rt){delete Xe[rt]},useAsService:function vt(rt,Ie){return"serverAuth"===Ie?null:Ie},modularAPIs:M}};function gn(rt){if(!(0,R.gR)(Xe,rt=rt||M._DEFAULT_ENTRY_NAME))throw bn.create("no-app",{appName:rt});return Xe[rt]}return qe.default=qe,Object.defineProperty(qe,"apps",{get:function Gt(){return Object.keys(Xe).map(rt=>Xe[rt])}}),gn.App=mt,qe}(Ot);return mt.INTERNAL=Object.assign(Object.assign({},mt.INTERNAL),{createFirebaseNamespace:ft,extendNamespace:function Xe(qe){(0,R.zw)(mt,qe)},createSubscribe:R.tD,ErrorFactory:R.FA,deepExtend:R.zw}),mt}(),ge=new Fe.Vy("@firebase/app-compat");try{const mt=(0,R.mS)();if(void 0!==mt.firebase){ge.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const Xe=mt.firebase.SDK_VERSION;Xe&&Xe.indexOf("LITE")>=0&&ge.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const nr=ae;!function At(mt){(0,M.registerVersion)("@firebase/app-compat","0.2.43",mt)}()},631:(ps,ar,Ge)=>{Ge.r(ar),Ge.d(ar,{FirebaseError:()=>Fe.g,SDK_VERSION:()=>Tr,_DEFAULT_ENTRY_NAME:()=>W,_addComponent:()=>ye,_addOrOverwriteComponent:()=>pe,_apps:()=>Q,_clearComponents:()=>yr,_components:()=>se,_getProvider:()=>Jt,_isFirebaseApp:()=>Vt,_isFirebaseServerApp:()=>_n,_registerComponent:()=>Qe,_removeServiceInstance:()=>Ke,_serverApps:()=>$,deleteApp:()=>Ls,getApp:()=>ro,getApps:()=>Po,initializeApp:()=>jt,initializeServerApp:()=>pi,onLog:()=>Vs,registerVersion:()=>es,setLogLevel:()=>vr});var R=Ge(467),Ae=Ge(779),M=Ge(398),Fe=Ge(401),Ot=Ge(749);class pn{constructor(le){this.container=le}getPlatformInfoString(){return this.container.getProviders().map(C=>{if(function bn(xe){const le=xe.getComponent();return"VERSION"===le?.type}(C)){const E=C.getImmediate();return`${E.library}/${E.version}`}return null}).filter(C=>C).join(" ")}}const kt="@firebase/app",ft="0.10.13",ae=new M.Vy("@firebase/app"),W="[DEFAULT]",te={[kt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Q=new Map,$=new Map,se=new Map;function ye(xe,le){try{xe.container.addComponent(le)}catch(C){ae.debug(`Component ${le.name} failed to register with FirebaseApp ${xe.name}`,C)}}function pe(xe,le){xe.container.addOrOverwriteComponent(le)}function Qe(xe){const le=xe.name;if(se.has(le))return ae.debug(`There were multiple attempts to register component ${le}.`),!1;se.set(le,xe);for(const C of Q.values())ye(C,xe);for(const C of $.values())ye(C,xe);return!0}function Jt(xe,le){const C=xe.container.getProvider("heartbeat").getImmediate({optional:!0});return C&&C.triggerHeartbeat(),xe.container.getProvider(le)}function Ke(xe,le,C=W){Jt(xe,le).clearInstance(C)}function Vt(xe){return void 0!==xe.options}function _n(xe){return void 0!==xe.settings}function yr(){se.clear()}const Lt=new Fe.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class qn{constructor(le,C,E){this._isDeleted=!1,this._options=Object.assign({},le),this._config=Object.assign({},C),this._name=C.name,this._automaticDataCollectionEnabled=C.automaticDataCollectionEnabled,this._container=E,this.container.addComponent(new Ae.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(le){this.checkDestroyed(),this._automaticDataCollectionEnabled=le}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(le){this._isDeleted=le}checkDestroyed(){if(this.isDeleted)throw Lt.create("app-deleted",{appName:this._name})}}class lr extends qn{constructor(le,C,E,T){const x=void 0!==C.automaticDataCollectionEnabled&&C.automaticDataCollectionEnabled,O={name:E,automaticDataCollectionEnabled:x};super(void 0!==le.apiKey?le:le.options,O,T),this._serverConfig=Object.assign({automaticDataCollectionEnabled:x},C),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,C.releaseOnDeref=void 0,es(kt,ft,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(le){this.isDeleted||(this._refCount++,void 0!==le&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(le,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ls(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Lt.create("server-app-deleted")}}const Tr="10.14.1";function jt(xe,le={}){let C=xe;"object"!=typeof le&&(le={name:le});const E=Object.assign({name:W,automaticDataCollectionEnabled:!1},le),T=E.name;if("string"!=typeof T||!T)throw Lt.create("bad-app-name",{appName:String(T)});if(C||(C=(0,Fe.T9)()),!C)throw Lt.create("no-options");const x=Q.get(T);if(x){if((0,Fe.bD)(C,x.options)&&(0,Fe.bD)(E,x.config))return x;throw Lt.create("duplicate-app",{appName:T})}const O=new Ae.h1(T);for(const Ee of se.values())O.addComponent(Ee);const oe=new qn(C,E,O);return Q.set(T,oe),oe}function pi(xe,le){if((0,Fe.Bd)()&&!(0,Fe.p7)())throw Lt.create("invalid-server-app-environment");let C;void 0===le.automaticDataCollectionEnabled&&(le.automaticDataCollectionEnabled=!1),C=Vt(xe)?xe.options:xe;const E=Object.assign(Object.assign({},le),C);if(void 0!==E.releaseOnDeref&&delete E.releaseOnDeref,void 0!==le.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Lt.create("finalization-registry-not-supported",{});const x=""+(He=JSON.stringify(E),[...He].reduce((Dt,Ve)=>Math.imul(31,Dt)+Ve.charCodeAt(0)|0,0)),O=$.get(x);var He;if(O)return O.incRefCount(le.releaseOnDeref),O;const oe=new Ae.h1(x);for(const He of se.values())oe.addComponent(He);const Ee=new lr(C,le,x,oe);return $.set(x,Ee),Ee}function ro(xe=W){const le=Q.get(xe);if(!le&&xe===W&&(0,Fe.T9)())return jt();if(!le)throw Lt.create("no-app",{appName:xe});return le}function Po(){return Array.from(Q.values())}function Ls(xe){return gi.apply(this,arguments)}function gi(){return(gi=(0,R.A)(function*(xe){let le=!1;const C=xe.name;Q.has(C)?(le=!0,Q.delete(C)):$.has(C)&&xe.decRefCount()<=0&&($.delete(C),le=!0),le&&(yield Promise.all(xe.container.getProviders().map(E=>E.delete())),xe.isDeleted=!0)})).apply(this,arguments)}function es(xe,le,C){var E;let T=null!==(E=te[xe])&&void 0!==E?E:xe;C&&(T+=`-${C}`);const x=T.match(/\s|\//),O=le.match(/\s|\//);if(x||O){const oe=[`Unable to register library "${T}" with version "${le}":`];return x&&oe.push(`library name "${T}" contains illegal characters (whitespace or "/")`),x&&O&&oe.push("and"),O&&oe.push(`version name "${le}" contains illegal characters (whitespace or "/")`),void ae.warn(oe.join(" "))}Qe(new Ae.uA(`${T}-version`,()=>({library:T,version:le}),"VERSION"))}function Vs(xe,le){if(null!==xe&&"function"!=typeof xe)throw Lt.create("invalid-log-argument");(0,M.Ey)(xe,le)}function vr(xe){(0,M.He)(xe)}const Oi="firebase-heartbeat-database",Fn=1,br="firebase-heartbeat-store";let Kn=null;function io(){return Kn||(Kn=(0,Ot.P2)(Oi,Fn,{upgrade:(xe,le)=>{if(0===le)try{xe.createObjectStore(br)}catch(C){console.warn(C)}}}).catch(xe=>{throw Lt.create("idb-open",{originalErrorMessage:xe.message})})),Kn}function Xt(){return(Xt=(0,R.A)(function*(xe){try{const C=(yield io()).transaction(br),E=yield C.objectStore(br).get(ns(xe));return yield C.done,E}catch(le){if(le instanceof Fe.g)ae.warn(le.message);else{const C=Lt.create("idb-get",{originalErrorMessage:le?.message});ae.warn(C.message)}}})).apply(this,arguments)}function ki(xe,le){return gs.apply(this,arguments)}function gs(){return(gs=(0,R.A)(function*(xe,le){try{const E=(yield io()).transaction(br,"readwrite");yield E.objectStore(br).put(le,ns(xe)),yield E.done}catch(C){if(C instanceof Fe.g)ae.warn(C.message);else{const E=Lt.create("idb-set",{originalErrorMessage:C?.message});ae.warn(E.message)}}})).apply(this,arguments)}function ns(xe){return`${xe.name}!${xe.options.appId}`}class Br{constructor(le){this.container=le,this._heartbeatsCache=null;const C=this.container.getProvider("app").getImmediate();this._storage=new ao(C),this._heartbeatsCachePromise=this._storage.read().then(E=>(this._heartbeatsCache=E,E))}triggerHeartbeat(){var le=this;return(0,R.A)(function*(){var C,E;try{const x=le.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),O=so();return null==(null===(C=le._heartbeatsCache)||void 0===C?void 0:C.heartbeats)&&(le._heartbeatsCache=yield le._heartbeatsCachePromise,null==(null===(E=le._heartbeatsCache)||void 0===E?void 0:E.heartbeats))||le._heartbeatsCache.lastSentHeartbeatDate===O||le._heartbeatsCache.heartbeats.some(oe=>oe.date===O)?void 0:(le._heartbeatsCache.heartbeats.push({date:O,agent:x}),le._heartbeatsCache.heartbeats=le._heartbeatsCache.heartbeats.filter(oe=>{const Ee=new Date(oe.date).valueOf();return Date.now()-Ee<=2592e6}),le._storage.overwrite(le._heartbeatsCache))}catch(T){ae.warn(T)}})()}getHeartbeatsHeader(){var le=this;return(0,R.A)(function*(){var C;try{if(null===le._heartbeatsCache&&(yield le._heartbeatsCachePromise),null==(null===(C=le._heartbeatsCache)||void 0===C?void 0:C.heartbeats)||0===le._heartbeatsCache.heartbeats.length)return"";const E=so(),{heartbeatsToSend:T,unsentEntries:x}=function oo(xe,le=1024){const C=[];let E=xe.slice();for(const T of xe){const x=C.find(O=>O.agent===T.agent);if(x){if(x.dates.push(T.date),Mo(C)>le){x.dates.pop();break}}else if(C.push({agent:T.agent,dates:[T.date]}),Mo(C)>le){C.pop();break}E=E.slice(1)}return{heartbeatsToSend:C,unsentEntries:E}}(le._heartbeatsCache.heartbeats),O=(0,Fe.Uj)(JSON.stringify({version:2,heartbeats:T}));return le._heartbeatsCache.lastSentHeartbeatDate=E,x.length>0?(le._heartbeatsCache.heartbeats=x,yield le._storage.overwrite(le._heartbeatsCache)):(le._heartbeatsCache.heartbeats=[],le._storage.overwrite(le._heartbeatsCache)),O}catch(E){return ae.warn(E),""}})()}}function so(){return(new Date).toISOString().substring(0,10)}class ao{constructor(le){this.app=le,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,R.A)(function*(){return!!(0,Fe.zW)()&&(0,Fe.eX)().then(()=>!0).catch(()=>!1)})()}read(){var le=this;return(0,R.A)(function*(){if(yield le._canUseIndexedDBPromise){const E=yield function ts(xe){return Xt.apply(this,arguments)}(le.app);return E?.heartbeats?E:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(le){var C=this;return(0,R.A)(function*(){var E;if(yield C._canUseIndexedDBPromise){const x=yield C.read();return ki(C.app,{lastSentHeartbeatDate:null!==(E=le.lastSentHeartbeatDate)&&void 0!==E?E:x.lastSentHeartbeatDate,heartbeats:le.heartbeats})}})()}add(le){var C=this;return(0,R.A)(function*(){var E;if(yield C._canUseIndexedDBPromise){const x=yield C.read();return ki(C.app,{lastSentHeartbeatDate:null!==(E=le.lastSentHeartbeatDate)&&void 0!==E?E:x.lastSentHeartbeatDate,heartbeats:[...x.heartbeats,...le.heartbeats]})}})()}}function Mo(xe){return(0,Fe.Uj)(JSON.stringify({version:2,heartbeats:xe})).length}!function Ia(xe){Qe(new Ae.uA("platform-logger",le=>new pn(le),"PRIVATE")),Qe(new Ae.uA("heartbeat",le=>new Br(le),"PRIVATE")),es(kt,ft,xe),es(kt,ft,"esm2017"),es("fire-js","")}("")},779:(ps,ar,Ge)=>{Ge.d(ar,{h1:()=>kt,uA:()=>M});var R=Ge(467),Ae=Ge(401);class M{constructor(ae,ge,Le){this.name=ae,this.instanceFactory=ge,this.type=Le,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ae){return this.instantiationMode=ae,this}setMultipleInstances(ae){return this.multipleInstances=ae,this}setServiceProps(ae){return this.serviceProps=ae,this}setInstanceCreatedCallback(ae){return this.onInstanceCreated=ae,this}}const Fe="[DEFAULT]";class Ot{constructor(ae,ge){this.name=ae,this.container=ge,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ae){const ge=this.normalizeInstanceIdentifier(ae);if(!this.instancesDeferred.has(ge)){const Le=new Ae.cY;if(this.instancesDeferred.set(ge,Le),this.isInitialized(ge)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:ge});at&&Le.resolve(at)}catch{}}return this.instancesDeferred.get(ge).promise}getImmediate(ae){var ge;const Le=this.normalizeInstanceIdentifier(ae?.identifier),at=null!==(ge=ae?.optional)&&void 0!==ge&&ge;if(!this.isInitialized(Le)&&!this.shouldAutoInitialize()){if(at)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Le})}catch(At){if(at)return null;throw At}}getComponent(){return this.component}setComponent(ae){if(ae.name!==this.name)throw Error(`Mismatching Component ${ae.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ae,this.shouldAutoInitialize()){if(function bn(ft){return"EAGER"===ft.instantiationMode}(ae))try{this.getOrInitializeService({instanceIdentifier:Fe})}catch{}for(const[ge,Le]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(ge);try{const At=this.getOrInitializeService({instanceIdentifier:at});Le.resolve(At)}catch{}}}}clearInstance(ae=Fe){this.instancesDeferred.delete(ae),this.instancesOptions.delete(ae),this.instances.delete(ae)}delete(){var ae=this;return(0,R.A)(function*(){const ge=Array.from(ae.instances.values());yield Promise.all([...ge.filter(Le=>"INTERNAL"in Le).map(Le=>Le.INTERNAL.delete()),...ge.filter(Le=>"_delete"in Le).map(Le=>Le._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ae=Fe){return this.instances.has(ae)}getOptions(ae=Fe){return this.instancesOptions.get(ae)||{}}initialize(ae={}){const{options:ge={}}=ae,Le=this.normalizeInstanceIdentifier(ae.instanceIdentifier);if(this.isInitialized(Le))throw Error(`${this.name}(${Le}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:Le,options:ge});for(const[At,nr]of this.instancesDeferred.entries())Le===this.normalizeInstanceIdentifier(At)&&nr.resolve(at);return at}onInit(ae,ge){var Le;const at=this.normalizeInstanceIdentifier(ge),At=null!==(Le=this.onInitCallbacks.get(at))&&void 0!==Le?Le:new Set;At.add(ae),this.onInitCallbacks.set(at,At);const nr=this.instances.get(at);return nr&&ae(nr,at),()=>{At.delete(ae)}}invokeOnInitCallbacks(ae,ge){const Le=this.onInitCallbacks.get(ge);if(Le)for(const at of Le)try{at(ae,ge)}catch{}}getOrInitializeService({instanceIdentifier:ae,options:ge={}}){let Le=this.instances.get(ae);if(!Le&&this.component&&(Le=this.component.instanceFactory(this.container,{instanceIdentifier:(ft=ae,ft===Fe?void 0:ft),options:ge}),this.instances.set(ae,Le),this.instancesOptions.set(ae,ge),this.invokeOnInitCallbacks(Le,ae),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ae,Le)}catch{}var ft;return Le||null}normalizeInstanceIdentifier(ae=Fe){return this.component?this.component.multipleInstances?ae:Fe:ae}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class kt{constructor(ae){this.name=ae,this.providers=new Map}addComponent(ae){const ge=this.getProvider(ae.name);if(ge.isComponentSet())throw new Error(`Component ${ae.name} has already been registered with ${this.name}`);ge.setComponent(ae)}addOrOverwriteComponent(ae){this.getProvider(ae.name).isComponentSet()&&this.providers.delete(ae.name),this.addComponent(ae)}getProvider(ae){if(this.providers.has(ae))return this.providers.get(ae);const ge=new Ot(ae,this);return this.providers.set(ae,ge),ge}getProviders(){return Array.from(this.providers.values())}}},398:(ps,ar,Ge)=>{Ge.d(ar,{$b:()=>Ae,Ey:()=>ft,He:()=>kt,Vy:()=>bn});const R=[];var Ae=function(ae){return ae[ae.DEBUG=0]="DEBUG",ae[ae.VERBOSE=1]="VERBOSE",ae[ae.INFO=2]="INFO",ae[ae.WARN=3]="WARN",ae[ae.ERROR=4]="ERROR",ae[ae.SILENT=5]="SILENT",ae}(Ae||{});const M={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},Fe=Ae.INFO,Ot={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},pn=(ae,ge,...Le)=>{if(ge<ae.logLevel)return;const at=(new Date).toISOString(),At=Ot[ge];if(!At)throw new Error(`Attempted to log a message with an invalid logType (value: ${ge})`);console[At](`[${at}]  ${ae.name}:`,...Le)};class bn{constructor(ge){this.name=ge,this._logLevel=Fe,this._logHandler=pn,this._userLogHandler=null,R.push(this)}get logLevel(){return this._logLevel}set logLevel(ge){if(!(ge in Ae))throw new TypeError(`Invalid value "${ge}" assigned to \`logLevel\``);this._logLevel=ge}setLogLevel(ge){this._logLevel="string"==typeof ge?M[ge]:ge}get logHandler(){return this._logHandler}set logHandler(ge){if("function"!=typeof ge)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ge}get userLogHandler(){return this._userLogHandler}set userLogHandler(ge){this._userLogHandler=ge}debug(...ge){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...ge),this._logHandler(this,Ae.DEBUG,...ge)}log(...ge){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...ge),this._logHandler(this,Ae.VERBOSE,...ge)}info(...ge){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...ge),this._logHandler(this,Ae.INFO,...ge)}warn(...ge){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...ge),this._logHandler(this,Ae.WARN,...ge)}error(...ge){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...ge),this._logHandler(this,Ae.ERROR,...ge)}}function kt(ae){R.forEach(ge=>{ge.setLogLevel(ae)})}function ft(ae,ge){for(const Le of R){let at=null;ge&&ge.level&&(at=M[ge.level]),Le.userLogHandler=null===ae?null:(At,nr,...mt)=>{const Xe=mt.map(qe=>{if(null==qe)return null;if("string"==typeof qe)return qe;if("number"==typeof qe||"boolean"==typeof qe)return qe.toString();if(qe instanceof Error)return qe.message;try{return JSON.stringify(qe)}catch{return null}}).filter(qe=>qe).join(" ");nr>=(at??At.logLevel)&&ae({level:Ae[nr].toLowerCase(),message:Xe,args:mt,type:At.name})}}}},46:(ps,ar,Ge)=>{var R=Ge(467),Ae=Ge(574),M=Ge(443),Fe=Ge(401),bn=(Ge(631),Ge(398),Ge(779));function kt(){return window}function ge(){return ge=(0,R.A)(function*(C,E,T){var x;const{BuildInfo:O}=kt();(0,M.au)(E.sessionId,"AuthEvent did not contain a session ID");const oe=yield function qe(C){return Gn.apply(this,arguments)}(E.sessionId),Ee={};return(0,M.av)()?Ee.ibi=O.packageName:(0,M.aw)()?Ee.apn=O.packageName:(0,M.ax)(C,"operation-not-supported-in-this-environment"),O.displayName&&(Ee.appDisplayName=O.displayName),Ee.sessionId=oe,(0,M.ay)(C,T,E.type,void 0,null!==(x=E.eventId)&&void 0!==x?x:void 0,Ee)}),ge.apply(this,arguments)}function at(){return(at=(0,R.A)(function*(C){const{BuildInfo:E}=kt(),T={};(0,M.av)()?T.iosBundleId=E.packageName:(0,M.aw)()?T.androidPackageName=E.packageName:(0,M.ax)(C,"operation-not-supported-in-this-environment"),yield(0,M.az)(C,T)})).apply(this,arguments)}function mt(){return(mt=(0,R.A)(function*(C,E,T){const{cordova:x}=kt();let O=()=>{};try{yield new Promise((oe,Ee)=>{let He=null;function Dt(){var Se;oe();const Ln=null===(Se=x.plugins.browsertab)||void 0===Se?void 0:Se.close;"function"==typeof Ln&&Ln(),"function"==typeof T?.close&&T.close()}function Ve(){He||(He=window.setTimeout(()=>{Ee((0,M.aB)(C,"redirect-cancelled-by-user"))},2e3))}function yn(){"visible"===document?.visibilityState&&Ve()}E.addPassiveListener(Dt),document.addEventListener("resume",Ve,!1),(0,M.aw)()&&document.addEventListener("visibilitychange",yn,!1),O=()=>{E.removePassiveListener(Dt),document.removeEventListener("resume",Ve,!1),document.removeEventListener("visibilitychange",yn,!1),He&&window.clearTimeout(He)}})}finally{O()}})).apply(this,arguments)}function Gn(){return(Gn=(0,R.A)(function*(C){const E=function gn(C){if((0,M.au)(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const E=new ArrayBuffer(C.length),T=new Uint8Array(E);for(let x=0;x<C.length;x++)T[x]=C.charCodeAt(x);return T}(C),T=yield crypto.subtle.digest("SHA-256",E);return Array.from(new Uint8Array(T)).map(O=>O.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Gt extends M.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(E=>{this.resolveInitialized=E})}addPassiveListener(E){this.passiveListeners.add(E)}removePassiveListener(E){this.passiveListeners.delete(E)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(E){return this.resolveInitialized(),this.passiveListeners.forEach(T=>T(E)),super.onEvent(E)}initialized(){var E=this;return(0,R.A)(function*(){yield E.initPromise})()}}function rt(C){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,R.A)(function*(C){const E=yield it()._get(St(C));return E&&(yield it()._remove(St(C))),E})).apply(this,arguments)}function je(){const C=[];for(let T=0;T<20;T++){const x=Math.floor(62*Math.random());C.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(x))}return C.join("")}function it(){return(0,M.aE)(M.b)}function St(C){return(0,M.aF)("authEvent",C.config.apiKey,C.name)}function ct(C){if(!C?.includes("?"))return{};const[E,...T]=C.split("?");return(0,Fe.I9)(T.join("?"))}const ti=class _r{constructor(){this._redirectPersistence=M.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=M.aG,this._overrideRedirectResult=M.aH}_initialize(E){var T=this;return(0,R.A)(function*(){const x=E._key();let O=T.eventManagers.get(x);return O||(O=new Gt(E),T.eventManagers.set(x,O),T.attachCallbackListeners(E,O)),O})()}_openPopup(E){(0,M.ax)(E,"operation-not-supported-in-this-environment")}_openRedirect(E,T,x,O){var oe=this;return(0,R.A)(function*(){!function Xe(C){var E,T,x,O,oe,Ee,He,Dt,Ve,yn;const Se=kt();(0,M.aC)("function"==typeof(null===(E=Se?.universalLinks)||void 0===E?void 0:E.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,M.aC)(typeof(null===(T=Se?.BuildInfo)||void 0===T?void 0:T.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,M.aC)("function"==typeof(null===(oe=null===(O=null===(x=Se?.cordova)||void 0===x?void 0:x.plugins)||void 0===O?void 0:O.browsertab)||void 0===oe?void 0:oe.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aC)("function"==typeof(null===(Dt=null===(He=null===(Ee=Se?.cordova)||void 0===Ee?void 0:Ee.plugins)||void 0===He?void 0:He.browsertab)||void 0===Dt?void 0:Dt.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aC)("function"==typeof(null===(yn=null===(Ve=Se?.cordova)||void 0===Ve?void 0:Ve.InAppBrowser)||void 0===yn?void 0:yn.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(E);const Ee=yield oe._initialize(E);yield Ee.initialized(),Ee.resetRedirect(),(0,M.aI)(),yield oe._originValidation(E);const He=function Ur(C,E,T=null){return{type:E,eventId:T,urlResponse:null,sessionId:je(),postBody:null,tenantId:C.tenantId,error:(0,M.aB)(C,"no-auth-event")}}(E,x,O);yield function vt(C,E){return it()._set(St(C),E)}(E,He);const Dt=yield function ae(C,E,T){return ge.apply(this,arguments)}(E,He,T),Ve=yield function At(C){const{cordova:E}=kt();return new Promise(T=>{E.plugins.browsertab.isAvailable(x=>{let O=null;x?E.plugins.browsertab.openUrl(C):O=E.InAppBrowser.open(C,(0,M.aA)()?"_blank":"_system","location=yes"),T(O)})})}(Dt);return function nr(C,E,T){return mt.apply(this,arguments)}(E,Ee,Ve)})()}_isIframeWebStorageSupported(E,T){throw new Error("Method not implemented.")}_originValidation(E){const T=E._key();return this.originValidationPromises[T]||(this.originValidationPromises[T]=function Le(C){return at.apply(this,arguments)}(E)),this.originValidationPromises[T]}attachCallbackListeners(E,T){const{universalLinks:x,handleOpenURL:O,BuildInfo:oe}=kt(),Ee=setTimeout((0,R.A)(function*(){yield rt(E),T.onEvent(Fs())}),500),He=function(){var yn=(0,R.A)(function*(Se){clearTimeout(Ee);const Ln=yield rt(E);let Us=null;Ln&&Se?.url&&(Us=function K(C,E){var T,x;const O=function an(C){const E=ct(C),T=E.link?decodeURIComponent(E.link):void 0,x=ct(T).link,O=E.deep_link_id?decodeURIComponent(E.deep_link_id):void 0;return ct(O).link||O||x||T||C}(E);if(O.includes("/__/auth/callback")){const oe=ct(O),Ee=oe.firebaseError?function kn(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(oe.firebaseError)):null,He=null===(x=null===(T=Ee?.code)||void 0===T?void 0:T.split("auth/"))||void 0===x?void 0:x[1],Dt=He?(0,M.aB)(He):null;return Dt?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:Dt,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:O,postBody:null}}return null}(Ln,Se.url)),T.onEvent(Us||Fs())});return function(Ln){return yn.apply(this,arguments)}}();typeof x<"u"&&"function"==typeof x.subscribe&&x.subscribe(null,He);const Dt=O,Ve=`${oe.packageName.toLowerCase()}://`;kt().handleOpenURL=function(){var yn=(0,R.A)(function*(Se){if(Se.toLowerCase().startsWith(Ve)&&He({url:Se}),"function"==typeof Dt)try{Dt(Se)}catch(Ln){console.error(Ln)}});return function(Se){return yn.apply(this,arguments)}}()}};function Fs(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,M.aB)("no-auth-event")}}function se(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function pe(C=(0,Fe.ZQ)()){return!("file:"!==se()&&"ionic:"!==se()&&"capacitor:"!==se()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function _n(){try{const C=self.localStorage,E=M.aN();if(C)return C.setItem(E,"1"),C.removeItem(E),!function Vt(C=(0,Fe.ZQ)()){return function Jt(){return(0,Fe.lT)()&&11===document?.documentMode}()||function Ke(C=(0,Fe.ZQ)()){return/Edge\/\d+/.test(C)}(C)}()||(0,Fe.zW)()}catch{return yr()&&(0,Fe.zW)()}return!1}function yr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ft(){return(function ye(){return"http:"===se()||"https:"===se()}()||(0,Fe.sr)()||pe())&&!function Qe(){return(0,Fe.lV)()||(0,Fe.Ll)()}()&&_n()&&!yr()}function Lt(){return pe()&&typeof document<"u"}function lr(){return(lr=(0,R.A)(function*(){return!!Lt()&&new Promise(C=>{const E=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(E),C(!0)})})})).apply(this,arguments)}const jt={LOCAL:"local",NONE:"none",SESSION:"session"},pi=M.aC,ro="persistence";function Ls(C){return gi.apply(this,arguments)}function gi(){return(gi=(0,R.A)(function*(C){yield C._initializationPromise;const E=Vs(),T=M.aF(ro,C.config.apiKey,C.name);E&&E.setItem(T,C._getPersistence())})).apply(this,arguments)}function Vs(){var C;try{return(null===(C=function Tr(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const vr=M.aC;class Oi{constructor(){this.browserResolver=M.aE(M.k),this.cordovaResolver=M.aE(ti),this.underlyingResolver=null,this._redirectPersistence=M.a,this._completeRedirectFn=M.aG,this._overrideRedirectResult=M.aH}_initialize(E){var T=this;return(0,R.A)(function*(){return yield T.selectUnderlyingResolver(),T.assertedUnderlyingResolver._initialize(E)})()}_openPopup(E,T,x,O){var oe=this;return(0,R.A)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openPopup(E,T,x,O)})()}_openRedirect(E,T,x,O){var oe=this;return(0,R.A)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._openRedirect(E,T,x,O)})()}_isIframeWebStorageSupported(E,T){this.assertedUnderlyingResolver._isIframeWebStorageSupported(E,T)}_originValidation(E){return this.assertedUnderlyingResolver._originValidation(E)}get _shouldInitProactively(){return Lt()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return vr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var E=this;return(0,R.A)(function*(){if(E.underlyingResolver)return;const T=yield function qn(){return lr.apply(this,arguments)}();E.underlyingResolver=T?E.cordovaResolver:E.browserResolver})()}}function Fn(C){return C.unwrap()}function Kn(C){return ts(C)}function ts(C){const{_tokenResponse:E}=C instanceof Fe.g?C.customData:C;if(!E)return null;if(!(C instanceof Fe.g)&&"temporaryProof"in E&&"phoneNumber"in E)return M.P.credentialFromResult(C);const T=E.providerId;if(!T||T===M.p.PASSWORD)return null;let x;switch(T){case M.p.GOOGLE:x=M.X;break;case M.p.FACEBOOK:x=M.W;break;case M.p.GITHUB:x=M.Y;break;case M.p.TWITTER:x=M.$;break;default:const{oauthIdToken:O,oauthAccessToken:oe,oauthTokenSecret:Ee,pendingToken:He,nonce:Dt}=E;return oe||Ee||O||He?He?T.startsWith("saml.")?M.aQ._create(T,He):M.N._fromParams({providerId:T,signInMethod:T,pendingToken:He,idToken:O,accessToken:oe}):new M.Z(T).credential({idToken:O,accessToken:oe,rawNonce:Dt}):null}return C instanceof Fe.g?x.credentialFromError(C):x.credentialFromResult(C)}function Xt(C,E){return E.catch(T=>{throw T instanceof Fe.g&&function io(C,E){var T;const x=null===(T=E.customData)||void 0===T?void 0:T._tokenResponse;if("auth/multi-factor-auth-required"===E?.code)E.resolver=new ns(C,M.as(C,E));else if(x){const O=ts(E),oe=E;O&&(oe.credential=O,oe.tenantId=x.tenantId||void 0,oe.email=x.email||void 0,oe.phoneNumber=x.phoneNumber||void 0)}}(C,T),T}).then(T=>{const O=T.user;return{operationType:T.operationType,credential:Kn(T),additionalUserInfo:M.aq(T),user:xr.getOrCreate(O)}})}function ki(C,E){return gs.apply(this,arguments)}function gs(){return(gs=(0,R.A)(function*(C,E){const T=yield E;return{verificationId:T.verificationId,confirm:x=>Xt(C,T.confirm(x))}})).apply(this,arguments)}class ns{constructor(E,T){this.resolver=T,this.auth=function br(C){return C.wrapped()}(E)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(E){return Xt(Fn(this.auth),this.resolver.resolveSignIn(E))}}class xr{constructor(E){this._delegate=E,this.multiFactor=M.at(E)}static getOrCreate(E){return xr.USER_MAP.has(E)||xr.USER_MAP.set(E,new xr(E)),xr.USER_MAP.get(E)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(E){return this._delegate.getIdTokenResult(E)}getIdToken(E){return this._delegate.getIdToken(E)}linkAndRetrieveDataWithCredential(E){return this.linkWithCredential(E)}linkWithCredential(E){var T=this;return(0,R.A)(function*(){return Xt(T.auth,M.a2(T._delegate,E))})()}linkWithPhoneNumber(E,T){var x=this;return(0,R.A)(function*(){return ki(x.auth,M.l(x._delegate,E,T))})()}linkWithPopup(E){var T=this;return(0,R.A)(function*(){return Xt(T.auth,M.d(T._delegate,E,Oi))})()}linkWithRedirect(E){var T=this;return(0,R.A)(function*(){return yield Ls(M.aJ(T.auth)),M.g(T._delegate,E,Oi)})()}reauthenticateAndRetrieveDataWithCredential(E){return this.reauthenticateWithCredential(E)}reauthenticateWithCredential(E){var T=this;return(0,R.A)(function*(){return Xt(T.auth,M.a3(T._delegate,E))})()}reauthenticateWithPhoneNumber(E,T){return ki(this.auth,M.r(this._delegate,E,T))}reauthenticateWithPopup(E){return Xt(this.auth,M.e(this._delegate,E,Oi))}reauthenticateWithRedirect(E){var T=this;return(0,R.A)(function*(){return yield Ls(M.aJ(T.auth)),M.h(T._delegate,E,Oi)})()}sendEmailVerification(E){return M.ag(this._delegate,E)}unlink(E){var T=this;return(0,R.A)(function*(){return yield M.ap(T._delegate,E),T})()}updateEmail(E){return M.al(this._delegate,E)}updatePassword(E){return M.am(this._delegate,E)}updatePhoneNumber(E){return M.u(this._delegate,E)}updateProfile(E){return M.ak(this._delegate,E)}verifyBeforeUpdateEmail(E,T){return M.ah(this._delegate,E,T)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}xr.USER_MAP=new WeakMap;const rr=M.aC;let Br=(()=>{class C{constructor(T,x){if(this.app=T,x.isInitialized())return this._delegate=x.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:O}=T.options;rr(O,"invalid-api-key",{appName:T.name}),rr(O,"invalid-api-key",{appName:T.name});const oe=typeof window<"u"?Oi:void 0;this._delegate=x.initialize({options:{persistence:oo(O,T.name),popupRedirectResolver:oe}}),this._delegate._updateErrorMap(M.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?xr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(T){this._delegate.languageCode=T}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(T){this._delegate.tenantId=T}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(T,x){M.K(this._delegate,T,x)}applyActionCode(T){return M.a7(this._delegate,T)}checkActionCode(T){return M.a8(this._delegate,T)}confirmPasswordReset(T,x){return M.a6(this._delegate,T,x)}createUserWithEmailAndPassword(T,x){var O=this;return(0,R.A)(function*(){return Xt(O._delegate,M.aa(O._delegate,T,x))})()}fetchProvidersForEmail(T){return this.fetchSignInMethodsForEmail(T)}fetchSignInMethodsForEmail(T){return M.af(this._delegate,T)}isSignInWithEmailLink(T){return M.ad(this._delegate,T)}getRedirectResult(){var T=this;return(0,R.A)(function*(){rr(Ft(),T._delegate,"operation-not-supported-in-this-environment");const x=yield M.j(T._delegate,Oi);return x?Xt(T._delegate,Promise.resolve(x)):{credential:null,user:null}})()}addFrameworkForLogging(T){!function W(C,E){(0,M.aJ)(C)._logFramework(E)}(this._delegate,T)}onAuthStateChanged(T,x,O){const{next:oe,error:Ee,complete:He}=so(T,x,O);return this._delegate.onAuthStateChanged(oe,Ee,He)}onIdTokenChanged(T,x,O){const{next:oe,error:Ee,complete:He}=so(T,x,O);return this._delegate.onIdTokenChanged(oe,Ee,He)}sendSignInLinkToEmail(T,x){return M.ac(this._delegate,T,x)}sendPasswordResetEmail(T,x){return M.a5(this._delegate,T,x||void 0)}setPersistence(T){var x=this;return(0,R.A)(function*(){let O;switch(function Po(C,E){pi(Object.values(jt).includes(E),C,"invalid-persistence-type"),(0,Fe.lV)()?pi(E!==jt.SESSION,C,"unsupported-persistence-type"):(0,Fe.Ll)()?pi(E===jt.NONE,C,"unsupported-persistence-type"):yr()?pi(E===jt.NONE||E===jt.LOCAL&&(0,Fe.zW)(),C,"unsupported-persistence-type"):pi(E===jt.NONE||_n(),C,"unsupported-persistence-type")}(x._delegate,T),T){case jt.SESSION:O=M.a;break;case jt.LOCAL:O=(yield M.aE(M.i)._isAvailable())?M.i:M.b;break;case jt.NONE:O=M.U;break;default:return M.ax("argument-error",{appName:x._delegate.name})}return x._delegate.setPersistence(O)})()}signInAndRetrieveDataWithCredential(T){return this.signInWithCredential(T)}signInAnonymously(){return Xt(this._delegate,M.a0(this._delegate))}signInWithCredential(T){return Xt(this._delegate,M.a1(this._delegate,T))}signInWithCustomToken(T){return Xt(this._delegate,M.a4(this._delegate,T))}signInWithEmailAndPassword(T,x){return Xt(this._delegate,M.ab(this._delegate,T,x))}signInWithEmailLink(T,x){return Xt(this._delegate,M.ae(this._delegate,T,x))}signInWithPhoneNumber(T,x){return ki(this._delegate,M.s(this._delegate,T,x))}signInWithPopup(T){var x=this;return(0,R.A)(function*(){return rr(Ft(),x._delegate,"operation-not-supported-in-this-environment"),Xt(x._delegate,M.c(x._delegate,T,Oi))})()}signInWithRedirect(T){var x=this;return(0,R.A)(function*(){return rr(Ft(),x._delegate,"operation-not-supported-in-this-environment"),yield Ls(x._delegate),M.f(x._delegate,T,Oi)})()}updateCurrentUser(T){return this._delegate.updateCurrentUser(T)}verifyPasswordResetCode(T){return M.a9(this._delegate,T)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=jt,C})();function so(C,E,T){let x=C;"function"!=typeof C&&({next:x,error:E,complete:T}=C);const O=x;return{next:Ee=>O(Ee&&xr.getOrCreate(Ee)),error:E,complete:T}}function oo(C,E){const T=function es(C,E){const T=Vs();if(!T)return[];const x=M.aF(ro,C,E);switch(T.getItem(x)){case jt.NONE:return[M.U];case jt.LOCAL:return[M.i,M.a];case jt.SESSION:return[M.a];default:return[]}}(C,E);if(typeof self<"u"&&!T.includes(M.i)&&T.push(M.i),typeof window<"u")for(const x of[M.b,M.a])T.includes(x)||T.push(x);return T.includes(M.U)||T.push(M.U),T}class ao{constructor(){this.providerId="phone",this._delegate=new M.P(Fn(Ae.A.auth()))}static credential(E,T){return M.P.credential(E,T)}verifyPhoneNumber(E,T){return this._delegate.verifyPhoneNumber(E,T)}unwrap(){return this._delegate}}ao.PHONE_SIGN_IN_METHOD=M.P.PHONE_SIGN_IN_METHOD,ao.PROVIDER_ID=M.P.PROVIDER_ID;const Mo=M.aC;class Ia{constructor(E,T,x=Ae.A.app()){var O;Mo(null===(O=x.options)||void 0===O?void 0:O.apiKey,"invalid-api-key",{appName:x.name}),this._delegate=new M.R(x.auth(),E,T),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function le(C){C.INTERNAL.registerComponent(new bn.uA("auth-compat",E=>{const T=E.getProvider("app-compat").getImmediate(),x=E.getProvider("auth");return new Br(T,x)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:M.A.EMAIL_SIGNIN,PASSWORD_RESET:M.A.PASSWORD_RESET,RECOVER_EMAIL:M.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:M.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:M.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:M.A.VERIFY_EMAIL}},EmailAuthProvider:M.V,FacebookAuthProvider:M.W,GithubAuthProvider:M.Y,GoogleAuthProvider:M.X,OAuthProvider:M.Z,SAMLAuthProvider:M._,PhoneAuthProvider:ao,PhoneMultiFactorGenerator:M.m,RecaptchaVerifier:Ia,TwitterAuthProvider:M.$,Auth:Br,AuthCredential:M.L,Error:Fe.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.5.14")}(Ae.A)},749:(ps,ar,Ge)=>{Ge.d(ar,{P2:()=>gn});var R=Ge(467);const Ae=(Ie,K)=>K.some(je=>Ie instanceof je);let M,Fe;const bn=new WeakMap,kt=new WeakMap,ft=new WeakMap,ae=new WeakMap,ge=new WeakMap;let At={get(Ie,K,je){if(Ie instanceof IDBTransaction){if("done"===K)return kt.get(Ie);if("objectStoreNames"===K)return Ie.objectStoreNames||ft.get(Ie);if("store"===K)return je.objectStoreNames[1]?void 0:je.objectStore(je.objectStoreNames[0])}return qe(Ie[K])},set:(Ie,K,je)=>(Ie[K]=je,!0),has:(Ie,K)=>Ie instanceof IDBTransaction&&("done"===K||"store"===K)||K in Ie};function Xe(Ie){return"function"==typeof Ie?function mt(Ie){return Ie!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pn(){return Fe||(Fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ie)?function(...K){return Ie.apply(Gn(this),K),qe(bn.get(this))}:function(...K){return qe(Ie.apply(Gn(this),K))}:function(K,...je){const it=Ie.call(Gn(this),K,...je);return ft.set(it,K.sort?K.sort():[K]),qe(it)}}(Ie):(Ie instanceof IDBTransaction&&function at(Ie){if(kt.has(Ie))return;const K=new Promise((je,it)=>{const St=()=>{Ie.removeEventListener("complete",kn),Ie.removeEventListener("error",an),Ie.removeEventListener("abort",an)},kn=()=>{je(),St()},an=()=>{it(Ie.error||new DOMException("AbortError","AbortError")),St()};Ie.addEventListener("complete",kn),Ie.addEventListener("error",an),Ie.addEventListener("abort",an)});kt.set(Ie,K)}(Ie),Ae(Ie,function Ot(){return M||(M=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ie,At):Ie)}function qe(Ie){if(Ie instanceof IDBRequest)return function Le(Ie){const K=new Promise((je,it)=>{const St=()=>{Ie.removeEventListener("success",kn),Ie.removeEventListener("error",an)},kn=()=>{je(qe(Ie.result)),St()},an=()=>{it(Ie.error),St()};Ie.addEventListener("success",kn),Ie.addEventListener("error",an)});return K.then(je=>{je instanceof IDBCursor&&bn.set(je,Ie)}).catch(()=>{}),ge.set(K,Ie),K}(Ie);if(ae.has(Ie))return ae.get(Ie);const K=Xe(Ie);return K!==Ie&&(ae.set(Ie,K),ge.set(K,Ie)),K}const Gn=Ie=>ge.get(Ie);function gn(Ie,K,{blocked:je,upgrade:it,blocking:St,terminated:kn}={}){const an=indexedDB.open(Ie,K),ct=qe(an);return it&&an.addEventListener("upgradeneeded",mn=>{it(qe(an.result),mn.oldVersion,mn.newVersion,qe(an.transaction),mn)}),je&&an.addEventListener("blocked",mn=>je(mn.oldVersion,mn.newVersion,mn)),ct.then(mn=>{kn&&mn.addEventListener("close",()=>kn()),St&&mn.addEventListener("versionchange",_r=>St(_r.oldVersion,_r.newVersion,_r))}).catch(()=>{}),ct}const Gt=["get","getKey","getAll","getAllKeys","count"],Ur=["put","add","delete","clear"],vt=new Map;function rt(Ie,K){if(!(Ie instanceof IDBDatabase)||K in Ie||"string"!=typeof K)return;if(vt.get(K))return vt.get(K);const je=K.replace(/FromIndex$/,""),it=K!==je,St=Ur.includes(je);if(!(je in(it?IDBIndex:IDBObjectStore).prototype)||!St&&!Gt.includes(je))return;const kn=function(){var an=(0,R.A)(function*(ct,...mn){const _r=this.transaction(ct,St?"readwrite":"readonly");let ti=_r.store;return it&&(ti=ti.index(mn.shift())),(yield Promise.all([ti[je](...mn),St&&_r.done]))[0]});return function(mn){return an.apply(this,arguments)}}();return vt.set(K,kn),kn}!function nr(Ie){At=Ie(At)}(Ie=>({...Ie,get:(K,je,it)=>rt(K,je)||Ie.get(K,je,it),has:(K,je)=>!!rt(K,je)||Ie.has(K,je)}))},467:(ps,ar,Ge)=>{function R(M,Fe,Ot,pn,bn,kt,ft){try{var ae=M[kt](ft),ge=ae.value}catch(Le){return void Ot(Le)}ae.done?Fe(ge):Promise.resolve(ge).then(pn,bn)}function Ae(M){return function(){var Fe=this,Ot=arguments;return new Promise(function(pn,bn){var kt=M.apply(Fe,Ot);function ft(ge){R(kt,pn,bn,ft,ae,"next",ge)}function ae(ge){R(kt,pn,bn,ft,ae,"throw",ge)}ft(void 0)})}}Ge.d(ar,{A:()=>Ae})},635:(ps,ar,Ge)=>{function Fe(W,te){var Q={};for(var $ in W)Object.prototype.hasOwnProperty.call(W,$)&&te.indexOf($)<0&&(Q[$]=W[$]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var se=0;for($=Object.getOwnPropertySymbols(W);se<$.length;se++)te.indexOf($[se])<0&&Object.prototype.propertyIsEnumerable.call(W,$[se])&&(Q[$[se]]=W[$[se]])}return Q}function Le(W,te,Q,$){return new(Q||(Q=Promise))(function(ye,pe){function Qe(Vt){try{Ke($.next(Vt))}catch(_n){pe(_n)}}function Jt(Vt){try{Ke($.throw(Vt))}catch(_n){pe(_n)}}function Ke(Vt){Vt.done?ye(Vt.value):function se(ye){return ye instanceof Q?ye:new Q(function(pe){pe(ye)})}(Vt.value).then(Qe,Jt)}Ke(($=$.apply(W,te||[])).next())})}function Wt(W){return this instanceof Wt?(this.v=W,this):new Wt(W)}function Gt(W,te,Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,$=Q.apply(W,te||[]),ye=[];return se=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Qe("next"),Qe("throw"),Qe("return",function pe(Ft){return function(Lt){return Promise.resolve(Lt).then(Ft,_n)}}),se[Symbol.asyncIterator]=function(){return this},se;function Qe(Ft,Lt){$[Ft]&&(se[Ft]=function(qn){return new Promise(function(lr,Tr){ye.push([Ft,qn,lr,Tr])>1||Jt(Ft,qn)})},Lt&&(se[Ft]=Lt(se[Ft])))}function Jt(Ft,Lt){try{!function Ke(Ft){Ft.value instanceof Wt?Promise.resolve(Ft.value.v).then(Vt,_n):yr(ye[0][2],Ft)}($[Ft](Lt))}catch(qn){yr(ye[0][3],qn)}}function Vt(Ft){Jt("next",Ft)}function _n(Ft){Jt("throw",Ft)}function yr(Ft,Lt){Ft(Lt),ye.shift(),ye.length&&Jt(ye[0][0],ye[0][1])}}function vt(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,te=W[Symbol.asyncIterator];return te?te.call(W):(W=function mt(W){var te="function"==typeof Symbol&&Symbol.iterator,Q=te&&W[te],$=0;if(Q)return Q.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&$>=W.length&&(W=void 0),{value:W&&W[$++],done:!W}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),Q={},$("next"),$("throw"),$("return"),Q[Symbol.asyncIterator]=function(){return this},Q);function $(ye){Q[ye]=W[ye]&&function(pe){return new Promise(function(Qe,Jt){!function se(ye,pe,Qe,Jt){Promise.resolve(Jt).then(function(Ke){ye({value:Ke,done:Qe})},pe)}(Qe,Jt,(pe=W[ye](pe)).done,pe.value)})}}}Ge.d(ar,{AQ:()=>Gt,N3:()=>Wt,Tt:()=>Fe,sH:()=>Le,xN:()=>vt}),"function"==typeof SuppressedError&&SuppressedError}},ps=>{ps(ps.s=26)}]);
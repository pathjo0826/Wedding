"use strict";(self.webpackChunkwedding_app=self.webpackChunkwedding_app||[]).push([[792],{401:(zi,Qn,Xe)=>{Xe.d(Qn,{Am:()=>ws,Bd:()=>X,FA:()=>he,Fy:()=>Sn,I9:()=>As,Im:()=>Nr,Ku:()=>se,Ll:()=>Te,T9:()=>Yn,Uj:()=>rt,XA:()=>St,ZQ:()=>je,bD:()=>to,c1:()=>dt,cY:()=>xt,eX:()=>Z,g:()=>Q,gR:()=>Rn,hp:()=>Di,jZ:()=>me,lT:()=>ln,lV:()=>zt,mS:()=>_t,nr:()=>Es,p7:()=>st,sr:()=>cn,tD:()=>yr,u:()=>ie,zW:()=>H,zw:()=>Ve});const ee=function(C){const T=[];let M=0;for(let k=0;k<C.length;k++){let U=C.charCodeAt(k);U<128?T[M++]=U:U<2048?(T[M++]=U>>6|192,T[M++]=63&U|128):55296==(64512&U)&&k+1<C.length&&56320==(64512&C.charCodeAt(k+1))?(U=65536+((1023&U)<<10)+(1023&C.charCodeAt(++k)),T[M++]=U>>18|240,T[M++]=U>>12&63|128,T[M++]=U>>6&63|128,T[M++]=63&U|128):(T[M++]=U>>12|224,T[M++]=U>>6&63|128,T[M++]=63&U|128)}return T},Jt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(C,T){if(!Array.isArray(C))throw Error("encodeByteArray takes an array as a parameter");this.init_();const M=T?this.byteToCharMapWebSafe_:this.byteToCharMap_,k=[];for(let U=0;U<C.length;U+=3){const we=C[U],De=U+1<C.length,Lt=De?C[U+1]:0,xn=U+2<C.length,He=xn?C[U+2]:0;let Vr=(15&Lt)<<2|He>>6,io=63&He;xn||(io=64,De||(Vr=64)),k.push(M[we>>2],M[(3&we)<<4|Lt>>4],M[Vr],M[io])}return k.join("")},encodeString(C,T){return this.HAS_NATIVE_SUPPORT&&!T?btoa(C):this.encodeByteArray(ee(C),T)},decodeString(C,T){return this.HAS_NATIVE_SUPPORT&&!T?atob(C):function(C){const T=[];let M=0,k=0;for(;M<C.length;){const U=C[M++];if(U<128)T[k++]=String.fromCharCode(U);else if(U>191&&U<224){const we=C[M++];T[k++]=String.fromCharCode((31&U)<<6|63&we)}else if(U>239&&U<365){const xn=((7&U)<<18|(63&C[M++])<<12|(63&C[M++])<<6|63&C[M++])-65536;T[k++]=String.fromCharCode(55296+(xn>>10)),T[k++]=String.fromCharCode(56320+(1023&xn))}else{const we=C[M++],De=C[M++];T[k++]=String.fromCharCode((15&U)<<12|(63&we)<<6|63&De)}}return T.join("")}(this.decodeStringToByteArray(C,T))},decodeStringToByteArray(C,T){this.init_();const M=T?this.charToByteMapWebSafe_:this.charToByteMap_,k=[];for(let U=0;U<C.length;){const we=M[C.charAt(U++)],Lt=U<C.length?M[C.charAt(U)]:0;++U;const He=U<C.length?M[C.charAt(U)]:64;++U;const Ke=U<C.length?M[C.charAt(U)]:64;if(++U,null==we||null==Lt||null==He||null==Ke)throw new qt;k.push(we<<2|Lt>>4),64!==He&&(k.push(Lt<<4&240|He>>2),64!==Ke&&k.push(He<<6&192|Ke))}return k},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let C=0;C<this.ENCODED_VALS.length;C++)this.byteToCharMap_[C]=this.ENCODED_VALS.charAt(C),this.charToByteMap_[this.byteToCharMap_[C]]=C,this.byteToCharMapWebSafe_[C]=this.ENCODED_VALS_WEBSAFE.charAt(C),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[C]]=C,C>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(C)]=C,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(C)]=C)}}};class qt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rt=function(C){return function(C){const T=ee(C);return Jt.encodeByteArray(T,!0)}(C).replace(/\./g,"")},ie=function(C){try{return Jt.decodeString(C,!0)}catch(T){console.error("base64Decode failed: ",T)}return null};function Ve(C,T){if(!(T instanceof Object))return T;switch(T.constructor){case Date:return new Date(T.getTime());case Object:void 0===C&&(C={});break;case Array:C=[];break;default:return T}for(const M in T)!T.hasOwnProperty(M)||!lt(M)||(C[M]=Ve(C[M],T[M]));return C}function lt(C){return"__proto__"!==C}function _t(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const We=()=>{try{return _t().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const C=process.env.__FIREBASE_DEFAULTS__;return C?JSON.parse(C):void 0})()||(()=>{if(typeof document>"u")return;let C;try{C=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const T=C&&ie(C[1]);return T&&JSON.parse(T)})()}catch(C){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${C}`)}},Yn=()=>{var C;return null===(C=We())||void 0===C?void 0:C.config},St=C=>{var T;return null===(T=We())||void 0===T?void 0:T[`_${C}`]};class xt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((T,M)=>{this.resolve=T,this.reject=M})}wrapCallback(T){return(M,k)=>{M?this.reject(M):this.resolve(k),"function"==typeof T&&(this.promise.catch(()=>{}),1===T.length?T(M):T(M,k))}}}function Sn(C,T){if(C.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const k=T||"demo-project",U=C.iat||0,we=C.sub||C.user_id;if(!we)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const De=Object.assign({iss:`https://securetoken.google.com/${k}`,aud:k,iat:U,exp:U+3600,auth_time:U,sub:we,user_id:we,firebase:{sign_in_provider:"custom",identities:{}}},C);return[rt(JSON.stringify({alg:"none",type:"JWT"})),rt(JSON.stringify(De)),""].join(".")}function je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function me(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function Te(){var C;const T=null===(C=We())||void 0===C?void 0:C.forceEnvironment;if("node"===T)return!0;if("browser"===T)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function X(){return typeof window<"u"||st()}function st(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function dt(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function cn(){const C="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof C&&void 0!==C.id}function zt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ln(){const C=je();return C.indexOf("MSIE ")>=0||C.indexOf("Trident/")>=0}function Es(){return!Te()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H(){try{return"object"==typeof indexedDB}catch{return!1}}function Z(){return new Promise((C,T)=>{try{let M=!0;const k="validate-browser-context-for-indexeddb-analytics-module",U=self.indexedDB.open(k);U.onsuccess=()=>{U.result.close(),M||self.indexedDB.deleteDatabase(k),C(!0)},U.onupgradeneeded=()=>{M=!1},U.onerror=()=>{var we;T((null===(we=U.error)||void 0===we?void 0:we.message)||"")}}catch(M){T(M)}})}class Q extends Error{constructor(T,M,k){super(M),this.code=T,this.customData=k,this.name="FirebaseError",Object.setPrototypeOf(this,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,he.prototype.create)}}class he{constructor(T,M,k){this.service=T,this.serviceName=M,this.errors=k}create(T,...M){const k=M[0]||{},U=`${this.service}/${T}`,we=this.errors[T],De=we?function le(C,T){return C.replace(it,(M,k)=>{const U=T[k];return null!=U?String(U):`<${k}?>`})}(we,k):"Error";return new Q(U,`${this.serviceName}: ${De} (${U}).`,k)}}const it=/\{\$([^}]+)}/g;function Rn(C,T){return Object.prototype.hasOwnProperty.call(C,T)}function Nr(C){for(const T in C)if(Object.prototype.hasOwnProperty.call(C,T))return!1;return!0}function to(C,T){if(C===T)return!0;const M=Object.keys(C),k=Object.keys(T);for(const U of M){if(!k.includes(U))return!1;const we=C[U],De=T[U];if(Is(we)&&Is(De)){if(!to(we,De))return!1}else if(we!==De)return!1}for(const U of k)if(!M.includes(U))return!1;return!0}function Is(C){return null!==C&&"object"==typeof C}function ws(C){const T=[];for(const[M,k]of Object.entries(C))Array.isArray(k)?k.forEach(U=>{T.push(encodeURIComponent(M)+"="+encodeURIComponent(U))}):T.push(encodeURIComponent(M)+"="+encodeURIComponent(k));return T.length?"&"+T.join("&"):""}function As(C){const T={};return C.replace(/^\?/,"").split("&").forEach(k=>{if(k){const[U,we]=k.split("=");T[decodeURIComponent(U)]=decodeURIComponent(we)}}),T}function Di(C){const T=C.indexOf("?");if(!T)return"";const M=C.indexOf("#",T);return C.substring(T,M>0?M:void 0)}function yr(C,T){const M=new ss(C,T);return M.subscribe.bind(M)}class ss{constructor(T,M){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=M,this.task.then(()=>{T(this)}).catch(k=>{this.error(k)})}next(T){this.forEachObserver(M=>{M.next(T)})}error(T){this.forEachObserver(M=>{M.error(T)}),this.close(T)}complete(){this.forEachObserver(T=>{T.complete()}),this.close()}subscribe(T,M,k){let U;if(void 0===T&&void 0===M&&void 0===k)throw new Error("Missing Observer.");U=function Or(C,T){if("object"!=typeof C||null===C)return!1;for(const M of T)if(M in C&&"function"==typeof C[M])return!0;return!1}(T,["next","error","complete"])?T:{next:T,error:M,complete:k},void 0===U.next&&(U.next=Pn),void 0===U.error&&(U.error=Pn),void 0===U.complete&&(U.complete=Pn);const we=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?U.error(this.finalError):U.complete()}catch{}}),this.observers.push(U),we}unsubscribeOne(T){void 0===this.observers||void 0===this.observers[T]||(delete this.observers[T],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(T){if(!this.finalized)for(let M=0;M<this.observers.length;M++)this.sendOne(M,T)}sendOne(T,M){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[T])try{M(this.observers[T])}catch(k){typeof console<"u"&&console.error&&console.error(k)}})}close(T){this.finalized||(this.finalized=!0,void 0!==T&&(this.finalError=T),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pn(){}function se(C){return C&&C._delegate?C._delegate:C}},994:(zi,Qn,Xe)=>{function D(n){return"function"==typeof n}function $e(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Me=$e(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ee(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class yt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(D(r))try{r()}catch(s){e=s instanceof Me?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Wt(s)}catch(o){e=e??[],o instanceof Me?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Me(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Wt(e);else{if(e instanceof yt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ee(t,e)}remove(e){const{_finalizers:t}=this;t&&ee(t,e),e instanceof yt&&e._removeParent(this)}}yt.EMPTY=(()=>{const n=new yt;return n.closed=!0,n})();const Jt=yt.EMPTY;function qt(n){return n instanceof yt||n&&"closed"in n&&D(n.remove)&&D(n.add)&&D(n.unsubscribe)}function Wt(n){D(n)?n():n.unsubscribe()}const rt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ie={setTimeout(n,e,...t){const{delegate:r}=ie;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=ie;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function pe(n){ie.setTimeout(()=>{const{onUnhandledError:e}=rt;if(!e)throw n;e(n)})}function Ve(){}const lt=vt("C",void 0,void 0);function vt(n,e,t){return{kind:n,value:e,error:t}}let qe=null;function We(n){if(rt.useDeprecatedSynchronousErrorHandling){const e=!qe;if(e&&(qe={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=qe;if(qe=null,t)throw r}}else n()}class Bn extends yt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qt(e)&&e.add(this)):this.destination=X}static create(e,t,r){return new Sn(e,t,r)}next(e){this.isStopped?Te(function Un(n){return vt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Te(function _t(n){return vt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Te(lt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Yn=Function.prototype.bind;function St(n,e){return Yn.call(n,e)}class xt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){je(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){je(r)}else je(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){je(t)}}}class Sn extends Bn{constructor(e,t,r){let i;if(super(),D(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&rt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&St(e.next,s),error:e.error&&St(e.error,s),complete:e.complete&&St(e.complete,s)}):i=e}this.destination=new xt(i)}}function je(n){rt.useDeprecatedSynchronousErrorHandling?function Cn(n){rt.useDeprecatedSynchronousErrorHandling&&qe&&(qe.errorThrown=!0,qe.error=n)}(n):pe(n)}function Te(n,e){const{onStoppedNotification:t}=rt;t&&ie.setTimeout(()=>t(n,e))}const X={closed:!0,next:Ve,error:function me(n){throw n},complete:Ve},st="function"==typeof Symbol&&Symbol.observable||"@@observable";function dt(n){return n}function zt(n){return 0===n.length?dt:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let pt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Mr(n){return n&&n instanceof Bn||function Zr(n){return n&&D(n.next)&&D(n.error)&&D(n.complete)}(n)&&qt(n)}(t)?t:new Sn(t,r,i);return We(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=ln(r))((i,s)=>{const o=new Sn({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[st](){return this}pipe(...t){return zt(t)(this)}toPromise(t){return new(t=ln(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function ln(n){var e;return null!==(e=n??rt.Promise)&&void 0!==e?e:Promise}const Es=$e(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let H=(()=>{class n extends pt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Z(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Es}next(t){We(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){We(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){We(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Jt:(this.currentObservers=null,s.push(t),new yt(()=>{this.currentObservers=null,ee(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new pt;return t.source=this,t}}return n.create=(e,t)=>new Z(e,t),n})();class Z extends H{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:Jt}}function te(n){return D(n?.lift)}function B(n){return e=>{if(te(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(n,e,t,r,i){return new he(n,e,t,r,i)}class he extends Bn{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function le(n,e){return B((t,r)=>{let i=0;t.subscribe(Q(r,s=>{r.next(n.call(e,s,i++))}))})}var it=Xe(635);const Tt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ze(n){return D(n?.then)}function At(n){return D(n[st])}function yn(n){return Symbol.asyncIterator&&D(n?.[Symbol.asyncIterator])}function Ti(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Rt=function Ct(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Rn(n){return D(n?.[Rt])}function lr(n){return(0,it.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,it.N3)(t.read());if(i)return yield(0,it.N3)(void 0);yield yield(0,it.N3)(r)}}finally{t.releaseLock()}})}function Nr(n){return D(n?.getReader)}function jn(n){if(n instanceof pt)return n;if(null!=n){if(At(n))return function to(n){return new pt(e=>{const t=n[st]();if(D(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Tt(n))return function Is(n){return new pt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(ze(n))return function Mc(n){return new pt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,pe)})}(n);if(yn(n))return As(n);if(Rn(n))return function ws(n){return new pt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Nr(n))return function Di(n){return As(lr(n))}(n)}throw Ti(n)}function As(n){return new pt(e=>{(function su(n,e){var t,r,i,s;return(0,it.sH)(this,void 0,void 0,function*(){try{for(t=(0,it.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function yr(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function $n(n,e,t=1/0){return D(e)?$n((r,i)=>le((s,o)=>e(r,s,i,o))(jn(n(r,i))),t):("number"==typeof e&&(t=e),B((r,i)=>function ss(n,e,t,r,i,s,o,a){const u=[];let d=0,g=0,m=!1;const v=()=>{m&&!u.length&&!d&&e.complete()},I=S=>d<r?b(S):u.push(S),b=S=>{s&&e.next(S),d++;let x=!1;jn(t(S,g++)).subscribe(Q(e,q=>{i?.(q),s?I(q):e.next(q)},()=>{x=!0},void 0,()=>{if(x)try{for(d--;u.length&&d<r;){const q=u.shift();o?yr(e,o,()=>b(q)):b(q)}v()}catch(q){e.error(q)}}))};return n.subscribe(Q(e,I,()=>{m=!0,v()})),()=>{a?.()}}(r,i,n,t)))}function Or(n=1/0){return $n(dt,n)}const Pn=new pt(n=>n.complete());function vr(n){return n[n.length-1]}function os(n){return D(vr(n))?n.pop():void 0}function as(n){return function no(n){return n&&D(n.schedule)}(vr(n))?n.pop():void 0}function gi(n,e=0){return B((t,r)=>{t.subscribe(Q(r,i=>yr(r,n,()=>r.next(i),e),()=>yr(r,n,()=>r.complete(),e),i=>yr(r,n,()=>r.error(i),e)))})}function kr(n,e=0){return B((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Xo(n,e){if(!n)throw new Error("Iterable cannot be null");return new pt(t=>{yr(t,e,()=>{const r=n[Symbol.asyncIterator]();yr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function C(n,e){return e?function se(n,e){if(null!=n){if(At(n))return function Cs(n,e){return jn(n).pipe(kr(e),gi(e))}(n,e);if(Tt(n))return function ro(n,e){return new pt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(ze(n))return function ou(n,e){return jn(n).pipe(kr(e),gi(e))}(n,e);if(yn(n))return Xo(n,e);if(Rn(n))return function au(n,e){return new pt(t=>{let r;return yr(t,e,()=>{r=n[Rt](),yr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>D(r?.return)&&r.return()})}(n,e);if(Nr(n))return function Re(n,e){return Xo(lr(n),e)}(n,e)}throw Ti(n)}(n,e):jn(n)}function T(...n){const e=as(n),t=function Nc(n,e){return"number"==typeof vr(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?jn(r[0]):Or(t)(C(r,e)):Pn}class M extends H{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function k(...n){return C(n,as(n))}function U(n={}){const{connector:e=(()=>new H),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,d=0,g=!1,m=!1;const v=()=>{a?.unsubscribe(),a=void 0},I=()=>{v(),o=u=void 0,g=m=!1},b=()=>{const S=o;I(),S?.unsubscribe()};return B((S,x)=>{d++,!m&&!g&&v();const q=u=u??e();x.add(()=>{d--,0===d&&!m&&!g&&(a=we(b,i))}),q.subscribe(x),!o&&d>0&&(o=new Sn({next:F=>q.next(F),error:F=>{m=!0,v(),a=we(I,t,F),q.error(F)},complete:()=>{g=!0,v(),a=we(I,r),q.complete()}}),jn(S).subscribe(o))})(s)}}function we(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Sn({next:()=>{r.unsubscribe(),n()}});return jn(e(...t)).subscribe(r)}function De(n,e){return B((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Q(r,u=>{i?.unsubscribe();let d=0;const g=s++;jn(n(u,g)).subscribe(i=Q(r,m=>r.next(e?e(u,m,g,d++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Lt(n,e=dt){return n=n??xn,B((t,r)=>{let i,s=!0;t.subscribe(Q(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function xn(n,e){return n===e}function He(n){for(let e in n)if(n[e]===He)return e;throw Error("Could not find renamed property on target object.")}function Jn(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ke(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ke).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Vr(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const io=He({__forward_ref__:He});function Nt(n){return n.__forward_ref__=Nt,n.toString=function(){return Ke(this())},n}function Je(n){return so(n)?n():n}function so(n){return"function"==typeof n&&n.hasOwnProperty(io)&&n.__forward_ref__===Nt}function Oc(n){return n&&!!n.\u0275providers}const Zo="https://g.co/ng/security#xss";class de extends Error{constructor(e,t){super(function kc(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Ze(n){return"string"==typeof n?n:null==n?"":String(n)}function uu(n,e){throw new de(-201,!1)}function mi(n,e){null==n&&function Qe(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Le(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function dr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Lc(n){return Ah(n,cu)||Ah(n,oo)}function Ah(n,e){return n.hasOwnProperty(e)?n[e]:null}function Uc(n){return n&&(n.hasOwnProperty(Ch)||n.hasOwnProperty(um))?n[Ch]:null}const cu=He({\u0275prov:He}),Ch=He({\u0275inj:He}),oo=He({ngInjectableDef:He}),um=He({ngInjectorDef:He});var ct=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ct||{});let bh;function Fr(n){const e=bh;return bh=n,e}function jc(n,e,t){const r=Lc(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&ct.Optional?null:void 0!==e?e:void uu(Ke(n))}const Ut=globalThis;class ve{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const du={},hu="__NG_DI_FLAG__",Ts="ngTempTokenPath",Ph=/\n/gm,Si="__source";let ea;function Ds(n){const e=ea;return ea=n,e}function Mh(n,e=ct.Default){if(void 0===ea)throw new de(-203,!1);return null===ea?jc(n,void 0,e):ea.get(n,e&ct.Optional?null:void 0,e)}function ye(n,e=ct.Default){return(function Bc(){return bh}()||Mh)(Je(n),e)}function xe(n,e=ct.Default){return ye(n,zc(e))}function zc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function fu(n){const e=[];for(let t=0;t<n.length;t++){const r=Je(n[t]);if(Array.isArray(r)){if(0===r.length)throw new de(900,!1);let i,s=ct.Default;for(let o=0;o<r.length;o++){const a=r[o],u=nI(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(ye(i,s))}else e.push(ye(r))}return e}function Ri(n,e){return n[hu]=e,n.prototype[hu]=e,n}function nI(n){return n[hu]}function Ss(n){return{toString:n}.toString()}var ta=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ta||{}),Hn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Hn||{});const Er={},ht=[],gu=He({\u0275cmp:He}),Gc=He({\u0275dir:He}),qc=He({\u0275pipe:He}),fm=He({\u0275mod:He}),Lr=He({\u0275fac:He}),mu=He({__NG_ELEMENT_ID__:He}),_u=He({__NG_ENV_ID__:He});function Nh(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Wc(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];ti(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Kc(n){return 3===n||4===n||6===n}function ti(n){return 64===n.charCodeAt(0)}function na(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||pm(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function pm(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const Qc="ng-template";function Yc(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==Nh(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Oh(n){return 4===n.type&&n.value!==Qc}function gm(n,e,t){return e===(4!==n.type||t?n.value:Qc)}function iI(n,e,t){let r=4;const i=n.attrs||[],s=function Vh(n){for(let e=0;e<n.length;e++)if(Kc(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!gm(n,u,t)||""===u&&1===e.length){if(ni(r))return!1;o=!0}}else{const d=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!Yc(n.attrs,d,t)){if(ni(r))return!1;o=!0}continue}const m=kh(8&r?"class":u,i,Oh(n),t);if(-1===m){if(ni(r))return!1;o=!0;continue}if(""!==d){let v;v=m>s?"":i[m+1].toLowerCase();const I=8&r?v:null;if(I&&-1!==Nh(I,d,0)||2&r&&d!==v){if(ni(r))return!1;o=!0}}}}else{if(!o&&!ni(r)&&!ni(u))return!1;if(o&&ni(u))continue;o=!1,r=u|1&r}}return ni(r)||o}function ni(n){return 0==(1&n)}function kh(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function mm(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Jc(n,e,t=!1){for(let r=0;r<e.length;r++)if(iI(n,e[r],t))return!0;return!1}function Lh(n,e){return n?":not("+e.trim()+")":e}function Uh(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ni(o)&&(e+=Lh(s,i),i=""),r=o,s=s||!ni(r);t++}return""!==i&&(e+=Lh(s,i)),e}function Ur(n){return Ss(()=>{const e=vm(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ta.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Hn.Emulated,styles:n.styles||ht,_:null,schemas:n.schemas||null,tView:null,id:""};el(t);const r=n.dependencies;return t.directiveDefs=tl(r,!1),t.pipeDefs=tl(r,!0),t.id=function sI(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function _m(n){return gt(n)||zn(n)}function $h(n){return null!==n}function ri(n){return Ss(()=>({type:n.type,bootstrap:n.bootstrap||ht,declarations:n.declarations||ht,imports:n.imports||ht,exports:n.exports||ht,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ym(n,e){if(null==n)return Er;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Ye(n){return Ss(()=>{const e=vm(n);return el(e),e})}function gt(n){return n[gu]||null}function zn(n){return n[Gc]||null}function Zn(n){return n[qc]||null}function Ir(n,e){const t=n[fm]||null;if(!t&&!0===e)throw new Error(`Type ${Ke(n)} does not have '\u0275mod' property.`);return t}function vm(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Er,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||ht,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ym(n.inputs,e),outputs:ym(n.outputs)}}function el(n){n.features?.forEach(e=>e(n))}function tl(n,e){if(!n)return null;const t=e?Zn:_m;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter($h)}const Zt=0,Pe=1,et=2,en=3,ii=4,yu=5,er=6,ra=7,bn=8,qi=9,ia=10,tt=11,ao=12,Em=13,Ps=14,Tn=15,uo=16,sa=17,_i=18,vu=19,nl=20,xs=21,Pi=22,Eu=23,co=24,ft=25,rl=1,il=2,Wi=7,lo=9,ir=11;function Br(n){return Array.isArray(n)&&"object"==typeof n[rl]}function wr(n){return Array.isArray(n)&&!0===n[rl]}function Im(n){return 0!=(4&n.flags)}function oa(n){return n.componentOffset>-1}function Gh(n){return 1==(1&n.flags)}function si(n){return!!n.template}function qh(n){return 0!=(512&n[et])}function ho(n,e){return n.hasOwnProperty(Lr)?n[Lr]:null}let tn=null,ol=!1;function yi(n){const e=tn;return tn=n,e}const ua={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Dn(n){if(!ca(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Rm(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function Sm(n){n.dirty=!0,function Dm(n){if(void 0===n.liveConsumerNode)return;const e=ol;ol=!0;try{for(const t of n.liveConsumerNode)t.dirty||Sm(t)}finally{ol=e}}(n),n.consumerMarkedDirty?.(n)}function Au(n){return n&&(n.nextProducerIndex=0),yi(n)}function Qh(n,e){if(yi(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(ca(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)po(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Rm(n){Ki(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Dn(t),r!==t.version))return!0}return!1}function Yh(n){if(Ki(n),ca(n))for(let e=0;e<n.producerNode.length;e++)po(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function po(n,e){if(function Cu(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Ki(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)po(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ki(i),i.producerIndexOfThis[r]=e}}function ca(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ki(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Xh=null;const ul=()=>{},gI=(()=>({...ua,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:ul}))();class mI{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function vi(){return ef}function ef(n){return n.type.prototype.ngOnChanges&&(n.setInput=yI),_I}function _I(){const n=cl(this),e=n?.current;if(e){const t=n.previous;if(t===Er)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function yI(n,e,t,r){const i=this.declaredInputs[t],s=cl(n)||function vI(n,e){return n[Fm]=e}(n,{previous:Er,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new mI(u&&u.currentValue,e,a===Er),n[r]=e}vi.ngInherit=!0;const Fm="__ngSimpleChanges__";function cl(n){return n[Fm]||null}const Ei=function(n,e,t){};function Ot(n){for(;Array.isArray(n);)n=n[Zt];return n}function dl(n,e){return Ot(e[n])}function hr(n,e){return Ot(e[n.index])}function Ms(n,e){return n.data[e]}function oi(n,e){const t=e[n];return Br(t)?t:t[Zt]}function ls(n,e){return null==e?null:n[e]}function Um(n){n[sa]=0}function AI(n){1024&n[et]||(n[et]|=1024,Bm(n,1))}function hl(n){1024&n[et]&&(n[et]&=-1025,Bm(n,-1))}function Bm(n,e){let t=n[en];if(null===t)return;t[yu]+=e;let r=t;for(t=t[en];null!==t&&(1===e&&1===r[yu]||-1===e&&0===r[yu]);)t[yu]+=e,r=t,t=t[en]}const Ge={lFrame:Nu(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function gl(){return Ge.bindingsEnabled}function ae(){return Ge.lFrame.lView}function Et(){return Ge.lFrame.tView}function sr(n){return Ge.lFrame.contextLView=n,n[bn]}function Ar(n){return Ge.lFrame.contextLView=null,n}function or(){let n=ml();for(;null!==n&&64===n.type;)n=n.parent;return n}function ml(){return Ge.lFrame.currentTNode}function Qi(n,e){const t=Ge.lFrame;t.currentTNode=n,t.isParent=e}function xu(){return Ge.lFrame.isParent}function go(){return Ge.lFrame.bindingIndex++}function Yi(n){const e=Ge.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function qm(n,e){const t=Ge.lFrame;t.bindingIndex=t.bindingRootIndex=n,lf(e)}function lf(n){Ge.lFrame.currentDirectiveIndex=n}function Mu(n){Ge.lFrame.currentQueryIndex=n}function SI(n){const e=n[Pe];return 2===e.type?e.declTNode:1===e.type?n[er]:null}function Km(n,e,t){if(t&ct.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&ct.Host||(i=SI(s),null===i||(s=s[Ps],10&i.type))););if(null===i)return!1;e=i,n=s}const r=Ge.lFrame=Qm();return r.currentTNode=e,r.lView=n,!0}function yl(n){const e=Qm(),t=n[Pe];Ge.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Qm(){const n=Ge.lFrame,e=null===n?null:n.child;return null===e?Nu(n):e}function Nu(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Ym(){const n=Ge.lFrame;return Ge.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Jm=Ym;function hf(){const n=Ym();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Cr(){return Ge.lFrame.selectedIndex}function mo(n){Ge.lFrame.selectedIndex=n}function dn(){const n=Ge.lFrame;return Ms(n.tView,n.selectedIndex)}let Zm=!0;function Ou(){return Zm}function ks(n){Zm=n}function vl(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:g}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),null!=g&&(n.destroyHooks??=[]).push(t,g)}}function El(n,e,t){wl(n,e,3,t)}function Il(n,e,t,r){(3&n[et])===t&&wl(n,e,t,r)}function ku(n,e){let t=n[et];(3&t)===e&&(t&=8191,t+=1,n[et]=t)}function wl(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&n[sa]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[sa]+=65536),(a<s||-1==s)&&(pf(n,t,e,u),n[sa]=(4294901760&n[sa])+u+2),u++}function e_(n,e){Ei(4,n,e);const t=yi(null);try{e.call(n)}finally{yi(t),Ei(5,n,e)}}function pf(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[et]>>13<n[sa]>>16&&(3&n[et])===e&&(n[et]+=8192,e_(a,s)):e_(a,s)}const la=-1;class da{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Al(n){return n!==la}function Vu(n){return 32767&n}function Fu(n,e){let t=function VI(n){return n>>16}(n),r=e;for(;t>0;)r=r[Ps],t--;return r}let yf=!0;function Cl(n){const e=yf;return yf=n,e}const i_=255,LI=5;let UI=0;const pr={};function bl(n,e){const t=s_(n,e);if(-1!==t)return t;const r=e[Pe];r.firstCreatePass&&(n.injectorIndex=e.length,Lu(r.data,n),Lu(e,null),Lu(r.blueprint,null));const i=ha(n,e),s=n.injectorIndex;if(Al(i)){const o=Vu(i),a=Fu(i,e),u=a[Pe].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function Lu(n,e){n.push(0,0,0,0,0,0,0,0,e)}function s_(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function ha(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Uu(i),null===r)return la;if(t++,i=i[Ps],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return la}function vf(n,e,t){!function BI(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(mu)&&(r=t[mu]),null==r&&(r=t[mu]=UI++);const i=r&i_;e.data[n+(i>>LI)]|=1<<i}(n,e,t)}function Tl(n,e,t){if(t&ct.Optional||void 0!==n)return n;uu()}function o_(n,e,t,r){if(t&ct.Optional&&void 0===r&&(r=null),!(t&(ct.Self|ct.Host))){const i=n[qi],s=Fr(void 0);try{return i?i.get(e,r,t&ct.Optional):jc(e,r,t&ct.Optional)}finally{Fr(s)}}return Tl(r,0,t)}function a_(n,e,t,r=ct.Default,i){if(null!==n){if(2048&e[et]&&!(r&ct.Self)){const o=function GI(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[et]&&!(512&o[et]);){const a=Dl(s,o,t,r|ct.Self,pr);if(a!==pr)return a;let u=s.parent;if(!u){const d=o[nl];if(d){const g=d.get(t,pr,r);if(g!==pr)return g}u=Uu(o),o=o[Ps]}s=u}return i}(n,e,t,r,pr);if(o!==pr)return o}const s=Dl(n,e,t,r,pr);if(s!==pr)return s}return o_(e,t,r,i)}function Dl(n,e,t,r,i){const s=function HI(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(mu)?n[mu]:void 0;return"number"==typeof e?e>=0?e&i_:If:e}(t);if("function"==typeof s){if(!Km(e,n,r))return r&ct.Host?Tl(i,0,r):o_(e,t,r,i);try{let o;if(o=s(r),null!=o||r&ct.Optional)return o;uu()}finally{Jm()}}else if("number"==typeof s){let o=null,a=s_(n,e),u=la,d=r&ct.Host?e[Tn][er]:null;for((-1===a||r&ct.SkipSelf)&&(u=-1===a?ha(n,e):e[a+8],u!==la&&Ef(r,!1)?(o=e[Pe],a=Vu(u),e=Fu(u,e)):a=-1);-1!==a;){const g=e[Pe];if(u_(s,a,g.data)){const m=$I(a,e,t,o,r,d);if(m!==pr)return m}u=e[a+8],u!==la&&Ef(r,e[Pe].data[a+8]===d)&&u_(s,a,e)?(o=g,a=Vu(u),e=Fu(u,e)):a=-1}}return i}function $I(n,e,t,r,i,s){const o=e[Pe],a=o.data[n+8],g=function Sl(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,u=n.directiveStart,g=s>>20,v=i?a+g:n.directiveEnd;for(let I=r?a:a+g;I<v;I++){const b=o[I];if(I<u&&t===b||I>=u&&b.type===t)return I}if(i){const I=o[u];if(I&&si(I)&&I.type===t)return u}return null}(a,o,t,null==r?oa(a)&&yf:r!=o&&0!=(3&a.type),i&ct.Host&&s===a);return null!==g?_o(e,o,g,a):pr}function _o(n,e,t,r){let i=n[t];const s=e.data;if(function t_(n){return n instanceof da}(i)){const o=i;o.resolving&&function rm(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new de(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Pt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ze(n)}(s[t]));const a=Cl(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Fr(o.injectImpl):null;Km(n,r,ct.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function OI(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=ef(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==d&&Fr(d),Cl(a),o.resolving=!1,Jm()}}return i}function u_(n,e,t){return!!(t[e+(n>>LI)]&1<<n)}function Ef(n,e){return!(n&ct.Self||n&ct.Host&&e)}class br{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return a_(this._tNode,this._lView,e,zc(r),t)}}function If(){return new br(or(),ae())}function Gn(n){return Ss(()=>{const e=n.prototype.constructor,t=e[Lr]||wf(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Lr]||wf(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function wf(n){return so(n)?()=>{const e=wf(Je(n));return e&&e()}:ho(n)}function Uu(n){const e=n[Pe],t=e.type;return 2===t?e.declTNode:1===t?n[er]:null}const pa="__parameters__";function ga(n,e,t){return Ss(()=>{const r=function Af(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,g){const m=u.hasOwnProperty(pa)?u[pa]:Object.defineProperty(u,pa,{value:[]})[pa];for(;m.length<=g;)m.push(null);return(m[g]=m[g]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Ji(n,e){n.forEach(t=>Array.isArray(t)?Ji(t,e):e(t))}function Tf(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Pl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Nn(n,e,t){let r=ma(n,e);return r>=0?n[1|r]=t:(r=~r,function l_(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function xl(n,e){const t=ma(n,e);if(t>=0)return n[1|t]}function ma(n,e){return function d_(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const $u=Ri(ga("Optional"),8),Ml=Ri(ga("SkipSelf"),4);function v_(n){return 128==(128&n.flags)}var _a=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(_a||{});const ZI=new Map;let jj=0;const tw="__ngContext__";function $r(n,e){Br(e)?(n[tw]=e[vu],function Hj(n){ZI.set(n[vu],n)}(e)):n[tw]=e}let nw;function rw(n,e){return nw(n,e)}function Lf(n){const e=n[en];return wr(e)?e[en]:e}function nR(n){return iR(n[ao])}function rR(n){return iR(n[ii])}function iR(n){for(;null!==n&&!wr(n);)n=n[ii];return n}function Vl(n,e,t,r,i){if(null!=r){let s,o=!1;wr(r)?s=r:Br(r)&&(o=!0,r=r[Zt]);const a=Ot(r);0===n&&null!==t?null==i?uR(e,t,a):Hu(e,t,a,i||null,!0):1===n&&null!==t?Hu(e,t,a,i||null,!0):2===n?function T_(n,e,t){const r=C_(n,e);r&&function u$(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function d$(n,e,t,r,i){const s=t[Wi];s!==Ot(t)&&Vl(e,n,r,s,i);for(let a=ir;a<t.length;a++){const u=t[a];Bf(u[Pe],u,n,e,r,s)}}(e,n,s,t,i)}}function w_(n,e,t){return n.createElement(e,t)}function oR(n,e){const t=n[lo],r=t.indexOf(e);hl(e),t.splice(r,1)}function A_(n,e){if(n.length<=ir)return;const t=ir+e,r=n[t];if(r){const i=r[uo];null!==i&&i!==n&&oR(i,r),e>0&&(n[t-1][ii]=r[ii]);const s=Pl(n,ir+e);!function e$(n,e){Bf(n,e,e[tt],2,null,null),e[Zt]=null,e[er]=null}(r[Pe],r);const o=s[_i];null!==o&&o.detachView(s[Pe]),r[en]=null,r[ii]=null,r[et]&=-129}return r}function sw(n,e){if(!(256&e[et])){const t=e[tt];e[Eu]&&Yh(e[Eu]),e[co]&&Yh(e[co]),t.destroyNode&&Bf(n,e,t,3,null,null),function r$(n){let e=n[ao];if(!e)return ow(n[Pe],n);for(;e;){let t=null;if(Br(e))t=e[ao];else{const r=e[ir];r&&(t=r)}if(!t){for(;e&&!e[ii]&&e!==n;)Br(e)&&ow(e[Pe],e),e=e[en];null===e&&(e=n),Br(e)&&ow(e[Pe],e),t=e&&e[ii]}e=t}}(e)}}function ow(n,e){if(!(256&e[et])){e[et]&=-129,e[et]|=256,function a$(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof da)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];Ei(4,a,u);try{u.call(a)}finally{Ei(5,a,u)}}else{Ei(4,i,s);try{s.call(i)}finally{Ei(5,i,s)}}}}}(n,e),function o$(n,e){const t=n.cleanup,r=e[ra];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[ra]=null);const i=e[xs];if(null!==i){e[xs]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Pe].type&&e[tt].destroy();const t=e[uo];if(null!==t&&wr(e[en])){t!==e[en]&&oR(t,e);const r=e[_i];null!==r&&r.detachView(n)}!function zj(n){ZI.delete(n[vu])}(e)}}function aw(n,e,t){return function aR(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Zt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Hn.None||s===Hn.Emulated)return null}return hr(r,t)}}(n,e.parent,t)}function Hu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function uR(n,e,t){n.appendChild(e,t)}function cR(n,e,t,r,i){null!==r?Hu(n,e,t,r,i):uR(n,e,t)}function C_(n,e){return n.parentNode(e)}let uw,hw,S_,hR=function dR(n,e,t){return 40&n.type?hr(n,t):null};function b_(n,e,t,r){const i=aw(n,r,e),s=e[tt],a=function lR(n,e,t){return hR(n,e,t)}(r.parent||e[er],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)cR(s,i,t[u],a,!1);else cR(s,i,t,a,!1);void 0!==uw&&uw(s,r,e,t,i)}function Uf(n,e){if(null!==e){const t=e.type;if(3&t)return hr(e,n);if(4&t)return cw(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Uf(n,r);{const i=n[e.index];return wr(i)?cw(-1,i):Ot(i)}}if(32&t)return rw(e,n)()||Ot(n[e.index]);{const r=pR(n,e);return null!==r?Array.isArray(r)?r[0]:Uf(Lf(n[Tn]),r):Uf(n,e.next)}}return null}function pR(n,e){return null!==e?n[Tn][er].projection[e.projection]:null}function cw(n,e){const t=ir+n+1;if(t<e.length){const r=e[t],i=r[Pe].firstChild;if(null!==i)return Uf(r,i)}return e[Wi]}function lw(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],u=t.type;if(o&&0===e&&(a&&$r(Ot(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)lw(n,e,t.child,r,i,s,!1),Vl(e,n,i,a,s);else if(32&u){const d=rw(t,r);let g;for(;g=d();)Vl(e,n,i,g,s);Vl(e,n,i,a,s)}else 16&u?mR(n,e,r,t,i,s):Vl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Bf(n,e,t,r,i,s){lw(t,r,n.firstChild,e,i,s,!1)}function mR(n,e,t,r,i,s){const o=t[Tn],u=o[er].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Vl(e,n,i,u[d],s);else{let d=u;const g=o[en];v_(r)&&(d.flags|=128),lw(n,e,d,g,i,s,!0)}}function _R(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function yR(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&Wc(n,e,r),null!==i&&_R(n,e,i),null!==s&&function f$(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function IR(n){return function fw(){if(void 0===S_&&(S_=null,Ut.trustedTypes))try{S_=Ut.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return S_}()?.createScriptURL(n)||n}class wR{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Zo})`}}function ya(n){return n instanceof wR?n.changingThisBreaksApplicationSecurity:n}function jf(n,e){const t=function A$(n){return n instanceof wR&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Zo})`)}return t===e}const D$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Ul=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Ul||{});function va(n){const e=Hf();return e?e.sanitize(Ul.URL,n)||"":jf(n,"URL")?ya(n):function pw(n){return(n=String(n)).match(D$)?n:"unsafe:"+n}(Ze(n))}function RR(n){const e=Hf();if(e)return IR(e.sanitize(Ul.RESOURCE_URL,n)||"");if(jf(n,"ResourceURL"))return IR(ya(n));throw new de(904,!1)}function Hf(){const n=ae();return n&&n[ia].sanitizer}const zf=new ve("ENVIRONMENT_INITIALIZER"),xR=new ve("INJECTOR",-1),MR=new ve("INJECTOR_DEF_TYPES");class yw{get(e,t=du){if(t===du){const r=new Error(`NullInjectorError: No provider for ${Ke(e)}!`);throw r.name="NullInjectorError",r}return t}}function B$(...n){return{\u0275providers:NR(0,n),\u0275fromNgModule:!0}}function NR(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Ji(e,o=>{const a=o;P_(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&OR(i,s),t}function OR(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];Ew(i,s=>{e(s,r)})}}function P_(n,e,t,r){if(!(n=Je(n)))return!1;let i=null,s=Uc(n);const o=!s&&gt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const u=n.ngModule;if(s=Uc(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)P_(d,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{Ji(s.imports,g=>{P_(g,e,t,r)&&(d||=[],d.push(g))})}finally{}void 0!==d&&OR(d,e)}if(!a){const d=ho(i)||(()=>new i);e({provide:i,useFactory:d,deps:ht},i),e({provide:MR,useValue:i,multi:!0},i),e({provide:zf,useValue:()=>ye(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=n;Ew(u,g=>{e(g,d)})}}}return i!==n&&void 0!==n.providers}function Ew(n,e){for(let t of n)Oc(t)&&(t=t.\u0275providers),Array.isArray(t)?Ew(t,e):e(t)}const j$=He({provide:String,useValue:He});function Iw(n){return null!==n&&"object"==typeof n&&j$ in n}function zu(n){return"function"==typeof n}const ww=new ve("Set Injector scope."),x_={},H$={};let Aw;function M_(){return void 0===Aw&&(Aw=new yw),Aw}class Ni{}class Bl extends Ni{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bw(e,o=>this.processProvider(o)),this.records.set(xR,jl(void 0,this)),i.has("environment")&&this.records.set(Ni,jl(void 0,this));const s=this.records.get(ww);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(MR.multi,ht,ct.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Ds(this),r=Fr(void 0);try{return e()}finally{Ds(t),Fr(r)}}get(e,t=du,r=ct.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(_u))return e[_u](this);r=zc(r);const s=Ds(this),o=Fr(void 0);try{if(!(r&ct.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function K$(n){return"function"==typeof n||"object"==typeof n&&n instanceof ve}(e)&&Lc(e);u=d&&this.injectableDefInScope(d)?jl(Cw(e),x_):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&ct.Self?M_():this.parent).get(e,t=r&ct.Optional&&t===du?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Ts]=a[Ts]||[]).unshift(Ke(e)),s)throw a;return function rI(n,e,t,r){const i=n[Ts];throw e[Si]&&i.unshift(e[Si]),n.message=function pu(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Ke(e);if(Array.isArray(e))i=e.map(Ke).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Ke(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Ph,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Ts]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Fr(o),Ds(s)}}resolveInjectorInitializers(){const e=Ds(this),t=Fr(void 0);try{const i=this.get(zf.multi,ht,ct.Self);for(const s of i)s()}finally{Ds(e),Fr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Ke(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(e){let t=zu(e=Je(e))?e:Je(e&&e.provide);const r=function G$(n){return Iw(n)?jl(void 0,n.useValue):jl(FR(n),x_)}(e);if(zu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=jl(void 0,x_,!0),i.factory=()=>fu(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===x_&&(t.value=H$,t.value=t.factory()),"object"==typeof t.value&&t.value&&function W$(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Je(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Cw(n){const e=Lc(n),t=null!==e?e.factory:ho(n);if(null!==t)return t;if(n instanceof ve)throw new de(204,!1);if(n instanceof Function)return function z$(n){const e=n.length;if(e>0)throw function wo(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new de(204,!1);const t=function am(n){return n&&(n[cu]||n[oo])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new de(204,!1)}function FR(n,e,t){let r;if(zu(n)){const i=Je(n);return ho(i)||Cw(i)}if(Iw(n))r=()=>Je(n.useValue);else if(function VR(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...fu(n.deps||[]));else if(function kR(n){return!(!n||!n.useExisting)}(n))r=()=>ye(Je(n.useExisting));else{const i=Je(n&&(n.useClass||n.provide));if(!function q$(n){return!!n.deps}(n))return ho(i)||Cw(i);r=()=>new i(...fu(n.deps))}return r}function jl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function bw(n,e){for(const t of n)Array.isArray(t)?bw(t,e):t&&Oc(t)?bw(t.\u0275providers,e):e(t)}const N_=new ve("AppId",{providedIn:"root",factory:()=>Q$}),Q$="ng",LR=new ve("Platform Initializer"),Vs=new ve("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),UR=new ve("CSP nonce",{providedIn:"root",factory:()=>function Ll(){if(void 0!==hw)return hw;if(typeof document<"u")return document;throw new de(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let BR=(n,e,t)=>null;function Nw(n,e,t=!1){return BR(n,e,t)}class sH{}class HR{}class aH{resolveComponentFactory(e){throw function oH(n){const e=Error(`No component factory found for ${Ke(n)}.`);return e.ngComponent=n,e}(e)}}let U_=(()=>{class n{static{this.NULL=new aH}}return n})();function uH(){return zl(or(),ae())}function zl(n,e){return new Oi(hr(n,e))}let Oi=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=uH}}return n})();class GR{}let To=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function lH(){const n=ae(),t=oi(or().index,n);return(Br(t)?t:n)[tt]}()}}return n})(),dH=(()=>{class n{static{this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>null})}}return n})();class Gl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const qR=new Gl("16.2.12"),Vw={};function YR(n,e=null,t=null,r){const i=JR(n,e,t,r);return i.resolveInjectorInitializers(),i}function JR(n,e=null,t=null,r,i=new Set){const s=[t||ht,B$(n)];return r=r||("object"==typeof n?void 0:Ke(n)),new Bl(s,e||M_(),r||null,i)}let ki=(()=>{class n{static{this.THROW_IF_NOT_FOUND=du}static{this.NULL=new yw}static create(t,r){if(Array.isArray(t))return YR({name:""},r,t,"");{const i=t.name??"";return YR({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Le({token:n,providedIn:"any",factory:()=>ye(xR)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function Lw(n){return n.ngOriginalError}class Do{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Lw(e);for(;t&&Lw(t);)t=Lw(t);return t||null}}function Uw(n){return e=>{setTimeout(n,void 0,e)}}const On=class vH extends H{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=Uw(s),i&&(i=Uw(i)),o&&(o=Uw(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof yt&&e.add(a),a}};function ZR(...n){}class Bt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new On(!1),this.onMicrotaskEmpty=new On(!1),this.onStable=new On(!1),this.onError=new On(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function EH(){const n="function"==typeof Ut.requestAnimationFrame;let e=Ut[n?"requestAnimationFrame":"setTimeout"],t=Ut[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function AH(n){const e=()=>{!function wH(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ut,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,jw(n),n.isCheckStableRunning=!0,Bw(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),jw(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function bH(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return eP(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),tP(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return eP(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),tP(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,jw(n),Bw(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bt.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(Bt.isInAngularZone())throw new de(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,IH,ZR,ZR);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const IH={};function Bw(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function jw(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function eP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function tP(n){n._nesting--,Bw(n)}class CH{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new On,this.onMicrotaskEmpty=new On,this.onStable=new On,this.onError=new On}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const nP=new ve("",{providedIn:"root",factory:rP});function rP(){const n=xe(Bt);let e=!0;return T(new pt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new pt(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Bt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Bt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(U()))}function So(n){return n instanceof Function?n():n}let $w=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new n})}}return n})();function Wf(n){for(;n;){n[et]|=64;const e=Lf(n);if(qh(n)&&!e)return n;n=e}return null}const uP=new ve("",{providedIn:"root",factory:()=>!1});let $_=null;function hP(n,e){return n[e]??gP()}function fP(n,e){const t=gP();t.producerNode?.length&&(n[e]=$_,t.lView=n,$_=pP())}const kH={...ua,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Wf(n.lView)},lView:null};function pP(){return Object.create(kH)}function gP(){return $_??=pP(),$_}const ot={};function bt(n){mP(Et(),ae(),Cr()+n,!1)}function mP(n,e,t,r){if(!r)if(3==(3&e[et])){const s=n.preOrderCheckHooks;null!==s&&El(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Il(e,s,0,t)}mo(t)}function ge(n,e=ct.Default){const t=ae();return null===t?ye(n,e):a_(or(),t,Je(n),e)}function H_(n,e,t,r,i,s,o,a,u,d,g){const m=e.blueprint.slice();return m[Zt]=i,m[et]=140|r,(null!==d||n&&2048&n[et])&&(m[et]|=2048),Um(m),m[en]=m[Ps]=n,m[bn]=t,m[ia]=o||n&&n[ia],m[tt]=a||n&&n[tt],m[qi]=u||n&&n[qi]||null,m[er]=s,m[vu]=function $j(){return jj++}(),m[Pi]=g,m[nl]=d,m[Tn]=2==e.type?n[Tn]:m,m}function Kl(n,e,t,r,i){let s=n.data[e];if(null===s)s=function Hw(n,e,t,r,i){const s=ml(),o=xu(),u=n.data[e]=function HH(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Os(){return null!==Ge.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(n,e,t,r,i),function zm(){return Ge.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Pu(){const n=Ge.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Qi(s,!0),s}function Kf(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function yP(n,e,t,r,i){const s=hP(e,Eu),o=Cr(),a=2&r;try{mo(-1),a&&e.length>ft&&mP(n,e,ft,!1),Ei(a?2:0,i);const d=a?s:null,g=Au(d);try{null!==d&&(d.dirty=!1),t(r,i)}finally{Qh(d,g)}}finally{a&&null===e[Eu]&&fP(e,Eu),mo(o),Ei(a?3:1,i)}}function zw(n,e,t){if(Im(e)){const r=yi(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{yi(r)}}}function Gw(n,e,t){gl()&&(function YH(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;oa(t)&&function r4(n,e,t){const r=hr(e,n),i=vP(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=z_(n,H_(n,i,null,o,r,e,null,n[ia].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||bl(t,e),$r(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const u=n.data[a],d=_o(e,n,a,t);$r(d,e),null!==o&&i4(0,a-i,d,u,0,o),si(u)&&(oi(t.index,e)[bn]=_o(e,n,a,t))}}(n,e,t,hr(t,e)),64==(64&t.flags)&&CP(n,e,t))}function qw(n,e,t=hr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function vP(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Ww(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ww(n,e,t,r,i,s,o,a,u,d,g){const m=ft+r,v=m+i,I=function FH(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:ot);return t}(m,v),b="function"==typeof d?d():d;return I[Pe]={type:n,blueprint:I,template:t,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:g}}let EP=n=>null;function IP(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?wP(t,e,i,s):r.hasOwnProperty(i)&&wP(t,e,r[i],s)}return t}function wP(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Vi(n,e,t,r,i,s,o,a){const u=hr(e,t);let g,d=e.inputs;!a&&null!=d&&(g=d[r])?(Xw(n,t,g,r,i),oa(e)&&function qH(n,e){const t=oi(e,n);16&t[et]||(t[et]|=64)}(t,e.index)):3&e.type&&(r=function GH(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function Kw(n,e,t,r){if(gl()){const i=null===r?null:{"":-1},s=function XH(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Jc(e,o.selectors,!1))if(r||(r=[]),si(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Qw(n,e,a.length)}else r.unshift(o),Qw(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&AP(n,e,t,o,i,a),i&&function ZH(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new de(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=na(t.mergedAttrs,t.attrs)}function AP(n,e,t,r,i,s){for(let d=0;d<r.length;d++)vf(bl(t,e),n,r[d].type);!function t4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let d=0;d<r.length;d++){const g=r[d];g.providersResolver&&g.providersResolver(g)}let o=!1,a=!1,u=Kf(n,e,r.length,null);for(let d=0;d<r.length;d++){const g=r[d];t.mergedAttrs=na(t.mergedAttrs,g.hostAttrs),n4(n,t,e,u,g),e4(u,g,i),null!==g.contentQueries&&(t.flags|=4),(null!==g.hostBindings||null!==g.hostAttrs||0!==g.hostVars)&&(t.flags|=64);const m=g.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}!function zH(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let u=null,d=null;for(let g=e.directiveStart;g<i;g++){const m=s[g],v=t?t.get(m):null,b=v?v.outputs:null;u=IP(m.inputs,g,u,v?v.inputs:null),d=IP(m.outputs,g,d,b);const S=null===u||null===o||Oh(e)?null:s4(u,g,o);a.push(S)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(n,t,s)}function CP(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function cf(){return Ge.lFrame.currentDirectiveIndex}();try{mo(s);for(let a=r;a<i;a++){const u=n.data[a],d=e[a];lf(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&JH(u,d)}}finally{mo(-1),lf(o)}}function JH(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Qw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function e4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;si(e)&&(t[""]=n)}}function n4(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=ho(i.type)),o=new da(s,si(i),ge);n.blueprint[r]=o,t[r]=o,function KH(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function QH(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Kf(n,t,i.hostVars,ot),i)}function Fs(n,e,t,r,i,s){const o=hr(n,e);!function Yw(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Ze(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[tt],o,s,n.value,t,r,i)}function i4(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)bP(r,t,o[a++],o[a++],o[a++])}function bP(n,e,t,r,i){const s=yi(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{yi(s)}}function s4(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function TP(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function DP(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Mu(t[r]),o.contentQueries(2,e[s],s)}}}function z_(n,e){return n[ao]?n[Em][ii]=e:n[ao]=e,n[Em]=e,e}function Jw(n,e,t){Mu(0);const r=yi(null);try{e(n,t)}finally{yi(r)}}function xP(n,e){const t=n[qi],r=t?t.get(Do,null):null;r&&r.handleError(e)}function Xw(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];bP(n.data[o],e[o],r,a,i)}}function Ro(n,e,t){const r=dl(e,n);!function sR(n,e,t){n.setValue(e,t)}(n[tt],r,t)}function o4(n,e){const t=oi(e,n),r=t[Pe];!function a4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Zt];null!==i&&null===t[Pi]&&(t[Pi]=Nw(i,t[qi])),Zw(r,t,t[bn])}function Zw(n,e,t){yl(e);try{const r=n.viewQuery;null!==r&&Jw(1,r,t);const i=n.template;null!==i&&yP(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&DP(n,e),n.staticViewQueries&&Jw(2,n.viewQuery,t);const s=n.components;null!==s&&function u4(n,e){for(let t=0;t<e.length;t++)o4(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[et]&=-5,hf()}}let MP=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function pI(n,e,t){const r=Object.create(gI);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Sm(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Rm(r))return;r.hasRun=!0;const o=Au(r);try{r.cleanupFn(),r.cleanupFn=ul,r.fn(i)}finally{Qh(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,d=>{this.all.has(d)&&this.queue.set(d,s)},i);let a;this.all.add(o),o.notify();const u=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new n})}}return n})();function G_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Vr(i,a):2==s&&(r=Vr(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Qf(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Ot(s)),wr(s)&&NP(s,r);const o=t.type;if(8&o)Qf(n,e,t.child,r);else if(32&o){const a=rw(t,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=pR(e,t);if(Array.isArray(a))r.push(...a);else{const u=Lf(e[Tn]);Qf(u[Pe],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function NP(n,e){for(let t=ir;t<n.length;t++){const r=n[t],i=r[Pe].firstChild;null!==i&&Qf(r[Pe],r,i,e)}n[Wi]!==n[Zt]&&e.push(n[Wi])}function q_(n,e,t,r=!0){const i=e[ia],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{OP(n,e,n.template,t)}catch(u){throw r&&xP(e,u),u}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function OP(n,e,t,r){const i=e[et];if(256!=(256&i)){e[ia].effectManager?.flush(),yl(e);try{Um(e),function Hm(n){return Ge.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&yP(n,e,t,2,r);const o=3==(3&i);if(o){const d=n.preOrderCheckHooks;null!==d&&El(e,d,null)}else{const d=n.preOrderHooks;null!==d&&Il(e,d,0,null),ku(e,0)}if(function d4(n){for(let e=nR(n);null!==e;e=rR(e)){if(!e[il])continue;const t=e[lo];for(let r=0;r<t.length;r++){AI(t[r])}}}(e),kP(e,2),null!==n.contentQueries&&DP(n,e),o){const d=n.contentCheckHooks;null!==d&&El(e,d)}else{const d=n.contentHooks;null!==d&&Il(e,d,1),ku(e,1)}!function VH(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=hP(e,co);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)mo(~s);else{const o=s,a=t[++i],u=t[++i];qm(a,o),r.dirty=!1;const d=Au(r);try{u(2,e[o])}finally{Qh(r,d)}}}}finally{null===e[co]&&fP(e,co),mo(-1)}}(n,e);const a=n.components;null!==a&&FP(e,a,0);const u=n.viewQuery;if(null!==u&&Jw(2,u,r),o){const d=n.viewCheckHooks;null!==d&&El(e,d)}else{const d=n.viewHooks;null!==d&&Il(e,d,2),ku(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[et]&=-73,hl(e)}finally{hf()}}}function kP(n,e){for(let t=nR(n);null!==t;t=rR(t))for(let r=ir;r<t.length;r++)VP(t[r],e)}function h4(n,e,t){VP(oi(e,n),t)}function VP(n,e){if(!function wI(n){return 128==(128&n[et])}(n))return;const t=n[Pe],r=n[et];if(80&r&&0===e||1024&r||2===e)OP(t,n,t.template,n[bn]);else if(n[yu]>0){kP(n,1);const i=t.components;null!==i&&FP(n,i,1)}}function FP(n,e,t){for(let r=0;r<e.length;r++)h4(n,e[r],t)}class Yf{get rootNodes(){const e=this._lView,t=e[Pe];return Qf(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[bn]}set context(e){this._lView[bn]=e}get destroyed(){return 256==(256&this._lView[et])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[en];if(wr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(A_(e,r),Pl(t,r))}this._attachedToViewContainer=!1}sw(this._lView[Pe],this._lView)}onDestroy(e){!function fl(n,e){if(256==(256&n[et]))throw new de(911,!1);null===n[xs]&&(n[xs]=[]),n[xs].push(e)}(this._lView,e)}markForCheck(){Wf(this._cdRefInjectingView||this._lView)}detach(){this._lView[et]&=-129}reattach(){this._lView[et]|=128}detectChanges(){q_(this._lView[Pe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function n$(n,e){Bf(n,e,e[tt],2,null,null)}(this._lView[Pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=e}}class f4 extends Yf{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;q_(e[Pe],e,e[bn],!1)}checkNoChanges(){}get context(){return null}}class LP extends U_{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=gt(e);return new Jf(t,this.ngModule)}}function UP(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class g4{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=zc(r);const i=this.injector.get(e,Vw,r);return i!==Vw||t===Vw?i:this.parentInjector.get(e,t,r)}}class Jf extends HR{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=UP(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return UP(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Zc(n){return n.map(Uh).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Ni?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new g4(e,s):e,a=o.get(GR,null);if(null===a)throw new de(407,!1);const m={rendererFactory:a,sanitizer:o.get(dH,null),effectManager:o.get(MP,null),afterRenderEventManager:o.get($w,null)},v=a.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",b=r?function LH(n,e,t,r){const s=r.get(uP,!1)||t===Hn.ShadowDom,o=n.selectRootElement(e,s);return function UH(n){EP(n)}(o),o}(v,r,this.componentDef.encapsulation,o):w_(v,I,function p4(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(I)),q=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let F=null;null!==b&&(F=Nw(b,o,!0));const W=Ww(0,null,null,1,0,null,null,null,null,null,null),oe=H_(null,W,null,q,null,null,m,v,o,null,F);let Ee,Ue;yl(oe);try{const V=this.componentDef;let R,O=null;V.findHostDirectiveDefs?(R=[],O=new Map,V.findHostDirectiveDefs(V,R,O),R.push(V)):R=[V];const L=function _4(n,e){const t=n[Pe],r=ft;return n[r]=e,Kl(t,r,2,"#host",null)}(oe,b),$=function y4(n,e,t,r,i,s,o){const a=i[Pe];!function v4(n,e,t,r){for(const i of n)e.mergedAttrs=na(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(G_(e,e.mergedAttrs,!0),null!==t&&yR(r,t,e))}(r,n,e,o);let u=null;null!==e&&(u=Nw(e,i[qi]));const d=s.rendererFactory.createRenderer(e,t);let g=16;t.signals?g=4096:t.onPush&&(g=64);const m=H_(i,vP(t),null,g,i[n.index],n,s,d,null,null,u);return a.firstCreatePass&&Qw(a,n,r.length-1),z_(i,m),i[n.index]=m}(L,b,V,R,oe,m,v);Ue=Ms(W,ft),b&&function I4(n,e,t,r){if(r)Wc(n,t,["ng-version",qR.full]);else{const{attrs:i,classes:s}=function Bh(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!ni(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Wc(n,t,i),s&&s.length>0&&_R(n,t,s.join(" "))}}(v,V,b,r),void 0!==t&&function w4(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Ue,this.ngContentSelectors,t),Ee=function E4(n,e,t,r,i,s){const o=or(),a=i[Pe],u=hr(o,i);AP(a,i,o,t,null,r);for(let g=0;g<t.length;g++)$r(_o(i,a,o.directiveStart+g,o),i);CP(a,i,o),u&&$r(u,i);const d=_o(i,a,o.directiveStart+o.componentOffset,o);if(n[bn]=i[bn]=d,null!==s)for(const g of s)g(d,e);return zw(a,o,n),d}($,V,R,O,oe,[A4]),Zw(W,oe,null)}finally{hf()}return new m4(this.componentType,Ee,zl(Ue,oe),oe,Ue)}}class m4 extends sH{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new f4(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;Xw(s[Pe],s,i,e,t),this.previousInputValues.set(e,t),Wf(oi(this._tNode.index,s))}}get injector(){return new br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function A4(){const n=or();vl(ae()[Pe],n)}function jt(n){let e=function BP(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(si(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new de(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=W_(n.inputs),o.inputTransforms=W_(n.inputTransforms),o.declaredInputs=W_(n.declaredInputs),o.outputs=W_(n.outputs);const a=i.hostBindings;a&&D4(n,a);const u=i.viewQuery,d=i.contentQueries;if(u&&b4(n,u),d&&T4(n,d),Jn(n.inputs,i.inputs),Jn(n.declaredInputs,i.declaredInputs),Jn(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Jn(o.inputTransforms,i.inputTransforms)),si(i)&&i.data.animation){const g=n.data;g.animation=(g.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===jt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function C4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=na(i.hostAttrs,t=na(t,i.hostAttrs))}}(r)}function W_(n){return n===Er?{}:n===ht?[]:n}function b4(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function T4(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function D4(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function zP(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function K_(n){return!!eA(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function eA(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Hr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Gu(n,e,t,r){const i=Hr(n,e,t);return Hr(n,e+1,r)||i}function Us(n,e,t,r){const i=ae();return Hr(i,go(),e)&&(Et(),Fs(dn(),i,n,e,t,r)),Us}function Yl(n,e,t,r){return Hr(n,go(),t)?e+Ze(t)+r:ot}function Zl(n,e,t,r,i,s,o,a,u,d){const m=function Xi(n,e,t,r,i,s){const o=Gu(n,e,t,r);return Gu(n,e+2,i,s)||o}(n,function xi(){return Ge.lFrame.bindingIndex}(),t,i,o,u);return Yi(4),m?e+Ze(t)+r+Ze(i)+s+Ze(o)+a+Ze(u)+d:ot}function hs(n,e,t,r,i,s,o,a){const u=ae(),d=Et(),g=n+ft,m=d.firstCreatePass?function X4(n,e,t,r,i,s,o,a,u){const d=e.consts,g=Kl(e,n,4,o||null,ls(d,a));Kw(e,t,g,ls(d,u)),vl(e,g);const m=g.tView=Ww(2,g,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,g),m.queries=e.queries.embeddedTView(g)),g}(g,d,u,e,t,r,i,s,o):d.data[g];Qi(m,!1);const v=rx(d,u,m,n);Ou()&&b_(d,u,v,m),$r(v,u),z_(u,u[g]=TP(v,u,v,m)),Gh(m)&&Gw(d,u,m),null!=o&&qw(u,m,a)}let rx=function ix(n,e,t,r){return ks(!0),e[tt].createComment("")};function Bs(n){return function Ns(n,e){return n[e]}(function af(){return Ge.lFrame.contextLView}(),ft+n)}function rn(n,e,t){const r=ae();return Hr(r,go(),e)&&Vi(Et(),dn(),r,n,e,r[tt],t,!1),rn}function oA(n,e,t,r,i){const o=i?"class":"style";Xw(n,t,e.inputs[o],o,r)}function fe(n,e,t,r){const i=ae(),s=Et(),o=ft+n,a=i[tt],u=s.firstCreatePass?function nz(n,e,t,r,i,s){const o=e.consts,u=Kl(e,n,2,r,ls(o,i));return Kw(e,t,u,ls(o,s)),null!==u.attrs&&G_(u,u.attrs,!1),null!==u.mergedAttrs&&G_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,t,r):s.data[o],d=sx(s,i,u,a,e,n);i[o]=d;const g=Gh(u);return Qi(u,!0),yR(a,d,u),32!=(32&u.flags)&&Ou()&&b_(s,i,d,u),0===function Ru(){return Ge.lFrame.elementDepthCount}()&&$r(d,i),function bI(){Ge.lFrame.elementDepthCount++}(),g&&(Gw(s,i,u),zw(s,u,i)),null!==r&&qw(i,u),fe}function _e(){let n=or();xu()?function sf(){Ge.lFrame.isParent=!1}():(n=n.parent,Qi(n,!1));const e=n;(function nf(n){return Ge.skipHydrationRootTNode===n})(e)&&function $m(){Ge.skipHydrationRootTNode=null}(),function TI(){Ge.lFrame.elementDepthCount--}();const t=Et();return t.firstCreatePass&&(vl(t,n),Im(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function mf(n){return 0!=(8&n.flags)}(e)&&oA(t,e,ae(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function r_(n){return 0!=(16&n.flags)}(e)&&oA(t,e,ae(),e.stylesWithoutHost,!1),_e}function tr(n,e,t,r){return fe(n,e,t,r),_e(),tr}let sx=(n,e,t,r,i,s)=>(ks(!0),w_(r,i,function Xm(){return Ge.lFrame.currentNamespace}()));function Ea(){return ae()}function np(n){return!!n&&"function"==typeof n.then}function ux(n){return!!n&&"function"==typeof n.subscribe}function sn(n,e,t,r){const i=ae(),s=Et(),o=or();return function lx(n,e,t,r,i,s,o){const a=Gh(r),d=n.firstCreatePass&&function RP(n){return n.cleanup||(n.cleanup=[])}(n),g=e[bn],m=function SP(n){return n[ra]||(n[ra]=[])}(e);let v=!0;if(3&r.type||o){const S=hr(r,e),x=o?o(S):S,q=m.length,F=o?oe=>o(Ot(oe[r.index])):r.index;let W=null;if(!o&&a&&(W=function uz(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[ra],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==W)(W.__ngLastListenerFn__||W).__ngNextListenerFn__=s,W.__ngLastListenerFn__=s,v=!1;else{s=hx(r,e,g,s,!1);const oe=t.listen(x,i,s);m.push(s,oe),d&&d.push(i,F,q,q+1)}}else s=hx(r,e,g,s,!1);const I=r.outputs;let b;if(v&&null!==I&&(b=I[i])){const S=b.length;if(S)for(let x=0;x<S;x+=2){const Ee=e[b[x]][b[x+1]].subscribe(s),Ue=m.length;m.push(s,Ee),d&&d.push(i,r.index,Ue,-(Ue+1))}}}(s,i,i[tt],o,n,e,r),sn}function dx(n,e,t,r){try{return Ei(6,e,t),!1!==t(r)}catch(i){return xP(n,i),!1}finally{Ei(7,e,t)}}function hx(n,e,t,r,i){return function s(o){if(o===Function)return r;Wf(n.componentOffset>-1?oi(n.index,e):e);let u=dx(e,t,r,o),d=s.__ngNextListenerFn__;for(;d;)u=dx(e,t,d,o)&&u,d=d.__ngNextListenerFn__;return i&&!1===u&&o.preventDefault(),u}}function ar(n=1){return function RI(n){return(Ge.lFrame.contextLView=function PI(n,e){for(;n>0;)e=e[Ps],n--;return e}(n,Ge.lFrame.contextLView))[bn]}(n)}function id(n,e,t){return cA(n,"",e,"",t),id}function cA(n,e,t,r,i){const s=ae(),o=Yl(s,e,t,r);return o!==ot&&Vi(Et(),dn(),s,n,o,s[tt],i,!1),cA}function Z_(n,e){return n<<17|e<<2}function Ia(n){return n>>17&32767}function lA(n){return 2|n}function qu(n){return(131068&n)>>2}function dA(n,e){return-131069&n|e<<2}function hA(n){return 1|n}function Ix(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Ia(s):qu(s),u=!1;for(;0!==a&&(!1===u||o);){const g=n[a+1];_z(n[a],e)&&(u=!0,n[a+1]=r?hA(g):lA(g)),a=r?Ia(g):qu(g)}u&&(n[t+1]=r?lA(s):hA(s))}function _z(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ma(n,e)>=0}function wa(n,e){return function fs(n,e,t,r){const i=ae(),s=Et(),o=Yi(2);s.firstUpdatePass&&function Px(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[Cr()],o=function Rx(n,e){return e>=n.expandoStartIndex}(n,t);(function Ox(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function Tz(n,e,t,r){const i=function df(n){const e=Ge.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=rp(t=fA(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=fA(i,n,e,t,r),null===s){let u=function Dz(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==qu(r))return n[Ia(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=fA(null,n,e,u[1],r),u=rp(u,e.attrs,r),function Sz(n,e,t,r){n[Ia(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else s=function Rz(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=rp(r,n[s].hostAttrs,t);return rp(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function gz(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ia(o),u=qu(o);n[r]=t;let g,d=!1;if(Array.isArray(t)?(g=t[1],(null===g||ma(t,g)>0)&&(d=!0)):g=t,i)if(0!==u){const v=Ia(n[a+1]);n[r+1]=Z_(v,a),0!==v&&(n[v+1]=dA(n[v+1],r)),n[a+1]=function fz(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Z_(a,0),0!==a&&(n[a+1]=dA(n[a+1],r)),a=r;else n[r+1]=Z_(u,0),0===a?a=r:n[u+1]=dA(n[u+1],r),u=r;d&&(n[r+1]=lA(n[r+1])),Ix(n,g,r,!0),Ix(n,g,r,!1),function mz(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ma(s,e)>=0&&(t[r+1]=hA(t[r+1]))}(e,g,n,r,s),o=Z_(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==ot&&Hr(i,o,e)&&function Mx(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const u=n.data,d=u[a+1],g=function pz(n){return 1==(1&n)}(d)?Nx(u,e,t,i,qu(d),o):void 0;ey(g)||(ey(s)||function hz(n){return 2==(2&n)}(d)&&(s=Nx(u,null,t,i,a,o)),function h$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:_a.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=_a.Important),n.setStyle(t,r,i,s))}}(r,o,dl(Cr(),t),i,s))}(s,s.data[Cr()],i,i[tt],n,i[o+1]=function Nz(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ke(ya(n)))),n}(e,t),r,o)}(n,e,null,!0),wa}function fA(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=rp(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function rp(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Nn(n,o,!!t||e[++s]))}return void 0===n?null:n}function Nx(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const u=n[i],d=Array.isArray(u),g=d?u[1]:u,m=null===g;let v=t[i+1];v===ot&&(v=m?ht:void 0);let I=m?xl(v,r):g===r?v:void 0;if(d&&!ey(I)&&(I=xl(u,r)),ey(I)&&(a=I,o))return a;const b=n[i+1];i=o?Ia(b):qu(b)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=xl(u,r))}return a}function ey(n){return void 0!==n}function Ce(n,e=""){const t=ae(),r=Et(),i=n+ft,s=r.firstCreatePass?Kl(r,i,1,e,null):r.data[i],o=kx(r,t,s,e,n);t[i]=o,Ou()&&b_(r,t,o,s),Qi(s,!1)}let kx=(n,e,t,r,i)=>(ks(!0),function I_(n,e){return n.createText(e)}(e[tt],r));function pA(n){return Aa("",n,""),pA}function Aa(n,e,t){const r=ae(),i=Yl(r,n,e,t);return i!==ot&&Ro(r,Cr(),i),Aa}function gA(n,e,t,r,i,s,o,a,u){const d=ae(),g=Zl(d,n,e,t,r,i,s,o,a,u);return g!==ot&&Ro(d,Cr(),g),gA}const ad="en-US";let nM=ad;function yA(n,e,t,r,i){if(n=Je(n),Array.isArray(n))for(let s=0;s<n.length;s++)yA(n[s],e,t,r,i);else{const s=Et(),o=ae(),a=or();let u=zu(n)?n:Je(n.provide);const d=FR(n),g=1048575&a.providerIndexes,m=a.directiveStart,v=a.providerIndexes>>20;if(zu(n)||!n.multi){const I=new da(d,i,ge),b=EA(u,e,i?g:g+v,m);-1===b?(vf(bl(a,o),s,u),vA(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(I),o.push(I)):(t[b]=I,o[b]=I)}else{const I=EA(u,e,g+v,m),b=EA(u,e,g,g+v),x=b>=0&&t[b];if(i&&!x||!i&&!(I>=0&&t[I])){vf(bl(a,o),s,u);const q=function e6(n,e,t,r,i){const s=new da(n,t,ge);return s.multi=[],s.index=e,s.componentProviders=0,DM(s,i,r&&!t),s}(i?Z3:X3,t.length,i,r,d);!i&&x&&(t[b].providerFactory=q),vA(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(q),o.push(q)}else vA(s,n,I>-1?I:b,DM(t[i?b:I],d,!i&&r));!i&&r&&x&&t[b].componentProviders++}}}function vA(n,e,t,r){const i=zu(e),s=function $$(n){return!!n.useClass}(e);if(i||s){const u=(s?Je(e.useClass):e).prototype.ngOnDestroy;if(u){const d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const g=d.indexOf(t);-1===g?d.push(t,[r,u]):d[g+1].push(r,u)}else d.push(t,u)}}}function DM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function EA(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function X3(n,e,t,r){return IA(this.multi,[])}function Z3(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=_o(t,t[Pe],this.providerFactory.index,r);s=a.slice(0,o),IA(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],IA(i,s);return s}function IA(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function vn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function J3(n,e,t){const r=Et();if(r.firstCreatePass){const i=si(n);yA(t,r.data,r.blueprint,i,!0),yA(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Ku{}class SM{}class wA extends Ku{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new LP(this);const i=Ir(e);this._bootstrapComponents=So(i.bootstrap),this._r3Injector=JR(e,t,[{provide:Ku,useValue:this},{provide:U_,useValue:this.componentFactoryResolver},...r],Ke(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class AA extends SM{constructor(e){super(),this.moduleType=e}create(e){return new wA(this.moduleType,e,[])}}class RM extends Ku{constructor(e){super(),this.componentFactoryResolver=new LP(this),this.instance=null;const t=new Bl([...e.providers,{provide:Ku,useValue:this},{provide:U_,useValue:this.componentFactoryResolver}],e.parent||M_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function CA(n,e,t=null){return new RM({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let r6=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=NR(0,t.type),i=r.length>0?CA([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Le({token:n,providedIn:"environment",factory:()=>new n(ye(Ni))})}}return n})();function PM(n){n.getStandaloneInjector=e=>e.get(r6).getOrCreateStandaloneInjector(n)}function x6(n,e,t,r=!0){const i=e[Pe];if(function i$(n,e,t,r){const i=ir+r,s=t.length;r>0&&(t[i-1][ii]=e),r<s-ir?(e[ii]=t[i],Tf(t,ir+r,e)):(t.push(e),e[ii]=null),e[en]=t;const o=e[uo];null!==o&&t!==o&&function s$(n,e){const t=n[lo];e[Tn]!==e[en][en][Tn]&&(n[il]=!0),null===t?n[lo]=[e]:t.push(e)}(o,e);const a=e[_i];null!==a&&a.insertView(n),e[et]|=128}(i,e,n,t),r){const s=cw(t,n),o=e[tt],a=C_(o,n[Wi]);null!==a&&function t$(n,e,t,r,i,s){r[Zt]=i,r[er]=e,Bf(n,r,t,1,i,s)}(i,n[er],o,e,a,s)}}let Po=(()=>{class n{static{this.__NG_ELEMENT_ID__=O6}}return n})();const M6=Po,N6=class extends M6{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function P6(n,e,t,r){const i=e.tView,a=H_(n,i,t,4096&n[et]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[uo]=n[e.index];const d=n[_i];return null!==d&&(a[_i]=d.createEmbeddedView(i)),Zw(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Yf(i)}};function O6(){return function sy(n,e){return 4&n.type?new N6(e,n,zl(n,e)):null}(or(),ae())}let gs=(()=>{class n{static{this.__NG_ELEMENT_ID__=B6}}return n})();function B6(){return function KM(n,e){let t;const r=e[n.index];return wr(r)?t=r:(t=TP(r,e,null,n),e[n.index]=t,z_(e,t)),QM(t,e,n,r),new qM(t,n,e)}(or(),ae())}const j6=gs,qM=class extends j6{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return zl(this._hostTNode,this._hostLView)}get injector(){return new br(this._hostTNode,this._hostLView)}get parentInjector(){const e=ha(this._hostTNode,this._hostLView);if(Al(e)){const t=Fu(e,this._hostLView),r=Vu(e);return new br(t[Pe].data[r+8],t)}return new br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=WM(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-ir}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function Io(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const S=t||{};a=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef}const u=o?e:new Jf(gt(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const x=(o?d:this.parentInjector).get(Ni,null);x&&(s=x)}gt(u.componentType??{});const I=u.create(d,i,null,s);return this.insertImpl(I.hostView,a,false),I}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function tf(n){return wr(n[en])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[en],g=new qM(d,d[er],d[en]);g.detach(g.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return x6(a,i,o,!r),e.attachToViewContainerRef(),Tf(DA(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=WM(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=A_(this._lContainer,t);r&&(Pl(DA(this._lContainer),t),sw(r[Pe],r))}detach(e){const t=this._adjustIndex(e,-1),r=A_(this._lContainer,t);return r&&null!=Pl(DA(this._lContainer),t)?new Yf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function WM(n){return n[8]}function DA(n){return n[8]||(n[8]=[])}let QM=function YM(n,e,t,r){if(n[Wi])return;let i;i=8&t.type?Ot(r):function $6(n,e){const t=n[tt],r=t.createComment(""),i=hr(e,n);return Hu(t,C_(t,i),r,function c$(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Wi]=i};const LA=new ve("Application Initializer");let UA=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=xe(LA,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(np(s))t.push(s);else if(ux(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),IN=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const xo=new ve("LocaleId",{providedIn:"root",factory:()=>xe(xo,ct.Optional|ct.SkipSelf)||function vG(){return typeof $localize<"u"&&$localize.locale||ad}()});let uy=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new M(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class wG{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let wN=(()=>{class n{compileModuleSync(t){return new AA(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=So(Ir(t).declarations).reduce((o,a)=>{const u=gt(a);return u&&o.push(new Jf(u)),o},[]);return new wG(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const TN=new ve(""),ly=new ve("");let zA,$A=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,zA||(function zG(n){zA=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(ye(Bt),ye(HA),ye(ly))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})(),HA=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return zA?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Ca=null;const DN=new ve("AllowMultipleToken"),GA=new ve("PlatformDestroyListeners"),qA=new ve("appBootstrapListener");class RN{constructor(e,t){this.name=e,this.token=t}}function xN(n,e,t=[]){const r=`Platform: ${e}`,i=new ve(r);return(s=[])=>{let o=WA();if(!o||o.injector.get(DN,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function WG(n){if(Ca&&!Ca.get(DN,!1))throw new de(400,!1);(function SN(){!function lI(n){Xh=n}(()=>{throw new de(600,!1)})})(),Ca=n;const e=n.get(NN);(function PN(n){n.get(LR,null)?.forEach(t=>t())})(n)}(function MN(n=[],e){return ki.create({name:e,providers:[{provide:ww,useValue:"platform"},{provide:GA,useValue:new Set([()=>Ca=null])},...n]})}(a,r))}return function QG(n){const e=WA();if(!e)throw new de(401,!1);return e}()}}function WA(){return Ca?.get(NN)??null}let NN=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function YG(n="zone.js",e){return"noop"===n?new CH:"zone.js"===n?new Bt(e):n}(r?.ngZone,function ON(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function n6(n,e,t){return new wA(n,e,t)}(t.moduleType,this.injector,function UN(n){return[{provide:Bt,useFactory:n},{provide:zf,multi:!0,useFactory:()=>{const e=xe(XG,{optional:!0});return()=>e.initialize()}},{provide:LN,useFactory:JG},{provide:nP,useFactory:rP}]}(()=>i)),o=s.injector.get(Do,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{o.handleError(u)}});s.onDestroy(()=>{dy(this._modules,s),a.unsubscribe()})}),function kN(n,e,t){try{const r=t();return np(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(UA);return a.runInitializers(),a.donePromise.then(()=>(function rM(n){mi(n,"Expected localeId to be defined"),"string"==typeof n&&(nM=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(xo,ad)||ad),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=VN({},r);return function GG(n,e,t){const r=new AA(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(ld);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new de(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(GA,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(ye(ki))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function VN(n,e){return Array.isArray(e)?e.reduce(VN,n):{...n,...e}}let ld=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=xe(LN),this.zoneIsStable=xe(nP),this.componentTypes=[],this.components=[],this.isStable=xe(uy).hasPendingTasks.pipe(De(t=>t?k(!1):this.zoneIsStable),Lt(),U()),this._injector=xe(Ni)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof HR;if(!this._injector.get(UA).done)throw!i&&function Rs(n){const e=gt(n)||zn(n)||Zn(n);return null!==e&&e.standalone}(t),new de(405,!1);let o;o=i?t:this._injector.get(U_).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function qG(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Ku),d=o.create(ki.NULL,[],r||o.selector,a),g=d.location.nativeElement,m=d.injector.get(TN,null);return m?.registerApplication(g),d.onDestroy(()=>{this.detachView(d.hostView),dy(this.components,d),m?.unregisterApplication(g)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new de(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;dy(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(qA,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>dy(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new de(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function dy(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const LN=new ve("",{providedIn:"root",factory:()=>xe(Do).handleError.bind(void 0)});function JG(){const n=xe(Bt),e=xe(Do);return t=>n.runOutsideAngular(()=>e.handleError(t))}let XG=(()=>{class n{constructor(){this.zone=xe(Bt),this.applicationRef=xe(ld)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let hy=(()=>{class n{static{this.__NG_ELEMENT_ID__=eq}}return n})();function eq(n){return function tq(n,e,t){if(oa(n)&&!t){const r=oi(n.index,e);return new Yf(r,r)}return 47&n.type?new Yf(e[Tn],e):null}(or(),ae(),16==(16&n))}class GN{constructor(){}supports(e){return K_(e)}create(e){return new oq(e)}}const sq=(n,e)=>e;class oq{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||sq}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<WN(r,i,s)?t:r,a=WN(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,g=u-i;if(d!=g){for(let v=0;v<d;v++){const I=v<s.length?s[v]:s[v]=0,b=I+v;g<=b&&b<d&&(s[v]=I+1)}s[o.previousIndex]=g-d}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!K_(e))throw new de(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function O4(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new aq(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new qN),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qN),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class aq{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uq{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class qN{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new uq,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function WN(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class KN{constructor(){}supports(e){return e instanceof Map||eA(e)}create(){return new cq}}class cq{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||eA(e)))throw new de(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new lq(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class lq{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function QN(){return new gy([new GN])}let gy=(()=>{class n{static{this.\u0275prov=Le({token:n,providedIn:"root",factory:QN})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||QN()),deps:[[n,new Ml,new $u]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new de(901,!1)}}return n})();function YN(){return new fp([new KN])}let fp=(()=>{class n{static{this.\u0275prov=Le({token:n,providedIn:"root",factory:YN})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||YN()),deps:[[n,new Ml,new $u]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new de(901,!1)}}return n})();const fq=xN(null,"core",[]);let pq=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(ye(ld))}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({})}}return n})();function dd(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let ZA=null;function ba(){return ZA}class Sq{}const Fi=new ve("DocumentToken");let e0=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:function(){return xe(Pq)},providedIn:"platform"})}}return n})();const Rq=new ve("Location Initialized");let Pq=(()=>{class n extends e0{constructor(){super(),this._doc=xe(Fi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ba().getBaseHref(this._doc)}onPopState(t){const r=ba().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=ba().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function t0(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function sO(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Mo(n){return n&&"?"!==n[0]?"?"+n:n}let Yu=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:function(){return xe(aO)},providedIn:"root"})}}return n})();const oO=new ve("appBaseHref");let aO=(()=>{class n extends Yu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??xe(Fi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return t0(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Mo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Mo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Mo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ye(e0),ye(oO,8))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),xq=(()=>{class n extends Yu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=t0(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Mo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Mo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ye(e0),ye(oO,8))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})(),n0=(()=>{class n{constructor(t){this._subject=new On,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Oq(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(sO(uO(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Mo(r))}normalize(t){return n.stripTrailingSlash(function Nq(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,uO(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Mo}static{this.joinWithSlash=t0}static{this.stripTrailingSlash=sO}static{this.\u0275fac=function(r){return new(r||n)(ye(Yu))}}static{this.\u0275prov=Le({token:n,factory:function(){return function Mq(){return new n0(ye(Yu))}()},providedIn:"root"})}}return n})();function uO(n){return n.replace(/\/index.html$/,"")}function _O(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class E9{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let EO=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new E9(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),IO(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{IO(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ge(gs),ge(Po),ge(gy))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function IO(n,e){n.context.$implicit=e.item}let Dy=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new I9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){wO("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){wO("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ge(gs),ge(Po))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class I9{constructor(){this.$implicit=null,this.ngIf=null}}function wO(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ke(e)}'.`)}let CO=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:_a.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(ge(Oi),ge(fp),ge(To))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})(),W9=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({})}}return n})();function Sy(n){return"server"===n}let J9=(()=>{class n{static{this.\u0275prov=Le({token:n,providedIn:"root",factory:()=>new X9(ye(Fi),window)})}}return n})();class X9{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Z9(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class DO{}class w5 extends Sq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class E0 extends w5{static makeCurrent(){!function Dq(n){ZA||(ZA=n)}(new E0)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function A5(){return _p=_p||document.querySelector("base"),_p?_p.getAttribute("href"):null}();return null==t?null:function C5(n){xy=xy||document.createElement("a"),xy.setAttribute("href",n);const e=xy.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){_p=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return _O(document.cookie,e)}}let xy,_p=null,T5=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();const I0=new ve("EventManagerPlugins");let MO=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new de(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(ye(I0),ye(Bt))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();class NO{constructor(e){this._doc=e}}const w0="ng-app-id";let OO=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Sy(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${w0}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(w0),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(w0,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ye(Fi),ye(N_),ye(UR,8),ye(Vs))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();const A0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},C0=/%COMP%/g,P5=new ve("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function VO(n,e){return e.map(t=>t.replace(C0,n))}let FO=(()=>{class n{constructor(t,r,i,s,o,a,u,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Sy(a),this.defaultRenderer=new b0(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Hn.ShadowDom&&(r={...r,encapsulation:Hn.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof UO?i.applyToHost(t):i instanceof T0&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Hn.Emulated:s=new UO(u,d,r,this.appId,g,o,a,m);break;case Hn.ShadowDom:return new O5(u,d,t,r,o,a,this.nonce,m);default:s=new T0(u,d,r,g,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ye(MO),ye(OO),ye(N_),ye(P5),ye(Fi),ye(Vs),ye(Bt),ye(UR))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();class b0{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(A0[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(LO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(LO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new de(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=A0[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=A0[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_a.DashCase|_a.Important)?e.style.setProperty(t,r,i&_a.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_a.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=ba().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function LO(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class O5 extends b0{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=VO(i.id,i.styles);for(const g of d){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=g,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class T0 extends b0{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?VO(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class UO extends T0{constructor(e,t,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,t,r,s,o,a,u,d),this.contentAttr=function x5(n){return"_ngcontent-%COMP%".replace(C0,n)}(d),this.hostAttr=function M5(n){return"_nghost-%COMP%".replace(C0,n)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let k5=(()=>{class n extends NO{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(ye(Fi))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();const BO=["alt","control","meta","shift"],V5={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},F5={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let L5=(()=>{class n extends NO{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ba().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),BO.forEach(d=>{const g=r.indexOf(d);g>-1&&(r.splice(g,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=V5[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),BO.forEach(o=>{o!==i&&(0,F5[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(ye(Fi))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();const $5=xN(fq,"browser",[{provide:Vs,useValue:"browser"},{provide:LR,useValue:function U5(){E0.makeCurrent()},multi:!0},{provide:Fi,useFactory:function j5(){return function _$(n){hw=n}(document),document},deps:[]}]),H5=new ve(""),HO=[{provide:ly,useClass:class b5{addToWindow(e){Ut.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new de(5103,!1);return s},Ut.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ut.getAllAngularRootElements=()=>e.getAllRootElements(),Ut.frameworkStabilizers||(Ut.frameworkStabilizers=[]),Ut.frameworkStabilizers.push(r=>{const i=Ut.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?ba().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:TN,useClass:$A,deps:[Bt,HA,ly]},{provide:$A,useClass:$A,deps:[Bt,HA,ly]}],zO=[{provide:ww,useValue:"root"},{provide:Do,useFactory:function B5(){return new Do},deps:[]},{provide:I0,useClass:k5,multi:!0,deps:[Fi,Bt,Vs]},{provide:I0,useClass:L5,multi:!0,deps:[Fi]},FO,OO,MO,{provide:GR,useExisting:FO},{provide:DO,useClass:T5,deps:[]},[]];let z5=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:N_,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(ye(H5,12))}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({providers:[...zO,...HO],imports:[W9,pq]})}}return n})(),GO=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(ye(Fi))}}static{this.\u0275prov=Le({token:n,factory:function(r){let i=null;return i=r?new r:function q5(){return new GO(ye(Fi))}(),i},providedIn:"root"})}}return n})();typeof window<"u"&&window;const{isArray:X5}=Array,{getPrototypeOf:Z5,prototype:e8,keys:t8}=Object;function QO(n){if(1===n.length){const e=n[0];if(X5(e))return{args:e,keys:null};if(function n8(n){return n&&"object"==typeof n&&Z5(n)===e8}(e)){const t=t8(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:r8}=Array;function YO(n){return le(e=>function i8(n,e){return r8(e)?n(...e):n(e)}(n,e))}function JO(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function S0(...n){const e=as(n),t=os(n),{args:r,keys:i}=QO(n);if(0===r.length)return C([],e);const s=new pt(function s8(n,e,t=dt){return r=>{XO(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)XO(e,()=>{const d=C(n[u],e);let g=!1;d.subscribe(Q(r,m=>{s[u]=m,g||(g=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>JO(i,o):dt));return t?s.pipe(YO(t)):s}function XO(n,e,t){n?yr(t,n,e):e()}const My=$e(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function R0(...n){return function o8(){return Or(1)}()(C(n,as(n)))}function ZO(n){return new pt(e=>{jn(n()).subscribe(e)})}function yp(n,e){const t=D(n)?n:()=>n,r=i=>i.error(t());return new pt(e?i=>e.schedule(r,0,i):r)}function P0(){return B((n,e)=>{let t=null;n._refCount++;const r=Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class e1 extends pt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,te(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yt;const t=this.getSubject();e.add(this.source.subscribe(Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yt.EMPTY)}return e}refCount(){return P0()(this)}}function fd(n){return n<=0?()=>Pn:B((e,t)=>{let r=0;e.subscribe(Q(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ny(...n){const e=as(n);return B((t,r)=>{(e?R0(n,t,e):R0(n,t)).subscribe(r)})}function ts(n,e){return B((t,r)=>{let i=0;t.subscribe(Q(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Oy(n){return B((e,t)=>{let r=!1;e.subscribe(Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function t1(n=a8){return B((e,t)=>{let r=!1;e.subscribe(Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function a8(){return new My}function Da(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ts((i,s)=>n(i,s,r)):dt,fd(1),t?Oy(e):t1(()=>new My))}function pd(n,e){return D(e)?$n(n,e,1):$n(n,1)}function Tr(n,e,t){const r=D(n)||e||t?{next:n,error:e,complete:t}:n;return r?B((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Q(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):dt}function Ju(n){return B((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Q(t,void 0,void 0,o=>{s=jn(n(o,Ju(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function ky(n,e){return B(function u8(n,e,t,r,i){return(s,o)=>{let a=t,u=e,d=0;s.subscribe(Q(o,g=>{const m=d++;u=a?n(u,g,m):(a=!0,g),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(n,e,arguments.length>=2,!0))}function x0(n){return n<=0?()=>Pn:B((e,t)=>{let r=[];e.subscribe(Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function vp(n){return B((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const at="primary",Ep=Symbol("RouteTitle");class h8{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function gd(n){return new h8(n)}function f8(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Hs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!n1(n[i],e[i]))return!1;return!0}function n1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function r1(n){return n.length>0?n[n.length-1]:null}function Sa(n){return function J5(n){return!!n&&(n instanceof pt||D(n.lift)&&D(n.subscribe))}(n)?n:np(n)?C(Promise.resolve(n)):k(n)}const g8={exact:function o1(n,e,t){if(!Xu(n.segments,e.segments)||!Vy(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!o1(n.children[r],e.children[r],t))return!1;return!0},subset:a1},i1={exact:function m8(n,e){return Hs(n,e)},subset:function _8(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>n1(n[t],e[t]))},ignored:()=>!0};function s1(n,e,t){return g8[t.paths](n.root,e.root,t.matrixParams)&&i1[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function a1(n,e,t){return u1(n,e,e.segments,t)}function u1(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Xu(i,t)||e.hasChildren()||!Vy(i,t,r))}if(n.segments.length===t.length){if(!Xu(n.segments,t)||!Vy(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!a1(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Xu(n.segments,i)&&Vy(n.segments,i,r)&&n.children[at])&&u1(n.children[at],e,s,r)}}function Vy(n,e,t){return e.every((r,i)=>i1[t](n[i].parameters,r.parameters))}class md{constructor(e=new $t([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gd(this.queryParams)),this._queryParamMap}toString(){return E8.serialize(this)}}class $t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fy(this)}}class Ip{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=gd(this.parameters)),this._parameterMap}toString(){return d1(this)}}function Xu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let wp=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:function(){return new M0},providedIn:"root"})}}return n})();class M0{parse(e){const t=new x8(e);return new md(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ap(e.root,!0)}`,r=function A8(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ly(t)}=${Ly(i)}`).join("&"):`${Ly(t)}=${Ly(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function I8(n){return encodeURI(n)}(e.fragment)}`:""}`}}const E8=new M0;function Fy(n){return n.segments.map(e=>d1(e)).join("/")}function Ap(n,e){if(!n.hasChildren())return Fy(n);if(e){const t=n.children[at]?Ap(n.children[at],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==at&&r.push(`${i}:${Ap(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function v8(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===at&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==at&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===at?[Ap(n.children[at],!1)]:[`${i}:${Ap(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[at]?`${Fy(n)}/${t[0]}`:`${Fy(n)}/(${t.join("//")})`}}function c1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ly(n){return c1(n).replace(/%3B/gi,";")}function N0(n){return c1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Uy(n){return decodeURIComponent(n)}function l1(n){return Uy(n.replace(/\+/g,"%20"))}function d1(n){return`${N0(n.path)}${function w8(n){return Object.keys(n).map(e=>`;${N0(e)}=${N0(n[e])}`).join("")}(n.parameters)}`}const C8=/^[^\/()?;#]+/;function O0(n){const e=n.match(C8);return e?e[0]:""}const b8=/^[^\/()?;=#]+/,D8=/^[^=?&#]+/,R8=/^[^&#]+/;class x8{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[at]=new $t(e,t)),r}parseSegment(){const e=O0(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(e),new Ip(Uy(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function T8(n){const e=n.match(b8);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=O0(this.remaining);i&&(r=i,this.capture(r))}e[Uy(t)]=Uy(r)}parseQueryParam(e){const t=function S8(n){const e=n.match(D8);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function P8(n){const e=n.match(R8);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=l1(t),s=l1(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=O0(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new de(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=at);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[at]:new $t([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new de(4011,!1)}}function h1(n){return n.segments.length>0?new $t([],{[at]:n}):n}function f1(n){const e={};for(const r of Object.keys(n.children)){const s=f1(n.children[r]);if(r===at&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function M8(n){if(1===n.numberOfChildren&&n.children[at]){const e=n.children[at];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}function Zu(n){return n instanceof md}function p1(n){let e;const i=h1(function t(s){const o={};for(const u of s.children){const d=t(u);o[u.outlet]=d}const a=new $t(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function g1(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return k0(i,i,i,t,r);const s=function O8(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new _1(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new _1(t,e,r)}(e);if(s.toRoot())return k0(i,i,new $t([],{}),t,r);const o=function k8(n,e,t){if(n.isAbsolute)return new jy(e,!0,0);if(!t)return new jy(e,!1,NaN);if(null===t.parent)return new jy(t,!0,0);const r=By(n.commands[0])?0:1;return function V8(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new de(4005,!1);i=r.segments.length}return new jy(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?bp(o.segmentGroup,o.index,s.commands):y1(o.segmentGroup,o.index,s.commands);return k0(i,o.segmentGroup,a,t,r)}function By(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Cp(n){return"object"==typeof n&&null!=n&&n.outlets}function k0(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(g=>`${g}`):`${d}`}),o=n===e?t:m1(n,e,t);const a=h1(f1(o));return new md(a,s,i)}function m1(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:m1(s,e,t)}),new $t(n.segments,r)}class _1{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&By(r[0]))throw new de(4003,!1);const i=r.find(Cp);if(i&&i!==r1(r))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class jy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function y1(n,e,t){if(n||(n=new $t([],{})),0===n.segments.length&&n.hasChildren())return bp(n,e,t);const r=function L8(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Cp(a))break;const u=`${a}`,d=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!E1(u,d,o))return s;r+=2}else{if(!E1(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new $t(n.segments.slice(0,r.pathIndex),{});return s.children[at]=new $t(n.segments.slice(r.pathIndex),n.children),bp(s,0,i)}return r.match&&0===i.length?new $t(n.segments,{}):r.match&&!n.hasChildren()?V0(n,e,t):r.match?bp(n,0,i):V0(n,e,t)}function bp(n,e,t){if(0===t.length)return new $t(n.segments,{});{const r=function F8(n){return Cp(n[0])?n[0].outlets:{[at]:n}}(t),i={};if(Object.keys(r).some(s=>s!==at)&&n.children[at]&&1===n.numberOfChildren&&0===n.children[at].segments.length){const s=bp(n.children[at],e,t);return new $t(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=y1(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new $t(n.segments,i)}}function V0(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Cp(s)){const u=U8(s.outlets);return new $t(r,u)}if(0===i&&By(t[0])){r.push(new Ip(n.segments[e].path,v1(t[0]))),i++;continue}const o=Cp(s)?s.outlets[at]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&By(a)?(r.push(new Ip(o,v1(a))),i+=2):(r.push(new Ip(o,{})),i++)}return new $t(r,{})}function U8(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=V0(new $t([],{}),0,r))}),e}function v1(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function E1(n,e,t){return n==t.path&&Hs(e,t.parameters)}const Tp="imperative";class zs{constructor(e,t){this.id=e,this.url=t}}class $y extends zs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ra extends zs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Dp extends zs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _d extends zs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Hy extends zs{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class I1 extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B8 extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class j8 extends zs{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $8 extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H8 extends zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class z8{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class G8{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class q8{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class W8{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class K8{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Q8{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w1{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class F0{}class L0{constructor(e){this.url=e}}class Y8{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Sp,this.attachRef=null}}let Sp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Y8,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class A1{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=U0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=U0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=B0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return B0(e,this._root).map(t=>t.value)}}function U0(n,e){if(n===e.value)return e;for(const t of e.children){const r=U0(n,t);if(r)return r}return null}function B0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=B0(n,t);if(r.length)return r.unshift(e),r}return[]}class ko{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function yd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class C1 extends A1{constructor(e,t){super(e),this.snapshot=t,j0(this,e)}toString(){return this.snapshot.toString()}}function b1(n,e){const t=function J8(n,e){const o=new zy([],{},{},"",{},at,e,null,{});return new D1("",new ko(o,[]))}(0,e),r=new M([new Ip("",{})]),i=new M({}),s=new M({}),o=new M({}),a=new M(""),u=new vd(r,i,o,a,s,at,e,t.root);return u.snapshot=t.root,new C1(new ko(u,[]),t)}class vd{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(le(d=>d[Ep]))??k(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(le(e=>gd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(le(e=>gd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function T1(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function X8(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class zy{get title(){return this.data?.[Ep]}constructor(e,t,r,i,s,o,a,u,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class D1 extends A1{constructor(e,t){super(t),this.url=e,j0(this,t)}toString(){return S1(this._root)}}function j0(n,e){e.value._routerState=n,e.children.forEach(t=>j0(n,t))}function S1(n){const e=n.children.length>0?` { ${n.children.map(S1).join(", ")} } `:"";return`${n.value}${e}`}function $0(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hs(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Hs(e.params,t.params)||n.paramsSubject.next(t.params),function p8(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Hs(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function H0(n,e){const t=Hs(n.params,e.params)&&function y8(n,e){return Xu(n,e)&&n.every((t,r)=>Hs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||H0(n.parent,e.parent))}let z0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=at,this.activateEvents=new On,this.deactivateEvents=new On,this.attachEvents=new On,this.detachEvents=new On,this.parentContexts=xe(Sp),this.location=xe(gs),this.changeDetector=xe(hy),this.environmentInjector=xe(Ni),this.inputBinder=xe(Gy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Z8(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[vi]})}}return n})();class Z8{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===vd?this.route:e===Sp?this.childContexts:this.parent.get(e,t)}}const Gy=new ve("");let R1=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=S0([r.queryParams,r.params,r.data]).pipe(De(([s,o,a],u)=>(a={...s,...o,...a},0===u?k(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function Tq(n){const e=gt(n);if(!e)return null;const t=new Jf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();function Rp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function tW(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Rp(n,r,i);return Rp(n,r)})}(n,e,t);return new ko(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Rp(n,a)),o}}const r=function nW(n){return new vd(new M(n.url),new M(n.params),new M(n.queryParams),new M(n.fragment),new M(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Rp(n,s));return new ko(r,i)}}const G0="ngNavigationCancelingError";function P1(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Zu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=x1(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function x1(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[G0]=!0,r.cancellationCode=e,t&&(r.url=t),r}function M1(n){return n&&n[G0]}let N1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["ng-component"]],standalone:!0,features:[PM],decls:1,vars:0,template:function(r,i){1&r&&tr(0,"router-outlet")},dependencies:[z0],encapsulation:2})}}return n})();function q0(n){const e=n.children&&n.children.map(q0),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==at&&(t.component=N1),t}function ys(n){return n.outlet||at}function Pp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class lW{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),$0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=yd(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=yd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=yd(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=yd(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Q8(s.value.snapshot))}),e.children.length&&this.forwardEvent(new W8(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if($0(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),$0(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Pp(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class O1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class qy{constructor(e,t){this.component=e,this.route=t}}function dW(n,e,t){const r=n._root;return xp(r,e?e._root:null,t,[r.value])}function Ed(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function eI(n){return null!==Lc(n)}(n)?e.get(n):n:r}function xp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=yd(e);return n.children.forEach(o=>{(function fW(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function pW(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Xu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Xu(n.url,e.url)||!Hs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!H0(n,e)||!Hs(n.queryParams,e.queryParams);default:return!H0(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new O1(r)):(s.data=o.data,s._resolvedData=o._resolvedData),xp(n,e,s.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new qy(a.outlet.component,o))}else o&&Mp(e,a,i),i.canActivateChecks.push(new O1(r)),xp(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Mp(a,t.getContext(o),i)),i}function Mp(n,e,t){const r=yd(n),i=n.value;Object.entries(r).forEach(([s,o])=>{Mp(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new qy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Np(n){return"function"==typeof n}function k1(n){return n instanceof My||"EmptyError"===n?.name}const Wy=Symbol("INITIAL_VALUE");function Id(){return De(n=>S0(n.map(e=>e.pipe(fd(1),Ny(Wy)))).pipe(le(e=>{for(const t of e)if(!0!==t){if(t===Wy)return Wy;if(!1===t||t instanceof md)return t}return!0}),ts(e=>e!==Wy),fd(1)))}function V1(n){return function cn(...n){return zt(n)}(Tr(e=>{if(Zu(e))throw P1(0,e)}),le(e=>!0===e))}class Ky{constructor(e){this.segmentGroup=e||null}}class F1{constructor(e){this.urlTree=e}}function wd(n){return yp(new Ky(n))}function L1(n){return yp(new F1(n))}class OW{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new de(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return k(r);if(i.numberOfChildren>1||!i.children[at])return yp(new de(4e3,!1));i=i.children[at]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new md(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new $t(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new de(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const W0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kW(n,e,t,r,i){const s=K0(n,e,t);return s.matched?(r=function iW(n,e){return n.providers&&!n._injector&&(n._injector=CA(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function xW(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?k(i.map(o=>{const a=Ed(o,n);return Sa(function EW(n){return n&&Np(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Id(),V1()):k(!0)}(r,e,t).pipe(le(o=>!0===o?s:{...W0}))):k(s)}function K0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...W0}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||f8)(t,n,e);if(!i)return{...W0};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function U1(n,e,t,r){return t.length>0&&function LW(n,e,t){return t.some(r=>Qy(n,e,r)&&ys(r)!==at)}(n,t,r)?{segmentGroup:new $t(e,FW(r,new $t(t,n.children))),slicedSegments:[]}:0===t.length&&function UW(n,e,t){return t.some(r=>Qy(n,e,r))}(n,t,r)?{segmentGroup:new $t(n.segments,VW(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new $t(n.segments,n.children),slicedSegments:t}}function VW(n,e,t,r,i){const s={};for(const o of r)if(Qy(n,t,o)&&!i[ys(o)]){const a=new $t([],{});s[ys(o)]=a}return{...i,...s}}function FW(n,e){const t={};t[at]=e;for(const r of n)if(""===r.path&&ys(r)!==at){const i=new $t([],{});t[ys(r)]=i}return t}function Qy(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class HW{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new OW(this.urlSerializer,this.urlTree)}noMatchError(e){return new de(4002,!1)}recognize(){const e=U1(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,at).pipe(Ju(t=>{if(t instanceof F1)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Ky?this.noMatchError(t):t}),le(t=>{const r=new zy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},at,this.rootComponentType,null,{}),i=new ko(r,t),s=new D1("",i),o=function N8(n,e,t=null,r=null){return g1(p1(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,at).pipe(Ju(r=>{throw r instanceof Ky?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=T1(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return C(i).pipe(pd(s=>{const o=r.children[s],a=function uW(n,e){const t=n.filter(r=>ys(r)===e);return t.push(...n.filter(r=>ys(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),ky((s,o)=>(s.push(...o),s)),Oy(null),function c8(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ts((i,s)=>n(i,s,r)):dt,x0(1),t?Oy(e):t1(()=>new My))}(),$n(s=>{if(null===s)return wd(r);const o=B1(s);return function zW(n){n.sort((e,t)=>e.value.outlet===at?-1:t.value.outlet===at?1:e.value.outlet.localeCompare(t.value.outlet))}(o),k(o)}))}processSegment(e,t,r,i,s,o){return C(t).pipe(pd(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Ju(u=>{if(u instanceof Ky)return k(null);throw u}))),Da(a=>!!a),Ju(a=>{if(k1(a))return function jW(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?k([]):wd(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function BW(n,e,t,r){return!!(ys(n)===r||r!==at&&Qy(e,t,n))&&("**"===n.path||K0(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):wd(i):wd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?L1(s):this.applyRedirects.lineralizeSegments(r,s).pipe($n(o=>{const a=new $t(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:d,positionalParamSegments:g}=K0(t,i,s);if(!a)return wd(t);const m=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,g);return i.redirectTo.startsWith("/")?L1(m):this.applyRedirects.lineralizeSegments(i,m).pipe($n(v=>this.processSegment(e,r,t,v.concat(d),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const u=i.length>0?r1(i).parameters:{};a=k({snapshot:new zy(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j1(r),ys(r),r.component??r._loadedComponent??null,r,$1(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=kW(t,r,i,e).pipe(le(({matched:u,consumedSegments:d,remainingSegments:g,parameters:m})=>u?{snapshot:new zy(d,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,j1(r),ys(r),r.component??r._loadedComponent??null,r,$1(r)),consumedSegments:d,remainingSegments:g}:null));return a.pipe(De(u=>null===u?wd(t):this.getChildConfig(e=r._injector??e,r,i).pipe(De(({routes:d})=>{const g=r._loadedInjector??e,{snapshot:m,consumedSegments:v,remainingSegments:I}=u,{segmentGroup:b,slicedSegments:S}=U1(t,v,I,d);if(0===S.length&&b.hasChildren())return this.processChildren(g,d,b).pipe(le(q=>null===q?null:[new ko(m,q)]));if(0===d.length&&0===S.length)return k([new ko(m,[])]);const x=ys(r)===s;return this.processSegment(g,d,b,S,x?at:s,!0).pipe(le(q=>[new ko(m,q)]))}))))}getChildConfig(e,t,r){return t.children?k({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?k({routes:t._loadedRoutes,injector:t._loadedInjector}):function PW(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?k(!0):k(i.map(o=>{const a=Ed(o,n);return Sa(function mW(n){return n&&Np(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Id(),V1())}(e,t,r).pipe($n(i=>i?this.configLoader.loadChildren(e,t).pipe(Tr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function NW(n){return yp(x1(!1,3))}())):k({routes:[],injector:e})}}function GW(n){const e=n.value.routeConfig;return e&&""===e.path}function B1(n){const e=[],t=new Set;for(const r of n){if(!GW(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=B1(r.children);e.push(new ko(r.value,i))}return e.filter(r=>!t.has(r))}function j1(n){return n.data||{}}function $1(n){return n.resolve||{}}function H1(n){return"string"==typeof n.title||null===n.title}function Q0(n){return De(e=>{const t=n(e);return t?C(t).pipe(le(()=>e)):k(e)})}const Ad=new ve("ROUTES");let Y0=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=xe(wN)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return k(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Sa(t.loadComponent()).pipe(le(z1),Tr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),vp(()=>{this.componentLoaders.delete(t)})),i=new e1(r,()=>new H).pipe(P0());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return k({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function XW(n,e,t,r){return Sa(n.loadChildren()).pipe(le(z1),$n(i=>i instanceof SM||Array.isArray(i)?k(i):C(e.compileModuleAsync(i))),le(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Ad,[],{optional:!0,self:!0}).flat()),{routes:o.map(q0),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(vp(()=>{this.childrenLoaders.delete(r)})),o=new e1(s,()=>new H).pipe(P0());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function z1(n){return function ZW(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Yy=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new H,this.transitionAbortSubject=new H,this.configLoader=xe(Y0),this.environmentInjector=xe(Ni),this.urlSerializer=xe(wp),this.rootContexts=xe(Sp),this.inputBindingEnabled=null!==xe(Gy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>k(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new G8(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new z8(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new M({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Tp,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ts(s=>0!==s.id),le(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),De(s=>{this.currentTransition=s;let o=!1,a=!1;return k(s).pipe(Tr(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),De(u=>{const d=u.currentBrowserUrl.toString(),g=!t.navigated||u.extractedUrl.toString()!==d||d!==u.currentUrlTree.toString();if(!g&&"reload"!==(u.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const v="";return this.events.next(new _d(u.id,this.urlSerializer.serialize(u.rawUrl),v,0)),u.resolve(null),Pn}if(t.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return k(u).pipe(De(v=>{const I=this.transitions?.getValue();return this.events.next(new $y(v.id,this.urlSerializer.serialize(v.extractedUrl),v.source,v.restoredState)),I!==this.transitions?.getValue()?Pn:Promise.resolve(v)}),function qW(n,e,t,r,i,s){return $n(o=>function $W(n,e,t,r,i,s,o="emptyOnly"){return new HW(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(le(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Tr(v=>{s.targetSnapshot=v.targetSnapshot,s.urlAfterRedirects=v.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:v.urlAfterRedirects};const I=new I1(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(I)}));if(g&&t.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:v,extractedUrl:I,source:b,restoredState:S,extras:x}=u,q=new $y(v,this.urlSerializer.serialize(I),b,S);this.events.next(q);const F=b1(0,this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:F,urlAfterRedirects:I,extras:{...x,skipLocationChange:!1,replaceUrl:!1}},k(s)}{const v="";return this.events.next(new _d(u.id,this.urlSerializer.serialize(u.extractedUrl),v,1)),u.resolve(null),Pn}}),Tr(u=>{const d=new B8(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),le(u=>(this.currentTransition=s={...u,guards:dW(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function wW(n,e){return $n(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?k({...t,guardsResult:!0}):function AW(n,e,t,r){return C(n).pipe($n(i=>function RW(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?k(s.map(a=>{const u=Pp(e)??i,d=Ed(a,u);return Sa(function vW(n){return n&&Np(n.canDeactivate)}(d)?d.canDeactivate(n,e,t,r):u.runInContext(()=>d(n,e,t,r))).pipe(Da())})).pipe(Id()):k(!0)}(i.component,i.route,t,e,r)),Da(i=>!0!==i,!0))}(o,r,i,n).pipe($n(a=>a&&function gW(n){return"boolean"==typeof n}(a)?function CW(n,e,t,r){return C(e).pipe(pd(i=>R0(function TW(n,e){return null!==n&&e&&e(new q8(n)),k(!0)}(i.route.parent,r),function bW(n,e){return null!==n&&e&&e(new K8(n)),k(!0)}(i.route,r),function SW(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function hW(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>ZO(()=>k(o.guards.map(u=>{const d=Pp(o.node)??t,g=Ed(u,d);return Sa(function yW(n){return n&&Np(n.canActivateChild)}(g)?g.canActivateChild(r,n):d.runInContext(()=>g(r,n))).pipe(Da())})).pipe(Id())));return k(s).pipe(Id())}(n,i.path,t),function DW(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return k(!0);const i=r.map(s=>ZO(()=>{const o=Pp(e)??t,a=Ed(s,o);return Sa(function _W(n){return n&&Np(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Da())}));return k(i).pipe(Id())}(n,i.route,t))),Da(i=>!0!==i,!0))}(r,s,n,e):k(a)),le(a=>({...t,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),Tr(u=>{if(s.guardsResult=u.guardsResult,Zu(u.guardsResult))throw P1(0,u.guardsResult);const d=new j8(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),ts(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",3),!1)),Q0(u=>{if(u.guards.canActivateChecks.length)return k(u).pipe(Tr(d=>{const g=new $8(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}),De(d=>{let g=!1;return k(d).pipe(function WW(n,e){return $n(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return k(t);let s=0;return C(i).pipe(pd(o=>function KW(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!H1(i)&&(s[Ep]=i.title),function QW(n,e,t,r){const i=function YW(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return k({});const s={};return C(i).pipe($n(o=>function JW(n,e,t,r){const i=Pp(e)??r,s=Ed(n,i);return Sa(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Da(),Tr(a=>{s[o]=a}))),x0(1),function l8(n){return le(()=>n)}(s),Ju(o=>k1(o)?Pn:yp(o)))}(s,n,e,r).pipe(le(o=>(n._resolvedData=o,n.data=T1(n,t).resolve,i&&H1(i)&&(n.data[Ep]=i.title),null)))}(o.route,r,n,e)),Tr(()=>s++),x0(1),$n(o=>s===i.length?k(t):Pn))})}(t.paramsInheritanceStrategy,this.environmentInjector),Tr({next:()=>g=!0,complete:()=>{g||this.cancelNavigationTransition(d,"",2)}}))}),Tr(d=>{const g=new H8(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(g)}))}),Q0(u=>{const d=g=>{const m=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(g.routeConfig).pipe(Tr(v=>{g.component=v}),le(()=>{})));for(const v of g.children)m.push(...d(v));return m};return S0(d(u.targetSnapshot.root)).pipe(Oy(),fd(1))}),Q0(()=>this.afterPreactivation()),le(u=>{const d=function eW(n,e,t){const r=Rp(n,e._root,t?t._root:void 0);return new C1(r,e)}(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:d},s}),Tr(()=>{this.events.next(new F0)}),((n,e,t,r)=>le(i=>(new lW(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),fd(1),Tr({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ra(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),t.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function d8(n){return B((e,t)=>{jn(n).subscribe(Q(t,()=>t.complete(),Ve)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Tr(u=>{throw u}))),vp(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Ju(u=>{if(a=!0,M1(u))this.events.next(new Dp(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function rW(n){return M1(n)&&Zu(n.url)}(u)?this.events.next(new L0(u.url)):s.resolve(!1);else{this.events.next(new Hy(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(u))}catch(d){s.reject(d)}}return Pn}))}))}cancelNavigationTransition(t,r,i){const s=new Dp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function G1(n){return n!==Tp}let q1=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===at);return r}getResolvedTitleForRoute(t){return t.data[Ep]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:function(){return xe(e7)},providedIn:"root"})}}return n})(),e7=(()=>{class n extends q1{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ye(GO))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),t7=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:function(){return xe(r7)},providedIn:"root"})}}return n})();class n7{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let r7=(()=>{class n extends n7{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Gn(n)))(i||n)}}()}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Jy=new ve("",{providedIn:"root",factory:()=>({})});let i7=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:function(){return xe(s7)},providedIn:"root"})}}return n})(),s7=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Op=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Op||{});function W1(n,e){n.events.pipe(ts(t=>t instanceof Ra||t instanceof Dp||t instanceof Hy||t instanceof _d),le(t=>t instanceof Ra||t instanceof _d?Op.COMPLETE:t instanceof Dp&&(0===t.code||1===t.code)?Op.REDIRECTING:Op.FAILED),ts(t=>t!==Op.REDIRECTING),fd(1)).subscribe(()=>{e()})}function o7(n){throw n}function a7(n,e,t){return e.parse("/")}const u7={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},c7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ns=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=xe(IN),this.isNgZoneEnabled=!1,this._events=new H,this.options=xe(Jy,{optional:!0})||{},this.pendingTasks=xe(uy),this.errorHandler=this.options.errorHandler||o7,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||a7,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=xe(i7),this.routeReuseStrategy=xe(t7),this.titleStrategy=xe(q1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=xe(Ad,{optional:!0})?.flat()??[],this.navigationTransitions=xe(Yy),this.urlSerializer=xe(wp),this.location=xe(n0),this.componentInputBindingEnabled=!!xe(Gy,{optional:!0}),this.eventsSubscription=new yt,this.isNgZoneEnabled=xe(Bt)instanceof Bt&&Bt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new md,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=b1(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(K1(r)&&this._events.next(r));if(r instanceof $y)G1(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof _d)this.rawUrlTree=i.rawUrl;else if(r instanceof I1){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof F0)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Dp)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof L0){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||G1(i.source)};this.scheduleNavigation(s,Tp,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof Hy&&this.restoreHistory(i,!0),r instanceof Ra&&(this.navigated=!0),K1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Tp,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(q0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let m,g=null;switch(a){case"merge":g={...this.currentUrlTree.queryParams,...s};break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=s||null}null!==g&&(g=this.removeEmptyProps(g));try{m=p1(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),m=this.currentUrlTree.root}return g1(m,t,g,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Zu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Tp,null,r)}navigate(t,r={skipLocationChange:!1}){return function l7(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new de(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...u7}:!1===r?{...c7}:r,Zu(t))return s1(this.currentUrlTree,t,i);const s=this.parseUrl(t);return s1(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((m,v)=>{a=m,u=v});const g=this.pendingTasks.add();return W1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function K1(n){return!(n instanceof F0||n instanceof L0)}let kp=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new H,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof Ra&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function PR(n,e,t){return function U$(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?RR:va}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(ge(ns),ge(vd),function Rl(n){return function jI(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Kc(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(or(),n)}("tabindex"),ge(To),ge(Oi),ge(Yu))}}static{this.\u0275dir=Ye({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&sn("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Us("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",dd],skipLocationChange:["skipLocationChange","skipLocationChange",dd],replaceUrl:["replaceUrl","replaceUrl",dd],routerLink:"routerLink"},standalone:!0,features:[zP,vi]})}}return n})();class Q1{}let f7=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ts(t=>t instanceof Ra),pd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=CA(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return C(i).pipe(Or())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):k(null);const s=i.pipe($n(o=>null===o?k(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?C([s,this.loader.loadComponent(r)]).pipe(Or()):s})}static{this.\u0275fac=function(r){return new(r||n)(ye(ns),ye(wN),ye(Ni),ye(Q1),ye(Y0))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const J0=new ve("");let Y1=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof $y?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ra?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof _d&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof w1&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new w1(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function _P(){throw new Error("invalid")}()}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();function Vo(n,e){return{\u0275kind:n,\u0275providers:e}}function X1(){const n=xe(ki);return e=>{const t=n.get(ld);if(e!==t.components[0])return;const r=n.get(ns),i=n.get(Z1);1===n.get(X0)&&r.initialNavigation(),n.get(ek,null,ct.Optional)?.setUpPreloading(),n.get(J0,null,ct.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const Z1=new ve("",{factory:()=>new H}),X0=new ve("",{providedIn:"root",factory:()=>1}),ek=new ve("");function _7(n){return Vo(0,[{provide:ek,useExisting:f7},{provide:Q1,useExisting:n}])}const tk=new ve("ROUTER_FORROOT_GUARD"),v7=[n0,{provide:wp,useClass:M0},ns,Sp,{provide:vd,useFactory:function J1(n){return n.routerState.root},deps:[ns]},Y0,[]];function E7(){return new RN("Router",ns)}let Z0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[v7,[],{provide:Ad,multi:!0,useValue:t},{provide:tk,useFactory:C7,deps:[[ns,new $u,new Ml]]},{provide:Jy,useValue:r||{}},r?.useHash?{provide:Yu,useClass:xq}:{provide:Yu,useClass:aO},{provide:J0,useFactory:()=>{const n=xe(J9),e=xe(Bt),t=xe(Jy),r=xe(Yy),i=xe(wp);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Y1(i,r,n,e,t)}},r?.preloadingStrategy?_7(r.preloadingStrategy).\u0275providers:[],{provide:RN,multi:!0,useFactory:E7},r?.initialNavigation?b7(r):[],r?.bindToComponentInputs?Vo(8,[R1,{provide:Gy,useExisting:R1}]).\u0275providers:[],[{provide:nk,useFactory:X1},{provide:qA,multi:!0,useExisting:nk}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ad,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(ye(tk,8))}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({})}}return n})();function C7(n){return"guarded"}function b7(n){return["disabled"===n.initialNavigation?Vo(3,[{provide:LA,multi:!0,useFactory:()=>{const e=xe(ns);return()=>{e.setUpLocationChangeListener()}}},{provide:X0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Vo(2,[{provide:X0,useValue:0},{provide:LA,multi:!0,deps:[ki],useFactory:e=>{const t=e.get(Rq,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(ns),s=e.get(Z1);W1(i,()=>{r(!0)}),e.get(Yy).afterPreactivation=()=>(r(!0),s.closed?k(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const nk=new ve(""),D7=[];let S7=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({imports:[Z0.forRoot(D7),Z0]})}}return n})(),R7=(()=>{class n{constructor(){this.title="wedding-app"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-root"]],decls:29,vars:7,consts:[[1,"grid-container"],[1,"grid-item1"],[1,"avatar-container"],[1,"circular-frame"],["src","assets/images/ratio1-1/picture3-1_1.jpg"],[3,"routerLink"],[1,"grid-item2"]],template:function(r,i){1&r&&(fe(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),tr(4,"img",4),_e()(),fe(5,"ul")(6,"li")(7,"a",5),Ce(8,"HOME"),_e()(),fe(9,"li")(10,"a",5),Ce(11,"ABOUT"),_e()(),fe(12,"li")(13,"a",5),Ce(14,"SCHEDULE"),_e()(),fe(15,"li")(16,"a",5),Ce(17,"REGISTRY"),_e()(),fe(18,"li")(19,"a",5),Ce(20,"FAQ"),_e()(),fe(21,"li")(22,"a",5),Ce(23,"CONTACT"),_e()(),fe(24,"li")(25,"a",5),Ce(26,"RSVP"),_e()()()(),fe(27,"div",6),tr(28,"router-outlet"),_e()()),2&r&&(bt(7),rn("routerLink","Home"),bt(3),rn("routerLink","About"),bt(3),rn("routerLink","Schedule"),bt(3),rn("routerLink","Registry"),bt(3),rn("routerLink","FAQ"),bt(3),rn("routerLink","Contact"),bt(3),rn("routerLink","Rsvp"))},dependencies:[z0,kp],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:16% auto}.grid-item1[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:2;font-family:Lora,cursive;background-color:#96a498;color:#fff;min-height:100vh}.grid-item2[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;background-color:#fcfbf4;font-family:Lora,cursive}.avatar-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.circular-frame[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:20px;width:180px;height:180px;border-radius:50%;overflow:hidden}.circular-frame[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:26px;list-style-type:none;margin-top:1em}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:inherit;text-decoration:none}@media (max-width: 1200px){.circular-frame[_ngcontent-%COMP%]{width:140px;height:140px}ul[_ngcontent-%COMP%]{padding-left:2em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:20px}}@media (max-width: 1000px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:18% auto}.circular-frame[_ngcontent-%COMP%]{width:120px;height:120px}ul[_ngcontent-%COMP%]{padding-left:1.5em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 800px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:22% auto}.circular-frame[_ngcontent-%COMP%]{width:110px;height:110px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px}}@media (max-width: 600px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:25% auto}.circular-frame[_ngcontent-%COMP%]{width:90px;height:90px}ul[_ngcontent-%COMP%]{padding-left:1em}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 450px){.circular-frame[_ngcontent-%COMP%]{width:80px;height:80px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 450px){.circular-frame[_ngcontent-%COMP%]{width:70px;height:70px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px}}"]})}}return n})();var Cd=Xe(631);(0,Cd.registerVersion)("firebase","10.14.1","app");class M7 extends yt{constructor(e,t){super()}schedule(e,t=0){return this}}const Xy={setInterval(n,e,...t){const{delegate:r}=Xy;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Xy;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class rk extends M7{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Xy.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Xy.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ee(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const eC={now:()=>(eC.delegate||Date).now(),delegate:void 0};class Vp{constructor(e,t=Vp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Vp.now=eC.now;class ik extends Vp{constructor(e,t=Vp.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const k7=new class O7 extends ik{}(class N7 extends rk{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),sk=new ik(rk),tC=new Gl("ANGULARFIRE2_VERSION");class ok{constructor(){return((n,e)=>{const t=(0,Cd.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(F7)}}const F7="app-check";function bd(){}class ak{zone;delegate;constructor(e,t=k7){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class L7{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bd,{},bd,bd)),t.pipe(Tr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let uk=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new ak(Zone.current)),this.insideAngular=t.run(()=>new ak(Zone.current,sk)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ye(Bt))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ui(n){return function B7(n){return function(t){return(t=t.lift(new L7(n.ngZone))).pipe(kr(n.outsideAngular),gi(n.insideAngular))}}(function Td(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Pa=Xe(574);Pa.A.registerVersion("firebase","10.14.1","app-compat");const z7=["ngOnDestroy"];class ck{constructor(e){return e}}const Zy=new ve("angularfire2.app.options"),ev=new ve("angularfire2.app.name");function nC(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Pa.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Pa.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;W7("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ck(o)}const W7=(n,...e)=>{},K7={provide:ck,useFactory:nC,deps:[Zy,Bt,[new $u,ev]]};let Q7=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Zy,useValue:t},{provide:ev,useValue:r}]}}constructor(t){Pa.A.registerVersion("angularfire",tC.full,"core"),Pa.A.registerVersion("angularfire",tC.full,"app-compat"),Pa.A.registerVersion("angular",qR.full,t.toString())}static \u0275fac=function(r){return new(r||n)(ye(Vs))};static \u0275mod=ri({type:n});static \u0275inj=dr({providers:[K7]})}return n})();function lk(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Y7(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(dk("error",`${e} was already initialized on the ${t} Firebase App with different settings.${J7?" You may need to reload as Firebase is not HMR aware.":""}`),dk("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const J7=typeof module<"u"&&!!module.hot,dk=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Xe(324);class X7 extends H{constructor(e=1/0,t=1/0,r=eC){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function hk(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,U({connector:()=>new X7(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function fk(n,e){return D(e)?De(()=>n,e):De(()=>n)}const pk=new ve("angularfire2.auth.use-emulator"),gk=new ve("angularfire2.auth.settings"),mk=new ve("angularfire2.auth.tenant-id"),_k=new ve("angularfire2.auth.langugage-code"),yk=new ve("angularfire2.auth.use-device-language"),vk=new ve("angularfire.auth.persistence"),Ek=(n,e,t,r,i,s,o,a)=>lk(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,g]of Object.entries(o))u.settings[d]=g;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]);let Ik=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,d,g,m,v,I){const b=new H,S=k(void 0).pipe(gi(o.outsideAngular),De(()=>s.runOutsideAngular(()=>Promise.resolve().then(Xe.bind(Xe,324)))),le(()=>nC(t,s,r)),le(x=>Ek(x,s,a,d,g,m,u,v)),hk({bufferSize:1,refCount:!1}));if(Sy(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=k(null);else{S.pipe(Da()).subscribe();const x=S.pipe(De(W=>W.getRedirectResult().then(oe=>oe,()=>null)),Ui,hk({bufferSize:1,refCount:!1})),q=S.pipe(De(W=>new pt(oe=>({unsubscribe:s.runOutsideAngular(()=>W.onAuthStateChanged(Ee=>oe.next(Ee),Ee=>oe.error(Ee),()=>oe.complete()))})))),F=S.pipe(De(W=>new pt(oe=>({unsubscribe:s.runOutsideAngular(()=>W.onIdTokenChanged(Ee=>oe.next(Ee),Ee=>oe.error(Ee),()=>oe.complete()))}))));this.authState=x.pipe(fk(q),kr(o.outsideAngular),gi(o.insideAngular)),this.user=x.pipe(fk(F),kr(o.outsideAngular),gi(o.insideAngular)),this.idToken=this.user.pipe(De(W=>W?C(W.getIdToken()):k(null))),this.idTokenResult=this.user.pipe(De(W=>W?C(W.getIdTokenResult()):k(null))),this.credential=T(x,b,this.authState.pipe(ts(W=>!W))).pipe(le(W=>W?.user?W:null),kr(o.outsideAngular),gi(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(z7.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>t.run(()=>d)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(g=>{const m=g?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,m),m})})})}))(this,S,s,{spy:{apply:(x,q,F)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&F.then(W=>b.next(W))}}})}static \u0275fac=function(r){return new(r||n)(ye(Zy),ye(ev,8),ye(Vs),ye(Bt),ye(uk),ye(pk,8),ye(gk,8),ye(mk,8),ye(_k,8),ye(yk,8),ye(vk,8),ye(ok,8))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function rC(){return B((n,e)=>{let t,r=!1;n.subscribe(Q(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var tc,bk,Y=Xe(467),wk=Xe(779),Gs=Xe(398),Ft=Xe(401),Ak=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ck={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(V,R,O){O||(O=0);var L=Array(16);if("string"==typeof R)for(var $=0;16>$;++$)L[$]=R.charCodeAt(O++)|R.charCodeAt(O++)<<8|R.charCodeAt(O++)<<16|R.charCodeAt(O++)<<24;else for($=0;16>$;++$)L[$]=R[O++]|R[O++]<<8|R[O++]<<16|R[O++]<<24;var K=V.g[3],N=(R=V.g[0])+(K^(O=V.g[1])&(($=V.g[2])^K))+L[0]+3614090360&4294967295;N=(O=($=(K=(R=(O=($=(K=(R=(O=($=(K=(R=(O=($=(K=(R=(O=($=(K=(R=(O=($=(K=(R=(O=($=(K=(R=(O=($=(K=(R=(O=($=(K=(R=(O=($=(K=(R=(O=($=(K=(R=(O=($=(K=(R=(O=($=(K=(R=(O=($=(K=(R=(O=($=(K=(R=O+(N<<7&4294967295|N>>>25))+((N=K+($^R&(O^$))+L[1]+3905402710&4294967295)<<12&4294967295|N>>>20))+((N=$+(O^K&(R^O))+L[2]+606105819&4294967295)<<17&4294967295|N>>>15))+((N=O+(R^$&(K^R))+L[3]+3250441966&4294967295)<<22&4294967295|N>>>10))+((N=R+(K^O&($^K))+L[4]+4118548399&4294967295)<<7&4294967295|N>>>25))+((N=K+($^R&(O^$))+L[5]+1200080426&4294967295)<<12&4294967295|N>>>20))+((N=$+(O^K&(R^O))+L[6]+2821735955&4294967295)<<17&4294967295|N>>>15))+((N=O+(R^$&(K^R))+L[7]+4249261313&4294967295)<<22&4294967295|N>>>10))+((N=R+(K^O&($^K))+L[8]+1770035416&4294967295)<<7&4294967295|N>>>25))+((N=K+($^R&(O^$))+L[9]+2336552879&4294967295)<<12&4294967295|N>>>20))+((N=$+(O^K&(R^O))+L[10]+4294925233&4294967295)<<17&4294967295|N>>>15))+((N=O+(R^$&(K^R))+L[11]+2304563134&4294967295)<<22&4294967295|N>>>10))+((N=R+(K^O&($^K))+L[12]+1804603682&4294967295)<<7&4294967295|N>>>25))+((N=K+($^R&(O^$))+L[13]+4254626195&4294967295)<<12&4294967295|N>>>20))+((N=$+(O^K&(R^O))+L[14]+2792965006&4294967295)<<17&4294967295|N>>>15))+((N=O+(R^$&(K^R))+L[15]+1236535329&4294967295)<<22&4294967295|N>>>10))+((N=R+($^K&(O^$))+L[1]+4129170786&4294967295)<<5&4294967295|N>>>27))+((N=K+(O^$&(R^O))+L[6]+3225465664&4294967295)<<9&4294967295|N>>>23))+((N=$+(R^O&(K^R))+L[11]+643717713&4294967295)<<14&4294967295|N>>>18))+((N=O+(K^R&($^K))+L[0]+3921069994&4294967295)<<20&4294967295|N>>>12))+((N=R+($^K&(O^$))+L[5]+3593408605&4294967295)<<5&4294967295|N>>>27))+((N=K+(O^$&(R^O))+L[10]+38016083&4294967295)<<9&4294967295|N>>>23))+((N=$+(R^O&(K^R))+L[15]+3634488961&4294967295)<<14&4294967295|N>>>18))+((N=O+(K^R&($^K))+L[4]+3889429448&4294967295)<<20&4294967295|N>>>12))+((N=R+($^K&(O^$))+L[9]+568446438&4294967295)<<5&4294967295|N>>>27))+((N=K+(O^$&(R^O))+L[14]+3275163606&4294967295)<<9&4294967295|N>>>23))+((N=$+(R^O&(K^R))+L[3]+4107603335&4294967295)<<14&4294967295|N>>>18))+((N=O+(K^R&($^K))+L[8]+1163531501&4294967295)<<20&4294967295|N>>>12))+((N=R+($^K&(O^$))+L[13]+2850285829&4294967295)<<5&4294967295|N>>>27))+((N=K+(O^$&(R^O))+L[2]+4243563512&4294967295)<<9&4294967295|N>>>23))+((N=$+(R^O&(K^R))+L[7]+1735328473&4294967295)<<14&4294967295|N>>>18))+((N=O+(K^R&($^K))+L[12]+2368359562&4294967295)<<20&4294967295|N>>>12))+((N=R+(O^$^K)+L[5]+4294588738&4294967295)<<4&4294967295|N>>>28))+((N=K+(R^O^$)+L[8]+2272392833&4294967295)<<11&4294967295|N>>>21))+((N=$+(K^R^O)+L[11]+1839030562&4294967295)<<16&4294967295|N>>>16))+((N=O+($^K^R)+L[14]+4259657740&4294967295)<<23&4294967295|N>>>9))+((N=R+(O^$^K)+L[1]+2763975236&4294967295)<<4&4294967295|N>>>28))+((N=K+(R^O^$)+L[4]+1272893353&4294967295)<<11&4294967295|N>>>21))+((N=$+(K^R^O)+L[7]+4139469664&4294967295)<<16&4294967295|N>>>16))+((N=O+($^K^R)+L[10]+3200236656&4294967295)<<23&4294967295|N>>>9))+((N=R+(O^$^K)+L[13]+681279174&4294967295)<<4&4294967295|N>>>28))+((N=K+(R^O^$)+L[0]+3936430074&4294967295)<<11&4294967295|N>>>21))+((N=$+(K^R^O)+L[3]+3572445317&4294967295)<<16&4294967295|N>>>16))+((N=O+($^K^R)+L[6]+76029189&4294967295)<<23&4294967295|N>>>9))+((N=R+(O^$^K)+L[9]+3654602809&4294967295)<<4&4294967295|N>>>28))+((N=K+(R^O^$)+L[12]+3873151461&4294967295)<<11&4294967295|N>>>21))+((N=$+(K^R^O)+L[15]+530742520&4294967295)<<16&4294967295|N>>>16))+((N=O+($^K^R)+L[2]+3299628645&4294967295)<<23&4294967295|N>>>9))+((N=R+($^(O|~K))+L[0]+4096336452&4294967295)<<6&4294967295|N>>>26))+((N=K+(O^(R|~$))+L[7]+1126891415&4294967295)<<10&4294967295|N>>>22))+((N=$+(R^(K|~O))+L[14]+2878612391&4294967295)<<15&4294967295|N>>>17))+((N=O+(K^($|~R))+L[5]+4237533241&4294967295)<<21&4294967295|N>>>11))+((N=R+($^(O|~K))+L[12]+1700485571&4294967295)<<6&4294967295|N>>>26))+((N=K+(O^(R|~$))+L[3]+2399980690&4294967295)<<10&4294967295|N>>>22))+((N=$+(R^(K|~O))+L[10]+4293915773&4294967295)<<15&4294967295|N>>>17))+((N=O+(K^($|~R))+L[1]+2240044497&4294967295)<<21&4294967295|N>>>11))+((N=R+($^(O|~K))+L[8]+1873313359&4294967295)<<6&4294967295|N>>>26))+((N=K+(O^(R|~$))+L[15]+4264355552&4294967295)<<10&4294967295|N>>>22))+((N=$+(R^(K|~O))+L[6]+2734768916&4294967295)<<15&4294967295|N>>>17))+((N=O+(K^($|~R))+L[13]+1309151649&4294967295)<<21&4294967295|N>>>11))+((K=(R=O+((N=R+($^(O|~K))+L[4]+4149444226&4294967295)<<6&4294967295|N>>>26))+((N=K+(O^(R|~$))+L[11]+3174756917&4294967295)<<10&4294967295|N>>>22))^(($=K+((N=$+(R^(K|~O))+L[2]+718787259&4294967295)<<15&4294967295|N>>>17))|~R))+L[9]+3951481745&4294967295,V.g[0]=V.g[0]+R&4294967295,V.g[1]=V.g[1]+($+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+$&4294967295,V.g[3]=V.g[3]+K&4294967295}function o(V,R){this.h=R;for(var O=[],L=!0,$=V.length-1;0<=$;$--){var K=0|V[$];L&&K==R||(O[$]=K,L=!1)}this.g=O}(function e(V,R){function O(){}O.prototype=R.prototype,V.D=R.prototype,V.prototype=new O,V.prototype.constructor=V,V.C=function(L,$,K){for(var N=Array(arguments.length-2),Ko=2;Ko<arguments.length;Ko++)N[Ko-2]=arguments[Ko];return R.prototype[$].apply(L,N)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(V,R){void 0===R&&(R=V.length);for(var O=R-this.blockSize,L=this.B,$=this.h,K=0;K<R;){if(0==$)for(;K<=O;)i(this,V,K),K+=this.blockSize;if("string"==typeof V){for(;K<R;)if(L[$++]=V.charCodeAt(K++),$==this.blockSize){i(this,L),$=0;break}}else for(;K<R;)if(L[$++]=V[K++],$==this.blockSize){i(this,L),$=0;break}}this.h=$,this.o+=R},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var R=1;R<V.length-8;++R)V[R]=0;var O=8*this.o;for(R=V.length-8;R<V.length;++R)V[R]=255&O,O/=256;for(this.u(V),V=Array(16),R=O=0;4>R;++R)for(var L=0;32>L;L+=8)V[O++]=this.g[R]>>>L&255;return V};var a={};function u(V){return-128<=V&&128>V?function s(V,R){var O=a;return Object.prototype.hasOwnProperty.call(O,V)?O[V]:O[V]=R(V)}(V,function(R){return new o([0|R],0>R?-1:0)}):new o([0|V],0>V?-1:0)}function d(V){if(isNaN(V)||!isFinite(V))return m;if(0>V)return x(d(-V));for(var R=[],O=1,L=0;V>=O;L++)R[L]=V/O|0,O*=4294967296;return new o(R,0)}var m=u(0),v=u(1),I=u(16777216);function b(V){if(0!=V.h)return!1;for(var R=0;R<V.g.length;R++)if(0!=V.g[R])return!1;return!0}function S(V){return-1==V.h}function x(V){for(var R=V.g.length,O=[],L=0;L<R;L++)O[L]=~V.g[L];return new o(O,~V.h).add(v)}function q(V,R){return V.add(x(R))}function F(V,R){for(;(65535&V[R])!=V[R];)V[R+1]+=V[R]>>>16,V[R]&=65535,R++}function W(V,R){this.g=V,this.h=R}function oe(V,R){if(b(R))throw Error("division by zero");if(b(V))return new W(m,m);if(S(V))return R=oe(x(V),R),new W(x(R.g),x(R.h));if(S(R))return R=oe(V,x(R)),new W(x(R.g),R.h);if(30<V.g.length){if(S(V)||S(R))throw Error("slowDivide_ only works with positive integers.");for(var O=v,L=R;0>=L.l(V);)O=Ee(O),L=Ee(L);var $=Ue(O,1),K=Ue(L,1);for(L=Ue(L,2),O=Ue(O,2);!b(L);){var N=K.add(L);0>=N.l(V)&&($=$.add(O),K=N),L=Ue(L,1),O=Ue(O,1)}return R=q(V,$.j(R)),new W($,R)}for($=m;0<=V.l(R);){for(O=Math.max(1,Math.floor(V.m()/R.m())),L=48>=(L=Math.ceil(Math.log(O)/Math.LN2))?1:Math.pow(2,L-48),N=(K=d(O)).j(R);S(N)||0<N.l(V);)N=(K=d(O-=L)).j(R);b(K)&&(K=v),$=$.add(K),V=q(V,N)}return new W($,V)}function Ee(V){for(var R=V.g.length+1,O=[],L=0;L<R;L++)O[L]=V.i(L)<<1|V.i(L-1)>>>31;return new o(O,V.h)}function Ue(V,R){var O=R>>5;R%=32;for(var L=V.g.length-O,$=[],K=0;K<L;K++)$[K]=0<R?V.i(K+O)>>>R|V.i(K+O+1)<<32-R:V.i(K+O);return new o($,V.h)}(n=o.prototype).m=function(){if(S(this))return-x(this).m();for(var V=0,R=1,O=0;O<this.g.length;O++){var L=this.i(O);V+=(0<=L?L:4294967296+L)*R,R*=4294967296}return V},n.toString=function(V){if(2>(V=V||10)||36<V)throw Error("radix out of range: "+V);if(b(this))return"0";if(S(this))return"-"+x(this).toString(V);for(var R=d(Math.pow(V,6)),O=this,L="";;){var $=oe(O,R).g,K=((0<(O=q(O,$.j(R))).g.length?O.g[0]:O.h)>>>0).toString(V);if(b(O=$))return K+L;for(;6>K.length;)K="0"+K;L=K+L}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h},n.l=function(V){return S(V=q(this,V))?-1:b(V)?0:1},n.abs=function(){return S(this)?x(this):this},n.add=function(V){for(var R=Math.max(this.g.length,V.g.length),O=[],L=0,$=0;$<=R;$++){var K=L+(65535&this.i($))+(65535&V.i($)),N=(K>>>16)+(this.i($)>>>16)+(V.i($)>>>16);L=N>>>16,O[$]=(N&=65535)<<16|(K&=65535)}return new o(O,-2147483648&O[O.length-1]?-1:0)},n.j=function(V){if(b(this)||b(V))return m;if(S(this))return S(V)?x(this).j(x(V)):x(x(this).j(V));if(S(V))return x(this.j(x(V)));if(0>this.l(I)&&0>V.l(I))return d(this.m()*V.m());for(var R=this.g.length+V.g.length,O=[],L=0;L<2*R;L++)O[L]=0;for(L=0;L<this.g.length;L++)for(var $=0;$<V.g.length;$++){var K=this.i(L)>>>16,N=65535&this.i(L),Ko=V.i($)>>>16,Lg=65535&V.i($);O[2*L+2*$]+=N*Lg,F(O,2*L+2*$),O[2*L+2*$+1]+=K*Lg,F(O,2*L+2*$+1),O[2*L+2*$+1]+=N*Ko,F(O,2*L+2*$+1),O[2*L+2*$+2]+=K*Ko,F(O,2*L+2*$+2)}for(L=0;L<R;L++)O[L]=O[2*L+1]<<16|O[2*L];for(L=R;L<2*R;L++)O[L]=0;return new o(O,0)},n.A=function(V){return oe(this,V).h},n.and=function(V){for(var R=Math.max(this.g.length,V.g.length),O=[],L=0;L<R;L++)O[L]=this.i(L)&V.i(L);return new o(O,this.h&V.h)},n.or=function(V){for(var R=Math.max(this.g.length,V.g.length),O=[],L=0;L<R;L++)O[L]=this.i(L)|V.i(L);return new o(O,this.h|V.h)},n.xor=function(V){for(var R=Math.max(this.g.length,V.g.length),O=[],L=0;L<R;L++)O[L]=this.i(L)^V.i(L);return new o(O,this.h^V.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bk=Ck.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=function g(V,R){if(0==V.length)throw Error("number format error: empty string");if(2>(R=R||10)||36<R)throw Error("radix out of range: "+R);if("-"==V.charAt(0))return x(g(V.substring(1),R));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=d(Math.pow(R,8)),L=m,$=0;$<V.length;$+=8){var K=Math.min(8,V.length-$),N=parseInt(V.substring($,$+K),R);8>K?(K=d(Math.pow(R,K)),L=L.j(K).add(d(N))):L=(L=L.j(O)).add(d(N))}return L},tc=Ck.Integer=o}).apply(typeof Ak<"u"?Ak:typeof self<"u"?self:typeof window<"u"?window:{});var Tk,Fp,Dk,nv,iC,Sk,Rk,Pk,tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fo={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h},r=function t(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof tv&&tv];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var z=h[A];if(!(z in E))break e;E=E[z]}(_=_(A=E[h=h[h.length-1]]))!=A&&null!=_&&e(E,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var E=0,A=!1,z={next:function(){if(!A&&E<h.length){var ne=E++;return{value:_(ne,h[ne]),done:!1}}return A=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}(this,function(_,E){return E})}});var o=o||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function d(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function g(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,A),h.apply(_,z)}}return function(){return h.apply(_,arguments)}}function v(h,_,E){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function I(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function b(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(A,z,ne){for(var be=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)be[Yt-2]=arguments[Yt];return _.prototype[z].apply(A,be)}}function S(h){const _=h.length;if(0<_){const E=Array(_);for(let A=0;A<_;A++)E[A]=h[A];return E}return[]}function x(h,_){for(let E=1;E<arguments.length;E++){const A=arguments[E];if(u(A)){const z=h.length||0,ne=A.length||0;h.length=z+ne;for(let be=0;be<ne;be++)h[z+be]=A[be]}else h.push(A)}}function F(h){return/^[\s\xa0]*$/.test(h)}function W(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function oe(h){return oe[" "](h),h}oe[" "]=function(){};var Ee=!(-1==W().indexOf("Gecko")||-1!=W().toLowerCase().indexOf("webkit")&&-1==W().indexOf("Edge")||-1!=W().indexOf("Trident")||-1!=W().indexOf("MSIE")||-1!=W().indexOf("Edge"));function Ue(h,_,E){for(const A in h)_.call(E,h[A],A,h)}function R(h){const _={};for(const E in h)_[E]=h[E];return _}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(h,_){let E,A;for(let z=1;z<arguments.length;z++){for(E in A=arguments[z],A)h[E]=A[E];for(let ne=0;ne<O.length;ne++)E=O[ne],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function $(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function K(h){a.setTimeout(()=>{throw h},0)}function N(){var h=VD;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var Lg=new class q{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new Mne,h=>h.reset());class Mne{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ug,Bg=!1,VD=new class Ko{constructor(){this.h=this.g=null}add(_,E){const A=Lg.get();A.set(_,E),this.h?this.h.next=A:this.g=A,this.h=A}},PB=()=>{const h=a.Promise.resolve(void 0);Ug=()=>{h.then(Nne)}};var Nne=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(E){K(E)}var _=Lg;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}Bg=!1};function tu(){this.s=this.s,this.C=this.C}function Qr(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}tu.prototype.s=!1,tu.prototype.ma=function(){this.s||(this.s=!0,this.N())},tu.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Qr.prototype.h=function(){this.defaultPrevented=!0};var One=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};a.addEventListener("test",E,_),a.removeEventListener("test",E,_)}catch{}return h}();function jg(h,_){if(Qr.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(Ee){e:{try{oe(_.nodeName);var z=!0;break e}catch{}z=!1}z||(_=null)}}else"mouseover"==E?_=h.fromElement:"mouseout"==E&&(_=h.toElement);this.relatedTarget=_,A?(this.clientX=void 0!==A.clientX?A.clientX:A.pageX,this.clientY=void 0!==A.clientY?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:kne[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&jg.aa.h.call(this)}}b(jg,Qr);var kne={2:"touch",3:"pen",4:"mouse"};jg.prototype.h=function(){jg.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var $g="closure_listenable_"+(1e6*Math.random()|0),Vne=0;function Fne(h,_,E,A,z){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!A,this.ha=z,this.key=++Vne,this.da=this.fa=!1}function ME(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function NE(h){this.src=h,this.g={},this.h=0}function FD(h,_){var E=_.type;if(E in h.g){var ne,A=h.g[E],z=Array.prototype.indexOf.call(A,_,void 0);(ne=0<=z)&&Array.prototype.splice.call(A,z,1),ne&&(ME(_),0==h.g[E].length&&(delete h.g[E],h.h--))}}function LD(h,_,E,A){for(var z=0;z<h.length;++z){var ne=h[z];if(!ne.da&&ne.listener==_&&ne.capture==!!E&&ne.ha==A)return z}return-1}NE.prototype.add=function(h,_,E,A,z){var ne=h.toString();(h=this.g[ne])||(h=this.g[ne]=[],this.h++);var be=LD(h,_,A,z);return-1<be?(_=h[be],E||(_.fa=!1)):((_=new Fne(_,this.src,ne,!!A,z)).fa=E,h.push(_)),_};var UD="closure_lm_"+(1e6*Math.random()|0),BD={};function xB(h,_,E,A,z){if(A&&A.once)return NB(h,_,E,A,z);if(Array.isArray(_)){for(var ne=0;ne<_.length;ne++)xB(h,_[ne],E,A,z);return null}return E=zD(E),h&&h[$g]?h.K(_,E,d(A)?!!A.capture:!!A,z):MB(h,_,E,!1,A,z)}function MB(h,_,E,A,z,ne){if(!_)throw Error("Invalid event type");var be=d(z)?!!z.capture:!!z,Yt=$D(h);if(Yt||(h[UD]=Yt=new NE(h)),(E=Yt.add(_,E,A,be,ne)).proxy)return E;if(A=function Lne(){const _=Une;return function h(E){return _.call(h.src,h.listener,E)}}(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)One||(z=be),void 0===z&&(z=!1),h.addEventListener(_.toString(),A,z);else if(h.attachEvent)h.attachEvent(kB(_.toString()),A);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(A)}return E}function NB(h,_,E,A,z){if(Array.isArray(_)){for(var ne=0;ne<_.length;ne++)NB(h,_[ne],E,A,z);return null}return E=zD(E),h&&h[$g]?h.L(_,E,d(A)?!!A.capture:!!A,z):MB(h,_,E,!0,A,z)}function OB(h,_,E,A,z){if(Array.isArray(_))for(var ne=0;ne<_.length;ne++)OB(h,_[ne],E,A,z);else A=d(A)?!!A.capture:!!A,E=zD(E),h&&h[$g]?(h=h.i,(_=String(_).toString())in h.g&&-1<(E=LD(ne=h.g[_],E,A,z))&&(ME(ne[E]),Array.prototype.splice.call(ne,E,1),0==ne.length&&(delete h.g[_],h.h--))):h&&(h=$D(h))&&(_=h.g[_.toString()],h=-1,_&&(h=LD(_,E,A,z)),(E=-1<h?_[h]:null)&&jD(E))}function jD(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[$g])FD(_.i,h);else{var E=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(E,A,h.capture):_.detachEvent?_.detachEvent(kB(E),A):_.addListener&&_.removeListener&&_.removeListener(A),(E=$D(_))?(FD(E,h),0==E.h&&(E.src=null,_[UD]=null)):ME(h)}}}function kB(h){return h in BD?BD[h]:BD[h]="on"+h}function Une(h,_){if(h.da)h=!0;else{_=new jg(_,this);var E=h.listener,A=h.ha||h.src;h.fa&&jD(h),h=E.call(A,_)}return h}function $D(h){return(h=h[UD])instanceof NE?h:null}var HD="__closure_events_fn_"+(1e9*Math.random()>>>0);function zD(h){return"function"==typeof h?h:(h[HD]||(h[HD]=function(_){return h.handleEvent(_)}),h[HD])}function Yr(){tu.call(this),this.i=new NE(this),this.M=this,this.F=null}function fi(h,_){var E,A=h.F;if(A)for(E=[];A;A=A.F)E.push(A);if(h=h.M,A=_.type||_,"string"==typeof _)_=new Qr(_,h);else if(_ instanceof Qr)_.target=_.target||h;else{var z=_;L(_=new Qr(A,h),z)}if(z=!0,E)for(var ne=E.length-1;0<=ne;ne--){var be=_.g=E[ne];z=OE(be,A,!0,_)&&z}if(z=OE(be=_.g=h,A,!0,_)&&z,z=OE(be,A,!1,_)&&z,E)for(ne=0;ne<E.length;ne++)z=OE(be=_.g=E[ne],A,!1,_)&&z}function OE(h,_,E,A){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var z=!0,ne=0;ne<_.length;++ne){var be=_[ne];if(be&&!be.da&&be.capture==E){var Yt=be.listener,xr=be.ha||be.src;be.fa&&FD(h.i,be),z=!1!==Yt.call(xr,A)&&z}}return z&&!A.defaultPrevented}function VB(h,_,E){if("function"==typeof h)E&&(h=v(h,E));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=v(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function FB(h){h.g=VB(()=>{h.g=null,h.i&&(h.i=!1,FB(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}b(Yr,tu),Yr.prototype[$g]=!0,Yr.prototype.removeEventListener=function(h,_,E,A){OB(this,h,_,E,A)},Yr.prototype.N=function(){if(Yr.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var E=h.g[_],A=0;A<E.length;A++)ME(E[A]);delete h.g[_],h.h--}}this.F=null},Yr.prototype.K=function(h,_,E,A){return this.i.add(String(h),_,!1,E,A)},Yr.prototype.L=function(h,_,E,A){return this.i.add(String(h),_,!0,E,A)};class Bne extends tu{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:FB(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hg(h){tu.call(this),this.h=h,this.g={}}b(Hg,tu);var LB=[];function UB(h){Ue(h.g,function(_,E){this.g.hasOwnProperty(E)&&jD(_)},h),h.g={}}Hg.prototype.N=function(){Hg.aa.N.call(this),UB(this)},Hg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var GD=a.JSON.stringify,jne=a.JSON.parse,$ne=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function qD(){}function jB(){}qD.prototype.h=null;var zg={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function WD(){Qr.call(this,"d")}function KD(){Qr.call(this,"c")}b(WD,Qr),b(KD,Qr);var Sc={},$B=null;function kE(){return $B=$B||new Yr}function HB(h){Qr.call(this,Sc.La,h)}function Gg(h){const _=kE();fi(_,new HB(_))}function zB(h,_){Qr.call(this,Sc.STAT_EVENT,h),this.stat=_}function pi(h){const _=kE();fi(_,new zB(_,h))}function GB(h,_){Qr.call(this,Sc.Ma,h),this.size=_}function qg(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function Wg(){this.g=!0}function vh(h,_,E,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function qne(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E)for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var A=E[h];if(!(2>A.length)){var z=A[1];if(Array.isArray(z)&&!(1>z.length)){var ne=z[0];if("noop"!=ne&&"stop"!=ne&&"close"!=ne)for(var be=1;be<z.length;be++)z[be]=""}}}return GD(E)}catch{return _}}(h,E)+(A?" "+A:"")})}Sc.La="serverreachability",b(HB,Qr),Sc.STAT_EVENT="statevent",b(zB,Qr),Sc.Ma="timingevent",b(GB,Qr),Wg.prototype.xa=function(){this.g=!1},Wg.prototype.info=function(){};var QD,VE={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qB={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function FE(){}function nu(h,_,E,A){this.j=h,this.i=_,this.l=E,this.R=A||1,this.U=new Hg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new WB}function WB(){this.i=null,this.g="",this.h=!1}b(FE,qD),FE.prototype.g=function(){return new XMLHttpRequest},FE.prototype.i=function(){return{}},QD=new FE;var KB={},YD={};function JD(h,_,E){h.L=1,h.v=jE(Qo(_)),h.m=E,h.P=!0,QB(h,null)}function QB(h,_){h.F=Date.now(),LE(h),h.A=Qo(h.v);var E=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),cj(E.i,"t",A),h.C=0,E=h.j.J,h.h=new WB,h.g=Dj(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Bne(v(h.Y,h,h.g),h.O)),_=h.U,E=h.g,A=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(LB[0]=z.toString()),z=LB);for(var ne=0;ne<z.length;ne++){var be=xB(E,z[ne],A||_.handleEvent,!1,_.h||_);if(!be)break;_.g[be.key]=be}_=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Gg(),function Hne(h,_,E,A,z,ne){h.info(function(){if(h.g)if(ne)for(var be="",Yt=ne.split("&"),xr=0;xr<Yt.length;xr++){var Mt=Yt[xr].split("=");if(1<Mt.length){var Jr=Mt[0];Mt=Mt[1];var Xr=Jr.split("_");be=2<=Xr.length&&"type"==Xr[1]?be+(Jr+"=")+Mt+"&":be+(Jr+"=redacted&")}}else be=null;else be=ne;return"XMLHTTP REQ ("+A+") [attempt "+z+"]: "+_+"\n"+E+"\n"+be})}(h.i,h.u,h.A,h.l,h.R,h.m)}function YB(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function Wne(h,_){var E=h.C,A=_.indexOf("\n",E);return-1==A?YD:(E=Number(_.substring(E,A)),isNaN(E)?KB:(A+=1)+E>_.length?YD:(_=_.slice(A,A+E),h.C=A+E,_))}function LE(h){h.S=Date.now()+h.I,JB(h,h.I)}function JB(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=qg(v(h.ba,h),_)}function XD(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function Kg(h){0==h.j.G||h.J||Aj(h.j,h)}function Rc(h){XD(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,UB(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function ZD(h,_){try{var E=h.j;if(0!=E.G&&(E.g==h||eS(E.h,h)))if(!h.K&&eS(E.h,h)&&3==E.G){try{var A=E.Da.g.parse(_)}catch{A=null}if(Array.isArray(A)&&3==A.length){var z=A;if(0==z[0]){e:if(!E.u){if(E.g){if(!(E.g.F+3e3<h.F))break e;qE(E),zE(E)}iS(E),pi(18)}}else E.za=z[1],0<E.za-E.T&&37500>z[2]&&E.F&&0==E.v&&!E.C&&(E.C=qg(v(E.Za,E),6e3));if(1>=ej(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else xc(E,11)}else if((h.K||E.g==h)&&qE(E),!F(_))for(z=E.Da.g.parse(_),_=0;_<z.length;_++){let Mt=z[_];if(E.T=Mt[0],Mt=Mt[1],2==E.G)if("c"==Mt[0]){E.K=Mt[1],E.ia=Mt[2];const Jr=Mt[3];null!=Jr&&(E.la=Jr,E.j.info("VER="+E.la));const Xr=Mt[4];null!=Xr&&(E.Aa=Xr,E.j.info("SVER="+E.Aa));const wh=Mt[5];null!=wh&&"number"==typeof wh&&0<wh&&(E.L=A=1.5*wh,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const vs=h.g;if(vs){const KE=vs.g?vs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(KE){var ne=A.h;ne.g||-1==KE.indexOf("spdy")&&-1==KE.indexOf("quic")&&-1==KE.indexOf("h2")||(ne.j=ne.l,ne.g=new Set,ne.h&&(tS(ne,ne.h),ne.h=null))}if(A.D){const oS=vs.g?vs.g.getResponseHeader("X-HTTP-Session-Id"):null;oS&&(A.ya=oS,_n(A.I,A.D,oS))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms"));var be=h;if((A=E).qa=Tj(A,A.J?A.ia:null,A.W),be.K){tj(A.h,be);var Yt=be,xr=A.L;xr&&(Yt.I=xr),Yt.B&&(XD(Yt),LE(Yt)),A.g=be}else Ij(A);0<E.i.length&&GE(E)}else"stop"!=Mt[0]&&"close"!=Mt[0]||xc(E,7);else 3==E.G&&("stop"==Mt[0]||"close"==Mt[0]?"stop"==Mt[0]?xc(E,7):rS(E):"noop"!=Mt[0]&&E.l&&E.l.ta(Mt),E.v=0)}Gg()}catch{}}function XB(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ZB(h){return!!h.h||!!h.g&&h.g.size>=h.j}function ej(h){return h.h?1:h.g?h.g.size:0}function eS(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function tS(h,_){h.g?h.g.add(_):h.h=_}function tj(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function nj(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return S(h.i)}function rj(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var E=function Yne(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const A in h)_[E++]=A;return _}}}(h),A=function Qne(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],E=h.length,A=0;A<E;A++)_.push(h[A]);return _}for(A in _=[],E=0,h)_[E++]=h[A];return _}(h),z=A.length,ne=0;ne<z;ne++)_.call(void 0,A[ne],E&&E[ne],h)}nu.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==Yo(h)?_.j():this.Y(h)},nu.prototype.Y=function(h){try{if(h==this.g)e:{const Xr=Yo(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>Xr)&&(3!=Xr||this.g&&(this.h.h||this.g.oa()||mj(this.g)))){this.J||4!=Xr||7==_||Gg(),XD(this);var E=this.g.Z();this.X=E;t:if(YB(this)){var A=mj(this.g);h="";var z=A.length,ne=4==Yo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Rc(this),Kg(this);var be="";break t}this.h.i=new a.TextDecoder}for(_=0;_<z;_++)this.h.h=!0,h+=this.h.i.decode(A[_],{stream:!(ne&&_==z-1)});A.length=0,this.h.g+=h,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=200==E,function zne(h,_,E,A,z,ne,be){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+z+"]: "+_+"\n"+E+"\n"+ne+" "+be})}(this.i,this.u,this.A,this.l,this.R,Xr,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Yt,xr=this.g;if((Yt=xr.g?xr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Yt)){var Mt=Yt;break t}}Mt=null}if(!(E=Mt)){this.o=!1,this.s=3,pi(12),Rc(this),Kg(this);break e}vh(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ZD(this,E)}if(this.P){let vs;for(E=!0;!this.J&&this.C<be.length;){if(vs=Wne(this,be),vs==YD){4==Xr&&(this.s=4,pi(14),E=!1),vh(this.i,this.l,null,"[Incomplete Response]");break}if(vs==KB){this.s=4,pi(15),vh(this.i,this.l,be,"[Invalid Chunk]"),E=!1;break}vh(this.i,this.l,vs,null),ZD(this,vs)}if(YB(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Xr||0!=be.length||this.h.h||(this.s=1,pi(16),E=!1),this.o=this.o&&E,E){if(0<be.length&&!this.W){this.W=!0;var Jr=this.j;Jr.g==this&&Jr.ba&&!Jr.M&&(Jr.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),sS(Jr),Jr.M=!0,pi(11))}}else vh(this.i,this.l,be,"[Invalid Chunked Response]"),Rc(this),Kg(this)}else vh(this.i,this.l,be,null),ZD(this,be);4==Xr&&Rc(this),this.o&&!this.J&&(4==Xr?Aj(this.j,this):(this.o=!1,LE(this)))}else(function lre(h){const _={};h=(h.g&&2<=Yo(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let A=0;A<h.length;A++){if(F(h[A]))continue;var E=$(h[A]);const z=E[0];if("string"!=typeof(E=E[1]))continue;E=E.trim();const ne=_[z]||[];_[z]=ne,ne.push(E)}!function V(h,_){for(const E in h)_.call(void 0,h[E],E,h)}(_,function(A){return A.join(", ")})})(this.g),400==E&&0<be.indexOf("Unknown SID")?(this.s=3,pi(12)):(this.s=0,pi(13)),Rc(this),Kg(this)}}}catch{}},nu.prototype.cancel=function(){this.J=!0,Rc(this)},nu.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function Gne(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(Gg(),pi(17)),Rc(this),this.s=2,Kg(this)):JB(this,this.S-h)},XB.prototype.cancel=function(){if(this.i=nj(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var ij=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pc(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pc){this.h=h.h,UE(this,h.j),this.o=h.o,this.g=h.g,BE(this,h.s),this.l=h.l;var _=h.i,E=new Jg;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),sj(this,E),this.m=h.m}else h&&(_=String(h).match(ij))?(this.h=!1,UE(this,_[1]||"",!0),this.o=Qg(_[2]||""),this.g=Qg(_[3]||"",!0),BE(this,_[4]),this.l=Qg(_[5]||"",!0),sj(this,_[6]||"",!0),this.m=Qg(_[7]||"")):(this.h=!1,this.i=new Jg(null,this.h))}function Qo(h){return new Pc(h)}function UE(h,_,E){h.j=E?Qg(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function BE(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function sj(h,_,E){_ instanceof Jg?(h.i=_,function rre(h,_){_&&!h.j&&(ru(h),h.i=null,h.g.forEach(function(E,A){var z=A.toLowerCase();A!=z&&(aj(this,A),cj(this,z,E))},h)),h.j=_}(h.i,h.h)):(E||(_=Yg(_,tre)),h.i=new Jg(_,h.h))}function _n(h,_,E){h.i.set(_,E)}function jE(h){return _n(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Qg(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Yg(h,_,E){return"string"==typeof h?(h=encodeURI(h).replace(_,Xne),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Xne(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}Pc.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Yg(_,oj,!0),":");var E=this.g;return(E||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(Yg(_,oj,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(E=this.s)&&h.push(":",String(E))),(E=this.l)&&(this.g&&"/"!=E.charAt(0)&&h.push("/"),h.push(Yg(E,"/"==E.charAt(0)?ere:Zne,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Yg(E,nre)),h.join("")};var h,oj=/[#\/\?@]/g,Zne=/[#\?:]/g,ere=/[#\?]/g,tre=/[#\?@]/g,nre=/#/g;function Jg(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function ru(h){h.g||(h.g=new Map,h.h=0,h.i&&function Jne(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var A=h[E].indexOf("="),z=null;if(0<=A){var ne=h[E].substring(0,A);z=h[E].substring(A+1)}else ne=h[E];_(ne,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}function aj(h,_){ru(h),_=Eh(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function uj(h,_){return ru(h),_=Eh(h,_),h.g.has(_)}function cj(h,_,E){aj(h,_),0<E.length&&(h.i=null,h.g.set(Eh(h,_),S(E)),h.h+=E.length)}function Eh(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function iu(h,_,E,A,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),A(E)}catch{}}function ore(){this.g=new $ne}function are(h,_,E){const A=E||"";try{rj(h,function(z,ne){let be=z;d(z)&&(be=GD(z)),_.push(A+ne+"="+encodeURIComponent(be))})}catch(z){throw _.push(A+"type="+encodeURIComponent("_badmap")),z}}function Xg(h){this.l=h.Ub||null,this.j=h.eb||!1}function $E(h,_){Yr.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function lj(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function Zg(h){h.readyState=4,h.l=null,h.j=null,h.v=null,em(h)}function em(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function dj(h){let _="";return Ue(h,function(E,A){_+=A,_+=":",_+=E,_+="\r\n"}),_}function nS(h,_,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=dj(E),"string"==typeof h?null!=E&&encodeURIComponent(String(E)):_n(h,_,E))}function Ln(h){Yr.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Jg.prototype).add=function(h,_){ru(this),this.i=null,h=Eh(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this},n.forEach=function(h,_){ru(this),this.g.forEach(function(E,A){E.forEach(function(z){h.call(_,z,A,this)},this)},this)},n.na=function(){ru(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let A=0;A<_.length;A++){const z=h[A];for(let ne=0;ne<z.length;ne++)E.push(_[A])}return E},n.V=function(h){ru(this);let _=[];if("string"==typeof h)uj(this,h)&&(_=_.concat(this.g.get(Eh(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return ru(this),this.i=null,uj(this,h=Eh(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var A=_[E];const ne=encodeURIComponent(String(A)),be=this.V(A);for(A=0;A<be.length;A++){var z=ne;""!==be[A]&&(z+="="+encodeURIComponent(String(be[A]))),h.push(z)}}return this.i=h.join("&")},b(Xg,qD),Xg.prototype.g=function(){return new $E(this.l,this.j)},Xg.prototype.i=(h={},function(){return h}),b($E,Yr),(n=$E.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,em(this)},n.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zg(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,em(this)),this.g&&(this.readyState=3,em(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lj(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Zg(this):em(this),3==this.readyState&&lj(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Zg(this))},n.Qa=function(h){this.g&&(this.response=h,Zg(this))},n.ga=function(){this.g&&Zg(this)},n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)h.push((E=E.value)[0]+": "+E[1]),E=_.next();return h.join("\r\n")},Object.defineProperty($E.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),b(Ln,Yr);var ure=/^https?$/i,cre=["POST","PUT"];function hj(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,fj(h),HE(h)}function fj(h){h.A||(h.A=!0,fi(h,"complete"),fi(h,"error"))}function pj(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=Yo(h)||2!=h.Z()))if(h.u&&4==Yo(h))VB(h.Ea,0,h);else if(fi(h,"readystatechange"),4==Yo(h)){h.h=!1;try{const be=h.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var A;if(A=0===be){var z=String(h.D).match(ij)[1]||null;!z&&a.self&&a.self.location&&(z=a.self.location.protocol.slice(0,-1)),A=!ure.test(z?z.toLowerCase():"")}E=A}if(E)fi(h,"complete"),fi(h,"success");else{h.m=6;try{var ne=2<Yo(h)?h.g.statusText:""}catch{ne=""}h.l=ne+" ["+h.Z()+"]",fj(h)}}finally{HE(h)}}}function HE(h,_){if(h.g){gj(h);const E=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||fi(h,"ready");try{E.onreadystatechange=A}catch{}}}function gj(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function Yo(h){return h.g?h.g.readyState:0}function mj(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function tm(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function _j(h){this.Aa=0,this.i=[],this.j=new Wg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tm("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tm("baseRetryDelayMs",5e3,h),this.cb=tm("retryDelaySeedMs",1e4,h),this.Wa=tm("forwardChannelMaxRetries",2,h),this.wa=tm("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new XB(h&&h.concurrentRequestLimit),this.Da=new ore,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function rS(h){if(yj(h),3==h.G){var _=h.U++,E=Qo(h.I);if(_n(E,"SID",h.K),_n(E,"RID",_),_n(E,"TYPE","terminate"),nm(h,E),(_=new nu(h,h.j,_)).L=2,_.v=jE(Qo(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&a.Image&&((new Image).src=_.v,E=!0),E||(_.g=Dj(_.j,null),_.g.ea(_.v)),_.F=Date.now(),LE(_)}bj(h)}function zE(h){h.g&&(sS(h),h.g.cancel(),h.g=null)}function yj(h){zE(h),h.u&&(a.clearTimeout(h.u),h.u=null),qE(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function GE(h){if(!ZB(h.h)&&!h.s){h.s=!0;var _=h.Ga;Ug||PB(),Bg||(Ug(),Bg=!0),VD.add(_,h),h.B=0}}function vj(h,_){var E;E=_?_.l:h.U++;const A=Qo(h.I);_n(A,"SID",h.K),_n(A,"RID",E),_n(A,"AID",h.T),nm(h,A),h.m&&h.o&&nS(A,h.m,h.o),E=new nu(h,h.j,E,h.B+1),null===h.m&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Ej(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),tS(h.h,E),JD(E,A,_)}function nm(h,_){h.H&&Ue(h.H,function(E,A){_n(_,A,E)}),h.l&&rj({},function(E,A){_n(_,A,E)})}function Ej(h,_,E){E=Math.min(h.i.length,E);var A=h.l?v(h.l.Na,h.l,h):null;e:{var z=h.i;let ne=-1;for(;;){const be=["count="+E];-1==ne?0<E?(ne=z[0].g,be.push("ofs="+ne)):ne=0:be.push("ofs="+ne);let Yt=!0;for(let xr=0;xr<E;xr++){let Mt=z[xr].g;const Jr=z[xr].map;if(Mt-=ne,0>Mt)ne=Math.max(0,z[xr].g-100),Yt=!1;else try{are(Jr,be,"req"+Mt+"_")}catch{A&&A(Jr)}}if(Yt){A=be.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,A}function Ij(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;Ug||PB(),Bg||(Ug(),Bg=!0),VD.add(_,h),h.v=0}}function iS(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=qg(v(h.Fa,h),Cj(h,h.v)),h.v++,0))}function sS(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function wj(h){h.g=new nu(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=Qo(h.qa);_n(_,"RID","rpc"),_n(_,"SID",h.K),_n(_,"AID",h.T),_n(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&_n(_,"TO",h.ja),_n(_,"TYPE","xmlhttp"),nm(h,_),h.m&&h.o&&nS(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=jE(Qo(_)),E.m=null,E.P=!0,QB(E,h)}function qE(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function Aj(h,_){var E=null;if(h.g==_){qE(h),sS(h),h.g=null;var A=2}else{if(!eS(h.h,_))return;E=_.D,tj(h.h,_),A=1}if(0!=h.G)if(_.o)if(1==A){E=_.m?_.m.length:0,_=Date.now()-_.F;var z=h.B;fi(A=kE(),new GB(A,E)),GE(h)}else Ij(h);else if(3==(z=_.s)||0==z&&0<_.X||!(1==A&&function dre(h,_){return!(ej(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=qg(v(h.Ga,h,_),Cj(h,h.B)),h.B++,0)))}(h,_)||2==A&&iS(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),z){case 1:xc(h,5);break;case 4:xc(h,10);break;case 3:xc(h,6);break;default:xc(h,2)}}function Cj(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function xc(h,_){if(h.j.info("Error code "+_),2==_){var E=v(h.fb,h),A=h.Xa;const z=!A;A=new Pc(A||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||UE(A,"https"),jE(A),z?function ire(h,_){const E=new Wg;if(a.Image){const A=new Image;A.onload=I(iu,E,"TestLoadImage: loaded",!0,_,A),A.onerror=I(iu,E,"TestLoadImage: error",!1,_,A),A.onabort=I(iu,E,"TestLoadImage: abort",!1,_,A),A.ontimeout=I(iu,E,"TestLoadImage: timeout",!1,_,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}(A.toString(),E):function sre(h,_){new Wg;const A=new AbortController,z=setTimeout(()=>{A.abort(),iu(0,0,!1,_)},1e4);fetch(h,{signal:A.signal}).then(ne=>{clearTimeout(z),iu(0,0,!!ne.ok,_)}).catch(()=>{clearTimeout(z),iu(0,0,!1,_)})}(A.toString(),E)}else pi(2);h.G=0,h.l&&h.l.sa(_),bj(h),yj(h)}function bj(h){if(h.G=0,h.ka=[],h.l){const _=nj(h.h);(0!=_.length||0!=h.i.length)&&(x(h.ka,_),x(h.ka,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.ra()}}function Tj(h,_,E){var A=E instanceof Pc?Qo(E):new Pc(E);if(""!=A.g)_&&(A.g=_+"."+A.g),BE(A,A.s);else{var z=a.location;A=z.protocol,_=_?_+"."+z.hostname:z.hostname,z=+z.port;var ne=new Pc(null);A&&UE(ne,A),_&&(ne.g=_),z&&BE(ne,z),E&&(ne.l=E),A=ne}return _=h.ya,(E=h.D)&&_&&_n(A,E,_),_n(A,"VER",h.la),nm(h,A),A}function Dj(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Ln(h.Ca&&!h.pa?new Xg({eb:E}):h.pa)).Ha(h.J),_}function Sj(){}function WE(){}function Hi(h,_){Yr.call(this),this.g=new _j(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!F(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!F(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new Ih(this)}function Rj(h){WD.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function Pj(){KD.call(this),this.status=1}function Ih(h){this.g=h}(n=Ln.prototype).Ha=function(h){this.J=h},n.ea=function(h,_,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():QD.g(),this.v=function BB(h){return h.h||(h.h=h.i())}(this.o?this.o:QD),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ne){return void hj(this,ne)}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var z in A)E.set(z,A[z]);else{if("function"!=typeof A.keys||"function"!=typeof A.get)throw Error("Unknown input type for opt_headers: "+String(A));for(const ne of A.keys())E.set(ne,A.get(ne))}A=Array.from(E.keys()).find(ne=>"content-type"==ne.toLowerCase()),z=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(cre,_,void 0))||A||z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,be]of E)this.g.setRequestHeader(ne,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gj(this),this.u=!0,this.g.send(h),this.u=!1}catch(ne){hj(this,ne)}},n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,fi(this,"complete"),fi(this,"abort"),HE(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),HE(this,!0)),Ln.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?pj(this):this.bb())},n.bb=function(){pj(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Yo(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),jne(_)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=_j.prototype).la=8,n.G=1,n.connect=function(h,_,E,A){pi(0),this.W=h,this.H=_||{},E&&void 0!==A&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.I=Tj(this,null,this.W),GE(this)},n.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new nu(this,this.j,h);let ne=this.o;if(this.S&&(ne?(ne=R(ne),L(ne,this.S)):ne=this.S),null!==this.m||this.O||(z.H=ne,ne=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){var A=this.i[E];if(void 0===(A="__data__"in A.map&&"string"==typeof(A=A.map.__data__)?A.length:void 0))break;if(4096<(_+=A)){_=E;break e}if(4096===_||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Ej(this,z,_),_n(E=Qo(this.I),"RID",h),_n(E,"CVER",22),this.D&&_n(E,"X-HTTP-Session-Id",this.D),nm(this,E),ne&&(this.O?_="headers="+encodeURIComponent(String(dj(ne)))+"&"+_:this.m&&nS(E,this.m,ne)),tS(this.h,z),this.Ua&&_n(E,"TYPE","init"),this.P?(_n(E,"$req",_),_n(E,"SID","null"),z.T=!0,JD(z,E,null)):JD(z,E,_),this.G=2}}else 3==this.G&&(h?vj(this,h):0==this.i.length||ZB(this.h)||vj(this))},n.Fa=function(){if(this.u=null,wj(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=qg(v(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pi(10),zE(this),wj(this))},n.Za=function(){null!=this.C&&(this.C=null,zE(this),iS(this),pi(19))},n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),pi(2)):(this.j.info("Failed to ping google.com"),pi(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=Sj.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},WE.prototype.g=function(h,_){return new Hi(h,_)},b(Hi,Yr),Hi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hi.prototype.close=function(){rS(this.g)},Hi.prototype.o=function(h){var _=this.g;if("string"==typeof h){var E={};E.__data__=h,h=E}else this.u&&((E={}).__data__=GD(h),h=E);_.i.push(new class{constructor(h,_){this.g=h,this.map=_}}(_.Ya++,h)),3==_.G&&GE(_)},Hi.prototype.N=function(){this.g.l=null,delete this.j,rS(this.g),delete this.g,Hi.aa.N.call(this)},b(Rj,WD),b(Pj,KD),b(Ih,Sj),Ih.prototype.ua=function(){fi(this.g,"a")},Ih.prototype.ta=function(h){fi(this.g,new Rj(h))},Ih.prototype.sa=function(h){fi(this.g,new Pj)},Ih.prototype.ra=function(){fi(this.g,"b")},WE.prototype.createWebChannel=WE.prototype.g,Hi.prototype.send=Hi.prototype.o,Hi.prototype.open=Hi.prototype.m,Hi.prototype.close=Hi.prototype.close,Pk=Fo.createWebChannelTransport=function(){return new WE},Rk=Fo.getStatEventTarget=function(){return kE()},Sk=Fo.Event=Sc,iC=Fo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},VE.NO_ERROR=0,VE.TIMEOUT=8,VE.HTTP_ERROR=6,nv=Fo.ErrorCode=VE,qB.COMPLETE="complete",Dk=Fo.EventType=qB,jB.EventType=zg,zg.OPEN="a",zg.CLOSE="b",zg.ERROR="c",zg.MESSAGE="d",Yr.prototype.listen=Yr.prototype.K,Fp=Fo.WebChannel=jB,Fo.FetchXmlHttpFactory=Xg,Ln.prototype.listenOnce=Ln.prototype.L,Ln.prototype.getLastError=Ln.prototype.Ka,Ln.prototype.getLastErrorCode=Ln.prototype.Ba,Ln.prototype.getStatus=Ln.prototype.Z,Ln.prototype.getResponseJson=Ln.prototype.Oa,Ln.prototype.getResponseText=Ln.prototype.oa,Ln.prototype.send=Ln.prototype.ea,Ln.prototype.setWithCredentials=Ln.prototype.Ha,Tk=Fo.XhrIo=Ln}).apply(typeof tv<"u"?tv:typeof self<"u"?self:typeof window<"u"?window:{});const xk="@firebase/firestore";class gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gr.UNAUTHENTICATED=new gr(null),gr.GOOGLE_CREDENTIALS=new gr("google-credentials-uid"),gr.FIRST_PARTY=new gr("first-party-uid"),gr.MOCK_USER=new gr("mock-user");let Dd="10.14.0";const xa=new Gs.Vy("@firebase/firestore");function Sd(){return xa.logLevel}function ce(n,...e){if(xa.logLevel<=Gs.$b.DEBUG){const t=e.map(sC);xa.debug(`Firestore (${Dd}): ${n}`,...t)}}function Wn(n,...e){if(xa.logLevel<=Gs.$b.ERROR){const t=e.map(sC);xa.error(`Firestore (${Dd}): ${n}`,...t)}}function Bi(n,...e){if(xa.logLevel<=Gs.$b.WARN){const t=e.map(sC);xa.warn(`Firestore (${Dd}): ${n}`,...t)}}function sC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ke(n="Unexpected state"){const e=`FIRESTORE (${Dd}) INTERNAL ASSERTION FAILED: `+n;throw Wn(e),new Error(e)}function Fe(n,e){n||ke()}function Ae(n,e){return n}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends Ft.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Mk{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gr.UNAUTHENTICATED))}shutdown(){}}class iK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class sK{constructor(e){this.t=e,this.currentUser=gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;Fe(void 0===this.o);let i=this.i;const s=d=>this.i!==i?(i=this.i,t(d)):Promise.resolve();let o=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new mr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,Y.A)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new mr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe("string"==typeof r.accessToken),new Mk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(null===e||"string"==typeof e),new gr(e)}}class oK{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=gr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class aK{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new oK(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uK{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Fe(void 0===this.o);const r=s=>{null!=s.error&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ce("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Fe("string"==typeof t.token),this.R=t.token,new Nk(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function cK(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Ok{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=cK(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function nt(n,e){return n<e?-1:n>e?1:0}function Rd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function kk(n){return n+"\0"}class En{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return En.fromMillis(Date.now())}static fromDate(e){return En.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new En(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Be(e)}static min(){return new Be(new En(0,0))}static max(){return new Be(new En(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Lp{constructor(e,t,r){void 0===t?t=0:t>e.length&&ke(),void 0===r?r=e.length-t:r>e.length-t&&ke(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Lp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class It extends Lp{construct(e,t,r){return new It(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new It(t)}static emptyPath(){return new It([])}}const lK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends Lp{construct(e,t,r){return new fn(e,t,r)}static isValidIdentifier(e){return lK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new ue(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ue(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ue(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ue(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(t)}static emptyPath(){return new fn([])}}class Se{constructor(e){this.path=e}static fromPath(e){return new Se(It.fromString(e))}static fromName(e){return new Se(It.fromString(e).popFirst(5))}static empty(){return new Se(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===It.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return It.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new It(e.slice()))}}class Pd{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function oC(n){return n.fields.find(e=>2===e.kind)}function nc(n){return n.fields.filter(e=>2!==e.kind)}Pd.UNKNOWN_ID=-1;class rc{constructor(e,t){this.fieldPath=e,this.kind=t}}class xd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xd(0,ji.min())}}function Vk(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Be.fromTimestamp(1e9===r?new En(t+1,0):new En(t,r));return new ji(i,Se.empty(),e)}function Fk(n){return new ji(n.readTime,n.key,-1)}class ji{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ji(Be.min(),Se.empty(),-1)}static max(){return new ji(Be.max(),Se.empty(),-1)}}function aC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Se.comparator(n.documentKey,e.documentKey),0!==t?t:nt(n.largestBatchId,e.largestBatchId))}const Lk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Uk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ma(n){return uC.apply(this,arguments)}function uC(){return(uC=(0,Y.A)(function*(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==Lk)throw n;ce("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,r)=>{t(e)})}static reject(e){return new G((t,r)=>{r(e)})}static waitFor(e){return new G((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=G.resolve(!1);for(const r of e)t=t.next(i=>i?G.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new G((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;t(e[d]).next(g=>{o[d]=g,++a,a===s&&r(o)},g=>i(g))}})}static doWhile(e,t){return new G((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class rv{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new mr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Up(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=cC(r.target.error);this.V.reject(new Up(e,i))}}static open(e,t,r,i){try{return new rv(t,e.transaction(i,r))}catch(s){throw new Up(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ce("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pK(t)}}class qs{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===qs.S((0,Ft.ZQ)())&&Wn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ce("SimpleDb","Removing database:",e),ic(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ft.zW)())return!1;if(qs.v())return!0;const e=(0,Ft.ZQ)(),t=qs.S(e),r=0<t&&t<10,i=Bk(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,Y.A)(function*(){return t.db||(ce("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Up(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new ue(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ue(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Up(e,a))},s.onupgradeneeded=o=>{ce("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{ce("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Y.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=rv.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(g=>(u.g(),g)).catch(g=>(u.abort(g),G.reject(g))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,g="FirebaseError"!==d.name&&a<3;if(ce("SimpleDb","Transaction failed with error:",d.message,"Retrying:",g),s.close(),!g)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function Bk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class fK{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ic(this.B.delete())}}class Up extends ue{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Na(n){return"IndexedDbTransactionError"===n.name}class pK{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ce("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ic(r)}add(e){return ce("SimpleDb","ADD",this.store.name,e,e),ic(this.store.add(e))}get(e){return ic(this.store.get(e)).next(t=>(void 0===t&&(t=null),ce("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ce("SimpleDb","DELETE",this.store.name,e),ic(this.store.delete(e))}count(){return ce("SimpleDb","COUNT",this.store.name),ic(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new G((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new G((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){ce("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new G((r,i)=>{t.onerror=s=>{const o=cC(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new G((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new fK(a),d=t(a.primaryKey,a.value,u);if(d instanceof G){const g=d.catch(m=>(u.done(),G.reject(m)));r.push(g)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>G.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ic(n){return new G((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=cC(r.target.error);t(i)}})}let jk=!1;function cC(n){const e=qs.S((0,Ft.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jk||(jk=!0,setTimeout(()=>{throw r},0)),r}}return n}class gK{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;ce("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Y.A)(function*(){t.task=null;try{ce("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Na(r)?ce("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Ma(r)}yield t.X(6e4)}))}}class mK{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,Y.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return G.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ce("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(ce("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=Fk(s);aC(o,r)>0&&(r=o)}),new ji(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let $i=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Bp(n){return null==n}function jp(n){return 0===n&&1/n==-1/0}function $k(n){return"number"==typeof n&&Number.isInteger(n)&&!jp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function zr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Hk(e)),e=_K(n.get(t),e);return Hk(e)}function _K(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function Hk(n){return n+"\x01\x01"}function Ws(n){const e=n.length;if(Fe(e>=2),2===e)return Fe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),It.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&ke(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:ke()}s=o+2}return new It(r)}const zk=["userId","batchId"];function iv(n,e){return[n,zr(e)]}function Gk(n,e,t){return[n,zr(e),t]}const yK={},vK=["prefixPath","collectionGroup","readTime","documentId"],EK=["prefixPath","collectionGroup","documentId"],IK=["collectionGroup","readTime","prefixPath","documentId"],wK=["canonicalId","targetId"],AK=["targetId","path"],CK=["path","targetId"],bK=["collectionId","parent"],TK=["indexId","uid"],DK=["uid","sequenceNumber"],SK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],RK=["indexId","uid","orderedDocumentKey"],PK=["userId","collectionPath","documentId"],xK=["userId","collectionPath","largestBatchId"],MK=["userId","collectionGroup","largestBatchId"],qk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],NK=[...qk,"documentOverlays"],Wk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Kk=Wk,lC=[...Kk,"indexConfiguration","indexState","indexEntries"],OK=lC,kK=[...lC,"globals"];class dC extends Uk{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function cr(n,e){const t=Ae(n);return qs.F(t._e,e)}function Qk(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Oa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Jk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class un{constructor(e,t){this.comparator=e,this.root=t||Dr.EMPTY}insert(e,t){return new un(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dr.BLACK,null,null))}remove(e){return new un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sv(this.root,e,this.comparator,!1)}getReverseIterator(){return new sv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sv(this.root,e,this.comparator,!0)}}class sv{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Dr.RED,this.left=i??Dr.EMPTY,this.right=s??Dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Dr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Dr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ke();const e=this.left.check();if(e!==this.right.check())throw ke();return e+(this.isRed()?0:1)}}Dr.EMPTY=null,Dr.RED=!0,Dr.BLACK=!1,Dr.EMPTY=new class{constructor(){this.size=0}get key(){throw ke()}get value(){throw ke()}get color(){throw ke()}get left(){throw ke()}get right(){throw ke()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Dr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gt{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xk(this.data.getIterator())}getIteratorFrom(e){return new Xk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class Xk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Md(n){return n.hasNext()?n.getNext():void 0}class Ci{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new Ci([])}unionWith(e){let t=new Gt(fn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ci(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Zk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Zk("Invalid base64 string: "+s):s}}(e);return new Vn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Vn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vn.EMPTY_BYTE_STRING=new Vn("");const FK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lo(n){if(Fe(!!n),"string"==typeof n){let e=0;const t=FK.exec(n);if(Fe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:In(n.seconds),nanos:In(n.nanos)}}function In(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Uo(n){return"string"==typeof n?Vn.fromBase64String(n):Vn.fromUint8Array(n)}function ov(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function av(n){const e=n.mapValue.fields.__previous_value__;return ov(e)?av(e):e}function $p(n){const e=Lo(n.mapValue.fields.__local_write_time__.timestampValue);return new En(e.seconds,e.nanos)}class LK{constructor(e,t,r,i,s,o,a,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class ka{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ka("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ka&&e.projectId===this.projectId&&e.database===this.database}}const Va={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},uv={nullValue:"NULL_VALUE"};function Fa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ov(n)?4:iV(n)?9007199254740991:dv(n)?10:11:ke()}function Ks(n,e){if(n===e)return!0;const t=Fa(n);if(t!==Fa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $p(n).isEqual($p(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Lo(i.timestampValue),a=Lo(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Uo(n.bytesValue).isEqual(Uo(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return In(i.geoPointValue.latitude)===In(s.geoPointValue.latitude)&&In(i.geoPointValue.longitude)===In(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return In(i.integerValue)===In(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=In(i.doubleValue),a=In(s.doubleValue);return o===a?jp(o)===jp(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Rd(n.arrayValue.values||[],e.arrayValue.values||[],Ks);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Qk(o)!==Qk(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Ks(o[u],a[u])))return!1;return!0}(n,e);default:return ke()}var s}function Hp(n,e){return void 0!==(n.values||[]).find(t=>Ks(t,e))}function La(n,e){if(n===e)return 0;const t=Fa(n),r=Fa(e);if(t!==r)return nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return nt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=In(s.integerValue||s.doubleValue),u=In(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return eV(n.timestampValue,e.timestampValue);case 4:return eV($p(n),$p(e));case 5:return nt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Uo(s),u=Uo(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const g=nt(a[d],u[d]);if(0!==g)return g}return nt(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=nt(In(s.latitude),In(o.latitude));return 0!==a?a:nt(In(s.longitude),In(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return tV(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,d,g;const I=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,b=null===(u=(o.fields||{}).value)||void 0===u?void 0:u.arrayValue,S=nt((null===(d=I?.values)||void 0===d?void 0:d.length)||0,(null===(g=b?.values)||void 0===g?void 0:g.length)||0);return 0!==S?S:tV(I,b)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Va.mapValue&&o===Va.mapValue)return 0;if(s===Va.mapValue)return 1;if(o===Va.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},g=Object.keys(d);u.sort(),g.sort();for(let m=0;m<u.length&&m<g.length;++m){const v=nt(u[m],g[m]);if(0!==v)return v;const I=La(a[u[m]],d[g[m]]);if(0!==I)return I}return nt(u.length,g.length)}(n.mapValue,e.mapValue);default:throw ke()}}function eV(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return nt(n,e);const t=Lo(n),r=Lo(e),i=nt(t.seconds,r.seconds);return 0!==i?i:nt(t.nanos,r.nanos)}function tV(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=La(t[i],r[i]);if(s)return s}return nt(t.length,r.length)}function Nd(n){return hC(n)}function hC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Lo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Uo(n.bytesValue).toBase64():"referenceValue"in n?Se.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=hC(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${hC(t.fields[o])}`;return i+"}"}(n.mapValue):ke()}function sc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fC(n){return!!n&&"integerValue"in n}function zp(n){return!!n&&"arrayValue"in n}function nV(n){return!!n&&"nullValue"in n}function rV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lv(n){return!!n&&"mapValue"in n}function dv(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Gp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Oa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function iV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const sV={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function UK(n){return"nullValue"in n?uv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?sc(ka.empty(),Se.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?dv(n)?sV:{mapValue:{}}:ke()}function BK(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?sc(ka.empty(),Se.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?sV:"mapValue"in n?dv(n)?{mapValue:{}}:Va:ke()}function oV(n,e){const t=La(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function aV(n,e){const t=La(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Sr{constructor(e){this.value=e}static empty(){return new Sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gp(t)}setAll(e){let t=fn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Gp(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());lv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ks(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];lv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Oa(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Sr(Gp(this.value))}}function uV(n){const e=[];return Oa(n.fields,(t,r)=>{const i=new fn([t]);if(lv(r)){const s=uV(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ci(e)}class pn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new pn(e,0,Be.min(),Be.min(),Be.min(),Sr.empty(),0)}static newFoundDocument(e,t,r,i){return new pn(e,1,t,Be.min(),r,i,0)}static newNoDocument(e,t){return new pn(e,2,t,Be.min(),Be.min(),Sr.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,Be.min(),Be.min(),Sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Be.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ua{constructor(e,t){this.position=e,this.inclusive=t}}function cV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Se.comparator(Se.fromName(o.referenceValue),t.key):La(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function lV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ks(n.position[t],e.position[t]))return!1;return!0}class qp{constructor(e,t="asc"){this.field=e,this.dir=t}}function jK(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class dV{}class wt extends dV{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new $K(e,t,r):"array-contains"===t?new GK(e,r):"in"===t?new _V(e,r):"not-in"===t?new qK(e,r):"array-contains-any"===t?new WK(e,r):new wt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new HK(e,r):new zK(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(La(t,this.value)):null!==t&&Fa(this.value)===Fa(t)&&this.matchesComparison(La(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends dV{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ht(e,t)}matches(e){return Od(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Od(n){return"and"===n.op}function pC(n){return"or"===n.op}function gC(n){return hV(n)&&Od(n)}function hV(n){for(const e of n.filters)if(e instanceof Ht)return!1;return!0}function mC(n){if(n instanceof wt)return n.field.canonicalString()+n.op.toString()+Nd(n.value);if(gC(n))return n.filters.map(e=>mC(e)).join(",");{const e=n.filters.map(t=>mC(t)).join(",");return`${n.op}(${e})`}}function fV(n,e){return n instanceof wt?(r=n,(i=e)instanceof wt&&r.op===i.op&&r.field.isEqual(i.field)&&Ks(r.value,i.value)):n instanceof Ht?function(r,i){return i instanceof Ht&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&fV(o,i.filters[a]),!0)}(n,e):void ke();var r,i}function pV(n,e){const t=n.filters.concat(e);return Ht.create(t,n.op)}function gV(n){return n instanceof wt?`${(t=n).field.canonicalString()} ${t.op} ${Nd(t.value)}`:n instanceof Ht?function(t){return t.op.toString()+" {"+t.getFilters().map(gV).join(" ,")+"}"}(n):"Filter";var t}class $K extends wt{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class HK extends wt{constructor(e,t){super(e,"in",t),this.keys=mV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class zK extends wt{constructor(e,t){super(e,"not-in",t),this.keys=mV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Se.fromName(r.referenceValue))}class GK extends wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zp(t)&&Hp(t.arrayValue,this.value)}}class _V extends wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Hp(this.value.arrayValue,t)}}class qK extends wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Hp(this.value.arrayValue,t)}}class WK extends wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hp(this.value.arrayValue,r))}}class KK{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function _C(n,e=null,t=[],r=[],i=null,s=null,o=null){return new KK(n,e,t,r,i,s,o)}function oc(n){const e=Ae(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>mC(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Bp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Nd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Nd(r)).join(",")),e.ue=t}return e.ue}function Wp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!jK(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!fV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lV(n.startAt,e.startAt)&&lV(n.endAt,e.endAt)}function hv(n){return Se.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function fv(n,e){return n.filters.filter(t=>t instanceof wt&&t.field.isEqual(e))}function yV(n,e,t){let r=uv,i=!0;for(const s of fv(n,e)){let o=uv,a=!0;switch(s.op){case"<":case"<=":o=UK(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=uv}oV({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];oV({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function vV(n,e,t){let r=Va,i=!0;for(const s of fv(n,e)){let o=Va,a=!0;switch(s.op){case">=":case">":o=BK(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Va}aV({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];aV({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Bo{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function EV(n,e,t,r,i,s,o,a){return new Bo(n,e,t,r,i,s,o,a)}function kd(n){return new Bo(n)}function IV(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function yC(n){return null!==n.collectionGroup}function Vd(n){const e=Ae(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Gt(fn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new qp(s,r))}),t.has(fn.keyField().canonicalString())||e.ce.push(new qp(fn.keyField(),r))}return e.ce}function Gr(n){const e=Ae(n);return e.le||(e.le=function AV(n,e){if("F"===n.limitType)return _C(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new qp(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Ua(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ua(n.startAt.position,n.startAt.inclusive):null;return _C(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Vd(n))),e.le}function vC(n,e){const t=n.filters.concat([e]);return new Bo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function pv(n,e,t){return new Bo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kp(n,e){return Wp(Gr(n),Gr(e))&&n.limitType===e.limitType}function CV(n){return`${oc(Gr(n))}|lt:${n.limitType}`}function Fd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>gV(i)).join(", ")}]`),Bp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Nd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Nd(i)).join(",")),`Target(${r})`}(Gr(n))}; limitType=${n.limitType})`}function Qp(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Se.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Vd(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,u){const d=cV(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,Vd(r),i)||r.endAt&&!function(o,a,u){const d=cV(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,Vd(r),i)));var r,i}function bV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TV(n){return(e,t)=>{let r=!1;for(const i of Vd(n)){const s=QK(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function QK(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?La(u,d):ke()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ke()}}class jo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oa(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Jk(this.inner)}size(){return this.innerSize}}const YK=new un(Se.comparator);function bi(){return YK}const DV=new un(Se.comparator);function Yp(...n){let e=DV;for(const t of n)e=e.insert(t.key,t);return e}function SV(n){let e=DV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qs(){return Jp()}function RV(){return Jp()}function Jp(){return new jo(n=>n.toString(),(n,e)=>n.isEqual(e))}const JK=new un(Se.comparator),XK=new Gt(Se.comparator);function ut(...n){let e=XK;for(const t of n)e=e.add(t);return e}const ZK=new Gt(nt);function EC(){return ZK}function IC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jp(e)?"-0":e}}function PV(n){return{integerValue:""+n}}function xV(n,e){return $k(e)?PV(e):IC(n,e)}class gv{constructor(){this._=void 0}}function eQ(n,e,t){return n instanceof Ld?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ov(s)&&(s=av(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof ac?NV(n,e):n instanceof uc?OV(n,e):function(i,s){const o=MV(i,s),a=kV(o)+kV(i.Pe);return fC(o)&&fC(i.Pe)?PV(a):IC(i.serializer,a)}(n,e)}function tQ(n,e,t){return n instanceof ac?NV(n,e):n instanceof uc?OV(n,e):t}function MV(n,e){return n instanceof Ud?fC(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class Ld extends gv{}class ac extends gv{constructor(e){super(),this.elements=e}}function NV(n,e){const t=VV(e);for(const r of n.elements)t.some(i=>Ks(i,r))||t.push(r);return{arrayValue:{values:t}}}class uc extends gv{constructor(e){super(),this.elements=e}}function OV(n,e){let t=VV(e);for(const r of n.elements)t=t.filter(i=>!Ks(i,r));return{arrayValue:{values:t}}}class Ud extends gv{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function kV(n){return In(n.integerValue||n.doubleValue)}function VV(n){return zp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Xp{constructor(e,t){this.field=e,this.transform=t}}class rQ{constructor(e,t){this.version=e,this.transformResults=t}}class wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mv(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class _v{}function FV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new jd(n.key,wn.none()):new Bd(n.key,n.data,wn.none());{const t=n.data,r=Sr.empty();let i=new Gt(fn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new $o(n.key,r,new Ci(i.toArray()),wn.none())}}function iQ(n,e,t){n instanceof Bd?function(i,s,o){const a=i.value.clone(),u=BV(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof $o?function(i,s,o){if(!mv(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=BV(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(UV(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Zp(n,e,t,r){return n instanceof Bd?function(s,o,a,u){if(!mv(s.precondition,o))return a;const d=s.value.clone(),g=jV(s.fieldTransforms,u,o);return d.setAll(g),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof $o?function(s,o,a,u){if(!mv(s.precondition,o))return a;const d=jV(s.fieldTransforms,u,o),g=o.data;return g.setAll(UV(s)),g.setAll(d),o.convertToFoundDocument(o.version,g).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,mv(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function sQ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=MV(r.transform,i||null);null!=s&&(null===t&&(t=Sr.empty()),t.set(r.field,s))}return t||null}function LV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Rd(r,i,(s,o)=>function nQ(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof ac&&i instanceof ac||r instanceof uc&&i instanceof uc?Rd(r.elements,i.elements,Ks):r instanceof Ud&&i instanceof Ud?Ks(r.Pe,i.Pe):r instanceof Ld&&i instanceof Ld);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Bd extends _v{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class $o extends _v{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function UV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function BV(n,e,t){const r=new Map;Fe(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,tQ(o,a,t[i]))}return r}function jV(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,eQ(s,o,e))}return r}class jd extends _v{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wC extends _v{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class AC{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&iQ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Zp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Zp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=RV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const u=FV(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Be.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ut())}isEqual(e){return this.batchId===e.batchId&&Rd(this.mutations,e.mutations,(t,r)=>LV(t,r))&&Rd(this.baseMutations,e.baseMutations,(t,r)=>LV(t,r))}}class CC{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Fe(e.mutations.length===r.length);let i=JK;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new CC(e,t,r,i)}}class bC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class oQ{constructor(e,t){this.count=e,this.unchangedNames=t}}var rr,Dt;function HV(n){switch(n){default:return ke();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function zV(n){if(void 0===n)return Wn("GRPC error has no .code"),J.UNKNOWN;switch(n){case rr.OK:return J.OK;case rr.CANCELLED:return J.CANCELLED;case rr.UNKNOWN:return J.UNKNOWN;case rr.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case rr.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case rr.INTERNAL:return J.INTERNAL;case rr.UNAVAILABLE:return J.UNAVAILABLE;case rr.UNAUTHENTICATED:return J.UNAUTHENTICATED;case rr.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case rr.NOT_FOUND:return J.NOT_FOUND;case rr.ALREADY_EXISTS:return J.ALREADY_EXISTS;case rr.PERMISSION_DENIED:return J.PERMISSION_DENIED;case rr.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case rr.ABORTED:return J.ABORTED;case rr.OUT_OF_RANGE:return J.OUT_OF_RANGE;case rr.UNIMPLEMENTED:return J.UNIMPLEMENTED;case rr.DATA_LOSS:return J.DATA_LOSS;default:return ke()}}(Dt=rr||(rr={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";function GV(){return new TextEncoder}const aQ=new tc([4294967295,4294967295],0);function qV(n){const e=GV().encode(n),t=new bk;return t.update(e),new Uint8Array(t.digest())}function WV(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new tc([t,r],0),new tc([i,s],0)]}class TC{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new eg(`Invalid padding: ${t}`);if(r<0)throw new eg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new eg(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new eg(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=tc.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(tc.fromNumber(r)));return 1===i.compare(aQ)&&(i=new tc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=qV(e),[r,i]=WV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new TC(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=qV(e),[r,i]=WV(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class eg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tg{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,ng.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new tg(Be.min(),i,new un(nt),bi(),ut())}}class ng{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ng(r,t,ut(),ut(),ut())}}class vv{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class KV{constructor(e,t){this.targetId=e,this.me=t}}class QV{constructor(e,t,r=Vn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class YV{constructor(){this.fe=0,this.ge=XV(),this.pe=Vn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ut(),t=ut(),r=ut();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ke()}}),new ng(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=XV()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uQ{constructor(e){this.Le=e,this.Be=new Map,this.ke=bi(),this.qe=JV(),this.Qe=new un(nt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ke()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(hv(s))if(0===r){const o=new Se(s.path);this.Ue(t,o,pn.newNoDocument(o,Be.min()))}else Fe(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(t),this.Qe=this.Qe.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Uo(r).toUint8Array()}catch(u){if(u instanceof Zk)return Bi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new TC(o,i,s)}catch(u){return Bi(u instanceof eg?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&hv(a.target)){const u=new Se(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,pn.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ut();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new tg(e,t,this.Qe,this.ke,r);return this.ke=bi(),this.qe=JV(),this.Qe=new un(nt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new YV,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Gt(nt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ce("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new YV),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function JV(){return new un(Se.comparator)}function XV(){return new un(Se.comparator)}const cQ={asc:"ASCENDING",desc:"DESCENDING"},lQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dQ={and:"AND",or:"OR"};class hQ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function DC(n,e){return n.useProto3Json||Bp(e)?e:{value:e}}function $d(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function fQ(n,e){return $d(n,e.toTimestamp())}function Kn(n){return Fe(!!n),Be.fromTimestamp(function(t){const r=Lo(t);return new En(r.seconds,r.nanos)}(n))}function SC(n,e){return RC(n,e).canonicalString()}function RC(n,e){const t=(i=n,new It(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function eF(n){const e=It.fromString(n);return Fe(dF(e)),e}function rg(n,e){return SC(n.databaseId,e.path)}function Ys(n,e){const t=eF(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(rF(t))}function tF(n,e){return SC(n.databaseId,e)}function nF(n){const e=eF(n);return 4===e.length?It.emptyPath():rF(e)}function PC(n){return new It(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rF(n){return Fe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function iF(n,e,t){return{name:rg(n,e),fields:t.value.mapValue.fields}}function sF(n,e,t){const r=Ys(n,e.name),i=Kn(e.updateTime),s=e.createTime?Kn(e.createTime):Be.min(),o=new Sr({mapValue:{fields:e.fields}}),a=pn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function ig(n,e){let t;if(e instanceof Bd)t={update:iF(n,e.key,e.value)};else if(e instanceof jd)t={delete:rg(n,e.key)};else if(e instanceof $o)t={update:iF(n,e.key,e.data),updateMask:IQ(e.fieldMask)};else{if(!(e instanceof wC))return ke();t={verify:rg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ld)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ac)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof uc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ud)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ke()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:fQ(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ke()),t;var s}function xC(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?wn.updateTime(Kn(s.updateTime)):void 0!==s.exists?wn.exists(s.exists):wn.none():wn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(Fe("REQUEST_TIME"===a.setToServerValue),u=new Ld):"appendMissingElements"in a?u=new ac(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new uc(a.removeAllFromArray.values||[]):"increment"in a?u=new Ud(o,a.increment):ke();const d=fn.fromServerFormat(a.fieldPath);return new Xp(d,u)}(n,i)):[];var s;if(e.update){const i=Ys(n,e.update.name),s=new Sr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Ci((e.updateMask.fieldPaths||[]).map(g=>fn.fromServerFormat(g)));return new $o(i,s,o,t,r)}return new Bd(i,s,t,r)}if(e.delete){const i=Ys(n,e.delete);return new jd(i,t)}if(e.verify){const i=Ys(n,e.verify);return new wC(i,t)}return ke()}function oF(n,e){return{documents:[tF(n,e.path)]}}function Ev(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=tF(n,i);const s=function(d){if(0!==d.length)return lF(Ht.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(d){if(0!==d.length)return d.map(g=>{return{field:Ba((v=g).field),direction:yQ(v.dir)};var v})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=DC(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i};var d}function uF(n){let e=nF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Fe(1===r);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let s=[];t.where&&(s=function(m){const v=cF(m);return v instanceof Ht&&gC(v)?v.getFilters():[v]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(v=>{return new qp(Hd((b=v).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let a=null;t.limit&&(a=function(m){let v;return v="object"==typeof m?m.value:m,Bp(v)?null:v}(t.limit));let u=null;var m;t.startAt&&(u=new Ua((m=t.startAt).values||[],!!m.before));let d=null;return t.endAt&&(d=function(m){return new Ua(m.values||[],!m.before)}(t.endAt)),EV(e,i,o,s,a,"F",u,d)}function cF(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Hd(t.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hd(t.unaryFilter.field);return wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Hd(t.unaryFilter.field);return wt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Hd(t.unaryFilter.field);return wt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ke()}}(n):void 0!==n.fieldFilter?wt.create(Hd((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ke()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Ht.create(t.compositeFilter.filters.map(r=>cF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ke()}}(t.compositeFilter.op))}(n):ke();var t}function yQ(n){return cQ[n]}function vQ(n){return lQ[n]}function EQ(n){return dQ[n]}function Ba(n){return{fieldPath:n.canonicalString()}}function Hd(n){return fn.fromServerFormat(n.fieldPath)}function lF(n){return n instanceof wt?function(t){if("=="===t.op){if(rV(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NAN"}};if(nV(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(rV(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NOT_NAN"}};if(nV(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ba(t.field),op:vQ(t.op),value:t.value}}}(n):n instanceof Ht?function(t){const r=t.getFilters().map(i=>lF(i));return 1===r.length?r[0]:{compositeFilter:{op:EQ(t.op),filters:r}}}(n):ke()}function IQ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function dF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Ho{constructor(e,t,r,i,s=Be.min(),o=Be.min(),a=Vn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class hF{constructor(e){this.ct=e}}function fF(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Iv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:rg(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:$d(s,o.version.toTimestamp()),createTime:$d(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:cc(e.version)};else{if(!e.isUnknownDocument())return ke();r.unknownDocument={path:t.path.toArray(),version:cc(e.version)}}var s,o;return r}function Iv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function cc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function lc(n){const e=new En(n.seconds,n.nanoseconds);return Be.fromTimestamp(e)}function dc(n,e){const t=(e.baseMutations||[]).map(s=>xC(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>xC(n.ct,s)),i=En.fromMillis(e.localWriteTimeMs);return new AC(e.batchId,i,t,r)}function sg(n){const e=lc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?lc(n.lastLimboFreeSnapshotVersion):Be.min();let r;return r=void 0!==n.query.documents?(Fe(1===(s=n.query).documents.length),Gr(kd(nF(s.documents[0])))):function(s){return Gr(uF(s))}(n.query),new Ho(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Vn.fromBase64String(n.resumeToken));var s}function pF(n,e){const t=cc(e.snapshotVersion),r=cc(e.lastLimboFreeSnapshotVersion);let i;i=hv(e.target)?oF(n.ct,e.target):Ev(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:oc(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function MC(n){const e=uF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?pv(e,e.limit,"L"):e}function NC(n,e){return new bC(e.largestBatchId,xC(n.ct,e.overlayMutation))}function gF(n,e){const t=e.path.lastSegment();return[n,zr(e.path.popLast()),t]}function mF(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:cc(r.readTime),documentKey:zr(r.documentKey.path),largestBatchId:r.largestBatchId}}class AQ{getBundleMetadata(e,t){return _F(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:lc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return _F(e).put({bundleId:(i=t).id,createTime:cc(Kn(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return yF(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:MC(s.bundledQuery),readTime:lc(s.readTime)};var s})}saveNamedQuery(e,t){return yF(e).put({name:(i=t).name,readTime:cc(Kn(i.readTime)),bundledQuery:i.bundledQuery});var i}}function _F(n){return cr(n,"bundles")}function yF(n){return cr(n,"namedQueries")}class wv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new wv(e,t.uid||"")}getOverlay(e,t){return og(e).get(gF(this.userId,t)).next(r=>r?NC(this.serializer,r):null)}getOverlays(e,t){const r=Qs();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new bC(t,o);i.push(this.ht(e,a))}),G.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(zr(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(og(e).j("collectionPathOverlayIndex",a))}),G.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Qs(),s=zr(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return og(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=NC(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Qs();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return og(e).J({index:"collectionGroupOverlayIndex",range:a},(u,d,g)=>{const m=NC(this.serializer,d);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):g.done()}).next(()=>s)}ht(e,t){return og(e).put(function(i,s,o){const[a,u,d]=gF(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ig(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function og(n){return cr(n,"documentOverlays")}class CQ{Pt(e){return cr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?Vn.fromUint8Array(r):Vn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class hc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(In(e.integerValue));else if("doubleValue"in e){const r=In(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),jp(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Lo(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Uo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?iV(e)?this.dt(t,Number.MAX_SAFE_INTEGER):dv(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ke()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(In(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Se.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function bQ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function vF(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=bQ(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}hc.vt=new hc;class TQ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=vF(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=vF(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class DQ{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class SQ{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class ag{constructor(){this.jt=new TQ,this.Ht=new DQ(this.jt),this.Jt=new SQ(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class fc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new fc(this.indexId,this.documentKey,this.arrayValue,r)}}function ja(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=EF(n.arrayValue,e.arrayValue),0!==t?t:(t=EF(n.directionalValue,e.directionalValue),0!==t?t:Se.comparator(n.documentKey,e.documentKey)))}function EF(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class IF{constructor(e){this.Xt=new Gt((t,r)=>fn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Fe(e.collectionGroup===this.collectionId),this.nn)return!1;const t=oC(e);if(void 0!==t&&!this.sn(t))return!1;const r=nc(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new Gt(fn.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new rc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new rc(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new rc(r.field,"asc"===r.dir?0:1)));return new Pd(Pd.UNKNOWN_ID,this.collectionId,t,xd.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function wF(n){var e,t;if(Fe(n instanceof wt||n instanceof Ht),n instanceof wt){if(n instanceof _V){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>wt.create(n.field,"==",s)))||[];return Ht.create(i,"or")}return n}const r=n.filters.map(i=>wF(i));return Ht.create(r,n.op)}function RQ(n){if(0===n.getFilters().length)return[];const e=VC(wF(n));return Fe(AF(e)),OC(e)||kC(e)?[e]:e.getFilters()}function OC(n){return n instanceof wt}function kC(n){return n instanceof Ht&&gC(n)}function AF(n){return OC(n)||kC(n)||function(t){if(t instanceof Ht&&pC(t)){for(const r of t.getFilters())if(!OC(r)&&!kC(r))return!1;return!0}return!1}(n)}function VC(n){if(Fe(n instanceof wt||n instanceof Ht),n instanceof wt)return n;if(1===n.filters.length)return VC(n.filters[0]);const e=n.filters.map(r=>VC(r));let t=Ht.create(e,n.op);return t=Av(t),AF(t)?t:(Fe(t instanceof Ht),Fe(Od(t)),Fe(t.filters.length>1),t.filters.reduce((r,i)=>FC(r,i)))}function FC(n,e){let t;return Fe(n instanceof wt||n instanceof Ht),Fe(e instanceof wt||e instanceof Ht),t=n instanceof wt?e instanceof wt?Ht.create([n,e],"and"):CF(n,e):e instanceof wt?CF(e,n):function(i,s){if(Fe(i.filters.length>0&&s.filters.length>0),Od(i)&&Od(s))return pV(i,s.getFilters());const o=pC(i)?i:s,a=pC(i)?s:i,u=o.filters.map(d=>FC(d,a));return Ht.create(u,"or")}(n,e),Av(t)}function CF(n,e){if(Od(e))return pV(e,n.getFilters());{const t=e.filters.map(r=>FC(n,r));return Ht.create(t,"or")}}function Av(n){if(Fe(n instanceof wt||n instanceof Ht),n instanceof wt)return n;const e=n.getFilters();if(1===e.length)return Av(e[0]);if(hV(n))return n;const t=e.map(i=>Av(i)),r=[];return t.forEach(i=>{i instanceof wt?r.push(i):i instanceof Ht&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Ht.create(r,n.op)}class PQ{constructor(){this.un=new LC}addToCollectionParentIndex(e,t){return this.un.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(ji.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class LC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Gt(It.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Gt(It.comparator)).toArray()}}const Cv=new Uint8Array(0);class xQ{constructor(e,t){this.databaseId=t,this.cn=new LC,this.ln=new jo(r=>oc(r),(r,i)=>Wp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:zr(i)};return bF(e).put(s)}return G.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[kk(t),""],!1,!0);return bF(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Ws(o.parent))}return r})}addFieldIndex(e,t){const r=ug(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=Gd(e);return s.next(a=>{o.put(mF(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=ug(e),i=Gd(e),s=zd(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=ug(e),r=zd(e),i=Gd(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return G.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new IF(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=zd(e);let i=!0;const s=new Map;return G.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ut();const a=[];return G.forEach(s,(u,d)=>{var W;ce("IndexedDbIndexManager",`Using index ${W=u,`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(oe=>`${oe.fieldPath}:${oe.kind}`).join(",")}`} to execute ${oc(t)}`);const g=function(W,oe){const Ee=oC(oe);if(void 0===Ee)return null;for(const Ue of fv(W,Ee.fieldPath))switch(Ue.op){case"array-contains-any":return Ue.value.arrayValue.values||[];case"array-contains":return[Ue.value]}return null}(d,u),m=function(W,oe){const Ee=new Map;for(const Ue of nc(oe))for(const V of fv(W,Ue.fieldPath))switch(V.op){case"==":case"in":Ee.set(Ue.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return Ee.set(Ue.fieldPath.canonicalString(),V.value),Array.from(Ee.values())}return null}(d,u),v=function(W,oe){const Ee=[];let Ue=!0;for(const V of nc(oe)){const R=0===V.kind?yV(W,V.fieldPath,W.startAt):vV(W,V.fieldPath,W.startAt);Ee.push(R.value),Ue&&(Ue=R.inclusive)}return new Ua(Ee,Ue)}(d,u),I=function(W,oe){const Ee=[];let Ue=!0;for(const V of nc(oe)){const R=0===V.kind?vV(W,V.fieldPath,W.endAt):yV(W,V.fieldPath,W.endAt);Ee.push(R.value),Ue&&(Ue=R.inclusive)}return new Ua(Ee,Ue)}(d,u),b=this.In(u,d,v),S=this.In(u,d,I),x=this.Tn(u,d,m),q=this.En(u.indexId,g,b,v.inclusive,S,I.inclusive,x);return G.forEach(q,F=>r.G(F,t.limit).next(W=>{W.forEach(oe=>{const Ee=Se.fromSegments(oe.documentKey);o.has(Ee)||(o=o.add(Ee),a.push(Ee))})}))}).next(()=>a)}return G.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:RQ(Ht.create(e.filters,"and")).map(r=>_C(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),d=u/(null!=t?t.length:1),g=[];for(let m=0;m<u;++m){const v=t?this.dn(t[m/d]):Cv,I=this.An(e,v,r[m%d],i),b=this.Rn(e,v,s[m%d],o),S=a.map(x=>this.An(e,v,x,!0));g.push(...this.createRange(I,b,S))}return g}An(e,t,r,i){const s=new fc(e,Se.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new fc(e,Se.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new IF(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return G.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new Gt(fn.comparator),g=!1;for(const m of u.filters)for(const v of m.getFlattenedFilters())v.field.isKeyField()||("array-contains"===v.op||"array-contains-any"===v.op?g=!0:d=d.add(v.field));for(const m of u.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(g?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new ag;for(const i of nc(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);hc.vt.It(s,o)}return r.zt()}dn(e){const t=new ag;return hc.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new ag;return hc.vt.It(sc(this.databaseId,t),r.Yt(function(s){const o=nc(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new ag);let s=0;for(const o of nc(e)){const a=r[s++];for(const u of i)if(this.fn(t,o.fieldPath)&&zp(a))i=this.gn(i,o,a);else{const d=u.Yt(o.kind);hc.vt.It(a,d)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new ag;u.seed(a.zt()),hc.vt.It(o,u.Yt(t.kind)),s.push(u)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof wt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ug(e),i=Gd(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return G.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(g,m){const v=m?new xd(m.sequenceNumber,new ji(lc(m.readTime),new Se(Ws(m.documentKey)),m.largestBatchId)):xd.empty(),I=g.fields.map(([b,S])=>new rc(fn.fromServerFormat(b),S));return new Pd(g.indexId,g.collectionGroup,I,v)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:nt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=ug(e),s=Gd(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>G.forEach(a,u=>s.put(mF(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return G.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?G.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),G.forEach(a,u=>this.wn(e,i,u).next(d=>{const g=this.Sn(s,u);return d.isEqual(g)?G.resolve():this.bn(e,s,u,d,g)}))))})}Dn(e,t,r,i){return zd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return zd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=zd(e);let s=new Gt(ja);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new fc(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Gt(ja);const i=this.Vn(t,e);if(null==i)return r;const s=oC(t);if(null!=s){const o=e.data.field(s.fieldPath);if(zp(o))for(const a of o.arrayValue.values||[])r=r.add(new fc(t.indexId,e.key,this.dn(a),i))}else r=r.add(new fc(t.indexId,e.key,Cv,i));return r}bn(e,t,r,i,s){ce("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(u,d,g,m,v){const I=u.getIterator(),b=d.getIterator();let S=Md(I),x=Md(b);for(;S||x;){let q=!1,F=!1;if(S&&x){const W=g(S,x);W<0?F=!0:W>0&&(q=!0)}else null!=S?F=!0:q=!0;q?(m(x),x=Md(b)):F?(v(S),S=Md(I)):(S=Md(I),x=Md(b))}}(i,s,ja,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),G.waitFor(o)}yn(e){let t=1;return Gd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>ja(o,a)).filter((o,a,u)=>!a||0!==ja(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=ja(o,e),u=ja(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Cv,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Cv,[]]))}return s}Cn(e,t){return ja(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(TF)}getMinOffset(e,t){return G.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||ke())).next(TF)}}function bF(n){return cr(n,"collectionParents")}function zd(n){return cr(n,"indexEntries")}function ug(n){return cr(n,"indexConfiguration")}function Gd(n){return cr(n,"indexState")}function TF(n){Fe(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;aC(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ji(e.readTime,e.documentKey,t)}const DF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qr{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new qr(e,qr.DEFAULT_COLLECTION_PERCENTILE,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function SF(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const u=r.J({range:o},(g,m,v)=>(a++,v.delete()));s.push(u.next(()=>{Fe(1===a)}));const d=[];for(const g of t.mutations){const m=Gk(e,g.key.path,t.batchId);s.push(i.delete(m)),d.push(g.key)}return G.waitFor(s).next(()=>d)}function bv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ke();e=n.noDocument}return JSON.stringify(e).length}qr.DEFAULT_COLLECTION_PERCENTILE=10,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qr.DEFAULT=new qr(41943040,qr.DEFAULT_COLLECTION_PERCENTILE,qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qr.DISABLED=new qr(-1,0,0);class Tv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Fe(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Tv(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $a(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=qd(e),o=$a(e);return o.add({}).next(a=>{Fe("number"==typeof a);const u=new AC(a,t,r,i),d=function(I,b,S){const x=S.baseMutations.map(F=>ig(I.ct,F)),q=S.mutations.map(F=>ig(I.ct,F));return{userId:b,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:x,mutations:q}}(this.serializer,this.userId,u),g=[];let m=new Gt((v,I)=>nt(v.canonicalString(),I.canonicalString()));for(const v of i){const I=Gk(this.userId,v.key.path,a);m=m.add(v.key.path.popLast()),g.push(o.put(d)),g.push(s.put(I,yK))}return m.forEach(v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),G.waitFor(g).next(()=>u)})}lookupMutationBatch(e,t){return $a(e).get(t).next(r=>r?(Fe(r.userId===this.userId),dc(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?G.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return $a(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(Fe(a.batchId>=r),s=dc(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $a(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $a(e).U("userMutationsIndex",t).next(r=>r.map(i=>dc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=iv(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return qd(e).J({range:i},(o,a,u)=>{const[d,g,m]=o,v=Ws(g);if(d===this.userId&&t.path.isEqual(v))return $a(e).get(m).next(I=>{if(!I)throw ke();Fe(I.userId===this.userId),s.push(dc(this.serializer,I))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(nt);const i=[];return t.forEach(s=>{const o=iv(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=qd(e).J({range:a},(d,g,m)=>{const[v,I,b]=d,S=Ws(I);v===this.userId&&s.path.isEqual(S)?r=r.add(b):m.done()});i.push(u)}),G.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=iv(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Gt(nt);return qd(e).J({range:o},(u,d,g)=>{const[m,v,I]=u,b=Ws(v);m===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(I)):g.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push($a(e).get(s).next(o=>{if(null===o)throw ke();Fe(o.userId===this.userId),r.push(dc(this.serializer,o))}))}),G.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return SF(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),G.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return G.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return qd(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Ws(s[1]);i.push(u)}else a.done()}).next(()=>{Fe(0===i.length)})})}containsKey(e,t){return RF(e,this.userId,t)}Nn(e){return PF(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function RF(n,e,t){const r=iv(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return qd(n).J({range:s,H:!0},(a,u,d)=>{const[g,m,v]=a;g===e&&m===i&&(o=!0),d.done()}).next(()=>o)}function $a(n){return cr(n,"mutations")}function qd(n){return cr(n,"documentMutations")}function PF(n){return cr(n,"mutationQueues")}class pc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new pc(0)}static kn(){return new pc(-1)}}class MQ{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new pc(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Be.fromTimestamp(new En(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Wd(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Fe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Wd(e).J((o,a)=>{const u=sg(a);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>G.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Wd(e).J((r,i)=>{const s=sg(i);t(s)})}qn(e){return xF(e).get("targetGlobalKey").next(t=>(Fe(null!==t),t))}Qn(e,t){return xF(e).put("targetGlobalKey",t)}Kn(e,t){return Wd(e).put(pF(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=oc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Wd(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=sg(a);Wp(t,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Ha(e);return t.forEach(o=>{const a=zr(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),G.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ha(e);return G.forEach(t,s=>{const o=zr(s.path);return G.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Ha(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ha(e);let s=ut();return i.J({range:r,H:!0},(o,a,u)=>{const d=Ws(o[1]),g=new Se(d);s=s.add(g)}).next(()=>s)}containsKey(e,t){const r=zr(t.path),i=IDBKeyRange.bound([r],[kk(r)],!1,!0);let s=0;return Ha(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}ot(e,t){return Wd(e).get(t).next(r=>r?sg(r):null)}}function Wd(n){return cr(n,"targets")}function xF(n){return cr(n,"targetGlobal")}function Ha(n){return cr(n,"targetDocuments")}function MF([n,e],[t,r]){const i=nt(n,t);return 0===i?nt(e,r):i}class NQ{constructor(e){this.Un=e,this.buffer=new Gt(MF),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();MF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class NF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;ce("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Y.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Na(r)?ce("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ma(r)}yield t.Hn(3e5)}))}}class OQ{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return G.resolve($i.oe);const r=new NQ(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(DF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DF):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,u,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Sd()<=Gs.$b.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-g}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(d-u)+`ms\nTotal Duration: ${d-g}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class kQ{constructor(e,t){this.db=e,this.garbageCollector=function OF(n,e){return new OQ(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Dv(e,r)}removeReference(e,t,r){return Dv(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Dv(e,t)}nr(e,t){return function(i,s){let o=!1;return PF(i).Y(a=>RF(i,a,s).next(u=>(u&&(o=!0),G.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const u=this.nr(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Be.min()),Ha(e).delete([0,zr(o.path)])))});i.push(u)}}).next(()=>G.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Dv(e,t)}tr(e,t){const r=Ha(e);let i,s=$i.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==$i.oe&&t(new Se(Ws(i)),s),s=d,i=u):s=$i.oe}).next(()=>{s!==$i.oe&&t(new Se(Ws(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Dv(n,e){return Ha(n).put((i=n.currentSequenceNumber,{targetId:0,path:zr(e.path),sequenceNumber:i}));var i}class kF{constructor(){this.changes=new jo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class VQ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return gc(e).put(r)}removeEntry(e,t,r){return gc(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Iv(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=pn.newInvalidDocument(t);return gc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cg(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:pn.newInvalidDocument(t)};return gc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cg(t))},(i,s)=>{r={document:this.ir(t,s),size:bv(s)}}).next(()=>r)}getEntries(e,t){let r=bi();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=bi(),i=new un(Se.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,bv(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return G.resolve();let i=new Gt(UF);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(cg(i.first()),cg(i.last())),o=i.getIterator();let a=o.getNext();return gc(e).J({index:"documentKeyIndex",range:s},(u,d,g)=>{const m=Se.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&UF(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?g.$(cg(a)):g.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Iv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gc(e).U(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let g=bi();for(const m of d){const v=this.ir(Se.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);v.isFoundDocument()&&(Qp(t,v)||i.has(v.key))&&(g=g.insert(v.key,v))}return g})}getAllFromCollectionGroup(e,t,r,i){let s=bi();const o=LF(t,r),a=LF(t,ji.max());return gc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,g)=>{const m=this.ir(Se.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(m.key,m),s.size===i&&g.done()}).next(()=>s)}newChangeBuffer(e){return new FQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return FF(e).get("remoteDocumentGlobalKey").next(t=>(Fe(!!t),t))}rr(e,t){return FF(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function wQ(n,e){let t;if(e.document)t=sF(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Se.fromSegments(e.noDocument.path),i=lc(e.noDocument.readTime);t=pn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ke();{const r=Se.fromSegments(e.unknownDocument.path),i=lc(e.unknownDocument.version);t=pn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new En(i[0],i[1]);return Be.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Be.min()))return r}return pn.newInvalidDocument(e)}}function VF(n){return new VQ(n)}class FQ extends kF{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new jo(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Gt((s,o)=>nt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=fF(this.cr.serializer,o);i=i.add(s.path.popLast());const d=bv(u);r+=d-a.size,t.push(this.cr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=fF(this.cr.serializer,o.convertToNoDocument(Be.min()));t.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),G.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function FF(n){return cr(n,"remoteDocumentGlobal")}function gc(n){return cr(n,"remoteDocumentsV14")}function cg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function LF(n,e){const t=e.documentKey.path.toArray();return[n,Iv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function UF(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=nt(t[s],r[s]),i)return i;return i=nt(t.length,r.length),i||(i=nt(t[t.length-2],r[r.length-2]),i||nt(t[t.length-1],r[r.length-1]))}class LQ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class BF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Zp(r.mutation,i,Ci.empty(),En.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ut()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ut()){const i=Qs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Yp();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Qs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ut()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=bi();const o=Jp(),a=Jp();return t.forEach((u,d)=>{const g=r.get(d.key);i.has(d.key)&&(void 0===g||g.mutation instanceof $o)?s=s.insert(d.key,d):void 0!==g?(o.set(d.key,g.mutation.getFieldMask()),Zp(g.mutation,d,g.mutation.getFieldMask(),En.now())):o.set(d.key,Ci.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,g)=>o.set(d,g)),t.forEach((d,g)=>{var m;return a.set(d,new LQ(g,null!==(m=o.get(d))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Jp();let i=new un((o,a)=>o-a),s=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=t.get(u);if(null===d)return;let g=r.get(u)||Ci.empty();g=a.applyToLocalView(d,g),r.set(u,g);const m=(i.get(a.batchId)||ut()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,g=u.value,m=RV();g.forEach(v=>{if(!s.has(v)){const I=FV(t.get(v),r.get(v));null!==I&&m.set(v,I),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Se.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):yC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):G.resolve(Qs());let a=-1,u=s;return o.next(d=>G.forEach(d,(g,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(g)?G.resolve():this.remoteDocumentCache.getEntry(e,g).next(v=>{u=u.insert(g,v)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ut())).next(g=>({batchId:a,changes:SV(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(r=>{let i=Yp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=Yp();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,u=>{const d=(m=t,v=u.child(s),new Bo(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,v;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(g=>{g.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,d)=>{const g=d.getKey();null===o.get(g)&&(o=o.insert(g,pn.newInvalidDocument(g)))});let a=Yp();return o.forEach((u,d)=>{const g=s.get(u);void 0!==g&&Zp(g.mutation,d,Ci.empty(),En.now()),Qp(t,d)&&(a=a.insert(u,d))}),a})}}class UQ{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return G.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Kn(i.createTime)}),G.resolve();var i}getNamedQuery(e,t){return G.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:MC(i.bundledQuery),readTime:Kn(i.readTime)}),G.resolve();var i}}class BQ{constructor(){this.overlays=new un(Se.comparator),this.Ir=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qs();return G.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),G.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){const i=Qs(),s=t.length+1,o=new Se(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new un((d,g)=>d-g);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let g=s.get(d.largestBatchId);null===g&&(g=Qs(),s=s.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const a=Qs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,g)=>a.set(d,g)),!(a.size()>=i)););return G.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new bC(t,r));let s=this.Ir.get(t);void 0===s&&(s=ut(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class jQ{constructor(){this.sessionToken=Vn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}class UC{constructor(){this.Tr=new Gt(_r.Er),this.dr=new Gt(_r.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new _r(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new _r(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Se(new It([])),r=new _r(t,e),i=new _r(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Se(new It([])),r=new _r(t,e),i=new _r(t,e+1);let s=ut();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new _r(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class _r{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Se.comparator(e.key,t.key)||nt(e.wr,t.wr)}static Ar(e,t){return nt(e.wr,t.wr)||Se.comparator(e.key,t.key)}}class $Q{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Gt(_r.Er)}checkEmpty(e){return G.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new AC(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new _r(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,t){return G.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new _r(t,0),i=new _r(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Gt(nt);return t.forEach(i=>{const s=new _r(i,0),o=new _r(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),G.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Se.isDocumentKey(s)||(s=s.child(""));const o=new _r(new Se(s),0);let a=new Gt(nt);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.wr)),!0)},o),G.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Fe(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return G.forEach(t.mutations,i=>{const s=new _r(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new _r(t,0),i=this.br.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return G.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class HQ{constructor(e){this.Mr=e,this.docs=new un(Se.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let r=bi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():pn.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=bi();const o=t.path,a=new Se(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:g}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||aC(Fk(g),r)<=0||(i.has(g.key)||Qp(t,g))&&(s=s.insert(g.key,g.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ke()}Or(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zQ(this)}getSize(e){return G.resolve(this.size)}}class zQ extends kF{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class GQ{constructor(e){this.persistence=e,this.Nr=new jo(t=>oc(t),Wp),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new UC,this.targetCount=0,this.kr=pc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),G.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new pc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Kn(t),G.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.Br.containsKey(t))}}class BC{constructor(e,t){this.qr={},this.overlays={},this.Qr=new $i(0),this.Kr=!1,this.Kr=!0,this.$r=new jQ,this.referenceDelegate=e(this),this.Ur=new GQ(this),this.indexManager=new PQ,this.remoteDocumentCache=new HQ(r=>this.referenceDelegate.Wr(r)),this.serializer=new hF(t),this.Gr=new UQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BQ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new $Q(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const i=new qQ(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return G.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class qQ extends Uk{constructor(e){super(),this.currentSequenceNumber=e}}class Sv{constructor(e){this.persistence=e,this.Jr=new UC,this.Yr=null}static Zr(e){return new Sv(e)}get Xr(){if(this.Yr)return this.Yr;throw ke()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),G.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,r=>{const i=Se.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Be.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return G.or([()=>G.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class WQ{constructor(e){this.serializer=e}O(e,t,r,i){const s=new rv("createOrUpgrade",t);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zk,{unique:!0}),u.createObjectStore("documentMutations"),jF(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=G.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),jF(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Be.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",g)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").U().next(g=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zk,{unique:!0});const m=d.store("mutations"),v=g.map(I=>m.put(I));return G.waitFor(v)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:PK});d.createIndex("collectionPathOverlayIndex",xK,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",MK,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:vK});d.createIndex("documentKeyIndex",EK),d.createIndex("collectionGroupIndex",IK)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:TK}).createIndex("sequenceNumberIndex",DK,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:SK}).createIndex("documentKeyIndex",RK,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(u){u.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=bv(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>G.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>G.forEach(a,u=>{Fe(u.userId===s.userId);const d=dc(this.serializer,u);return SF(e,s.userId,d).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new It(o),d=[0,zr(u)];s.push(t.get(d).next(g=>g?G.resolve():t.put({targetId:0,path:zr(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>G.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:bK});const r=t.store("collectionParents"),i=new LC,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:zr(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new It(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],d)=>{const g=Ws(a);return s(g.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=sg(i),o=pF(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),u=(m=o,m.document?new Se(It.fromString(m.document.name).popFirst(5)):m.noDocument?Se.fromSegments(m.noDocument.path):m.unknownDocument?Se.fromSegments(m.unknownDocument.path):ke()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(d))}).next(()=>G.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=VF(this.serializer),s=new BC(Sv.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var d;let g=null!==(d=a.get(u.userId))&&void 0!==d?d:ut();dc(this.serializer,u).keys().forEach(m=>g=g.add(m)),a.set(u.userId,g)}),G.forEach(a,(u,d)=>{const g=new gr(d),m=wv.lt(this.serializer,g),v=s.getIndexManager(g),I=Tv.lt(g,this.serializer,v,s.referenceDelegate);return new BF(i,I,m,v).recalculateAndSaveOverlaysForDocumentKeys(new dC(t,$i.oe),u).next()})})}}function jF(n){n.createObjectStore("targetDocuments",{keyPath:AK}).createIndex("documentTargetsIndex",CK,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wK,{unique:!0}),n.createObjectStore("targetGlobal")}const jC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $C{constructor(e,t,r,i,s,o,a,u,d,g,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=d,this.li=g,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=v=>Promise.resolve(),!$C.D())throw new ue(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kQ(this,i),this.Ai=t+"main",this.serializer=new hF(u),this.Ri=new qs(this.Ai,this.hi,new WQ(this.serializer)),this.$r=new CQ,this.Ur=new MQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=VF(this.serializer),this.Gr=new AQ,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===g&&Wn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ue(J.FAILED_PRECONDITION,jC);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new $i(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,Y.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,Y.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,Y.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Pv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Na(e))return ce("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return lg(e).get("owner").next(t=>G.resolve(this.vi(t)))}Ci(e){return Pv(e).delete(this.clientId)}Fi(){var e=this;return(0,Y.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=cr(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return G.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?G.resolve(!0):lg(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new ue(J.FAILED_PRECONDITION,jC);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pv(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ce("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Y.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new dC(t,$i.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Pv(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Tv.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xQ(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return wv.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){ce("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(u=this.hi)?kK:16===u?OK:15===u?lC:14===u?Kk:13===u?Wk:12===u?NK:11===u?qk:void ke();var u;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new dC(a,this.Qr?this.Qr.next():$i.oe),"readwrite-primary"===t?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw Wn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ue(J.FAILED_PRECONDITION,Lk);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return lg(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ue(J.FAILED_PRECONDITION,jC)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lg(e).put("owner",t)}static D(){return qs.D()}bi(e){const t=lg(e);return t.get("owner").next(r=>this.vi(r)?(ce("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):G.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Wn(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,Ft.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return ce("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Wn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Wn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lg(n){return cr(n,"owner")}function Pv(n){return cr(n,"clientMetadata")}function HC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class zC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ut(),i=ut();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new zC(e,t.fromCache,r,i)}}class KQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class $F{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,Ft.nr)()?8:Bk((0,Ft.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new KQ;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Sd()<=Gs.$b.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Fd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Sd()<=Gs.$b.DEBUG&&ce("QueryEngine","Query:",Fd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Sd()<=Gs.$b.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Fd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(t))):G.resolve())}Yi(e,t){if(IV(t))return G.resolve(null);let r=Gr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=pv(t,null,"F"),r=Gr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ut(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(t,a);return this.ns(t,d,o,u.readTime)?this.Yi(e,pv(t,null,"F")):this.rs(e,d,t,u)}))})))}Zi(e,t,r,i){return IV(t)||i.isEqual(Be.min())?G.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?G.resolve(null):(Sd()<=Gs.$b.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fd(t)),this.rs(e,o,t,Vk(i,-1)).next(a=>a))})}ts(e,t){let r=new Gt(TV(e));return t.forEach((i,s)=>{Qp(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Sd()<=Gs.$b.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Fd(t)),this.Ji.getDocumentsMatchingQuery(e,t,ji.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class QQ{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new un(nt),this._s=new jo(s=>oc(s),Wp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function HF(n,e,t,r){return new QQ(n,e,t,r)}function zF(n,e){return GC.apply(this,arguments)}function GC(){return(GC=(0,Y.A)(function*(n,e){const t=Ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ut();for(const d of i){o.push(d.batchId);for(const g of d.mutations)u=u.add(g.key)}for(const d of s){a.push(d.batchId);for(const g of d.mutations)u=u.add(g.key)}return t.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function GF(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function qF(n,e,t){let r=ut(),i=ut();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=bi();return t.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Be.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ce("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function XQ(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Kd(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Ho(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Qd(n,e,t){return qC.apply(this,arguments)}function qC(){return(qC=(0,Y.A)(function*(n,e,t){const r=Ae(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Na(o))throw o;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function xv(n,e,t){const r=Ae(n);let i=Be.min(),s=ut();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,g){const m=Ae(u),v=m._s.get(g);return void 0!==v?G.resolve(m.os.get(v)):m.Ur.getTargetData(d,g)}(r,o,Gr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Be.min(),t?s:ut())).next(a=>(QF(r,bV(e),a),{documents:a,Ts:s})))}function WF(n,e){const t=Ae(n),r=Ae(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function KF(n,e){const t=Ae(n),r=t.us.get(e)||Be.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,Vk(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(QF(t,e,i),i))}function QF(n,e,t){let r=n.us.get(e)||Be.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function WC(){return(WC=(0,Y.A)(function*(n,e,t,r){const i=Ae(n);let s=ut(),o=bi();for(const d of t){const g=e.Es(d.metadata.name);d.document&&(s=s.add(g));const m=e.ds(d);m.setReadTime(e.As(d.metadata.readTime)),o=o.insert(g,m)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Kd(i,(g=r,Gr(kd(It.fromString(`__bundle__/docs/${g}`)))));var g;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>qF(d,a,o).next(g=>(a.apply(d),g)).next(g=>i.Ur.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.Ur.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,g.Ps,g.Is)).next(()=>g.Ps)))})).apply(this,arguments)}function eY(n,e){return KC.apply(this,arguments)}function KC(){return(KC=(0,Y.A)(function*(n,e,t=ut()){const r=yield Kd(n,Gr(MC(e.bundledQuery))),i=Ae(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Kn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(Vn.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function YF(n,e){return`firestore_clients_${n}_${e}`}function JF(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function QC(n,e){return`firestore_targets_${n}_${e}`}class Mv{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new ue(i.error.code,i.error.message))),o?new Mv(e,t,i.state,s):(Wn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dg{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ue(r.error.code,r.error.message))),s?new dg(e,r.state,i):(Wn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Nv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=EC();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=$k(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Nv(e,s):(Wn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class YC{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new YC(t.clientId,t.onlineState):(Wn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class JC{constructor(){this.activeTargetIds=EC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XC{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new un(nt),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=YF(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new JC),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Y.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(YF(e.persistenceKey,i));if(s){const o=Nv.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(QC(this.persistenceKey,e));if(i){const s=dg.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(QC(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce("SharedClientState","READ",e,t),t}setItem(e,t){ce("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ce("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void Wn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,Y.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=$i.oe;if(null!=o)try{const u=JSON.parse(o);Fe("number"==typeof u),a=u}catch(u){Wn("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==$i.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new Mv(this.currentUser,e,t,r),s=JF(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=JF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=QC(this.persistenceKey,e),s=new dg(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return Nv.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return Mv.Rs(new gr(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return dg.Rs(i,t)}Ls(e){return YC.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,Y.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);ce("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=EC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class XF{constructor(){this.so=new JC,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new JC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tY{_o(e){}shutdown(){}}class ZF{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ov=null;function ZC(){return null===Ov?Ov=268435456+Math.round(2147483648*Math.random()):Ov++,"0x"+Ov.toString(16)}const nY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rY{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Wr="WebChannelConnection";class iY extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=ZC(),u=this.xo(t,r.toUriEncodedString());ce("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(t,u,d,i).then(g=>(ce("RestConnection",`Received RPC '${t}' ${a}: `,g),g),g=>{throw Bi("RestConnection",`RPC '${t}' ${a} failed with error: `,g,"url: ",u,"request:",i),g})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Dd,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${nY[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=ZC();return new Promise((o,a)=>{const u=new Tk;u.setWithCredentials(!0),u.listenOnce(Dk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case nv.NO_ERROR:const g=u.getResponseJson();ce(Wr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),o(g);break;case nv.TIMEOUT:ce(Wr,`RPC '${e}' ${s} timed out`),a(new ue(J.DEADLINE_EXCEEDED,"Request time out"));break;case nv.HTTP_ERROR:const m=u.getStatus();if(ce(Wr,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const I=v?.error;if(I&&I.status&&I.message){const b=function(x){const q=x.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(q)>=0?q:J.UNKNOWN}(I.status);a(new ue(b,I.message))}else a(new ue(J.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new ue(J.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{ce(Wr,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);ce(Wr,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",d,r,15)})}Bo(e,t,r){const i=ZC(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Pk(),a=Rk(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const g=s.join("");ce(Wr,`Creating RPC '${e}' stream ${i}: ${g}`,u);const m=o.createWebChannel(g,u);let v=!1,I=!1;const b=new rY({Io:x=>{I?ce(Wr,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(v||(ce(Wr,`Opening RPC '${e}' stream ${i} transport.`),m.open(),v=!0),ce(Wr,`RPC '${e}' stream ${i} sending:`,x),m.send(x))},To:()=>m.close()}),S=(x,q,F)=>{x.listen(q,W=>{try{F(W)}catch(oe){setTimeout(()=>{throw oe},0)}})};return S(m,Fp.EventType.OPEN,()=>{I||(ce(Wr,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),S(m,Fp.EventType.CLOSE,()=>{I||(I=!0,ce(Wr,`RPC '${e}' stream ${i} transport closed`),b.So())}),S(m,Fp.EventType.ERROR,x=>{I||(I=!0,Bi(Wr,`RPC '${e}' stream ${i} transport errored:`,x),b.So(new ue(J.UNAVAILABLE,"The operation could not be completed")))}),S(m,Fp.EventType.MESSAGE,x=>{var q;if(!I){const F=x.data[0];Fe(!!F);const oe=F.error||(null===(q=F[0])||void 0===q?void 0:q.error);if(oe){ce(Wr,`RPC '${e}' stream ${i} received error:`,oe);const Ee=oe.status;let Ue=function(O){const L=rr[O];if(void 0!==L)return zV(L)}(Ee),V=oe.message;void 0===Ue&&(Ue=J.INTERNAL,V="Unknown error status: "+Ee+" with message "+oe.message),I=!0,b.So(new ue(Ue,V)),m.close()}else ce(Wr,`RPC '${e}' stream ${i} received:`,F),b.bo(F)}}),S(a,Sk.STAT_EVENT,x=>{x.stat===iC.PROXY?ce(Wr,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===iC.NOPROXY&&ce(Wr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function eL(){return typeof window<"u"?window:null}function kv(){return typeof document<"u"?document:null}function hg(n){return new hQ(n,!0)}class eb{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class tL{constructor(e,t,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eb(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,Y.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,Y.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,Y.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Wn(t.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===J.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new ue(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,Y.A)(function*(){e.state=0,e.start()}))}I_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sY extends tL{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function gQ(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:ke(),i=e.targetChange.targetIds||[],s=function(d,g){return d.useProto3Json?(Fe(void 0===g||"string"==typeof g),Vn.fromBase64String(g||"")):(Fe(void 0===g||g instanceof Buffer||g instanceof Uint8Array),Vn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const g=void 0===d.code?J.UNKNOWN:zV(d.code);return new ue(g,d.message||"")}(o);t=new QV(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Ys(n,r.document.name),s=Kn(r.document.updateTime),o=r.document.createTime?Kn(r.document.createTime):Be.min(),a=new Sr({mapValue:{fields:r.document.fields}}),u=pn.newFoundDocument(i,s,o,a);t=new vv(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Ys(n,r.document),s=r.readTime?Kn(r.readTime):Be.min(),o=pn.newNoDocument(i,s);t=new vv([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Ys(n,r.document);t=new vv([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ke();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new oQ(i,s);t=new KV(r.targetId,o)}}var d;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Be.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Be.min():o.readTime?Kn(o.readTime):Be.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=PC(this.serializer),t.addTarget=function(s,o){let a;const u=o.target;if(a=hv(u)?{documents:oF(s,u)}:{query:Ev(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ZV(s,o.resumeToken);const d=DC(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(Be.min())>0){a.readTime=$d(s,o.snapshotVersion.toTimestamp());const d=DC(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function _Q(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=PC(this.serializer),t.removeTarget=e,this.a_(t)}}class oY extends tL{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function mQ(n,e){return n&&n.length>0?(Fe(void 0!==e),n.map(t=>function(i,s){let o=Kn(i.updateTime?i.updateTime:s);return o.isEqual(Be.min())&&(o=Kn(s)),new rQ(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Kn(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=PC(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ig(this.serializer,r))};this.a_(t)}}class aY extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,RC(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ue(J.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,RC(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(J.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class uY{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Wn(t),this.D_=!1):ce("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class cY{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,Y.A)(function*(){var u;za(o)&&(ce("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,Y.A)(function*(g){const m=Ae(g);m.L_.add(4),yield Yd(m),m.q_.set("Unknown"),m.L_.delete(4),yield fg(m)}),function d(g){return u.apply(this,arguments)})(o))}))}),this.q_=new uY(r,i)}}function fg(n){return tb.apply(this,arguments)}function tb(){return(tb=(0,Y.A)(function*(n){if(za(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function Yd(n){return nb.apply(this,arguments)}function nb(){return(nb=(0,Y.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function Vv(n,e){const t=Ae(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),sb(t)?ib(t):Zd(t).r_()&&rb(t,e))}function Jd(n,e){const t=Ae(n),r=Zd(t);t.N_.delete(e),r.r_()&&nL(t,e),0===t.N_.size&&(r.r_()?r.o_():za(t)&&t.q_.set("Unknown"))}function rb(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zd(n).A_(e)}function nL(n,e){n.Q_.xe(e),Zd(n).R_(e)}function ib(n){n.Q_=new uQ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Zd(n).start(),n.q_.v_()}function sb(n){return za(n)&&!Zd(n).n_()&&n.N_.size>0}function za(n){return 0===Ae(n).L_.size}function rL(n){n.Q_=void 0}function lY(n){return ob.apply(this,arguments)}function ob(){return(ob=(0,Y.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function dY(n){return ab.apply(this,arguments)}function ab(){return(ab=(0,Y.A)(function*(n){n.N_.forEach((e,t)=>{rb(n,e)})})).apply(this,arguments)}function hY(n,e){return ub.apply(this,arguments)}function ub(){return(ub=(0,Y.A)(function*(n,e){rL(n),sb(n)?(n.q_.M_(e),ib(n)):n.q_.set("Unknown")})).apply(this,arguments)}function fY(n,e,t){return cb.apply(this,arguments)}function cb(){return cb=(0,Y.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof QV&&2===e.state&&e.cause)try{yield(r=(0,Y.A)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.N_.delete(u),s.Q_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Fv(n,r)}else if(e instanceof vv?n.Q_.Ke(e):e instanceof KV?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Be.min()))try{const r=yield GF(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const g=s.N_.get(d);g&&s.N_.set(d,g.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const g=s.N_.get(u);if(!g)return;s.N_.set(u,g.withResumeToken(Vn.EMPTY_BYTE_STRING,g.snapshotVersion)),nL(s,u);const m=new Ho(g.target,u,d,g.sequenceNumber);rb(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ce("RemoteStore","Failed to raise snapshot:",r),yield Fv(n,r)}var r}),cb.apply(this,arguments)}function Fv(n,e,t){return lb.apply(this,arguments)}function lb(){return(lb=(0,Y.A)(function*(n,e,t){if(!Na(e))throw e;n.L_.add(1),yield Yd(n),n.q_.set("Offline"),t||(t=()=>GF(n.localStore)),n.asyncQueue.enqueueRetryable((0,Y.A)(function*(){ce("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield fg(n)}))})).apply(this,arguments)}function iL(n,e){return e().catch(t=>Fv(n,t,e))}function Xd(n){return db.apply(this,arguments)}function db(){return(db=(0,Y.A)(function*(n){const e=Ae(n),t=Ga(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;pY(e);)try{const i=yield XQ(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,gY(e,i)}catch(i){yield Fv(e,i)}sL(e)&&oL(e)})).apply(this,arguments)}function pY(n){return za(n)&&n.O_.length<10}function gY(n,e){n.O_.push(e);const t=Ga(n);t.r_()&&t.V_&&t.m_(e.mutations)}function sL(n){return za(n)&&!Ga(n).n_()&&n.O_.length>0}function oL(n){Ga(n).start()}function mY(n){return hb.apply(this,arguments)}function hb(){return(hb=(0,Y.A)(function*(n){Ga(n).p_()})).apply(this,arguments)}function _Y(n){return fb.apply(this,arguments)}function fb(){return(fb=(0,Y.A)(function*(n){const e=Ga(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function yY(n,e,t){return pb.apply(this,arguments)}function pb(){return(pb=(0,Y.A)(function*(n,e,t){const r=n.O_.shift(),i=CC.from(r,e,t);yield iL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Xd(n)})).apply(this,arguments)}function vY(n,e){return gb.apply(this,arguments)}function gb(){return gb=(0,Y.A)(function*(n,e){var t;e&&Ga(n).V_&&(yield(t=(0,Y.A)(function*(i,s){if(HV(a=s.code)&&a!==J.ABORTED){const o=i.O_.shift();Ga(i).s_(),yield iL(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Xd(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),sL(n)&&oL(n)}),gb.apply(this,arguments)}function aL(n,e){return mb.apply(this,arguments)}function mb(){return(mb=(0,Y.A)(function*(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const r=za(t);t.L_.add(3),yield Yd(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield fg(t)})).apply(this,arguments)}function _b(n,e){return yb.apply(this,arguments)}function yb(){return(yb=(0,Y.A)(function*(n,e){const t=Ae(n);e?(t.L_.delete(2),yield fg(t)):e||(t.L_.add(2),yield Yd(t),t.q_.set("Unknown"))})).apply(this,arguments)}function Zd(n){return n.K_||(n.K_=function(t,r,i){const s=Ae(t);return s.w_(),new sY(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:lY.bind(null,n),Ro:dY.bind(null,n),mo:hY.bind(null,n),d_:fY.bind(null,n)}),n.B_.push(function(){var e=(0,Y.A)(function*(t){t?(n.K_.s_(),sb(n)?ib(n):n.q_.set("Unknown")):(yield n.K_.stop(),rL(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function Ga(n){return n.U_||(n.U_=function(t,r,i){const s=Ae(t);return s.w_(),new oY(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mY.bind(null,n),mo:vY.bind(null,n),f_:_Y.bind(null,n),g_:yY.bind(null,n)}),n.B_.push(function(){var e=(0,Y.A)(function*(t){t?(n.U_.s_(),yield Xd(n)):(yield n.U_.stop(),n.O_.length>0&&(ce("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class vb{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new vb(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ue(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eh(n,e){if(Wn("AsyncQueue",`${e}: ${n}`),Na(n))return new ue(J.UNAVAILABLE,`${e}: ${n}`);throw n}class th{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=Yp(),this.sortedSet=new un(this.comparator)}static emptySet(e){return new th(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof th)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new th;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class uL{constructor(){this.W_=new un(Se.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ke():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class nh{constructor(e,t,r,i,s,o,a,u,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new nh(e,t,th.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class EY{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class IY{constructor(){this.queries=cL(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=Ae(t),s=i.queries;i.queries=cL(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})}(this,new ue(J.ABORTED,"Firestore shutting down"))}}function cL(){return new jo(n=>CV(n),Kp)}function Eb(n,e){return Ib.apply(this,arguments)}function Ib(){return(Ib=(0,Y.A)(function*(n,e){const t=Ae(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new EY,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=eh(o,`Initialization of query '${Fd(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Cb(t)})).apply(this,arguments)}function wb(n,e){return Ab.apply(this,arguments)}function Ab(){return(Ab=(0,Y.A)(function*(n,e){const t=Ae(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function wY(n,e){const t=Ae(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Cb(t)}function AY(n,e,t){const r=Ae(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function Cb(n){n.Y_.forEach(e=>{e.next()})}var bb,lL;(lL=bb||(bb={})).ea="default",lL.Cache="cache";class Tb{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new nh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=nh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bb.Cache}}class CY{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class dL{constructor(e){this.serializer=e}Es(e){return Ys(this.serializer,e)}ds(e){return e.metadata.exists?sF(this.serializer,e.document,!1):pn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Kn(e)}}class bY{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hL(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=It.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new dL(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||ut()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,Y.A)(function*(){const t=yield function ZQ(n,e,t,r){return WC.apply(this,arguments)}(e.localStore,new dL(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield eY(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function hL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class fL{constructor(e){this.key=e}}class pL{constructor(e){this.key=e}}class gL{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ut(),this.mutatedKeys=ut(),this.Aa=TV(e),this.Ra=new th(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new uL,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,m)=>{const v=i.get(g),I=Qp(this.query,m)?m:null,b=!!v&&this.mutatedKeys.has(v.key),S=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let x=!1;v&&I?v.data.isEqual(I.data)?b!==S&&(r.track({type:3,doc:I}),x=!0):this.ga(v,I)||(r.track({type:2,doc:I}),x=!0,(u&&this.Aa(I,u)>0||d&&this.Aa(I,d)<0)&&(a=!0)):!v&&I?(r.track({type:0,doc:I}),x=!0):v&&!I&&(r.track({type:1,doc:v}),x=!0,(u||d)&&(a=!0)),x&&(I?(o=o.add(I),s=S?s.add(g):s.delete(g)):(o=o.delete(g),s=s.delete(g)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const g="F"===this.query.limitType?o.last():o.first();o=o.delete(g.key),s=s.delete(g.key),r.track({type:1,doc:g})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((g,m)=>function(I,b){const S=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}};return S(I)-S(b)}(g.type,m.type)||this.Aa(g.doc,m.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],u=0===this.da.size&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,0!==o.length||d?{snapshot:new nh(this.query,e.Ra,s,o,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new uL,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ut(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new pL(r))}),this.da.forEach(r=>{e.has(r)||t.push(new fL(r))}),t}ba(e){this.Ta=e.Ts,this.da=ut();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return nh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class TY{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class DY{constructor(e){this.key=e,this.va=!1}}class SY{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new jo(a=>CV(a),Kp),this.Ma=new Map,this.xa=new Set,this.Oa=new un(Se.comparator),this.Na=new Map,this.La=new UC,this.Ba={},this.ka=new Map,this.qa=pc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function RY(n,e){return Db.apply(this,arguments)}function Db(){return(Db=(0,Y.A)(function*(n,e,t=!0){const r=Lv(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield mL(r,e,t,!0),i})).apply(this,arguments)}function PY(n,e){return Sb.apply(this,arguments)}function Sb(){return(Sb=(0,Y.A)(function*(n,e){const t=Lv(n);yield mL(t,e,!0,!1)})).apply(this,arguments)}function mL(n,e,t,r){return Rb.apply(this,arguments)}function Rb(){return(Rb=(0,Y.A)(function*(n,e,t,r){const i=yield Kd(n.localStore,Gr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield Pb(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&Vv(n.remoteStore,i),a})).apply(this,arguments)}function Pb(n,e,t,r,i){return xb.apply(this,arguments)}function xb(){return xb=(0,Y.A)(function*(n,e,t,r,i){n.Ka=(m,v,I)=>{return(b=(0,Y.A)(function*(x,q,F,W){let oe=q.view.ma(F);oe.ns&&(oe=yield xv(x.localStore,q.query,!1).then(({documents:R})=>q.view.ma(R,oe)));const Ee=W&&W.targetChanges.get(q.targetId),Ue=W&&null!=W.targetMismatches.get(q.targetId),V=q.view.applyChanges(oe,x.isPrimaryClient,Ee,Ue);return $b(x,q.targetId,V.wa),V.snapshot}),function S(x,q,F,W){return b.apply(this,arguments)})(n,m,v,I);var b};const s=yield xv(n.localStore,e,!0),o=new gL(e,s.Ts),a=o.ma(s.documents),u=ng.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),d=o.applyChanges(a,n.isPrimaryClient,u);$b(n,t,d.wa);const g=new TY(e,t,o);return n.Fa.set(e,g),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),d.snapshot}),xb.apply(this,arguments)}function xY(n,e,t){return Mb.apply(this,arguments)}function Mb(){return(Mb=(0,Y.A)(function*(n,e,t){const r=Ae(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Kp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Qd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Jd(r.remoteStore,i.targetId),rh(r,i.targetId)}).catch(Ma))):(rh(r,i.targetId),yield Qd(r.localStore,i.targetId,!0))})).apply(this,arguments)}function MY(n,e){return Nb.apply(this,arguments)}function Nb(){return(Nb=(0,Y.A)(function*(n,e){const t=Ae(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Jd(t.remoteStore,r.targetId))})).apply(this,arguments)}function Ob(){return(Ob=(0,Y.A)(function*(n,e,t){const r=Zb(n);try{const i=yield function(o,a){const u=Ae(o),d=En.now(),g=a.reduce((I,b)=>I.add(b.key),ut());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let b=bi(),S=ut();return u.cs.getEntries(I,g).next(x=>{b=x,b.forEach((q,F)=>{F.isValidDocument()||(S=S.add(q))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,b)).next(x=>{m=x;const q=[];for(const F of a){const W=sQ(F,m.get(F.key).overlayedDocument);null!=W&&q.push(new $o(F.key,W,uV(W.value.mapValue),wn.exists(!0)))}return u.mutationQueue.addMutationBatch(I,d,q,a)}).next(x=>{v=x;const q=x.applyToLocalDocumentSet(m,S);return u.documentOverlayCache.saveOverlays(I,x.batchId,q)})}).then(()=>({batchId:v.batchId,changes:SV(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new un(nt)),d=d.insert(a,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,t),yield zo(r,i.changes),yield Xd(r.remoteStore)}catch(i){const s=eh(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function _L(n,e){return kb.apply(this,arguments)}function kb(){return(kb=(0,Y.A)(function*(n,e){const t=Ae(n);try{const r=yield function JQ(n,e){const t=Ae(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((g,m)=>{const v=i.get(m);if(!v)return;a.push(t.Ur.removeMatchingKeys(s,g.removedDocuments,m).next(()=>t.Ur.addMatchingKeys(s,g.addedDocuments,m)));let I=v.withSequenceNumber(s.currentSequenceNumber);var S,x,q;null!==e.targetMismatches.get(m)?I=I.withResumeToken(Vn.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):g.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(g.resumeToken,r)),i=i.insert(m,I),x=I,q=g,(0===(S=v).resumeToken.approximateByteSize()||x.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8||q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,I))});let u=bi(),d=ut();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,g))}),a.push(qF(s,o,e.documentUpdates).next(g=>{u=g.Ps,d=g.Is})),!r.isEqual(Be.min())){const g=t.Ur.getLastRemoteSnapshotVersion(s).next(m=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(g)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(Fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Fe(o.va):i.removedDocuments.size>0&&(Fe(o.va),o.va=!1))}),yield zo(t,r,e)}catch(r){yield Ma(r)}})).apply(this,arguments)}function yL(n,e,t){const r=Ae(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Ae(o);u.onlineState=a;let d=!1;u.queries.forEach((g,m)=>{for(const v of m.j_)v.Z_(a)&&(d=!0)}),d&&Cb(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function OY(n,e,t){return Vb.apply(this,arguments)}function Vb(){return(Vb=(0,Y.A)(function*(n,e,t){const r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new un(Se.comparator);o=o.insert(s,pn.newNoDocument(s,Be.min()));const a=ut().add(s),u=new tg(Be.min(),new Map,new un(nt),o,a);yield _L(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Hb(r)}else yield Qd(r.localStore,e,!1).then(()=>rh(r,e,t)).catch(Ma)})).apply(this,arguments)}function kY(n,e){return Fb.apply(this,arguments)}function Fb(){return(Fb=(0,Y.A)(function*(n,e){const t=Ae(n),r=e.batch.batchId;try{const i=yield function YQ(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,d,g){const m=d.batch,v=m.keys();let I=G.resolve();return v.forEach(b=>{I=I.next(()=>g.getEntry(u,b)).next(S=>{const x=d.docVersions.get(b);Fe(null!==x),S.version.compareTo(x)<0&&(m.applyToRemoteDocument(S,d),S.isValidDocument()&&(S.setReadTime(d.commitVersion),g.addEntry(S)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ut();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);jb(t,r,null),Bb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield zo(t,i)}catch(i){yield Ma(i)}})).apply(this,arguments)}function VY(n,e,t){return Lb.apply(this,arguments)}function Lb(){return(Lb=(0,Y.A)(function*(n,e,t){const r=Ae(n);try{const i=yield function(o,a){const u=Ae(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let g;return u.mutationQueue.lookupMutationBatch(d,a).next(m=>(Fe(null!==m),g=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,g,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g)).next(()=>u.localDocuments.getDocuments(d,g))})}(r.localStore,e);jb(r,e,t),Bb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield zo(r,i)}catch(i){yield Ma(i)}})).apply(this,arguments)}function Ub(){return(Ub=(0,Y.A)(function*(n,e){const t=Ae(n);za(t.remoteStore)||ce("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Ae(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=eh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function Bb(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function jb(n,e,t){const r=Ae(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function rh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||vL(n,r)})}function vL(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(Jd(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Hb(n))}function $b(n,e,t){for(const r of t)r instanceof fL?(n.La.addReference(r.key,e),LY(n,r)):r instanceof pL?(ce("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||vL(n,r.key)):ke()}function LY(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(ce("SyncEngine","New document in limbo: "+t),n.xa.add(r),Hb(n))}function Hb(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Se(It.fromString(e)),r=n.qa.next();n.Na.set(r,new DY(t)),n.Oa=n.Oa.insert(t,r),Vv(n.remoteStore,new Ho(Gr(kd(t.path)),r,"TargetPurposeLimboResolution",$i.oe))}}function zo(n,e,t){return zb.apply(this,arguments)}function zb(){return zb=(0,Y.A)(function*(n,e,t){const r=Ae(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,t).then(d=>{var g;if((d||t)&&r.isPrimaryClient){const m=d?!d.fromCache:null===(g=t?.targetChanges.get(u.targetId))||void 0===g?void 0:g.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=zC.Wi(u.targetId,d);s.push(m)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,Y.A)(function*(d,g){const m=Ae(d);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>G.forEach(g,I=>G.forEach(I.$i,b=>m.persistence.referenceDelegate.addReference(v,I.targetId,b)).next(()=>G.forEach(I.Ui,b=>m.persistence.referenceDelegate.removeReference(v,I.targetId,b)))))}catch(v){if(!Na(v))throw v;ce("LocalStore","Failed to update sequence numbers: "+v)}for(const v of g){const I=v.targetId;if(!v.fromCache){const b=m.os.get(I),x=b.withLastLimboFreeSnapshotVersion(b.snapshotVersion);m.os=m.os.insert(I,x)}}}),function u(d,g){return a.apply(this,arguments)})(r.localStore,s))}),zb.apply(this,arguments)}function UY(n,e){return Gb.apply(this,arguments)}function Gb(){return(Gb=(0,Y.A)(function*(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const r=yield zF(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(u=>{u.reject(new ue(J.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield zo(t,r.hs)}var s})).apply(this,arguments)}function BY(n,e){const t=Ae(n),r=t.Na.get(e);if(r&&r.va)return ut().add(r.key);{let i=ut();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function jY(n,e){return qb.apply(this,arguments)}function qb(){return(qb=(0,Y.A)(function*(n,e){const t=Ae(n),r=yield xv(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&$b(t,e.targetId,i.wa),i})).apply(this,arguments)}function $Y(n,e){return Wb.apply(this,arguments)}function Wb(){return(Wb=(0,Y.A)(function*(n,e){const t=Ae(n);return KF(t.localStore,e).then(r=>zo(t,r))})).apply(this,arguments)}function HY(n,e,t,r){return Kb.apply(this,arguments)}function Kb(){return(Kb=(0,Y.A)(function*(n,e,t,r){const i=Ae(n),s=yield function(a,u){const d=Ae(a),g=Ae(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",m=>g.Mn(m,u).next(v=>v?d.localDocuments.getDocuments(m,v):G.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===t?yield Xd(i.remoteStore):"acknowledged"===t||"rejected"===t?(jb(i,e,r||null),Bb(i,e),u=e,Ae(Ae(i.localStore).mutationQueue).On(u)):ke(),yield zo(i,s)):ce("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function Qb(){return(Qb=(0,Y.A)(function*(n,e){const t=Ae(n);if(Lv(t),Zb(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield EL(t,r.toArray());t.Qa=!0,yield _b(t.remoteStore,!0);for(const s of i)Vv(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(rh(t,o),Qd(t.localStore,o,!0))),Jd(t.remoteStore,o)}),yield i,yield EL(t,r),function(o){const a=Ae(o);a.Na.forEach((u,d)=>{Jd(a.remoteStore,d)}),a.La.pr(),a.Na=new Map,a.Oa=new un(Se.comparator)}(t),t.Qa=!1,yield _b(t.remoteStore,!1)}})).apply(this,arguments)}function EL(n,e,t){return Yb.apply(this,arguments)}function Yb(){return(Yb=(0,Y.A)(function*(n,e,t){const r=Ae(n),i=[],s=[];for(const o of e){let a;const u=r.Ma.get(o);if(u&&0!==u.length){a=yield Kd(r.localStore,Gr(u[0]));for(const d of u){const g=r.Fa.get(d),m=yield jY(r,g);m.snapshot&&s.push(m.snapshot)}}else{const d=yield WF(r.localStore,o);a=yield Kd(r.localStore,d),yield Pb(r,IL(d),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function IL(n){return EV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function GY(n){return t=Ae(n).localStore,Ae(Ae(t).persistence).Qi();var t}function qY(n,e,t,r){return Jb.apply(this,arguments)}function Jb(){return(Jb=(0,Y.A)(function*(n,e,t,r){const i=Ae(n);if(i.Qa)return void ce("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield KF(i.localStore,bV(s[0])),a=tg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Vn.EMPTY_BYTE_STRING);yield zo(i,o,a);break}case"rejected":yield Qd(i.localStore,e,!0),rh(i,e,r);break;default:ke()}})).apply(this,arguments)}function WY(n,e,t){return Xb.apply(this,arguments)}function Xb(){return(Xb=(0,Y.A)(function*(n,e,t){const r=Lv(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ce("SyncEngine","Adding an already active target "+i);continue}const s=yield WF(r.localStore,i),o=yield Kd(r.localStore,s);yield Pb(r,IL(s),o.targetId,!1,o.resumeToken),Vv(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield Qd(r.localStore,i,!1).then(()=>{Jd(r.remoteStore,i),rh(r,i)}).catch(Ma))}})).apply(this,arguments)}function Lv(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_L.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OY.bind(null,e),e.Ca.d_=wY.bind(null,e.eventManager),e.Ca.$a=AY.bind(null,e.eventManager),e}function Zb(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VY.bind(null,e),e}let ih=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,Y.A)(function*(){r.serializer=hg(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return HF(this.persistence,new $F,t.initialUser,this.serializer)}Ga(t){return new BC(Sv.Zr,this.serializer)}Wa(t){return new XF}terminate(){var t=this;return(0,Y.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class eT extends ih{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Y.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield Zb(r.Ja.syncEngine),yield Xd(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return HF(this.persistence,new $F,e.initialUser,this.serializer)}ja(e,t){return new NF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new mK(t,this.persistence);return new gK(e.asyncQueue,r)}Ga(e){const t=HC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?qr.withCacheSize(this.cacheSizeBytes):qr.DEFAULT;return new $C(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,eL(),kv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new XF}}class wL extends eT{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Y.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof XC&&(r.sharedClientState.syncEngine={no:HY.bind(null,i),ro:qY.bind(null,i),io:WY.bind(null,i),Qi:GY.bind(null,i),eo:$Y.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,Y.A)(function*(o){yield function zY(n,e){return Qb.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=eL();if(!XC.D(t))throw new ue(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=HC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new XC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let sh=(()=>{class n{initialize(t,r){var i=this;return(0,Y.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>yL(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=UY.bind(null,i.syncEngine),yield _b(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new IY}createDatastore(t){const r=hg(t.databaseInfo.databaseId),i=new iY(t.databaseInfo);return new aY(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>yL(this.syncEngine,r,0),u=ZF.D()?new ZF:new tY,new cY(i,s,o,a,u);var i,s,o,a,u}createSyncEngine(t,r){return function(s,o,a,u,d,g,m){const v=new SY(s,o,a,u,d,g);return m&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,Y.A)(function*(){var r,i,s;yield(s=(0,Y.A)(function*(a){const u=Ae(a);ce("RemoteStore","RemoteStore shutting down."),u.L_.add(5),yield Yd(u),u.k_.shutdown(),u.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function AL(n,e=10240){let t=0;return{read:()=>(0,Y.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Y.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Uv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Wn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class YY{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new mr,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,Y.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,Y.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,Y.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new CY(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,Y.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,Y.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,Y.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class JY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Y.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ue(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,Y.A)(function*(o,a){const u=Ae(o),d={documents:a.map(I=>rg(u.serializer,I))},g=yield u.Lo("BatchGetDocuments",u.serializer.databaseId,It.emptyPath(),d,a.length),m=new Map;g.forEach(I=>{const b=function pQ(n,e){return"found"in e?function(r,i){Fe(!!i.found);const s=Ys(r,i.found.name),o=Kn(i.found.updateTime),a=i.found.createTime?Kn(i.found.createTime):Be.min(),u=new Sr({mapValue:{fields:i.found.fields}});return pn.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){Fe(!!i.missing),Fe(!!i.readTime);const s=Ys(r,i.missing),o=Kn(i.readTime);return pn.newNoDocument(s,o)}(n,e):ke()}(u.serializer,I);m.set(b.key.toString(),b)});const v=[];return a.forEach(I=>{const b=m.get(I.toString());Fe(!!b),v.push(b)}),v}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new jd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Y.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Se.fromPath(i);e.mutations.push(new wC(s,e.precondition(s)))}),yield(r=(0,Y.A)(function*(s,o){const a=Ae(s),u={writes:o.map(d=>ig(a.serializer,d))};yield a.Mo("Commit",a.serializer.databaseId,It.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ke();t=Be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ue(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Be.min())?wn.exists(!1):wn.updateTime(t):wn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Be.min()))throw new ue(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wn.updateTime(t)}return wn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class XY{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new eb(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,Y.A)(function*(){const t=new JY(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!Bp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!HV(t)}return!1}}class ZY{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gr.UNAUTHENTICATED,this.clientId=Ok.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,Y.A)(function*(u){ce("FirestoreClient","Received user=",u.uid),yield o.authCredentialListener(u),o.user=u});return function(u){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(ce("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Y.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=eh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function tT(n,e){return nT.apply(this,arguments)}function nT(){return nT=(0,Y.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Y.A)(function*(s){r.isEqual(s)||(yield zF(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),nT.apply(this,arguments)}function CL(n,e){return rT.apply(this,arguments)}function rT(){return(rT=(0,Y.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield iT(n);ce("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>aL(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>aL(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function iT(n){return sT.apply(this,arguments)}function sT(){return(sT=(0,Y.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{yield tT(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Bi("Error using user provided cache. Falling back to memory cache: "+e),yield tT(n,new ih)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),yield tT(n,new ih);var i;return n._offlineComponents})).apply(this,arguments)}function Bv(n){return oT.apply(this,arguments)}function oT(){return(oT=(0,Y.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),yield CL(n,n._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),yield CL(n,new sh))),n._onlineComponents})).apply(this,arguments)}function bL(n){return iT(n).then(e=>e.persistence)}function oh(n){return iT(n).then(e=>e.localStore)}function TL(n){return Bv(n).then(e=>e.remoteStore)}function aT(n){return Bv(n).then(e=>e.syncEngine)}function ah(n){return uT.apply(this,arguments)}function uT(){return(uT=(0,Y.A)(function*(n){const e=yield Bv(n),t=e.eventManager;return t.onListen=RY.bind(null,e.syncEngine),t.onUnlisten=xY.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PY.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=MY.bind(null,e.syncEngine),t})).apply(this,arguments)}function SL(n,e,t={}){const r=new mr;return n.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return function(s,o,a,u,d){const g=new Uv({next:v=>{g.Za(),o.enqueueAndForget(()=>wb(s,m));const I=v.docs.has(a);!I&&v.fromCache?d.reject(new ue(J.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&v.fromCache&&u&&"server"===u.source?d.reject(new ue(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new Tb(kd(a.path),g,{includeMetadataChanges:!0,_a:!0});return Eb(s,m)}(yield ah(n),n.asyncQueue,e,t,r)})),r.promise}function RL(n,e,t={}){const r=new mr;return n.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return function(s,o,a,u,d){const g=new Uv({next:v=>{g.Za(),o.enqueueAndForget(()=>wb(s,m)),v.fromCache&&"server"===u.source?d.reject(new ue(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new Tb(a,g,{includeMetadataChanges:!0,_a:!0});return Eb(s,m)}(yield ah(n),n.asyncQueue,e,t,r)})),r.promise}function PL(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const xL=new Map;function cT(n,e,t){if(!t)throw new ue(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ML(n,e,t,r){if(!0===e&&!0===r)throw new ue(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NL(n){if(!Se.isDocumentKey(n))throw new ue(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function OL(n){if(Se.isDocumentKey(n))throw new ue(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jv(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":ke()}function mt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jv(n);throw new ue(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kL(n,e){if(e<=0)throw new ue(J.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class VL{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ue(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ue(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ML("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=PL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VL({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ue(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VL(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new rK;switch(r.type){case"firstParty":return new aK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,Y.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=xL.get(t);r&&(ce("ComponentProvider","Removing Datastore"),xL.delete(t),r.terminate())}(this),Promise.resolve()}}class Rr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rr(this.firestore,e,this._query)}}class gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Js(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class Js extends Rr{constructor(e,t,r){super(e,t,kd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new Se(e))}withConverter(e){return new Js(this.firestore,e,this._path)}}function LL(n,e,...t){if(n=(0,Ft.Ku)(n),cT("collection","path",e),n instanceof pg){const r=It.fromString(e,...t);return OL(r),new Js(n,null,r)}{if(!(n instanceof gn||n instanceof Js))throw new ue(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(It.fromString(e,...t));return OL(r),new Js(n.firestore,null,r)}}function $v(n,e,...t){if(n=(0,Ft.Ku)(n),1===arguments.length&&(e=Ok.newId()),cT("doc","path",e),n instanceof pg){const r=It.fromString(e,...t);return NL(r),new gn(n,null,new Se(r))}{if(!(n instanceof gn||n instanceof Js))throw new ue(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(It.fromString(e,...t));return NL(r),new gn(n.firestore,n instanceof Js?n.converter:null,new Se(r))}}function UL(n,e){return n=(0,Ft.Ku)(n),e=(0,Ft.Ku)(e),(n instanceof gn||n instanceof Js)&&(e instanceof gn||e instanceof Js)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function lT(n,e){return n=(0,Ft.Ku)(n),e=(0,Ft.Ku)(e),n instanceof Rr&&e instanceof Rr&&n.firestore===e.firestore&&Kp(n._query,e._query)&&n.converter===e.converter}class BL{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eb(this,"async_queue_retry"),this.Vu=()=>{const r=kv();r&&ce("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=kv();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=kv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new mr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,Y.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!Na(t))throw t;ce("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,Wn("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=vb.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ke()}verifyOperationInProgress(){}wu(){var e=this;return(0,Y.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function dT(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class hJ{constructor(){this._progressObserver={},this._taskCompletionResolver=new mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Qt extends pg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new BL,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,Y.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new BL(t),e._firestoreClient=void 0,yield t}})()}}function An(n){if(n._terminated)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||jL(n),n._firestoreClient}function jL(n){var e,t,r;const i=n._freezeSettings(),s=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new LK(n._databaseId,u,n._persistenceKey,(g=i).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,PL(g.experimentalLongPollingOptions),g.useFetchStreams));var u,g;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new ZY(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function hT(){return(hT=(0,Y.A)(function*(n){Bi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();$L(n,sh.provider,{build:t=>new wL(t,e.cacheSizeBytes)})})).apply(this,arguments)}function $L(n,e,t){if((n=mt(n,Qt))._firestoreClient||n._terminated)throw new ue(J.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ue(J.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},jL(n)}class Xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xs(Vn.fromBase64String(e))}catch(t){throw new ue(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xs(Vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Go{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ue(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mc{constructor(e){this._methodName=e}}class Hv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}}class zv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const AJ=/^__.*__$/;class CJ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new $o(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bd(e,this.data,t,this.fieldTransforms)}}class HL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $o(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke()}}class Gv{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Gv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Kv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(zL(this.Cu)&&AJ.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class bJ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||hg(e)}Qu(e,t,r,i=!1){return new Gv({Cu:e,methodName:t,qu:r,path:fn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _c(n){const e=n._freezeSettings(),t=hg(n._databaseId);return new bJ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qv(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);vT("Data must be an object, but it was:",o,r);const a=WL(r,o);let u,d;if(s.merge)u=new Ci(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const g=[];for(const m of s.mergeFields){const v=_g(e,m,t);if(!o.contains(v))throw new ue(J.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);QL(g,v)||g.push(v)}u=new Ci(g),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new CJ(new Sr(a),u,d)}class mg extends mc{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mg}}function GL(n,e,t){return new Gv({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class fT extends mc{_toFieldTransform(e){return new Xp(e.path,new Ld)}isEqual(e){return e instanceof fT}}class pT extends mc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=GL(this,e,!0),r=this.Ku.map(s=>yc(s,t)),i=new ac(r);return new Xp(e.path,i)}isEqual(e){return e instanceof pT&&(0,Ft.bD)(this.Ku,e.Ku)}}class gT extends mc{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=GL(this,e,!0),r=this.Ku.map(s=>yc(s,t)),i=new uc(r);return new Xp(e.path,i)}isEqual(e){return e instanceof gT&&(0,Ft.bD)(this.Ku,e.Ku)}}class mT extends mc{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Ud(e.serializer,xV(e.serializer,this.$u));return new Xp(e.path,t)}isEqual(e){return e instanceof mT&&this.$u===e.$u}}function _T(n,e,t,r){const i=n.Qu(1,e,t);vT("Data must be an object, but it was:",i,r);const s=[],o=Sr.empty();Oa(r,(u,d)=>{const g=Wv(e,u,t);d=(0,Ft.Ku)(d);const m=i.Nu(g);if(d instanceof mg)s.push(g);else{const v=yc(d,m);null!=v&&(s.push(g),o.set(g,v))}});const a=new Ci(s);return new HL(o,a,i.fieldTransforms)}function yT(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[_g(e,r,t)],u=[i];if(s.length%2!=0)throw new ue(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<s.length;v+=2)a.push(_g(e,s[v])),u.push(s[v+1]);const d=[],g=Sr.empty();for(let v=a.length-1;v>=0;--v)if(!QL(d,a[v])){const I=a[v];let b=u[v];b=(0,Ft.Ku)(b);const S=o.Nu(I);if(b instanceof mg)d.push(I);else{const x=yc(b,S);null!=x&&(d.push(I),g.set(I,x))}}const m=new Ci(d);return new HL(g,m,o.fieldTransforms)}function qL(n,e,t,r=!1){return yc(t,n.Qu(r?4:3,e))}function yc(n,e){if(KL(n=(0,Ft.Ku)(n)))return vT("Unsupported field value:",e,n),WL(n,e);if(n instanceof mc)return function(r,i){if(!zL(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=yc(a,i.Lu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,Ft.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return xV(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=En.fromDate(r);return{timestampValue:$d(i.serializer,s)}}if(r instanceof En){const s=new En(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$d(i.serializer,s)}}if(r instanceof Hv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xs)return{bytesValue:ZV(i.serializer,r._byteString)};if(r instanceof gn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:SC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof zv)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.Bu("VectorValues must only contain numeric values.");return IC(a.serializer,u)})}}}}};var a;throw i.Bu(`Unsupported field value: ${jv(r)}`)}(n,e)}function WL(n,e){const t={};return Jk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oa(n,(r,i)=>{const s=yc(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function KL(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof En||n instanceof Hv||n instanceof Xs||n instanceof gn||n instanceof mc||n instanceof zv)}function vT(n,e,t){if(!KL(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=jv(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function _g(n,e,t){if((e=(0,Ft.Ku)(e))instanceof Go)return e._internalPath;if("string"==typeof e)return Wv(n,e);throw Kv("Field path arguments must be of type string or ",n,!1,void 0,t)}const TJ=new RegExp("[~\\*/\\[\\]]");function Wv(n,e,t){if(e.search(TJ)>=0)throw Kv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Go(...e.split("."))._internalPath}catch{throw Kv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kv(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ue(J.INVALID_ARGUMENT,a+n+u)}function QL(n,e){return n.some(t=>t.isEqual(e))}class yg{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new DJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class DJ extends yg{data(){return super.data()}}function Qv(n,e){return"string"==typeof e?Wv(n,e):e instanceof Go?e._internalPath:e._delegate._internalPath}function YL(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ue(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ET{}class vg extends ET{}function qa(n,e,...t){let r=[];e instanceof ET&&r.push(e),r=r.concat(t),function(s){const o=s.filter(u=>u instanceof uh).length,a=s.filter(u=>u instanceof Eg).length;if(o>1||o>0&&a>0)throw new ue(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Eg extends vg{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Eg(e,t,r)}_apply(e){const t=this._parse(e);return e2(e._query,t),new Rr(e.firestore,e.converter,vC(e._query,t))}_parse(e){const t=_c(e.firestore);return function(s,o,a,u,d,g,m){let v;if(d.isKeyField()){if("array-contains"===g||"array-contains-any"===g)throw new ue(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if("in"===g||"not-in"===g){ZL(m,g);const I=[];for(const b of m)I.push(XL(u,s,b));v={arrayValue:{values:I}}}else v=XL(u,s,m)}else"in"!==g&&"not-in"!==g&&"array-contains-any"!==g||ZL(m,g),v=qL(a,"where",m,"in"===g||"not-in"===g);return wt.create(d,g,v)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class uh extends ET{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Ht.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)e2(o,u),o=vC(o,u)}(e._query,t),new Rr(e.firestore,e.converter,vC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class IT extends vg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new IT(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new ue(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ue(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qp(s,o)}(e._query,this._field,this._direction);return new Rr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Bo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Yv extends vg{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Yv(e,t,r)}_apply(e){return new Rr(e.firestore,e.converter,pv(e._query,this._limit,this._limitType))}}class Jv extends vg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Jv(e,t,r)}_apply(e){const t=JL(e,this.type,this._docOrFields,this._inclusive);return new Rr(e.firestore,e.converter,(s=t,new Bo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Xv extends vg{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Xv(e,t,r)}_apply(e){const t=JL(e,this.type,this._docOrFields,this._inclusive);return new Rr(e.firestore,e.converter,(s=t,new Bo((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function JL(n,e,t,r){if(t[0]=(0,Ft.Ku)(t[0]),t[0]instanceof yg)return function(s,o,a,u,d){if(!u)throw new ue(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const g=[];for(const m of Vd(s))if(m.field.isKeyField())g.push(sc(o,u.key));else{const v=u.data.field(m.field);if(ov(v))throw new ue(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===v){const I=m.field.canonicalString();throw new ue(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}g.push(v)}return new Ua(g,d)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=_c(n.firestore);return function(o,a,u,d,g,m){const v=o.explicitOrderBy;if(g.length>v.length)throw new ue(J.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let b=0;b<g.length;b++){const S=g[b];if(v[b].field.isKeyField()){if("string"!=typeof S)throw new ue(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof S}`);if(!yC(o)&&-1!==S.indexOf("/"))throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${S}' contains a slash.`);const x=o.path.child(It.fromString(S));if(!Se.isDocumentKey(x))throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const q=new Se(x);I.push(sc(a,q))}else{const x=qL(u,d,S);I.push(x)}}return new Ua(I,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function XL(n,e,t){if("string"==typeof(t=(0,Ft.Ku)(t))){if(""===t)throw new ue(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yC(e)&&-1!==t.indexOf("/"))throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(It.fromString(t));if(!Se.isDocumentKey(r))throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sc(n,new Se(r))}if(t instanceof gn)return sc(n,t._key);throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jv(t)}.`)}function ZL(n,e){if(!Array.isArray(n)||0===n.length)throw new ue(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function e2(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ue(J.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class wT{convertValue(e,t="none"){switch(Fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return In(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ke()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Oa(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>In(o.doubleValue));return new zv(s)}convertGeoPoint(e){return new Hv(In(e.latitude),In(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=av(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($p(e));default:return null}}convertTimestamp(e){const t=Lo(e);return new En(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=It.fromString(e);Fe(dF(r));const i=new ka(r.get(1),r.get(3)),s=new Se(r.popFirst(5));return i.isEqual(t)||Wn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Zv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class VJ extends wT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}class vc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qo extends yg{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ig(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Qv("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ig extends qo{data(e={}){return super.data(e)}}class Wa{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ig(this._firestore,this._userDataWriter,r.key,r,new vc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Ig(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new Ig(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,g=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),g=o.indexOf(a.doc.key)),{type:LJ(a.type),doc:u,oldIndex:d,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function LJ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke()}}function n2(n,e){return n instanceof qo&&e instanceof qo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Wa&&e instanceof Wa&&n._firestore===e._firestore&&lT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ka extends wT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}function r2(n,e,t){n=mt(n,gn);const r=mt(n.firestore,Qt),i=Zv(n.converter,e,t);return ch(r,[qv(_c(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,wn.none())])}function i2(n,e,t,...r){n=mt(n,gn);const i=mt(n.firestore,Qt),s=_c(i);let o;return o="string"==typeof(e=(0,Ft.Ku)(e))||e instanceof Go?yT(s,"updateDoc",n._key,e,t,r):_T(s,"updateDoc",n._key,e),ch(i,[o.toMutation(n._key,wn.exists(!0))])}function s2(n,...e){var t,r,i;n=(0,Ft.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||dT(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(dT(e[o])){const m=e[o];e[o]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,d,g;if(n instanceof gn)d=mt(n.firestore,Qt),g=kd(n._key.path),u={next:m=>{e[o]&&e[o](AT(d,n,m))},error:e[o+1],complete:e[o+2]};else{const m=mt(n,Rr);d=mt(m.firestore,Qt),g=m._query;const v=new Ka(d);u={next:I=>{e[o]&&e[o](new Wa(d,v,m,I))},error:e[o+1],complete:e[o+2]},YL(n._query)}return function(v,I,b,S){const x=new Uv(S),q=new Tb(I,x,b);return v.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return Eb(yield ah(v),q)})),()=>{x.Za(),v.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return wb(yield ah(v),q)}))}}(An(d),g,a,u)}function ch(n,e){return function(r,i){const s=new mr;return r.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return function NY(n,e,t){return Ob.apply(this,arguments)}(yield aT(r),i,s)})),s.promise}(An(n),e)}function AT(n,e,t){const r=t.docs.get(e._key),i=new Ka(n);return new qo(n,i,e._key,r,new vc(t.hasPendingWrites,t.fromCache),e.converter)}const nX={maxAttempts:5};class o2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_c(e)}set(e,t,r){this._verifyNotCommitted();const i=Qa(e,this._firestore),s=Zv(i.converter,t,r),o=qv(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,wn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Qa(e,this._firestore);let o;return o="string"==typeof(t=(0,Ft.Ku)(t))||t instanceof Go?yT(this._dataReader,"WriteBatch.update",s._key,t,r,i):_T(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qa(e,this._firestore);return this._mutations=this._mutations.concat(new jd(t._key,wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ue(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qa(n,e){if((n=(0,Ft.Ku)(n)).firestore!==e)throw new ue(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class rX extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=_c(t)}get(t){const r=Qa(t,this._firestore),i=new VJ(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return ke();const o=s[0];if(o.isFoundDocument())return new yg(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new yg(this._firestore,i,r._key,null,r.converter);throw ke()})}set(t,r,i){const s=Qa(t,this._firestore),o=Zv(s.converter,r,i),a=qv(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Qa(t,this._firestore);let a;return a="string"==typeof(r=(0,Ft.Ku)(r))||r instanceof Go?yT(this._dataReader,"Transaction.update",o._key,r,i,s):_T(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Qa(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qa(e,this._firestore),r=new Ka(this._firestore);return super.get(e).then(i=>new qo(this._firestore,r,t._key,i._document,new vc(!1,!1),t.converter))}}function bT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function l2(){if(typeof Uint8Array>"u")throw new ue("unimplemented","Uint8Arrays are not available in this environment.")}function d2(){if(!function VK(){return typeof atob<"u"}())throw new ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Dd=Cd.SDK_VERSION,(0,Cd._registerComponent)(new wk.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Qt(new sK(r.getProvider("auth-internal")),new uK(r.getProvider("app-check-internal")),function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ue(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ka(d.options.projectId,g)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Cd.registerVersion)(xk,"4.7.3",e),(0,Cd.registerVersion)(xk,"4.7.3","esm2017")}();class wg{constructor(e){this._delegate=e}static fromBase64String(e){return d2(),new wg(Xs.fromBase64String(e))}static fromUint8Array(e){return l2(),new wg(Xs.fromUint8Array(e))}toBase64(){return d2(),this._delegate.toBase64()}toUint8Array(){return l2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function TT(n){return function fX(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class pX{enableIndexedDbPersistence(e,t){return function pJ(n,e){Bi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return $L(n,sh.provider,{build:r=>new eT(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function gJ(n){return hT.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function mJ(n){if(n._initialized&&!n._terminated)throw new ue(J.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Y.A)(function*(){try{yield(t=(0,Y.A)(function*(i){if(!qs.D())return Promise.resolve();const s=i+"main";yield qs.delete(s)}),function r(i){return t.apply(this,arguments)})(HC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class h2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ka||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Bi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function FL(n,e,t,r={}){var i;const s=(n=mt(n,pg))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=gr.MOCK_USER;else{a=(0,Ft.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new ue(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new gr(d)}n._authCredentials=new iK(new Mk(a,u))}}(this._delegate,e,t,r)}enableNetwork(){return function yJ(n){return function eJ(n){return n.asyncQueue.enqueue((0,Y.A)(function*(){const e=yield bL(n),t=yield TL(n);return e.setNetworkEnabled(!0),function(i){const s=Ae(i);return s.L_.delete(0),fg(s)}(t)}))}(An(n=mt(n,Qt)))}(this._delegate)}disableNetwork(){return function vJ(n){return function tJ(n){return n.asyncQueue.enqueue((0,Y.A)(function*(){const e=yield bL(n),t=yield TL(n);return e.setNetworkEnabled(!1),(r=(0,Y.A)(function*(s){const o=Ae(s);o.L_.add(0),yield Yd(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(An(n=mt(n,Qt)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ML("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _J(n){return function(t){const r=new mr;return t.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return function FY(n,e){return Ub.apply(this,arguments)}(yield aT(t),r)})),r.promise}(An(n=mt(n,Qt)))}(this._delegate)}onSnapshotsInSync(e){return function WJ(n,e){return function sJ(n,e){const t=new Uv(e);return n.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return i=yield ah(n),s=t,Ae(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return i=yield ah(n),s=t,void Ae(i).Y_.delete(s);var i,s}))}}(An(n=mt(n,Qt)),dT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new lh(this,LL(this._delegate,e))}catch(t){throw li(t,"collection()","Firestore.collection()")}}doc(e){try{return new rs(this,$v(this._delegate,e))}catch(t){throw li(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new di(this,function dJ(n,e){if(n=mt(n,pg),cT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ue(J.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Rr(n,null,(r=e,new Bo(It.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw li(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function iX(n,e,t){n=mt(n,Qt);const r=Object.assign(Object.assign({},nX),t);return function(s){if(s.maxAttempts<1)throw new ue(J.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new mr;return s.asyncQueue.enqueueAndForget((0,Y.A)(function*(){const d=yield function DL(n){return Bv(n).then(e=>e.datastore)}(s);new XY(s.asyncQueue,d,a,o,u).au()})),u.promise}(An(n),i=>e(new rX(n,i)),r)}(this._delegate,t=>e(new f2(this,t)))}batch(){return An(this._delegate),new p2(new o2(this._delegate,e=>ch(this._delegate,e)))}loadBundle(e){return function EJ(n,e){const t=An(n=mt(n,Qt)),r=new hJ;return function oJ(n,e,t,r){const i=function(o,a){let u;return u="string"==typeof o?GV().encode(o):o,g=function(g,m){if(g instanceof Uint8Array)return AL(g,m);if(g instanceof ArrayBuffer)return AL(new Uint8Array(g),m);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new YY(g,a);var g}(t,hg(e));n.asyncQueue.enqueueAndForget((0,Y.A)(function*(){!function KY(n,e,t){const r=Ae(n);var i;(i=(0,Y.A)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(b,S){const x=Ae(b),q=Kn(S.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",F=>x.Gr.getBundleMetadata(F,S.id)).then(F=>!!F&&F.createTime.compareTo(q)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(b=d).totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}),Promise.resolve(new Set);u._updateProgress(hL(d));const g=new bY(d,o.localStore,a.serializer);let m=yield a.Ua();for(;m;){const I=yield g.la(m);I&&u._updateProgress(I),m=yield a.Ua()}const v=yield g.complete();return yield zo(o,v.Ia,void 0),yield function(b,S){const x=Ae(b);return x.persistence.runTransaction("Save bundle","readwrite",q=>x.Gr.saveBundleMetadata(q,S))}(o.localStore,d),u._completeWith(v.progress),Promise.resolve(v.Pa)}catch(d){return Bi("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var b}),function s(o,a,u){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield aT(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function IJ(n,e){return function aJ(n,e){return n.asyncQueue.enqueue((0,Y.A)(function*(){return function(r,i){const s=Ae(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield oh(n),e)}))}(An(n=mt(n,Qt)),e).then(t=>t?new Rr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new di(this,t):null)}}class tE extends wT{constructor(e){super(),this.firestore=e}convertBytes(e){return new wg(new Xs(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return rs.forKey(t,this.firestore,null)}}class f2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new tE(e)}get(e){const t=Ic(e);return this._delegate.get(t).then(r=>new Ag(this._firestore,new qo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ic(e);return r?(bT("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Ic(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Ic(e);return this._delegate.delete(t),this}}class p2{constructor(e){this._delegate=e}set(e,t,r){const i=Ic(e);return r?(bT("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Ic(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Ic(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ec{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Ig(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Cg(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ec.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Ec(e,new tE(e),t),i.set(t,s)),s}}Ec.INSTANCES=new WeakMap;class rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tE(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new rs(t,new gn(t._delegate,r,new Se(e)))}static forKey(e,t,r){return new rs(t,new gn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new lh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new lh(this.firestore,LL(this._delegate,e))}catch(t){throw li(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ft.Ku)(e))instanceof gn&&UL(this._delegate,e)}set(e,t){t=bT("DocumentReference.set",t);try{return t?r2(this._delegate,e,t):r2(this._delegate,e)}catch(r){throw li(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?i2(this._delegate,e):i2(this._delegate,e,t,...r)}catch(i){throw li(i,"updateDoc()","DocumentReference.update()")}}delete(){return function GJ(n){return ch(mt(n.firestore,Qt),[new jd(n._key,wn.none())])}(this._delegate)}onSnapshot(...e){const t=g2(e),r=m2(e,i=>new Ag(this.firestore,new qo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return s2(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function BJ(n){n=mt(n,gn);const e=mt(n.firestore,Qt),t=An(e),r=new Ka(e);return function nJ(n,e){const t=new mr;return n.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return(r=(0,Y.A)(function*(s,o,a){try{const u=yield function(g,m){const v=Ae(g);return v.persistence.runTransaction("read document","readonly",I=>v.localDocuments.getDocument(I,m))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new ue(J.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=eh(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield oh(n),e,t);var r})),t.promise}(t,n._key).then(i=>new qo(e,r,n._key,i,new vc(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function jJ(n){n=mt(n,gn);const e=mt(n.firestore,Qt);return SL(An(e),n._key,{source:"server"}).then(t=>AT(e,n,t))}(this._delegate):function UJ(n){n=mt(n,gn);const e=mt(n.firestore,Qt);return SL(An(e),n._key).then(t=>AT(e,n,t))}(this._delegate),t.then(r=>new Ag(this.firestore,new qo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new rs(this.firestore,this._delegate.withConverter(e?Ec.getInstance(this.firestore,e):null))}}function li(n,e,t){return n.message=n.message.replace(e,t),n}function g2(n){for(const e of n)if("object"==typeof e&&!TT(e))return e;return{}}function m2(n,e){var t,r;let i;return i=TT(n[0])?n[0]:TT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Ag{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new rs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return n2(this._delegate,e._delegate)}}class Cg extends Ag{data(e){const t=this._delegate.data(e);return this._delegate._converter||function nK(n,e){n||ke()}(void 0!==t),t}}class di{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tE(e)}where(e,t,r){try{return new di(this.firestore,qa(this._delegate,function SJ(n,e,t){const r=e,i=Qv("where",n);return Eg._create(i,r,t)}(e,t,r)))}catch(i){throw li(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new di(this.firestore,qa(this._delegate,function RJ(n,e="asc"){const t=e,r=Qv("orderBy",n);return IT._create(r,t)}(e,t)))}catch(r){throw li(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new di(this.firestore,qa(this._delegate,function PJ(n){return kL("limit",n),Yv._create("limit",n,"F")}(e)))}catch(t){throw li(t,"limit()","Query.limit()")}}limitToLast(e){try{return new di(this.firestore,qa(this._delegate,function xJ(n){return kL("limitToLast",n),Yv._create("limitToLast",n,"L")}(e)))}catch(t){throw li(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new di(this.firestore,qa(this._delegate,function MJ(...n){return Jv._create("startAt",n,!0)}(...e)))}catch(t){throw li(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new di(this.firestore,qa(this._delegate,function NJ(...n){return Jv._create("startAfter",n,!1)}(...e)))}catch(t){throw li(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new di(this.firestore,qa(this._delegate,function OJ(...n){return Xv._create("endBefore",n,!1)}(...e)))}catch(t){throw li(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new di(this.firestore,qa(this._delegate,function kJ(...n){return Xv._create("endAt",n,!0)}(...e)))}catch(t){throw li(t,"endAt()","Query.endAt()")}}isEqual(e){return lT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function HJ(n){n=mt(n,Rr);const e=mt(n.firestore,Qt),t=An(e),r=new Ka(e);return function rJ(n,e){const t=new mr;return n.asyncQueue.enqueueAndForget((0,Y.A)(function*(){return(r=(0,Y.A)(function*(s,o,a){try{const u=yield xv(s,o,!0),d=new gL(o,u.Ts),g=d.ma(u.documents),m=d.applyChanges(g,!1);a.resolve(m.snapshot)}catch(u){const d=eh(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield oh(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Wa(e,r,n,i))}(this._delegate):"server"===e?.source?function zJ(n){n=mt(n,Rr);const e=mt(n.firestore,Qt),t=An(e),r=new Ka(e);return RL(t,n._query,{source:"server"}).then(i=>new Wa(e,r,n,i))}(this._delegate):function $J(n){n=mt(n,Rr);const e=mt(n.firestore,Qt),t=An(e),r=new Ka(e);return YL(n._query),RL(t,n._query).then(i=>new Wa(e,r,n,i))}(this._delegate),t.then(r=>new DT(this.firestore,new Wa(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=g2(e),r=m2(e,i=>new DT(this.firestore,new Wa(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return s2(this._delegate,t,r)}withConverter(e){return new di(this.firestore,this._delegate.withConverter(e?Ec.getInstance(this.firestore,e):null))}}class mX{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Cg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class DT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new di(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Cg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new mX(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Cg(this._firestore,r))})}isEqual(e){return n2(this._delegate,e._delegate)}}class lh extends di{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new rs(this.firestore,e):null}doc(e){try{return new rs(this.firestore,void 0===e?$v(this._delegate):$v(this._delegate,e))}catch(t){throw li(t,"doc()","CollectionReference.doc()")}}add(e){return function qJ(n,e){const t=mt(n.firestore,Qt),r=$v(n),i=Zv(n.converter,e);return ch(t,[qv(_c(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,wn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new rs(this.firestore,t))}isEqual(e){return UL(this._delegate,e._delegate)}withConverter(e){return new lh(this.firestore,this._delegate.withConverter(e?Ec.getInstance(this.firestore,e):null))}}function Ic(n){return mt(n,gn)}class ST{constructor(...e){this._delegate=new Go(...e)}static documentId(){return new ST(fn.keyField().canonicalString())}isEqual(e){return(e=(0,Ft.Ku)(e))instanceof Go&&this._delegate._internalPath.isEqual(e._internalPath)}}class wc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function oX(){return new fT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new wc(e)}static delete(){const e=function sX(){return new mg("deleteField")}();return e._methodName="FieldValue.delete",new wc(e)}static arrayUnion(...e){const t=function aX(...n){return new pT("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new wc(t)}static arrayRemove(...e){const t=function uX(...n){return new gT("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new wc(t)}static increment(e){const t=function cX(n){return new mT("increment",n)}(e);return t._methodName="FieldValue.increment",new wc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _X={Firestore:h2,GeoPoint:Hv,Timestamp:En,Blob:wg,Transaction:f2,WriteBatch:p2,DocumentReference:rs,DocumentSnapshot:Ag,Query:di,QueryDocumentSnapshot:Cg,QuerySnapshot:DT,CollectionReference:lh,FieldPath:ST,FieldValue:wc,setLogLevel:function gX(n){!function tK(n){xa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function _2(n,e){return function EX(n,e=sk){return new pt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function RT(n,e){return _2(n,e).pipe(le(t=>({payload:t,type:"query"})))}!function vX(n){(function yX(n,e){n.INTERNAL.registerComponent(new wk.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},_X)))})(n,(e,t)=>new h2(e,t,new pX)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Pa.A);class y2{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=C2(r,t);return new I2(i,s,this.afs)}snapshotChanges(){return function IX(n,e){return _2(n,e).pipe(Ny(void 0),rC(),le(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ui)}valueChanges(e={}){return this.snapshotChanges().pipe(le(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return C(this.ref.get(e)).pipe(Ui)}}function nE(n,e){return RT(n,e).pipe(Ny(void 0),rC(),le(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(m=>m.doc.ref.isEqual(a.ref)),g=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&g&&JSON.stringify(g.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function v2(n,e,t){return nE(n,t).pipe(ky((r,i)=>function wX(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function AX(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return PT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return PT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return PT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Lt(),le(r=>r.map(i=>({type:i.type,payload:i}))))}function PT(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function E2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class I2{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=nE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(le(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ny(void 0),rC(),ts(([r,i])=>i.length>0||!r),le(([,r])=>r),Ui)}auditTrail(e){return this.stateChanges(e).pipe(ky((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=E2(e);return v2(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ui)}valueChanges(e={}){return RT(this.query,this.afs.schedulers.outsideAngular).pipe(le(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ui)}get(e){return C(this.query.get(e)).pipe(Ui)}add(e){return this.ref.add(e)}doc(e){return new y2(this.ref.doc(e),this.afs)}}class CX{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?nE(this.query,this.afs.schedulers.outsideAngular).pipe(le(t=>t.filter(r=>e.indexOf(r.type)>-1)),ts(t=>t.length>0),Ui):nE(this.query,this.afs.schedulers.outsideAngular).pipe(Ui)}auditTrail(e){return this.stateChanges(e).pipe(ky((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=E2(e);return v2(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ui)}valueChanges(e={}){return RT(this.query,this.afs.schedulers.outsideAngular).pipe(le(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ui)}get(e){return C(this.query.get(e)).pipe(Ui)}}const w2=new ve("angularfire2.enableFirestorePersistence"),A2=new ve("angularfire2.firestore.persistenceSettings"),bX=new ve("angularfire2.firestore.settings"),TX=new ve("angularfire2.firestore.use-emulator");function C2(n,e=(t=>t)){return{query:e(n),ref:n}}let DX=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,d,g,m,v,I,b,S,x,q,F){this.schedulers=u;const W=nC(t,a,r),oe=g;m&&Ek(W,a,v,b,S,x,I,q),[this.firestore,this.persistenceEnabled$]=lk(`${W.name}.firestore`,"AngularFirestore",W.name,()=>{const Ee=a.runOutsideAngular(()=>W.firestore());if(s&&Ee.settings(s),oe&&Ee.useEmulator(...oe),i&&!Sy(o)){const Ue=()=>{try{return C(Ee.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(V){return typeof console<"u"&&console.warn(V),k(!1)}};return[Ee,a.runOutsideAngular(Ue)]}return[Ee,k(!1)]},[s,oe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=C2(i,r),a=this.schedulers.ngZone.run(()=>s);return new I2(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new CX(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new y2(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(ye(Zy),ye(ev,8),ye(w2,8),ye(bX,8),ye(Vs),ye(Bt),ye(uk),ye(A2,8),ye(TX,8),ye(Ik,8),ye(pk,8),ye(gk,8),ye(mk,8),ye(_k,8),ye(yk,8),ye(vk,8),ye(ok,8))};static \u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),SX=(()=>{class n{constructor(){Pa.A.registerVersion("angularfire",tC.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:w2,useValue:!0},{provide:A2,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ri({type:n});static \u0275inj=dr({providers:[DX]})}return n})();const b2_firebase={apiKey:"AIzaSyDWOb8hpZ7JQcpPzpcNw6SW53_pG0V5UE0",authDomain:"wedding-29b48.firebaseapp.com",projectId:"wedding-29b48",storageBucket:"wedding-29b48.firebasestorage.app",messagingSenderId:"807343676966",appId:"1:807343676966:web:1c21870a5ee2dfbae790e7",measurementId:"YOUR_MEASUREMENT_ID"};let T2=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(ge(To),ge(Oi))}}static{this.\u0275dir=Ye({type:n})}}return n})(),Ac=(()=>{class n extends T2{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Gn(n)))(i||n)}}()}static{this.\u0275dir=Ye({type:n,features:[jt]})}}return n})();const Zs=new ve("NgValueAccessor"),xX={provide:Zs,useExisting:Nt(()=>rE),multi:!0},NX=new ve("CompositionEventMode");let rE=(()=>{class n extends T2{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function MX(){const n=ba()?ba().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(ge(To),ge(Oi),ge(NX,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&sn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[vn([xX]),jt]})}}return n})();const Kr=new ve("NgValidators"),Ja=new ve("NgAsyncValidators");function F2(n){return null!=n}function L2(n){return np(n)?C(n):n}function U2(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function B2(n,e){return e.map(t=>t(n))}function j2(n){return n.map(e=>function kX(n){return!n.validate}(e)?e:t=>e.validate(t))}function xT(n){return null!=n?function $2(n){if(!n)return null;const e=n.filter(F2);return 0==e.length?null:function(t){return U2(B2(t,e))}}(j2(n)):null}function MT(n){return null!=n?function H2(n){if(!n)return null;const e=n.filter(F2);return 0==e.length?null:function(t){return function RX(...n){const e=os(n),{args:t,keys:r}=QO(n),i=new pt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let u=o,d=o;for(let g=0;g<o;g++){let m=!1;jn(t[g]).subscribe(Q(s,v=>{m||(m=!0,d--),a[g]=v},()=>u--,void 0,()=>{(!u||!m)&&(d||s.next(r?JO(r,a):a),s.complete())}))}});return e?i.pipe(YO(e)):i}(B2(t,e).map(L2)).pipe(le(U2))}}(j2(n)):null}function z2(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function NT(n){return n?Array.isArray(n)?n:[n]:[]}function sE(n,e){return Array.isArray(n)?n.includes(e):n===e}function W2(n,e){const t=NT(e);return NT(n).forEach(i=>{sE(t,i)||t.push(i)}),t}function K2(n,e){return NT(e).filter(t=>!sE(n,t))}class Q2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=MT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class hi extends Q2{get formDirective(){return null}get path(){return null}}class Xa extends Q2{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Y2{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let J2=(()=>{class n extends Y2{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ge(Xa,2))}}static{this.\u0275dir=Ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&wa("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[jt]})}}return n})(),X2=(()=>{class n extends Y2{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ge(hi,10))}}static{this.\u0275dir=Ye({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&wa("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[jt]})}}return n})();const bg="VALID",aE="INVALID",dh="PENDING",Tg="DISABLED";function VT(n){return(uE(n)?n.validators:n)||null}function FT(n,e){return(uE(e)?e.asyncValidators:n)||null}function uE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class LT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===bg}get invalid(){return this.status===aE}get pending(){return this.status==dh}get disabled(){return this.status===Tg}get enabled(){return this.status!==Tg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(W2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(W2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(K2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(K2(e,this._rawAsyncValidators))}hasValidator(e){return sE(this._rawValidators,e)}hasAsyncValidator(e){return sE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=dh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Tg,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=bg,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bg||this.status===dh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Tg:bg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=dh,this._hasOwnPendingAsyncValidator=!0;const t=L2(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new On,this.statusChanges=new On}_calculateStatus(){return this._allControlsDisabled()?Tg:this.errors?aE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dh)?dh:this._anyControlsHaveStatus(aE)?aE:bg}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){uE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function UX(n){return Array.isArray(n)?xT(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function BX(n){return Array.isArray(n)?MT(n):n||null}(this._rawAsyncValidators)}}class UT extends LT{constructor(e,t,r){super(VT(t),FT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function tU(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new de(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function eU(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new de(1e3,"");if(!r[t])throw new de(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const hh=new ve("CallSetDisabledState",{providedIn:"root",factory:()=>cE}),cE="always";function Dg(n,e,t=cE){BT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function HX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&nU(n,e)})}(n,e),function GX(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function zX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&nU(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function $X(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function hE(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function BT(n,e){const t=function G2(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(z2(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function q2(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(z2(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();hE(e._rawValidators,i),hE(e._rawAsyncValidators,i)}function nU(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const YX={provide:hi,useExisting:Nt(()=>pE)},Sg=(()=>Promise.resolve())();let pE=(()=>{class n extends hi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new On,this.form=new UT({},xT(t),MT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Sg.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Dg(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Sg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Sg.then(()=>{const r=this._findContainer(t.path),i=new UT({});(function rU(n,e){BT(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Sg.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Sg.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function iU(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(ge(Kr,10),ge(Ja,10),ge(hh,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&sn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vn([YX]),jt]})}}return n})();function sU(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function oU(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const aU=class extends LT{constructor(e=null,t,r){super(VT(t),FT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),uE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=oU(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){sU(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){sU(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){oU(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},ZX={provide:Xa,useExisting:Nt(()=>zT)},lU=(()=>Promise.resolve())();let zT=(()=>{class n extends Xa{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new aU,this._registered=!1,this.name="",this.update=new On,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function HT(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===rE?t=s:function KX(n){return Object.getPrototypeOf(n.constructor)===Ac}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function $T(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Dg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){lU.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&dd(r);lU.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function lE(n,e){return[...e.path,n]}(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(ge(hi,9),ge(Kr,10),ge(Ja,10),ge(Zs,10),ge(hy,8),ge(hh,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[vn([ZX]),jt,vi]})}}return n})(),dU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),fU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({})}}return n})(),AZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({imports:[fU]})}}return n})(),bZ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:hh,useValue:t.callSetDisabledState??cE}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({imports:[AZ]})}}return n})();class gE{}class mE{}class eo{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof eo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new eo;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof eo?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class TZ{encodeKey(e){return xU(e)}encodeValue(e){return xU(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const SZ=/%(\d[a-f0-9])/gi,RZ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xU(n){return encodeURIComponent(n).replace(SZ,(e,t)=>RZ[t]??e)}function _E(n){return`${n}`}class Za{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new TZ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function DZ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(_E):[_E(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Za({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(_E(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(_E(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class PZ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function MU(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function NU(n){return typeof Blob<"u"&&n instanceof Blob}function OU(n){return typeof FormData<"u"&&n instanceof FormData}class Rg{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function xZ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new eo),this.context||(this.context=new PZ),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Za,this.urlWithParams=t}serializeBody(){return null===this.body?null:MU(this.body)||NU(this.body)||OU(this.body)||function MZ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Za?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||OU(this.body)?null:NU(this.body)?this.body.type||null:MU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Za?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,d=e.params||this.params;const g=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),d)),new Rg(t,r,s,{params:d,headers:u,context:g,reportProgress:a,responseType:i,withCredentials:o})}}var fh=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(fh||{});class JT{constructor(e,t=200,r="OK"){this.headers=e.headers||new eo,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class XT extends JT{constructor(e={}){super(e),this.type=fh.ResponseHeader}clone(e={}){return new XT({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ph extends JT{constructor(e={}){super(e),this.type=fh.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ph({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class kU extends JT{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ZT(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let VU=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Rg)s=t;else{let u,d;u=i.headers instanceof eo?i.headers:new eo(i.headers),i.params&&(d=i.params instanceof Za?i.params:new Za({fromObject:i.params})),s=new Rg(t,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=k(s).pipe(pd(u=>this.handler.handle(u)));if(t instanceof Rg||"events"===i.observe)return o;const a=o.pipe(ts(u=>u instanceof ph));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(le(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(le(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(le(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(le(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Za).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,ZT(i,r))}post(t,r,i={}){return this.request("POST",t,ZT(i,r))}put(t,r,i={}){return this.request("PUT",t,ZT(i,r))}static{this.\u0275fac=function(r){return new(r||n)(ye(gE))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();function UU(n,e){return e(n)}function OZ(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const VZ=new ve(""),Pg=new ve(""),BU=new ve("");function FZ(){let n=null;return(e,t)=>{null===n&&(n=(xe(VZ,{optional:!0})??[]).reduceRight(OZ,UU));const r=xe(uy),i=r.add();return n(e,t).pipe(vp(()=>r.remove(i)))}}let jU=(()=>{class n extends gE{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=xe(uy)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Pg),...this.injector.get(BU,[])]));this.chain=i.reduceRight((s,o)=>function kZ(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),UU)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(vp(()=>this.pendingTasks.remove(r)))}static{this.\u0275fac=function(r){return new(r||n)(ye(mE),ye(Ni))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();const jZ=/^\)\]\}',?\n/;let HU=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new de(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?C(r.\u0275loadImpl()):k(null)).pipe(De(()=>new pt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((S,x)=>o.setRequestHeader(S,x.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const S=t.detectContentTypeHeader();null!==S&&o.setRequestHeader("Content-Type",S)}if(t.responseType){const S=t.responseType.toLowerCase();o.responseType="json"!==S?S:"text"}const a=t.serializeBody();let u=null;const d=()=>{if(null!==u)return u;const S=o.statusText||"OK",x=new eo(o.getAllResponseHeaders()),q=function $Z(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return u=new XT({headers:x,status:o.status,statusText:S,url:q}),u},g=()=>{let{headers:S,status:x,statusText:q,url:F}=d(),W=null;204!==x&&(W=typeof o.response>"u"?o.responseText:o.response),0===x&&(x=W?200:0);let oe=x>=200&&x<300;if("json"===t.responseType&&"string"==typeof W){const Ee=W;W=W.replace(jZ,"");try{W=""!==W?JSON.parse(W):null}catch(Ue){W=Ee,oe&&(oe=!1,W={error:Ue,text:W})}}oe?(s.next(new ph({body:W,headers:S,status:x,statusText:q,url:F||void 0})),s.complete()):s.error(new kU({error:W,headers:S,status:x,statusText:q,url:F||void 0}))},m=S=>{const{url:x}=d(),q=new kU({error:S,status:o.status||0,statusText:o.statusText||"Unknown Error",url:x||void 0});s.error(q)};let v=!1;const I=S=>{v||(s.next(d()),v=!0);let x={type:fh.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(x.total=S.total),"text"===t.responseType&&o.responseText&&(x.partialText=o.responseText),s.next(x)},b=S=>{let x={type:fh.UploadProgress,loaded:S.loaded};S.lengthComputable&&(x.total=S.total),s.next(x)};return o.addEventListener("load",g),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),t.reportProgress&&(o.addEventListener("progress",I),null!==a&&o.upload&&o.upload.addEventListener("progress",b)),o.send(a),s.next({type:fh.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",g),o.removeEventListener("timeout",m),t.reportProgress&&(o.removeEventListener("progress",I),null!==a&&o.upload&&o.upload.removeEventListener("progress",b)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(ye(DO))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();const eD=new ve("XSRF_ENABLED"),zU=new ve("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),GU=new ve("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class qU{}let GZ=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=_O(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(ye(Fi),ye(Vs),ye(zU))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac})}}return n})();function qZ(n,e){const t=n.url.toLowerCase();if(!xe(eD)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=xe(qU).getToken(),i=xe(GU);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var eu=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(eu||{});function bc(n,e){return{\u0275kind:n,\u0275providers:e}}function WZ(...n){const e=[VU,HU,jU,{provide:gE,useExisting:jU},{provide:mE,useExisting:HU},{provide:Pg,useValue:qZ,multi:!0},{provide:eD,useValue:!0},{provide:qU,useClass:GZ}];for(const t of n)e.push(...t.\u0275providers);return function vw(n){return{\u0275providers:n}}(e)}const WU=new ve("LEGACY_INTERCEPTOR_FN");let QZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n})}static{this.\u0275inj=dr({providers:[WZ(bc(eu.LegacyInterceptors,[{provide:WU,useFactory:FZ},{provide:Pg,useExisting:WU,multi:!0}]))]})}}return n})();const KU=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},nD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,d=u?n[i+2]:0;let v=(15&a)<<2|d>>6,I=63&d;u||(I=64,o||(v=64)),r.push(t[s>>2],t[(3&s)<<4|a>>4],t[v],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(KU(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const m=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==a||null==d||null==m)throw new iee;r.push(s<<2|a>>4),64!==d&&(r.push(a<<4&240|d>>2),64!==m&&r.push(d<<6&192|m))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class iee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vE=function(n){return function(n){const e=KU(n);return nD.encodeByteArray(e,!0)}(n).replace(/\./g,"")};function YU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const EE=()=>{try{return YU().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&function(n){try{return nD.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},JU=()=>{var n;return null===(n=EE())||void 0===n?void 0:n.config};class gh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function iD(){try{return"object"==typeof indexedDB}catch{return!1}}class xg extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,xg.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sD.prototype.create)}}class sD{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function gee(n,e){return n.replace(mee,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new xg(i,`${this.serviceName}: ${o} (${i}).`,r)}}const mee=/\{\$([^}]+)}/g;function oD(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(ZU(s)&&ZU(o)){if(!oD(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function ZU(n){return null!==n&&"object"==typeof n}const vee=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=16*Math.random()|0;return("x"===n?e:3&e|8).toString(16)})};class mh{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Tc="[DEFAULT]";class Dee{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new gh;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Ree(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Tc})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Tc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,Y.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Tc){return this.instances.has(e)}getOptions(e=Tc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Tc?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Tc){return this.component?this.component.multipleInstances?e:Tc:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Pee{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Dee(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const cD=[];var mn=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(mn||{});const eB={debug:mn.DEBUG,verbose:mn.VERBOSE,info:mn.INFO,warn:mn.WARN,error:mn.ERROR,silent:mn.SILENT},xee=mn.INFO,Mee={[mn.DEBUG]:"log",[mn.VERBOSE]:"log",[mn.INFO]:"info",[mn.WARN]:"warn",[mn.ERROR]:"error"},Nee=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=Mee[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class tB{constructor(e){this.name=e,this._logLevel=xee,this._logHandler=Nee,this._userLogHandler=null,cD.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?eB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mn.DEBUG,...e),this._logHandler(this,mn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mn.VERBOSE,...e),this._logHandler(this,mn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mn.INFO,...e),this._logHandler(this,mn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mn.WARN,...e),this._logHandler(this,mn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mn.ERROR,...e),this._logHandler(this,mn.ERROR,...e)}}var Oee=Xe(749);class kee{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function Vee(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const AE="@firebase/app",lD="0.10.17",Wo=new tB("@firebase/app"),CE="[DEFAULT]",cte={[AE]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Dc=new Map,Mg=new Map,Ng=new Map;function nB(n,e){try{n.container.addComponent(e)}catch(t){Wo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Og(n){const e=n.name;if(Ng.has(e))return Wo.debug(`There were multiple attempts to register component ${e}.`),!1;Ng.set(e,n);for(const t of Dc.values())nB(t,n);for(const t of Mg.values())nB(t,n);return!0}function dD(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const is=new sD("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class rB{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}function iB(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:CE,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw is.create("bad-app-name",{appName:String(i)});if(t||(t=JU()),!t)throw is.create("no-options");const s=Dc.get(i);if(s){if(oD(t,s.options)&&oD(r,s.config))return s;throw is.create("duplicate-app",{appName:i})}const o=new Pee(i);for(const u of Ng.values())o.addComponent(u);const a=new rB(t,r,o);return Dc.set(i,a),a}function _h(n,e,t){var r;let i=null!==(r=cte[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Wo.warn(a.join(" "))}Og(new mh(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const gte="firebase-heartbeat-database",mte=1,kg="firebase-heartbeat-store";let fD=null;function sB(){return fD||(fD=(0,Oee.P2)(gte,mte,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(kg)}catch(t){console.warn(t)}}}).catch(n=>{throw is.create("idb-open",{originalErrorMessage:n.message})})),fD}function pD(){return(pD=(0,Y.A)(function*(n){try{const t=(yield sB()).transaction(kg),r=yield t.objectStore(kg).get(aB(n));return yield t.done,r}catch(e){if(e instanceof xg)Wo.warn(e.message);else{const t=is.create("idb-get",{originalErrorMessage:e?.message});Wo.warn(t.message)}}})).apply(this,arguments)}function oB(n,e){return gD.apply(this,arguments)}function gD(){return(gD=(0,Y.A)(function*(n,e){try{const r=(yield sB()).transaction(kg,"readwrite");yield r.objectStore(kg).put(e,aB(n)),yield r.done}catch(t){if(t instanceof xg)Wo.warn(t.message);else{const r=is.create("idb-set",{originalErrorMessage:t?.message});Wo.warn(r.message)}}})).apply(this,arguments)}function aB(n){return`${n.name}!${n.options.appId}`}class Ete{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wte(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,Y.A)(function*(){var t,r;try{const s=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=uB();return null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(e._heartbeatsCache=yield e._heartbeatsCachePromise,null==(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats))||e._heartbeatsCache.lastSentHeartbeatDate===o||e._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(e._heartbeatsCache.heartbeats.push({date:o,agent:s}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache))}catch(i){Wo.warn(i)}})()}getHeartbeatsHeader(){var e=this;return(0,Y.A)(function*(){var t;try{if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=uB(),{heartbeatsToSend:i,unsentEntries:s}=function Ite(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cB(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),cB(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),o=vE(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(e._heartbeatsCache.heartbeats=s,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o}catch(r){return Wo.warn(r),""}})()}}function uB(){return(new Date).toISOString().substring(0,10)}class wte{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,Y.A)(function*(){return!!iD()&&function fee(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,Y.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function _te(n){return pD.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,Y.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return oB(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,Y.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return oB(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function cB(n){return vE(JSON.stringify({version:2,heartbeats:n})).length}!function Ate(n){Og(new mh("platform-logger",e=>new kee(e),"PRIVATE")),Og(new mh("heartbeat",e=>new Ete(e),"PRIVATE")),_h(AE,lD,n),_h(AE,lD,"esm2017"),_h("fire-js","")}(""),_h("firebase","11.1.0","app");const mD=new Map,lB={activated:!1,tokenObservers:[]},Tte={initialized:!1,enabled:!1};function Fn(n){return mD.get(n)||Object.assign({},lB)}function bE(){return Tte}const _D="https://content-firebaseappcheck.googleapis.com/v1",Pte="exchangeDebugToken",dB={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Mte{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Y.A)(function*(){t.stop();try{t.pending=new gh,t.pending.promise.catch(r=>{}),yield function Nte(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new gh,t.pending.promise.catch(r=>{}),yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Pr=new sD("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function TE(n=!1){var e;return n?null===(e=self.grecaptcha)||void 0===e?void 0:e.enterprise:self.grecaptcha}function yD(n){if(!Fn(n).activated)throw Pr.create("use-before-activation",{appName:n.name})}function vD(n){const e=Math.round(n/1e3),t=Math.floor(e/86400),r=Math.floor((e-3600*t*24)/3600),i=Math.floor((e-3600*t*24-3600*r)/60),s=e-3600*t*24-3600*r-60*i;let o="";return t&&(o+=DE(t)+"d:"),r&&(o+=DE(r)+"h:"),o+=DE(i)+"m:"+DE(s)+"s",o}function DE(n){return 0===n?"00":n>=10?n.toString():"0"+n}function SE(n,e){return ED.apply(this,arguments)}function ED(){return(ED=(0,Y.A)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const m=yield i.getHeartbeatsHeader();m&&(r["X-Firebase-Client"]=m)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(n,s)}catch(m){throw Pr.create("fetch-network-error",{originalErrorMessage:m?.message})}if(200!==o.status)throw Pr.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(m){throw Pr.create("fetch-parse-error",{originalErrorMessage:m?.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Pr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const d=1e3*Number(u[1]),g=Date.now();return{token:a.token,expireTimeMillis:g+d,issuedAtTimeMillis:g}})).apply(this,arguments)}function hB(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${_D}/projects/${t}/apps/${r}:${Pte}?key=${i}`,body:{debug_token:e}}}const Fte="firebase-app-check-database",Lte=1,Vg="firebase-app-check-store",fB="debug-token";let RE=null;function pB(){return RE||(RE=new Promise((n,e)=>{try{const t=indexedDB.open(Fte,Lte);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Pr.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Vg,{keyPath:"compositeKey"})}}catch(t){e(Pr.create("storage-open",{originalErrorMessage:t?.message}))}}),RE)}function gB(n,e){return ID.apply(this,arguments)}function ID(){return(ID=(0,Y.A)(function*(n,e){const r=(yield pB()).transaction(Vg,"readwrite"),s=r.objectStore(Vg).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var d;a(Pr.create("storage-set",{originalErrorMessage:null===(d=u.target.error)||void 0===d?void 0:d.message}))}})})).apply(this,arguments)}function mB(n){return wD.apply(this,arguments)}function wD(){return(wD=(0,Y.A)(function*(n){const t=(yield pB()).transaction(Vg,"readonly"),i=t.objectStore(Vg).get(n);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},t.onerror=a=>{var u;o(Pr.create("storage-get",{originalErrorMessage:null===(u=a.target.error)||void 0===u?void 0:u.message}))}})})).apply(this,arguments)}function _B(n){return`${n.options.appId}-${n.name}`}const Fg=new tB("@firebase/app-check");function AD(){return(AD=(0,Y.A)(function*(n){if(iD()){let e;try{e=yield function Ute(n){return mB(_B(n))}(n)}catch(t){Fg.warn(`Failed to read token from IndexedDB. Error: ${t}`)}return e}})).apply(this,arguments)}function CD(n,e){return iD()?function Bte(n,e){return gB(_B(n),e)}(n,e).catch(t=>{Fg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function bD(){return(bD=(0,Y.A)(function*(){let n;try{n=yield function $te(){return mB(fB)}()}catch{}if(n)return n;{const e=vee();return function jte(n){return gB(fB,n)}(e).catch(t=>Fg.warn(`Failed to persist debug token to IndexedDB. Error: ${t}`)),e}})).apply(this,arguments)}function TD(){return bE().enabled}function DD(){return SD.apply(this,arguments)}function SD(){return(SD=(0,Y.A)(function*(){const n=bE();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const qte={error:"UNKNOWN_ERROR"};function Wte(n){return nD.encodeString(JSON.stringify(n),!1)}function PE(n){return RD.apply(this,arguments)}function RD(){return(RD=(0,Y.A)(function*(n,e=!1){const t=n.app;yD(t);const r=Fn(t);let s,i=r.token;if(i&&!yh(i)&&(r.token=void 0,i=void 0),!i){const u=yield r.cachedTokenPromise;u&&(yh(u)?i=u:yield CD(t,void 0))}if(!e&&i&&yh(i))return{token:i.token};let a,o=!1;if(TD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=SE(hB(t,yield DD()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=yield r.exchangeTokenPromise;return yield CD(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Fn(t).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?Fg.warn(u.message):Fg.error(u),s=u}return i?s?a=yh(i)?{token:i.token,internalError:s}:IB(s):(a={token:i.token},r.token=i,yield CD(t,i)):a=IB(s),o&&EB(t,a),a})).apply(this,arguments)}function yB(n){return PD.apply(this,arguments)}function PD(){return(PD=(0,Y.A)(function*(n){const e=n.app;yD(e);const{provider:t}=Fn(e);if(TD()){const r=yield DD(),{token:i}=yield SE(hB(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function xD(n,e,t,r){const{app:i}=n,s=Fn(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&yh(s.token)){const a=s.token;Promise.resolve().then(()=>{t({token:a.token}),vB(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>vB(n))}function MD(n,e){const t=Fn(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function vB(n){const{app:e}=n,t=Fn(e);let r=t.tokenRefresher;r||(r=function Kte(n){const{app:e}=n;return new Mte((0,Y.A)(function*(){let r;if(r=Fn(e).token?yield PE(n,!0):yield PE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Fn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},dB.RETRIAL_MIN_WAIT,dB.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function EB(n,e){const t=Fn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function yh(n){return n.expireTimeMillis-Date.now()>0}function IB(n){return{token:Wte(qte),error:n}}class Qte{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Fn(this.app);for(const t of e)MD(this.app,t.next);return Promise.resolve()}}function nne(n,e){const t=new gh;Fn(n).reCAPTCHAState={initialized:t};const i=function wB(n){const e=`fire_app_check_${n.name}`,t=document.createElement("div");return t.id=e,t.style.display="none",document.body.appendChild(t),e}(n),s=TE(!1);return s?xE(n,e,s,i,t):function sne(n){const e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js",e.onload=n,document.head.appendChild(e)}(()=>{const o=TE(!1);if(!o)throw new Error("no recaptcha");xE(n,e,o,i,t)}),t.promise}function xE(n,e,t,r,i){t.ready(()=>{(function ine(n,e,t,r){const i=t.render(r,{sitekey:e,size:"invisible",callback:()=>{Fn(n).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Fn(n).reCAPTCHAState.succeeded=!1}}),s=Fn(n);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})})(n,e,t,r),i.resolve(t)})}function AB(n){return ND.apply(this,arguments)}function ND(){return(ND=(0,Y.A)(function*(n){yD(n);const t=yield Fn(n).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Fn(n).reCAPTCHAState;t.ready(()=>{r(t.execute(s.widgetId,{action:"fire_app_check"}))})})})).apply(this,arguments)}class OD{constructor(e){this._siteKey=e,this._throttleData=null}getToken(){var e=this;return(0,Y.A)(function*(){var t,r,i;!function DB(n){if(n&&Date.now()-n.allowRequestsAfter<=0)throw Pr.create("throttled",{time:vD(n.allowRequestsAfter-Date.now()),httpStatus:n.httpStatus})}(e._throttleData);const s=yield AB(e._app).catch(a=>{throw Pr.create("recaptcha-error")});if(null===(t=Fn(e._app).reCAPTCHAState)||void 0===t||!t.succeeded)throw Pr.create("recaptcha-error");let o;try{o=yield SE(function kte(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${_D}/projects/${t}/apps/${r}:exchangeRecaptchaV3Token?key=${i}`,body:{recaptcha_v3_token:e}}}(e._app,s),e._heartbeatServiceProvider)}catch(a){throw null!==(r=a.code)&&void 0!==r&&r.includes("fetch-status-error")?(e._throttleData=function TB(n,e){if(404===n||403===n)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:n};{const t=e?e.backoffCount:0,r=function Cee(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}(t,1e3,2);return{backoffCount:t+1,allowRequestsAfter:Date.now()+r,httpStatus:n}}}(Number(null===(i=a.customData)||void 0===i?void 0:i.httpStatus),e._throttleData),Pr.create("throttled",{time:vD(e._throttleData.allowRequestsAfter-Date.now()),httpStatus:e._throttleData.httpStatus})):a}return e._throttleData=null,o})()}initialize(e){this._app=e,this._heartbeatServiceProvider=dD(e,"heartbeat"),nne(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof OD&&this._siteKey===e._siteKey}}function ane(n=function fte(n=CE){const e=Dc.get(n);if(!e&&n===CE&&JU())return iB();if(!e)throw is.create("no-app",{appName:n});return e}(),e){const t=dD(n=function Tee(n){return n&&n._delegate?n._delegate:n}(n),"app-check");if(bE().initialized||function Gte(){const n=YU(),e=bE();if(e.initialized=!0,"string"!=typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==n.FIREBASE_APPCHECK_DEBUG_TOKEN)return;e.enabled=!0;const t=new gh;e.token=t,t.resolve("string"==typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN?n.FIREBASE_APPCHECK_DEBUG_TOKEN:function zte(){return bD.apply(this,arguments)}())}(),TD()&&DD().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(s.isTokenAutoRefreshEnabled===e.isTokenAutoRefreshEnabled&&s.provider.isEqual(e.provider))return i;throw Pr.create("already-initialized",{appName:n.name})}const r=t.initialize({options:e});return function une(n,e,t){const r=function Dte(n,e){return mD.set(n,e),mD.get(n)}(n,Object.assign({},lB));r.activated=!0,r.provider=e,r.cachedTokenPromise=function Hte(n){return AD.apply(this,arguments)}(n).then(i=>(i&&yh(i)&&(r.token=i,EB(n,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=void 0===t?n.automaticDataCollectionEnabled:t,r.provider.initialize(n)}(n,e.provider,e.isTokenAutoRefreshEnabled),Fn(n).isTokenAutoRefreshEnabled&&xD(r,"INTERNAL",()=>{}),r}const SB="app-check-internal";!function lne(){Og(new mh("app-check",n=>function Yte(n,e){return new Qte(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(SB).initialize()})),Og(new mh(SB,n=>function Jte(n){return{getToken:e=>PE(n,e),getLimitedUseToken:()=>yB(n),addTokenListener:e=>xD(n,"INTERNAL",e),removeTokenListener:e=>MD(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),_h("@firebase/app-check","0.8.10")}();let dne=(()=>{class n{constructor(){this.target=new Date(2025,6,19,12,30),this.updateTimeDifference(),this.intervalId=setInterval(()=>{this.updateTimeDifference()},1e3)}updateTimeDifference(){const t=new Date(Date.now()),r=this.target.getTime()-t.getTime();r<=0?(clearInterval(this.intervalId),this.remDays=this.remHours=this.remMinutes=this.remSeconds=0):this.calculateDifference(r)}calculateDifference(t){try{this.remDays=Math.floor(t/864e5),t%=864e5,this.remHours=Math.floor(t/36e5),t%=36e5,this.remMinutes=Math.floor(t/6e4),t%=6e4,this.remSeconds=Math.floor(t/1e3)}catch(r){console.log("Error in calculateDifference",r)}}ngOnDestroy(){clearInterval(this.intervalId)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-timer"]],decls:3,vars:4,consts:[[1,"container"],[1,"clock"]],template:function(r,i){1&r&&(fe(0,"div",0)(1,"div",1),Ce(2),_e()()),2&r&&(bt(2),gA("",i.remDays," days, ",i.remHours," hrs ",i.remMinutes," min ",i.remSeconds," sec."))},styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;height:70px;width:50vw;background-color:#96a498;color:#fff;font-size:26px;padding-left:2em}@media (max-width: 1000px){.container[_ngcontent-%COMP%]{height:60px;font-size:20px}}@media (max-width: 800px){.container[_ngcontent-%COMP%]{height:50px;font-size:18px}}@media (max-width: 600px){.container[_ngcontent-%COMP%]{height:40px;width:45vw;font-size:12px;padding-left:1.5em}}@media (max-width: 450px){.container[_ngcontent-%COMP%]{height:30px;font-size:10px;padding-left:1em}}@media (max-width: 400px){.container[_ngcontent-%COMP%]{height:25px;padding-left:1em}}"]})}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hne(n,e){if(1&n){const t=Ea();fe(0,"div",35),sn("click",function(){return sr(t),Ar(ar().hideImage())}),tr(1,"img",36),_e()}if(2&n){const t=ar();bt(1),rn("src",t.enlargedImageSrc,va)}}let fne=(()=>{class n{constructor(){this.timer=new dne,this.isImageVisible=!1,this.enlargedImageSrc=""}showImage(t){this.enlargedImageSrc=t.src,this.isImageVisible=!0}hideImage(){this.isImageVisible=!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-home"]],decls:62,vars:2,consts:[[1,"container"],[1,"welcome-text"],[1,"time-and-place"],[1,"dot"],[1,"our-story"],[1,"our-story-headline"],[1,"our-story-text"],[1,"collage-container"],[1,"collage-item-1",3,"click"],["src","assets/images/ratio1-1/picture5-1_1.jpg"],["collageItem1",""],[1,"overlay-text-1_1"],[1,"collage-item-2",3,"click"],["src","assets/images/ratio1-1/picture12-1_1.jpg"],["collageItem2",""],[1,"collage-item-3",3,"click"],["src","assets/images/ratio9-16/picture10-9_16.jpg"],["collageItem3",""],[1,"overlay-text-9_16"],[1,"collage-item-4",3,"click"],["src","assets/images/ratio9-16/picture6-9_16.jpg"],["collageItem4",""],[1,"collage-item-5",3,"click"],["src","assets/images/ratio9-16/picture18-9_16.jpg"],["collageItem5",""],[1,"collage-item-6",3,"click"],["src","assets/images/ratio9-16/picture17-9_16.jpg"],["collageItem6",""],[1,"collage-item-7",3,"click"],["src","assets/images/ratio1-1/picture8-1_1.jpg"],["collageItem7",""],[1,"collage-item-8",3,"click"],["src","assets/images/ratio1-1/picture14-1_1.jpg"],["collageItem8",""],["class","image-overlay",3,"click",4,"ngIf"],[1,"image-overlay",3,"click"],[3,"src"]],template:function(r,i){if(1&r){const s=Ea();fe(0,"div",0)(1,"div",1)(2,"div"),Ce(3,"We are delighted to welcome you to"),_e(),fe(4,"div"),Ce(5,"Patrik & Claudia's"),_e(),fe(6,"div"),Ce(7,"wedding!"),_e()(),fe(8,"div",2),Ce(9," July 19 2025 "),tr(10,"span",3),Ce(11," G\xf6teborg "),tr(12,"span",3),fe(13,"span"),Ce(14),_e()(),fe(15,"div",4)(16,"div",5),Ce(17,"OUR STORY"),_e(),fe(18,"p",6),Ce(19," A simple message on a dating app would travel across Kattegat and become the beginning of our beautiful love story. \u201cHello there on the other side of the water\u201d Patrik wrote, and with those simple words, a Swedish Pilot and a Danish accountant would begin their very own fairytale. Our story proves that love knows no borders. Between Patrik\u2019s flights touching down all over Europe and my world of endless numbers and spreadsheets we have created a beautiful relationship based on mutual respect, curiosity and many interests that with time have become mutual. Patrik has introduced me to the beauty of the Gothenburg Archipelago, and I have shared with him my love for all things Italian. In our relationship we delight in teaching each other. Patrik patiently sits evening after evening explaining to me the intricate systems of jet aircraft \u2013 just ask me what might happen if you get on the back side of the drag curve... While I introduce him to the profound simplicity of Hemingway\u2019s prose, as well as the differences between the different philosophical schools. When I was younger, and wanted as young people tend to do \u2013 everything all at once, I would get annoyed when people told me to be patient, and that whoever waits for something good never waits in vain. Today I understand that they were right. Patrik and I might have found each other later in life, but in each other we have found a true soul mate, and a love that is both patient and enduring of any outside circumstances. On that magical Christmas Eve in 2023 when Patrik dropped to one knee and asked me to be his wife in Rome\u2019s beautiful Borghese Gardens I have never been more sure of an answer in my whole life. Patrik and I are so excited to embark on this next chapter of our lives as husband and wife together with our beloved children, and one far too spoiled miniature dachshund. Welcome to our wedding website. We can\u2019t wait to celebrate with all of you and hope you will find the information on this site useful. "),_e()(),fe(20,"div",7)(21,"div",8),sn("click",function(){sr(s);const a=Bs(23);return Ar(i.showImage(a))}),tr(22,"img",9,10),fe(24,"div",11),Ce(25,"Dec 2023"),_e()(),fe(26,"div",12),sn("click",function(){sr(s);const a=Bs(28);return Ar(i.showImage(a))}),tr(27,"img",13,14),fe(29,"div",11),Ce(30,"May 2023"),_e()(),fe(31,"div",15),sn("click",function(){sr(s);const a=Bs(33);return Ar(i.showImage(a))}),tr(32,"img",16,17),fe(34,"div",18),Ce(35,"Aug 2023"),_e()(),fe(36,"div",19),sn("click",function(){sr(s);const a=Bs(38);return Ar(i.showImage(a))}),tr(37,"img",20,21),fe(39,"div",18),Ce(40,"Dec 2023"),_e()(),fe(41,"div",22),sn("click",function(){sr(s);const a=Bs(43);return Ar(i.showImage(a))}),tr(42,"img",23,24),fe(44,"div",18),Ce(45,"Feb 2023"),_e()(),fe(46,"div",25),sn("click",function(){sr(s);const a=Bs(48);return Ar(i.showImage(a))}),tr(47,"img",26,27),fe(49,"div",18),Ce(50,"Sept 2024"),_e()(),fe(51,"div",28),sn("click",function(){sr(s);const a=Bs(53);return Ar(i.showImage(a))}),tr(52,"img",29,30),fe(54,"div",11),Ce(55,"July 2024"),_e()(),fe(56,"div",31),sn("click",function(){sr(s);const a=Bs(58);return Ar(i.showImage(a))}),tr(57,"img",32,33),fe(59,"div",11),Ce(60,"Dec 2022"),_e()()(),hs(61,hne,2,1,"div",34),_e()}2&r&&(bt(14),Aa("",i.timer.remDays," days to go"),bt(47),rn("ngIf",i.isImageVisible))},dependencies:[Dy],styles:[".welcome-text[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:30px;font-family:Waterfall,cursive;font-size:80px;align-items:center;text-align:center}.time-and-place[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:auto;background-color:#96a498;color:#fff;padding:.5em;font-size:22px}.dot[_ngcontent-%COMP%]{height:5px;width:5px;background-color:#fff;border-radius:50%;display:inline-block;margin-left:1.5em;margin-right:1.5em}.our-story-headline[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:center;font-size:26px}.our-story-text[_ngcontent-%COMP%]{margin:15px 2em 2em;font-size:14px;column-count:2;column-gap:20px;column-fill:balance;overflow-y:auto}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:36px;float:left;margin-right:.15em;line-height:1}.collage-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:auto auto auto auto;grid-column-gap:3%;grid-row-gap:3%;margin:3% 5% 5%}.collage-item-1[_ngcontent-%COMP%]{grid-column:1/1;grid-row:1/2;position:relative}.collage-item-2[_ngcontent-%COMP%]{grid-column:2/2;grid-row:1/2;position:relative}.collage-item-3[_ngcontent-%COMP%]{grid-column:3/4;grid-row:1/3;position:relative}.collage-item-4[_ngcontent-%COMP%]{grid-column:4/5;grid-row:1/3;position:relative}.collage-item-5[_ngcontent-%COMP%]{grid-column:1/2;grid-row:2/4;position:relative}.collage-item-6[_ngcontent-%COMP%]{grid-column:2/3;grid-row:2/4;position:relative}.collage-item-7[_ngcontent-%COMP%]{grid-column:3/4;grid-row:3/4;position:relative}.collage-item-8[_ngcontent-%COMP%]{grid-column:4/5;grid-row:3/4;position:relative}.collage-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:auto;object-fit:cover;border-radius:5px;filter:grayscale(100%);transition:filter .3s ease}.collage-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{filter:grayscale(0%)}.overlay-text-1_1[_ngcontent-%COMP%]{position:absolute;top:85%;left:10%;color:#fff;text-shadow:2px 2px 5px rgb(0,0,0);font-size:16px;font-weight:700}.overlay-text-9_16[_ngcontent-%COMP%]{position:absolute;top:90%;left:10%;color:#fff;text-shadow:2px 2px 5px rgb(0,0,0);font-size:16px;font-weight:700}.image-overlay[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;max-height:100%;max-width:auto;transform:translate(-35%,-50%);background-color:#000c;padding:40px;display:flex;justify-content:center;align-items:center;z-index:2}.image-overlay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:90vh;box-shadow:0 0 20px #00000080;border:2px solid white}@media (max-width: 1200px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:70px}.time-and-place[_ngcontent-%COMP%]{font-size:20px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 1000px){.welcome-text[_ngcontent-%COMP%]{margin-top:60px;font-size:65px}.time-and-place[_ngcontent-%COMP%]{font-size:18px}.dot[_ngcontent-%COMP%]{height:4px;width:4px}.our-story-text[_ngcontent-%COMP%]{font-size:12px;column-gap:18px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:30px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 800px){.welcome-text[_ngcontent-%COMP%]{margin-top:60px;font-size:52px}.time-and-place[_ngcontent-%COMP%]{font-size:16px}.our-story-headline[_ngcontent-%COMP%]{margin-top:20px;font-size:22px}.our-story-text[_ngcontent-%COMP%]{font-size:10px;column-gap:12px;margin-top:10px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:25px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:10px}.image-overlay[_ngcontent-%COMP%]{padding:30px;transform:translate(-30%,-50%)}}@media (max-width: 600px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;margin-bottom:30px;font-size:38px}.time-and-place[_ngcontent-%COMP%]{font-size:12px}.dot[_ngcontent-%COMP%]{height:3px;width:3px}.our-story-headline[_ngcontent-%COMP%]{margin-top:15px;font-size:18px}.our-story-text[_ngcontent-%COMP%]{font-size:8px;column-gap:8px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:20px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:8px}}@media (max-width: 450px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:35px}.time-and-place[_ngcontent-%COMP%]{font-size:10px}.our-story-headline[_ngcontent-%COMP%]{font-size:14px}.our-story-text[_ngcontent-%COMP%]{font-size:7px}.our-story-text[_ngcontent-%COMP%]:first-letter{font-size:18px;column-gap:6px}.overlay-text-1_1[_ngcontent-%COMP%], .overlay-text-9_16[_ngcontent-%COMP%]{font-size:6px}.image-overlay[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 400px){.welcome-text[_ngcontent-%COMP%]{margin-top:50px;font-size:28px}.timer[_ngcontent-%COMP%]{margin-top:20px}}"]})}}return n})(),pne=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-about"]],decls:2,vars:0,consts:[[1,"page-headline"]],template:function(r,i){1&r&&(fe(0,"div",0),Ce(1,"ABOUT"),_e())},styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{margin:2em;height:100vh}"]})}}return n})(),gne=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-schedule"]],decls:45,vars:1,consts:[[1,"page-headline"],[2,"margin","2em"],[1,"headline"],[1,"grid-system"],[1,"grid-item-1","left-column"],[1,"grid-item-2","right-column"],[1,"grid-item-3","left-column"],[1,"grid-item-4","right-column"],[1,"grid-item-5","left-column"],[1,"grid-item-6","right-column"],[1,"left-column"],[1,"right-column"],[3,"routerLink"]],template:function(r,i){1&r&&(fe(0,"div",0),Ce(1,"SCHEDULE"),_e(),fe(2,"div",1),Ce(3,"This schedule gives a general outline of the wedding day. Apart from when the ceremoney starts, and when the the venue of the wedding party closes, times are only approximate. Our wish is for everyone to enjoy a day free of stress, in good company with the wedding couple, family and friends."),_e(),fe(4,"div",2),Ce(5,"CHURCH"),_e(),fe(6,"div",3)(7,"div",4),Ce(8,"14:30"),_e(),fe(9,"div",5),Ce(10,"Wedding cermony starts in Domkyrkan."),_e(),fe(11,"div",6),Ce(12,"15:30"),_e(),fe(13,"div",7),Ce(14,"Walk from Domkyrkan to Residensbron to embark on S/S F\xe4rjan 4. The walk is approximately 700 m."),_e(),fe(15,"div",8),Ce(16,"15:45"),_e(),fe(17,"div",9),Ce(18,"S/S F\xe4rjan 4 leaves Residensbron for a 1.5 - 2 hour tour of G\xf6teborg harbour. Drinks and snacks will be provided onboard. "),fe(19,"p")(20,"b"),Ce(21,"Note:"),_e(),Ce(22," There is no toilet available onboard."),_e()()(),fe(23,"div",2),Ce(24,"WEDDING PARTY"),_e(),fe(25,"div",3)(26,"div",10),Ce(27,"17:30"),_e(),fe(28,"div",11),Ce(29,"Arrival at Restaurant River On The Pier. Welcome drinks and hang out on the docks."),_e(),fe(30,"div",10),Ce(31,"19:00"),_e(),fe(32,"div",11),Ce(33,"Three course dinner and wedding cake. Anyone keen on holding a speech? This is your moment. Reach out to the toastmaster, details in the "),fe(34,"a",12),Ce(35,"FAQ"),_e(),Ce(36,"."),_e(),fe(37,"div",10),Ce(38,"21:00"),_e(),fe(39,"div",11),Ce(40,"Music and live artists."),_e(),fe(41,"div",10),Ce(42,"02:00"),_e(),fe(43,"div",11),Ce(44,"The restaurant closes and we have to leave."),_e()()),2&r&&(bt(34),rn("routerLink","/FAQ"))},dependencies:[kp],styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.headline[_ngcontent-%COMP%]{display:flex;justify-content:center;background-color:#96a498;color:#fff;font-size:22px}.grid-system[_ngcontent-%COMP%]{display:grid;grid-template-columns:10% auto;grid-template-rows:auto;margin:2em}.left-column[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:2em}.right-column[_ngcontent-%COMP%]{padding-left:2em;margin-bottom:2em;margin-right:15%}.right-column[_ngcontent-%COMP%]:last-child{margin-bottom:0}a[_ngcontent-%COMP%]{text-decoration:none;color:#00f}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}}"]})}}return n})(),mne=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-contact"]],decls:2,vars:0,consts:[[1,"page-headline"]],template:function(r,i){1&r&&(fe(0,"div",0),Ce(1,"CONTACT"),_e())},styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{height:100vh;margin:2em}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}}"]})}}return n})(),_ne=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-error"]],decls:5,vars:0,consts:[[1,"container"]],template:function(r,i){1&r&&(fe(0,"div",0)(1,"h1"),Ce(2,"404: Page Not Found"),_e(),fe(3,"p"),Ce(4,"The page you are looking for cannot be found or you do not have access to this page."),_e()())},styles:[".container[_ngcontent-%COMP%]{text-align:center;margin:30px 0}"]})}}return n})(),RB=(()=>{class n{constructor(t){this.http=t}fetchGifts(){return this.http.get("https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app/gifts.json").pipe(le(r=>{const i=[];for(const s in r)i.push({...r[s]});return i}))}updateClaim(t,r){return this.http.patch("https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app//"+t+".json",r)}addGuest(t){return this.http.post("https://wedding-29b48-default-rtdb.europe-west1.firebasedatabase.app/guests.json",t)}static{this.\u0275fac=function(r){return new(r||n)(ye(VU))}}static{this.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yne(n,e){1&n&&(fe(0,"div",11),Ce(1,"Name missing"),_e())}let vne=(()=>{class n{constructor(t){this.firebaseService=t,this.validName=!0}addGuest(t,r){try{this.validateName(t.name),this.firebaseService.addGuest(t).subscribe(),this.validName=!0,r.reset()}catch(i){this.validName=!1,console.error("Adding a Guest failed: "+i)}}validateName(t){if(t.length<1)throw Error}static{this.\u0275fac=function(r){return new(r||n)(ge(RB))}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-rsvp"]],decls:20,vars:1,consts:[[1,"page-headline"],[1,"container"],[1,"text-container"],[1,"form-container"],[1,"form",3,"ngSubmit"],["guestForm","ngForm"],["type","text","name","name","ngModel","",1,"input-field"],["class","error-message",4,"ngIf"],["type","text","name","plusOne","ngModel","",1,"input-field"],["name","additional","rows","5","ngModel","",1,"input-field"],["type","submit","value","Send",1,"submit-button"],[1,"error-message"]],template:function(r,i){if(1&r){const s=Ea();fe(0,"div",0),Ce(1,"RSVP"),_e(),fe(2,"div",1)(3,"div",2)(4,"p"),Ce(5,"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ipsam natus deleniti ex delectus at libero consequatur est sequi numquam eveniet! "),_e()(),fe(6,"div",3)(7,"form",4,5),sn("ngSubmit",function(){sr(s);const a=Bs(8);return Ar(i.addGuest(a.value,a))}),fe(9,"label"),Ce(10,"Name"),_e(),tr(11,"input",6),hs(12,yne,2,0,"div",7),fe(13,"label"),Ce(14,"Plus one (if any)"),_e(),tr(15,"input",8),fe(16,"label"),Ce(17,"Additional info"),_e(),tr(18,"textarea",9)(19,"input",10),_e()()()}2&r&&(bt(12),rn("ngIf",!i.validName))},dependencies:[Dy,dU,rE,J2,X2,zT,pE],styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{height:100vh;margin:2em}.text-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.form-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:400px;height:auto;background-color:#96a498;color:#fff;border-radius:10px;padding:1em}label[_ngcontent-%COMP%]{font-size:18px;margin-top:1em}.input-field[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:.5em;width:300px}.submit-button[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:2em;width:50px}.error-message[_ngcontent-%COMP%]{color:#fff}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}label[_ngcontent-%COMP%]{font-size:16px}.form[_ngcontent-%COMP%]{width:300px;height:auto}.input-field[_ngcontent-%COMP%]{width:200px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}label[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}.form[_ngcontent-%COMP%]{width:200px;height:auto}.input-field[_ngcontent-%COMP%]{width:150px}label[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}.form[_ngcontent-%COMP%]{width:150px;height:auto}.input-field[_ngcontent-%COMP%]{width:120px}label[_ngcontent-%COMP%]{font-size:12px}}"]})}}return n})();function Ene(n,e){if(1&n){const t=Ea();fe(0,"button",9),sn("click",function(){sr(t);const i=ar().$implicit;return Ar(ar().updateGiftStatus(i))}),_e()}2&n&&wa("ticked",ar().$implicit.claimed)}function Ine(n,e){if(1&n&&(fe(0,"tr")(1,"td",5),hs(2,Ene,1,2,"button",6),_e(),fe(3,"td",7)(4,"a",8),Ce(5),_e()()()),2&n){const t=e.$implicit,r=ar();bt(2),rn("ngIf","single"===t.quantity),bt(1),rn("ngStyle",r.getGiftStyle(t)),bt(1),id("href",t.link,va),bt(1),Aa(" ",t.name,"")}}function wne(n,e){if(1&n){const t=Ea();fe(0,"button",9),sn("click",function(){sr(t);const i=ar().$implicit;return Ar(ar().updateGiftStatus(i))}),_e()}2&n&&wa("ticked",ar().$implicit.claimed)}function Ane(n,e){if(1&n&&(fe(0,"tr")(1,"td",5),hs(2,wne,1,2,"button",6),_e(),fe(3,"td",7)(4,"a",8),Ce(5),_e()()()),2&n){const t=e.$implicit,r=ar();bt(2),rn("ngIf","single"===t.quantity),bt(1),rn("ngStyle",r.getGiftStyle(t)),bt(1),id("href",t.link,va),bt(1),Aa(" ",t.name,"")}}function Cne(n,e){if(1&n){const t=Ea();fe(0,"button",9),sn("click",function(){sr(t);const i=ar().$implicit;return Ar(ar().updateGiftStatus(i))}),_e()}2&n&&wa("ticked",ar().$implicit.claimed)}function bne(n,e){if(1&n&&(fe(0,"tr")(1,"td",5),hs(2,Cne,1,2,"button",6),_e(),fe(3,"td",7)(4,"a",8),Ce(5),_e()()()),2&n){const t=e.$implicit,r=ar();bt(2),rn("ngIf","single"===t.quantity),bt(1),rn("ngStyle",r.getGiftStyle(t)),bt(1),id("href",t.link,va),bt(1),Aa(" ",t.name,"")}}function Tne(n,e){if(1&n){const t=Ea();fe(0,"button",9),sn("click",function(){sr(t);const i=ar().$implicit;return Ar(ar().updateGiftStatus(i))}),_e()}2&n&&wa("ticked",ar().$implicit.claimed)}function Dne(n,e){if(1&n&&(fe(0,"tr")(1,"td",5),hs(2,Tne,1,2,"button",6),_e(),fe(3,"td",7)(4,"a",8),Ce(5),_e()()()),2&n){const t=e.$implicit,r=ar();bt(2),rn("ngIf","single"===t.quantity),bt(1),rn("ngStyle",r.getGiftStyle(t)),bt(1),id("href",t.link,va),bt(1),Aa(" ",t.name,"")}}let Sne=(()=>{class n{constructor(t){this.firebaseService=t,this.giftList=[]}ngOnInit(){this.fetchGifts()}fetchGifts(){this.firebaseService.fetchGifts().subscribe(t=>{this.giftList=t,console.log(this.giftList)})}sortGifts(t){let r=[];return this.giftList.forEach(i=>{i.category===t&&r.push(i)}),r}updateGiftStatus(t){const r=`gifts/gift_${t.id}`;this.firebaseService.updateClaim(r,{claimed:!t.claimed}).subscribe(()=>{try{console.log("Update: "+r+" successful"),this.ngOnInit()}catch(s){console.error("Update failed",s)}})}getGiftStyle(t){return{"text-decoration":t.claimed?"line-through":"none",color:t.claimed?"gray":"black"}}static{this.\u0275fac=function(r){return new(r||n)(ge(RB))}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-registry"]],decls:24,vars:4,consts:[[1,"page-headline"],[1,"container"],[1,"columns"],[1,"headline"],[4,"ngFor","ngForOf"],[1,"td-button"],["class","button",3,"ticked","click",4,"ngIf"],[3,"ngStyle"],["target","_blank",3,"href"],[1,"button",3,"click"]],template:function(r,i){1&r&&(fe(0,"div",0),Ce(1,"REGISTRY"),_e(),fe(2,"div",1)(3,"div",2)(4,"div",3),Ce(5,"Kitchen"),_e(),fe(6,"table")(7,"tbody"),hs(8,Ine,6,4,"tr",4),_e()(),fe(9,"div",3),Ce(10,"Living Room"),_e(),fe(11,"table")(12,"tbody"),hs(13,Ane,6,4,"tr",4),_e()(),fe(14,"div",3),Ce(15,"Bathroom"),_e(),fe(16,"table")(17,"tbody"),hs(18,bne,6,4,"tr",4),_e()(),fe(19,"div",3),Ce(20,"Experience"),_e(),fe(21,"table")(22,"tbody"),hs(23,Dne,6,4,"tr",4),_e()()()()),2&r&&(bt(8),rn("ngForOf",i.sortGifts("kitchen")),bt(5),rn("ngForOf",i.sortGifts("living-room")),bt(5),rn("ngForOf",i.sortGifts("bathroom")),bt(5),rn("ngForOf",i.sortGifts("experience")))},dependencies:[EO,Dy,CO],styles:['.page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{height:100vh;margin:2em}.columns[_ngcontent-%COMP%]{column-count:2;column-gap:20px;height:80vh;overflow-y:auto;column-fill:auto}table[_ngcontent-%COMP%]{width:100%;border-spacing:0 10px}.headline[_ngcontent-%COMP%]{display:flex;justify-content:center;background-color:#96a498;color:#fff;margin-top:10px;margin-bottom:10px;border-radius:5px;padding:3px;font-size:18px}tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f2f2f2}.td-button[_ngcontent-%COMP%]{width:20px}td[_ngcontent-%COMP%]{padding-left:30px;font-size:16px}.button[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:0%;border:1px solid;box-shadow:2px 2px 5px #0009;padding:0;margin:0;display:flex;justify-content:center;cursor:pointer}.button[_ngcontent-%COMP%]:after{content:"";margin-left:20px;margin-top:4px;position:absolute;width:18px;height:6px;border-left:2px solid black;border-bottom:2px solid black;transform:rotate(-45deg) scale(0);transform-origin:bottom left;opacity:0}.button.ticked[_ngcontent-%COMP%]:after{transform:rotate(-45deg) scale(1);opacity:1}.button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:inherit;text-decoration:none}@media (max-width: 1200px){.headline[_ngcontent-%COMP%]{font-size:17px}td[_ngcontent-%COMP%]{padding-left:25px}}@media (max-width: 1000px){.page-headline[_ngcontent-%COMP%]{font-size:26px}td[_ngcontent-%COMP%]{padding-left:20px}}@media (max-width: 800px){.page-headline[_ngcontent-%COMP%]{font-size:22px}.columns[_ngcontent-%COMP%]{column-gap:15px}.headline[_ngcontent-%COMP%]{font-size:16px}.button[_ngcontent-%COMP%]{width:15px;height:15px}td[_ngcontent-%COMP%]{padding-left:15px;font-size:15px}}@media (max-width: 600px){.page-headline[_ngcontent-%COMP%]{font-size:18px}.columns[_ngcontent-%COMP%]{column-count:1}.headline[_ngcontent-%COMP%]{font-size:14px}.button[_ngcontent-%COMP%]{width:13px;height:13px}td[_ngcontent-%COMP%]{padding-left:10px;font-size:13px}}@media (max-width: 450px){.page-headline[_ngcontent-%COMP%]{font-size:16px}td[_ngcontent-%COMP%]{padding-left:10px}}']})}}return n})(),Rne=(()=>{class n{constructor(){this.emailUser="pc",this.emailDomain="reithe.se"}getEmail(){return`${this.emailUser}@${this.emailDomain}`}getEmailLink(){return`mailto:${this.getEmail()}`}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-email-display"]],decls:2,vars:2,consts:[[3,"href"]],template:function(r,i){1&r&&(fe(0,"a",0),Ce(1),_e()),2&r&&(rn("href",i.getEmailLink(),va),bt(1),pA(i.getEmail()))}})}}return n})();const Pne=[{path:"",redirectTo:"Home",pathMatch:"full"},{path:"Home",component:fne},{path:"About",component:pne},{path:"Schedule",component:gne},{path:"Registry",component:Sne},{path:"FAQ",component:(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ur({type:n,selectors:[["app-faq"]],decls:28,vars:0,consts:[[1,"page-headline"],[1,"container"],[1,"question"],[1,"answer"],["href","https://www.google.com/maps/search/Hotels+near+Restaurant+River+on+The+Pier+Gothenburg","target","_blank"],[2,"margin-top","1em"]],template:function(r,i){1&r&&(fe(0,"div",0),Ce(1,"FAQ"),_e(),fe(2,"div",1)(3,"p"),Ce(4,"We know that many of you have gone to great lengths to make it to our wedding, travelling in from various parts around the world. For this we are truly grateful. In order to ease the stress we've put together this FAQ that will hopefully shine light on some practical aspects of your journey."),_e(),fe(5,"div",2),Ce(6,"What suitable accomodation is available?"),_e(),fe(7,"div",3),Ce(8,'We recommend "Quality Hotel 11" located right next to the venue of the wedding party. The price is ca: 2000 SEK / 1300 DKK / 175 EUR per night for a double room including breakfast. Booking is made by contacting the hotel directly on +46 31 7791111. Use discount code '),fe(9,"i"),Ce(10,"RIVER"),_e(),Ce(11,' to obtain 15 % discount on previously mentioned prices. Another option is "Hotel Villan", also very near the venue of the party. For other hotel options near Eriksberg click '),fe(12,"a",4),Ce(13,"here."),_e(),fe(14,"div",5)(15,"b"),Ce(16,"Note:"),_e(),Ce(17," Due to the fact the finals of Gothia Cup, the largest youth football tournament in the world, are being played on our wedding weekend Quality Hotell 11 is not available until the 19th."),_e()(),fe(18,"div",2),Ce(19,"How do I transport myself to, from and around the wedding?"),_e(),fe(20,"div",3),Ce(21,'Public transportation is pretty good in Gothenburg, once you get the hang of it. Download the app "V\xe4sttrafik ToGo" and buy tickets directly using your bank card. There is no need to sign up for an account. The same ticket is valid on all V\xe4sttrafik buses, trams and ferries. The app language should pop up as English as long as your phone\'s language is not set to Swedish. The ceremony, held at Domkyrkan in the city center of Gothenburg, is right next to a bus stop with the same name, "Domkyrkan". Between the church and the wedding party transportation is arranged as we have chartered a boat that will take us on a scenic tour along the harbour of Gothenburg before dropping us off at Restaurant River on The Pier in Eriksberg. The restaurant closes at 02:00, if you are in need of transportation home or to your hotel, buses run every 10-15 min through the night from bus stop "Eriksbergtorget", some 200 meters from the restaurant, to the city center. If you prefer taxi, Taxi G\xf6teborg is a trustworthy and well established taxi operator that can be booked on +46 31 650000. '),_e(),fe(22,"div",2),Ce(23,"I would like to hold a speech, who do I contact?"),_e(),fe(24,"div",3),Ce(25,"Please be in touch with toastmaster, Per-Christian Reithe, on XXX or XXX "),tr(26,"app-email-display"),Ce(27,". "),_e()())},dependencies:[Rne],styles:[".page-headline[_ngcontent-%COMP%]{background-color:#96a498;color:#fff;display:flex;justify-content:center;font-size:32px;width:100%;padding:5px;margin:0}.container[_ngcontent-%COMP%]{margin:2em}.question[_ngcontent-%COMP%]{font-size:16px;font-weight:700}.answer[_ngcontent-%COMP%]{font-size:14px;margin-bottom:2em}a[_ngcontent-%COMP%]{text-decoration:none;color:#00f}"]})}}return n})()},{path:"Contact",component:mne},{path:"Rsvp",component:vne},{path:"**",component:_ne}];let xne=(()=>{class n{constructor(){const t=iB(b2_firebase);console.log("Initializing App Check...");try{ane(t,{provider:new OD("6LeVw6YqAAAAAMSHu5q94FNCOdQgnV48JjOidVRE"),isTokenAutoRefreshEnabled:!0}),console.log("App Check init OK")}catch(r){console.log("App Check init failed,"+r)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=ri({type:n,bootstrap:[R7]})}static{this.\u0275inj=dr({imports:[z5,bZ,S7,Z0.forRoot(Pne),Q7.initializeApp(b2_firebase),SX,QZ]})}}return n})();$5().bootstrapModule(xne).catch(n=>console.error(n))},574:(zi,Qn,Xe)=>{Xe.d(Qn,{A:()=>Un});var D=Xe(401),$e=Xe(779),Me=Xe(631),ee=Xe(398);class yt{constructor(qe,We){this._delegate=qe,this.firebase=We,(0,Me._addComponent)(qe,new $e.uA("app-compat",()=>this,"PUBLIC")),this.container=qe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this._delegate.automaticDataCollectionEnabled=qe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(qe=>{this._delegate.checkDestroyed(),qe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Me.deleteApp)(this._delegate)))}_getService(qe,We=Me._DEFAULT_ENTRY_NAME){var Cn;this._delegate.checkDestroyed();const Bn=this._delegate.container.getProvider(qe);return!Bn.isInitialized()&&"EXPLICIT"===(null===(Cn=Bn.getComponent())||void 0===Cn?void 0:Cn.instantiationMode)&&Bn.initialize(),Bn.getImmediate({identifier:We})}_removeServiceInstance(qe,We=Me._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(qe).clearInstance(We)}_addComponent(qe){(0,Me._addComponent)(this._delegate,qe)}_addOrOverwriteComponent(qe){(0,Me._addOrOverwriteComponent)(this._delegate,qe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const qt=new D.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ie=function rt(){const vt=function Wt(vt){const qe={},We={__esModule:!0,initializeApp:function Yn(je,me={}){const Te=Me.initializeApp(je,me);if((0,D.gR)(qe,Te.name))return qe[Te.name];const X=new vt(Te,We);return qe[Te.name]=X,X},app:Bn,registerVersion:Me.registerVersion,setLogLevel:Me.setLogLevel,onLog:Me.onLog,apps:null,SDK_VERSION:Me.SDK_VERSION,INTERNAL:{registerComponent:function xt(je){const me=je.name,Te=me.replace("-compat","");if(Me._registerComponent(je)&&"PUBLIC"===je.type){const X=(st=Bn())=>{if("function"!=typeof st[Te])throw qt.create("invalid-app-argument",{appName:me});return st[Te]()};void 0!==je.serviceProps&&(0,D.zw)(X,je.serviceProps),We[Te]=X,vt.prototype[Te]=function(...st){return this._getService.bind(this,me).apply(this,je.multipleInstances?st:[])}}return"PUBLIC"===je.type?We[Te]:null},removeApp:function Cn(je){delete qe[je]},useAsService:function Sn(je,me){return"serverAuth"===me?null:me},modularAPIs:Me}};function Bn(je){if(!(0,D.gR)(qe,je=je||Me._DEFAULT_ENTRY_NAME))throw qt.create("no-app",{appName:je});return qe[je]}return We.default=We,Object.defineProperty(We,"apps",{get:function St(){return Object.keys(qe).map(je=>qe[je])}}),Bn.App=vt,We}(yt);return vt.INTERNAL=Object.assign(Object.assign({},vt.INTERNAL),{createFirebaseNamespace:rt,extendNamespace:function qe(We){(0,D.zw)(vt,We)},createSubscribe:D.tD,ErrorFactory:D.FA,deepExtend:D.zw}),vt}(),pe=new ee.Vy("@firebase/app-compat");try{const vt=(0,D.mS)();if(void 0!==vt.firebase){pe.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const qe=vt.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&pe.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Un=ie;!function _t(vt){(0,Me.registerVersion)("@firebase/app-compat","0.2.43",vt)}()},631:(zi,Qn,Xe)=>{Xe.r(Qn),Xe.d(Qn,{FirebaseError:()=>ee.g,SDK_VERSION:()=>Nr,_DEFAULT_ENTRY_NAME:()=>H,_addComponent:()=>he,_addOrOverwriteComponent:()=>le,_apps:()=>te,_clearComponents:()=>Ti,_components:()=>Q,_getProvider:()=>Tt,_isFirebaseApp:()=>At,_isFirebaseServerApp:()=>yn,_registerComponent:()=>it,_removeServiceInstance:()=>ze,_serverApps:()=>B,deleteApp:()=>ws,getApp:()=>Is,getApps:()=>Mc,initializeApp:()=>jn,initializeServerApp:()=>to,onLog:()=>su,registerVersion:()=>Di,setLogLevel:()=>yr});var D=Xe(467),$e=Xe(779),Me=Xe(398),ee=Xe(401),yt=Xe(749);class Jt{constructor(se){this.container=se}getPlatformInfoString(){return this.container.getProviders().map(C=>{if(function qt(Re){const se=Re.getComponent();return"VERSION"===se?.type}(C)){const T=C.getImmediate();return`${T.library}/${T.version}`}return null}).filter(C=>C).join(" ")}}const Wt="@firebase/app",rt="0.10.13",ie=new Me.Vy("@firebase/app"),H="[DEFAULT]",Z={[Wt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},te=new Map,B=new Map,Q=new Map;function he(Re,se){try{Re.container.addComponent(se)}catch(C){ie.debug(`Component ${se.name} failed to register with FirebaseApp ${Re.name}`,C)}}function le(Re,se){Re.container.addOrOverwriteComponent(se)}function it(Re){const se=Re.name;if(Q.has(se))return ie.debug(`There were multiple attempts to register component ${se}.`),!1;Q.set(se,Re);for(const C of te.values())he(C,Re);for(const C of B.values())he(C,Re);return!0}function Tt(Re,se){const C=Re.container.getProvider("heartbeat").getImmediate({optional:!0});return C&&C.triggerHeartbeat(),Re.container.getProvider(se)}function ze(Re,se,C=H){Tt(Re,se).clearInstance(C)}function At(Re){return void 0!==Re.options}function yn(Re){return void 0!==Re.settings}function Ti(){Q.clear()}const Rt=new ee.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Rn{constructor(se,C,T){this._isDeleted=!1,this._options=Object.assign({},se),this._config=Object.assign({},C),this._name=C.name,this._automaticDataCollectionEnabled=C.automaticDataCollectionEnabled,this._container=T,this.container.addComponent(new $e.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(se){this.checkDestroyed(),this._automaticDataCollectionEnabled=se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(se){this._isDeleted=se}checkDestroyed(){if(this.isDeleted)throw Rt.create("app-deleted",{appName:this._name})}}class lr extends Rn{constructor(se,C,T,M){const k=void 0!==C.automaticDataCollectionEnabled&&C.automaticDataCollectionEnabled,U={name:T,automaticDataCollectionEnabled:k};super(void 0!==se.apiKey?se:se.options,U,M),this._serverConfig=Object.assign({automaticDataCollectionEnabled:k},C),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,C.releaseOnDeref=void 0,Di(Wt,rt,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(se){this.isDeleted||(this._refCount++,void 0!==se&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(se,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ws(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Rt.create("server-app-deleted")}}const Nr="10.14.1";function jn(Re,se={}){let C=Re;"object"!=typeof se&&(se={name:se});const T=Object.assign({name:H,automaticDataCollectionEnabled:!1},se),M=T.name;if("string"!=typeof M||!M)throw Rt.create("bad-app-name",{appName:String(M)});if(C||(C=(0,ee.T9)()),!C)throw Rt.create("no-options");const k=te.get(M);if(k){if((0,ee.bD)(C,k.options)&&(0,ee.bD)(T,k.config))return k;throw Rt.create("duplicate-app",{appName:M})}const U=new $e.h1(M);for(const De of Q.values())U.addComponent(De);const we=new Rn(C,T,U);return te.set(M,we),we}function to(Re,se){if((0,ee.Bd)()&&!(0,ee.p7)())throw Rt.create("invalid-server-app-environment");let C;void 0===se.automaticDataCollectionEnabled&&(se.automaticDataCollectionEnabled=!1),C=At(Re)?Re.options:Re;const T=Object.assign(Object.assign({},se),C);if(void 0!==T.releaseOnDeref&&delete T.releaseOnDeref,void 0!==se.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Rt.create("finalization-registry-not-supported",{});const k=""+(Lt=JSON.stringify(T),[...Lt].reduce((xn,He)=>Math.imul(31,xn)+He.charCodeAt(0)|0,0)),U=B.get(k);var Lt;if(U)return U.incRefCount(se.releaseOnDeref),U;const we=new $e.h1(k);for(const Lt of Q.values())we.addComponent(Lt);const De=new lr(C,se,k,we);return B.set(k,De),De}function Is(Re=H){const se=te.get(Re);if(!se&&Re===H&&(0,ee.T9)())return jn();if(!se)throw Rt.create("no-app",{appName:Re});return se}function Mc(){return Array.from(te.values())}function ws(Re){return As.apply(this,arguments)}function As(){return(As=(0,D.A)(function*(Re){let se=!1;const C=Re.name;te.has(C)?(se=!0,te.delete(C)):B.has(C)&&Re.decRefCount()<=0&&(B.delete(C),se=!0),se&&(yield Promise.all(Re.container.getProviders().map(T=>T.delete())),Re.isDeleted=!0)})).apply(this,arguments)}function Di(Re,se,C){var T;let M=null!==(T=Z[Re])&&void 0!==T?T:Re;C&&(M+=`-${C}`);const k=M.match(/\s|\//),U=se.match(/\s|\//);if(k||U){const we=[`Unable to register library "${M}" with version "${se}":`];return k&&we.push(`library name "${M}" contains illegal characters (whitespace or "/")`),k&&U&&we.push("and"),U&&we.push(`version name "${se}" contains illegal characters (whitespace or "/")`),void ie.warn(we.join(" "))}it(new $e.uA(`${M}-version`,()=>({library:M,version:se}),"VERSION"))}function su(Re,se){if(null!==Re&&"function"!=typeof Re)throw Rt.create("invalid-log-argument");(0,Me.Ey)(Re,se)}function yr(Re){(0,Me.He)(Re)}const ss="firebase-heartbeat-database",$n=1,Or="firebase-heartbeat-store";let Pn=null;function Jo(){return Pn||(Pn=(0,yt.P2)(ss,$n,{upgrade:(Re,se)=>{if(0===se)try{Re.createObjectStore(Or)}catch(C){console.warn(C)}}}).catch(Re=>{throw Rt.create("idb-open",{originalErrorMessage:Re.message})})),Pn}function no(){return(no=(0,D.A)(function*(Re){try{const C=(yield Jo()).transaction(Or),T=yield C.objectStore(Or).get(as(Re));return yield C.done,T}catch(se){if(se instanceof ee.g)ie.warn(se.message);else{const C=Rt.create("idb-get",{originalErrorMessage:se?.message});ie.warn(C.message)}}})).apply(this,arguments)}function vr(Re,se){return os.apply(this,arguments)}function os(){return(os=(0,D.A)(function*(Re,se){try{const T=(yield Jo()).transaction(Or,"readwrite");yield T.objectStore(Or).put(se,as(Re)),yield T.done}catch(C){if(C instanceof ee.g)ie.warn(C.message);else{const T=Rt.create("idb-set",{originalErrorMessage:C?.message});ie.warn(T.message)}}})).apply(this,arguments)}function as(Re){return`${Re.name}!${Re.options.appId}`}class kr{constructor(se){this.container=se,this._heartbeatsCache=null;const C=this.container.getProvider("app").getImmediate();this._storage=new ro(C),this._heartbeatsCachePromise=this._storage.read().then(T=>(this._heartbeatsCache=T,T))}triggerHeartbeat(){var se=this;return(0,D.A)(function*(){var C,T;try{const k=se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),U=Cs();return null==(null===(C=se._heartbeatsCache)||void 0===C?void 0:C.heartbeats)&&(se._heartbeatsCache=yield se._heartbeatsCachePromise,null==(null===(T=se._heartbeatsCache)||void 0===T?void 0:T.heartbeats))||se._heartbeatsCache.lastSentHeartbeatDate===U||se._heartbeatsCache.heartbeats.some(we=>we.date===U)?void 0:(se._heartbeatsCache.heartbeats.push({date:U,agent:k}),se._heartbeatsCache.heartbeats=se._heartbeatsCache.heartbeats.filter(we=>{const De=new Date(we.date).valueOf();return Date.now()-De<=2592e6}),se._storage.overwrite(se._heartbeatsCache))}catch(M){ie.warn(M)}})()}getHeartbeatsHeader(){var se=this;return(0,D.A)(function*(){var C;try{if(null===se._heartbeatsCache&&(yield se._heartbeatsCachePromise),null==(null===(C=se._heartbeatsCache)||void 0===C?void 0:C.heartbeats)||0===se._heartbeatsCache.heartbeats.length)return"";const T=Cs(),{heartbeatsToSend:M,unsentEntries:k}=function ou(Re,se=1024){const C=[];let T=Re.slice();for(const M of Re){const k=C.find(U=>U.agent===M.agent);if(k){if(k.dates.push(M.date),au(C)>se){k.dates.pop();break}}else if(C.push({agent:M.agent,dates:[M.date]}),au(C)>se){C.pop();break}T=T.slice(1)}return{heartbeatsToSend:C,unsentEntries:T}}(se._heartbeatsCache.heartbeats),U=(0,ee.Uj)(JSON.stringify({version:2,heartbeats:M}));return se._heartbeatsCache.lastSentHeartbeatDate=T,k.length>0?(se._heartbeatsCache.heartbeats=k,yield se._storage.overwrite(se._heartbeatsCache)):(se._heartbeatsCache.heartbeats=[],se._storage.overwrite(se._heartbeatsCache)),U}catch(T){return ie.warn(T),""}})()}}function Cs(){return(new Date).toISOString().substring(0,10)}class ro{constructor(se){this.app=se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.A)(function*(){return!!(0,ee.zW)()&&(0,ee.eX)().then(()=>!0).catch(()=>!1)})()}read(){var se=this;return(0,D.A)(function*(){if(yield se._canUseIndexedDBPromise){const T=yield function Gi(Re){return no.apply(this,arguments)}(se.app);return T?.heartbeats?T:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(se){var C=this;return(0,D.A)(function*(){var T;if(yield C._canUseIndexedDBPromise){const k=yield C.read();return vr(C.app,{lastSentHeartbeatDate:null!==(T=se.lastSentHeartbeatDate)&&void 0!==T?T:k.lastSentHeartbeatDate,heartbeats:se.heartbeats})}})()}add(se){var C=this;return(0,D.A)(function*(){var T;if(yield C._canUseIndexedDBPromise){const k=yield C.read();return vr(C.app,{lastSentHeartbeatDate:null!==(T=se.lastSentHeartbeatDate)&&void 0!==T?T:k.lastSentHeartbeatDate,heartbeats:[...k.heartbeats,...se.heartbeats]})}})()}}function au(Re){return(0,ee.Uj)(JSON.stringify({version:2,heartbeats:Re})).length}!function Xo(Re){it(new $e.uA("platform-logger",se=>new Jt(se),"PRIVATE")),it(new $e.uA("heartbeat",se=>new kr(se),"PRIVATE")),Di(Wt,rt,Re),Di(Wt,rt,"esm2017"),Di("fire-js","")}("")},779:(zi,Qn,Xe)=>{Xe.d(Qn,{h1:()=>Wt,uA:()=>Me});var D=Xe(467),$e=Xe(401);class Me{constructor(ie,pe,Ve){this.name=ie,this.instanceFactory=pe,this.type=Ve,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ie){return this.instantiationMode=ie,this}setMultipleInstances(ie){return this.multipleInstances=ie,this}setServiceProps(ie){return this.serviceProps=ie,this}setInstanceCreatedCallback(ie){return this.onInstanceCreated=ie,this}}const ee="[DEFAULT]";class yt{constructor(ie,pe){this.name=ie,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ie){const pe=this.normalizeInstanceIdentifier(ie);if(!this.instancesDeferred.has(pe)){const Ve=new $e.cY;if(this.instancesDeferred.set(pe,Ve),this.isInitialized(pe)||this.shouldAutoInitialize())try{const lt=this.getOrInitializeService({instanceIdentifier:pe});lt&&Ve.resolve(lt)}catch{}}return this.instancesDeferred.get(pe).promise}getImmediate(ie){var pe;const Ve=this.normalizeInstanceIdentifier(ie?.identifier),lt=null!==(pe=ie?.optional)&&void 0!==pe&&pe;if(!this.isInitialized(Ve)&&!this.shouldAutoInitialize()){if(lt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ve})}catch(_t){if(lt)return null;throw _t}}getComponent(){return this.component}setComponent(ie){if(ie.name!==this.name)throw Error(`Mismatching Component ${ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ie,this.shouldAutoInitialize()){if(function qt(rt){return"EAGER"===rt.instantiationMode}(ie))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[pe,Ve]of this.instancesDeferred.entries()){const lt=this.normalizeInstanceIdentifier(pe);try{const _t=this.getOrInitializeService({instanceIdentifier:lt});Ve.resolve(_t)}catch{}}}}clearInstance(ie=ee){this.instancesDeferred.delete(ie),this.instancesOptions.delete(ie),this.instances.delete(ie)}delete(){var ie=this;return(0,D.A)(function*(){const pe=Array.from(ie.instances.values());yield Promise.all([...pe.filter(Ve=>"INTERNAL"in Ve).map(Ve=>Ve.INTERNAL.delete()),...pe.filter(Ve=>"_delete"in Ve).map(Ve=>Ve._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ie=ee){return this.instances.has(ie)}getOptions(ie=ee){return this.instancesOptions.get(ie)||{}}initialize(ie={}){const{options:pe={}}=ie,Ve=this.normalizeInstanceIdentifier(ie.instanceIdentifier);if(this.isInitialized(Ve))throw Error(`${this.name}(${Ve}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const lt=this.getOrInitializeService({instanceIdentifier:Ve,options:pe});for(const[_t,Un]of this.instancesDeferred.entries())Ve===this.normalizeInstanceIdentifier(_t)&&Un.resolve(lt);return lt}onInit(ie,pe){var Ve;const lt=this.normalizeInstanceIdentifier(pe),_t=null!==(Ve=this.onInitCallbacks.get(lt))&&void 0!==Ve?Ve:new Set;_t.add(ie),this.onInitCallbacks.set(lt,_t);const Un=this.instances.get(lt);return Un&&ie(Un,lt),()=>{_t.delete(ie)}}invokeOnInitCallbacks(ie,pe){const Ve=this.onInitCallbacks.get(pe);if(Ve)for(const lt of Ve)try{lt(ie,pe)}catch{}}getOrInitializeService({instanceIdentifier:ie,options:pe={}}){let Ve=this.instances.get(ie);if(!Ve&&this.component&&(Ve=this.component.instanceFactory(this.container,{instanceIdentifier:(rt=ie,rt===ee?void 0:rt),options:pe}),this.instances.set(ie,Ve),this.instancesOptions.set(ie,pe),this.invokeOnInitCallbacks(Ve,ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ie,Ve)}catch{}var rt;return Ve||null}normalizeInstanceIdentifier(ie=ee){return this.component?this.component.multipleInstances?ie:ee:ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Wt{constructor(ie){this.name=ie,this.providers=new Map}addComponent(ie){const pe=this.getProvider(ie.name);if(pe.isComponentSet())throw new Error(`Component ${ie.name} has already been registered with ${this.name}`);pe.setComponent(ie)}addOrOverwriteComponent(ie){this.getProvider(ie.name).isComponentSet()&&this.providers.delete(ie.name),this.addComponent(ie)}getProvider(ie){if(this.providers.has(ie))return this.providers.get(ie);const pe=new yt(ie,this);return this.providers.set(ie,pe),pe}getProviders(){return Array.from(this.providers.values())}}},398:(zi,Qn,Xe)=>{Xe.d(Qn,{$b:()=>$e,Ey:()=>rt,He:()=>Wt,Vy:()=>qt});const D=[];var $e=function(ie){return ie[ie.DEBUG=0]="DEBUG",ie[ie.VERBOSE=1]="VERBOSE",ie[ie.INFO=2]="INFO",ie[ie.WARN=3]="WARN",ie[ie.ERROR=4]="ERROR",ie[ie.SILENT=5]="SILENT",ie}($e||{});const Me={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},ee=$e.INFO,yt={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},Jt=(ie,pe,...Ve)=>{if(pe<ie.logLevel)return;const lt=(new Date).toISOString(),_t=yt[pe];if(!_t)throw new Error(`Attempted to log a message with an invalid logType (value: ${pe})`);console[_t](`[${lt}]  ${ie.name}:`,...Ve)};class qt{constructor(pe){this.name=pe,this._logLevel=ee,this._logHandler=Jt,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(pe){if(!(pe in $e))throw new TypeError(`Invalid value "${pe}" assigned to \`logLevel\``);this._logLevel=pe}setLogLevel(pe){this._logLevel="string"==typeof pe?Me[pe]:pe}get logHandler(){return this._logHandler}set logHandler(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(pe){this._userLogHandler=pe}debug(...pe){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...pe),this._logHandler(this,$e.DEBUG,...pe)}log(...pe){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...pe),this._logHandler(this,$e.VERBOSE,...pe)}info(...pe){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...pe),this._logHandler(this,$e.INFO,...pe)}warn(...pe){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...pe),this._logHandler(this,$e.WARN,...pe)}error(...pe){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...pe),this._logHandler(this,$e.ERROR,...pe)}}function Wt(ie){D.forEach(pe=>{pe.setLogLevel(ie)})}function rt(ie,pe){for(const Ve of D){let lt=null;pe&&pe.level&&(lt=Me[pe.level]),Ve.userLogHandler=null===ie?null:(_t,Un,...vt)=>{const qe=vt.map(We=>{if(null==We)return null;if("string"==typeof We)return We;if("number"==typeof We||"boolean"==typeof We)return We.toString();if(We instanceof Error)return We.message;try{return JSON.stringify(We)}catch{return null}}).filter(We=>We).join(" ");Un>=(lt??_t.logLevel)&&ie({level:$e[Un].toLowerCase(),message:qe,args:vt,type:_t.name})}}}},324:(zi,Qn,Xe)=>{var D=Xe(467),$e=Xe(574),Me=Xe(631),ee=Xe(401),yt=Xe(398),Jt=Xe(635),qt=Xe(779);const rt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Un=function lt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},vt=function _t(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new ee.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Cn=new yt.Vy("@firebase/auth");function Yn(f,...c){Cn.logLevel<=yt.$b.ERROR&&Cn.error(`Auth (${Me.SDK_VERSION}): ${f}`,...c)}function St(f,...c){throw Te(f,...c)}function xt(f,...c){return Te(f,...c)}function Sn(f,c,l){const p=Object.assign(Object.assign({},vt()),{[c]:l});return new ee.FA("auth","Firebase",p).create(c,{appName:f.name})}function je(f){return Sn(f,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function me(f,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&St(f,"argument-error"),Sn(f,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Te(f,...c){if("string"!=typeof f){const l=c[0],p=[...c.slice(1)];return p[0]&&(p[0].appName=f.name),f._errorFactory.create(l,...p)}return qe.create(f,...c)}function X(f,c,...l){if(!f)throw Te(c,...l)}function st(f){const c="INTERNAL ASSERTION FAILED: "+f;throw Yn(c),new Error(c)}function dt(f,c){f||st(c)}function cn(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function zt(){return"http:"===pt()||"https:"===pt()}function pt(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class Mr{constructor(c,l){this.shortDelay=c,this.longDelay=l,dt(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,ee.jZ)()||(0,ee.lV)()}get(){return function ln(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(zt()||(0,ee.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Es(f,c){dt(f.emulator,"Emulator should always be set here");const{url:l}=f.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class H{static initialize(c,l,p){this.fetchImpl=c,l&&(this.headersImpl=l),p&&(this.responseImpl=p)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void st("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void st("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void st("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Z={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},te=new Mr(3e4,6e4);function B(f,c){return f.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:f.tenantId}):c}function Q(f,c,l,p){return he.apply(this,arguments)}function he(){return(he=(0,D.A)(function*(f,c,l,p,y={}){return le(f,y,(0,D.A)(function*(){let w={},P={};p&&("GET"===c?P=p:w={body:JSON.stringify(p)});const j=(0,ee.Am)(Object.assign({key:f.config.apiKey},P)).slice(1),re=yield f._getAdditionalHeaders();re["Content-Type"]="application/json",f.languageCode&&(re["X-Firebase-Locale"]=f.languageCode);const Ie=Object.assign({method:c,headers:re},w);return(0,ee.c1)()||(Ie.referrerPolicy="no-referrer"),H.fetch()(At(f,f.config.apiHost,l,j),Ie)}))})).apply(this,arguments)}function le(f,c,l){return it.apply(this,arguments)}function it(){return(it=(0,D.A)(function*(f,c,l){f._canInitEmulator=!1;const p=Object.assign(Object.assign({},Z),c);try{const y=new Ti(f),w=yield Promise.race([l(),y.promise]);y.clearNetworkTimeout();const P=yield w.json();if("needConfirmation"in P)throw Ct(f,"account-exists-with-different-credential",P);if(w.ok&&!("errorMessage"in P))return P;{const j=w.ok?P.errorMessage:P.error.message,[re,Ie]=j.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===re)throw Ct(f,"credential-already-in-use",P);if("EMAIL_EXISTS"===re)throw Ct(f,"email-already-in-use",P);if("USER_DISABLED"===re)throw Ct(f,"user-disabled",P);const Oe=p[re]||re.toLowerCase().replace(/[_\s]+/g,"-");if(Ie)throw Sn(f,Oe,Ie);St(f,Oe)}}catch(y){if(y instanceof ee.g)throw y;St(f,"network-request-failed",{message:String(y)})}})).apply(this,arguments)}function Tt(f,c,l,p){return ze.apply(this,arguments)}function ze(){return(ze=(0,D.A)(function*(f,c,l,p,y={}){const w=yield Q(f,c,l,p,y);return"mfaPendingCredential"in w&&St(f,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function At(f,c,l,p){const y=`${c}${l}?${p}`;return f.config.emulator?Es(f.config,y):`${f.config.apiScheme}://${y}`}function yn(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ti{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,p)=>{this.timer=setTimeout(()=>p(xt(this.auth,"network-request-failed")),te.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ct(f,c,l){const p={appName:f.name};l.email&&(p.email=l.email),l.phoneNumber&&(p.phoneNumber=l.phoneNumber);const y=xt(f,c,p);return y.customData._tokenResponse=l,y}function Rt(f){return void 0!==f&&void 0!==f.getResponse}function Rn(f){return void 0!==f&&void 0!==f.enterprise}class lr{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return yn(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function jn(){return(jn=(0,D.A)(function*(f){return(yield Q(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function to(f,c){return Is.apply(this,arguments)}function Is(){return(Is=(0,D.A)(function*(f,c){return Q(f,"GET","/v2/recaptchaConfig",B(f,c))})).apply(this,arguments)}function ws(){return(ws=(0,D.A)(function*(f,c){return Q(f,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function Di(){return(Di=(0,D.A)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function su(f,c){return yr.apply(this,arguments)}function yr(){return(yr=(0,D.A)(function*(f,c){return Q(f,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function ss(f){if(f)try{const c=new Date(Number(f));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function Pn(){return(Pn=(0,D.A)(function*(f,c=!1){const l=(0,ee.Ku)(f),p=yield l.getIdToken(c),y=Gi(p);X(y&&y.exp&&y.auth_time&&y.iat,l.auth,"internal-error");const w="object"==typeof y.firebase?y.firebase:void 0,P=w?.sign_in_provider;return{claims:y,token:p,authTime:ss(Jo(y.auth_time)),issuedAtTime:ss(Jo(y.iat)),expirationTime:ss(Jo(y.exp)),signInProvider:P||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function Jo(f){return 1e3*Number(f)}function Gi(f){const[c,l,p]=f.split(".");if(void 0===c||void 0===l||void 0===p)return Yn("JWT malformed, contained fewer than 3 sections"),null;try{const y=(0,ee.u)(l);return y?JSON.parse(y):(Yn("Failed to decode base64 JWT payload"),null)}catch(y){return Yn("Caught error parsing JWT payload as JSON",y?.toString()),null}}function no(f){const c=Gi(f);return X(c,"internal-error"),X(typeof c.exp<"u","internal-error"),X(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function vr(f,c){return os.apply(this,arguments)}function os(){return(os=(0,D.A)(function*(f,c,l=!1){if(l)return c;try{return yield c}catch(p){throw p instanceof ee.g&&function as({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(p)&&f.auth.currentUser===f&&(yield f.auth.signOut()),p}})).apply(this,arguments)}class Nc{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const y=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,y)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const p=this.getInterval(c);this.timerId=setTimeout((0,D.A)(function*(){yield l.iteration()}),p)}iteration(){var c=this;return(0,D.A)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class gi{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=ss(this.lastLoginAt),this.creationTime=ss(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function kr(f){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,D.A)(function*(f){var c;const l=f.auth,p=yield f.getIdToken(),y=yield vr(f,su(l,{idToken:p}));X(y?.users.length,l,"internal-error");const w=y.users[0];f._notifyReloadListener(w);const P=null!==(c=w.providerUserInfo)&&void 0!==c&&c.length?Xo(w.providerUserInfo):[],j=function au(f,c){return[...f.filter(p=>!c.some(y=>y.providerId===p.providerId)),...c]}(f.providerData,P),Oe=!!f.isAnonymous&&!(f.email&&w.passwordHash||j?.length),Ne={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:j,metadata:new gi(w.createdAt,w.lastLoginAt),isAnonymous:Oe};Object.assign(f,Ne)})).apply(this,arguments)}function ro(){return(ro=(0,D.A)(function*(f){const c=(0,ee.Ku)(f);yield kr(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function Xo(f){return f.map(c=>{var{providerId:l}=c,p=(0,Jt.Tt)(c,["providerId"]);return{providerId:l,uid:p.rawId||"",displayName:p.displayName||null,email:p.email||null,phoneNumber:p.phoneNumber||null,photoURL:p.photoUrl||null}})}function se(){return(se=(0,D.A)(function*(f,c){const l=yield le(f,{},(0,D.A)(function*(){const p=(0,ee.Am)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:y,apiKey:w}=f.config,P=At(f,y,"/v1/token",`key=${w}`),j=yield f._getAdditionalHeaders();return j["Content-Type"]="application/x-www-form-urlencoded",H.fetch()(P,{method:"POST",headers:j,body:p})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function T(){return(T=(0,D.A)(function*(f,c){return Q(f,"POST","/v2/accounts:revokeToken",B(f,c))})).apply(this,arguments)}class M{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){X(c.idToken,"internal-error"),X(typeof c.idToken<"u","internal-error"),X(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):no(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}updateFromIdToken(c){X(0!==c.length,"internal-error");const l=no(c);this.updateTokensAndExpiration(c,null,l)}getToken(c,l=!1){var p=this;return(0,D.A)(function*(){return l||!p.accessToken||p.isExpired?(X(p.refreshToken,c,"user-token-expired"),p.refreshToken?(yield p.refresh(c,p.refreshToken),p.accessToken):null):p.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var p=this;return(0,D.A)(function*(){const{accessToken:y,refreshToken:w,expiresIn:P}=yield function Re(f,c){return se.apply(this,arguments)}(c,l);p.updateTokensAndExpiration(y,w,Number(P))})()}updateTokensAndExpiration(c,l,p){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*p}static fromJSON(c,l){const{refreshToken:p,accessToken:y,expirationTime:w}=l,P=new M;return p&&(X("string"==typeof p,"internal-error",{appName:c}),P.refreshToken=p),y&&(X("string"==typeof y,"internal-error",{appName:c}),P.accessToken=y),w&&(X("number"==typeof w,"internal-error",{appName:c}),P.expirationTime=w),P}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new M,this.toJSON())}_performRefresh(){return st("not implemented")}}function k(f,c){X("string"==typeof f||typeof f>"u","internal-error",{appName:c})}class U{constructor(c){var{uid:l,auth:p,stsTokenManager:y}=c,w=(0,Jt.Tt)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=p,this.stsTokenManager=y,this.accessToken=y.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new gi(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,D.A)(function*(){const p=yield vr(l,l.stsTokenManager.getToken(l.auth,c));return X(p,l.auth,"internal-error"),l.accessToken!==p&&(l.accessToken=p,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),p})()}getIdTokenResult(c){return function Or(f){return Pn.apply(this,arguments)}(this,c)}reload(){return function ou(f){return ro.apply(this,arguments)}(this)}_assign(c){this!==c&&(X(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new U(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var p=this;return(0,D.A)(function*(){let y=!1;c.idToken&&c.idToken!==p.stsTokenManager.accessToken&&(p.stsTokenManager.updateFromServerResponse(c),y=!0),l&&(yield kr(p)),yield p.auth._persistUserIfCurrent(p),y&&p.auth._notifyListenersIfCurrent(p)})()}delete(){var c=this;return(0,D.A)(function*(){if((0,Me._isFirebaseServerApp)(c.auth.app))return Promise.reject(je(c.auth));const l=yield c.getIdToken();return yield vr(c,function Mc(f,c){return ws.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var p,y,w,P,j,re,Ie,Oe;const Ne=null!==(p=l.displayName)&&void 0!==p?p:void 0,hn=null!==(y=l.email)&&void 0!==y?y:void 0,Mi=null!==(w=l.phoneNumber)&&void 0!==w?w:void 0,Co=null!==(P=l.photoURL)&&void 0!==P?P:void 0,Mf=null!==(j=l.tenantId)&&void 0!==j?j:void 0,Nf=null!==(re=l._redirectEventId)&&void 0!==re?re:void 0,Of=null!==(Ie=l.createdAt)&&void 0!==Ie?Ie:void 0,JI=null!==(Oe=l.lastLoginAt)&&void 0!==Oe?Oe:void 0,{uid:Nl,emailVerified:XI,isAnonymous:g_,providerData:kf,stsTokenManager:Ol}=l;X(Nl&&Ol,c,"internal-error");const $S=M.fromJSON(this.name,Ol);X("string"==typeof Nl,c,"internal-error"),k(Ne,c.name),k(hn,c.name),X("boolean"==typeof XI,c,"internal-error"),X("boolean"==typeof g_,c,"internal-error"),k(Mi,c.name),k(Co,c.name),k(Mf,c.name),k(Nf,c.name),k(Of,c.name),k(JI,c.name);const m_=new U({uid:Nl,auth:c,email:hn,emailVerified:XI,displayName:Ne,isAnonymous:g_,photoURL:Co,phoneNumber:Mi,tenantId:Mf,stsTokenManager:$S,createdAt:Of,lastLoginAt:JI});return kf&&Array.isArray(kf)&&(m_.providerData=kf.map(Vf=>Object.assign({},Vf))),Nf&&(m_._redirectEventId=Nf),m_}static _fromIdTokenResponse(c,l,p=!1){return(0,D.A)(function*(){const y=new M;y.updateFromServerResponse(l);const w=new U({uid:l.localId,auth:c,stsTokenManager:y,isAnonymous:p});return yield kr(w),w})()}static _fromGetAccountInfoResponse(c,l,p){return(0,D.A)(function*(){const y=l.users[0];X(void 0!==y.localId,"internal-error");const w=void 0!==y.providerUserInfo?Xo(y.providerUserInfo):[],P=!(y.email&&y.passwordHash||w?.length),j=new M;j.updateFromIdToken(p);const re=new U({uid:y.localId,auth:c,stsTokenManager:j,isAnonymous:P}),Ie={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:w,metadata:new gi(y.createdAt,y.lastLoginAt),isAnonymous:!(y.email&&y.passwordHash||w?.length)};return Object.assign(re,Ie),re})()}}const we=new Map;function De(f){dt(f instanceof Function,"Expected a class definition");let c=we.get(f);return c?(dt(c instanceof f,"Instance stored in cache mismatched with class"),c):(c=new f,we.set(f,c),c)}const xn=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.A)(function*(){return!0})()}_set(l,p){var y=this;return(0,D.A)(function*(){y.storage[l]=p})()}_get(l){var p=this;return(0,D.A)(function*(){const y=p.storage[l];return void 0===y?null:y})()}_remove(l){var p=this;return(0,D.A)(function*(){delete p.storage[l]})()}_addListener(l,p){}_removeListener(l,p){}}return f.type="NONE",f})();function He(f,c,l){return`firebase:${f}:${c}:${l}`}class Jn{constructor(c,l,p){this.persistence=c,this.auth=l,this.userKey=p;const{config:y,name:w}=this.auth;this.fullUserKey=He(this.userKey,y.apiKey,w),this.fullPersistenceKey=He("persistence",y.apiKey,w),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,D.A)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?U._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,D.A)(function*(){if(l.persistence===c)return;const p=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,p?l.setCurrentUser(p):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,p="authUser"){return(0,D.A)(function*(){if(!l.length)return new Jn(De(xn),c,p);const y=(yield Promise.all(l.map(function(){var Ie=(0,D.A)(function*(Oe){if(yield Oe._isAvailable())return Oe});return function(Oe){return Ie.apply(this,arguments)}}()))).filter(Ie=>Ie);let w=y[0]||De(xn);const P=He(p,c.config.apiKey,c.name);let j=null;for(const Ie of l)try{const Oe=yield Ie._get(P);if(Oe){const Ne=U._fromJSON(c,Oe);Ie!==w&&(j=Ne),w=Ie;break}}catch{}const re=y.filter(Ie=>Ie._shouldAllowMigration);return w._shouldAllowMigration&&re.length?(w=re[0],j&&(yield w._set(P,j.toJSON())),yield Promise.all(l.map(function(){var Ie=(0,D.A)(function*(Oe){if(Oe!==w)try{yield Oe._remove(P)}catch{}});return function(Oe){return Ie.apply(this,arguments)}}())),new Jn(w,c,p)):new Jn(w,c,p)})()}}function Ke(f){const c=f.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(Je(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(Vr(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(Oc(c))return"Blackberry";if(QE(c))return"Webos";if(io(c))return"Safari";if((c.includes("chrome/")||Nt(c))&&!c.includes("edge/"))return"Chrome";if(so(c))return"Android";{const p=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===p?.length)return p[1]}return"Other"}function Vr(f=(0,ee.ZQ)()){return/firefox\//i.test(f)}function io(f=(0,ee.ZQ)()){const c=f.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function Nt(f=(0,ee.ZQ)()){return/crios\//i.test(f)}function Je(f=(0,ee.ZQ)()){return/iemobile/i.test(f)}function so(f=(0,ee.ZQ)()){return/android/i.test(f)}function Oc(f=(0,ee.ZQ)()){return/blackberry/i.test(f)}function QE(f=(0,ee.ZQ)()){return/webos/i.test(f)}function Zo(f=(0,ee.ZQ)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Pt(f=(0,ee.ZQ)()){return Zo(f)||so(f)||QE(f)||Oc(f)||/windows phone/i.test(f)||Je(f)}function rm(f,c=[]){let l;switch(f){case"Browser":l=Ke((0,ee.ZQ)());break;case"Worker":l=`${Ke((0,ee.ZQ)())}-${f}`;break;default:l=f}const p=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Me.SDK_VERSION}/${p}`}class aS{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const p=w=>new Promise((P,j)=>{try{P(c(w))}catch(re){j(re)}});p.onAbort=l,this.queue.push(p);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,D.A)(function*(){if(l.auth.currentUser===c)return;const p=[];try{for(const y of l.queue)yield y(c),y.onAbort&&p.push(y.onAbort)}catch(y){p.reverse();for(const w of p)try{w()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:y?.message})}})()}}function uu(){return(uu=(0,D.A)(function*(f,c={}){return Q(f,"GET","/v2/passwordPolicy",B(f,c))})).apply(this,arguments)}class uS{constructor(c){var l,p,y,w;const P=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=P.minPasswordLength)&&void 0!==l?l:6,P.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=P.maxPasswordLength),void 0!==P.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=P.containsLowercaseCharacter),void 0!==P.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=P.containsUppercaseCharacter),void 0!==P.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=P.containsNumericCharacter),void 0!==P.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=P.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(y=null===(p=c.allowedNonAlphanumericCharacters)||void 0===p?void 0:p.join(""))&&void 0!==y?y:"",this.forceUpgradeOnSignin=null!==(w=c.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,p,y,w,P,j;const re={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,re),this.validatePasswordCharacterOptions(c,re),re.isValid&&(re.isValid=null===(l=re.meetsMinPasswordLength)||void 0===l||l),re.isValid&&(re.isValid=null===(p=re.meetsMaxPasswordLength)||void 0===p||p),re.isValid&&(re.isValid=null===(y=re.containsLowercaseLetter)||void 0===y||y),re.isValid&&(re.isValid=null===(w=re.containsUppercaseLetter)||void 0===w||w),re.isValid&&(re.isValid=null===(P=re.containsNumericCharacter)||void 0===P||P),re.isValid&&(re.isValid=null===(j=re.containsNonAlphanumericCharacter)||void 0===j||j),re}validatePasswordLengthOptions(c,l){const p=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;p&&(l.meetsMinPasswordLength=c.length>=p),y&&(l.meetsMaxPasswordLength=c.length<=y)}validatePasswordCharacterOptions(c,l){let p;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let y=0;y<c.length;y++)p=c.charAt(y),this.updatePasswordCharacterOptionsStatuses(l,p>="a"&&p<="z",p>="A"&&p<="Z",p>="0"&&p<="9",this.allowedNonAlphanumericCharacters.includes(p))}updatePasswordCharacterOptionsStatuses(c,l,p,y,w){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=p)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=w))}}class JE{constructor(c,l,p,y){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=p,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bs(this),this.idTokenSubscription=new bs(this),this.beforeStateQueue=new aS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(c,l){var p=this;return l&&(this._popupRedirectResolver=De(l)),this._initializationPromise=this.queue((0,D.A)(function*(){var y,w;if(!p._deleted&&(p.persistenceManager=yield Jn.create(p,c),!p._deleted)){if(null!==(y=p._popupRedirectResolver)&&void 0!==y&&y._shouldInitProactively)try{yield p._popupRedirectResolver._initialize(p)}catch{}yield p.initializeCurrentUser(l),p.lastNotifiedUid=(null===(w=p.currentUser)||void 0===w?void 0:w.uid)||null,!p._deleted&&(p._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,D.A)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUserFromIdToken(c){var l=this;return(0,D.A)(function*(){try{const p=yield su(l,{idToken:c}),y=yield U._fromGetAccountInfoResponse(l,p,c);yield l.directlySetCurrentUser(y)}catch(p){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",p),yield l.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var l=this;return(0,D.A)(function*(){var p;if((0,Me._isFirebaseServerApp)(l.app)){const j=l.app.settings.authIdToken;return j?new Promise(re=>{setTimeout(()=>l.initializeCurrentUserFromIdToken(j).then(re,re))}):l.directlySetCurrentUser(null)}const y=yield l.assertedPersistence.getCurrentUser();let w=y,P=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const j=null===(p=l.redirectUser)||void 0===p?void 0:p._redirectEventId,re=w?._redirectEventId,Ie=yield l.tryRedirectSignIn(c);(!j||j===re)&&Ie?.user&&(w=Ie.user,P=!0)}if(!w)return l.directlySetCurrentUser(null);if(!w._redirectEventId){if(P)try{yield l.beforeStateQueue.runMiddleware(w)}catch(j){w=y,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(j))}return w?l.reloadAndSetCurrentUserOrClear(w):l.directlySetCurrentUser(null)}return X(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===w._redirectEventId?l.directlySetCurrentUser(w):l.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(c){var l=this;return(0,D.A)(function*(){let p=null;try{p=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return p})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,D.A)(function*(){try{yield kr(c)}catch(p){if("auth/network-request-failed"!==p?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function Zr(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var c=this;return(0,D.A)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,D.A)(function*(){if((0,Me._isFirebaseServerApp)(l.app))return Promise.reject(je(l));const p=c?(0,ee.Ku)(c):null;return p&&X(p.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(p&&p._clone(l))})()}_updateCurrentUser(c,l=!1){var p=this;return(0,D.A)(function*(){if(!p._deleted)return c&&X(p.tenantId===c.tenantId,p,"tenant-id-mismatch"),l||(yield p.beforeStateQueue.runMiddleware(c)),p.queue((0,D.A)(function*(){yield p.directlySetCurrentUser(c),p.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,D.A)(function*(){return(0,Me._isFirebaseServerApp)(c.app)?Promise.reject(je(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var l=this;return(0,Me._isFirebaseServerApp)(this.app)?Promise.reject(je(this)):this.queue((0,D.A)(function*(){yield l.assertedPersistence.setPersistence(De(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,D.A)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const p=l._getPasswordPolicyInternal();return p.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):p.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,D.A)(function*(){const l=yield function YE(f){return uu.apply(this,arguments)}(c),p=new uS(l);null===c.tenantId?c._projectPasswordPolicy=p:c._tenantPasswordPolicies[c.tenantId]=p})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new ee.FA("auth","Firebase",c())}onAuthStateChanged(c,l,p){return this.registerStateListener(this.authStateSubscription,c,l,p)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,p){return this.registerStateListener(this.idTokenSubscription,c,l,p)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const p=this.onAuthStateChanged(()=>{p(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,D.A)(function*(){if(l.currentUser){const p=yield l.currentUser.getIdToken(),y={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:p};null!=l.tenantId&&(y.tenantId=l.tenantId),yield function C(f,c){return T.apply(this,arguments)}(l,y)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var p=this;return(0,D.A)(function*(){const y=yield p.getOrInitRedirectPersistenceManager(l);return null===c?y.removeCurrentUser():y.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,D.A)(function*(){if(!l.redirectPersistenceManager){const p=c&&De(c)||l._popupRedirectResolver;X(p,l,"argument-error"),l.redirectPersistenceManager=yield Jn.create(l,[De(p._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,D.A)(function*(){var p,y;return l._isInitialized&&(yield l.queue((0,D.A)(function*(){}))),(null===(p=l._currentUser)||void 0===p?void 0:p._redirectEventId)===c?l._currentUser:(null===(y=l.redirectUser)||void 0===y?void 0:y._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,D.A)(function*(){if(c===l.currentUser)return l.queue((0,D.A)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const p=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==p&&(this.lastNotifiedUid=p,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,p,y){if(this._deleted)return()=>{};const w="function"==typeof l?l:l.next.bind(l);let P=!1;const j=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(j,this,"internal-error"),j.then(()=>{P||w(this.currentUser)}),"function"==typeof l){const re=c.addObserver(l,p,y);return()=>{P=!0,re()}}{const re=c.addObserver(l);return()=>{P=!0,re()}}}directlySetCurrentUser(c){var l=this;return(0,D.A)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=rm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,D.A)(function*(){var l;const p={"X-Client-Version":c.clientVersion};c.app.options.appId&&(p["X-Firebase-gmpid"]=c.app.options.appId);const y=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();y&&(p["X-Firebase-Client"]=y);const w=yield c._getAppCheckToken();return w&&(p["X-Firebase-AppCheck"]=w),p})()}_getAppCheckToken(){var c=this;return(0,D.A)(function*(){var l;const p=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return p?.error&&function Bn(f,...c){Cn.logLevel<=yt.$b.WARN&&Cn.warn(`Auth (${Me.SDK_VERSION}): ${f}`,...c)}(`Error while retrieving App Check token: ${p.error}`),p?.token})()}}function Xt(f){return(0,ee.Ku)(f)}class bs{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,ee.tD)(l=>this.observer=l)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Vc={loadJS:()=>(0,D.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function im(f){return Vc.loadJS(f)}function sm(f){return`__${f}${Math.floor(1e6*Math.random())}`}class Qe{constructor(c){this.type="recaptcha-enterprise",this.auth=Xt(c)}verify(c="verify",l=!1){var p=this;return(0,D.A)(function*(){function w(){return w=(0,D.A)(function*(j){if(!l){if(null==j.tenantId&&null!=j._agentRecaptchaConfig)return j._agentRecaptchaConfig.siteKey;if(null!=j.tenantId&&void 0!==j._tenantRecaptchaConfigs[j.tenantId])return j._tenantRecaptchaConfigs[j.tenantId].siteKey}return new Promise(function(){var re=(0,D.A)(function*(Ie,Oe){to(j,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ne=>{if(void 0!==Ne.recaptchaKey){const hn=new lr(Ne);return null==j.tenantId?j._agentRecaptchaConfig=hn:j._tenantRecaptchaConfigs[j.tenantId]=hn,Ie(hn.siteKey)}Oe(new Error("recaptcha Enterprise site key undefined"))}).catch(Ne=>{Oe(Ne)})});return function(Ie,Oe){return re.apply(this,arguments)}}())}),w.apply(this,arguments)}function P(j,re,Ie){const Oe=window.grecaptcha;Rn(Oe)?Oe.enterprise.ready(()=>{Oe.enterprise.execute(j,{action:c}).then(Ne=>{re(Ne)}).catch(()=>{re("NO_RECAPTCHA")})}):Ie(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((j,re)=>{(function y(j){return w.apply(this,arguments)})(p.auth).then(Ie=>{if(!l&&Rn(window.grecaptcha))P(Ie,j,re);else{if(typeof window>"u")return void re(new Error("RecaptchaVerifier is only supported in browser"));let Oe=function XE(){return Vc.recaptchaEnterpriseScript}();0!==Oe.length&&(Oe+=Ie),im(Oe).then(()=>{P(Ie,j,re)}).catch(Ne=>{re(Ne)})}}).catch(Ie=>{re(Ie)})})})()}}function ZE(f,c,l){return om.apply(this,arguments)}function om(){return(om=(0,D.A)(function*(f,c,l,p=!1){const y=new Qe(f);let w;try{w=yield y.verify(l)}catch{w=yield y.verify(l,!0)}const P=Object.assign({},c);return Object.assign(P,p?{captchaResp:w}:{captchaResponse:w}),Object.assign(P,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(P,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),P})).apply(this,arguments)}function Fc(f,c,l,p){return Le.apply(this,arguments)}function Le(){return Le=(0,D.A)(function*(f,c,l,p){var y;if(null!==(y=f._getRecaptchaConfig())&&void 0!==y&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const w=yield ZE(f,c,l,"getOobCode"===l);return p(f,w)}return p(f,c).catch(function(){var w=(0,D.A)(function*(P){if("auth/missing-recaptcha-token"===P.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const j=yield ZE(f,c,l,"getOobCode"===l);return p(f,j)}return Promise.reject(P)});return function(P){return w.apply(this,arguments)}}())}),Le.apply(this,arguments)}function am(f){const c=f.indexOf(":");return c<0?"":f.substr(0,c+1)}function cu(f){if(!f)return null;const c=Number(f);return isNaN(c)?null:c}class oo{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return st("not implemented")}_getIdTokenResponse(c){return st("not implemented")}_linkToIdToken(c,l){return st("not implemented")}_getReauthenticationResolver(c){return st("not implemented")}}function um(f,c){return ct.apply(this,arguments)}function ct(){return(ct=(0,D.A)(function*(f,c){return Q(f,"POST","/v1/accounts:resetPassword",B(f,c))})).apply(this,arguments)}function Bc(){return(Bc=(0,D.A)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Fr(f,c){return jc.apply(this,arguments)}function jc(){return(jc=(0,D.A)(function*(f,c){return Q(f,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function Ut(){return(Ut=(0,D.A)(function*(f,c){return Q(f,"POST","/v1/accounts:update",B(f,c))})).apply(this,arguments)}function gS(f,c){return cm.apply(this,arguments)}function cm(){return(cm=(0,D.A)(function*(f,c){return Tt(f,"POST","/v1/accounts:signInWithPassword",B(f,c))})).apply(this,arguments)}function ve(f,c){return lu.apply(this,arguments)}function lu(){return(lu=(0,D.A)(function*(f,c){return Q(f,"POST","/v1/accounts:sendOobCode",B(f,c))})).apply(this,arguments)}function $c(){return($c=(0,D.A)(function*(f,c){return ve(f,c)})).apply(this,arguments)}function Dh(f,c){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,D.A)(function*(f,c){return ve(f,c)})).apply(this,arguments)}function Rh(f,c){return lm.apply(this,arguments)}function lm(){return(lm=(0,D.A)(function*(f,c){return ve(f,c)})).apply(this,arguments)}function dm(){return(dm=(0,D.A)(function*(f,c){return ve(f,c)})).apply(this,arguments)}function hm(){return(hm=(0,D.A)(function*(f,c){return Tt(f,"POST","/v1/accounts:signInWithEmailLink",B(f,c))})).apply(this,arguments)}function hu(){return(hu=(0,D.A)(function*(f,c){return Tt(f,"POST","/v1/accounts:signInWithEmailLink",B(f,c))})).apply(this,arguments)}class Ts extends oo{constructor(c,l,p,y=null){super("password",p),this._email=c,this._password=l,this._tenantId=y}static _fromEmailAndPassword(c,l){return new Ts(c,l,"password")}static _fromEmailAndCode(c,l,p=null){return new Ts(c,l,"emailLink",p)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,D.A)(function*(){switch(l.signInMethod){case"password":return Fc(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",gS);case"emailLink":return function _S(f,c){return hm.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:St(c,"internal-error")}})()}_linkToIdToken(c,l){var p=this;return(0,D.A)(function*(){switch(p.signInMethod){case"password":return Fc(c,{idToken:l,returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fr);case"emailLink":return function du(f,c){return hu.apply(this,arguments)}(c,{idToken:l,email:p._email,oobCode:p._password});default:St(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function us(f,c){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,D.A)(function*(f,c){return Tt(f,"POST","/v1/accounts:signInWithIdp",B(f,c))})).apply(this,arguments)}class Si extends oo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Si(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):St("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:y}=l,w=(0,Jt.Tt)(l,["providerId","signInMethod"]);if(!p||!y)return null;const P=new Si(p,y);return P.idToken=w.idToken||void 0,P.accessToken=w.accessToken||void 0,P.secret=w.secret,P.nonce=w.nonce,P.pendingToken=w.pendingToken||null,P}_getIdTokenResponse(c){return us(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,us(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,us(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,ee.Am)(l)}return c}}function xh(){return(xh=(0,D.A)(function*(f,c){return Q(f,"POST","/v1/accounts:sendVerificationCode",B(f,c))})).apply(this,arguments)}function Mh(){return(Mh=(0,D.A)(function*(f,c){return Tt(f,"POST","/v1/accounts:signInWithPhoneNumber",B(f,c))})).apply(this,arguments)}function Hc(){return(Hc=(0,D.A)(function*(f,c){const l=yield Tt(f,"POST","/v1/accounts:signInWithPhoneNumber",B(f,c));if(l.temporaryProof)throw Ct(f,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const xe={USER_NOT_FOUND:"user-not-found"};function fu(){return(fu=(0,D.A)(function*(f,c){return Tt(f,"POST","/v1/accounts:signInWithPhoneNumber",B(f,Object.assign(Object.assign({},c),{operation:"REAUTH"})),xe)})).apply(this,arguments)}class Ri extends oo{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new Ri({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new Ri({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function Ds(f,c){return Mh.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function ye(f,c){return Hc.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function zc(f,c){return fu.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:p,verificationCode:y}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:p,code:y}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:p,phoneNumber:y,temporaryProof:w}=c;return p||l||y||w?new Ri({verificationId:l,verificationCode:p,phoneNumber:y,temporaryProof:w}):null}}class pu{constructor(c){var l,p,y,w,P,j;const re=(0,ee.I9)((0,ee.hp)(c)),Ie=null!==(l=re.apiKey)&&void 0!==l?l:null,Oe=null!==(p=re.oobCode)&&void 0!==p?p:null,Ne=function nI(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(y=re.mode)&&void 0!==y?y:null);X(Ie&&Oe&&Ne,"argument-error"),this.apiKey=Ie,this.operation=Ne,this.code=Oe,this.continueUrl=null!==(w=re.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(P=re.languageCode)&&void 0!==P?P:null,this.tenantId=null!==(j=re.tenantId)&&void 0!==j?j:null}static parseLink(c){const l=function rI(f){const c=(0,ee.I9)((0,ee.hp)(f)).link,l=c?(0,ee.I9)((0,ee.hp)(c)).deep_link_id:null,p=(0,ee.I9)((0,ee.hp)(f)).deep_link_id;return(p?(0,ee.I9)((0,ee.hp)(p)).link:null)||p||l||c||f}(c);try{return new pu(l)}catch{return null}}}let ta=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(l,p){return Ts._fromEmailAndPassword(l,p)}static credentialWithLink(l,p){const y=pu.parseLink(p);return X(y,"argument-error"),Ts._fromEmailAndCode(l,y.code,y.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class Hn{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class Er extends Hn{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class ht extends Er{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return X("providerId"in l&&"signInMethod"in l,"argument-error"),Si._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return X(c.idToken||c.accessToken,"argument-error"),Si._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return ht.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return ht.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:p,oauthTokenSecret:y,pendingToken:w,nonce:P,providerId:j}=c;if(!p&&!y&&!l&&!w||!j)return null;try{return new ht(j)._credential({idToken:l,accessToken:p,nonce:P,pendingToken:w})}catch{return null}}}let gu=(()=>{class f extends Er{constructor(){super("facebook.com")}static credential(l){return Si._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),Gc=(()=>{class f extends Er{constructor(){super("google.com"),this.addScope("profile")}static credential(l,p){return Si._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:p})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:p,oauthAccessToken:y}=l;if(!p&&!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),qc=(()=>{class f extends Er{constructor(){super("github.com")}static credential(l){return Si._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return f.credential(l.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class Lr extends oo{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return us(c,this.buildRequest())}_linkToIdToken(c,l){const p=this.buildRequest();return p.idToken=l,us(c,p)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,us(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:p,signInMethod:y,pendingToken:w}=l;return p&&y&&w&&p===y?new Lr(p,w):null}static _create(c,l){return new Lr(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _u extends Hn{constructor(c){X(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return _u.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return _u.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=Lr.fromJSON(c);return X(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:p}=c;if(!l||!p)return null;try{return Lr._create(p,l)}catch{return null}}}let Nh=(()=>{class f extends Er{constructor(){super("twitter.com")}static credential(l,p){return Si._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:p})}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:p,oauthTokenSecret:y}=l;if(!p||!y)return null;try{return f.credential(p,y)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Wc(f,c){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,D.A)(function*(f,c){return Tt(f,"POST","/v1/accounts:signUp",B(f,c))})).apply(this,arguments)}class ti{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,p,y=!1){return(0,D.A)(function*(){const w=yield U._fromIdTokenResponse(c,p,y),P=na(p);return new ti({user:w,providerId:P,_tokenResponse:p,operationType:l})})()}static _forOperation(c,l,p){return(0,D.A)(function*(){yield c._updateTokensIfNecessary(p,!0);const y=na(p);return new ti({user:c,providerId:y,_tokenResponse:p,operationType:l})})()}}function na(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function Qc(){return(Qc=(0,D.A)(function*(f){var c;if((0,Me._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const l=Xt(f);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new ti({user:l.currentUser,providerId:null,operationType:"signIn"});const p=yield Wc(l,{returnSecureToken:!0}),y=yield ti._fromIdTokenResponse(l,"signIn",p,!0);return yield l._updateCurrentUser(y.user),y})).apply(this,arguments)}class Yc extends ee.g{constructor(c,l,p,y){var w;super(l.code,l.message),this.operationType=p,this.user=y,Object.setPrototypeOf(this,Yc.prototype),this.customData={appName:c.name,tenantId:null!==(w=c.tenantId)&&void 0!==w?w:void 0,_serverResponse:l.customData._serverResponse,operationType:p}}static _fromErrorAndOperation(c,l,p,y){return new Yc(c,l,p,y)}}function Oh(f,c,l,p){return("reauthenticate"===c?l._getReauthenticationResolver(f):l._getIdTokenResponse(f)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?Yc._fromErrorAndOperation(f,w,c,p):w})}function gm(f){return new Set(f.map(({providerId:c})=>c).filter(c=>!!c))}function ni(){return ni=(0,D.A)(function*(f,c){const l=(0,ee.Ku)(f);yield Xc(!0,l,c);const{providerUserInfo:p}=yield function As(f,c){return Di.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),y=gm(p||[]);return l.providerData=l.providerData.filter(w=>y.has(w.providerId)),y.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),ni.apply(this,arguments)}function kh(f,c){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,D.A)(function*(f,c,l=!1){const p=yield vr(f,c._linkToIdToken(f.auth,yield f.getIdToken()),l);return ti._forOperation(f,"link",p)})).apply(this,arguments)}function Xc(f,c,l){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,D.A)(function*(f,c,l){yield kr(c);const y=!1===f?"provider-already-linked":"no-such-provider";X(gm(c.providerData).has(l)===f,c.auth,y)})).apply(this,arguments)}function mm(f,c){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,D.A)(function*(f,c,l=!1){const{auth:p}=f;if((0,Me._isFirebaseServerApp)(p.app))return Promise.reject(je(p));const y="reauthenticate";try{const w=yield vr(f,Oh(p,y,c,f),l);X(w.idToken,p,"internal-error");const P=Gi(w.idToken);X(P,p,"internal-error");const{sub:j}=P;return X(f.uid===j,p,"user-mismatch"),ti._forOperation(f,y,w)}catch(w){throw"auth/user-not-found"===w?.code&&St(p,"user-mismatch"),w}})).apply(this,arguments)}function Lh(f,c){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,D.A)(function*(f,c,l=!1){if((0,Me._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const p="signIn",y=yield Oh(f,p,c),w=yield ti._fromIdTokenResponse(f,p,y);return l||(yield f._updateCurrentUser(w.user)),w})).apply(this,arguments)}function Zc(f,c){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,D.A)(function*(f,c){return Lh(Xt(f),c)})).apply(this,arguments)}function Ur(f,c){return jh.apply(this,arguments)}function jh(){return(jh=(0,D.A)(function*(f,c){const l=(0,ee.Ku)(f);return yield Xc(!1,l,c.providerId),kh(l,c)})).apply(this,arguments)}function _m(f,c){return $h.apply(this,arguments)}function $h(){return($h=(0,D.A)(function*(f,c){return mm((0,ee.Ku)(f),c)})).apply(this,arguments)}function Hh(){return(Hh=(0,D.A)(function*(f,c){return Tt(f,"POST","/v1/accounts:signInWithCustomToken",B(f,c))})).apply(this,arguments)}function Ye(){return Ye=(0,D.A)(function*(f,c){if((0,Me._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const l=Xt(f),p=yield function ri(f,c){return Hh.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),y=yield ti._fromIdTokenResponse(l,"signIn",p);return yield l._updateCurrentUser(y.user),y}),Ye.apply(this,arguments)}class Xn{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?gt._fromServerResponse(c,l):"totpInfo"in l?zn._fromServerResponse(c,l):St(c,"internal-error")}}class gt extends Xn{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new gt(l)}}class zn extends Xn{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new zn(l)}}function Zn(f,c,l){var p;X((null===(p=l.url)||void 0===p?void 0:p.length)>0,f,"invalid-continue-uri"),X(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(X(l.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(X(l.android.packageName.length>0,f,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function Rs(f){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,D.A)(function*(f){const c=Xt(f);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function el(){return(el=(0,D.A)(function*(f,c,l){const p=Xt(f),y={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&Zn(p,y,l),yield Fc(p,y,"getOobCode",Dh)})).apply(this,arguments)}function zh(){return zh=(0,D.A)(function*(f,c,l){yield um((0,ee.Ku)(f),{oobCode:c,newPassword:l}).catch(function(){var p=(0,D.A)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&Rs(f),y});return function(y){return p.apply(this,arguments)}}())}),zh.apply(this,arguments)}function Zt(){return Zt=(0,D.A)(function*(f,c){yield function pS(f,c){return Ut.apply(this,arguments)}((0,ee.Ku)(f),{oobCode:c})}),Zt.apply(this,arguments)}function Pe(f,c){return et.apply(this,arguments)}function et(){return(et=(0,D.A)(function*(f,c){const l=(0,ee.Ku)(f),p=yield um(l,{oobCode:c}),y=p.requestType;switch(X(y,l,"internal-error"),y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(p.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(p.mfaInfo,l,"internal-error");default:X(p.email,l,"internal-error")}let w=null;return p.mfaInfo&&(w=Xn._fromServerResponse(Xt(l),p.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.newEmail:p.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===p.requestType?p.email:p.newEmail)||null,multiFactorInfo:w},operation:y}})).apply(this,arguments)}function ii(){return(ii=(0,D.A)(function*(f,c){const{data:l}=yield Pe((0,ee.Ku)(f),c);return l.email})).apply(this,arguments)}function er(){return(er=(0,D.A)(function*(f,c,l){if((0,Me._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const p=Xt(f),P=yield Fc(p,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Wc).catch(re=>{throw"auth/password-does-not-meet-requirements"===re.code&&Rs(f),re}),j=yield ti._fromIdTokenResponse(p,"signIn",P);return yield p._updateCurrentUser(j.user),j})).apply(this,arguments)}function qi(){return(qi=(0,D.A)(function*(f,c,l){const p=Xt(f),y={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function w(P,j){X(j.handleCodeInApp,p,"argument-error"),j&&Zn(p,P,j)})(y,l),yield Fc(p,y,"getOobCode",Rh)})).apply(this,arguments)}function ao(){return(ao=(0,D.A)(function*(f,c,l){if((0,Me._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const p=(0,ee.Ku)(f),y=ta.credentialWithLink(c,l||cn());return X(y._tenantId===(p.tenantId||null),p,"tenant-id-mismatch"),Zc(p,y)})).apply(this,arguments)}function Ps(){return(Ps=(0,D.A)(function*(f,c){return Q(f,"POST","/v1/accounts:createAuthUri",B(f,c))})).apply(this,arguments)}function uo(){return uo=(0,D.A)(function*(f,c){const p={identifier:c,continueUri:zt()?cn():"http://localhost"},{signinMethods:y}=yield function Em(f,c){return Ps.apply(this,arguments)}((0,ee.Ku)(f),p);return y||[]}),uo.apply(this,arguments)}function _i(){return _i=(0,D.A)(function*(f,c){const l=(0,ee.Ku)(f),y={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};c&&Zn(l.auth,y,c);const{email:w}=yield function Th(f,c){return $c.apply(this,arguments)}(l.auth,y);w!==f.email&&(yield f.reload())}),_i.apply(this,arguments)}function nl(){return nl=(0,D.A)(function*(f,c,l){const p=(0,ee.Ku)(f),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:c};l&&Zn(p.auth,w,l);const{email:P}=yield function mS(f,c){return dm.apply(this,arguments)}(p.auth,w);P!==f.email&&(yield f.reload())}),nl.apply(this,arguments)}function Pi(){return(Pi=(0,D.A)(function*(f,c){return Q(f,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function co(){return co=(0,D.A)(function*(f,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const p=(0,ee.Ku)(f),w={idToken:yield p.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},P=yield vr(p,function xs(f,c){return Pi.apply(this,arguments)}(p.auth,w));p.displayName=P.displayName||null,p.photoURL=P.photoUrl||null;const j=p.providerData.find(({providerId:re})=>"password"===re);j&&(j.displayName=p.displayName,j.photoURL=p.photoURL),yield p._updateTokensIfNecessary(P)}),co.apply(this,arguments)}function rl(f,c,l){return il.apply(this,arguments)}function il(){return il=(0,D.A)(function*(f,c,l){const{auth:p}=f,w={idToken:yield f.getIdToken(),returnSecureToken:!0};c&&(w.email=c),l&&(w.password=l);const P=yield vr(f,function bh(f,c){return Bc.apply(this,arguments)}(p,w));yield f._updateTokensIfNecessary(P,!0)}),il.apply(this,arguments)}class cs{constructor(c,l,p={}){this.isNewUser=c,this.providerId=l,this.profile=p}}class lo extends cs{constructor(c,l,p,y){super(c,l,p),this.username=y}}class Iu extends cs{constructor(c,l){super(c,"facebook.com",l)}}class ir extends lo{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class vS extends cs{constructor(c,l){super(c,"google.com",l)}}class Br extends lo{constructor(c,l,p){super(c,"twitter.com",l,p)}}function wr(f){const{user:c,_tokenResponse:l}=f;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function Wi(f){var c,l;if(!f)return null;const{providerId:p}=f,y=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},w=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!p&&f?.idToken){const P=null===(l=null===(c=Gi(f.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(P)return new cs(w,"anonymous"!==P&&"custom"!==P?P:null)}if(!p)return null;switch(p){case"facebook.com":return new Iu(w,y);case"github.com":return new ir(w,y);case"google.com":return new vS(w,y);case"twitter.com":return new Br(w,y,f.screenName||null);case"custom":case"anonymous":return new cs(w,null);default:return new cs(w,p,y)}}(l)}class aa{constructor(c,l,p){this.type=c,this.credential=l,this.user=p}static _fromIdtoken(c,l){return new aa("enroll",c,l)}static _fromMfaPendingCredential(c){return new aa("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,p;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return aa._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(p=c.multiFactorSession)&&void 0!==p&&p.idToken)return aa._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Am{constructor(c,l,p){this.session=c,this.hints=l,this.signInResolver=p}static _fromError(c,l){const p=Xt(c),y=l.customData._serverResponse,w=(y.mfaInfo||[]).map(j=>Xn._fromServerResponse(p,j));X(y.mfaPendingCredential,p,"internal-error");const P=aa._fromMfaPendingCredential(y.mfaPendingCredential);return new Am(P,w,function(){var j=(0,D.A)(function*(re){const Ie=yield re._process(p,P);delete y.mfaInfo,delete y.mfaPendingCredential;const Oe=Object.assign(Object.assign({},y),{idToken:Ie.idToken,refreshToken:Ie.refreshToken});switch(l.operationType){case"signIn":const Ne=yield ti._fromIdTokenResponse(p,l.operationType,Oe);return yield p._updateCurrentUser(Ne.user),Ne;case"reauthenticate":return X(l.user,p,"internal-error"),ti._forOperation(l.user,l.operationType,Oe);default:St(p,"internal-error")}});return function(re){return j.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,D.A)(function*(){return l.signInResolver(c)})()}}class Cm{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(p=>Xn._fromServerResponse(c.auth,p)))})}static _fromUser(c){return new Cm(c)}getSession(){var c=this;return(0,D.A)(function*(){return aa._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var p=this;return(0,D.A)(function*(){const y=c,w=yield p.getSession(),P=yield vr(p.user,y._process(p.user.auth,w,l));return yield p.user._updateTokensIfNecessary(P),p.user.reload()})()}unenroll(c){var l=this;return(0,D.A)(function*(){const p="string"==typeof c?c:c.uid,y=yield l.user.getIdToken();try{const w=yield vr(l.user,function DS(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:withdraw",B(f,c))}(l.user.auth,{idToken:y,mfaEnrollmentId:p}));l.enrolledFactors=l.enrolledFactors.filter(({uid:P})=>P!==p),yield l.user._updateTokensIfNecessary(w),yield l.user.reload()}catch(w){throw w}})()}}const sl=new WeakMap,Wh="__sak";class aI{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(Wh,"1"),this.storage.removeItem(Wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Kh=(()=>{class f extends aI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,p)=>this.onStorageEvent(l,p),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Pt(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const p of Object.keys(this.listeners)){const y=this.storage.getItem(p),w=this.localCache[p];y!==w&&l(p,w,y)}}onStorageEvent(l,p=!1){if(!l.key)return void this.forAllChangedKeys((j,re,Ie)=>{this.notifyListeners(j,Ie)});const y=l.key;p?this.detachListener():this.stopPolling();const w=()=>{const j=this.storage.getItem(y);!p&&this.localCache[y]===j||this.notifyListeners(y,j)},P=this.storage.getItem(y);!function Ze(){return(0,ee.lT)()&&10===document.documentMode}()||P===l.newValue||l.newValue===l.oldValue?w():setTimeout(w,10)}notifyListeners(l,p){this.localCache[l]=p;const y=this.listeners[l];if(y)for(const w of Array.from(y))w(p&&JSON.parse(p))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,p,y)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:p,newValue:y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,p){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,p){var y=()=>super._set,w=this;return(0,D.A)(function*(){yield y().call(w,l,p),w.localCache[l]=JSON.stringify(p)})()}_get(l){var p=()=>super._get,y=this;return(0,D.A)(function*(){const w=yield p().call(y,l);return y.localCache[l]=JSON.stringify(w),w})()}_remove(l){var p=()=>super._remove,y=this;return(0,D.A)(function*(){yield p().call(y,l),delete y.localCache[l]})()}}return f.type="LOCAL",f})(),tn=(()=>{class f extends aI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,p){}_removeListener(l,p){}}return f.type="SESSION",f})();let yi=(()=>{class f{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const p=this.receivers.find(w=>w.isListeningto(l));if(p)return p;const y=new f(l);return this.receivers.push(y),y}isListeningto(l){return this.eventTarget===l}handleEvent(l){var p=this;return(0,D.A)(function*(){const y=l,{eventId:w,eventType:P,data:j}=y.data,re=p.handlersMap[P];if(!re?.size)return;y.ports[0].postMessage({status:"ack",eventId:w,eventType:P});const Ie=Array.from(re).map(function(){var Ne=(0,D.A)(function*(hn){return hn(y.origin,j)});return function(hn){return Ne.apply(this,arguments)}}()),Oe=yield function ol(f){return Promise.all(f.map(function(){var c=(0,D.A)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(p){return{fulfilled:!1,reason:p}}});return function(l){return c.apply(this,arguments)}}()))}(Ie);y.ports[0].postMessage({status:"done",eventId:w,eventType:P,response:Oe})})()}_subscribe(l,p){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(p)}_unsubscribe(l,p){this.handlersMap[l]&&p&&this.handlersMap[l].delete(p),(!p||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function ua(f="",c=10){let l="";for(let p=0;p<c;p++)l+=Math.floor(10*Math.random());return f+l}class Tm{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,p=50){var y=this;return(0,D.A)(function*(){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let P,j;return new Promise((re,Ie)=>{const Oe=ua("",20);w.port1.start();const Ne=setTimeout(()=>{Ie(new Error("unsupported_event"))},p);j={messageChannel:w,onMessage(hn){const Mi=hn;if(Mi.data.eventId===Oe)switch(Mi.data.status){case"ack":clearTimeout(Ne),P=setTimeout(()=>{Ie(new Error("timeout"))},3e3);break;case"done":clearTimeout(P),re(Mi.data.response);break;default:clearTimeout(Ne),clearTimeout(P),Ie(new Error("invalid_response"))}}},y.handlers.add(j),w.port1.addEventListener("message",j.onMessage),y.target.postMessage({eventType:c,eventId:Oe,data:l},[w.port2])}).finally(()=>{j&&y.removeMessageHandler(j)})})()}}function Dn(){return window}function wu(){return typeof Dn().WorkerGlobalScope<"u"&&"function"==typeof Dn().importScripts}function Au(){return(Au=(0,D.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Yh="firebaseLocalStorageDb",po="firebaseLocalStorage",ca="fbase_key";class Ki{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function Cu(f,c){return f.transaction([po],c?"readwrite":"readonly").objectStore(po)}function xm(){const f=indexedDB.open(Yh,1);return new Promise((c,l)=>{f.addEventListener("error",()=>{l(f.error)}),f.addEventListener("upgradeneeded",()=>{const p=f.result;try{p.createObjectStore(po,{keyPath:ca})}catch(y){l(y)}}),f.addEventListener("success",(0,D.A)(function*(){const p=f.result;p.objectStoreNames.contains(po)?c(p):(p.close(),yield function RS(){const f=indexedDB.deleteDatabase(Yh);return new Ki(f).toPromise()}(),c(yield xm()))}))})}function uI(f,c,l){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,D.A)(function*(f,c,l){const p=Cu(f,!0).put({[ca]:c,value:l});return new Ki(p).toPromise()})).apply(this,arguments)}function Mm(){return(Mm=(0,D.A)(function*(f,c){const l=Cu(f,!1).get(c),p=yield new Ki(l).toPromise();return void 0===p?null:p.value})).apply(this,arguments)}function Xh(f,c){const l=Cu(f,!0).delete(c);return new Ki(l).toPromise()}const bu=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,D.A)(function*(){return l.db||(l.db=yield xm()),l.db})()}_withRetries(l){var p=this;return(0,D.A)(function*(){let y=0;for(;;)try{const w=yield p._openDb();return yield l(w)}catch(w){if(y++>3)throw w;p.db&&(p.db.close(),p.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,D.A)(function*(){return wu()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,D.A)(function*(){l.receiver=yi._getInstance(function Rm(){return wu()?self:null}()),l.receiver._subscribe("keyChanged",function(){var p=(0,D.A)(function*(y,w){return{keyProcessed:(yield l._poll()).includes(w.key)}});return function(y,w){return p.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var p=(0,D.A)(function*(y,w){return["keyChanged"]});return function(y,w){return p.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,D.A)(function*(){var p,y;if(l.activeServiceWorker=yield function Sm(){return Au.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new Tm(l.activeServiceWorker);const w=yield l.sender._send("ping",{},800);w&&null!==(p=w[0])&&void 0!==p&&p.fulfilled&&null!==(y=w[0])&&void 0!==y&&y.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var p=this;return(0,D.A)(function*(){if(p.sender&&p.activeServiceWorker&&function Qh(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===p.activeServiceWorker)try{yield p.sender._send("keyChanged",{key:l},p.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.A)(function*(){try{if(!indexedDB)return!1;const l=yield xm();return yield uI(l,Wh,"1"),yield Xh(l,Wh),!0}catch{}return!1})()}_withPendingWrite(l){var p=this;return(0,D.A)(function*(){p.pendingWrites++;try{yield l()}finally{p.pendingWrites--}})()}_set(l,p){var y=this;return(0,D.A)(function*(){return y._withPendingWrite((0,D.A)(function*(){return yield y._withRetries(w=>uI(w,l,p)),y.localCache[l]=p,y.notifyServiceWorker(l)}))})()}_get(l){var p=this;return(0,D.A)(function*(){const y=yield p._withRetries(w=>function cI(f,c){return Mm.apply(this,arguments)}(w,l));return p.localCache[l]=y,y})()}_remove(l){var p=this;return(0,D.A)(function*(){return p._withPendingWrite((0,D.A)(function*(){return yield p._withRetries(y=>Xh(y,l)),delete p.localCache[l],p.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,D.A)(function*(){const p=yield l._withRetries(P=>{const j=Cu(P,!1).getAll();return new Ki(j).toPromise()});if(!p)return[];if(0!==l.pendingWrites)return[];const y=[],w=new Set;if(0!==p.length)for(const{fbase_key:P,value:j}of p)w.add(P),JSON.stringify(l.localCache[P])!==JSON.stringify(j)&&(l.notifyListeners(P,j),y.push(P));for(const P of Object.keys(l.localCache))l.localCache[P]&&!w.has(P)&&(l.notifyListeners(P,null),y.push(P));return y})()}notifyListeners(l,p){this.localCache[l]=p;const y=this.listeners[l];if(y)for(const w of Array.from(y))w(p)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,D.A)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,p){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(p)}_removeListener(l,p){this.listeners[l]&&(this.listeners[l].delete(p),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),al=1e12;class fI{constructor(c){this.auth=c,this.counter=al,this._widgets=new Map}render(c,l){const p=this.counter;return this._widgets.set(p,new Vm(c,this.auth.name,l||{})),this.counter++,p}reset(c){var l;const p=c||al;null===(l=this._widgets.get(p))||void 0===l||l.delete(),this._widgets.delete(p)}getResponse(c){var l;return(null===(l=this._widgets.get(c||al))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,D.A)(function*(){var p;return null===(p=l._widgets.get(c||al))||void 0===p||p.execute(),""})()}}class Vm{constructor(c,l,p){this.params=p,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const y="string"==typeof c?document.getElementById(c):c;X(y,"argument-error",{appName:l}),this.container=y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function pI(f){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<f;p++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ul=sm("rcb"),gI=new Mr(3e4,6e4);class xS{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Dn().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return X(function mI(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&Rt(Dn().grecaptcha)?Promise.resolve(Dn().grecaptcha):new Promise((p,y)=>{const w=Dn().setTimeout(()=>{y(xt(c,"network-request-failed"))},gI.get());Dn()[ul]=()=>{Dn().clearTimeout(w),delete Dn()[ul];const j=Dn().grecaptcha;if(!j||!Rt(j))return void y(xt(c,"internal-error"));const re=j.render;j.render=(Ie,Oe)=>{const Ne=re(Ie,Oe);return this.counter++,Ne},this.hostLanguage=l,p(j)},im(`${function lS(){return Vc.recaptchaV2Script}()}?${(0,ee.Am)({onload:ul,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(w),y(xt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=Dn().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class vi{load(c){return(0,D.A)(function*(){return new fI(c)})()}clearedOneInstance(){}}const ef="recaptcha",_I={theme:"light",type:"image"};class yI{constructor(c,l,p=Object.assign({},_I)){this.parameters=p,this.type=ef,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Xt(c),this.isInvisible="invisible"===this.parameters.size,X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const y="string"==typeof l?document.getElementById(l):l;X(y,this.auth,"argument-error"),this.container=y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new vi:new xS,this.validateStartingState()}verify(){var c=this;return(0,D.A)(function*(){c.assertNotDestroyed();const l=yield c.render(),p=c.getAssertedRecaptcha();return p.getResponse(l)||new Promise(w=>{const P=j=>{j&&(c.tokenChangeListeners.delete(P),w(j))};c.tokenChangeListeners.add(P),c.isInvisible&&p.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(p=>p(l)),"function"==typeof c)c(l);else if("string"==typeof c){const p=Dn()[c];"function"==typeof p&&p(l)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,D.A)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const p=document.createElement("div");l.appendChild(p),l=p}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,D.A)(function*(){X(zt()&&!wu(),c.auth,"internal-error"),yield function Fm(){let f=null;return new Promise(c=>{"complete"!==document.readyState?(f=()=>c(),window.addEventListener("load",f)):c()}).catch(c=>{throw f&&window.removeEventListener("load",f),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function Nr(f){return jn.apply(this,arguments)}(c.auth);X(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class cl{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=Ri._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function Tu(){return(Tu=(0,D.A)(function*(f,c,l){if((0,Me._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const p=Xt(f),y=yield Ot(p,c,(0,ee.Ku)(l));return new cl(y,w=>Zc(p,w))})).apply(this,arguments)}function Ei(){return(Ei=(0,D.A)(function*(f,c,l){const p=(0,ee.Ku)(f);yield Xc(!1,p,"phone");const y=yield Ot(p.auth,c,(0,ee.Ku)(l));return new cl(y,w=>Ur(p,w))})).apply(this,arguments)}function ll(){return(ll=(0,D.A)(function*(f,c,l){const p=(0,ee.Ku)(f);if((0,Me._isFirebaseServerApp)(p.auth.app))return Promise.reject(je(p.auth));const y=yield Ot(p.auth,c,(0,ee.Ku)(l));return new cl(y,w=>_m(p,w))})).apply(this,arguments)}function Ot(f,c,l){return Du.apply(this,arguments)}function Du(){return Du=(0,D.A)(function*(f,c,l){var p;const y=yield l.verify();try{let w;if(X("string"==typeof y,f,"argument-error"),X(l.type===ef,f,"argument-error"),w="string"==typeof c?{phoneNumber:c}:c,"session"in w){const P=w.session;if("phoneNumber"in w)return X("enroll"===P.type,f,"internal-error"),(yield function CS(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:start",B(f,c))}(f,{idToken:P.credential,phoneEnrollmentInfo:{phoneNumber:w.phoneNumber,recaptchaToken:y}})).phoneSessionInfo.sessionInfo;{X("signin"===P.type,f,"internal-error");const j=(null===(p=w.multiFactorHint)||void 0===p?void 0:p.uid)||w.multiFactorUid;return X(j,f,"missing-multi-factor-info"),(yield function PS(f,c){return Q(f,"POST","/v2/accounts/mfaSignIn:start",B(f,c))}(f,{mfaPendingCredential:P.credential,mfaEnrollmentId:j,phoneSignInInfo:{recaptchaToken:y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:P}=yield function ea(f,c){return xh.apply(this,arguments)}(f,{phoneNumber:w.phoneNumber,recaptchaToken:y});return P}}finally{l._reset()}}),Du.apply(this,arguments)}function hr(){return(hr=(0,D.A)(function*(f,c){const l=(0,ee.Ku)(f);if((0,Me._isFirebaseServerApp)(l.auth.app))return Promise.reject(je(l.auth));yield kh(l,c)})).apply(this,arguments)}let Su=(()=>{class f{constructor(l){this.providerId=f.PROVIDER_ID,this.auth=Xt(l)}verifyPhoneNumber(l,p){return Ot(this.auth,l,(0,ee.Ku)(p))}static credential(l,p){return Ri._fromVerification(l,p)}static credentialFromResult(l){return f.credentialFromTaggedObject(l)}static credentialFromError(l){return f.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:p,temporaryProof:y}=l;return p&&y?Ri._fromTokenResponse(p,y):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function Ms(f,c){return c?De(c):(X(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class Ns extends oo{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return us(c,this._buildIdpRequest())}_linkToIdToken(c,l){return us(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return us(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function oi(f){return Lh(f.auth,new Ns(f),f.bypassAuthState)}function II(f){const{auth:c,user:l}=f;return X(l,c,"internal-error"),mm(l,new Ns(f),f.bypassAuthState)}function wI(f){return tf.apply(this,arguments)}function tf(){return(tf=(0,D.A)(function*(f){const{auth:c,user:l}=f;return X(l,c,"internal-error"),kh(l,new Ns(f),f.bypassAuthState)})).apply(this,arguments)}class ls{constructor(c,l,p,y,w=!1){this.auth=c,this.resolver=p,this.user=y,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,D.A)(function*(p,y){c.pendingPromise={resolve:p,reject:y};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(w){c.reject(w)}});return function(p,y){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,D.A)(function*(){const{urlResponse:p,sessionId:y,postBody:w,tenantId:P,error:j,type:re}=c;if(j)return void l.reject(j);const Ie={auth:l.auth,requestUri:p,sessionId:y,tenantId:P||void 0,postBody:w||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(re)(Ie))}catch(Oe){l.reject(Oe)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return oi;case"linkViaPopup":case"linkViaRedirect":return wI;case"reauthViaPopup":case"reauthViaRedirect":return II;default:St(this.auth,"internal-error")}}resolve(c){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Um=new Mr(2e3,1e4);function hl(){return(hl=(0,D.A)(function*(f,c,l){if((0,Me._isFirebaseServerApp)(f.app))return Promise.reject(xt(f,"operation-not-supported-in-this-environment"));const p=Xt(f);me(f,c,Hn);const y=Ms(p,l);return new pl(p,"signInViaPopup",c,y).executeNotNull()})).apply(this,arguments)}function fl(){return(fl=(0,D.A)(function*(f,c,l){const p=(0,ee.Ku)(f);if((0,Me._isFirebaseServerApp)(p.auth.app))return Promise.reject(xt(p.auth,"operation-not-supported-in-this-environment"));me(p.auth,c,Hn);const y=Ms(p.auth,l);return new pl(p.auth,"reauthViaPopup",c,y,p).executeNotNull()})).apply(this,arguments)}function Ge(){return(Ge=(0,D.A)(function*(f,c,l){const p=(0,ee.Ku)(f);me(p.auth,c,Hn);const y=Ms(p.auth,l);return new pl(p.auth,"linkViaPopup",c,y,p).executeNotNull()})).apply(this,arguments)}let pl=(()=>{class f extends ls{constructor(l,p,y,w,P){super(l,p,w,P),this.provider=y,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var l=this;return(0,D.A)(function*(){const p=yield l.execute();return X(p,l.auth,"internal-error"),p})()}onExecution(){var l=this;return(0,D.A)(function*(){dt(1===l.filter.length,"Popup operations only handle one event");const p=ua();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],p),l.authWindow.associatedEvent=p,l.resolver._originValidation(l.auth).catch(y=>{l.reject(y)}),l.resolver._isIframeWebStorageSupported(l.auth,y=>{y||l.reject(xt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const l=()=>{var p,y;this.pollId=null!==(y=null===(p=this.authWindow)||void 0===p?void 0:p.window)&&void 0!==y&&y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(xt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,Um.get())};l()}}return f.currentPopupAction=null,f})();const MS="pendingRedirect",Ru=new Map;class bI extends ls{constructor(c,l,p=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,p),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,D.A)(function*(){let p=Ru.get(l.auth._key());if(!p){try{const w=(yield function TI(f,c){return gl.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;p=()=>Promise.resolve(w)}catch(y){p=()=>Promise.reject(y)}Ru.set(l.auth._key(),p)}return l.bypassAuthState||Ru.set(l.auth._key(),()=>Promise.resolve(null)),p()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,p=this;return(0,D.A)(function*(){if("signInViaRedirect"===c.type)return l().call(p,c);if("unknown"!==c.type){if(c.eventId){const y=yield p.auth._redirectUserForId(c.eventId);if(y)return p.user=y,l().call(p,c);p.resolve(null)}}else p.resolve(null)})()}onExecution(){return(0,D.A)(function*(){})()}cleanUp(){}}function gl(){return(gl=(0,D.A)(function*(f,c){const l=$m(c),p=jm(f);if(!(yield p._isAvailable()))return!1;const y="true"===(yield p._get(l));return yield p._remove(l),y})).apply(this,arguments)}function Os(f,c){return nf.apply(this,arguments)}function nf(){return(nf=(0,D.A)(function*(f,c){return jm(f)._set($m(c),"true")})).apply(this,arguments)}function rf(f,c){Ru.set(f._key(),c)}function jm(f){return De(f._redirectPersistence)}function $m(f){return He(MS,f.config.apiKey,f.name)}function ae(f,c,l){return function Et(f,c,l){return sr.apply(this,arguments)}(f,c,l)}function sr(){return(sr=(0,D.A)(function*(f,c,l){if((0,Me._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const p=Xt(f);me(f,c,Hn),yield p._initializationPromise;const y=Ms(p,l);return yield Os(y,p),y._openRedirect(p,c,"signInViaRedirect")})).apply(this,arguments)}function Ar(f,c,l){return function or(f,c,l){return ml.apply(this,arguments)}(f,c,l)}function ml(){return(ml=(0,D.A)(function*(f,c,l){const p=(0,ee.Ku)(f);if(me(p.auth,c,Hn),(0,Me._isFirebaseServerApp)(p.auth.app))return Promise.reject(je(p.auth));yield p.auth._initializationPromise;const y=Ms(p.auth,l);yield Os(y,p.auth);const w=yield fr(p);return y._openRedirect(p.auth,c,"reauthViaRedirect",w)})).apply(this,arguments)}function Pu(f,c,l){return function Qi(f,c,l){return xu.apply(this,arguments)}(f,c,l)}function xu(){return(xu=(0,D.A)(function*(f,c,l){const p=(0,ee.Ku)(f);me(p.auth,c,Hn),yield p.auth._initializationPromise;const y=Ms(p.auth,l);yield Xc(!1,p,c.providerId),yield Os(y,p.auth);const w=yield fr(p);return y._openRedirect(p.auth,c,"linkViaRedirect",w)})).apply(this,arguments)}function af(){return(af=(0,D.A)(function*(f,c){return yield Xt(f)._initializationPromise,uf(f,c,!1)})).apply(this,arguments)}function uf(f,c){return _l.apply(this,arguments)}function _l(){return(_l=(0,D.A)(function*(f,c,l=!1){if((0,Me._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const p=Xt(f),y=Ms(p,c),P=yield new bI(p,y,l).execute();return P&&!l&&(delete P.user._redirectEventId,yield p._persistUserIfCurrent(P.user),yield p._setRedirectUser(null,c)),P})).apply(this,arguments)}function fr(f){return xi.apply(this,arguments)}function xi(){return(xi=(0,D.A)(function*(f){const c=ua(`${f.uid}:::`);return f._redirectEventId=c,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),c})).apply(this,arguments)}class go{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(p=>{this.isEventForConsumer(c,p)&&(l=!0,this.sendToConsumer(c,p),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function Gm(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zm(f);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var p;if(c.error&&!zm(c)){const y=(null===(p=c.error.code)||void 0===p?void 0:p.split("auth/")[1])||"internal-error";l.onError(xt(this.auth,y))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const p=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&p}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yi(c))}saveEventToCache(c){this.cachedEventUids.add(Yi(c)),this.lastProcessedEventTime=Date.now()}}function Yi(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(c=>c).join("-")}function zm({type:f,error:c}){return"unknown"===f&&"auth/no-auth-event"===c?.code}function qm(f){return cf.apply(this,arguments)}function cf(){return(cf=(0,D.A)(function*(f,c={}){return Q(f,"GET","/v1/projects",c)})).apply(this,arguments)}const lf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,df=/^https?/;function Mu(){return(Mu=(0,D.A)(function*(f){if(f.config.emulator)return;const{authorizedDomains:c}=yield qm(f);for(const l of c)try{if(SI(l))return}catch{}St(f,"unauthorized-domain")})).apply(this,arguments)}function SI(f){const c=cn(),{protocol:l,hostname:p}=new URL(c);if(f.startsWith("chrome-extension://")){const P=new URL(f);return""===P.hostname&&""===p?"chrome-extension:"===l&&f.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&P.hostname===p}if(!df.test(l))return!1;if(lf.test(f))return p===f;const y=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(p)}const Km=new Mr(3e4,6e4);function yl(){const f=Dn().___jsl;if(f?.H)for(const c of Object.keys(f.H))if(f.H[c].r=f.H[c].r||[],f.H[c].L=f.H[c].L||[],f.H[c].r=[...f.H[c].L],f.CP)for(let l=0;l<f.CP.length;l++)f.CP[l]=null}let Nu=null;const Jm=new Mr(5e3,15e3),hf="__/auth/iframe",RI="emulator/auth/iframe",PI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mo(f){const c=f.config;X(c.authDomain,f,"auth-domain-config-required");const l=c.emulator?Es(c,RI):`https://${f.config.authDomain}/${hf}`,p={apiKey:c.apiKey,appName:f.name,v:Me.SDK_VERSION},y=Cr.get(f.config.apiHost);y&&(p.eid=y);const w=f._getFrameworks();return w.length&&(p.fw=w.join(",")),`${l}?${(0,ee.Am)(p).slice(1)}`}function ff(){return ff=(0,D.A)(function*(f){const c=yield function Ym(f){return Nu=Nu||function Qm(f){return new Promise((c,l)=>{var p,y,w;function P(){yl(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{yl(),l(xt(f,"network-request-failed"))},timeout:Km.get()})}if(null!==(y=null===(p=Dn().gapi)||void 0===p?void 0:p.iframes)&&void 0!==y&&y.Iframe)c(gapi.iframes.getContext());else{if(null===(w=Dn().gapi)||void 0===w||!w.load){const j=sm("iframefcb");return Dn()[j]=()=>{gapi.load?P():l(xt(f,"network-request-failed"))},im(`${function dS(){return Vc.gapiScript}()}?onload=${j}`).catch(re=>l(re))}P()}}).catch(c=>{throw Nu=null,c})}(f),Nu}(f),l=Dn().gapi;return X(l,f,"internal-error"),c.open({where:document.body,url:mo(f),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PI,dontclear:!0},p=>new Promise(function(){var y=(0,D.A)(function*(w,P){yield p.restyle({setHideOnLeave:!1});const j=xt(f,"network-request-failed"),re=Dn().setTimeout(()=>{P(j)},Jm.get());function Ie(){Dn().clearTimeout(re),w(p)}p.ping(Ie).then(Ie,()=>{P(j)})});return function(w,P){return y.apply(this,arguments)}}()))}),ff.apply(this,arguments)}const xI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ou{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const vl="__/auth/handler",El="emulator/auth/handler",Il=encodeURIComponent("fac");function ku(f,c,l,p,y,w){return wl.apply(this,arguments)}function wl(){return(wl=(0,D.A)(function*(f,c,l,p,y,w){X(f.config.authDomain,f,"auth-domain-config-required"),X(f.config.apiKey,f,"invalid-api-key");const P={apiKey:f.config.apiKey,appName:f.name,authType:l,redirectUrl:p,v:Me.SDK_VERSION,eventId:y};if(c instanceof Hn){c.setDefaultLanguage(f.languageCode),P.providerId=c.providerId||"",(0,ee.Im)(c.getCustomParameters())||(P.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Oe,Ne]of Object.entries(w||{}))P[Oe]=Ne}if(c instanceof Er){const Oe=c.getScopes().filter(Ne=>""!==Ne);Oe.length>0&&(P.scopes=Oe.join(","))}f.tenantId&&(P.tid=f.tenantId);const j=P;for(const Oe of Object.keys(j))void 0===j[Oe]&&delete j[Oe];const re=yield f._getAppCheckToken(),Ie=re?`#${Il}=${encodeURIComponent(re)}`:"";return`${function e_({config:f}){return f.emulator?Es(f,El):`https://${f.authDomain}/${vl}`}(f)}?${(0,ee.Am)(j).slice(1)}${Ie}`})).apply(this,arguments)}const pf="webStorageSupport",da=class la{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tn,this._completeRedirectFn=uf,this._overrideRedirectResult=rf}_openPopup(c,l,p,y){var w=this;return(0,D.A)(function*(){var P;dt(null===(P=w.eventManagers[c._key()])||void 0===P?void 0:P.manager,"_initialize() not called before _openPopup()");const j=yield ku(c,l,p,cn(),y);return function ks(f,c,l,p=500,y=600){const w=Math.max((window.screen.availHeight-y)/2,0).toString(),P=Math.max((window.screen.availWidth-p)/2,0).toString();let j="";const re=Object.assign(Object.assign({},xI),{width:p.toString(),height:y.toString(),top:w,left:P}),Ie=(0,ee.ZQ)().toLowerCase();l&&(j=Nt(Ie)?"_blank":l),Vr(Ie)&&(c=c||"http://localhost",re.scrollbars="yes");const Oe=Object.entries(re).reduce((hn,[Mi,Co])=>`${hn}${Mi}=${Co},`,"");if(function kc(f=(0,ee.ZQ)()){var c;return Zo(f)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(Ie)&&"_self"!==j)return function OI(f,c){const l=document.createElement("a");l.href=f,l.target=c;const p=document.createEvent("MouseEvent");p.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(p)}(c||"",j),new Ou(null);const Ne=window.open(c||"",j,Oe);X(Ne,f,"popup-blocked");try{Ne.focus()}catch{}return new Ou(Ne)}(c,j,ua())})()}_openRedirect(c,l,p,y){var w=this;return(0,D.A)(function*(){return yield w._originValidation(c),function Dm(f){Dn().location.href=f}(yield ku(c,l,p,cn(),y)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:y,promise:w}=this.eventManagers[l];return y?Promise.resolve(y):(dt(w,"If manager is not set, promise should be"),w)}const p=this.initAndGetManager(c);return this.eventManagers[l]={promise:p},p.catch(()=>{delete this.eventManagers[l]}),p}initAndGetManager(c){var l=this;return(0,D.A)(function*(){const p=yield function dn(f){return ff.apply(this,arguments)}(c),y=new go(c);return p.register("authEvent",w=>(X(w?.authEvent,c,"invalid-auth-event"),{status:y.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:y},l.iframes[c._key()]=p,y})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(pf,{type:pf},y=>{var w;const P=null===(w=y?.[0])||void 0===w?void 0:w[pf];void 0!==P&&l(!!P),St(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Wm(f){return Mu.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return Pt()||io()||Zo()}};class t_{constructor(c){this.factorId=c}_process(c,l,p){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,p);case"signin":return this._finalizeSignIn(c,l.credential);default:return st("unexpected MultiFactorSessionType")}}}class n_ extends t_{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new n_(c)}_finalizeEnroll(c,l,p){return function bS(f,c){return Q(f,"POST","/v2/accounts/mfaEnrollment:finalize",B(f,c))}(c,{idToken:l,displayName:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function dI(f,c){return Q(f,"POST","/v2/accounts/mfaSignIn:finalize",B(f,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gf=(()=>{class f{constructor(){}static assertion(l){return n_._fromCredential(l)}}return f.FACTOR_ID="phone",f})();var kI="@firebase/auth";class Vu{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,D.A)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(p=>{c(p?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pr(){return window}(0,ee.XA)("authIdTokenMaxAge"),function cS(f){Vc=f}({loadJS:f=>new Promise((c,l)=>{const p=document.createElement("script");p.setAttribute("src",f),p.onload=c,p.onerror=y=>{const w=xt("internal-error");w.customData=y,l(w)},p.type="text/javascript",p.charset="UTF-8",function UI(){var f,c;return null!==(c=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==c?c:document}().appendChild(p)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Fu(f){(0,Me._registerComponent)(new qt.uA("auth",(c,{options:l})=>{const p=c.getProvider("app").getImmediate(),y=c.getProvider("heartbeat"),w=c.getProvider("app-check-internal"),{apiKey:P,authDomain:j}=p.options;X(P&&!P.includes(":"),"invalid-api-key",{appName:p.name});const re={apiKey:P,authDomain:j,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rm(f)},Ie=new JE(p,y,w,re);return function eI(f,c){const l=c?.persistence||[],p=(Array.isArray(l)?l:[l]).map(De);c?.errorMap&&f._updateErrorMap(c.errorMap),f._initializeWithPersistence(p,c?.popupRedirectResolver)}(Ie,l),Ie},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,p)=>{c.getProvider("auth-internal").initialize()})),(0,Me._registerComponent)(new qt.uA("auth-internal",c=>{const l=Xt(c.getProvider("auth").getImmediate());return new Vu(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Me.registerVersion)(kI,"1.7.9",function VI(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,Me.registerVersion)(kI,"1.7.9","esm2017")}("Browser");function Lu(){return Lu=(0,D.A)(function*(f,c,l){var p;const{BuildInfo:y}=pr();dt(c.sessionId,"AuthEvent did not contain a session ID");const w=yield function a_(f){return Dl.apply(this,arguments)}(c.sessionId),P={};return Zo()?P.ibi=y.packageName:so()?P.apn=y.packageName:St(f,"operation-not-supported-in-this-environment"),y.displayName&&(P.appDisplayName=y.displayName),P.sessionId=w,ku(f,l,c.type,void 0,null!==(p=c.eventId)&&void 0!==p?p:void 0,P)}),Lu.apply(this,arguments)}function ha(){return(ha=(0,D.A)(function*(f){const{BuildInfo:c}=pr(),l={};Zo()?l.iosBundleId=c.packageName:so()?l.androidPackageName=c.packageName:St(f,"operation-not-supported-in-this-environment"),yield qm(f,l)})).apply(this,arguments)}function Tl(){return(Tl=(0,D.A)(function*(f,c,l){const{cordova:p}=pr();let y=()=>{};try{yield new Promise((w,P)=>{let j=null;function re(){var Ne;w();const hn=null===(Ne=p.plugins.browsertab)||void 0===Ne?void 0:Ne.close;"function"==typeof hn&&hn(),"function"==typeof l?.close&&l.close()}function Ie(){j||(j=window.setTimeout(()=>{P(xt(f,"redirect-cancelled-by-user"))},2e3))}function Oe(){"visible"===document?.visibilityState&&Ie()}c.addPassiveListener(re),document.addEventListener("resume",Ie,!1),so()&&document.addEventListener("visibilitychange",Oe,!1),y=()=>{c.removePassiveListener(re),document.removeEventListener("resume",Ie,!1),document.removeEventListener("visibilitychange",Oe,!1),j&&window.clearTimeout(j)}})}finally{y()}})).apply(this,arguments)}function Dl(){return(Dl=(0,D.A)(function*(f){const c=function $I(f){if(dt(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const c=new ArrayBuffer(f.length),l=new Uint8Array(c);for(let p=0;p<f.length;p++)l[p]=f.charCodeAt(p);return l}(f),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(y=>y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class _o extends go{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInitialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInitialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,D.A)(function*(){yield c.initPromise})()}}function Ef(f){return yo.apply(this,arguments)}function yo(){return(yo=(0,D.A)(function*(f){const c=yield If()._get(Gn(f));return c&&(yield If()._remove(Gn(f))),c})).apply(this,arguments)}function br(){const f=[];for(let l=0;l<20;l++){const p=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(p))}return f.join("")}function If(){return De(Kh)}function Gn(f){return He("authEvent",f.config.apiKey,f.name)}function Uu(f){if(!f?.includes("?"))return{};const[c,...l]=f.split("?");return(0,ee.I9)(l.join("?"))}const pa=class fa{constructor(){this._redirectPersistence=tn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=uf,this._overrideRedirectResult=rf}_initialize(c){var l=this;return(0,D.A)(function*(){const p=c._key();let y=l.eventManagers.get(p);return y||(y=new _o(c),l.eventManagers.set(p,y),l.attachCallbackListeners(c,y)),y})()}_openPopup(c){St(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,p,y){var w=this;return(0,D.A)(function*(){!function o_(f){var c,l,p,y,w,P,j,re,Ie,Oe;const Ne=pr();X("function"==typeof(null===(c=Ne?.universalLinks)||void 0===c?void 0:c.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),X(typeof(null===(l=Ne?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),X("function"==typeof(null===(w=null===(y=null===(p=Ne?.cordova)||void 0===p?void 0:p.plugins)||void 0===y?void 0:y.browsertab)||void 0===w?void 0:w.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(re=null===(j=null===(P=Ne?.cordova)||void 0===P?void 0:P.plugins)||void 0===j?void 0:j.browsertab)||void 0===re?void 0:re.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),X("function"==typeof(null===(Oe=null===(Ie=Ne?.cordova)||void 0===Ie?void 0:Ie.InAppBrowser)||void 0===Oe?void 0:Oe.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const P=yield w._initialize(c);yield P.initialized(),P.resetRedirect(),function DI(){Ru.clear()}(),yield w._originValidation(c);const j=function HI(f,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:br(),postBody:null,tenantId:f.tenantId,error:xt(f,"no-auth-event")}}(c,p,y);yield function u_(f,c){return If()._set(Gn(f),c)}(c,j);const re=yield function bl(f,c,l){return Lu.apply(this,arguments)}(c,j,l),Ie=yield function vf(f){const{cordova:c}=pr();return new Promise(l=>{c.plugins.browsertab.isAvailable(p=>{let y=null;p?c.plugins.browsertab.openUrl(f):y=c.InAppBrowser.open(f,function de(f=(0,ee.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),l(y)})})}(re);return function jI(f,c,l){return Tl.apply(this,arguments)}(c,P,Ie)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function s_(f){return ha.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:p,handleOpenURL:y,BuildInfo:w}=pr(),P=setTimeout((0,D.A)(function*(){yield Ef(c),l.onEvent(vo())}),500),j=function(){var Oe=(0,D.A)(function*(Ne){clearTimeout(P);const hn=yield Ef(c);let Mi=null;hn&&Ne?.url&&(Mi=function zI(f,c){var l,p;const y=function GI(f){const c=Uu(f),l=c.link?decodeURIComponent(c.link):void 0,p=Uu(l).link,y=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Uu(y).link||y||p||l||f}(c);if(y.includes("/__/auth/callback")){const w=Uu(y),P=w.firebaseError?function wf(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(w.firebaseError)):null,j=null===(p=null===(l=P?.code)||void 0===l?void 0:l.split("auth/"))||void 0===p?void 0:p[1],re=j?xt(j):null;return re?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:re,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:y,postBody:null}}return null}(hn,Ne.url)),l.onEvent(Mi||vo())});return function(hn){return Oe.apply(this,arguments)}}();typeof p<"u"&&"function"==typeof p.subscribe&&p.subscribe(null,j);const re=y,Ie=`${w.packageName.toLowerCase()}://`;pr().handleOpenURL=function(){var Oe=(0,D.A)(function*(Ne){if(Ne.toLowerCase().startsWith(Ie)&&j({url:Ne}),"function"==typeof re)try{re(Ne)}catch(hn){console.error(hn)}});return function(Ne){return Oe.apply(this,arguments)}}()}};function vo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:xt("no-auth-event")}}function Bu(){var f;return(null===(f=self?.location)||void 0===f?void 0:f.protocol)||null}function qI(f=(0,ee.ZQ)()){return!("file:"!==Bu()&&"ionic:"!==Bu()&&"capacitor:"!==Bu()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function Eo(){try{const f=self.localStorage,c=ua();if(f)return f.setItem(c,"1"),f.removeItem(c),!function LS(f=(0,ee.ZQ)()){return function VS(){return(0,ee.lT)()&&11===document?.documentMode}()||function FS(f=(0,ee.ZQ)()){return/Edge\/\d+/.test(f)}(f)}()||(0,ee.zW)()}catch{return Cf()&&(0,ee.zW)()}return!1}function Cf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function bf(){return(function OS(){return"http:"===Bu()||"https:"===Bu()}()||(0,ee.sr)()||qI())&&!function kS(){return(0,ee.lV)()||(0,ee.Ll)()}()&&Eo()&&!Cf()}function Mn(){return qI()&&typeof document<"u"}function Io(){return(Io=(0,D.A)(function*(){return!!Mn()&&new Promise(f=>{const c=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),f(!0)})})})).apply(this,arguments)}const nn={LOCAL:"local",NONE:"none",SESSION:"session"},Ji=X,Tf="persistence";function wo(f){return Df.apply(this,arguments)}function Df(){return(Df=(0,D.A)(function*(f){yield f._initializationPromise;const c=l_(),l=He(Tf,f.config.apiKey,f.name);c&&c.setItem(l,f._getPersistence())})).apply(this,arguments)}function l_(){var f;try{return(null===(f=function KI(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const BS=X;class Nn{constructor(){this.browserResolver=De(da),this.cordovaResolver=De(pa),this.underlyingResolver=null,this._redirectPersistence=tn,this._completeRedirectFn=uf,this._overrideRedirectResult=rf}_initialize(c){var l=this;return(0,D.A)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,p,y){var w=this;return(0,D.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openPopup(c,l,p,y)})()}_openRedirect(c,l,p,y){var w=this;return(0,D.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openRedirect(c,l,p,y)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return Mn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return BS(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,D.A)(function*(){if(c.underlyingResolver)return;const l=yield function WI(){return Io.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function xl(f){return f.unwrap()}function jS(f){return h_(f)}function h_(f){const{_tokenResponse:c}=f instanceof ee.g?f.customData:f;if(!c)return null;if(!(f instanceof ee.g)&&"temporaryProof"in c&&"phoneNumber"in c)return Su.credentialFromResult(f);const l=c.providerId;if(!l||l===rt.PASSWORD)return null;let p;switch(l){case rt.GOOGLE:p=Gc;break;case rt.FACEBOOK:p=gu;break;case rt.GITHUB:p=qc;break;case rt.TWITTER:p=Nh;break;default:const{oauthIdToken:y,oauthAccessToken:w,oauthTokenSecret:P,pendingToken:j,nonce:re}=c;return w||P||y||j?j?l.startsWith("saml.")?Lr._create(l,j):Si._fromParams({providerId:l,signInMethod:l,pendingToken:j,idToken:y,accessToken:w}):new ht(l).credential({idToken:y,accessToken:w,rawNonce:re}):null}return f instanceof ee.g?p.credentialFromError(f):p.credentialFromResult(f)}function jr(f,c){return c.catch(l=>{throw l instanceof ee.g&&function d_(f,c){var l;const p=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new QI(f,function AS(f,c){var l;const p=(0,ee.Ku)(f),y=c;return X(c.customData.operationType,p,"argument-error"),X(null===(l=y.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,p,"argument-error"),Am._fromError(p,y)}(f,c));else if(p){const y=h_(c),w=c;y&&(w.credential=y,w.tenantId=p.tenantId||void 0,w.email=p.email||void 0,w.phoneNumber=p.phoneNumber||void 0)}}(f,l),l}).then(l=>{const y=l.user;return{operationType:l.operationType,credential:jS(l),additionalUserInfo:wr(l),user:ds.getOrCreate(y)}})}function Sf(f,c){return Rf.apply(this,arguments)}function Rf(){return(Rf=(0,D.A)(function*(f,c){const l=yield c;return{verificationId:l.verificationId,confirm:p=>jr(f,l.confirm(p))}})).apply(this,arguments)}class QI{constructor(c,l){this.resolver=l,this.auth=function ma(f){return f.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return jr(xl(this.auth),this.resolver.resolveSignIn(c))}}class ds{constructor(c){this._delegate=c,this.multiFactor=function bm(f){const c=(0,ee.Ku)(f);return sl.has(c)||sl.set(c,Cm._fromUser(c)),sl.get(c)}(c)}static getOrCreate(c){return ds.USER_MAP.has(c)||ds.USER_MAP.set(c,new ds(c)),ds.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,D.A)(function*(){return jr(l.auth,Ur(l._delegate,c))})()}linkWithPhoneNumber(c,l){var p=this;return(0,D.A)(function*(){return Sf(p.auth,function EI(f,c,l){return Ei.apply(this,arguments)}(p._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,D.A)(function*(){return jr(l.auth,function CI(f,c,l){return Ge.apply(this,arguments)}(l._delegate,c,Nn))})()}linkWithRedirect(c){var l=this;return(0,D.A)(function*(){return yield wo(Xt(l.auth)),Pu(l._delegate,c,Nn)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,D.A)(function*(){return jr(l.auth,_m(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return Sf(this.auth,function Lm(f,c,l){return ll.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return jr(this.auth,function Bm(f,c,l){return fl.apply(this,arguments)}(this._delegate,c,Nn))}reauthenticateWithRedirect(c){var l=this;return(0,D.A)(function*(){return yield wo(Xt(l.auth)),Ar(l._delegate,c,Nn)})()}sendEmailVerification(c){return function sa(f,c){return _i.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,D.A)(function*(){return yield function iI(f,c){return ni.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function ft(f,c){const l=(0,ee.Ku)(f);return(0,Me._isFirebaseServerApp)(l.auth.app)?Promise.reject(je(l.auth)):rl(l,c,null)}(this._delegate,c)}updatePassword(c){return function yS(f,c){return rl((0,ee.Ku)(f),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function dl(f,c){return hr.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function Eu(f,c){return co.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function vu(f,c,l){return nl.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ds.USER_MAP=new WeakMap;const Ao=X;let ju=(()=>{class f{constructor(l,p){if(this.app=l,p.isInitialized())return this._delegate=p.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:y}=l.options;Ao(y,"invalid-api-key",{appName:l.name}),Ao(y,"invalid-api-key",{appName:l.name});const w=typeof window<"u"?Nn:void 0;this._delegate=p.initialize({options:{persistence:$u(y,l.name),popupRedirectResolver:w}}),this._delegate._updateErrorMap(Un),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ds.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,p){!function Ah(f,c,l){const p=Xt(f);X(p._canInitEmulator,p,"emulator-config-failed"),X(/^https?:\/\//.test(c),p,"invalid-emulator-scheme");const y=!!l?.disableWarnings,w=am(c),{host:P,port:j}=function Uc(f){const c=am(f),l=/(\/\/)?([^?#/]+)/.exec(f.substr(c.length));if(!l)return{host:"",port:null};const p=l[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(p);if(y){const w=y[1];return{host:w,port:cu(p.substr(w.length+1))}}{const[w,P]=p.split(":");return{host:w,port:cu(P)}}}(c);p.config.emulator={url:`${w}//${P}${null===j?"":`:${j}`}/`},p.settings.appVerificationDisabledForTesting=!0,p.emulatorConfig=Object.freeze({host:P,port:j,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:y})}),y||function Ch(){function f(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,l,p)}applyActionCode(l){return function sI(f,c){return Zt.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return Pe(this._delegate,l)}confirmPasswordReset(l,p){return function tl(f,c,l){return zh.apply(this,arguments)}(this._delegate,l,p)}createUserWithEmailAndPassword(l,p){var y=this;return(0,D.A)(function*(){return jr(y._delegate,function yu(f,c,l){return er.apply(this,arguments)}(y._delegate,l,p))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function Tn(f,c){return uo.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function ia(f,c){const l=pu.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,D.A)(function*(){Ao(bf(),l._delegate,"operation-not-supported-in-this-environment");const p=yield function sf(f,c){return af.apply(this,arguments)}(l._delegate,Nn);return p?jr(l._delegate,Promise.resolve(p)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function c_(f,c){Xt(f)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,p,y){const{next:w,error:P,complete:j}=f_(l,p,y);return this._delegate.onAuthStateChanged(w,P,j)}onIdTokenChanged(l,p,y){const{next:w,error:P,complete:j}=f_(l,p,y);return this._delegate.onIdTokenChanged(w,P,j)}sendSignInLinkToEmail(l,p){return function bn(f,c,l){return qi.apply(this,arguments)}(this._delegate,l,p)}sendPasswordResetEmail(l,p){return function vm(f,c,l){return el.apply(this,arguments)}(this._delegate,l,p||void 0)}setPersistence(l){var p=this;return(0,D.A)(function*(){let y;switch(function Pl(f,c){Ji(Object.values(nn).includes(c),f,"invalid-persistence-type"),(0,ee.lV)()?Ji(c!==nn.SESSION,f,"unsupported-persistence-type"):(0,ee.Ll)()?Ji(c===nn.NONE,f,"unsupported-persistence-type"):Cf()?Ji(c===nn.NONE||c===nn.LOCAL&&(0,ee.zW)(),f,"unsupported-persistence-type"):Ji(c===nn.NONE||Eo(),f,"unsupported-persistence-type")}(p._delegate,l),l){case nn.SESSION:y=tn;break;case nn.LOCAL:y=(yield De(bu)._isAvailable())?bu:Kh;break;case nn.NONE:y=xn;break;default:return St("argument-error",{appName:p._delegate.name})}return p._delegate.setPersistence(y)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return jr(this._delegate,function pm(f){return Qc.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return jr(this._delegate,Zc(this._delegate,l))}signInWithCustomToken(l){return jr(this._delegate,function ym(f,c){return Ye.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,p){return jr(this._delegate,function ra(f,c,l){return(0,Me._isFirebaseServerApp)(f.app)?Promise.reject(je(f)):Zc((0,ee.Ku)(f),ta.credential(c,l)).catch(function(){var p=(0,D.A)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&Rs(f),y});return function(y){return p.apply(this,arguments)}}())}(this._delegate,l,p))}signInWithEmailLink(l,p){return jr(this._delegate,function tt(f,c,l){return ao.apply(this,arguments)}(this._delegate,l,p))}signInWithPhoneNumber(l,p){return Sf(this._delegate,function vI(f,c,l){return Tu.apply(this,arguments)}(this._delegate,l,p))}signInWithPopup(l){var p=this;return(0,D.A)(function*(){return Ao(bf(),p._delegate,"operation-not-supported-in-this-environment"),jr(p._delegate,function AI(f,c,l){return hl.apply(this,arguments)}(p._delegate,l,Nn))})()}signInWithRedirect(l){var p=this;return(0,D.A)(function*(){return Ao(bf(),p._delegate,"operation-not-supported-in-this-environment"),yield wo(p._delegate),ae(p._delegate,l,Nn)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function en(f,c){return ii.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=nn,f})();function f_(f,c,l){let p=f;"function"!=typeof f&&({next:p,error:c,complete:l}=f);const y=p;return{next:P=>y(P&&ds.getOrCreate(P)),error:c,complete:l}}function $u(f,c){const l=function US(f,c){const l=l_();if(!l)return[];const p=He(Tf,f,c);switch(l.getItem(p)){case nn.NONE:return[xn];case nn.LOCAL:return[bu,tn];case nn.SESSION:return[tn];default:return[]}}(f,c);if(typeof self<"u"&&!l.includes(bu)&&l.push(bu),typeof window<"u")for(const p of[Kh,tn])l.includes(p)||l.push(p);return l.includes(xn)||l.push(xn),l}class Pf{constructor(){this.providerId="phone",this._delegate=new Su(xl($e.A.auth()))}static credential(c,l){return Su.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}Pf.PHONE_SIGN_IN_METHOD=Su.PHONE_SIGN_IN_METHOD,Pf.PROVIDER_ID=Su.PROVIDER_ID;const Ml=X;class YI{constructor(c,l,p=$e.A.app()){var y;Ml(null===(y=p.options)||void 0===y?void 0:y.apiKey,"invalid-api-key",{appName:p.name}),this._delegate=new yI(p.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function xf(f){f.INTERNAL.registerComponent(new qt.uA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),p=c.getProvider("auth");return new ju(l,p)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ta,FacebookAuthProvider:gu,GithubAuthProvider:qc,GoogleAuthProvider:Gc,OAuthProvider:ht,SAMLAuthProvider:_u,PhoneAuthProvider:Pf,PhoneMultiFactorGenerator:gf,RecaptchaVerifier:YI,TwitterAuthProvider:Nh,Auth:ju,AuthCredential:oo,Error:ee.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.14")}($e.A)},749:(zi,Qn,Xe)=>{Xe.d(Qn,{P2:()=>Bn});var D=Xe(467);const $e=(me,Te)=>Te.some(X=>me instanceof X);let Me,ee;const qt=new WeakMap,Wt=new WeakMap,rt=new WeakMap,ie=new WeakMap,pe=new WeakMap;let _t={get(me,Te,X){if(me instanceof IDBTransaction){if("done"===Te)return Wt.get(me);if("objectStoreNames"===Te)return me.objectStoreNames||rt.get(me);if("store"===Te)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return We(me[Te])},set:(me,Te,X)=>(me[Te]=X,!0),has:(me,Te)=>me instanceof IDBTransaction&&("done"===Te||"store"===Te)||Te in me};function qe(me){return"function"==typeof me?function vt(me){return me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Jt(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(me)?function(...Te){return me.apply(Cn(this),Te),We(qt.get(this))}:function(...Te){return We(me.apply(Cn(this),Te))}:function(Te,...X){const st=me.call(Cn(this),Te,...X);return rt.set(st,Te.sort?Te.sort():[Te]),We(st)}}(me):(me instanceof IDBTransaction&&function lt(me){if(Wt.has(me))return;const Te=new Promise((X,st)=>{const dt=()=>{me.removeEventListener("complete",cn),me.removeEventListener("error",zt),me.removeEventListener("abort",zt)},cn=()=>{X(),dt()},zt=()=>{st(me.error||new DOMException("AbortError","AbortError")),dt()};me.addEventListener("complete",cn),me.addEventListener("error",zt),me.addEventListener("abort",zt)});Wt.set(me,Te)}(me),$e(me,function yt(){return Me||(Me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(me,_t):me)}function We(me){if(me instanceof IDBRequest)return function Ve(me){const Te=new Promise((X,st)=>{const dt=()=>{me.removeEventListener("success",cn),me.removeEventListener("error",zt)},cn=()=>{X(We(me.result)),dt()},zt=()=>{st(me.error),dt()};me.addEventListener("success",cn),me.addEventListener("error",zt)});return Te.then(X=>{X instanceof IDBCursor&&qt.set(X,me)}).catch(()=>{}),pe.set(Te,me),Te}(me);if(ie.has(me))return ie.get(me);const Te=qe(me);return Te!==me&&(ie.set(me,Te),pe.set(Te,me)),Te}const Cn=me=>pe.get(me);function Bn(me,Te,{blocked:X,upgrade:st,blocking:dt,terminated:cn}={}){const zt=indexedDB.open(me,Te),pt=We(zt);return st&&zt.addEventListener("upgradeneeded",ln=>{st(We(zt.result),ln.oldVersion,ln.newVersion,We(zt.transaction),ln)}),X&&zt.addEventListener("blocked",ln=>X(ln.oldVersion,ln.newVersion,ln)),pt.then(ln=>{cn&&ln.addEventListener("close",()=>cn()),dt&&ln.addEventListener("versionchange",Zr=>dt(Zr.oldVersion,Zr.newVersion,Zr))}).catch(()=>{}),pt}const St=["get","getKey","getAll","getAllKeys","count"],xt=["put","add","delete","clear"],Sn=new Map;function je(me,Te){if(!(me instanceof IDBDatabase)||Te in me||"string"!=typeof Te)return;if(Sn.get(Te))return Sn.get(Te);const X=Te.replace(/FromIndex$/,""),st=Te!==X,dt=xt.includes(X);if(!(X in(st?IDBIndex:IDBObjectStore).prototype)||!dt&&!St.includes(X))return;const cn=function(){var zt=(0,D.A)(function*(pt,...ln){const Zr=this.transaction(pt,dt?"readwrite":"readonly");let Mr=Zr.store;return st&&(Mr=Mr.index(ln.shift())),(yield Promise.all([Mr[X](...ln),dt&&Zr.done]))[0]});return function(ln){return zt.apply(this,arguments)}}();return Sn.set(Te,cn),cn}!function Un(me){_t=me(_t)}(me=>({...me,get:(Te,X,st)=>je(Te,X)||me.get(Te,X,st),has:(Te,X)=>!!je(Te,X)||me.has(Te,X)}))},467:(zi,Qn,Xe)=>{function D(Me,ee,yt,Jt,qt,Wt,rt){try{var ie=Me[Wt](rt),pe=ie.value}catch(Ve){return void yt(Ve)}ie.done?ee(pe):Promise.resolve(pe).then(Jt,qt)}function $e(Me){return function(){var ee=this,yt=arguments;return new Promise(function(Jt,qt){var Wt=Me.apply(ee,yt);function rt(pe){D(Wt,Jt,qt,rt,ie,"next",pe)}function ie(pe){D(Wt,Jt,qt,rt,ie,"throw",pe)}rt(void 0)})}}Xe.d(Qn,{A:()=>$e})},635:(zi,Qn,Xe)=>{function ee(H,Z){var te={};for(var B in H)Object.prototype.hasOwnProperty.call(H,B)&&Z.indexOf(B)<0&&(te[B]=H[B]);if(null!=H&&"function"==typeof Object.getOwnPropertySymbols){var Q=0;for(B=Object.getOwnPropertySymbols(H);Q<B.length;Q++)Z.indexOf(B[Q])<0&&Object.prototype.propertyIsEnumerable.call(H,B[Q])&&(te[B[Q]]=H[B[Q]])}return te}function Ve(H,Z,te,B){return new(te||(te=Promise))(function(he,le){function it(At){try{ze(B.next(At))}catch(yn){le(yn)}}function Tt(At){try{ze(B.throw(At))}catch(yn){le(yn)}}function ze(At){At.done?he(At.value):function Q(he){return he instanceof te?he:new te(function(le){le(he)})}(At.value).then(it,Tt)}ze((B=B.apply(H,Z||[])).next())})}function Yn(H){return this instanceof Yn?(this.v=H,this):new Yn(H)}function St(H,Z,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,B=te.apply(H,Z||[]),he=[];return Q=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),it("next"),it("throw"),it("return",function le(Ct){return function(Rt){return Promise.resolve(Rt).then(Ct,yn)}}),Q[Symbol.asyncIterator]=function(){return this},Q;function it(Ct,Rt){B[Ct]&&(Q[Ct]=function(Rn){return new Promise(function(lr,Nr){he.push([Ct,Rn,lr,Nr])>1||Tt(Ct,Rn)})},Rt&&(Q[Ct]=Rt(Q[Ct])))}function Tt(Ct,Rt){try{!function ze(Ct){Ct.value instanceof Yn?Promise.resolve(Ct.value.v).then(At,yn):Ti(he[0][2],Ct)}(B[Ct](Rt))}catch(Rn){Ti(he[0][3],Rn)}}function At(Ct){Tt("next",Ct)}function yn(Ct){Tt("throw",Ct)}function Ti(Ct,Rt){Ct(Rt),he.shift(),he.length&&Tt(he[0][0],he[0][1])}}function Sn(H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,Z=H[Symbol.asyncIterator];return Z?Z.call(H):(H=function vt(H){var Z="function"==typeof Symbol&&Symbol.iterator,te=Z&&H[Z],B=0;if(te)return te.call(H);if(H&&"number"==typeof H.length)return{next:function(){return H&&B>=H.length&&(H=void 0),{value:H&&H[B++],done:!H}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}(H),te={},B("next"),B("throw"),B("return"),te[Symbol.asyncIterator]=function(){return this},te);function B(he){te[he]=H[he]&&function(le){return new Promise(function(it,Tt){!function Q(he,le,it,Tt){Promise.resolve(Tt).then(function(ze){he({value:ze,done:it})},le)}(it,Tt,(le=H[he](le)).done,le.value)})}}}Xe.d(Qn,{AQ:()=>St,N3:()=>Yn,Tt:()=>ee,sH:()=>Ve,xN:()=>Sn}),"function"==typeof SuppressedError&&SuppressedError}},zi=>{zi(zi.s=994)}]);